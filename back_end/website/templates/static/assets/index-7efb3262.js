(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))n(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const r of i.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&n(r)}).observe(document,{childList:!0,subtree:!0});function s(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerPolicy&&(i.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?i.credentials="include":o.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(o){if(o.ep)return;o.ep=!0;const i=s(o);fetch(o.href,i)}})();/**
* @vue/shared v3.4.21
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function mn(e,t){const s=new Set(e.split(","));return t?n=>s.has(n.toLowerCase()):n=>s.has(n)}const ee={},Ot=[],$e=()=>{},or=()=>!1,Ts=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),yn=e=>e.startsWith("onUpdate:"),de=Object.assign,vn=(e,t)=>{const s=e.indexOf(t);s>-1&&e.splice(s,1)},ir=Object.prototype.hasOwnProperty,K=(e,t)=>ir.call(e,t),j=Array.isArray,Mt=e=>cs(e)==="[object Map]",Dt=e=>cs(e)==="[object Set]",Hn=e=>cs(e)==="[object Date]",q=e=>typeof e=="function",ie=e=>typeof e=="string",at=e=>typeof e=="symbol",X=e=>e!==null&&typeof e=="object",Do=e=>(X(e)||q(e))&&q(e.then)&&q(e.catch),Bo=Object.prototype.toString,cs=e=>Bo.call(e),rr=e=>cs(e).slice(8,-1),Ko=e=>cs(e)==="[object Object]",wn=e=>ie(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,Jt=mn(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Os=e=>{const t=Object.create(null);return s=>t[s]||(t[s]=e(s))},lr=/-(\w)/g,De=Os(e=>e.replace(lr,(t,s)=>s?s.toUpperCase():"")),cr=/\B([A-Z])/g,Et=Os(e=>e.replace(cr,"-$1").toLowerCase()),Ms=Os(e=>e.charAt(0).toUpperCase()+e.slice(1)),Ks=Os(e=>e?`on${Ms(e)}`:""),ut=(e,t)=>!Object.is(e,t),ys=(e,t)=>{for(let s=0;s<e.length;s++)e[s](t)},$s=(e,t,s)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value:s})},ts=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let Dn;const zo=()=>Dn||(Dn=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function bn(e){if(j(e)){const t={};for(let s=0;s<e.length;s++){const n=e[s],o=ie(n)?fr(n):bn(n);if(o)for(const i in o)t[i]=o[i]}return t}else if(ie(e)||X(e))return e}const ar=/;(?![^(]*\))/g,ur=/:([^]+)/,dr=/\/\*[^]*?\*\//g;function fr(e){const t={};return e.replace(dr,"").split(ar).forEach(s=>{if(s){const n=s.split(ur);n.length>1&&(t[n[0].trim()]=n[1].trim())}}),t}function He(e){let t="";if(ie(e))t=e;else if(j(e))for(let s=0;s<e.length;s++){const n=He(e[s]);n&&(t+=n+" ")}else if(X(e))for(const s in e)e[s]&&(t+=s+" ");return t.trim()}const hr="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",pr=mn(hr);function Wo(e){return!!e||e===""}function _r(e,t){if(e.length!==t.length)return!1;let s=!0;for(let n=0;s&&n<e.length;n++)s=xt(e[n],t[n]);return s}function xt(e,t){if(e===t)return!0;let s=Hn(e),n=Hn(t);if(s||n)return s&&n?e.getTime()===t.getTime():!1;if(s=at(e),n=at(t),s||n)return e===t;if(s=j(e),n=j(t),s||n)return s&&n?_r(e,t):!1;if(s=X(e),n=X(t),s||n){if(!s||!n)return!1;const o=Object.keys(e).length,i=Object.keys(t).length;if(o!==i)return!1;for(const r in e){const l=e.hasOwnProperty(r),c=t.hasOwnProperty(r);if(l&&!c||!l&&c||!xt(e[r],t[r]))return!1}}return String(e)===String(t)}function xn(e,t){return e.findIndex(s=>xt(s,t))}const Re=e=>ie(e)?e:e==null?"":j(e)||X(e)&&(e.toString===Bo||!q(e.toString))?JSON.stringify(e,Go,2):String(e),Go=(e,t)=>t&&t.__v_isRef?Go(e,t.value):Mt(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((s,[n,o],i)=>(s[zs(n,i)+" =>"]=o,s),{})}:Dt(t)?{[`Set(${t.size})`]:[...t.values()].map(s=>zs(s))}:at(t)?zs(t):X(t)&&!j(t)&&!Ko(t)?String(t):t,zs=(e,t="")=>{var s;return at(e)?`Symbol(${(s=e.description)!=null?s:t})`:e};/**
* @vue/reactivity v3.4.21
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Pe;class gr{constructor(t=!1){this.detached=t,this._active=!0,this.effects=[],this.cleanups=[],this.parent=Pe,!t&&Pe&&(this.index=(Pe.scopes||(Pe.scopes=[])).push(this)-1)}get active(){return this._active}run(t){if(this._active){const s=Pe;try{return Pe=this,t()}finally{Pe=s}}}on(){Pe=this}off(){Pe=this.parent}stop(t){if(this._active){let s,n;for(s=0,n=this.effects.length;s<n;s++)this.effects[s].stop();for(s=0,n=this.cleanups.length;s<n;s++)this.cleanups[s]();if(this.scopes)for(s=0,n=this.scopes.length;s<n;s++)this.scopes[s].stop(!0);if(!this.detached&&this.parent&&!t){const o=this.parent.scopes.pop();o&&o!==this&&(this.parent.scopes[this.index]=o,o.index=this.index)}this.parent=void 0,this._active=!1}}}function mr(e,t=Pe){t&&t.active&&t.effects.push(e)}function yr(){return Pe}let vt;class Cn{constructor(t,s,n,o){this.fn=t,this.trigger=s,this.scheduler=n,this.active=!0,this.deps=[],this._dirtyLevel=4,this._trackId=0,this._runnings=0,this._shouldSchedule=!1,this._depsLength=0,mr(this,o)}get dirty(){if(this._dirtyLevel===2||this._dirtyLevel===3){this._dirtyLevel=1,Rt();for(let t=0;t<this._depsLength;t++){const s=this.deps[t];if(s.computed&&(vr(s.computed),this._dirtyLevel>=4))break}this._dirtyLevel===1&&(this._dirtyLevel=0),$t()}return this._dirtyLevel>=4}set dirty(t){this._dirtyLevel=t?4:0}run(){if(this._dirtyLevel=0,!this.active)return this.fn();let t=lt,s=vt;try{return lt=!0,vt=this,this._runnings++,Bn(this),this.fn()}finally{Kn(this),this._runnings--,vt=s,lt=t}}stop(){var t;this.active&&(Bn(this),Kn(this),(t=this.onStop)==null||t.call(this),this.active=!1)}}function vr(e){return e.value}function Bn(e){e._trackId++,e._depsLength=0}function Kn(e){if(e.deps.length>e._depsLength){for(let t=e._depsLength;t<e.deps.length;t++)Jo(e.deps[t],e);e.deps.length=e._depsLength}}function Jo(e,t){const s=e.get(t);s!==void 0&&t._trackId!==s&&(e.delete(t),e.size===0&&e.cleanup())}let lt=!0,tn=0;const Qo=[];function Rt(){Qo.push(lt),lt=!1}function $t(){const e=Qo.pop();lt=e===void 0?!0:e}function En(){tn++}function Rn(){for(tn--;!tn&&sn.length;)sn.shift()()}function Zo(e,t,s){if(t.get(e)!==e._trackId){t.set(e,e._trackId);const n=e.deps[e._depsLength];n!==t?(n&&Jo(n,e),e.deps[e._depsLength++]=t):e._depsLength++}}const sn=[];function Yo(e,t,s){En();for(const n of e.keys()){let o;n._dirtyLevel<t&&(o??(o=e.get(n)===n._trackId))&&(n._shouldSchedule||(n._shouldSchedule=n._dirtyLevel===0),n._dirtyLevel=t),n._shouldSchedule&&(o??(o=e.get(n)===n._trackId))&&(n.trigger(),(!n._runnings||n.allowRecurse)&&n._dirtyLevel!==2&&(n._shouldSchedule=!1,n.scheduler&&sn.push(n.scheduler)))}Rn()}const Xo=(e,t)=>{const s=new Map;return s.cleanup=e,s.computed=t,s},nn=new WeakMap,wt=Symbol(""),on=Symbol("");function xe(e,t,s){if(lt&&vt){let n=nn.get(e);n||nn.set(e,n=new Map);let o=n.get(s);o||n.set(s,o=Xo(()=>n.delete(s))),Zo(vt,o)}}function Je(e,t,s,n,o,i){const r=nn.get(e);if(!r)return;let l=[];if(t==="clear")l=[...r.values()];else if(s==="length"&&j(e)){const c=Number(n);r.forEach((h,f)=>{(f==="length"||!at(f)&&f>=c)&&l.push(h)})}else switch(s!==void 0&&l.push(r.get(s)),t){case"add":j(e)?wn(s)&&l.push(r.get("length")):(l.push(r.get(wt)),Mt(e)&&l.push(r.get(on)));break;case"delete":j(e)||(l.push(r.get(wt)),Mt(e)&&l.push(r.get(on)));break;case"set":Mt(e)&&l.push(r.get(wt));break}En();for(const c of l)c&&Yo(c,4);Rn()}const wr=mn("__proto__,__v_isRef,__isVue"),ei=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(at)),zn=br();function br(){const e={};return["includes","indexOf","lastIndexOf"].forEach(t=>{e[t]=function(...s){const n=z(this);for(let i=0,r=this.length;i<r;i++)xe(n,"get",i+"");const o=n[t](...s);return o===-1||o===!1?n[t](...s.map(z)):o}}),["push","pop","shift","unshift","splice"].forEach(t=>{e[t]=function(...s){Rt(),En();const n=z(this)[t].apply(this,s);return Rn(),$t(),n}}),e}function xr(e){const t=z(this);return xe(t,"has",e),t.hasOwnProperty(e)}class ti{constructor(t=!1,s=!1){this._isReadonly=t,this._isShallow=s}get(t,s,n){const o=this._isReadonly,i=this._isShallow;if(s==="__v_isReactive")return!o;if(s==="__v_isReadonly")return o;if(s==="__v_isShallow")return i;if(s==="__v_raw")return n===(o?i?jr:ii:i?oi:ni).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(n)?t:void 0;const r=j(t);if(!o){if(r&&K(zn,s))return Reflect.get(zn,s,n);if(s==="hasOwnProperty")return xr}const l=Reflect.get(t,s,n);return(at(s)?ei.has(s):wr(s))||(o||xe(t,"get",s),i)?l:Ce(l)?r&&wn(s)?l:l.value:X(l)?o?li(l):We(l):l}}class si extends ti{constructor(t=!1){super(!1,t)}set(t,s,n,o){let i=t[s];if(!this._isShallow){const c=Vt(i);if(!Ss(n)&&!Vt(n)&&(i=z(i),n=z(n)),!j(t)&&Ce(i)&&!Ce(n))return c?!1:(i.value=n,!0)}const r=j(t)&&wn(s)?Number(s)<t.length:K(t,s),l=Reflect.set(t,s,n,o);return t===z(o)&&(r?ut(n,i)&&Je(t,"set",s,n):Je(t,"add",s,n)),l}deleteProperty(t,s){const n=K(t,s);t[s];const o=Reflect.deleteProperty(t,s);return o&&n&&Je(t,"delete",s,void 0),o}has(t,s){const n=Reflect.has(t,s);return(!at(s)||!ei.has(s))&&xe(t,"has",s),n}ownKeys(t){return xe(t,"iterate",j(t)?"length":wt),Reflect.ownKeys(t)}}class Cr extends ti{constructor(t=!1){super(!0,t)}set(t,s){return!0}deleteProperty(t,s){return!0}}const Er=new si,Rr=new Cr,$r=new si(!0),$n=e=>e,Is=e=>Reflect.getPrototypeOf(e);function ds(e,t,s=!1,n=!1){e=e.__v_raw;const o=z(e),i=z(t);s||(ut(t,i)&&xe(o,"get",t),xe(o,"get",i));const{has:r}=Is(o),l=n?$n:s?An:ss;if(r.call(o,t))return l(e.get(t));if(r.call(o,i))return l(e.get(i));e!==o&&e.get(t)}function fs(e,t=!1){const s=this.__v_raw,n=z(s),o=z(e);return t||(ut(e,o)&&xe(n,"has",e),xe(n,"has",o)),e===o?s.has(e):s.has(e)||s.has(o)}function hs(e,t=!1){return e=e.__v_raw,!t&&xe(z(e),"iterate",wt),Reflect.get(e,"size",e)}function Wn(e){e=z(e);const t=z(this);return Is(t).has.call(t,e)||(t.add(e),Je(t,"add",e,e)),this}function Gn(e,t){t=z(t);const s=z(this),{has:n,get:o}=Is(s);let i=n.call(s,e);i||(e=z(e),i=n.call(s,e));const r=o.call(s,e);return s.set(e,t),i?ut(t,r)&&Je(s,"set",e,t):Je(s,"add",e,t),this}function Jn(e){const t=z(this),{has:s,get:n}=Is(t);let o=s.call(t,e);o||(e=z(e),o=s.call(t,e)),n&&n.call(t,e);const i=t.delete(e);return o&&Je(t,"delete",e,void 0),i}function Qn(){const e=z(this),t=e.size!==0,s=e.clear();return t&&Je(e,"clear",void 0,void 0),s}function ps(e,t){return function(n,o){const i=this,r=i.__v_raw,l=z(r),c=t?$n:e?An:ss;return!e&&xe(l,"iterate",wt),r.forEach((h,f)=>n.call(o,c(h),c(f),i))}}function _s(e,t,s){return function(...n){const o=this.__v_raw,i=z(o),r=Mt(i),l=e==="entries"||e===Symbol.iterator&&r,c=e==="keys"&&r,h=o[e](...n),f=s?$n:t?An:ss;return!t&&xe(i,"iterate",c?on:wt),{next(){const{value:p,done:_}=h.next();return _?{value:p,done:_}:{value:l?[f(p[0]),f(p[1])]:f(p),done:_}},[Symbol.iterator](){return this}}}}function tt(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function Sr(){const e={get(i){return ds(this,i)},get size(){return hs(this)},has:fs,add:Wn,set:Gn,delete:Jn,clear:Qn,forEach:ps(!1,!1)},t={get(i){return ds(this,i,!1,!0)},get size(){return hs(this)},has:fs,add:Wn,set:Gn,delete:Jn,clear:Qn,forEach:ps(!1,!0)},s={get(i){return ds(this,i,!0)},get size(){return hs(this,!0)},has(i){return fs.call(this,i,!0)},add:tt("add"),set:tt("set"),delete:tt("delete"),clear:tt("clear"),forEach:ps(!0,!1)},n={get(i){return ds(this,i,!0,!0)},get size(){return hs(this,!0)},has(i){return fs.call(this,i,!0)},add:tt("add"),set:tt("set"),delete:tt("delete"),clear:tt("clear"),forEach:ps(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(i=>{e[i]=_s(i,!1,!1),s[i]=_s(i,!0,!1),t[i]=_s(i,!1,!0),n[i]=_s(i,!0,!0)}),[e,s,t,n]}const[kr,Ar,Pr,Tr]=Sr();function Sn(e,t){const s=t?e?Tr:Pr:e?Ar:kr;return(n,o,i)=>o==="__v_isReactive"?!e:o==="__v_isReadonly"?e:o==="__v_raw"?n:Reflect.get(K(s,o)&&o in n?s:n,o,i)}const Or={get:Sn(!1,!1)},Mr={get:Sn(!1,!0)},Ir={get:Sn(!0,!1)},ni=new WeakMap,oi=new WeakMap,ii=new WeakMap,jr=new WeakMap;function Lr(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Nr(e){return e.__v_skip||!Object.isExtensible(e)?0:Lr(rr(e))}function We(e){return Vt(e)?e:kn(e,!1,Er,Or,ni)}function ri(e){return kn(e,!1,$r,Mr,oi)}function li(e){return kn(e,!0,Rr,Ir,ii)}function kn(e,t,s,n,o){if(!X(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const i=o.get(e);if(i)return i;const r=Nr(e);if(r===0)return e;const l=new Proxy(e,r===2?n:s);return o.set(e,l),l}function It(e){return Vt(e)?It(e.__v_raw):!!(e&&e.__v_isReactive)}function Vt(e){return!!(e&&e.__v_isReadonly)}function Ss(e){return!!(e&&e.__v_isShallow)}function ci(e){return It(e)||Vt(e)}function z(e){const t=e&&e.__v_raw;return t?z(t):e}function ai(e){return Object.isExtensible(e)&&$s(e,"__v_skip",!0),e}const ss=e=>X(e)?We(e):e,An=e=>X(e)?li(e):e;class ui{constructor(t,s,n,o){this.getter=t,this._setter=s,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this.effect=new Cn(()=>t(this._value),()=>vs(this,this.effect._dirtyLevel===2?2:3)),this.effect.computed=this,this.effect.active=this._cacheable=!o,this.__v_isReadonly=n}get value(){const t=z(this);return(!t._cacheable||t.effect.dirty)&&ut(t._value,t._value=t.effect.run())&&vs(t,4),di(t),t.effect._dirtyLevel>=2&&vs(t,2),t._value}set value(t){this._setter(t)}get _dirty(){return this.effect.dirty}set _dirty(t){this.effect.dirty=t}}function Vr(e,t,s=!1){let n,o;const i=q(e);return i?(n=e,o=$e):(n=e.get,o=e.set),new ui(n,o,i||!o,s)}function di(e){var t;lt&&vt&&(e=z(e),Zo(vt,(t=e.dep)!=null?t:e.dep=Xo(()=>e.dep=void 0,e instanceof ui?e:void 0)))}function vs(e,t=4,s){e=z(e);const n=e.dep;n&&Yo(n,t)}function Ce(e){return!!(e&&e.__v_isRef===!0)}function qr(e){return fi(e,!1)}function Fr(e){return fi(e,!0)}function fi(e,t){return Ce(e)?e:new Ur(e,t)}class Ur{constructor(t,s){this.__v_isShallow=s,this.dep=void 0,this.__v_isRef=!0,this._rawValue=s?t:z(t),this._value=s?t:ss(t)}get value(){return di(this),this._value}set value(t){const s=this.__v_isShallow||Ss(t)||Vt(t);t=s?t:z(t),ut(t,this._rawValue)&&(this._rawValue=t,this._value=s?t:ss(t),vs(this,4))}}function jt(e){return Ce(e)?e.value:e}const Hr={get:(e,t,s)=>jt(Reflect.get(e,t,s)),set:(e,t,s,n)=>{const o=e[t];return Ce(o)&&!Ce(s)?(o.value=s,!0):Reflect.set(e,t,s,n)}};function hi(e){return It(e)?e:new Proxy(e,Hr)}/**
* @vue/runtime-core v3.4.21
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function ct(e,t,s,n){try{return n?e(...n):e()}catch(o){js(o,t,s)}}function Me(e,t,s,n){if(q(e)){const i=ct(e,t,s,n);return i&&Do(i)&&i.catch(r=>{js(r,t,s)}),i}const o=[];for(let i=0;i<e.length;i++)o.push(Me(e[i],t,s,n));return o}function js(e,t,s,n=!0){const o=t?t.vnode:null;if(t){let i=t.parent;const r=t.proxy,l=`https://vuejs.org/error-reference/#runtime-${s}`;for(;i;){const h=i.ec;if(h){for(let f=0;f<h.length;f++)if(h[f](e,r,l)===!1)return}i=i.parent}const c=t.appContext.config.errorHandler;if(c){ct(c,null,10,[e,r,l]);return}}Dr(e,s,o,n)}function Dr(e,t,s,n=!0){console.error(e)}let ns=!1,rn=!1;const _e=[];let Ue=0;const Lt=[];let nt=null,gt=0;const pi=Promise.resolve();let Pn=null;function Tn(e){const t=Pn||pi;return e?t.then(this?e.bind(this):e):t}function Br(e){let t=Ue+1,s=_e.length;for(;t<s;){const n=t+s>>>1,o=_e[n],i=os(o);i<e||i===e&&o.pre?t=n+1:s=n}return t}function On(e){(!_e.length||!_e.includes(e,ns&&e.allowRecurse?Ue+1:Ue))&&(e.id==null?_e.push(e):_e.splice(Br(e.id),0,e),_i())}function _i(){!ns&&!rn&&(rn=!0,Pn=pi.then(mi))}function Kr(e){const t=_e.indexOf(e);t>Ue&&_e.splice(t,1)}function zr(e){j(e)?Lt.push(...e):(!nt||!nt.includes(e,e.allowRecurse?gt+1:gt))&&Lt.push(e),_i()}function Zn(e,t,s=ns?Ue+1:0){for(;s<_e.length;s++){const n=_e[s];if(n&&n.pre){if(e&&n.id!==e.uid)continue;_e.splice(s,1),s--,n()}}}function gi(e){if(Lt.length){const t=[...new Set(Lt)].sort((s,n)=>os(s)-os(n));if(Lt.length=0,nt){nt.push(...t);return}for(nt=t,gt=0;gt<nt.length;gt++)nt[gt]();nt=null,gt=0}}const os=e=>e.id==null?1/0:e.id,Wr=(e,t)=>{const s=os(e)-os(t);if(s===0){if(e.pre&&!t.pre)return-1;if(t.pre&&!e.pre)return 1}return s};function mi(e){rn=!1,ns=!0,_e.sort(Wr);const t=$e;try{for(Ue=0;Ue<_e.length;Ue++){const s=_e[Ue];s&&s.active!==!1&&ct(s,null,14)}}finally{Ue=0,_e.length=0,gi(),ns=!1,Pn=null,(_e.length||Lt.length)&&mi()}}function Gr(e,t,...s){if(e.isUnmounted)return;const n=e.vnode.props||ee;let o=s;const i=t.startsWith("update:"),r=i&&t.slice(7);if(r&&r in n){const f=`${r==="modelValue"?"model":r}Modifiers`,{number:p,trim:_}=n[f]||ee;_&&(o=s.map(v=>ie(v)?v.trim():v)),p&&(o=s.map(ts))}let l,c=n[l=Ks(t)]||n[l=Ks(De(t))];!c&&i&&(c=n[l=Ks(Et(t))]),c&&Me(c,e,6,o);const h=n[l+"Once"];if(h){if(!e.emitted)e.emitted={};else if(e.emitted[l])return;e.emitted[l]=!0,Me(h,e,6,o)}}function yi(e,t,s=!1){const n=t.emitsCache,o=n.get(e);if(o!==void 0)return o;const i=e.emits;let r={},l=!1;if(!q(e)){const c=h=>{const f=yi(h,t,!0);f&&(l=!0,de(r,f))};!s&&t.mixins.length&&t.mixins.forEach(c),e.extends&&c(e.extends),e.mixins&&e.mixins.forEach(c)}return!i&&!l?(X(e)&&n.set(e,null),null):(j(i)?i.forEach(c=>r[c]=null):de(r,i),X(e)&&n.set(e,r),r)}function Ls(e,t){return!e||!Ts(t)?!1:(t=t.slice(2).replace(/Once$/,""),K(e,t[0].toLowerCase()+t.slice(1))||K(e,Et(t))||K(e,t))}let be=null,Ns=null;function ks(e){const t=be;return be=e,Ns=e&&e.type.__scopeId||null,t}function vi(e){Ns=e}function wi(){Ns=null}function mt(e,t=be,s){if(!t||e._n)return e;const n=(...o)=>{n._d&&co(-1);const i=ks(t);let r;try{r=e(...o)}finally{ks(i),n._d&&co(1)}return r};return n._n=!0,n._c=!0,n._d=!0,n}function Ws(e){const{type:t,vnode:s,proxy:n,withProxy:o,props:i,propsOptions:[r],slots:l,attrs:c,emit:h,render:f,renderCache:p,data:_,setupState:v,ctx:A,inheritAttrs:I}=e;let V,T;const L=ks(e);try{if(s.shapeFlag&4){const W=o||n,oe=W;V=Fe(f.call(oe,W,p,i,v,_,A)),T=c}else{const W=t;V=Fe(W.length>1?W(i,{attrs:c,slots:l,emit:h}):W(i,null)),T=t.props?c:Jr(c)}}catch(W){Yt.length=0,js(W,e,1),V=ne(Ct)}let F=V;if(T&&I!==!1){const W=Object.keys(T),{shapeFlag:oe}=F;W.length&&oe&7&&(r&&W.some(yn)&&(T=Qr(T,r)),F=qt(F,T))}return s.dirs&&(F=qt(F),F.dirs=F.dirs?F.dirs.concat(s.dirs):s.dirs),s.transition&&(F.transition=s.transition),V=F,ks(L),V}const Jr=e=>{let t;for(const s in e)(s==="class"||s==="style"||Ts(s))&&((t||(t={}))[s]=e[s]);return t},Qr=(e,t)=>{const s={};for(const n in e)(!yn(n)||!(n.slice(9)in t))&&(s[n]=e[n]);return s};function Zr(e,t,s){const{props:n,children:o,component:i}=e,{props:r,children:l,patchFlag:c}=t,h=i.emitsOptions;if(t.dirs||t.transition)return!0;if(s&&c>=0){if(c&1024)return!0;if(c&16)return n?Yn(n,r,h):!!r;if(c&8){const f=t.dynamicProps;for(let p=0;p<f.length;p++){const _=f[p];if(r[_]!==n[_]&&!Ls(h,_))return!0}}}else return(o||l)&&(!l||!l.$stable)?!0:n===r?!1:n?r?Yn(n,r,h):!0:!!r;return!1}function Yn(e,t,s){const n=Object.keys(t);if(n.length!==Object.keys(e).length)return!0;for(let o=0;o<n.length;o++){const i=n[o];if(t[i]!==e[i]&&!Ls(s,i))return!0}return!1}function Yr({vnode:e,parent:t},s){for(;t;){const n=t.subTree;if(n.suspense&&n.suspense.activeBranch===e&&(n.el=e.el),n===e)(e=t.vnode).el=s,t=t.parent;else break}}const bi="components";function bt(e,t){return el(bi,e,!0,t)||e}const Xr=Symbol.for("v-ndc");function el(e,t,s=!0,n=!1){const o=be||ge;if(o){const i=o.type;if(e===bi){const l=Gl(i,!1);if(l&&(l===t||l===De(t)||l===Ms(De(t))))return i}const r=Xn(o[e]||i[e],t)||Xn(o.appContext[e],t);return!r&&n?i:r}}function Xn(e,t){return e&&(e[t]||e[De(t)]||e[Ms(De(t))])}const tl=e=>e.__isSuspense;function sl(e,t){t&&t.pendingBranch?j(e)?t.effects.push(...e):t.effects.push(e):zr(e)}const nl=Symbol.for("v-scx"),ol=()=>Qe(nl),gs={};function ws(e,t,s){return xi(e,t,s)}function xi(e,t,{immediate:s,deep:n,flush:o,once:i,onTrack:r,onTrigger:l}=ee){if(t&&i){const U=t;t=(...me)=>{U(...me),oe()}}const c=ge,h=U=>n===!0?U:yt(U,n===!1?1:void 0);let f,p=!1,_=!1;if(Ce(e)?(f=()=>e.value,p=Ss(e)):It(e)?(f=()=>h(e),p=!0):j(e)?(_=!0,p=e.some(U=>It(U)||Ss(U)),f=()=>e.map(U=>{if(Ce(U))return U.value;if(It(U))return h(U);if(q(U))return ct(U,c,2)})):q(e)?t?f=()=>ct(e,c,2):f=()=>(v&&v(),Me(e,c,3,[A])):f=$e,t&&n){const U=f;f=()=>yt(U())}let v,A=U=>{v=F.onStop=()=>{ct(U,c,4),v=F.onStop=void 0}},I;if(Us)if(A=$e,t?s&&Me(t,c,3,[f(),_?[]:void 0,A]):f(),o==="sync"){const U=ol();I=U.__watcherHandles||(U.__watcherHandles=[])}else return $e;let V=_?new Array(e.length).fill(gs):gs;const T=()=>{if(!(!F.active||!F.dirty))if(t){const U=F.run();(n||p||(_?U.some((me,Se)=>ut(me,V[Se])):ut(U,V)))&&(v&&v(),Me(t,c,3,[U,V===gs?void 0:_&&V[0]===gs?[]:V,A]),V=U)}else F.run()};T.allowRecurse=!!t;let L;o==="sync"?L=T:o==="post"?L=()=>we(T,c&&c.suspense):(T.pre=!0,c&&(T.id=c.uid),L=()=>On(T));const F=new Cn(f,$e,L),W=yr(),oe=()=>{F.stop(),W&&vn(W.effects,F)};return t?s?T():V=F.run():o==="post"?we(F.run.bind(F),c&&c.suspense):F.run(),I&&I.push(oe),oe}function il(e,t,s){const n=this.proxy,o=ie(e)?e.includes(".")?Ci(n,e):()=>n[e]:e.bind(n,n);let i;q(t)?i=t:(i=t.handler,s=t);const r=as(this),l=xi(o,i.bind(n),s);return r(),l}function Ci(e,t){const s=t.split(".");return()=>{let n=e;for(let o=0;o<s.length&&n;o++)n=n[s[o]];return n}}function yt(e,t,s=0,n){if(!X(e)||e.__v_skip)return e;if(t&&t>0){if(s>=t)return e;s++}if(n=n||new Set,n.has(e))return e;if(n.add(e),Ce(e))yt(e.value,t,s,n);else if(j(e))for(let o=0;o<e.length;o++)yt(e[o],t,s,n);else if(Dt(e)||Mt(e))e.forEach(o=>{yt(o,t,s,n)});else if(Ko(e))for(const o in e)yt(e[o],t,s,n);return e}function ae(e,t){if(be===null)return e;const s=Hs(be)||be.proxy,n=e.dirs||(e.dirs=[]);for(let o=0;o<t.length;o++){let[i,r,l,c=ee]=t[o];i&&(q(i)&&(i={mounted:i,updated:i}),i.deep&&yt(r),n.push({dir:i,instance:s,value:r,oldValue:void 0,arg:l,modifiers:c}))}return e}function pt(e,t,s,n){const o=e.dirs,i=t&&t.dirs;for(let r=0;r<o.length;r++){const l=o[r];i&&(l.oldValue=i[r].value);let c=l.dir[n];c&&(Rt(),Me(c,s,8,[e.el,l,e,t]),$t())}}/*! #__NO_SIDE_EFFECTS__ */function Ei(e,t){return q(e)?(()=>de({name:e.name},t,{setup:e}))():e}const bs=e=>!!e.type.__asyncLoader,Ri=e=>e.type.__isKeepAlive;function rl(e,t){$i(e,"a",t)}function ll(e,t){$i(e,"da",t)}function $i(e,t,s=ge){const n=e.__wdc||(e.__wdc=()=>{let o=s;for(;o;){if(o.isDeactivated)return;o=o.parent}return e()});if(Vs(t,n,s),s){let o=s.parent;for(;o&&o.parent;)Ri(o.parent.vnode)&&cl(n,t,s,o),o=o.parent}}function cl(e,t,s,n){const o=Vs(t,e,n,!0);Si(()=>{vn(n[t],o)},s)}function Vs(e,t,s=ge,n=!1){if(s){const o=s[e]||(s[e]=[]),i=t.__weh||(t.__weh=(...r)=>{if(s.isUnmounted)return;Rt();const l=as(s),c=Me(t,s,e,r);return l(),$t(),c});return n?o.unshift(i):o.push(i),i}}const Ze=e=>(t,s=ge)=>(!Us||e==="sp")&&Vs(e,(...n)=>t(...n),s),al=Ze("bm"),ul=Ze("m"),dl=Ze("bu"),fl=Ze("u"),hl=Ze("bum"),Si=Ze("um"),pl=Ze("sp"),_l=Ze("rtg"),gl=Ze("rtc");function ml(e,t=ge){Vs("ec",e,t)}function Nt(e,t,s,n){let o;const i=s&&s[n];if(j(e)||ie(e)){o=new Array(e.length);for(let r=0,l=e.length;r<l;r++)o[r]=t(e[r],r,void 0,i&&i[r])}else if(typeof e=="number"){o=new Array(e);for(let r=0;r<e;r++)o[r]=t(r+1,r,void 0,i&&i[r])}else if(X(e))if(e[Symbol.iterator])o=Array.from(e,(r,l)=>t(r,l,void 0,i&&i[l]));else{const r=Object.keys(e);o=new Array(r.length);for(let l=0,c=r.length;l<c;l++){const h=r[l];o[l]=t(e[h],h,l,i&&i[l])}}else o=[];return s&&(s[n]=o),o}const ln=e=>e?qi(e)?Hs(e)||e.proxy:ln(e.parent):null,Qt=de(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>ln(e.parent),$root:e=>ln(e.root),$emit:e=>e.emit,$options:e=>Mn(e),$forceUpdate:e=>e.f||(e.f=()=>{e.effect.dirty=!0,On(e.update)}),$nextTick:e=>e.n||(e.n=Tn.bind(e.proxy)),$watch:e=>il.bind(e)}),Gs=(e,t)=>e!==ee&&!e.__isScriptSetup&&K(e,t),yl={get({_:e},t){const{ctx:s,setupState:n,data:o,props:i,accessCache:r,type:l,appContext:c}=e;let h;if(t[0]!=="$"){const v=r[t];if(v!==void 0)switch(v){case 1:return n[t];case 2:return o[t];case 4:return s[t];case 3:return i[t]}else{if(Gs(n,t))return r[t]=1,n[t];if(o!==ee&&K(o,t))return r[t]=2,o[t];if((h=e.propsOptions[0])&&K(h,t))return r[t]=3,i[t];if(s!==ee&&K(s,t))return r[t]=4,s[t];cn&&(r[t]=0)}}const f=Qt[t];let p,_;if(f)return t==="$attrs"&&xe(e,"get",t),f(e);if((p=l.__cssModules)&&(p=p[t]))return p;if(s!==ee&&K(s,t))return r[t]=4,s[t];if(_=c.config.globalProperties,K(_,t))return _[t]},set({_:e},t,s){const{data:n,setupState:o,ctx:i}=e;return Gs(o,t)?(o[t]=s,!0):n!==ee&&K(n,t)?(n[t]=s,!0):K(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(i[t]=s,!0)},has({_:{data:e,setupState:t,accessCache:s,ctx:n,appContext:o,propsOptions:i}},r){let l;return!!s[r]||e!==ee&&K(e,r)||Gs(t,r)||(l=i[0])&&K(l,r)||K(n,r)||K(Qt,r)||K(o.config.globalProperties,r)},defineProperty(e,t,s){return s.get!=null?e._.accessCache[t]=0:K(s,"value")&&this.set(e,t,s.value,null),Reflect.defineProperty(e,t,s)}};function eo(e){return j(e)?e.reduce((t,s)=>(t[s]=null,t),{}):e}let cn=!0;function vl(e){const t=Mn(e),s=e.proxy,n=e.ctx;cn=!1,t.beforeCreate&&to(t.beforeCreate,e,"bc");const{data:o,computed:i,methods:r,watch:l,provide:c,inject:h,created:f,beforeMount:p,mounted:_,beforeUpdate:v,updated:A,activated:I,deactivated:V,beforeDestroy:T,beforeUnmount:L,destroyed:F,unmounted:W,render:oe,renderTracked:U,renderTriggered:me,errorCaptured:Se,serverPrefetch:ft,expose:je,inheritAttrs:Xe,components:ht,directives:Le,filters:Bt}=t;if(h&&wl(h,n,null),r)for(const Z in r){const G=r[Z];q(G)&&(n[Z]=G.bind(s))}if(o){const Z=o.call(s,s);X(Z)&&(e.data=We(Z))}if(cn=!0,i)for(const Z in i){const G=i[Z],Ke=q(G)?G.bind(s,s):q(G.get)?G.get.bind(s,s):$e,et=!q(G)&&q(G.set)?G.set.bind(s):$e,Ne=Te({get:Ke,set:et});Object.defineProperty(n,Z,{enumerable:!0,configurable:!0,get:()=>Ne.value,set:ve=>Ne.value=ve})}if(l)for(const Z in l)ki(l[Z],n,s,Z);if(c){const Z=q(c)?c.call(s):c;Reflect.ownKeys(Z).forEach(G=>{xs(G,Z[G])})}f&&to(f,e,"c");function re(Z,G){j(G)?G.forEach(Ke=>Z(Ke.bind(s))):G&&Z(G.bind(s))}if(re(al,p),re(ul,_),re(dl,v),re(fl,A),re(rl,I),re(ll,V),re(ml,Se),re(gl,U),re(_l,me),re(hl,L),re(Si,W),re(pl,ft),j(je))if(je.length){const Z=e.exposed||(e.exposed={});je.forEach(G=>{Object.defineProperty(Z,G,{get:()=>s[G],set:Ke=>s[G]=Ke})})}else e.exposed||(e.exposed={});oe&&e.render===$e&&(e.render=oe),Xe!=null&&(e.inheritAttrs=Xe),ht&&(e.components=ht),Le&&(e.directives=Le)}function wl(e,t,s=$e){j(e)&&(e=an(e));for(const n in e){const o=e[n];let i;X(o)?"default"in o?i=Qe(o.from||n,o.default,!0):i=Qe(o.from||n):i=Qe(o),Ce(i)?Object.defineProperty(t,n,{enumerable:!0,configurable:!0,get:()=>i.value,set:r=>i.value=r}):t[n]=i}}function to(e,t,s){Me(j(e)?e.map(n=>n.bind(t.proxy)):e.bind(t.proxy),t,s)}function ki(e,t,s,n){const o=n.includes(".")?Ci(s,n):()=>s[n];if(ie(e)){const i=t[e];q(i)&&ws(o,i)}else if(q(e))ws(o,e.bind(s));else if(X(e))if(j(e))e.forEach(i=>ki(i,t,s,n));else{const i=q(e.handler)?e.handler.bind(s):t[e.handler];q(i)&&ws(o,i,e)}}function Mn(e){const t=e.type,{mixins:s,extends:n}=t,{mixins:o,optionsCache:i,config:{optionMergeStrategies:r}}=e.appContext,l=i.get(t);let c;return l?c=l:!o.length&&!s&&!n?c=t:(c={},o.length&&o.forEach(h=>As(c,h,r,!0)),As(c,t,r)),X(t)&&i.set(t,c),c}function As(e,t,s,n=!1){const{mixins:o,extends:i}=t;i&&As(e,i,s,!0),o&&o.forEach(r=>As(e,r,s,!0));for(const r in t)if(!(n&&r==="expose")){const l=bl[r]||s&&s[r];e[r]=l?l(e[r],t[r]):t[r]}return e}const bl={data:so,props:no,emits:no,methods:Gt,computed:Gt,beforeCreate:ye,created:ye,beforeMount:ye,mounted:ye,beforeUpdate:ye,updated:ye,beforeDestroy:ye,beforeUnmount:ye,destroyed:ye,unmounted:ye,activated:ye,deactivated:ye,errorCaptured:ye,serverPrefetch:ye,components:Gt,directives:Gt,watch:Cl,provide:so,inject:xl};function so(e,t){return t?e?function(){return de(q(e)?e.call(this,this):e,q(t)?t.call(this,this):t)}:t:e}function xl(e,t){return Gt(an(e),an(t))}function an(e){if(j(e)){const t={};for(let s=0;s<e.length;s++)t[e[s]]=e[s];return t}return e}function ye(e,t){return e?[...new Set([].concat(e,t))]:t}function Gt(e,t){return e?de(Object.create(null),e,t):t}function no(e,t){return e?j(e)&&j(t)?[...new Set([...e,...t])]:de(Object.create(null),eo(e),eo(t??{})):t}function Cl(e,t){if(!e)return t;if(!t)return e;const s=de(Object.create(null),e);for(const n in t)s[n]=ye(e[n],t[n]);return s}function Ai(){return{app:null,config:{isNativeTag:or,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let El=0;function Rl(e,t){return function(n,o=null){q(n)||(n=de({},n)),o!=null&&!X(o)&&(o=null);const i=Ai(),r=new WeakSet;let l=!1;const c=i.app={_uid:El++,_component:n,_props:o,_container:null,_context:i,_instance:null,version:Ql,get config(){return i.config},set config(h){},use(h,...f){return r.has(h)||(h&&q(h.install)?(r.add(h),h.install(c,...f)):q(h)&&(r.add(h),h(c,...f))),c},mixin(h){return i.mixins.includes(h)||i.mixins.push(h),c},component(h,f){return f?(i.components[h]=f,c):i.components[h]},directive(h,f){return f?(i.directives[h]=f,c):i.directives[h]},mount(h,f,p){if(!l){const _=ne(n,o);return _.appContext=i,p===!0?p="svg":p===!1&&(p=void 0),f&&t?t(_,h):e(_,h,p),l=!0,c._container=h,h.__vue_app__=c,Hs(_.component)||_.component.proxy}},unmount(){l&&(e(null,c._container),delete c._container.__vue_app__)},provide(h,f){return i.provides[h]=f,c},runWithContext(h){const f=Zt;Zt=c;try{return h()}finally{Zt=f}}};return c}}let Zt=null;function xs(e,t){if(ge){let s=ge.provides;const n=ge.parent&&ge.parent.provides;n===s&&(s=ge.provides=Object.create(n)),s[e]=t}}function Qe(e,t,s=!1){const n=ge||be;if(n||Zt){const o=n?n.parent==null?n.vnode.appContext&&n.vnode.appContext.provides:n.parent.provides:Zt._context.provides;if(o&&e in o)return o[e];if(arguments.length>1)return s&&q(t)?t.call(n&&n.proxy):t}}function $l(e,t,s,n=!1){const o={},i={};$s(i,Fs,1),e.propsDefaults=Object.create(null),Pi(e,t,o,i);for(const r in e.propsOptions[0])r in o||(o[r]=void 0);s?e.props=n?o:ri(o):e.type.props?e.props=o:e.props=i,e.attrs=i}function Sl(e,t,s,n){const{props:o,attrs:i,vnode:{patchFlag:r}}=e,l=z(o),[c]=e.propsOptions;let h=!1;if((n||r>0)&&!(r&16)){if(r&8){const f=e.vnode.dynamicProps;for(let p=0;p<f.length;p++){let _=f[p];if(Ls(e.emitsOptions,_))continue;const v=t[_];if(c)if(K(i,_))v!==i[_]&&(i[_]=v,h=!0);else{const A=De(_);o[A]=un(c,l,A,v,e,!1)}else v!==i[_]&&(i[_]=v,h=!0)}}}else{Pi(e,t,o,i)&&(h=!0);let f;for(const p in l)(!t||!K(t,p)&&((f=Et(p))===p||!K(t,f)))&&(c?s&&(s[p]!==void 0||s[f]!==void 0)&&(o[p]=un(c,l,p,void 0,e,!0)):delete o[p]);if(i!==l)for(const p in i)(!t||!K(t,p))&&(delete i[p],h=!0)}h&&Je(e,"set","$attrs")}function Pi(e,t,s,n){const[o,i]=e.propsOptions;let r=!1,l;if(t)for(let c in t){if(Jt(c))continue;const h=t[c];let f;o&&K(o,f=De(c))?!i||!i.includes(f)?s[f]=h:(l||(l={}))[f]=h:Ls(e.emitsOptions,c)||(!(c in n)||h!==n[c])&&(n[c]=h,r=!0)}if(i){const c=z(s),h=l||ee;for(let f=0;f<i.length;f++){const p=i[f];s[p]=un(o,c,p,h[p],e,!K(h,p))}}return r}function un(e,t,s,n,o,i){const r=e[s];if(r!=null){const l=K(r,"default");if(l&&n===void 0){const c=r.default;if(r.type!==Function&&!r.skipFactory&&q(c)){const{propsDefaults:h}=o;if(s in h)n=h[s];else{const f=as(o);n=h[s]=c.call(null,t),f()}}else n=c}r[0]&&(i&&!l?n=!1:r[1]&&(n===""||n===Et(s))&&(n=!0))}return n}function Ti(e,t,s=!1){const n=t.propsCache,o=n.get(e);if(o)return o;const i=e.props,r={},l=[];let c=!1;if(!q(e)){const f=p=>{c=!0;const[_,v]=Ti(p,t,!0);de(r,_),v&&l.push(...v)};!s&&t.mixins.length&&t.mixins.forEach(f),e.extends&&f(e.extends),e.mixins&&e.mixins.forEach(f)}if(!i&&!c)return X(e)&&n.set(e,Ot),Ot;if(j(i))for(let f=0;f<i.length;f++){const p=De(i[f]);oo(p)&&(r[p]=ee)}else if(i)for(const f in i){const p=De(f);if(oo(p)){const _=i[f],v=r[p]=j(_)||q(_)?{type:_}:de({},_);if(v){const A=lo(Boolean,v.type),I=lo(String,v.type);v[0]=A>-1,v[1]=I<0||A<I,(A>-1||K(v,"default"))&&l.push(p)}}}const h=[r,l];return X(e)&&n.set(e,h),h}function oo(e){return e[0]!=="$"&&!Jt(e)}function io(e){return e===null?"null":typeof e=="function"?e.name||"":typeof e=="object"&&e.constructor&&e.constructor.name||""}function ro(e,t){return io(e)===io(t)}function lo(e,t){return j(t)?t.findIndex(s=>ro(s,e)):q(t)&&ro(t,e)?0:-1}const Oi=e=>e[0]==="_"||e==="$stable",In=e=>j(e)?e.map(Fe):[Fe(e)],kl=(e,t,s)=>{if(t._n)return t;const n=mt((...o)=>In(t(...o)),s);return n._c=!1,n},Mi=(e,t,s)=>{const n=e._ctx;for(const o in e){if(Oi(o))continue;const i=e[o];if(q(i))t[o]=kl(o,i,n);else if(i!=null){const r=In(i);t[o]=()=>r}}},Ii=(e,t)=>{const s=In(t);e.slots.default=()=>s},Al=(e,t)=>{if(e.vnode.shapeFlag&32){const s=t._;s?(e.slots=z(t),$s(t,"_",s)):Mi(t,e.slots={})}else e.slots={},t&&Ii(e,t);$s(e.slots,Fs,1)},Pl=(e,t,s)=>{const{vnode:n,slots:o}=e;let i=!0,r=ee;if(n.shapeFlag&32){const l=t._;l?s&&l===1?i=!1:(de(o,t),!s&&l===1&&delete o._):(i=!t.$stable,Mi(t,o)),r=t}else t&&(Ii(e,t),r={default:1});if(i)for(const l in o)!Oi(l)&&r[l]==null&&delete o[l]};function dn(e,t,s,n,o=!1){if(j(e)){e.forEach((_,v)=>dn(_,t&&(j(t)?t[v]:t),s,n,o));return}if(bs(n)&&!o)return;const i=n.shapeFlag&4?Hs(n.component)||n.component.proxy:n.el,r=o?null:i,{i:l,r:c}=e,h=t&&t.r,f=l.refs===ee?l.refs={}:l.refs,p=l.setupState;if(h!=null&&h!==c&&(ie(h)?(f[h]=null,K(p,h)&&(p[h]=null)):Ce(h)&&(h.value=null)),q(c))ct(c,l,12,[r,f]);else{const _=ie(c),v=Ce(c);if(_||v){const A=()=>{if(e.f){const I=_?K(p,c)?p[c]:f[c]:c.value;o?j(I)&&vn(I,i):j(I)?I.includes(i)||I.push(i):_?(f[c]=[i],K(p,c)&&(p[c]=f[c])):(c.value=[i],e.k&&(f[e.k]=c.value))}else _?(f[c]=r,K(p,c)&&(p[c]=r)):v&&(c.value=r,e.k&&(f[e.k]=r))};r?(A.id=-1,we(A,s)):A()}}}const we=sl;function Tl(e){return Ol(e)}function Ol(e,t){const s=zo();s.__VUE__=!0;const{insert:n,remove:o,patchProp:i,createElement:r,createText:l,createComment:c,setText:h,setElementText:f,parentNode:p,nextSibling:_,setScopeId:v=$e,insertStaticContent:A}=e,I=(a,d,g,w=null,m=null,C=null,$=void 0,x=null,E=!!d.dynamicChildren)=>{if(a===d)return;a&&!zt(a,d)&&(w=y(a),ve(a,m,C,!0),a=null),d.patchFlag===-2&&(E=!1,d.dynamicChildren=null);const{type:b,ref:k,shapeFlag:M}=d;switch(b){case qs:V(a,d,g,w);break;case Ct:T(a,d,g,w);break;case Cs:a==null&&L(d,g,w,$);break;case pe:ht(a,d,g,w,m,C,$,x,E);break;default:M&1?oe(a,d,g,w,m,C,$,x,E):M&6?Le(a,d,g,w,m,C,$,x,E):(M&64||M&128)&&b.process(a,d,g,w,m,C,$,x,E,P)}k!=null&&m&&dn(k,a&&a.ref,C,d||a,!d)},V=(a,d,g,w)=>{if(a==null)n(d.el=l(d.children),g,w);else{const m=d.el=a.el;d.children!==a.children&&h(m,d.children)}},T=(a,d,g,w)=>{a==null?n(d.el=c(d.children||""),g,w):d.el=a.el},L=(a,d,g,w)=>{[a.el,a.anchor]=A(a.children,d,g,w,a.el,a.anchor)},F=({el:a,anchor:d},g,w)=>{let m;for(;a&&a!==d;)m=_(a),n(a,g,w),a=m;n(d,g,w)},W=({el:a,anchor:d})=>{let g;for(;a&&a!==d;)g=_(a),o(a),a=g;o(d)},oe=(a,d,g,w,m,C,$,x,E)=>{d.type==="svg"?$="svg":d.type==="math"&&($="mathml"),a==null?U(d,g,w,m,C,$,x,E):ft(a,d,m,C,$,x,E)},U=(a,d,g,w,m,C,$,x)=>{let E,b;const{props:k,shapeFlag:M,transition:O,dirs:N}=a;if(E=a.el=r(a.type,C,k&&k.is,k),M&8?f(E,a.children):M&16&&Se(a.children,E,null,w,m,Js(a,C),$,x),N&&pt(a,null,w,"created"),me(E,a,a.scopeId,$,w),k){for(const Y in k)Y!=="value"&&!Jt(Y)&&i(E,Y,null,k[Y],C,a.children,w,m,fe);"value"in k&&i(E,"value",null,k.value,C),(b=k.onVnodeBeforeMount)&&qe(b,w,a)}N&&pt(a,null,w,"beforeMount");const B=Ml(m,O);B&&O.beforeEnter(E),n(E,d,g),((b=k&&k.onVnodeMounted)||B||N)&&we(()=>{b&&qe(b,w,a),B&&O.enter(E),N&&pt(a,null,w,"mounted")},m)},me=(a,d,g,w,m)=>{if(g&&v(a,g),w)for(let C=0;C<w.length;C++)v(a,w[C]);if(m){let C=m.subTree;if(d===C){const $=m.vnode;me(a,$,$.scopeId,$.slotScopeIds,m.parent)}}},Se=(a,d,g,w,m,C,$,x,E=0)=>{for(let b=E;b<a.length;b++){const k=a[b]=x?ot(a[b]):Fe(a[b]);I(null,k,d,g,w,m,C,$,x)}},ft=(a,d,g,w,m,C,$)=>{const x=d.el=a.el;let{patchFlag:E,dynamicChildren:b,dirs:k}=d;E|=a.patchFlag&16;const M=a.props||ee,O=d.props||ee;let N;if(g&&_t(g,!1),(N=O.onVnodeBeforeUpdate)&&qe(N,g,d,a),k&&pt(d,a,g,"beforeUpdate"),g&&_t(g,!0),b?je(a.dynamicChildren,b,x,g,w,Js(d,m),C):$||G(a,d,x,null,g,w,Js(d,m),C,!1),E>0){if(E&16)Xe(x,d,M,O,g,w,m);else if(E&2&&M.class!==O.class&&i(x,"class",null,O.class,m),E&4&&i(x,"style",M.style,O.style,m),E&8){const B=d.dynamicProps;for(let Y=0;Y<B.length;Y++){const se=B[Y],le=M[se],Ae=O[se];(Ae!==le||se==="value")&&i(x,se,le,Ae,m,a.children,g,w,fe)}}E&1&&a.children!==d.children&&f(x,d.children)}else!$&&b==null&&Xe(x,d,M,O,g,w,m);((N=O.onVnodeUpdated)||k)&&we(()=>{N&&qe(N,g,d,a),k&&pt(d,a,g,"updated")},w)},je=(a,d,g,w,m,C,$)=>{for(let x=0;x<d.length;x++){const E=a[x],b=d[x],k=E.el&&(E.type===pe||!zt(E,b)||E.shapeFlag&70)?p(E.el):g;I(E,b,k,null,w,m,C,$,!0)}},Xe=(a,d,g,w,m,C,$)=>{if(g!==w){if(g!==ee)for(const x in g)!Jt(x)&&!(x in w)&&i(a,x,g[x],null,$,d.children,m,C,fe);for(const x in w){if(Jt(x))continue;const E=w[x],b=g[x];E!==b&&x!=="value"&&i(a,x,b,E,$,d.children,m,C,fe)}"value"in w&&i(a,"value",g.value,w.value,$)}},ht=(a,d,g,w,m,C,$,x,E)=>{const b=d.el=a?a.el:l(""),k=d.anchor=a?a.anchor:l("");let{patchFlag:M,dynamicChildren:O,slotScopeIds:N}=d;N&&(x=x?x.concat(N):N),a==null?(n(b,g,w),n(k,g,w),Se(d.children||[],g,k,m,C,$,x,E)):M>0&&M&64&&O&&a.dynamicChildren?(je(a.dynamicChildren,O,g,m,C,$,x),(d.key!=null||m&&d===m.subTree)&&ji(a,d,!0)):G(a,d,g,k,m,C,$,x,E)},Le=(a,d,g,w,m,C,$,x,E)=>{d.slotScopeIds=x,a==null?d.shapeFlag&512?m.ctx.activate(d,g,w,$,E):Bt(d,g,w,m,C,$,E):St(a,d,E)},Bt=(a,d,g,w,m,C,$)=>{const x=a.component=Dl(a,w,m);if(Ri(a)&&(x.ctx.renderer=P),Bl(x),x.asyncDep){if(m&&m.registerDep(x,re),!a.el){const E=x.subTree=ne(Ct);T(null,E,d,g)}}else re(x,a,d,g,m,C,$)},St=(a,d,g)=>{const w=d.component=a.component;if(Zr(a,d,g))if(w.asyncDep&&!w.asyncResolved){Z(w,d,g);return}else w.next=d,Kr(w.update),w.effect.dirty=!0,w.update();else d.el=a.el,w.vnode=d},re=(a,d,g,w,m,C,$)=>{const x=()=>{if(a.isMounted){let{next:k,bu:M,u:O,parent:N,vnode:B}=a;{const Pt=Li(a);if(Pt){k&&(k.el=B.el,Z(a,k,$)),Pt.asyncDep.then(()=>{a.isUnmounted||x()});return}}let Y=k,se;_t(a,!1),k?(k.el=B.el,Z(a,k,$)):k=B,M&&ys(M),(se=k.props&&k.props.onVnodeBeforeUpdate)&&qe(se,N,k,B),_t(a,!0);const le=Ws(a),Ae=a.subTree;a.subTree=le,I(Ae,le,p(Ae.el),y(Ae),a,m,C),k.el=le.el,Y===null&&Yr(a,le.el),O&&we(O,m),(se=k.props&&k.props.onVnodeUpdated)&&we(()=>qe(se,N,k,B),m)}else{let k;const{el:M,props:O}=d,{bm:N,m:B,parent:Y}=a,se=bs(d);if(_t(a,!1),N&&ys(N),!se&&(k=O&&O.onVnodeBeforeMount)&&qe(k,Y,d),_t(a,!0),M&&te){const le=()=>{a.subTree=Ws(a),te(M,a.subTree,a,m,null)};se?d.type.__asyncLoader().then(()=>!a.isUnmounted&&le()):le()}else{const le=a.subTree=Ws(a);I(null,le,g,w,a,m,C),d.el=le.el}if(B&&we(B,m),!se&&(k=O&&O.onVnodeMounted)){const le=d;we(()=>qe(k,Y,le),m)}(d.shapeFlag&256||Y&&bs(Y.vnode)&&Y.vnode.shapeFlag&256)&&a.a&&we(a.a,m),a.isMounted=!0,d=g=w=null}},E=a.effect=new Cn(x,$e,()=>On(b),a.scope),b=a.update=()=>{E.dirty&&E.run()};b.id=a.uid,_t(a,!0),b()},Z=(a,d,g)=>{d.component=a;const w=a.vnode.props;a.vnode=d,a.next=null,Sl(a,d.props,w,g),Pl(a,d.children,g),Rt(),Zn(a),$t()},G=(a,d,g,w,m,C,$,x,E=!1)=>{const b=a&&a.children,k=a?a.shapeFlag:0,M=d.children,{patchFlag:O,shapeFlag:N}=d;if(O>0){if(O&128){et(b,M,g,w,m,C,$,x,E);return}else if(O&256){Ke(b,M,g,w,m,C,$,x,E);return}}N&8?(k&16&&fe(b,m,C),M!==b&&f(g,M)):k&16?N&16?et(b,M,g,w,m,C,$,x,E):fe(b,m,C,!0):(k&8&&f(g,""),N&16&&Se(M,g,w,m,C,$,x,E))},Ke=(a,d,g,w,m,C,$,x,E)=>{a=a||Ot,d=d||Ot;const b=a.length,k=d.length,M=Math.min(b,k);let O;for(O=0;O<M;O++){const N=d[O]=E?ot(d[O]):Fe(d[O]);I(a[O],N,g,null,m,C,$,x,E)}b>k?fe(a,m,C,!0,!1,M):Se(d,g,w,m,C,$,x,E,M)},et=(a,d,g,w,m,C,$,x,E)=>{let b=0;const k=d.length;let M=a.length-1,O=k-1;for(;b<=M&&b<=O;){const N=a[b],B=d[b]=E?ot(d[b]):Fe(d[b]);if(zt(N,B))I(N,B,g,null,m,C,$,x,E);else break;b++}for(;b<=M&&b<=O;){const N=a[M],B=d[O]=E?ot(d[O]):Fe(d[O]);if(zt(N,B))I(N,B,g,null,m,C,$,x,E);else break;M--,O--}if(b>M){if(b<=O){const N=O+1,B=N<k?d[N].el:w;for(;b<=O;)I(null,d[b]=E?ot(d[b]):Fe(d[b]),g,B,m,C,$,x,E),b++}}else if(b>O)for(;b<=M;)ve(a[b],m,C,!0),b++;else{const N=b,B=b,Y=new Map;for(b=B;b<=O;b++){const Ee=d[b]=E?ot(d[b]):Fe(d[b]);Ee.key!=null&&Y.set(Ee.key,b)}let se,le=0;const Ae=O-B+1;let Pt=!1,qn=0;const Kt=new Array(Ae);for(b=0;b<Ae;b++)Kt[b]=0;for(b=N;b<=M;b++){const Ee=a[b];if(le>=Ae){ve(Ee,m,C,!0);continue}let Ve;if(Ee.key!=null)Ve=Y.get(Ee.key);else for(se=B;se<=O;se++)if(Kt[se-B]===0&&zt(Ee,d[se])){Ve=se;break}Ve===void 0?ve(Ee,m,C,!0):(Kt[Ve-B]=b+1,Ve>=qn?qn=Ve:Pt=!0,I(Ee,d[Ve],g,null,m,C,$,x,E),le++)}const Fn=Pt?Il(Kt):Ot;for(se=Fn.length-1,b=Ae-1;b>=0;b--){const Ee=B+b,Ve=d[Ee],Un=Ee+1<k?d[Ee+1].el:w;Kt[b]===0?I(null,Ve,g,Un,m,C,$,x,E):Pt&&(se<0||b!==Fn[se]?Ne(Ve,g,Un,2):se--)}}},Ne=(a,d,g,w,m=null)=>{const{el:C,type:$,transition:x,children:E,shapeFlag:b}=a;if(b&6){Ne(a.component.subTree,d,g,w);return}if(b&128){a.suspense.move(d,g,w);return}if(b&64){$.move(a,d,g,P);return}if($===pe){n(C,d,g);for(let M=0;M<E.length;M++)Ne(E[M],d,g,w);n(a.anchor,d,g);return}if($===Cs){F(a,d,g);return}if(w!==2&&b&1&&x)if(w===0)x.beforeEnter(C),n(C,d,g),we(()=>x.enter(C),m);else{const{leave:M,delayLeave:O,afterLeave:N}=x,B=()=>n(C,d,g),Y=()=>{M(C,()=>{B(),N&&N()})};O?O(C,B,Y):Y()}else n(C,d,g)},ve=(a,d,g,w=!1,m=!1)=>{const{type:C,props:$,ref:x,children:E,dynamicChildren:b,shapeFlag:k,patchFlag:M,dirs:O}=a;if(x!=null&&dn(x,null,g,a,!0),k&256){d.ctx.deactivate(a);return}const N=k&1&&O,B=!bs(a);let Y;if(B&&(Y=$&&$.onVnodeBeforeUnmount)&&qe(Y,d,a),k&6)us(a.component,g,w);else{if(k&128){a.suspense.unmount(g,w);return}N&&pt(a,null,d,"beforeUnmount"),k&64?a.type.remove(a,d,g,m,P,w):b&&(C!==pe||M>0&&M&64)?fe(b,d,g,!1,!0):(C===pe&&M&384||!m&&k&16)&&fe(E,d,g),w&&kt(a)}(B&&(Y=$&&$.onVnodeUnmounted)||N)&&we(()=>{Y&&qe(Y,d,a),N&&pt(a,null,d,"unmounted")},g)},kt=a=>{const{type:d,el:g,anchor:w,transition:m}=a;if(d===pe){At(g,w);return}if(d===Cs){W(a);return}const C=()=>{o(g),m&&!m.persisted&&m.afterLeave&&m.afterLeave()};if(a.shapeFlag&1&&m&&!m.persisted){const{leave:$,delayLeave:x}=m,E=()=>$(g,C);x?x(a.el,C,E):E()}else C()},At=(a,d)=>{let g;for(;a!==d;)g=_(a),o(a),a=g;o(d)},us=(a,d,g)=>{const{bum:w,scope:m,update:C,subTree:$,um:x}=a;w&&ys(w),m.stop(),C&&(C.active=!1,ve($,a,d,g)),x&&we(x,d),we(()=>{a.isUnmounted=!0},d),d&&d.pendingBranch&&!d.isUnmounted&&a.asyncDep&&!a.asyncResolved&&a.suspenseId===d.pendingId&&(d.deps--,d.deps===0&&d.resolve())},fe=(a,d,g,w=!1,m=!1,C=0)=>{for(let $=C;$<a.length;$++)ve(a[$],d,g,w,m)},y=a=>a.shapeFlag&6?y(a.component.subTree):a.shapeFlag&128?a.suspense.next():_(a.anchor||a.el);let S=!1;const R=(a,d,g)=>{a==null?d._vnode&&ve(d._vnode,null,null,!0):I(d._vnode||null,a,d,null,null,null,g),S||(S=!0,Zn(),gi(),S=!1),d._vnode=a},P={p:I,um:ve,m:Ne,r:kt,mt:Bt,mc:Se,pc:G,pbc:je,n:y,o:e};let J,te;return t&&([J,te]=t(P)),{render:R,hydrate:J,createApp:Rl(R,J)}}function Js({type:e,props:t},s){return s==="svg"&&e==="foreignObject"||s==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:s}function _t({effect:e,update:t},s){e.allowRecurse=t.allowRecurse=s}function Ml(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function ji(e,t,s=!1){const n=e.children,o=t.children;if(j(n)&&j(o))for(let i=0;i<n.length;i++){const r=n[i];let l=o[i];l.shapeFlag&1&&!l.dynamicChildren&&((l.patchFlag<=0||l.patchFlag===32)&&(l=o[i]=ot(o[i]),l.el=r.el),s||ji(r,l)),l.type===qs&&(l.el=r.el)}}function Il(e){const t=e.slice(),s=[0];let n,o,i,r,l;const c=e.length;for(n=0;n<c;n++){const h=e[n];if(h!==0){if(o=s[s.length-1],e[o]<h){t[n]=o,s.push(n);continue}for(i=0,r=s.length-1;i<r;)l=i+r>>1,e[s[l]]<h?i=l+1:r=l;h<e[s[i]]&&(i>0&&(t[n]=s[i-1]),s[i]=n)}}for(i=s.length,r=s[i-1];i-- >0;)s[i]=r,r=t[r];return s}function Li(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:Li(t)}const jl=e=>e.__isTeleport,pe=Symbol.for("v-fgt"),qs=Symbol.for("v-txt"),Ct=Symbol.for("v-cmt"),Cs=Symbol.for("v-stc"),Yt=[];let Oe=null;function H(e=!1){Yt.push(Oe=e?null:[])}function Ll(){Yt.pop(),Oe=Yt[Yt.length-1]||null}let is=1;function co(e){is+=e}function Ni(e){return e.dynamicChildren=is>0?Oe||Ot:null,Ll(),is>0&&Oe&&Oe.push(e),e}function D(e,t,s,n,o,i){return Ni(u(e,t,s,n,o,i,!0))}function jn(e,t,s,n,o){return Ni(ne(e,t,s,n,o,!0))}function fn(e){return e?e.__v_isVNode===!0:!1}function zt(e,t){return e.type===t.type&&e.key===t.key}const Fs="__vInternal",Vi=({key:e})=>e??null,Es=({ref:e,ref_key:t,ref_for:s})=>(typeof e=="number"&&(e=""+e),e!=null?ie(e)||Ce(e)||q(e)?{i:be,r:e,k:t,f:!!s}:e:null);function u(e,t=null,s=null,n=0,o=null,i=e===pe?0:1,r=!1,l=!1){const c={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&Vi(t),ref:t&&Es(t),scopeId:Ns,slotScopeIds:null,children:s,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:n,dynamicProps:o,dynamicChildren:null,appContext:null,ctx:be};return l?(Ln(c,s),i&128&&e.normalize(c)):s&&(c.shapeFlag|=ie(s)?8:16),is>0&&!r&&Oe&&(c.patchFlag>0||i&6)&&c.patchFlag!==32&&Oe.push(c),c}const ne=Nl;function Nl(e,t=null,s=null,n=0,o=null,i=!1){if((!e||e===Xr)&&(e=Ct),fn(e)){const l=qt(e,t,!0);return s&&Ln(l,s),is>0&&!i&&Oe&&(l.shapeFlag&6?Oe[Oe.indexOf(e)]=l:Oe.push(l)),l.patchFlag|=-2,l}if(Jl(e)&&(e=e.__vccOpts),t){t=Vl(t);let{class:l,style:c}=t;l&&!ie(l)&&(t.class=He(l)),X(c)&&(ci(c)&&!j(c)&&(c=de({},c)),t.style=bn(c))}const r=ie(e)?1:tl(e)?128:jl(e)?64:X(e)?4:q(e)?2:0;return u(e,t,s,n,o,r,i,!0)}function Vl(e){return e?ci(e)||Fs in e?de({},e):e:null}function qt(e,t,s=!1){const{props:n,ref:o,patchFlag:i,children:r}=e,l=t?Fl(n||{},t):n;return{__v_isVNode:!0,__v_skip:!0,type:e.type,props:l,key:l&&Vi(l),ref:t&&t.ref?s&&o?j(o)?o.concat(Es(t)):[o,Es(t)]:Es(t):o,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:r,target:e.target,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==pe?i===-1?16:i|16:i,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:e.transition,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&qt(e.ssContent),ssFallback:e.ssFallback&&qt(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce}}function ue(e=" ",t=0){return ne(qs,null,e,t)}function ql(e,t){const s=ne(Cs,null,e);return s.staticCount=t,s}function ce(e="",t=!1){return t?(H(),jn(Ct,null,e)):ne(Ct,null,e)}function Fe(e){return e==null||typeof e=="boolean"?ne(Ct):j(e)?ne(pe,null,e.slice()):typeof e=="object"?ot(e):ne(qs,null,String(e))}function ot(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:qt(e)}function Ln(e,t){let s=0;const{shapeFlag:n}=e;if(t==null)t=null;else if(j(t))s=16;else if(typeof t=="object")if(n&65){const o=t.default;o&&(o._c&&(o._d=!1),Ln(e,o()),o._c&&(o._d=!0));return}else{s=32;const o=t._;!o&&!(Fs in t)?t._ctx=be:o===3&&be&&(be.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else q(t)?(t={default:t,_ctx:be},s=32):(t=String(t),n&64?(s=16,t=[ue(t)]):s=8);e.children=t,e.shapeFlag|=s}function Fl(...e){const t={};for(let s=0;s<e.length;s++){const n=e[s];for(const o in n)if(o==="class")t.class!==n.class&&(t.class=He([t.class,n.class]));else if(o==="style")t.style=bn([t.style,n.style]);else if(Ts(o)){const i=t[o],r=n[o];r&&i!==r&&!(j(i)&&i.includes(r))&&(t[o]=i?[].concat(i,r):r)}else o!==""&&(t[o]=n[o])}return t}function qe(e,t,s,n=null){Me(e,t,7,[s,n])}const Ul=Ai();let Hl=0;function Dl(e,t,s){const n=e.type,o=(t?t.appContext:e.appContext)||Ul,i={uid:Hl++,vnode:e,type:n,parent:t,appContext:o,root:null,next:null,subTree:null,effect:null,update:null,scope:new gr(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(o.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Ti(n,o),emitsOptions:yi(n,o),emit:null,emitted:null,propsDefaults:ee,inheritAttrs:n.inheritAttrs,ctx:ee,data:ee,props:ee,attrs:ee,slots:ee,refs:ee,setupState:ee,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:s,suspenseId:s?s.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=t?t.root:i,i.emit=Gr.bind(null,i),e.ce&&e.ce(i),i}let ge=null,Ps,hn;{const e=zo(),t=(s,n)=>{let o;return(o=e[s])||(o=e[s]=[]),o.push(n),i=>{o.length>1?o.forEach(r=>r(i)):o[0](i)}};Ps=t("__VUE_INSTANCE_SETTERS__",s=>ge=s),hn=t("__VUE_SSR_SETTERS__",s=>Us=s)}const as=e=>{const t=ge;return Ps(e),e.scope.on(),()=>{e.scope.off(),Ps(t)}},ao=()=>{ge&&ge.scope.off(),Ps(null)};function qi(e){return e.vnode.shapeFlag&4}let Us=!1;function Bl(e,t=!1){t&&hn(t);const{props:s,children:n}=e.vnode,o=qi(e);$l(e,s,o,t),Al(e,n);const i=o?Kl(e,t):void 0;return t&&hn(!1),i}function Kl(e,t){const s=e.type;e.accessCache=Object.create(null),e.proxy=ai(new Proxy(e.ctx,yl));const{setup:n}=s;if(n){const o=e.setupContext=n.length>1?Wl(e):null,i=as(e);Rt();const r=ct(n,e,0,[e.props,o]);if($t(),i(),Do(r)){if(r.then(ao,ao),t)return r.then(l=>{uo(e,l,t)}).catch(l=>{js(l,e,0)});e.asyncDep=r}else uo(e,r,t)}else Fi(e,t)}function uo(e,t,s){q(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:X(t)&&(e.setupState=hi(t)),Fi(e,s)}let fo;function Fi(e,t,s){const n=e.type;if(!e.render){if(!t&&fo&&!n.render){const o=n.template||Mn(e).template;if(o){const{isCustomElement:i,compilerOptions:r}=e.appContext.config,{delimiters:l,compilerOptions:c}=n,h=de(de({isCustomElement:i,delimiters:l},r),c);n.render=fo(o,h)}}e.render=n.render||$e}{const o=as(e);Rt();try{vl(e)}finally{$t(),o()}}}function zl(e){return e.attrsProxy||(e.attrsProxy=new Proxy(e.attrs,{get(t,s){return xe(e,"get","$attrs"),t[s]}}))}function Wl(e){const t=s=>{e.exposed=s||{}};return{get attrs(){return zl(e)},slots:e.slots,emit:e.emit,expose:t}}function Hs(e){if(e.exposed)return e.exposeProxy||(e.exposeProxy=new Proxy(hi(ai(e.exposed)),{get(t,s){if(s in t)return t[s];if(s in Qt)return Qt[s](e)},has(t,s){return s in t||s in Qt}}))}function Gl(e,t=!0){return q(e)?e.displayName||e.name:e.name||t&&e.__name}function Jl(e){return q(e)&&"__vccOpts"in e}const Te=(e,t)=>Vr(e,t,Us);function Ui(e,t,s){const n=arguments.length;return n===2?X(t)&&!j(t)?fn(t)?ne(e,null,[t]):ne(e,t):ne(e,null,t):(n>3?s=Array.prototype.slice.call(arguments,2):n===3&&fn(s)&&(s=[s]),ne(e,t,s))}const Ql="3.4.21";/**
* @vue/runtime-dom v3.4.21
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const Zl="http://www.w3.org/2000/svg",Yl="http://www.w3.org/1998/Math/MathML",it=typeof document<"u"?document:null,ho=it&&it.createElement("template"),Xl={insert:(e,t,s)=>{t.insertBefore(e,s||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,s,n)=>{const o=t==="svg"?it.createElementNS(Zl,e):t==="mathml"?it.createElementNS(Yl,e):it.createElement(e,s?{is:s}:void 0);return e==="select"&&n&&n.multiple!=null&&o.setAttribute("multiple",n.multiple),o},createText:e=>it.createTextNode(e),createComment:e=>it.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>it.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,s,n,o,i){const r=s?s.previousSibling:t.lastChild;if(o&&(o===i||o.nextSibling))for(;t.insertBefore(o.cloneNode(!0),s),!(o===i||!(o=o.nextSibling)););else{ho.innerHTML=n==="svg"?`<svg>${e}</svg>`:n==="mathml"?`<math>${e}</math>`:e;const l=ho.content;if(n==="svg"||n==="mathml"){const c=l.firstChild;for(;c.firstChild;)l.appendChild(c.firstChild);l.removeChild(c)}t.insertBefore(l,s)}return[r?r.nextSibling:t.firstChild,s?s.previousSibling:t.lastChild]}},ec=Symbol("_vtc");function tc(e,t,s){const n=e[ec];n&&(t=(t?[t,...n]:[...n]).join(" ")),t==null?e.removeAttribute("class"):s?e.setAttribute("class",t):e.className=t}const po=Symbol("_vod"),sc=Symbol("_vsh"),nc=Symbol(""),oc=/(^|;)\s*display\s*:/;function ic(e,t,s){const n=e.style,o=ie(s);let i=!1;if(s&&!o){if(t)if(ie(t))for(const r of t.split(";")){const l=r.slice(0,r.indexOf(":")).trim();s[l]==null&&Rs(n,l,"")}else for(const r in t)s[r]==null&&Rs(n,r,"");for(const r in s)r==="display"&&(i=!0),Rs(n,r,s[r])}else if(o){if(t!==s){const r=n[nc];r&&(s+=";"+r),n.cssText=s,i=oc.test(s)}}else t&&e.removeAttribute("style");po in e&&(e[po]=i?n.display:"",e[sc]&&(n.display="none"))}const _o=/\s*!important$/;function Rs(e,t,s){if(j(s))s.forEach(n=>Rs(e,t,n));else if(s==null&&(s=""),t.startsWith("--"))e.setProperty(t,s);else{const n=rc(e,t);_o.test(s)?e.setProperty(Et(n),s.replace(_o,""),"important"):e[n]=s}}const go=["Webkit","Moz","ms"],Qs={};function rc(e,t){const s=Qs[t];if(s)return s;let n=De(t);if(n!=="filter"&&n in e)return Qs[t]=n;n=Ms(n);for(let o=0;o<go.length;o++){const i=go[o]+n;if(i in e)return Qs[t]=i}return t}const mo="http://www.w3.org/1999/xlink";function lc(e,t,s,n,o){if(n&&t.startsWith("xlink:"))s==null?e.removeAttributeNS(mo,t.slice(6,t.length)):e.setAttributeNS(mo,t,s);else{const i=pr(t);s==null||i&&!Wo(s)?e.removeAttribute(t):e.setAttribute(t,i?"":s)}}function cc(e,t,s,n,o,i,r){if(t==="innerHTML"||t==="textContent"){n&&r(n,o,i),e[t]=s??"";return}const l=e.tagName;if(t==="value"&&l!=="PROGRESS"&&!l.includes("-")){const h=l==="OPTION"?e.getAttribute("value")||"":e.value,f=s??"";(h!==f||!("_value"in e))&&(e.value=f),s==null&&e.removeAttribute(t),e._value=s;return}let c=!1;if(s===""||s==null){const h=typeof e[t];h==="boolean"?s=Wo(s):s==null&&h==="string"?(s="",c=!0):h==="number"&&(s=0,c=!0)}try{e[t]=s}catch{}c&&e.removeAttribute(t)}function Ge(e,t,s,n){e.addEventListener(t,s,n)}function ac(e,t,s,n){e.removeEventListener(t,s,n)}const yo=Symbol("_vei");function uc(e,t,s,n,o=null){const i=e[yo]||(e[yo]={}),r=i[t];if(n&&r)r.value=n;else{const[l,c]=dc(t);if(n){const h=i[t]=pc(n,o);Ge(e,l,h,c)}else r&&(ac(e,l,r,c),i[t]=void 0)}}const vo=/(?:Once|Passive|Capture)$/;function dc(e){let t;if(vo.test(e)){t={};let n;for(;n=e.match(vo);)e=e.slice(0,e.length-n[0].length),t[n[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):Et(e.slice(2)),t]}let Zs=0;const fc=Promise.resolve(),hc=()=>Zs||(fc.then(()=>Zs=0),Zs=Date.now());function pc(e,t){const s=n=>{if(!n._vts)n._vts=Date.now();else if(n._vts<=s.attached)return;Me(_c(n,s.value),t,5,[n])};return s.value=e,s.attached=hc(),s}function _c(e,t){if(j(t)){const s=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{s.call(e),e._stopped=!0},t.map(n=>o=>!o._stopped&&n&&n(o))}else return t}const wo=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,gc=(e,t,s,n,o,i,r,l,c)=>{const h=o==="svg";t==="class"?tc(e,n,h):t==="style"?ic(e,s,n):Ts(t)?yn(t)||uc(e,t,s,n,r):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):mc(e,t,n,h))?cc(e,t,n,i,r,l,c):(t==="true-value"?e._trueValue=n:t==="false-value"&&(e._falseValue=n),lc(e,t,n,h))};function mc(e,t,s,n){if(n)return!!(t==="innerHTML"||t==="textContent"||t in e&&wo(t)&&q(s));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const o=e.tagName;if(o==="IMG"||o==="VIDEO"||o==="CANVAS"||o==="SOURCE")return!1}return wo(t)&&ie(s)?!1:t in e}const dt=e=>{const t=e.props["onUpdate:modelValue"]||!1;return j(t)?s=>ys(t,s):t};function yc(e){e.target.composing=!0}function bo(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const ke=Symbol("_assign"),he={created(e,{modifiers:{lazy:t,trim:s,number:n}},o){e[ke]=dt(o);const i=n||o.props&&o.props.type==="number";Ge(e,t?"change":"input",r=>{if(r.target.composing)return;let l=e.value;s&&(l=l.trim()),i&&(l=ts(l)),e[ke](l)}),s&&Ge(e,"change",()=>{e.value=e.value.trim()}),t||(Ge(e,"compositionstart",yc),Ge(e,"compositionend",bo),Ge(e,"change",bo))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,modifiers:{lazy:s,trim:n,number:o}},i){if(e[ke]=dt(i),e.composing)return;const r=o||e.type==="number"?ts(e.value):e.value,l=t??"";r!==l&&(document.activeElement===e&&e.type!=="range"&&(s||n&&e.value.trim()===l)||(e.value=l))}},Hi={deep:!0,created(e,t,s){e[ke]=dt(s),Ge(e,"change",()=>{const n=e._modelValue,o=Ft(e),i=e.checked,r=e[ke];if(j(n)){const l=xn(n,o),c=l!==-1;if(i&&!c)r(n.concat(o));else if(!i&&c){const h=[...n];h.splice(l,1),r(h)}}else if(Dt(n)){const l=new Set(n);i?l.add(o):l.delete(o),r(l)}else r(Bi(e,i))})},mounted:xo,beforeUpdate(e,t,s){e[ke]=dt(s),xo(e,t,s)}};function xo(e,{value:t,oldValue:s},n){e._modelValue=t,j(t)?e.checked=xn(t,n.props.value)>-1:Dt(t)?e.checked=t.has(n.props.value):t!==s&&(e.checked=xt(t,Bi(e,!0)))}const vc={created(e,{value:t},s){e.checked=xt(t,s.props.value),e[ke]=dt(s),Ge(e,"change",()=>{e[ke](Ft(e))})},beforeUpdate(e,{value:t,oldValue:s},n){e[ke]=dt(n),t!==s&&(e.checked=xt(t,n.props.value))}},Di={deep:!0,created(e,{value:t,modifiers:{number:s}},n){const o=Dt(t);Ge(e,"change",()=>{const i=Array.prototype.filter.call(e.options,r=>r.selected).map(r=>s?ts(Ft(r)):Ft(r));e[ke](e.multiple?o?new Set(i):i:i[0]),e._assigning=!0,Tn(()=>{e._assigning=!1})}),e[ke]=dt(n)},mounted(e,{value:t,modifiers:{number:s}}){Co(e,t,s)},beforeUpdate(e,t,s){e[ke]=dt(s)},updated(e,{value:t,modifiers:{number:s}}){e._assigning||Co(e,t,s)}};function Co(e,t,s){const n=e.multiple,o=j(t);if(!(n&&!o&&!Dt(t))){for(let i=0,r=e.options.length;i<r;i++){const l=e.options[i],c=Ft(l);if(n)if(o){const h=typeof c;h==="string"||h==="number"?l.selected=t.includes(s?ts(c):c):l.selected=xn(t,c)>-1}else l.selected=t.has(c);else if(xt(Ft(l),t)){e.selectedIndex!==i&&(e.selectedIndex=i);return}}!n&&e.selectedIndex!==-1&&(e.selectedIndex=-1)}}function Ft(e){return"_value"in e?e._value:e.value}function Bi(e,t){const s=t?"_trueValue":"_falseValue";return s in e?e[s]:t}const wc={created(e,t,s){ms(e,t,s,null,"created")},mounted(e,t,s){ms(e,t,s,null,"mounted")},beforeUpdate(e,t,s,n){ms(e,t,s,n,"beforeUpdate")},updated(e,t,s,n){ms(e,t,s,n,"updated")}};function bc(e,t){switch(e){case"SELECT":return Di;case"TEXTAREA":return he;default:switch(t){case"checkbox":return Hi;case"radio":return vc;default:return he}}}function ms(e,t,s,n,o){const r=bc(e.tagName,s.props&&s.props.type)[o];r&&r(e,t,s,n)}const xc=["ctrl","shift","alt","meta"],Cc={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>xc.some(s=>e[`${s}Key`]&&!t.includes(s))},Eo=(e,t)=>{const s=e._withMods||(e._withMods={}),n=t.join(".");return s[n]||(s[n]=(o,...i)=>{for(let r=0;r<t.length;r++){const l=Cc[t[r]];if(l&&l(o,t))return}return e(o,...i)})},Ec={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},Rc=(e,t)=>{const s=e._withKeys||(e._withKeys={}),n=t.join(".");return s[n]||(s[n]=o=>{if(!("key"in o))return;const i=Et(o.key);if(t.some(r=>r===i||Ec[r]===i))return e(o)})},$c=de({patchProp:gc},Xl);let Ro;function Sc(){return Ro||(Ro=Tl($c))}const kc=(...e)=>{const t=Sc().createApp(...e),{mount:s}=t;return t.mount=n=>{const o=Pc(n);if(!o)return;const i=t._component;!q(i)&&!i.render&&!i.template&&(i.template=o.innerHTML),o.innerHTML="";const r=s(o,!1,Ac(o));return o instanceof Element&&(o.removeAttribute("v-cloak"),o.setAttribute("data-v-app","")),r},t};function Ac(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function Pc(e){return ie(e)?document.querySelector(e):e}class Tc{constructor(t,s){this.domain_origin=s,this.messages=t,this.login_email="",this.login_password="",this.user={},this.password_authorised=!1,this.mfa_authorised=!1,this.logged_in=!1,this.mfa_secret_confirmed=!1,this.mfa_qr_code_base64=[],this.email="",this.name="",this.role_name="",this.mfa_authenticator_code="",this.status="",this.invalid_token=!1,this.session_jwt=""}get_mfa_jwt_from_local_storage(t){return localStorage.getItem("mfa_jwt_"+t)}get_ip_address(){fetch("https://api.ipify.org?format=json").then(s=>s.json()).then(s=>{this.ip_address=s.ip}).catch(s=>{this.ip_address="127.0.0.1",console.log(s)})}api_reset_password_request(t){var s={};s.email=t;const n={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)},o=this.domain_origin+"/api/admin/emails/password_reset_email";fetch(o,n).then(i=>i.json()).then(i=>{this.messages.add_message(i.message,"success")}).catch(i=>{console.log(i)})}api_reset_password(t){var s={};s.new_password=t;const n={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)},o=this.domain_origin+"/admin/reset_password_forgotten";fetch(o,n).then(i=>i.json()).then(i=>{i.rc==0?(this.messages.add_message(i.message,"success"),setTimeout(()=>{location.replace("/login")},5e3)):this.messages.add_message(i.message,"danger")}).catch(i=>{console.log(i)})}check_mfa_authenticator_code(t){return new Promise((s,n)=>{if(this.password_authorised){let o={email:this.email,session_jwt:this.session_jwt,mfa_authenticator_code:t};const i={method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${this.session_jwt}`},body:JSON.stringify(o)},r=this.domain_origin+"/api/auth/login/mfa";fetch(r,i).then(l=>l.json()).then(l=>{try{localStorage.removeItem("mfa_"+this.email)}catch(c){console.log(c)}try{l.mfa_jwt&&l.rc==0?(this.mfa_authorised=!0,this.mfa_secret_confirmed=!0,this.logged_in=!0,localStorage.setItem("mfa_"+this.email,l.mfa_jwt),s(!0)):(this.mfa_authorised=!1,this.logged_in=!1,localStorage.setItem("mfa_"+this.email,""),s(!1))}catch(c){console.log(c),n(c)}}).catch(l=>{console.log(l),n(l)})}else s(!1)})}getUserFromApi(){if(this.logged_in){var t={};t.session_jwt=this.session_jwt,t.ip_address=this.ip_address,t.mfa_jwt=localStorage.getItem("mfa_"+this.email);const s={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)},n=this.domain_origin+"/api_get_user";fetch(n,s).then(o=>o.json()).then(o=>{o.user.logged_in||this.logOut(!0)}).catch(o=>{console.log(o)})}return t}login(){return new Promise((t,s)=>{const n=localStorage.getItem("mfa_"+this.login_email),o=this.domain_origin+"/api/auth/login";console.log(o);const i={email:this.login_email,password:this.login_password,mfa_jwt:n};if(this.logged_in)this.router.push("/");else{const r={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)};fetch(o,r).then(l=>l.json()).then(l=>{if(this.session_jwt=l.session_jwt,l.rc==0){this.messages.add_message(l.message,"success");const c=l.user;c.mfa_authorised?(this.id=c.id,this.role_name=c.role_name,this.logged_in=!0,this.mfa_authorised=!0,this.mfa_secret_confirmed=!0):(this.logged_in=!1,this.mfa_authorised=!1,this.mfa_secret_confirmed=c.mfa_secret_confirmed,this.mfa_qr_code_base64=l.mfa_qr_image),c.password_authorised?(this.password_authorised=!0,this.email=c.email,this.name=c.name,this.session_jwt=c.session_jwt):(this.password_authorised=!1,this.logged_in=!1,this.email="",this.name="",this.id="",this.logout(),this.messages.add_message("Login failed.","danger"),setTimeout(()=>{location.replace("/login")},5e3))}else setTimeout(()=>{location.replace("/login")},5e3),this.messages.add_message("Login failed.","danger");t()}).catch(l=>{console.log(l),s(l)})}console.log("End of user.login()")})}logout(){this.logged_in=!1,this.session_jwt="",this.role_name="",this.email="",this.password_authorised=!1}get_secret_and_image(t){if(this.logged_in){var s={};s.session_jwt=this.session_jwt;const n={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)},o=this.domain_origin+"/api_get_secret_and_image";fetch(o,n).then(i=>i.json()).then(i=>{if(i.rc==0){this.messages.add_message("Us your authenticator app (from Google or Microsoft) to scan the qr-code","success");const r=i.secret,l=i.image;t.secret=r,t.image=l}else this.messages.add_message("There was a slight problem, if you can't proceed, please try again in 5 minutes","danger"),t.secret="Failed in user.js",t.image=""}).catch(i=>{t.secret="",t.image="",console.log(i)})}return s}setlocalStorage(){sessionStorage.setItem("user",JSON.stringify({logged_in:this.logged_in,role_name:this.role_name}))}api_reset_password(t,s){var n={};n.session_jwt=this.session_jwt,n.input=t;const o={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)},i=this.domain_origin+"/api/admin/reset_password_forgotten/"+s;fetch(i,o).then(r=>r.json()).then(r=>{r.rc==0?(this.messages.add_message(r.message,"success"),setTimeout(()=>{location.replace("/login")},5e3)):this.messages.add_message(r.message,"danger")}).catch(r=>{console.log(r)})}check_token_validity(){if(this.logged_in){const t={token:this.session_jwt},s={method:"POST",headers:{"Content-type":"application/json; charset=UTF-8"},body:JSON.stringify(t)},n=this.domain_origin+"/api/auth/check_jwt";fetch(n,s).then(o=>{if(!o.ok)throw Error(o.status);return o.json()}).then(o=>{o.status=="invalid"?this.invalid_token=!0:console.log("Token valid, still logged in.")}).catch(o=>{console.log(o)})}}}class Oc{constructor(t,s,n,o){console.log("Users has been instantiated."),this.messages=s,this.roles=o,this.user=t,this.domain_origin=n,this.user_list=[],this.new_user={},this.new_user.name="",this.new_user.email="",this.new_user.role="",this.user_to_delete="",this.selected_users=[],this.model_name="User",this.role_valid="",this.email_valid="",this.name_valid="",this.password_valid=""}api_create_user_db(){console.log("inside api_create_user_db");let t=this.new_user;const s=this.roles.get_role_from_name(this.new_user.role);t.id=this.generate_token(),t.role_id=s.id,this.selected_users.push(t);const n={};n.new_user_credentials=t;const o={method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${this.user.session_jwt}`},body:JSON.stringify(n)},i=this.domain_origin+"/api/users/";fetch(i,o).then(r=>r.json()).then(r=>{if(r.rc==0){this.messages.add_message(r.message,"success");const l=r.created_record;t.id=l.id,this.user_list.push(l)}else this.messages.add_message(r.message,"danger"),this.remove_local_selected_user(t.id)}).catch(r=>{console.log(r)})}api_update_user(t,s,n,o,i,r){return new Promise((l,c)=>{const h=[];for(let v in i){const A=i[v];h.push(A.id)}const f={org_ids:h,name:s,cc_emails:o,is_deleted:r,email:n},p={method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${this.user.session_jwt}`},body:JSON.stringify(f)},_=this.domain_origin+`/api/users/${t}`;fetch(_,p).then(v=>v.json()).then(v=>{try{v.rc==0?l(v.message):c(new Error(v.message))}catch{c(new Error("Failed to update user"))}}).catch(v=>{c(new Error("Failed to update user"))})})}delete_user(t){console.log("inside delete_user method");const s=this.get_selected_user_from_id(t);s.id="";const n={};n.session_jwt=this.user.session_jwt,n.model_name="User";const o={},i={};i.id=t,o.delete_package=i,n.data=o;const r={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)},l=this.domain_origin+"/api_delete_record_db";fetch(l,r).then(c=>c.json()).then(c=>{if(c.rc==0){this.messages.add_message(c.message,"success");for(let h in this.user_list)this.user_list[h].id==t&&this.user_list.splice(h,1)}else this.messages.add_message(c.message,"danger")}).catch(c=>{console.log(c)})}generate_token(t){Number.isFinite(t)?t=t*1:t=12;for(var s="aAbBcCdDeEfFgGhHjJkKmMnNpPqQrRsStTuUvVwWxXyYzZ23456789!&-_",n="£!1Ww",o=0;o<t;o++){var i=Math.floor(Math.random()*s.length);n=n+s[i]}return n}remove_local_selected_user(t){for(let s=0;s<this.selected_users.length;s++)this.selected_users[s].id==t&&this.selected_users.splice(s,1)}populate_user_list(){const t={method:"GET",headers:{"Content-type":"application/json; charset=UTF-8",Authorization:`Bearer ${this.user.session_jwt}`}},s=this.domain_origin+"/api/users/";fetch(s,t).then(n=>{if(!n.ok)throw Error(n.status);return n.json()}).then(n=>{this.user_list=n}).catch(n=>{console.log(n)})}get_selected_user_from_id(t){for(let s=0;s<this.selected_users.length;s++){const n=this.selected_users[s];if(n.id==t)return n}return{}}check_name_valid(t){this.name_valid="";let s=!0;var n=/^[a-zA-Z\s-]+$/;const o=n.test(t);n=/^[a-zA-Z\s]+$/;const i=n.test(t);!o&&!i&&(s=!1),s?this.name_valid="is-valid":this.name_valid="is-invalid"}check_email_valid(t){this.email_valid="",/^[\w-\.]+@([\w-]+\.)+[\w-]{2,4}$/.test(t)?this.email_valid="is-valid":this.email_valid="is-invalid"}check_role_valid(){this.role_valid="is-valid"}check_password_valid(t){this.password_valid="",this.is_strong_enough(t)?this.password_valid="is-valid":this.password_valid="is-invalid"}is_strong_enough(t){let s=!0;t.length<8&&(s=!1),t.length>64&&(s=!1);let n={};for(let c of t)try{n[c]=n[c]+1}catch{n[c]=1}for(let c in n)n[c]/t.length>.5&&(s=!1);Object.keys(n).length<3&&(s=!1);let o=["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],i=!1;for(let c of t)if(o.includes(c.toLowerCase())&&c===c.toUpperCase()){i=!0;break}i||(s=!1);let r=!1;for(let c of t)if(o.includes(c.toLowerCase())&&c===c.toLowerCase()){r=!0;break}r||(s=!1);let l=!1;for(let c of t)try{c=parseInt(c),l=!0;break}catch{}return l||(s=!1),s}}class Mc{constructor(){console.log("Messages has been instantiated."),this.message_array=[]}add_message(t,s){let n={};return n.message=t,n.type=s,this.message_array.push(n),this.message_array}}class Ic{constructor(t,s,n){this.user=t,this.messages=s,this.domain_origin=n,this.new_dialogue={},this.new_point="",this.new_question={},this.new_question.text="",this.new_question.time_allotted=0,this.new_question.points=[],this.new_dialogue.title="",this.new_dialogue.description="",this.new_dialogue.question_set=[],this.dialogue_to_edit={},this.dialogue_to_edit.title="",this.dialogue_to_edit.description="",this.dialogue_to_edit.question_set=[],this.dialogue_guide_title="",this.question_set=[],this.dialogue_guides=[],this.dialogue_select_options=[]}remove_point(t){this.new_question.points.splice(t,1)}add_point(){this.new_question.points.push(this.new_point),this.new_point=""}add_question(){this.new_question.text&&this.new_question.time_allotted>0&&this.new_question.points.length>0&&(this.new_dialogue.question_set.push(this.new_question),this.new_question={},this.new_question.text="",this.new_question.time_allotted=0,this.new_question.points=[])}api_create_dialogue_guide(){const t=this.new_dialogue;console.log(t);const s={method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${this.user.session_jwt}`},body:JSON.stringify(t)},n=this.domain_origin+"/api/dialogue/";this.waiting_for_response=!0,fetch(n,s).then(o=>o.json()).then(o=>{o.rc==0?(this.messages.add_message(o.message,"success"),this.waiting_for_response=!1):(this.messages.add_message(o.message,"danger"),this.waiting_for_response=!1)}).catch(o=>{console.log(o)})}api_delete_guide(t){const s={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:`Bearer ${this.user.session_jwt}`}},n=this.domain_origin+"/api/dialogue/"+t;return fetch(n,s).then(o=>o.json()).then(o=>{o.rc==0?(this.messages.add_message(o.message,"success"),console.log(this.dialogue_guides)):this.messages.add_message(o.message,"danger")}).catch(o=>{console.log(o)}),!0}api_update_dialogue_guide(t){const s={dialogue_guide_title:t.title,question_set:t.question_set};console.log(s);const n={method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${this.user.session_jwt}`},body:JSON.stringify(s)},o=this.domain_origin+`/api/dialogue/${t.id}`;this.waiting_for_response=!0,fetch(o,n).then(i=>i.json()).then(i=>{i.rc==0?(this.messages.add_message(i.message,"success"),this.waiting_for_response=!1):(this.messages.add_message(i.message,"danger"),this.waiting_for_response=!1)}).catch(i=>{console.log(i)})}get_dialogue_guides_from_api(){const t=`${this.domain_origin}/api/video_call/dialogues`,s={method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${this.user.session_jwt}`}};fetch(t,s).then(n=>n.json()).then(n=>{n.rc===0?this.dialogue_guides=n.guides:console.error("Failed to fetch guides:",n.msg)}).catch(n=>{console.error("API Error:",n)})}generate_select_options(){for(let t=0;t<this.dialogue_guides.length;t++)this.dialogue_select_options.push(this.dialogue_guides[t].title)}remove_question(t){this.question_set.splice(t,1)}async load_dialogue(t){for(let s=0;s<this.dialogue_guides.length;s++)if(this.dialogue_guides[s].title===t){this.loaded_dialogue_dict=this.dialogue_guides[s];break}}}const Be=(e,t)=>{const s=e.__vccOpts||e;for(const[n,o]of t)s[n]=o;return s},jc={props:["messages"],methods:{delete_message(e){this.messages.message_array.splice(e,1)}}},Lc={class:"toast toast-end"},Nc={class:"w-5 h-5","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 20 20"},Vc={key:0,d:"M10 .5a9.5 9.5 0 1 0 9.5 9.5A9.51 9.51 0 0 0 10 .5Zm3.707 8.207-4 4a1 1 0 0 1-1.414 0l-2-2a1 1 0 0 1 1.414-1.414L9 10.586l3.293-3.293a1 1 0 0 1 1.414 1.414Z"},qc={key:1,d:"M10 .5a9.5 9.5 0 1 0 9.5 9.5A9.51 9.51 0 0 0 10 .5Zm3.707 11.793a1 1 0 1 1-1.414 1.414L10 11.414l-2.293 2.293a1 1 0 0 1-1.414-1.414L8.586 10 6.293 7.707a1 1 0 0 1 1.414-1.414L10 8.586l2.293-2.293a1 1 0 0 1 1.414 1.414L11.414 10l2.293 2.293Z"},Fc={key:2,d:"m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"},Uc={key:3,d:"M10 .5a9.5 9.5 0 1 0 9.5 9.5A9.51 9.51 0 0 0 10 .5Zm3.707 8.207-4 4a1 1 0 0 1-1.414 0l-2-2a1 1 0 0 1 1.414-1.414L9 10.586l3.293-3.293a1 1 0 0 1 1.414 1.414Z"},Hc=u("span",{class:"sr-only"},"Icon",-1),Dc={class:"ml-3 mr-2 text-sm font-normal"},Bc=["onClick"],Kc=u("span",{class:"sr-only"},"Close",-1),zc=u("svg",{class:"w-3 h-3","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 14 14"},[u("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"})],-1),Wc=[Kc,zc];function Gc(e,t,s,n,o,i){return H(),D("div",Lc,[u("ul",null,[(H(!0),D(pe,null,Nt(this.messages.message_array,(r,l)=>(H(),D("li",{key:l,class:"flex items-center w-full max-w-md p-4 mb-4 text-gray-500 bg-white rounded-lg shadow dark:text-gray-400 dark:bg-gray-800",role:"alert"},[u("div",{class:He([{"toast-success":r.type==="success","toast-error":r.type==="error","toast-warning":r.type==="danger","toast-info":r.type==="info"},"inline-flex items-center justify-center flex-shrink-0 w-8 h-8 rounded-lg"])},[(H(),D("svg",Nc,[r.type==="success"?(H(),D("path",Vc)):ce("",!0),r.type==="danger"?(H(),D("path",qc)):ce("",!0),r.type==="error"?(H(),D("path",Fc)):ce("",!0),r.type==="info"?(H(),D("path",Uc)):ce("",!0)])),Hc],2),u("div",Dc,Re(r.message),1),u("button",{type:"button",class:"ml-auto -mx-1.5 -my-1.5 btn btn-sm",onClick:c=>this.delete_message(l)},Wc,8,Bc)]))),128))])])}const Jc=Be(jc,[["render",Gc]]),Ki=""+new URL("dt_squad_logo-13367e92.png",import.meta.url).href;const Qc={props:["user","messages"],data(){return{isNavbarCollapsed:!0,isDropdownOpen:!1}},methods:{toggleNavbarCollapse(){this.isNavbarCollapsed=!this.isNavbarCollapsed},toggleDropdown(){this.isDropdownOpen=!this.isDropdownOpen}}},Zc={class:"bg-white border-gray-200 dark:bg-gray-900 dark:border-gray-700"},Yc={class:"max-w-screen-xl flex flex-wrap items-center justify-between mx-auto p-4"},Xc=u("img",{src:Ki,alt:"Logo",style:{width:"75px"}},null,-1),ea=u("button",{"data-collapse-toggle":"navbar-dropdown",type:"button",class:"nav-dropdown","aria-controls":"navbar-dropdown","aria-expanded":"false"},[u("svg",{class:"w-5 h-5","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 17 14"},[u("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M1 1h15M1 7h15M1 13h15"})])],-1),ta={class:"hidden w-full md:block md:w-auto",id:"navbar-dropdown"},sa={class:"nav-list"};function na(e,t,s,n,o,i){const r=bt("router-link"),l=bt("RouterLink");return H(),D("nav",Zc,[u("div",Yc,[ne(r,{class:"navbar-brand",to:"/"},{default:mt(()=>[Xc]),_:1}),ea,u("div",ta,[u("ul",sa,[u("li",null,[ne(l,{to:"/",class:"nav-link"},{default:mt(()=>[ue("Home")]),_:1})]),u("li",null,[ne(l,{to:"/transcript_search",class:"nav-link"},{default:mt(()=>[ue("Search Chats")]),_:1})]),u("li",null,[ne(l,{to:"/crud",class:"nav-link"},{default:mt(()=>[ue("Manage Users")]),_:1})]),u("li",null,[ne(l,{to:"/dialogue",class:"nav-link"},{default:mt(()=>[ue("Manage Dialogues")]),_:1})])])])])])}const oa=Be(Qc,[["render",na]]);class ia{constructor(t,s){this.objectName="Roles",this.model_name="Role",this.domain_origin=t,this.user=s,this.roles=[],this.test="hey there from Roles",this.counter=0}get_roles_from_api(){const t=this.domain_origin+"/api/users/roles",s={method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${this.user.session_jwt}`}};fetch(t,s).then(n=>n.json()).then(n=>{n.rc==0&&(this.roles=n.records)}).catch(n=>{console.log(n)})}get_roles(){return this.roles}get_role_from_id(t){for(let s=0;s<this.roles.length;s++){const n=this.roles[s];if(n.id==t)return n}return{}}get_role_from_name(t){for(let s=0;s<this.roles.length;s++){const n=this.roles[s];if(n.name==t)return n}return{}}}const ra={data(){return{users:{},user:{},messages:{},roles:{},dialogue_guide:{}}},created(){let e=window.location.origin;e.slice(-5)==":5173"&&(e=e.replace(":5173",":5000"));const t=We(new Mc),s=We(new Tc(t,e)),n=We(new ia(e,s)),o=We(new Oc(s,t,e,n)),i=We(new Ic(s,t,e));this.user=s,this.roles=n,this.users=o,this.messages=t,this.dialogue_guide=i,this.check_invalid_token(),this.check_token_validity()},components:{MessageDisplay:Jc,Navbar:oa},methods:{check_invalid_token(){this.user.invalid_token==!0&&(this.user.logout(),this.messages.add_message("Session expired, please login.","danger"),this.$router.push({name:"login"}),this.user.logged_in=!1,this.user.invalid_token=!1),setTimeout(this.check_invalid_token,2e3)},check_token_validity(){this.user.logged_in==!0&&this.user.check_token_validity(),setTimeout(this.check_token_validity,3e4)},vue_refresh(){try{this.needs_vue_refresh.data=this.user.ip_address}catch{}this.needs_vue_refresh.keep_looping&&setTimeout(this.vue_refresh,500)},check_logged_in(){!this.user.logged_in&&this.$router.name!="passwordreset"&&this.$router.push("login"),setTimeout(this.check_logged_in,5e3)}}},la={class:"min-w-full min-h-full flex flex-col justify-between"},ca=u("div",null,[u("br"),ue(),u("br"),ue(),u("br")],-1),aa={class:"fixed bottom-0 w-full bg-gray-900 text-white py-1",style:{"z-index":"9999"}},ua=u("hr",{class:"mx-4 my-1"},null,-1),da=u("div",{class:"flex justify-between"},[u("p",{class:"mx-3 my-1"}," For support, please email us at: support@thebigteam.co.uk "),u("p",{class:"mx-3 my-1"},[u("i",{className:"icon bi-c-circle ms-0 ps-0",style:{"font-size":"1.0rem"}}),ue(" 2023 - dt-squad Ltd  ")])],-1),fa=u("hr",{class:"mx-4 my-1"},null,-1);function ha(e,t,s,n,o,i){const r=bt("Navbar"),l=bt("RouterView"),c=bt("MessageDisplay");return H(),D("div",la,[this.user.logged_in?(H(),jn(r,{key:0,user:o.user,messages:o.messages,roles:o.roles},null,8,["user","messages","roles"])):ce("",!0),ne(l,{users:o.users,user:o.user,roles:o.roles,messages:o.messages,dialogue_guide:o.dialogue_guide},null,8,["users","user","roles","messages","dialogue_guide"]),ca,u("footer",aa,[ne(c,{messages:o.messages},null,8,["messages"]),ua,da,fa])])}const pa=Be(ra,[["render",ha]]);/*!
  * vue-router v4.3.0
  * (c) 2024 Eduardo San Martin Morote
  * @license MIT
  */const Tt=typeof document<"u";function _a(e){return e.__esModule||e[Symbol.toStringTag]==="Module"}const Q=Object.assign;function Ys(e,t){const s={};for(const n in t){const o=t[n];s[n]=Ie(o)?o.map(e):e(o)}return s}const Xt=()=>{},Ie=Array.isArray,zi=/#/g,ga=/&/g,ma=/\//g,ya=/=/g,va=/\?/g,Wi=/\+/g,wa=/%5B/g,ba=/%5D/g,Gi=/%5E/g,xa=/%60/g,Ji=/%7B/g,Ca=/%7C/g,Qi=/%7D/g,Ea=/%20/g;function Nn(e){return encodeURI(""+e).replace(Ca,"|").replace(wa,"[").replace(ba,"]")}function Ra(e){return Nn(e).replace(Ji,"{").replace(Qi,"}").replace(Gi,"^")}function pn(e){return Nn(e).replace(Wi,"%2B").replace(Ea,"+").replace(zi,"%23").replace(ga,"%26").replace(xa,"`").replace(Ji,"{").replace(Qi,"}").replace(Gi,"^")}function $a(e){return pn(e).replace(ya,"%3D")}function Sa(e){return Nn(e).replace(zi,"%23").replace(va,"%3F")}function ka(e){return e==null?"":Sa(e).replace(ma,"%2F")}function rs(e){try{return decodeURIComponent(""+e)}catch{}return""+e}const Aa=/\/$/,Pa=e=>e.replace(Aa,"");function Xs(e,t,s="/"){let n,o={},i="",r="";const l=t.indexOf("#");let c=t.indexOf("?");return l<c&&l>=0&&(c=-1),c>-1&&(n=t.slice(0,c),i=t.slice(c+1,l>-1?l:t.length),o=e(i)),l>-1&&(n=n||t.slice(0,l),r=t.slice(l,t.length)),n=Ia(n??t,s),{fullPath:n+(i&&"?")+i+r,path:n,query:o,hash:rs(r)}}function Ta(e,t){const s=t.query?e(t.query):"";return t.path+(s&&"?")+s+(t.hash||"")}function $o(e,t){return!t||!e.toLowerCase().startsWith(t.toLowerCase())?e:e.slice(t.length)||"/"}function Oa(e,t,s){const n=t.matched.length-1,o=s.matched.length-1;return n>-1&&n===o&&Ut(t.matched[n],s.matched[o])&&Zi(t.params,s.params)&&e(t.query)===e(s.query)&&t.hash===s.hash}function Ut(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function Zi(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const s in e)if(!Ma(e[s],t[s]))return!1;return!0}function Ma(e,t){return Ie(e)?So(e,t):Ie(t)?So(t,e):e===t}function So(e,t){return Ie(t)?e.length===t.length&&e.every((s,n)=>s===t[n]):e.length===1&&e[0]===t}function Ia(e,t){if(e.startsWith("/"))return e;if(!e)return t;const s=t.split("/"),n=e.split("/"),o=n[n.length-1];(o===".."||o===".")&&n.push("");let i=s.length-1,r,l;for(r=0;r<n.length;r++)if(l=n[r],l!==".")if(l==="..")i>1&&i--;else break;return s.slice(0,i).join("/")+"/"+n.slice(r).join("/")}var ls;(function(e){e.pop="pop",e.push="push"})(ls||(ls={}));var es;(function(e){e.back="back",e.forward="forward",e.unknown=""})(es||(es={}));function ja(e){if(!e)if(Tt){const t=document.querySelector("base");e=t&&t.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return e[0]!=="/"&&e[0]!=="#"&&(e="/"+e),Pa(e)}const La=/^[^#]+#/;function Na(e,t){return e.replace(La,"#")+t}function Va(e,t){const s=document.documentElement.getBoundingClientRect(),n=e.getBoundingClientRect();return{behavior:t.behavior,left:n.left-s.left-(t.left||0),top:n.top-s.top-(t.top||0)}}const Ds=()=>({left:window.scrollX,top:window.scrollY});function qa(e){let t;if("el"in e){const s=e.el,n=typeof s=="string"&&s.startsWith("#"),o=typeof s=="string"?n?document.getElementById(s.slice(1)):document.querySelector(s):s;if(!o)return;t=Va(o,e)}else t=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.scrollX,t.top!=null?t.top:window.scrollY)}function ko(e,t){return(history.state?history.state.position-t:-1)+e}const _n=new Map;function Fa(e,t){_n.set(e,t)}function Ua(e){const t=_n.get(e);return _n.delete(e),t}let Ha=()=>location.protocol+"//"+location.host;function Yi(e,t){const{pathname:s,search:n,hash:o}=t,i=e.indexOf("#");if(i>-1){let l=o.includes(e.slice(i))?e.slice(i).length:1,c=o.slice(l);return c[0]!=="/"&&(c="/"+c),$o(c,"")}return $o(s,e)+n+o}function Da(e,t,s,n){let o=[],i=[],r=null;const l=({state:_})=>{const v=Yi(e,location),A=s.value,I=t.value;let V=0;if(_){if(s.value=v,t.value=_,r&&r===A){r=null;return}V=I?_.position-I.position:0}else n(v);o.forEach(T=>{T(s.value,A,{delta:V,type:ls.pop,direction:V?V>0?es.forward:es.back:es.unknown})})};function c(){r=s.value}function h(_){o.push(_);const v=()=>{const A=o.indexOf(_);A>-1&&o.splice(A,1)};return i.push(v),v}function f(){const{history:_}=window;_.state&&_.replaceState(Q({},_.state,{scroll:Ds()}),"")}function p(){for(const _ of i)_();i=[],window.removeEventListener("popstate",l),window.removeEventListener("beforeunload",f)}return window.addEventListener("popstate",l),window.addEventListener("beforeunload",f,{passive:!0}),{pauseListeners:c,listen:h,destroy:p}}function Ao(e,t,s,n=!1,o=!1){return{back:e,current:t,forward:s,replaced:n,position:window.history.length,scroll:o?Ds():null}}function Ba(e){const{history:t,location:s}=window,n={value:Yi(e,s)},o={value:t.state};o.value||i(n.value,{back:null,current:n.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function i(c,h,f){const p=e.indexOf("#"),_=p>-1?(s.host&&document.querySelector("base")?e:e.slice(p))+c:Ha()+e+c;try{t[f?"replaceState":"pushState"](h,"",_),o.value=h}catch(v){console.error(v),s[f?"replace":"assign"](_)}}function r(c,h){const f=Q({},t.state,Ao(o.value.back,c,o.value.forward,!0),h,{position:o.value.position});i(c,f,!0),n.value=c}function l(c,h){const f=Q({},o.value,t.state,{forward:c,scroll:Ds()});i(f.current,f,!0);const p=Q({},Ao(n.value,c,null),{position:f.position+1},h);i(c,p,!1),n.value=c}return{location:n,state:o,push:l,replace:r}}function Ka(e){e=ja(e);const t=Ba(e),s=Da(e,t.state,t.location,t.replace);function n(i,r=!0){r||s.pauseListeners(),history.go(i)}const o=Q({location:"",base:e,go:n,createHref:Na.bind(null,e)},t,s);return Object.defineProperty(o,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(o,"state",{enumerable:!0,get:()=>t.state.value}),o}function za(e){return typeof e=="string"||e&&typeof e=="object"}function Xi(e){return typeof e=="string"||typeof e=="symbol"}const st={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},er=Symbol("");var Po;(function(e){e[e.aborted=4]="aborted",e[e.cancelled=8]="cancelled",e[e.duplicated=16]="duplicated"})(Po||(Po={}));function Ht(e,t){return Q(new Error,{type:e,[er]:!0},t)}function ze(e,t){return e instanceof Error&&er in e&&(t==null||!!(e.type&t))}const To="[^/]+?",Wa={sensitive:!1,strict:!1,start:!0,end:!0},Ga=/[.+*?^${}()[\]/\\]/g;function Ja(e,t){const s=Q({},Wa,t),n=[];let o=s.start?"^":"";const i=[];for(const h of e){const f=h.length?[]:[90];s.strict&&!h.length&&(o+="/");for(let p=0;p<h.length;p++){const _=h[p];let v=40+(s.sensitive?.25:0);if(_.type===0)p||(o+="/"),o+=_.value.replace(Ga,"\\$&"),v+=40;else if(_.type===1){const{value:A,repeatable:I,optional:V,regexp:T}=_;i.push({name:A,repeatable:I,optional:V});const L=T||To;if(L!==To){v+=10;try{new RegExp(`(${L})`)}catch(W){throw new Error(`Invalid custom RegExp for param "${A}" (${L}): `+W.message)}}let F=I?`((?:${L})(?:/(?:${L}))*)`:`(${L})`;p||(F=V&&h.length<2?`(?:/${F})`:"/"+F),V&&(F+="?"),o+=F,v+=20,V&&(v+=-8),I&&(v+=-20),L===".*"&&(v+=-50)}f.push(v)}n.push(f)}if(s.strict&&s.end){const h=n.length-1;n[h][n[h].length-1]+=.7000000000000001}s.strict||(o+="/?"),s.end?o+="$":s.strict&&(o+="(?:/|$)");const r=new RegExp(o,s.sensitive?"":"i");function l(h){const f=h.match(r),p={};if(!f)return null;for(let _=1;_<f.length;_++){const v=f[_]||"",A=i[_-1];p[A.name]=v&&A.repeatable?v.split("/"):v}return p}function c(h){let f="",p=!1;for(const _ of e){(!p||!f.endsWith("/"))&&(f+="/"),p=!1;for(const v of _)if(v.type===0)f+=v.value;else if(v.type===1){const{value:A,repeatable:I,optional:V}=v,T=A in h?h[A]:"";if(Ie(T)&&!I)throw new Error(`Provided param "${A}" is an array but it is not repeatable (* or + modifiers)`);const L=Ie(T)?T.join("/"):T;if(!L)if(V)_.length<2&&(f.endsWith("/")?f=f.slice(0,-1):p=!0);else throw new Error(`Missing required param "${A}"`);f+=L}}return f||"/"}return{re:r,score:n,keys:i,parse:l,stringify:c}}function Qa(e,t){let s=0;for(;s<e.length&&s<t.length;){const n=t[s]-e[s];if(n)return n;s++}return e.length<t.length?e.length===1&&e[0]===40+40?-1:1:e.length>t.length?t.length===1&&t[0]===40+40?1:-1:0}function Za(e,t){let s=0;const n=e.score,o=t.score;for(;s<n.length&&s<o.length;){const i=Qa(n[s],o[s]);if(i)return i;s++}if(Math.abs(o.length-n.length)===1){if(Oo(n))return 1;if(Oo(o))return-1}return o.length-n.length}function Oo(e){const t=e[e.length-1];return e.length>0&&t[t.length-1]<0}const Ya={type:0,value:""},Xa=/[a-zA-Z0-9_]/;function eu(e){if(!e)return[[]];if(e==="/")return[[Ya]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function t(v){throw new Error(`ERR (${s})/"${h}": ${v}`)}let s=0,n=s;const o=[];let i;function r(){i&&o.push(i),i=[]}let l=0,c,h="",f="";function p(){h&&(s===0?i.push({type:0,value:h}):s===1||s===2||s===3?(i.length>1&&(c==="*"||c==="+")&&t(`A repeatable param (${h}) must be alone in its segment. eg: '/:ids+.`),i.push({type:1,value:h,regexp:f,repeatable:c==="*"||c==="+",optional:c==="*"||c==="?"})):t("Invalid state to consume buffer"),h="")}function _(){h+=c}for(;l<e.length;){if(c=e[l++],c==="\\"&&s!==2){n=s,s=4;continue}switch(s){case 0:c==="/"?(h&&p(),r()):c===":"?(p(),s=1):_();break;case 4:_(),s=n;break;case 1:c==="("?s=2:Xa.test(c)?_():(p(),s=0,c!=="*"&&c!=="?"&&c!=="+"&&l--);break;case 2:c===")"?f[f.length-1]=="\\"?f=f.slice(0,-1)+c:s=3:f+=c;break;case 3:p(),s=0,c!=="*"&&c!=="?"&&c!=="+"&&l--,f="";break;default:t("Unknown state");break}}return s===2&&t(`Unfinished custom RegExp for param "${h}"`),p(),r(),o}function tu(e,t,s){const n=Ja(eu(e.path),s),o=Q(n,{record:e,parent:t,children:[],alias:[]});return t&&!o.record.aliasOf==!t.record.aliasOf&&t.children.push(o),o}function su(e,t){const s=[],n=new Map;t=jo({strict:!1,end:!0,sensitive:!1},t);function o(f){return n.get(f)}function i(f,p,_){const v=!_,A=nu(f);A.aliasOf=_&&_.record;const I=jo(t,f),V=[A];if("alias"in f){const F=typeof f.alias=="string"?[f.alias]:f.alias;for(const W of F)V.push(Q({},A,{components:_?_.record.components:A.components,path:W,aliasOf:_?_.record:A}))}let T,L;for(const F of V){const{path:W}=F;if(p&&W[0]!=="/"){const oe=p.record.path,U=oe[oe.length-1]==="/"?"":"/";F.path=p.record.path+(W&&U+W)}if(T=tu(F,p,I),_?_.alias.push(T):(L=L||T,L!==T&&L.alias.push(T),v&&f.name&&!Io(T)&&r(f.name)),A.children){const oe=A.children;for(let U=0;U<oe.length;U++)i(oe[U],T,_&&_.children[U])}_=_||T,(T.record.components&&Object.keys(T.record.components).length||T.record.name||T.record.redirect)&&c(T)}return L?()=>{r(L)}:Xt}function r(f){if(Xi(f)){const p=n.get(f);p&&(n.delete(f),s.splice(s.indexOf(p),1),p.children.forEach(r),p.alias.forEach(r))}else{const p=s.indexOf(f);p>-1&&(s.splice(p,1),f.record.name&&n.delete(f.record.name),f.children.forEach(r),f.alias.forEach(r))}}function l(){return s}function c(f){let p=0;for(;p<s.length&&Za(f,s[p])>=0&&(f.record.path!==s[p].record.path||!tr(f,s[p]));)p++;s.splice(p,0,f),f.record.name&&!Io(f)&&n.set(f.record.name,f)}function h(f,p){let _,v={},A,I;if("name"in f&&f.name){if(_=n.get(f.name),!_)throw Ht(1,{location:f});I=_.record.name,v=Q(Mo(p.params,_.keys.filter(L=>!L.optional).concat(_.parent?_.parent.keys.filter(L=>L.optional):[]).map(L=>L.name)),f.params&&Mo(f.params,_.keys.map(L=>L.name))),A=_.stringify(v)}else if(f.path!=null)A=f.path,_=s.find(L=>L.re.test(A)),_&&(v=_.parse(A),I=_.record.name);else{if(_=p.name?n.get(p.name):s.find(L=>L.re.test(p.path)),!_)throw Ht(1,{location:f,currentLocation:p});I=_.record.name,v=Q({},p.params,f.params),A=_.stringify(v)}const V=[];let T=_;for(;T;)V.unshift(T.record),T=T.parent;return{name:I,path:A,params:v,matched:V,meta:iu(V)}}return e.forEach(f=>i(f)),{addRoute:i,resolve:h,removeRoute:r,getRoutes:l,getRecordMatcher:o}}function Mo(e,t){const s={};for(const n of t)n in e&&(s[n]=e[n]);return s}function nu(e){return{path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:void 0,beforeEnter:e.beforeEnter,props:ou(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||null:e.component&&{default:e.component}}}function ou(e){const t={},s=e.props||!1;if("component"in e)t.default=s;else for(const n in e.components)t[n]=typeof s=="object"?s[n]:s;return t}function Io(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function iu(e){return e.reduce((t,s)=>Q(t,s.meta),{})}function jo(e,t){const s={};for(const n in e)s[n]=n in t?t[n]:e[n];return s}function tr(e,t){return t.children.some(s=>s===e||tr(e,s))}function ru(e){const t={};if(e===""||e==="?")return t;const n=(e[0]==="?"?e.slice(1):e).split("&");for(let o=0;o<n.length;++o){const i=n[o].replace(Wi," "),r=i.indexOf("="),l=rs(r<0?i:i.slice(0,r)),c=r<0?null:rs(i.slice(r+1));if(l in t){let h=t[l];Ie(h)||(h=t[l]=[h]),h.push(c)}else t[l]=c}return t}function Lo(e){let t="";for(let s in e){const n=e[s];if(s=$a(s),n==null){n!==void 0&&(t+=(t.length?"&":"")+s);continue}(Ie(n)?n.map(i=>i&&pn(i)):[n&&pn(n)]).forEach(i=>{i!==void 0&&(t+=(t.length?"&":"")+s,i!=null&&(t+="="+i))})}return t}function lu(e){const t={};for(const s in e){const n=e[s];n!==void 0&&(t[s]=Ie(n)?n.map(o=>o==null?null:""+o):n==null?n:""+n)}return t}const cu=Symbol(""),No=Symbol(""),Vn=Symbol(""),sr=Symbol(""),gn=Symbol("");function Wt(){let e=[];function t(n){return e.push(n),()=>{const o=e.indexOf(n);o>-1&&e.splice(o,1)}}function s(){e=[]}return{add:t,list:()=>e.slice(),reset:s}}function rt(e,t,s,n,o,i=r=>r()){const r=n&&(n.enterCallbacks[o]=n.enterCallbacks[o]||[]);return()=>new Promise((l,c)=>{const h=_=>{_===!1?c(Ht(4,{from:s,to:t})):_ instanceof Error?c(_):za(_)?c(Ht(2,{from:t,to:_})):(r&&n.enterCallbacks[o]===r&&typeof _=="function"&&r.push(_),l())},f=i(()=>e.call(n&&n.instances[o],t,s,h));let p=Promise.resolve(f);e.length<3&&(p=p.then(h)),p.catch(_=>c(_))})}function en(e,t,s,n,o=i=>i()){const i=[];for(const r of e)for(const l in r.components){let c=r.components[l];if(!(t!=="beforeRouteEnter"&&!r.instances[l]))if(au(c)){const f=(c.__vccOpts||c)[t];f&&i.push(rt(f,s,n,r,l,o))}else{let h=c();i.push(()=>h.then(f=>{if(!f)return Promise.reject(new Error(`Couldn't resolve component "${l}" at "${r.path}"`));const p=_a(f)?f.default:f;r.components[l]=p;const v=(p.__vccOpts||p)[t];return v&&rt(v,s,n,r,l,o)()}))}}return i}function au(e){return typeof e=="object"||"displayName"in e||"props"in e||"__vccOpts"in e}function Vo(e){const t=Qe(Vn),s=Qe(sr),n=Te(()=>t.resolve(jt(e.to))),o=Te(()=>{const{matched:c}=n.value,{length:h}=c,f=c[h-1],p=s.matched;if(!f||!p.length)return-1;const _=p.findIndex(Ut.bind(null,f));if(_>-1)return _;const v=qo(c[h-2]);return h>1&&qo(f)===v&&p[p.length-1].path!==v?p.findIndex(Ut.bind(null,c[h-2])):_}),i=Te(()=>o.value>-1&&hu(s.params,n.value.params)),r=Te(()=>o.value>-1&&o.value===s.matched.length-1&&Zi(s.params,n.value.params));function l(c={}){return fu(c)?t[jt(e.replace)?"replace":"push"](jt(e.to)).catch(Xt):Promise.resolve()}return{route:n,href:Te(()=>n.value.href),isActive:i,isExactActive:r,navigate:l}}const uu=Ei({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:Vo,setup(e,{slots:t}){const s=We(Vo(e)),{options:n}=Qe(Vn),o=Te(()=>({[Fo(e.activeClass,n.linkActiveClass,"router-link-active")]:s.isActive,[Fo(e.exactActiveClass,n.linkExactActiveClass,"router-link-exact-active")]:s.isExactActive}));return()=>{const i=t.default&&t.default(s);return e.custom?i:Ui("a",{"aria-current":s.isExactActive?e.ariaCurrentValue:null,href:s.href,onClick:s.navigate,class:o.value},i)}}}),du=uu;function fu(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&!(e.button!==void 0&&e.button!==0)){if(e.currentTarget&&e.currentTarget.getAttribute){const t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function hu(e,t){for(const s in t){const n=t[s],o=e[s];if(typeof n=="string"){if(n!==o)return!1}else if(!Ie(o)||o.length!==n.length||n.some((i,r)=>i!==o[r]))return!1}return!0}function qo(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const Fo=(e,t,s)=>e??t??s,pu=Ei({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:t,slots:s}){const n=Qe(gn),o=Te(()=>e.route||n.value),i=Qe(No,0),r=Te(()=>{let h=jt(i);const{matched:f}=o.value;let p;for(;(p=f[h])&&!p.components;)h++;return h}),l=Te(()=>o.value.matched[r.value]);xs(No,Te(()=>r.value+1)),xs(cu,l),xs(gn,o);const c=qr();return ws(()=>[c.value,l.value,e.name],([h,f,p],[_,v,A])=>{f&&(f.instances[p]=h,v&&v!==f&&h&&h===_&&(f.leaveGuards.size||(f.leaveGuards=v.leaveGuards),f.updateGuards.size||(f.updateGuards=v.updateGuards))),h&&f&&(!v||!Ut(f,v)||!_)&&(f.enterCallbacks[p]||[]).forEach(I=>I(h))},{flush:"post"}),()=>{const h=o.value,f=e.name,p=l.value,_=p&&p.components[f];if(!_)return Uo(s.default,{Component:_,route:h});const v=p.props[f],A=v?v===!0?h.params:typeof v=="function"?v(h):v:null,V=Ui(_,Q({},A,t,{onVnodeUnmounted:T=>{T.component.isUnmounted&&(p.instances[f]=null)},ref:c}));return Uo(s.default,{Component:V,route:h})||V}}});function Uo(e,t){if(!e)return null;const s=e(t);return s.length===1?s[0]:s}const _u=pu;function gu(e){const t=su(e.routes,e),s=e.parseQuery||ru,n=e.stringifyQuery||Lo,o=e.history,i=Wt(),r=Wt(),l=Wt(),c=Fr(st);let h=st;Tt&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const f=Ys.bind(null,y=>""+y),p=Ys.bind(null,ka),_=Ys.bind(null,rs);function v(y,S){let R,P;return Xi(y)?(R=t.getRecordMatcher(y),P=S):P=y,t.addRoute(P,R)}function A(y){const S=t.getRecordMatcher(y);S&&t.removeRoute(S)}function I(){return t.getRoutes().map(y=>y.record)}function V(y){return!!t.getRecordMatcher(y)}function T(y,S){if(S=Q({},S||c.value),typeof y=="string"){const d=Xs(s,y,S.path),g=t.resolve({path:d.path},S),w=o.createHref(d.fullPath);return Q(d,g,{params:_(g.params),hash:rs(d.hash),redirectedFrom:void 0,href:w})}let R;if(y.path!=null)R=Q({},y,{path:Xs(s,y.path,S.path).path});else{const d=Q({},y.params);for(const g in d)d[g]==null&&delete d[g];R=Q({},y,{params:p(d)}),S.params=p(S.params)}const P=t.resolve(R,S),J=y.hash||"";P.params=f(_(P.params));const te=Ta(n,Q({},y,{hash:Ra(J),path:P.path})),a=o.createHref(te);return Q({fullPath:te,hash:J,query:n===Lo?lu(y.query):y.query||{}},P,{redirectedFrom:void 0,href:a})}function L(y){return typeof y=="string"?Xs(s,y,c.value.path):Q({},y)}function F(y,S){if(h!==y)return Ht(8,{from:S,to:y})}function W(y){return me(y)}function oe(y){return W(Q(L(y),{replace:!0}))}function U(y){const S=y.matched[y.matched.length-1];if(S&&S.redirect){const{redirect:R}=S;let P=typeof R=="function"?R(y):R;return typeof P=="string"&&(P=P.includes("?")||P.includes("#")?P=L(P):{path:P},P.params={}),Q({query:y.query,hash:y.hash,params:P.path!=null?{}:y.params},P)}}function me(y,S){const R=h=T(y),P=c.value,J=y.state,te=y.force,a=y.replace===!0,d=U(R);if(d)return me(Q(L(d),{state:typeof d=="object"?Q({},J,d.state):J,force:te,replace:a}),S||R);const g=R;g.redirectedFrom=S;let w;return!te&&Oa(n,P,R)&&(w=Ht(16,{to:g,from:P}),Ne(P,P,!0,!1)),(w?Promise.resolve(w):je(g,P)).catch(m=>ze(m)?ze(m,2)?m:et(m):G(m,g,P)).then(m=>{if(m){if(ze(m,2))return me(Q({replace:a},L(m.to),{state:typeof m.to=="object"?Q({},J,m.to.state):J,force:te}),S||g)}else m=ht(g,P,!0,a,J);return Xe(g,P,m),m})}function Se(y,S){const R=F(y,S);return R?Promise.reject(R):Promise.resolve()}function ft(y){const S=At.values().next().value;return S&&typeof S.runWithContext=="function"?S.runWithContext(y):y()}function je(y,S){let R;const[P,J,te]=mu(y,S);R=en(P.reverse(),"beforeRouteLeave",y,S);for(const d of P)d.leaveGuards.forEach(g=>{R.push(rt(g,y,S))});const a=Se.bind(null,y,S);return R.push(a),fe(R).then(()=>{R=[];for(const d of i.list())R.push(rt(d,y,S));return R.push(a),fe(R)}).then(()=>{R=en(J,"beforeRouteUpdate",y,S);for(const d of J)d.updateGuards.forEach(g=>{R.push(rt(g,y,S))});return R.push(a),fe(R)}).then(()=>{R=[];for(const d of te)if(d.beforeEnter)if(Ie(d.beforeEnter))for(const g of d.beforeEnter)R.push(rt(g,y,S));else R.push(rt(d.beforeEnter,y,S));return R.push(a),fe(R)}).then(()=>(y.matched.forEach(d=>d.enterCallbacks={}),R=en(te,"beforeRouteEnter",y,S,ft),R.push(a),fe(R))).then(()=>{R=[];for(const d of r.list())R.push(rt(d,y,S));return R.push(a),fe(R)}).catch(d=>ze(d,8)?d:Promise.reject(d))}function Xe(y,S,R){l.list().forEach(P=>ft(()=>P(y,S,R)))}function ht(y,S,R,P,J){const te=F(y,S);if(te)return te;const a=S===st,d=Tt?history.state:{};R&&(P||a?o.replace(y.fullPath,Q({scroll:a&&d&&d.scroll},J)):o.push(y.fullPath,J)),c.value=y,Ne(y,S,R,a),et()}let Le;function Bt(){Le||(Le=o.listen((y,S,R)=>{if(!us.listening)return;const P=T(y),J=U(P);if(J){me(Q(J,{replace:!0}),P).catch(Xt);return}h=P;const te=c.value;Tt&&Fa(ko(te.fullPath,R.delta),Ds()),je(P,te).catch(a=>ze(a,12)?a:ze(a,2)?(me(a.to,P).then(d=>{ze(d,20)&&!R.delta&&R.type===ls.pop&&o.go(-1,!1)}).catch(Xt),Promise.reject()):(R.delta&&o.go(-R.delta,!1),G(a,P,te))).then(a=>{a=a||ht(P,te,!1),a&&(R.delta&&!ze(a,8)?o.go(-R.delta,!1):R.type===ls.pop&&ze(a,20)&&o.go(-1,!1)),Xe(P,te,a)}).catch(Xt)}))}let St=Wt(),re=Wt(),Z;function G(y,S,R){et(y);const P=re.list();return P.length?P.forEach(J=>J(y,S,R)):console.error(y),Promise.reject(y)}function Ke(){return Z&&c.value!==st?Promise.resolve():new Promise((y,S)=>{St.add([y,S])})}function et(y){return Z||(Z=!y,Bt(),St.list().forEach(([S,R])=>y?R(y):S()),St.reset()),y}function Ne(y,S,R,P){const{scrollBehavior:J}=e;if(!Tt||!J)return Promise.resolve();const te=!R&&Ua(ko(y.fullPath,0))||(P||!R)&&history.state&&history.state.scroll||null;return Tn().then(()=>J(y,S,te)).then(a=>a&&qa(a)).catch(a=>G(a,y,S))}const ve=y=>o.go(y);let kt;const At=new Set,us={currentRoute:c,listening:!0,addRoute:v,removeRoute:A,hasRoute:V,getRoutes:I,resolve:T,options:e,push:W,replace:oe,go:ve,back:()=>ve(-1),forward:()=>ve(1),beforeEach:i.add,beforeResolve:r.add,afterEach:l.add,onError:re.add,isReady:Ke,install(y){const S=this;y.component("RouterLink",du),y.component("RouterView",_u),y.config.globalProperties.$router=S,Object.defineProperty(y.config.globalProperties,"$route",{enumerable:!0,get:()=>jt(c)}),Tt&&!kt&&c.value===st&&(kt=!0,W(o.location).catch(J=>{}));const R={};for(const J in st)Object.defineProperty(R,J,{get:()=>c.value[J],enumerable:!0});y.provide(Vn,S),y.provide(sr,ri(R)),y.provide(gn,c);const P=y.unmount;At.add(y),y.unmount=function(){At.delete(y),At.size<1&&(h=st,Le&&Le(),Le=null,c.value=st,kt=!1,Z=!1),P()}}};function fe(y){return y.reduce((S,R)=>S.then(()=>ft(R)),Promise.resolve())}return us}function mu(e,t){const s=[],n=[],o=[],i=Math.max(t.matched.length,e.matched.length);for(let r=0;r<i;r++){const l=t.matched[r];l&&(e.matched.find(h=>Ut(h,l))?n.push(l):s.push(l));const c=e.matched[r];c&&(t.matched.find(h=>Ut(h,c))||o.push(c))}return[s,n,o]}const yu={data(){return{needsVueRefresh:{data:!1,keepLooping:!1}}},methods:{add_user(){this.users.api_create_user_db()},vueRefresh(){["super user","ho user","support"].includes(this.user.role_name)&&this.user.logged_in||this.$router.push("login"),this.needsVueRefresh.keepLooping&&setTimeout(this.vueRefresh,500)}},props:["users","user","roles"],created(){this.needsVueRefresh.keepLooping=!0,this.vueRefresh(),this.users.populate_user_list(),this.roles.get_roles_from_api()},beforeUnmount(){this.needsVueRefresh.keepLooping=!1}},vu={class:"flex flex-col items-center bg-white shadow-md rounded-lg overflow-hidden p-6"},wu=u("h1",{class:"text-4xl font-bold mb-4"},"Add Users",-1),bu={class:"w-1/2"},xu={class:"relative mb-4"},Cu=u("label",{for:"name",class:"absolute top-0 left-0 px-1 -mt-px text-gray-700 bg-white"},"Name",-1),Eu={class:"relative mb-4"},Ru=u("label",{for:"email",class:"absolute top-0 left-0 px-1 -mt-px text-gray-700 bg-white"},"Email address",-1),$u={class:"mb-4"},Su=u("option",{value:"",disabled:""},"Select the role",-1),ku=u("option",{value:"user"},"User",-1),Au=u("option",{value:"support"},"Support",-1),Pu=u("option",{value:"ho user"},"ho user",-1),Tu=[Su,ku,Au,Pu],Ou={class:"mt-8"},Mu={class:"flex flex-wrap"},Iu={class:"w-full"},ju={class:"min-w-full divide-y divide-gray-200 table-auto"},Lu=u("thead",{class:"bg-gray-800 text-white"},[u("tr",null,[u("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider"},"Id #"),u("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider"},"Name"),u("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider"},"Email"),u("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider"},"Actions")])],-1),Nu={class:"bg-white divide-y divide-gray-200"},Vu={class:"px-6 py-4 whitespace-nowrap"},qu={class:"px-6 py-4 whitespace-nowrap"},Fu={class:"px-6 py-4 whitespace-nowrap"},Uu={class:"px-6 py-4 whitespace-nowrap"},Hu=u("button",{type:"button",class:"text-sm bg-green-500 hover:bg-green-700 text-white py-1 px-2 rounded"},[u("i",{class:"bi bi-pencil-square"}),ue(" | Edit ")],-1),Du=["onClick"],Bu=u("i",{class:"bi bi-trash"},null,-1),Ku=u("button",{type:"button",class:"btn btn-primary"},[u("i",{class:"bi bi-unlock"}),ue(" | Unlock")],-1),zu=u("button",{type:"button",class:"btn btn-warning"},[u("i",{class:"bi bi-shield-lock"}),ue(" | Reset MFA")],-1);function Wu(e,t,s,n,o,i){return H(),D(pe,null,[u("div",vu,[wu,u("form",bu,[u("div",xu,[ae(u("input",{type:"text",id:"name",class:He(["form-input mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50",this.users.name_valid]),"onUpdate:modelValue":t[0]||(t[0]=r=>this.users.new_user.name=r),onChange:t[1]||(t[1]=r=>this.users.check_name_valid(this.users.new_user.name))},null,34),[[he,this.users.new_user.name]]),Cu]),u("div",Eu,[ae(u("input",{type:"text",id:"email",class:He(["form-input mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50",this.users.email_valid]),"onUpdate:modelValue":t[2]||(t[2]=r=>this.users.new_user.email=r),onChange:t[3]||(t[3]=r=>this.users.check_email_valid(this.users.new_user.email))},null,34),[[he,this.users.new_user.email]]),Ru]),u("div",$u,[ae(u("select",{class:He(["form-select mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50",this.role_valid]),onChange:t[4]||(t[4]=r=>this.users.check_role_valid()),"aria-label":"Role","onUpdate:modelValue":t[5]||(t[5]=r=>this.users.new_user.role=r)},Tu,34),[[Di,this.users.new_user.role]])]),u("button",{type:"button",class:"w-full bg-blue-500 text-white font-bold py-2 px-4 rounded hover:bg-blue-700 mb-4",onClick:t[6]||(t[6]=r=>{this.add_user(),this.users.populate_user_list()})}," Create user ")])]),u("div",Ou,[u("div",Mu,[u("div",Iu,[u("table",ju,[Lu,u("tbody",Nu,[(H(!0),D(pe,null,Nt(s.users.user_list,r=>(H(),D("tr",{key:r.id},[u("td",Vu,Re(r.id),1),u("td",qu,Re(r.name),1),u("td",Fu,Re(r.email),1),u("td",Uu,[Hu,u("button",{type:"button",class:"text-sm bg-red-500 hover:bg-red-700 text-white py-1 px-2 rounded",onClick:l=>this.users.delete_user(r.id)},[Bu,ue(" | Delete ")],8,Du),Ku,zu])]))),128))])])])])])],64)}const Gu=Be(yu,[["render",Wu]]),Ju={data(){return{needsVueRefresh:{data:!1,keepLooping:!1}}},props:["user","users","messages","dialogue_guide"],methods:{},created(){this.needsVueRefresh.keepLooping=!0},beforeUnmount(){this.needsVueRefresh.keepLooping=!1}},Qu=u("div",{class:"mainContainer"},[u("div",{class:"sectionContainer"})],-1),Zu=[Qu];function Yu(e,t,s,n,o,i){return H(),D("main",null,Zu)}const Ho=Be(Ju,[["render",Yu]]),Xu={props:{user:{type:Object},messages:{type:Object}},data(){return{mfaAuthenticatorCode:""}},methods:{renderQRCode(){console.log("rendering user qr code"),this.user.qr_code_image="data:image/png;base64,"+this.user.mfa_qr_code_base64},async checkMfaCode(){try{await this.user.check_mfa_authenticator_code(this.mfaAuthenticatorCode)?(this.messages.add_message("MFA confirmed, you are now logged in.","success"),this.user.role_name=="client user"?this.$router.push("/questionnaire"):this.user.role_name=="coporate user"?this.$router.push("/manage_jobs"):this.$router.push("/index")):(this.messages.add_message("The code did not authenticate correctly. It may have just missed the time expiry, get a new code and try again","danger"),this.mfaAuthenticatorCode="")}catch(e){console.error("Error in MFA authentication",e)}}}},ed={key:0,class:"card-body mx-3 my-0"},td={class:"row justify-content-center"},sd={class:"col-lg-6 col-md-8"},nd={class:"card border-dark text-center"},od=u("div",{class:"card-header border-dark"},[u("div",{class:"row justify-content-between"},[u("div",{class:"col-8"},[u("p",{class:"card-text"},"Set up Multi-Factor Authentication")]),u("div",{class:"col-4"},[u("a",{class:"btn btn-success btn-sm",target:"_blank",href:"https://vimeo.com/799113927/57039dd5d5",role:"button"},"2 min. explainer video")])])],-1),id={class:"card-body w-full"},rd={class:"row justify-content-center w-full"},ld=["src"],cd=u("p",{class:"card-text"},` It's now a requirement that all systems used within your organisation must be secured with "Multi Factor Authentication" `,-1),ad={key:1,class:"card-text"},ud={key:2,class:"card-text"},dd=u("strong",null,"White Ensign Portal",-1),fd={class:"mt-2"},hd={class:"input-group"},pd=u("span",{class:""},"6 Digit Code",-1);function _d(e,t,s,n,o,i){return s.user.password_authorised&&!s.user.mfa_authorised?(H(),D("div",ed,[u("div",td,[u("div",sd,[u("div",nd,[od,u("div",id,[u("div",rd,[this.user.mfa_secret_confirmed?ce("",!0):(H(),D("img",{key:0,src:s.user.qr_code_image,alt:"QR Code",style:{width:"250px"}},null,8,ld)),cd,this.user.mfa_secret_confirmed?(H(),D("p",ad," If you are unable to find your account on your authenticator app, please email support at support@readiness-tracker.co.uk to get your Multi Factor Authentication reset. ")):ce("",!0),this.user.mfa_secret_confirmed?ce("",!0):(H(),D("p",ud,[ue("Scan this QR Code with the Microsoft or Google Authenticator and enter the 6 digit MFA Authenticator Code for the "),dd,ue(" in the field below ")])),u("div",fd,[u("div",hd,[pd,ae(u("input",{class:"input input-primary",type:"text",id:"mfa_authenticator_code",autocomplete:"off",name:"mfa_authenticator_code","onUpdate:modelValue":t[0]||(t[0]=r=>o.mfaAuthenticatorCode=r),placeholder:"",onKeyup:t[1]||(t[1]=Rc(r=>i.checkMfaCode(),["enter"]))},null,544),[[he,o.mfaAuthenticatorCode]])]),u("button",{type:"button",class:"btn btn-primary my-3",onClick:t[2]||(t[2]=r=>i.checkMfaCode())}," Check authenticator code ")])])])])])])])):ce("",!0)}const gd=Be(Xu,[["render",_d]]);const md={data(){return{needsVueRefresh:{data:!1,keepLooping:!1},mfa_qr_image_rendered:!1,password_visible:!1,data_usage_checked:[]}},components:{MultiFactorAuth:gd},methods:{async loginAPI(){try{await this.user.login(),this.user.mfa_authorised?this.user.role_name=="client user"?this.$router.push("/questionnaire"):this.user.role_name=="coporate user"?this.$router.push("/manage_jobs"):this.$router.push("/index"):this.user.password_authorised&&this.$refs.multiFactorAuthComponent.renderQRCode(),this.user.login_email="",this.user.login_password=""}catch(e){this.user.login_email="",this.user.login_password="",console.error("Login failed:",e)}},vue_refresh_login(){try{this.needsVueRefresh.data="",this.needsVueRefresh.data=this.needsVueRefresh.data+" "+this.user.mfa_authorised,this.needsVueRefresh.data=this.needsVueRefresh.data+" "+this.user.password_authorised,this.needsVueRefresh.data=this.needsVueRefresh.data+" "+this.user.mfa_qr_image_rendered,this.needsVueRefresh.data=this.needsVueRefresh.data+" "+this.user.mfa_authorised,this.needsVueRefresh.data=this.needsVueRefresh.data+" "+this.user.mfa_secret_confirmed,this.needsVueRefresh.data=this.needsVueRefresh.data+" "+this.user.logged_in}catch(e){console.log(e)}this.needsVueRefresh.keepLooping&&setTimeout(this.vue_refresh_login,500)},render_qr_code(){const e=this.user.mfa_qr_image.length,t=this.user.mfa_qr_image[0].length;var s=document.getElementById("qr_code_canvas");s.width=t,s.height=e;var n=s.getContext("2d");n.fillRect(0,0,t,e);var o=n.getImageData(0,0,t,e);const i=o.data;for(var r=0;r<e;r++)for(var l=0;l<t;l++){const c=this.user.mfa_qr_image[r][l];[0,255].includes(c)||console.log(c);const h=r*t*4+l*4;`${i.length}${h}${r}${l}${c}`,i[h]=c,i[h+1]=c,i[h+2]=c,i[h+3]=255}n.putImageData(o,0,0),this.mfa_qr_image_rendered=!0}},props:["users","user","roles","messages"],created(){this.needsVueRefresh.keepLooping=!0,this.vue_refresh_login()},beforeUnmount(){this.needsVueRefresh.keepLooping=!1,clearTimeout(this.login_timeout)},computed:{disabled(){return this.data_usage_checked.length==0||this.user.login_email.length==0||this.user.login_password.length==0}}},Ye=e=>(vi("data-v-e1a70b76"),e=e(),wi(),e),yd={class:"mainContainer flex justify-center items-center min-h-screen"},vd={class:"row w-full"},wd=Ye(()=>u("div",{class:"col-md-2 col-lg-3 col-xl-4"},null,-1)),bd={class:"col-md-8 col-lg-6 col-xl-4"},xd={class:"card px-0"},Cd=Ye(()=>u("div",{class:"text-center"},[u("img",{class:"card-img-top m-4 mt-10",src:Ki,alt:"Logo",style:{width:"90px"}})],-1)),Ed={key:0,class:"card-body m-3 pb-1 mb-0"},Rd={class:"row my-2"},$d={class:"input input-primary flex items-center gap-2"},Sd=Ye(()=>u("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"currentColor",class:"w-4 h-4 opacity-70"},[u("path",{d:"M2.5 3A1.5 1.5 0 0 0 1 4.5v.793c.026.009.051.02.076.032L7.674 8.51c.206.1.446.1.652 0l6.598-3.185A.755.755 0 0 1 15 5.293V4.5A1.5 1.5 0 0 0 13.5 3h-11Z"}),u("path",{d:"M15 6.954 8.978 9.86a2.25 2.25 0 0 1-1.956 0L1 6.954V11.5A1.5 1.5 0 0 0 2.5 13h11a1.5 1.5 0 0 0 1.5-1.5V6.954Z"})],-1)),kd={class:"flex flex-col items-start space-y-2 mt-5 relative"},Ad={class:"input input-primary w-full flex items-center gap-2 pr-10 relative"},Pd=Ye(()=>u("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"currentColor",class:"w-4 h-4 opacity-70"},[u("path",{"fill-rule":"evenodd",d:"M14 6a4 4 0 0 1-4.899 3.899l-1.955 1.955a.5.5 0 0 1-.353.146H5v1.5a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1-.5-.5v-2.293a.5.5 0 0 1 .146-.353l3.955-3.955A4 4 0 1 1 14 6Zm-4-2a.75.75 0 0 0 0 1.5.5.5 0 0 1 .5.5.75.75 0 0 0 1.5 0 2 2 0 0 0-2-2Z","clip-rule":"evenodd"})],-1)),Td=["type"],Od={class:"row flex flex-row items-center space-x-5 mt-4"},Md={class:"col-12 flex justify-center items-center ml-6"},Id={class:"form-check mr-3"},jd=Ye(()=>u("p",{class:"text-left text-lg mb-0"},[u("label",{for:"data_usage_checked",class:"inline-block"},[u("small",null,[ue("Happy with "),u("a",null,"Data Usage"),ue("?")])])],-1)),Ld={class:"row flex flex-row items-center space-x-5 mt-4"},Nd={class:"flex-grow"},Vd=["disabled"],qd={class:"flex flex-row items-center mt-5"},Fd={class:"col-6 d-grid gap-1 w-full space-x-5 mr-2"},Ud=["disabled"],Hd={class:"col-6 d-grid gap-1 w-full"},Dd={key:1,class:"card-body mx-0 my-0"},Bd={class:""},Kd={class:"w-full"},zd={key:2,class:"card-body m-3 text-center"},Wd=Ye(()=>u("hr",null,null,-1)),Gd=Ye(()=>u("h4",{class:"text-center mt-5"},[u("strong",null,"Data Usage")],-1)),Jd=Ye(()=>u("p",{class:"small"},"By signing in, you confirm that you are happy with our data usage policy. ",-1)),Qd=Ye(()=>u("p",{class:"small"},[u("strong",null," You must keep your password secret and not share it with anyone else")],-1)),Zd=[Wd,Gd,Jd,Qd];function Yd(e,t,s,n,o,i){const r=bt("MultiFactorAuth");return H(),D("div",yd,[u("div",vd,[wd,u("div",bd,[u("div",null,[u("div",xd,[Cd,this.user.password_authorised?ce("",!0):(H(),D("div",Ed,[u("div",Rd,[u("label",$d,[Sd,ae(u("input",{class:"grow",type:"email",id:"email",name:"email",placeholder:"Email","onUpdate:modelValue":t[0]||(t[0]=l=>s.user.login_email=l)},null,512),[[he,s.user.login_email]])])]),u("div",kd,[u("label",Ad,[Pd,ae(u("input",{type:o.password_visible?"text":"password",name:"password",id:"password","onUpdate:modelValue":t[1]||(t[1]=l=>this.user.login_password=l),class:"grow pr-10",placeholder:"Password"},null,8,Td),[[wc,this.user.login_password]])]),u("div",{class:"cursor-pointer absolute inset-y-0 right-0 flex items-center pr-3",onClick:t[2]||(t[2]=l=>o.password_visible=!o.password_visible)},[u("i",{class:He([o.password_visible?"pi pi-eye":"pi pi-eye-slash","text-xl text-gray-500"])},null,2)])]),u("div",Od,[u("div",Md,[u("div",Id,[ae(u("input",{type:"checkbox",checked:"checked",class:"checkbox checkbox-lg border-success checkbox-success rounded-md",id:"data_usage_checked",value:"data_usage_checked","onUpdate:modelValue":t[3]||(t[3]=l=>o.data_usage_checked=l)},null,512),[[Hi,o.data_usage_checked]])]),jd])]),u("div",Ld,[u("div",Nd,[u("button",{onClick:t[4]||(t[4]=l=>this.loginAPI()),disabled:i.disabled,class:He({"w-full border border-primary text-primary bg-transparent hover:bg-primary hover:text-white font-medium rounded-md p-2 transition duration-500":!i.disabled,"w-full border border-neutral text-neutral bg-transparent hover:bg-neutral hover:text-white font-medium rounded-md p-2 transition duration-500":i.disabled})}," Login ",10,Vd)])]),u("div",qd,[u("div",Fd,[u("button",{class:"whitespace-nowrap border border-secondary text-secondary bg-transparent hover:bg-secondary hover:text-white font-medium rounded-md p-2",disabled:this.user.login_email.length==0,onClick:t[5]||(t[5]=l=>this.user.api_reset_password_request(this.user.login_email))}," Password Reset ",8,Ud)]),u("div",Hd,[u("button",{class:"whitespace-nowrap border border-success text-success bg-transparent hover:bg-success hover:text-white font-medium rounded-md p-2",onClick:t[6]||(t[6]=l=>this.$router.push("/register"))}," Register ")])])])),this.user.password_authorised&&!this.user.mfa_authorised?(H(),D("div",Dd,[u("div",Bd,[u("div",Kd,[s.user.password_authorised&&!s.user.mfa_authorised?(H(),jn(r,{key:0,ref:"multiFactorAuthComponent",user:s.user,messages:s.messages},null,8,["user","messages"])):ce("",!0)])])])):ce("",!0),this.user.password_authorised?ce("",!0):(H(),D("div",zd,Zd))])])])])])}const Xd=Be(md,[["render",Yd],["__scopeId","data-v-e1a70b76"]]),ef={name:"PasswordResetView",data(){return{input:{password_reset_token:this.$route.query.password_reset_token,password_1:"",password_2:""}}},methods:{},props:["user","users"]},tf={class:"min-vh-100 d-flex align-items-center"},sf={class:"row w-100"},nf=u("div",{class:"col-md-2 col-lg-3 col-xl-4"},null,-1),of={class:"col-md-8 col-lg-6 col-xl-4"},rf={class:"card my-2 px-0"},lf={class:"card-body"},cf=u("h3",{class:"card-title"},"Password Set / Reset",-1),af={key:0},uf=u("p",{class:"card-text"},"The link you have clicked on is only valid for a short while. If it has timed out, you will get a rejection message and you will need to send another request at the main login page ",-1),df=[uf],ff=ql('<p class="card-text">You are about to set / reset your password.</p><p class="card-text">A password complexity algorithm is in place so choose carefully according to these rules. Your password must:</p><ul><li>be between 8 and 64 characters long</li><li>contain an uppercase character</li><li>contain a lowercase character</li><li>contain a numerical character</li><li>not have more than half the characters as the same character</li><li>not be one of the passwords that are known to be insecure (&quot;password123&quot; for example)</li></ul><p>If your password fails any of these tests, there will be a rejection message.</p><p class="card-text">We recommend using a password manager to choose secure passwords and help you use them in a convenient way.</p>',5),hf={class:"card-text"},pf=u("label",{for:"password",id:"password",class:"form-label"},"Enter new password",-1),_f=u("div",{class:"valid-feedback"},"Strong enough",-1),gf={class:"card-text"},mf=u("label",{for:"password",id:"password",class:"form-label"},"Confirm new password",-1),yf={class:"d-grid gap-1"},vf={class:"d-grid gap-1"},wf=u("div",{class:"col-md-2 col-lg-3 col-xl-4"},null,-1);function bf(e,t,s,n,o,i){const r=bt("router-link");return H(),D("div",tf,[u("div",sf,[nf,u("div",of,[u("div",rf,[u("div",lf,[cf,this.input.password_reset_token>0?(H(),D("div",af,df)):ce("",!0),ff,u("p",hf,[pf,ae(u("input",{class:He(["form-control",this.users.password_valid]),type:"password",name:"password","onUpdate:modelValue":t[0]||(t[0]=l=>o.input.password_1=l),placeholder:"Password",onChange:t[1]||(t[1]=l=>this.users.check_password_valid(this.input.password_1))},null,34),[[he,o.input.password_1]]),_f]),u("p",gf,[mf,ae(u("input",{class:"form-control",type:"password",name:"password","onUpdate:modelValue":t[2]||(t[2]=l=>o.input.password_2=l),placeholder:"Password"},null,512),[[he,o.input.password_2]])]),u("div",yf,[u("button",{type:"button",class:"btn btn-success btn-lg my-1",onClick:t[3]||(t[3]=l=>this.user.api_reset_password(this.input))},"Set / Reset Your Password")]),u("div",vf,[ne(r,{class:"btn btn-primary",to:"/"},{default:mt(()=>[ue("Help & Info")]),_:1})])])])]),wf])])}const xf=Be(ef,[["render",bf]]);const Cf={data(){return{needs_vue_refresh:{data:!1,keep_looping:!1},create_modal_open:!1,edit_modal_open:!1}},methods:{delete_dialogue(e,t){this.dialogue_guide.api_delete_guide(e)===!0&&this.dialogue_guide.dialogue_guides.splice(t,1)},remove_question(e){this.dialogue_guide.new_dialogue.question_set.splice(e,1)},add_dialogue(){this.dialogue_guide.api_create_dialogue_guide(),this.dialogue_guide.get_dialogue_guides_from_api()},vue_refresh(){["super user","ho user","support"].includes(this.user.role_name)&&this.user.logged_in||this.$router.push("login"),this.needs_vue_refresh.keep_looping&&setTimeout(this.vue_refresh,500)},open_modal(e){e=="create"?this.create_modal_open=!0:this.edit_modal_open=!0},close_modal(){this.edit_modal_open=!1,this.create_modal_open=!1},update_dialogue(){this.dialogue_guide.api_update_dialogue_guide()}},props:["users","user","roles","messages","dialogue_guide"],created(){this.needs_vue_refresh.keep_looping=!0,this.vue_refresh(),this.dialogue_guide.get_dialogue_guides_from_api()},beforeUnmount(){this.needs_vue_refresh.keep_looping=!1}},Ef={class:"mainContainer"},Rf={class:"sectionContainer"},$f={class:"two-columns"},Sf=u("h1",{class:"title-medium"},"Manage Dialogues",-1),kf=["open"],Af={class:"modal-box"},Pf=u("h3",{class:"font-bold text-lg"},"Create New Dialogue",-1),Tf={class:"space-y-4"},Of=u("label",{for:"title"},"Title",-1),Mf=u("label",{for:"description"},"Description",-1),If={key:0},jf=u("label",{for:"role",class:"title-small"},"Questions",-1),Lf=["onClick"],Nf=u("h1",{class:"title-small"},"New question",-1),Vf=u("label",null,"Question Text",-1),qf=u("h1",{class:"title-small"},"Points",-1),Ff={class:"two-columns"},Uf=u("button",{type:"submit",class:"btn btn-primary"},"Add Point",-1),Hf={class:"skills-list mt-4"},Df=["onClick"],Bf=u("label",null,"Time Allotted (in seconds)",-1),Kf={class:"modal-action"},zf={class:"modal-action"},Wf=["open"],Gf={class:"modal-box"},Jf=u("h3",{class:"font-bold text-lg"},"Edit Dialogue",-1),Qf=u("label",{for:"title"},"Title",-1),Zf=u("label",{for:"description"},"Description",-1),Yf=u("div",null,[u("label",{for:"role"},"Questions")],-1),Xf=u("div",{class:"modal-action"},[u("button",{type:"submit",class:"btn btn-primary"},"Save")],-1),eh={class:"modal-action"},th={class:"mt-8 flex justify-center"},sh={class:"flex flex-wrap justify-center"},nh={class:"overflow-x-auto rounded-lg"},oh={class:"table table-zebra min-w-max mx-auto rounded-lg"},ih=u("thead",{class:"bg-primary text-gray-300"},[u("tr",null,[u("th",{scope:"col",class:"th"},"Title"),u("th",{scope:"col",class:"th"},"Description"),u("th",{scope:"col",class:"th"},"# of Questions"),u("th",{scope:"col",class:"th"})])],-1),rh={class:"bg-white divide-y divide-gray-200"},lh={class:"td"},ch={class:"td"},ah={class:"td"},uh={class:"td"},dh=["onClick"],fh=["onClick"];function hh(e,t,s,n,o,i){return H(),D("div",Ef,[o.create_modal_open||o.edit_modal_open?(H(),D("div",{key:0,class:"fixed inset-0 bg-black bg-opacity-50 backdrop-blur-sm z-40",onClick:t[0]||(t[0]=(...r)=>i.close_modal&&i.close_modal(...r))})):ce("",!0),u("div",Rf,[u("div",$f,[Sf,u("button",{class:"btn btn-primary mb-4",onClick:t[1]||(t[1]=r=>i.open_modal("create"))},"Create")]),u("dialog",{id:"my_modal_1",class:"modal",open:o.create_modal_open},[u("div",Af,[Pf,u("div",Tf,[u("div",null,[Of,ae(u("input",{type:"text",id:"title",class:"input input-primary","onUpdate:modelValue":t[2]||(t[2]=r=>s.dialogue_guide.new_dialogue.title=r)},null,512),[[he,s.dialogue_guide.new_dialogue.title]])]),u("div",null,[Mf,ae(u("input",{type:"text",id:"description",class:"input input-primary","onUpdate:modelValue":t[3]||(t[3]=r=>s.dialogue_guide.new_dialogue.description=r)},null,512),[[he,s.dialogue_guide.new_dialogue.description]])]),s.dialogue_guide.new_dialogue.question_set.length>0?(H(),D("div",If,[jf,u("ul",null,[(H(!0),D(pe,null,Nt(s.dialogue_guide.new_dialogue.question_set,(r,l)=>(H(),D("li",{key:l,class:"two-columns"},[u("p",null,Re(r.text),1),u("button",{class:"btn btn-secondary btn-sm",onClick:c=>i.remove_question(l)},"Delete",8,Lf)]))),128))])])):ce("",!0),u("div",null,[Nf,u("div",null,[Vf,ae(u("input",{type:"text","onUpdate:modelValue":t[4]||(t[4]=r=>s.dialogue_guide.new_question.text=r),class:"input input-primary w-full"},null,512),[[he,s.dialogue_guide.new_question.text]])]),u("div",null,[qf,u("form",{onSubmit:t[6]||(t[6]=Eo((...r)=>s.dialogue_guide.add_point&&s.dialogue_guide.add_point(...r),["prevent"]))},[u("div",Ff,[ae(u("input",{type:"text","onUpdate:modelValue":t[5]||(t[5]=r=>s.dialogue_guide.new_point=r),placeholder:"Add a new point",class:"input input-primary w-full"},null,512),[[he,s.dialogue_guide.new_point]]),Uf])],32),u("div",Hf,[(H(!0),D(pe,null,Nt(s.dialogue_guide.new_question.points,(r,l)=>(H(),D("div",{key:l,class:"flex justify-between items-center mb-2"},[u("span",null,Re(r),1),u("button",{onClick:c=>s.dialogue_guide.remove_point(l),class:"btn btn-secondary btn-sm"},"Remove",8,Df)]))),128))])]),u("div",null,[Bf,ae(u("input",{type:"number","onUpdate:modelValue":t[7]||(t[7]=r=>s.dialogue_guide.new_question.time_allotted=r),class:"input input-primary w-full"},null,512),[[he,s.dialogue_guide.new_question.time_allotted]])])]),u("button",{type:"button",onClick:t[8]||(t[8]=r=>s.dialogue_guide.add_question()),class:"btn btn-primary"},"Add New Question"),u("div",Kf,[u("button",{type:"submit",class:"btn btn-primary",onClick:t[9]||(t[9]=r=>{i.add_dialogue(),i.close_modal()})},"Create dialogue")])]),u("div",zf,[u("button",{type:"button",class:"btn btn-secondary",onClick:t[10]||(t[10]=(...r)=>i.close_modal&&i.close_modal(...r))},"Close")])])],8,kf),u("dialog",{id:"my_modal_2",class:"modal",open:o.edit_modal_open},[u("div",Gf,[Jf,u("form",{class:"space-y-4",onSubmit:t[13]||(t[13]=Eo(r=>{i.update_dialogue(),i.close_modal()},["prevent"]))},[u("div",null,[Qf,ae(u("input",{type:"text",id:"title",class:"input input-primary","onUpdate:modelValue":t[11]||(t[11]=r=>s.dialogue_guide.dialogue_to_edit.title=r)},null,512),[[he,s.dialogue_guide.dialogue_to_edit.title]])]),u("div",null,[Zf,ae(u("input",{type:"text",id:"description",class:"input input-primary","onUpdate:modelValue":t[12]||(t[12]=r=>s.dialogue_guide.dialogue_to_edit.description=r)},null,512),[[he,s.dialogue_guide.dialogue_to_edit.description]])]),Yf,Xf],32),u("div",eh,[u("button",{type:"button",class:"btn btn-secondary",onClick:t[14]||(t[14]=(...r)=>i.close_modal&&i.close_modal(...r))},"Close")])])],8,Wf),u("div",th,[u("div",sh,[u("div",nh,[u("table",oh,[ih,u("tbody",rh,[(H(!0),D(pe,null,Nt(s.dialogue_guide.dialogue_guides,(r,l)=>(H(),D("tr",{key:r.id,class:"hover"},[u("td",lh,Re(r.title),1),u("td",ch,Re(r.description),1),u("td",ah,Re(r.questions.length),1),u("td",uh,[u("button",{type:"button",class:"btn btn-success",onClick:c=>{s.dialogue_guide.dialogue_to_edit=r,i.open_modal("edit")}},"Edit",8,dh),u("button",{type:"button",class:"btn btn-secondary ml-2",onClick:c=>i.delete_dialogue(r.id,l)},"Delete",8,fh)])]))),128))])]),u("button",{class:"btn btn-primary mb-4 mt-5",onClick:t[15]||(t[15]=r=>s.dialogue_guide.get_dialogue_guides_from_api())},"Refresh ")])])])])])}const ph=Be(Cf,[["render",hh]]);const _h={props:["messages","transcript"],data(){return{need_vue_refresh:{data:!1,keepLooping:!1},domainOrigin:window.location.origin}},methods:{vueRefresh(){try{this.need_vue_refresh.data=""}catch{}this.need_vue_refresh.keepLooping&&setTimeout(this.vueRefresh,500)}},mounted(){this.need_vue_refresh.keepLooping=!0,this.vueRefresh()},beforeUnmount(){this.need_vue_refresh.keepLooping=!1}},Bs=e=>(vi("data-v-51fce887"),e=e(),wi(),e),gh={class:"mainContainer"},mh={class:"sectionContainer"},yh=Bs(()=>u("h1",{class:"title-medium"},"Ask a question",-1)),vh=Bs(()=>u("label",{class:"title-small"}," Query: ",-1)),wh={class:"col-md-7"},bh={class:"row"},xh={class:"col-2"},Ch={key:0,class:"mt-2"},Eh={key:1,class:""},Rh=Bs(()=>u("h5",{class:"title-small"},"Answer:",-1)),$h={class:"preserve-newlines"},Sh={class:"mt-2"},kh=Bs(()=>u("h5",{class:"title-small"},"Transcripts:",-1)),Ah={class:"row"},Ph=["id"],Th={class:"mb-0"},Oh={class:"row"},Mh={class:"col-5"},Ih={class:"row"},jh=["id","aria-labelledby"],Lh={class:"card-body",style:{"white-space":"pre-line"}};function Nh(e,t,s,n,o,i){return H(),D("div",gh,[u("div",mh,[yh,vh,u("div",wh,[ae(u("input",{type:"text",class:"input input-primary","onUpdate:modelValue":t[0]||(t[0]=r=>s.transcript.user_question=r),id:"question",required:"","aria-label":"Type a question here."},null,512),[[he,s.transcript.user_question]])]),u("div",bh,[u("div",xh,[u("button",{class:"btn btn-primary",type:"button",onClick:t[1]||(t[1]=r=>{s.transcript.ask_question(),s.transcript.awaiting_response=!0,s.transcript.response=!1})}," Submit")])]),s.transcript.awaiting_response?(H(),D("div",Ch,Re(s.transcript.message),1)):ce("",!0),s.transcript.response?(H(),D("div",Eh,[u("div",null,[Rh,u("p",$h,Re(s.transcript.response),1)]),u("div",Sh,[kh,(H(!0),D(pe,null,Nt(s.transcript.documents,(r,l)=>(H(),D("div",{key:l},[u("div",Ah,[u("div",{class:"card-header col-10",id:r.transcription_id},[u("h5",Th,[u("div",Oh,[u("div",Mh,"Source ID: "+Re(r.transcription_id),1)])])],8,Ph)]),u("div",Ih,[u("div",{id:"S"+l,class:"collapse","aria-labelledby":l,"data-parent":"#accordion"},[u("div",Lh,Re(r.text),1)],8,jh)])]))),128))])])):ce("",!0)])])}const Vh=Be(_h,[["render",Nh],["__scopeId","data-v-51fce887"]]),qh=gu({history:Ka("./"),routes:[{path:"/",name:"home",component:Ho},{path:"/index",name:"index",component:Ho},{path:"/crud",name:"crud",component:Gu},{path:"/login",name:"login",component:Xd},{path:"/dialogue",name:"dialogue",component:ph},{path:"/passwordresetview",name:"passwordreset",component:xf},{path:"/transcript_search",name:"transcript_search",component:Vh}]});const nr=kc(pa);nr.use(qh);nr.mount("#app");
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXgtN2VmYjMyNjIuanMiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uL2Zyb250X2VuZC9ub2RlX21vZHVsZXMvQHZ1ZS9zaGFyZWQvZGlzdC9zaGFyZWQuZXNtLWJ1bmRsZXIuanMiLCIuLi8uLi8uLi8uLi8uLi9mcm9udF9lbmQvbm9kZV9tb2R1bGVzL0B2dWUvcmVhY3Rpdml0eS9kaXN0L3JlYWN0aXZpdHkuZXNtLWJ1bmRsZXIuanMiLCIuLi8uLi8uLi8uLi8uLi9mcm9udF9lbmQvbm9kZV9tb2R1bGVzL0B2dWUvcnVudGltZS1jb3JlL2Rpc3QvcnVudGltZS1jb3JlLmVzbS1idW5kbGVyLmpzIiwiLi4vLi4vLi4vLi4vLi4vZnJvbnRfZW5kL25vZGVfbW9kdWxlcy9AdnVlL3J1bnRpbWUtZG9tL2Rpc3QvcnVudGltZS1kb20uZXNtLWJ1bmRsZXIuanMiLCIuLi8uLi8uLi8uLi8uLi9mcm9udF9lbmQvc3JjL2pzL1VzZXIuanMiLCIuLi8uLi8uLi8uLi8uLi9mcm9udF9lbmQvc3JjL2pzL1VzZXJzLmpzIiwiLi4vLi4vLi4vLi4vLi4vZnJvbnRfZW5kL3NyYy9qcy9NZXNzYWdlcy5qcyIsIi4uLy4uLy4uLy4uLy4uL2Zyb250X2VuZC9zcmMvanMvRGlhbG9ndWVHdWlkZS5qcyIsIi4uLy4uLy4uLy4uLy4uL2Zyb250X2VuZC9zcmMvY29tcG9uZW50cy9NZXNzYWdlRGlzcGxheS52dWUiLCIuLi8uLi8uLi8uLi8uLi9mcm9udF9lbmQvc3JjL2Fzc2V0cy9kdF9zcXVhZF9sb2dvLnBuZyIsIi4uLy4uLy4uLy4uLy4uL2Zyb250X2VuZC9zcmMvY29tcG9uZW50cy9OYXZiYXIudnVlIiwiLi4vLi4vLi4vLi4vLi4vZnJvbnRfZW5kL3NyYy9qcy9Sb2xlcy5qcyIsIi4uLy4uLy4uLy4uLy4uL2Zyb250X2VuZC9zcmMvQXBwLnZ1ZSIsIi4uLy4uLy4uLy4uLy4uL2Zyb250X2VuZC9ub2RlX21vZHVsZXMvdnVlLXJvdXRlci9kaXN0L3Z1ZS1yb3V0ZXIubWpzIiwiLi4vLi4vLi4vLi4vLi4vZnJvbnRfZW5kL3NyYy92aWV3cy9DcnVkVmlldy52dWUiLCIuLi8uLi8uLi8uLi8uLi9mcm9udF9lbmQvc3JjL3ZpZXdzL0hvbWVWaWV3LnZ1ZSIsIi4uLy4uLy4uLy4uLy4uL2Zyb250X2VuZC9zcmMvY29tcG9uZW50cy9NdWx0aUZhY3RvckF1dGgudnVlIiwiLi4vLi4vLi4vLi4vLi4vZnJvbnRfZW5kL3NyYy92aWV3cy9Mb2dpblZpZXcudnVlIiwiLi4vLi4vLi4vLi4vLi4vZnJvbnRfZW5kL3NyYy92aWV3cy9QYXNzd29yZFJlc2V0Vmlldy52dWUiLCIuLi8uLi8uLi8uLi8uLi9mcm9udF9lbmQvc3JjL3ZpZXdzL01hbmFnZURpYWxvZ3VlVmlldy52dWUiLCIuLi8uLi8uLi8uLi8uLi9mcm9udF9lbmQvc3JjL3ZpZXdzL1RyYW5zY3JpcHRTZWFyY2hWaWV3LnZ1ZSIsIi4uLy4uLy4uLy4uLy4uL2Zyb250X2VuZC9zcmMvcm91dGVyL2luZGV4LmpzIiwiLi4vLi4vLi4vLi4vLi4vZnJvbnRfZW5kL3NyYy9tYWluLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuKiBAdnVlL3NoYXJlZCB2My40LjIxXG4qIChjKSAyMDE4LXByZXNlbnQgWXV4aSAoRXZhbikgWW91IGFuZCBWdWUgY29udHJpYnV0b3JzXG4qIEBsaWNlbnNlIE1JVFxuKiovXG5mdW5jdGlvbiBtYWtlTWFwKHN0ciwgZXhwZWN0c0xvd2VyQ2FzZSkge1xuICBjb25zdCBzZXQgPSBuZXcgU2V0KHN0ci5zcGxpdChcIixcIikpO1xuICByZXR1cm4gZXhwZWN0c0xvd2VyQ2FzZSA/ICh2YWwpID0+IHNldC5oYXModmFsLnRvTG93ZXJDYXNlKCkpIDogKHZhbCkgPT4gc2V0Lmhhcyh2YWwpO1xufVxuXG5jb25zdCBFTVBUWV9PQkogPSAhIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpID8gT2JqZWN0LmZyZWV6ZSh7fSkgOiB7fTtcbmNvbnN0IEVNUFRZX0FSUiA9ICEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgPyBPYmplY3QuZnJlZXplKFtdKSA6IFtdO1xuY29uc3QgTk9PUCA9ICgpID0+IHtcbn07XG5jb25zdCBOTyA9ICgpID0+IGZhbHNlO1xuY29uc3QgaXNPbiA9IChrZXkpID0+IGtleS5jaGFyQ29kZUF0KDApID09PSAxMTEgJiYga2V5LmNoYXJDb2RlQXQoMSkgPT09IDExMCAmJiAvLyB1cHBlcmNhc2UgbGV0dGVyXG4oa2V5LmNoYXJDb2RlQXQoMikgPiAxMjIgfHwga2V5LmNoYXJDb2RlQXQoMikgPCA5Nyk7XG5jb25zdCBpc01vZGVsTGlzdGVuZXIgPSAoa2V5KSA9PiBrZXkuc3RhcnRzV2l0aChcIm9uVXBkYXRlOlwiKTtcbmNvbnN0IGV4dGVuZCA9IE9iamVjdC5hc3NpZ247XG5jb25zdCByZW1vdmUgPSAoYXJyLCBlbCkgPT4ge1xuICBjb25zdCBpID0gYXJyLmluZGV4T2YoZWwpO1xuICBpZiAoaSA+IC0xKSB7XG4gICAgYXJyLnNwbGljZShpLCAxKTtcbiAgfVxufTtcbmNvbnN0IGhhc093blByb3BlcnR5ID0gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eTtcbmNvbnN0IGhhc093biA9ICh2YWwsIGtleSkgPT4gaGFzT3duUHJvcGVydHkuY2FsbCh2YWwsIGtleSk7XG5jb25zdCBpc0FycmF5ID0gQXJyYXkuaXNBcnJheTtcbmNvbnN0IGlzTWFwID0gKHZhbCkgPT4gdG9UeXBlU3RyaW5nKHZhbCkgPT09IFwiW29iamVjdCBNYXBdXCI7XG5jb25zdCBpc1NldCA9ICh2YWwpID0+IHRvVHlwZVN0cmluZyh2YWwpID09PSBcIltvYmplY3QgU2V0XVwiO1xuY29uc3QgaXNEYXRlID0gKHZhbCkgPT4gdG9UeXBlU3RyaW5nKHZhbCkgPT09IFwiW29iamVjdCBEYXRlXVwiO1xuY29uc3QgaXNSZWdFeHAgPSAodmFsKSA9PiB0b1R5cGVTdHJpbmcodmFsKSA9PT0gXCJbb2JqZWN0IFJlZ0V4cF1cIjtcbmNvbnN0IGlzRnVuY3Rpb24gPSAodmFsKSA9PiB0eXBlb2YgdmFsID09PSBcImZ1bmN0aW9uXCI7XG5jb25zdCBpc1N0cmluZyA9ICh2YWwpID0+IHR5cGVvZiB2YWwgPT09IFwic3RyaW5nXCI7XG5jb25zdCBpc1N5bWJvbCA9ICh2YWwpID0+IHR5cGVvZiB2YWwgPT09IFwic3ltYm9sXCI7XG5jb25zdCBpc09iamVjdCA9ICh2YWwpID0+IHZhbCAhPT0gbnVsbCAmJiB0eXBlb2YgdmFsID09PSBcIm9iamVjdFwiO1xuY29uc3QgaXNQcm9taXNlID0gKHZhbCkgPT4ge1xuICByZXR1cm4gKGlzT2JqZWN0KHZhbCkgfHwgaXNGdW5jdGlvbih2YWwpKSAmJiBpc0Z1bmN0aW9uKHZhbC50aGVuKSAmJiBpc0Z1bmN0aW9uKHZhbC5jYXRjaCk7XG59O1xuY29uc3Qgb2JqZWN0VG9TdHJpbmcgPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nO1xuY29uc3QgdG9UeXBlU3RyaW5nID0gKHZhbHVlKSA9PiBvYmplY3RUb1N0cmluZy5jYWxsKHZhbHVlKTtcbmNvbnN0IHRvUmF3VHlwZSA9ICh2YWx1ZSkgPT4ge1xuICByZXR1cm4gdG9UeXBlU3RyaW5nKHZhbHVlKS5zbGljZSg4LCAtMSk7XG59O1xuY29uc3QgaXNQbGFpbk9iamVjdCA9ICh2YWwpID0+IHRvVHlwZVN0cmluZyh2YWwpID09PSBcIltvYmplY3QgT2JqZWN0XVwiO1xuY29uc3QgaXNJbnRlZ2VyS2V5ID0gKGtleSkgPT4gaXNTdHJpbmcoa2V5KSAmJiBrZXkgIT09IFwiTmFOXCIgJiYga2V5WzBdICE9PSBcIi1cIiAmJiBcIlwiICsgcGFyc2VJbnQoa2V5LCAxMCkgPT09IGtleTtcbmNvbnN0IGlzUmVzZXJ2ZWRQcm9wID0gLyogQF9fUFVSRV9fICovIG1ha2VNYXAoXG4gIC8vIHRoZSBsZWFkaW5nIGNvbW1hIGlzIGludGVudGlvbmFsIHNvIGVtcHR5IHN0cmluZyBcIlwiIGlzIGFsc28gaW5jbHVkZWRcbiAgXCIsa2V5LHJlZixyZWZfZm9yLHJlZl9rZXksb25Wbm9kZUJlZm9yZU1vdW50LG9uVm5vZGVNb3VudGVkLG9uVm5vZGVCZWZvcmVVcGRhdGUsb25Wbm9kZVVwZGF0ZWQsb25Wbm9kZUJlZm9yZVVubW91bnQsb25Wbm9kZVVubW91bnRlZFwiXG4pO1xuY29uc3QgaXNCdWlsdEluRGlyZWN0aXZlID0gLyogQF9fUFVSRV9fICovIG1ha2VNYXAoXG4gIFwiYmluZCxjbG9hayxlbHNlLWlmLGVsc2UsZm9yLGh0bWwsaWYsbW9kZWwsb24sb25jZSxwcmUsc2hvdyxzbG90LHRleHQsbWVtb1wiXG4pO1xuY29uc3QgY2FjaGVTdHJpbmdGdW5jdGlvbiA9IChmbikgPT4ge1xuICBjb25zdCBjYWNoZSA9IC8qIEBfX1BVUkVfXyAqLyBPYmplY3QuY3JlYXRlKG51bGwpO1xuICByZXR1cm4gKHN0cikgPT4ge1xuICAgIGNvbnN0IGhpdCA9IGNhY2hlW3N0cl07XG4gICAgcmV0dXJuIGhpdCB8fCAoY2FjaGVbc3RyXSA9IGZuKHN0cikpO1xuICB9O1xufTtcbmNvbnN0IGNhbWVsaXplUkUgPSAvLShcXHcpL2c7XG5jb25zdCBjYW1lbGl6ZSA9IGNhY2hlU3RyaW5nRnVuY3Rpb24oKHN0cikgPT4ge1xuICByZXR1cm4gc3RyLnJlcGxhY2UoY2FtZWxpemVSRSwgKF8sIGMpID0+IGMgPyBjLnRvVXBwZXJDYXNlKCkgOiBcIlwiKTtcbn0pO1xuY29uc3QgaHlwaGVuYXRlUkUgPSAvXFxCKFtBLVpdKS9nO1xuY29uc3QgaHlwaGVuYXRlID0gY2FjaGVTdHJpbmdGdW5jdGlvbihcbiAgKHN0cikgPT4gc3RyLnJlcGxhY2UoaHlwaGVuYXRlUkUsIFwiLSQxXCIpLnRvTG93ZXJDYXNlKClcbik7XG5jb25zdCBjYXBpdGFsaXplID0gY2FjaGVTdHJpbmdGdW5jdGlvbigoc3RyKSA9PiB7XG4gIHJldHVybiBzdHIuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBzdHIuc2xpY2UoMSk7XG59KTtcbmNvbnN0IHRvSGFuZGxlcktleSA9IGNhY2hlU3RyaW5nRnVuY3Rpb24oKHN0cikgPT4ge1xuICBjb25zdCBzID0gc3RyID8gYG9uJHtjYXBpdGFsaXplKHN0cil9YCA6IGBgO1xuICByZXR1cm4gcztcbn0pO1xuY29uc3QgaGFzQ2hhbmdlZCA9ICh2YWx1ZSwgb2xkVmFsdWUpID0+ICFPYmplY3QuaXModmFsdWUsIG9sZFZhbHVlKTtcbmNvbnN0IGludm9rZUFycmF5Rm5zID0gKGZucywgYXJnKSA9PiB7XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgZm5zLmxlbmd0aDsgaSsrKSB7XG4gICAgZm5zW2ldKGFyZyk7XG4gIH1cbn07XG5jb25zdCBkZWYgPSAob2JqLCBrZXksIHZhbHVlKSA9PiB7XG4gIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwge1xuICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICB2YWx1ZVxuICB9KTtcbn07XG5jb25zdCBsb29zZVRvTnVtYmVyID0gKHZhbCkgPT4ge1xuICBjb25zdCBuID0gcGFyc2VGbG9hdCh2YWwpO1xuICByZXR1cm4gaXNOYU4obikgPyB2YWwgOiBuO1xufTtcbmNvbnN0IHRvTnVtYmVyID0gKHZhbCkgPT4ge1xuICBjb25zdCBuID0gaXNTdHJpbmcodmFsKSA/IE51bWJlcih2YWwpIDogTmFOO1xuICByZXR1cm4gaXNOYU4obikgPyB2YWwgOiBuO1xufTtcbmxldCBfZ2xvYmFsVGhpcztcbmNvbnN0IGdldEdsb2JhbFRoaXMgPSAoKSA9PiB7XG4gIHJldHVybiBfZ2xvYmFsVGhpcyB8fCAoX2dsb2JhbFRoaXMgPSB0eXBlb2YgZ2xvYmFsVGhpcyAhPT0gXCJ1bmRlZmluZWRcIiA/IGdsb2JhbFRoaXMgOiB0eXBlb2Ygc2VsZiAhPT0gXCJ1bmRlZmluZWRcIiA/IHNlbGYgOiB0eXBlb2Ygd2luZG93ICE9PSBcInVuZGVmaW5lZFwiID8gd2luZG93IDogdHlwZW9mIGdsb2JhbCAhPT0gXCJ1bmRlZmluZWRcIiA/IGdsb2JhbCA6IHt9KTtcbn07XG5jb25zdCBpZGVudFJFID0gL15bXyRhLXpBLVpcXHhBMC1cXHVGRkZGXVtfJGEtekEtWjAtOVxceEEwLVxcdUZGRkZdKiQvO1xuZnVuY3Rpb24gZ2VuUHJvcHNBY2Nlc3NFeHAobmFtZSkge1xuICByZXR1cm4gaWRlbnRSRS50ZXN0KG5hbWUpID8gYF9fcHJvcHMuJHtuYW1lfWAgOiBgX19wcm9wc1ske0pTT04uc3RyaW5naWZ5KG5hbWUpfV1gO1xufVxuXG5jb25zdCBQYXRjaEZsYWdzID0ge1xuICBcIlRFWFRcIjogMSxcbiAgXCIxXCI6IFwiVEVYVFwiLFxuICBcIkNMQVNTXCI6IDIsXG4gIFwiMlwiOiBcIkNMQVNTXCIsXG4gIFwiU1RZTEVcIjogNCxcbiAgXCI0XCI6IFwiU1RZTEVcIixcbiAgXCJQUk9QU1wiOiA4LFxuICBcIjhcIjogXCJQUk9QU1wiLFxuICBcIkZVTExfUFJPUFNcIjogMTYsXG4gIFwiMTZcIjogXCJGVUxMX1BST1BTXCIsXG4gIFwiTkVFRF9IWURSQVRJT05cIjogMzIsXG4gIFwiMzJcIjogXCJORUVEX0hZRFJBVElPTlwiLFxuICBcIlNUQUJMRV9GUkFHTUVOVFwiOiA2NCxcbiAgXCI2NFwiOiBcIlNUQUJMRV9GUkFHTUVOVFwiLFxuICBcIktFWUVEX0ZSQUdNRU5UXCI6IDEyOCxcbiAgXCIxMjhcIjogXCJLRVlFRF9GUkFHTUVOVFwiLFxuICBcIlVOS0VZRURfRlJBR01FTlRcIjogMjU2LFxuICBcIjI1NlwiOiBcIlVOS0VZRURfRlJBR01FTlRcIixcbiAgXCJORUVEX1BBVENIXCI6IDUxMixcbiAgXCI1MTJcIjogXCJORUVEX1BBVENIXCIsXG4gIFwiRFlOQU1JQ19TTE9UU1wiOiAxMDI0LFxuICBcIjEwMjRcIjogXCJEWU5BTUlDX1NMT1RTXCIsXG4gIFwiREVWX1JPT1RfRlJBR01FTlRcIjogMjA0OCxcbiAgXCIyMDQ4XCI6IFwiREVWX1JPT1RfRlJBR01FTlRcIixcbiAgXCJIT0lTVEVEXCI6IC0xLFxuICBcIi0xXCI6IFwiSE9JU1RFRFwiLFxuICBcIkJBSUxcIjogLTIsXG4gIFwiLTJcIjogXCJCQUlMXCJcbn07XG5jb25zdCBQYXRjaEZsYWdOYW1lcyA9IHtcbiAgWzFdOiBgVEVYVGAsXG4gIFsyXTogYENMQVNTYCxcbiAgWzRdOiBgU1RZTEVgLFxuICBbOF06IGBQUk9QU2AsXG4gIFsxNl06IGBGVUxMX1BST1BTYCxcbiAgWzMyXTogYE5FRURfSFlEUkFUSU9OYCxcbiAgWzY0XTogYFNUQUJMRV9GUkFHTUVOVGAsXG4gIFsxMjhdOiBgS0VZRURfRlJBR01FTlRgLFxuICBbMjU2XTogYFVOS0VZRURfRlJBR01FTlRgLFxuICBbNTEyXTogYE5FRURfUEFUQ0hgLFxuICBbMTAyNF06IGBEWU5BTUlDX1NMT1RTYCxcbiAgWzIwNDhdOiBgREVWX1JPT1RfRlJBR01FTlRgLFxuICBbLTFdOiBgSE9JU1RFRGAsXG4gIFstMl06IGBCQUlMYFxufTtcblxuY29uc3QgU2hhcGVGbGFncyA9IHtcbiAgXCJFTEVNRU5UXCI6IDEsXG4gIFwiMVwiOiBcIkVMRU1FTlRcIixcbiAgXCJGVU5DVElPTkFMX0NPTVBPTkVOVFwiOiAyLFxuICBcIjJcIjogXCJGVU5DVElPTkFMX0NPTVBPTkVOVFwiLFxuICBcIlNUQVRFRlVMX0NPTVBPTkVOVFwiOiA0LFxuICBcIjRcIjogXCJTVEFURUZVTF9DT01QT05FTlRcIixcbiAgXCJURVhUX0NISUxEUkVOXCI6IDgsXG4gIFwiOFwiOiBcIlRFWFRfQ0hJTERSRU5cIixcbiAgXCJBUlJBWV9DSElMRFJFTlwiOiAxNixcbiAgXCIxNlwiOiBcIkFSUkFZX0NISUxEUkVOXCIsXG4gIFwiU0xPVFNfQ0hJTERSRU5cIjogMzIsXG4gIFwiMzJcIjogXCJTTE9UU19DSElMRFJFTlwiLFxuICBcIlRFTEVQT1JUXCI6IDY0LFxuICBcIjY0XCI6IFwiVEVMRVBPUlRcIixcbiAgXCJTVVNQRU5TRVwiOiAxMjgsXG4gIFwiMTI4XCI6IFwiU1VTUEVOU0VcIixcbiAgXCJDT01QT05FTlRfU0hPVUxEX0tFRVBfQUxJVkVcIjogMjU2LFxuICBcIjI1NlwiOiBcIkNPTVBPTkVOVF9TSE9VTERfS0VFUF9BTElWRVwiLFxuICBcIkNPTVBPTkVOVF9LRVBUX0FMSVZFXCI6IDUxMixcbiAgXCI1MTJcIjogXCJDT01QT05FTlRfS0VQVF9BTElWRVwiLFxuICBcIkNPTVBPTkVOVFwiOiA2LFxuICBcIjZcIjogXCJDT01QT05FTlRcIlxufTtcblxuY29uc3QgU2xvdEZsYWdzID0ge1xuICBcIlNUQUJMRVwiOiAxLFxuICBcIjFcIjogXCJTVEFCTEVcIixcbiAgXCJEWU5BTUlDXCI6IDIsXG4gIFwiMlwiOiBcIkRZTkFNSUNcIixcbiAgXCJGT1JXQVJERURcIjogMyxcbiAgXCIzXCI6IFwiRk9SV0FSREVEXCJcbn07XG5jb25zdCBzbG90RmxhZ3NUZXh0ID0ge1xuICBbMV06IFwiU1RBQkxFXCIsXG4gIFsyXTogXCJEWU5BTUlDXCIsXG4gIFszXTogXCJGT1JXQVJERURcIlxufTtcblxuY29uc3QgR0xPQkFMU19BTExPV0VEID0gXCJJbmZpbml0eSx1bmRlZmluZWQsTmFOLGlzRmluaXRlLGlzTmFOLHBhcnNlRmxvYXQscGFyc2VJbnQsZGVjb2RlVVJJLGRlY29kZVVSSUNvbXBvbmVudCxlbmNvZGVVUkksZW5jb2RlVVJJQ29tcG9uZW50LE1hdGgsTnVtYmVyLERhdGUsQXJyYXksT2JqZWN0LEJvb2xlYW4sU3RyaW5nLFJlZ0V4cCxNYXAsU2V0LEpTT04sSW50bCxCaWdJbnQsY29uc29sZSxFcnJvclwiO1xuY29uc3QgaXNHbG9iYWxseUFsbG93ZWQgPSAvKiBAX19QVVJFX18gKi8gbWFrZU1hcChHTE9CQUxTX0FMTE9XRUQpO1xuY29uc3QgaXNHbG9iYWxseVdoaXRlbGlzdGVkID0gaXNHbG9iYWxseUFsbG93ZWQ7XG5cbmNvbnN0IHJhbmdlID0gMjtcbmZ1bmN0aW9uIGdlbmVyYXRlQ29kZUZyYW1lKHNvdXJjZSwgc3RhcnQgPSAwLCBlbmQgPSBzb3VyY2UubGVuZ3RoKSB7XG4gIGxldCBsaW5lcyA9IHNvdXJjZS5zcGxpdCgvKFxccj9cXG4pLyk7XG4gIGNvbnN0IG5ld2xpbmVTZXF1ZW5jZXMgPSBsaW5lcy5maWx0ZXIoKF8sIGlkeCkgPT4gaWR4ICUgMiA9PT0gMSk7XG4gIGxpbmVzID0gbGluZXMuZmlsdGVyKChfLCBpZHgpID0+IGlkeCAlIDIgPT09IDApO1xuICBsZXQgY291bnQgPSAwO1xuICBjb25zdCByZXMgPSBbXTtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBsaW5lcy5sZW5ndGg7IGkrKykge1xuICAgIGNvdW50ICs9IGxpbmVzW2ldLmxlbmd0aCArIChuZXdsaW5lU2VxdWVuY2VzW2ldICYmIG5ld2xpbmVTZXF1ZW5jZXNbaV0ubGVuZ3RoIHx8IDApO1xuICAgIGlmIChjb3VudCA+PSBzdGFydCkge1xuICAgICAgZm9yIChsZXQgaiA9IGkgLSByYW5nZTsgaiA8PSBpICsgcmFuZ2UgfHwgZW5kID4gY291bnQ7IGorKykge1xuICAgICAgICBpZiAoaiA8IDAgfHwgaiA+PSBsaW5lcy5sZW5ndGgpXG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIGNvbnN0IGxpbmUgPSBqICsgMTtcbiAgICAgICAgcmVzLnB1c2goXG4gICAgICAgICAgYCR7bGluZX0ke1wiIFwiLnJlcGVhdChNYXRoLm1heCgzIC0gU3RyaW5nKGxpbmUpLmxlbmd0aCwgMCkpfXwgICR7bGluZXNbal19YFxuICAgICAgICApO1xuICAgICAgICBjb25zdCBsaW5lTGVuZ3RoID0gbGluZXNbal0ubGVuZ3RoO1xuICAgICAgICBjb25zdCBuZXdMaW5lU2VxTGVuZ3RoID0gbmV3bGluZVNlcXVlbmNlc1tqXSAmJiBuZXdsaW5lU2VxdWVuY2VzW2pdLmxlbmd0aCB8fCAwO1xuICAgICAgICBpZiAoaiA9PT0gaSkge1xuICAgICAgICAgIGNvbnN0IHBhZCA9IHN0YXJ0IC0gKGNvdW50IC0gKGxpbmVMZW5ndGggKyBuZXdMaW5lU2VxTGVuZ3RoKSk7XG4gICAgICAgICAgY29uc3QgbGVuZ3RoID0gTWF0aC5tYXgoXG4gICAgICAgICAgICAxLFxuICAgICAgICAgICAgZW5kID4gY291bnQgPyBsaW5lTGVuZ3RoIC0gcGFkIDogZW5kIC0gc3RhcnRcbiAgICAgICAgICApO1xuICAgICAgICAgIHJlcy5wdXNoKGAgICB8ICBgICsgXCIgXCIucmVwZWF0KHBhZCkgKyBcIl5cIi5yZXBlYXQobGVuZ3RoKSk7XG4gICAgICAgIH0gZWxzZSBpZiAoaiA+IGkpIHtcbiAgICAgICAgICBpZiAoZW5kID4gY291bnQpIHtcbiAgICAgICAgICAgIGNvbnN0IGxlbmd0aCA9IE1hdGgubWF4KE1hdGgubWluKGVuZCAtIGNvdW50LCBsaW5lTGVuZ3RoKSwgMSk7XG4gICAgICAgICAgICByZXMucHVzaChgICAgfCAgYCArIFwiXlwiLnJlcGVhdChsZW5ndGgpKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgY291bnQgKz0gbGluZUxlbmd0aCArIG5ld0xpbmVTZXFMZW5ndGg7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxuICByZXR1cm4gcmVzLmpvaW4oXCJcXG5cIik7XG59XG5cbmZ1bmN0aW9uIG5vcm1hbGl6ZVN0eWxlKHZhbHVlKSB7XG4gIGlmIChpc0FycmF5KHZhbHVlKSkge1xuICAgIGNvbnN0IHJlcyA9IHt9O1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdmFsdWUubGVuZ3RoOyBpKyspIHtcbiAgICAgIGNvbnN0IGl0ZW0gPSB2YWx1ZVtpXTtcbiAgICAgIGNvbnN0IG5vcm1hbGl6ZWQgPSBpc1N0cmluZyhpdGVtKSA/IHBhcnNlU3RyaW5nU3R5bGUoaXRlbSkgOiBub3JtYWxpemVTdHlsZShpdGVtKTtcbiAgICAgIGlmIChub3JtYWxpemVkKSB7XG4gICAgICAgIGZvciAoY29uc3Qga2V5IGluIG5vcm1hbGl6ZWQpIHtcbiAgICAgICAgICByZXNba2V5XSA9IG5vcm1hbGl6ZWRba2V5XTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gcmVzO1xuICB9IGVsc2UgaWYgKGlzU3RyaW5nKHZhbHVlKSB8fCBpc09iamVjdCh2YWx1ZSkpIHtcbiAgICByZXR1cm4gdmFsdWU7XG4gIH1cbn1cbmNvbnN0IGxpc3REZWxpbWl0ZXJSRSA9IC87KD8hW14oXSpcXCkpL2c7XG5jb25zdCBwcm9wZXJ0eURlbGltaXRlclJFID0gLzooW15dKykvO1xuY29uc3Qgc3R5bGVDb21tZW50UkUgPSAvXFwvXFwqW15dKj9cXCpcXC8vZztcbmZ1bmN0aW9uIHBhcnNlU3RyaW5nU3R5bGUoY3NzVGV4dCkge1xuICBjb25zdCByZXQgPSB7fTtcbiAgY3NzVGV4dC5yZXBsYWNlKHN0eWxlQ29tbWVudFJFLCBcIlwiKS5zcGxpdChsaXN0RGVsaW1pdGVyUkUpLmZvckVhY2goKGl0ZW0pID0+IHtcbiAgICBpZiAoaXRlbSkge1xuICAgICAgY29uc3QgdG1wID0gaXRlbS5zcGxpdChwcm9wZXJ0eURlbGltaXRlclJFKTtcbiAgICAgIHRtcC5sZW5ndGggPiAxICYmIChyZXRbdG1wWzBdLnRyaW0oKV0gPSB0bXBbMV0udHJpbSgpKTtcbiAgICB9XG4gIH0pO1xuICByZXR1cm4gcmV0O1xufVxuZnVuY3Rpb24gc3RyaW5naWZ5U3R5bGUoc3R5bGVzKSB7XG4gIGxldCByZXQgPSBcIlwiO1xuICBpZiAoIXN0eWxlcyB8fCBpc1N0cmluZyhzdHlsZXMpKSB7XG4gICAgcmV0dXJuIHJldDtcbiAgfVxuICBmb3IgKGNvbnN0IGtleSBpbiBzdHlsZXMpIHtcbiAgICBjb25zdCB2YWx1ZSA9IHN0eWxlc1trZXldO1xuICAgIGNvbnN0IG5vcm1hbGl6ZWRLZXkgPSBrZXkuc3RhcnRzV2l0aChgLS1gKSA/IGtleSA6IGh5cGhlbmF0ZShrZXkpO1xuICAgIGlmIChpc1N0cmluZyh2YWx1ZSkgfHwgdHlwZW9mIHZhbHVlID09PSBcIm51bWJlclwiKSB7XG4gICAgICByZXQgKz0gYCR7bm9ybWFsaXplZEtleX06JHt2YWx1ZX07YDtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHJldDtcbn1cbmZ1bmN0aW9uIG5vcm1hbGl6ZUNsYXNzKHZhbHVlKSB7XG4gIGxldCByZXMgPSBcIlwiO1xuICBpZiAoaXNTdHJpbmcodmFsdWUpKSB7XG4gICAgcmVzID0gdmFsdWU7XG4gIH0gZWxzZSBpZiAoaXNBcnJheSh2YWx1ZSkpIHtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHZhbHVlLmxlbmd0aDsgaSsrKSB7XG4gICAgICBjb25zdCBub3JtYWxpemVkID0gbm9ybWFsaXplQ2xhc3ModmFsdWVbaV0pO1xuICAgICAgaWYgKG5vcm1hbGl6ZWQpIHtcbiAgICAgICAgcmVzICs9IG5vcm1hbGl6ZWQgKyBcIiBcIjtcbiAgICAgIH1cbiAgICB9XG4gIH0gZWxzZSBpZiAoaXNPYmplY3QodmFsdWUpKSB7XG4gICAgZm9yIChjb25zdCBuYW1lIGluIHZhbHVlKSB7XG4gICAgICBpZiAodmFsdWVbbmFtZV0pIHtcbiAgICAgICAgcmVzICs9IG5hbWUgKyBcIiBcIjtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgcmV0dXJuIHJlcy50cmltKCk7XG59XG5mdW5jdGlvbiBub3JtYWxpemVQcm9wcyhwcm9wcykge1xuICBpZiAoIXByb3BzKVxuICAgIHJldHVybiBudWxsO1xuICBsZXQgeyBjbGFzczoga2xhc3MsIHN0eWxlIH0gPSBwcm9wcztcbiAgaWYgKGtsYXNzICYmICFpc1N0cmluZyhrbGFzcykpIHtcbiAgICBwcm9wcy5jbGFzcyA9IG5vcm1hbGl6ZUNsYXNzKGtsYXNzKTtcbiAgfVxuICBpZiAoc3R5bGUpIHtcbiAgICBwcm9wcy5zdHlsZSA9IG5vcm1hbGl6ZVN0eWxlKHN0eWxlKTtcbiAgfVxuICByZXR1cm4gcHJvcHM7XG59XG5cbmNvbnN0IEhUTUxfVEFHUyA9IFwiaHRtbCxib2R5LGJhc2UsaGVhZCxsaW5rLG1ldGEsc3R5bGUsdGl0bGUsYWRkcmVzcyxhcnRpY2xlLGFzaWRlLGZvb3RlcixoZWFkZXIsaGdyb3VwLGgxLGgyLGgzLGg0LGg1LGg2LG5hdixzZWN0aW9uLGRpdixkZCxkbCxkdCxmaWdjYXB0aW9uLGZpZ3VyZSxwaWN0dXJlLGhyLGltZyxsaSxtYWluLG9sLHAscHJlLHVsLGEsYixhYmJyLGJkaSxiZG8sYnIsY2l0ZSxjb2RlLGRhdGEsZGZuLGVtLGksa2JkLG1hcmsscSxycCxydCxydWJ5LHMsc2FtcCxzbWFsbCxzcGFuLHN0cm9uZyxzdWIsc3VwLHRpbWUsdSx2YXIsd2JyLGFyZWEsYXVkaW8sbWFwLHRyYWNrLHZpZGVvLGVtYmVkLG9iamVjdCxwYXJhbSxzb3VyY2UsY2FudmFzLHNjcmlwdCxub3NjcmlwdCxkZWwsaW5zLGNhcHRpb24sY29sLGNvbGdyb3VwLHRhYmxlLHRoZWFkLHRib2R5LHRkLHRoLHRyLGJ1dHRvbixkYXRhbGlzdCxmaWVsZHNldCxmb3JtLGlucHV0LGxhYmVsLGxlZ2VuZCxtZXRlcixvcHRncm91cCxvcHRpb24sb3V0cHV0LHByb2dyZXNzLHNlbGVjdCx0ZXh0YXJlYSxkZXRhaWxzLGRpYWxvZyxtZW51LHN1bW1hcnksdGVtcGxhdGUsYmxvY2txdW90ZSxpZnJhbWUsdGZvb3RcIjtcbmNvbnN0IFNWR19UQUdTID0gXCJzdmcsYW5pbWF0ZSxhbmltYXRlTW90aW9uLGFuaW1hdGVUcmFuc2Zvcm0sY2lyY2xlLGNsaXBQYXRoLGNvbG9yLXByb2ZpbGUsZGVmcyxkZXNjLGRpc2NhcmQsZWxsaXBzZSxmZUJsZW5kLGZlQ29sb3JNYXRyaXgsZmVDb21wb25lbnRUcmFuc2ZlcixmZUNvbXBvc2l0ZSxmZUNvbnZvbHZlTWF0cml4LGZlRGlmZnVzZUxpZ2h0aW5nLGZlRGlzcGxhY2VtZW50TWFwLGZlRGlzdGFudExpZ2h0LGZlRHJvcFNoYWRvdyxmZUZsb29kLGZlRnVuY0EsZmVGdW5jQixmZUZ1bmNHLGZlRnVuY1IsZmVHYXVzc2lhbkJsdXIsZmVJbWFnZSxmZU1lcmdlLGZlTWVyZ2VOb2RlLGZlTW9ycGhvbG9neSxmZU9mZnNldCxmZVBvaW50TGlnaHQsZmVTcGVjdWxhckxpZ2h0aW5nLGZlU3BvdExpZ2h0LGZlVGlsZSxmZVR1cmJ1bGVuY2UsZmlsdGVyLGZvcmVpZ25PYmplY3QsZyxoYXRjaCxoYXRjaHBhdGgsaW1hZ2UsbGluZSxsaW5lYXJHcmFkaWVudCxtYXJrZXIsbWFzayxtZXNoLG1lc2hncmFkaWVudCxtZXNocGF0Y2gsbWVzaHJvdyxtZXRhZGF0YSxtcGF0aCxwYXRoLHBhdHRlcm4scG9seWdvbixwb2x5bGluZSxyYWRpYWxHcmFkaWVudCxyZWN0LHNldCxzb2xpZGNvbG9yLHN0b3Asc3dpdGNoLHN5bWJvbCx0ZXh0LHRleHRQYXRoLHRpdGxlLHRzcGFuLHVua25vd24sdXNlLHZpZXdcIjtcbmNvbnN0IE1BVEhfVEFHUyA9IFwiYW5ub3RhdGlvbixhbm5vdGF0aW9uLXhtbCxtYWN0aW9uLG1hbGlnbmdyb3VwLG1hbGlnbm1hcmssbWF0aCxtZW5jbG9zZSxtZXJyb3IsbWZlbmNlZCxtZnJhYyxtZnJhY3Rpb24sbWdseXBoLG1pLG1sYWJlbGVkdHIsbWxvbmdkaXYsbW11bHRpc2NyaXB0cyxtbixtbyxtb3ZlcixtcGFkZGVkLG1waGFudG9tLG1wcmVzY3JpcHRzLG1yb290LG1yb3csbXMsbXNjYXJyaWVzLG1zY2FycnksbXNncm91cCxtc2xpbmUsbXNwYWNlLG1zcXJ0LG1zcm93LG1zdGFjayxtc3R5bGUsbXN1Yixtc3Vic3VwLG1zdXAsbXRhYmxlLG10ZCxtdGV4dCxtdHIsbXVuZGVyLG11bmRlcm92ZXIsbm9uZSxzZW1hbnRpY3NcIjtcbmNvbnN0IFZPSURfVEFHUyA9IFwiYXJlYSxiYXNlLGJyLGNvbCxlbWJlZCxocixpbWcsaW5wdXQsbGluayxtZXRhLHBhcmFtLHNvdXJjZSx0cmFjayx3YnJcIjtcbmNvbnN0IGlzSFRNTFRhZyA9IC8qIEBfX1BVUkVfXyAqLyBtYWtlTWFwKEhUTUxfVEFHUyk7XG5jb25zdCBpc1NWR1RhZyA9IC8qIEBfX1BVUkVfXyAqLyBtYWtlTWFwKFNWR19UQUdTKTtcbmNvbnN0IGlzTWF0aE1MVGFnID0gLyogQF9fUFVSRV9fICovIG1ha2VNYXAoTUFUSF9UQUdTKTtcbmNvbnN0IGlzVm9pZFRhZyA9IC8qIEBfX1BVUkVfXyAqLyBtYWtlTWFwKFZPSURfVEFHUyk7XG5cbmNvbnN0IHNwZWNpYWxCb29sZWFuQXR0cnMgPSBgaXRlbXNjb3BlLGFsbG93ZnVsbHNjcmVlbixmb3Jtbm92YWxpZGF0ZSxpc21hcCxub21vZHVsZSxub3ZhbGlkYXRlLHJlYWRvbmx5YDtcbmNvbnN0IGlzU3BlY2lhbEJvb2xlYW5BdHRyID0gLyogQF9fUFVSRV9fICovIG1ha2VNYXAoc3BlY2lhbEJvb2xlYW5BdHRycyk7XG5jb25zdCBpc0Jvb2xlYW5BdHRyID0gLyogQF9fUFVSRV9fICovIG1ha2VNYXAoXG4gIHNwZWNpYWxCb29sZWFuQXR0cnMgKyBgLGFzeW5jLGF1dG9mb2N1cyxhdXRvcGxheSxjb250cm9scyxkZWZhdWx0LGRlZmVyLGRpc2FibGVkLGhpZGRlbixpbmVydCxsb29wLG9wZW4scmVxdWlyZWQscmV2ZXJzZWQsc2NvcGVkLHNlYW1sZXNzLGNoZWNrZWQsbXV0ZWQsbXVsdGlwbGUsc2VsZWN0ZWRgXG4pO1xuZnVuY3Rpb24gaW5jbHVkZUJvb2xlYW5BdHRyKHZhbHVlKSB7XG4gIHJldHVybiAhIXZhbHVlIHx8IHZhbHVlID09PSBcIlwiO1xufVxuY29uc3QgdW5zYWZlQXR0ckNoYXJSRSA9IC9bPi89XCInXFx1MDAwOVxcdTAwMGFcXHUwMDBjXFx1MDAyMF0vO1xuY29uc3QgYXR0clZhbGlkYXRpb25DYWNoZSA9IHt9O1xuZnVuY3Rpb24gaXNTU1JTYWZlQXR0ck5hbWUobmFtZSkge1xuICBpZiAoYXR0clZhbGlkYXRpb25DYWNoZS5oYXNPd25Qcm9wZXJ0eShuYW1lKSkge1xuICAgIHJldHVybiBhdHRyVmFsaWRhdGlvbkNhY2hlW25hbWVdO1xuICB9XG4gIGNvbnN0IGlzVW5zYWZlID0gdW5zYWZlQXR0ckNoYXJSRS50ZXN0KG5hbWUpO1xuICBpZiAoaXNVbnNhZmUpIHtcbiAgICBjb25zb2xlLmVycm9yKGB1bnNhZmUgYXR0cmlidXRlIG5hbWU6ICR7bmFtZX1gKTtcbiAgfVxuICByZXR1cm4gYXR0clZhbGlkYXRpb25DYWNoZVtuYW1lXSA9ICFpc1Vuc2FmZTtcbn1cbmNvbnN0IHByb3BzVG9BdHRyTWFwID0ge1xuICBhY2NlcHRDaGFyc2V0OiBcImFjY2VwdC1jaGFyc2V0XCIsXG4gIGNsYXNzTmFtZTogXCJjbGFzc1wiLFxuICBodG1sRm9yOiBcImZvclwiLFxuICBodHRwRXF1aXY6IFwiaHR0cC1lcXVpdlwiXG59O1xuY29uc3QgaXNLbm93bkh0bWxBdHRyID0gLyogQF9fUFVSRV9fICovIG1ha2VNYXAoXG4gIGBhY2NlcHQsYWNjZXB0LWNoYXJzZXQsYWNjZXNza2V5LGFjdGlvbixhbGlnbixhbGxvdyxhbHQsYXN5bmMsYXV0b2NhcGl0YWxpemUsYXV0b2NvbXBsZXRlLGF1dG9mb2N1cyxhdXRvcGxheSxiYWNrZ3JvdW5kLGJnY29sb3IsYm9yZGVyLGJ1ZmZlcmVkLGNhcHR1cmUsY2hhbGxlbmdlLGNoYXJzZXQsY2hlY2tlZCxjaXRlLGNsYXNzLGNvZGUsY29kZWJhc2UsY29sb3IsY29scyxjb2xzcGFuLGNvbnRlbnQsY29udGVudGVkaXRhYmxlLGNvbnRleHRtZW51LGNvbnRyb2xzLGNvb3Jkcyxjcm9zc29yaWdpbixjc3AsZGF0YSxkYXRldGltZSxkZWNvZGluZyxkZWZhdWx0LGRlZmVyLGRpcixkaXJuYW1lLGRpc2FibGVkLGRvd25sb2FkLGRyYWdnYWJsZSxkcm9wem9uZSxlbmN0eXBlLGVudGVya2V5aGludCxmb3IsZm9ybSxmb3JtYWN0aW9uLGZvcm1lbmN0eXBlLGZvcm1tZXRob2QsZm9ybW5vdmFsaWRhdGUsZm9ybXRhcmdldCxoZWFkZXJzLGhlaWdodCxoaWRkZW4saGlnaCxocmVmLGhyZWZsYW5nLGh0dHAtZXF1aXYsaWNvbixpZCxpbXBvcnRhbmNlLGluZXJ0LGludGVncml0eSxpc21hcCxpdGVtcHJvcCxrZXl0eXBlLGtpbmQsbGFiZWwsbGFuZyxsYW5ndWFnZSxsb2FkaW5nLGxpc3QsbG9vcCxsb3csbWFuaWZlc3QsbWF4LG1heGxlbmd0aCxtaW5sZW5ndGgsbWVkaWEsbWluLG11bHRpcGxlLG11dGVkLG5hbWUsbm92YWxpZGF0ZSxvcGVuLG9wdGltdW0scGF0dGVybixwaW5nLHBsYWNlaG9sZGVyLHBvc3RlcixwcmVsb2FkLHJhZGlvZ3JvdXAscmVhZG9ubHkscmVmZXJyZXJwb2xpY3kscmVsLHJlcXVpcmVkLHJldmVyc2VkLHJvd3Mscm93c3BhbixzYW5kYm94LHNjb3BlLHNjb3BlZCxzZWxlY3RlZCxzaGFwZSxzaXplLHNpemVzLHNsb3Qsc3BhbixzcGVsbGNoZWNrLHNyYyxzcmNkb2Msc3JjbGFuZyxzcmNzZXQsc3RhcnQsc3RlcCxzdHlsZSxzdW1tYXJ5LHRhYmluZGV4LHRhcmdldCx0aXRsZSx0cmFuc2xhdGUsdHlwZSx1c2VtYXAsdmFsdWUsd2lkdGgsd3JhcGBcbik7XG5jb25zdCBpc0tub3duU3ZnQXR0ciA9IC8qIEBfX1BVUkVfXyAqLyBtYWtlTWFwKFxuICBgeG1sbnMsYWNjZW50LWhlaWdodCxhY2N1bXVsYXRlLGFkZGl0aXZlLGFsaWdubWVudC1iYXNlbGluZSxhbHBoYWJldGljLGFtcGxpdHVkZSxhcmFiaWMtZm9ybSxhc2NlbnQsYXR0cmlidXRlTmFtZSxhdHRyaWJ1dGVUeXBlLGF6aW11dGgsYmFzZUZyZXF1ZW5jeSxiYXNlbGluZS1zaGlmdCxiYXNlUHJvZmlsZSxiYm94LGJlZ2luLGJpYXMsYnksY2FsY01vZGUsY2FwLWhlaWdodCxjbGFzcyxjbGlwLGNsaXBQYXRoVW5pdHMsY2xpcC1wYXRoLGNsaXAtcnVsZSxjb2xvcixjb2xvci1pbnRlcnBvbGF0aW9uLGNvbG9yLWludGVycG9sYXRpb24tZmlsdGVycyxjb2xvci1wcm9maWxlLGNvbG9yLXJlbmRlcmluZyxjb250ZW50U2NyaXB0VHlwZSxjb250ZW50U3R5bGVUeXBlLGNyb3Nzb3JpZ2luLGN1cnNvcixjeCxjeSxkLGRlY2VsZXJhdGUsZGVzY2VudCxkaWZmdXNlQ29uc3RhbnQsZGlyZWN0aW9uLGRpc3BsYXksZGl2aXNvcixkb21pbmFudC1iYXNlbGluZSxkdXIsZHgsZHksZWRnZU1vZGUsZWxldmF0aW9uLGVuYWJsZS1iYWNrZ3JvdW5kLGVuZCxleHBvbmVudCxmaWxsLGZpbGwtb3BhY2l0eSxmaWxsLXJ1bGUsZmlsdGVyLGZpbHRlclJlcyxmaWx0ZXJVbml0cyxmbG9vZC1jb2xvcixmbG9vZC1vcGFjaXR5LGZvbnQtZmFtaWx5LGZvbnQtc2l6ZSxmb250LXNpemUtYWRqdXN0LGZvbnQtc3RyZXRjaCxmb250LXN0eWxlLGZvbnQtdmFyaWFudCxmb250LXdlaWdodCxmb3JtYXQsZnJvbSxmcixmeCxmeSxnMSxnMixnbHlwaC1uYW1lLGdseXBoLW9yaWVudGF0aW9uLWhvcml6b250YWwsZ2x5cGgtb3JpZW50YXRpb24tdmVydGljYWwsZ2x5cGhSZWYsZ3JhZGllbnRUcmFuc2Zvcm0sZ3JhZGllbnRVbml0cyxoYW5naW5nLGhlaWdodCxocmVmLGhyZWZsYW5nLGhvcml6LWFkdi14LGhvcml6LW9yaWdpbi14LGlkLGlkZW9ncmFwaGljLGltYWdlLXJlbmRlcmluZyxpbixpbjIsaW50ZXJjZXB0LGssazEsazIsazMsazQsa2VybmVsTWF0cml4LGtlcm5lbFVuaXRMZW5ndGgsa2VybmluZyxrZXlQb2ludHMsa2V5U3BsaW5lcyxrZXlUaW1lcyxsYW5nLGxlbmd0aEFkanVzdCxsZXR0ZXItc3BhY2luZyxsaWdodGluZy1jb2xvcixsaW1pdGluZ0NvbmVBbmdsZSxsb2NhbCxtYXJrZXItZW5kLG1hcmtlci1taWQsbWFya2VyLXN0YXJ0LG1hcmtlckhlaWdodCxtYXJrZXJVbml0cyxtYXJrZXJXaWR0aCxtYXNrLG1hc2tDb250ZW50VW5pdHMsbWFza1VuaXRzLG1hdGhlbWF0aWNhbCxtYXgsbWVkaWEsbWV0aG9kLG1pbixtb2RlLG5hbWUsbnVtT2N0YXZlcyxvZmZzZXQsb3BhY2l0eSxvcGVyYXRvcixvcmRlcixvcmllbnQsb3JpZW50YXRpb24sb3JpZ2luLG92ZXJmbG93LG92ZXJsaW5lLXBvc2l0aW9uLG92ZXJsaW5lLXRoaWNrbmVzcyxwYW5vc2UtMSxwYWludC1vcmRlcixwYXRoLHBhdGhMZW5ndGgscGF0dGVybkNvbnRlbnRVbml0cyxwYXR0ZXJuVHJhbnNmb3JtLHBhdHRlcm5Vbml0cyxwaW5nLHBvaW50ZXItZXZlbnRzLHBvaW50cyxwb2ludHNBdFgscG9pbnRzQXRZLHBvaW50c0F0WixwcmVzZXJ2ZUFscGhhLHByZXNlcnZlQXNwZWN0UmF0aW8scHJpbWl0aXZlVW5pdHMscixyYWRpdXMscmVmZXJyZXJQb2xpY3kscmVmWCxyZWZZLHJlbCxyZW5kZXJpbmctaW50ZW50LHJlcGVhdENvdW50LHJlcGVhdER1cixyZXF1aXJlZEV4dGVuc2lvbnMscmVxdWlyZWRGZWF0dXJlcyxyZXN0YXJ0LHJlc3VsdCxyb3RhdGUscngscnksc2NhbGUsc2VlZCxzaGFwZS1yZW5kZXJpbmcsc2xvcGUsc3BhY2luZyxzcGVjdWxhckNvbnN0YW50LHNwZWN1bGFyRXhwb25lbnQsc3BlZWQsc3ByZWFkTWV0aG9kLHN0YXJ0T2Zmc2V0LHN0ZERldmlhdGlvbixzdGVtaCxzdGVtdixzdGl0Y2hUaWxlcyxzdG9wLWNvbG9yLHN0b3Atb3BhY2l0eSxzdHJpa2V0aHJvdWdoLXBvc2l0aW9uLHN0cmlrZXRocm91Z2gtdGhpY2tuZXNzLHN0cmluZyxzdHJva2Usc3Ryb2tlLWRhc2hhcnJheSxzdHJva2UtZGFzaG9mZnNldCxzdHJva2UtbGluZWNhcCxzdHJva2UtbGluZWpvaW4sc3Ryb2tlLW1pdGVybGltaXQsc3Ryb2tlLW9wYWNpdHksc3Ryb2tlLXdpZHRoLHN0eWxlLHN1cmZhY2VTY2FsZSxzeXN0ZW1MYW5ndWFnZSx0YWJpbmRleCx0YWJsZVZhbHVlcyx0YXJnZXQsdGFyZ2V0WCx0YXJnZXRZLHRleHQtYW5jaG9yLHRleHQtZGVjb3JhdGlvbix0ZXh0LXJlbmRlcmluZyx0ZXh0TGVuZ3RoLHRvLHRyYW5zZm9ybSx0cmFuc2Zvcm0tb3JpZ2luLHR5cGUsdTEsdTIsdW5kZXJsaW5lLXBvc2l0aW9uLHVuZGVybGluZS10aGlja25lc3MsdW5pY29kZSx1bmljb2RlLWJpZGksdW5pY29kZS1yYW5nZSx1bml0cy1wZXItZW0sdi1hbHBoYWJldGljLHYtaGFuZ2luZyx2LWlkZW9ncmFwaGljLHYtbWF0aGVtYXRpY2FsLHZhbHVlcyx2ZWN0b3ItZWZmZWN0LHZlcnNpb24sdmVydC1hZHYteSx2ZXJ0LW9yaWdpbi14LHZlcnQtb3JpZ2luLXksdmlld0JveCx2aWV3VGFyZ2V0LHZpc2liaWxpdHksd2lkdGgsd2lkdGhzLHdvcmQtc3BhY2luZyx3cml0aW5nLW1vZGUseCx4LWhlaWdodCx4MSx4Mix4Q2hhbm5lbFNlbGVjdG9yLHhsaW5rOmFjdHVhdGUseGxpbms6YXJjcm9sZSx4bGluazpocmVmLHhsaW5rOnJvbGUseGxpbms6c2hvdyx4bGluazp0aXRsZSx4bGluazp0eXBlLHhtbG5zOnhsaW5rLHhtbDpiYXNlLHhtbDpsYW5nLHhtbDpzcGFjZSx5LHkxLHkyLHlDaGFubmVsU2VsZWN0b3Iseix6b29tQW5kUGFuYFxuKTtcbmZ1bmN0aW9uIGlzUmVuZGVyYWJsZUF0dHJWYWx1ZSh2YWx1ZSkge1xuICBpZiAodmFsdWUgPT0gbnVsbCkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICBjb25zdCB0eXBlID0gdHlwZW9mIHZhbHVlO1xuICByZXR1cm4gdHlwZSA9PT0gXCJzdHJpbmdcIiB8fCB0eXBlID09PSBcIm51bWJlclwiIHx8IHR5cGUgPT09IFwiYm9vbGVhblwiO1xufVxuXG5jb25zdCBlc2NhcGVSRSA9IC9bXCInJjw+XS87XG5mdW5jdGlvbiBlc2NhcGVIdG1sKHN0cmluZykge1xuICBjb25zdCBzdHIgPSBcIlwiICsgc3RyaW5nO1xuICBjb25zdCBtYXRjaCA9IGVzY2FwZVJFLmV4ZWMoc3RyKTtcbiAgaWYgKCFtYXRjaCkge1xuICAgIHJldHVybiBzdHI7XG4gIH1cbiAgbGV0IGh0bWwgPSBcIlwiO1xuICBsZXQgZXNjYXBlZDtcbiAgbGV0IGluZGV4O1xuICBsZXQgbGFzdEluZGV4ID0gMDtcbiAgZm9yIChpbmRleCA9IG1hdGNoLmluZGV4OyBpbmRleCA8IHN0ci5sZW5ndGg7IGluZGV4KyspIHtcbiAgICBzd2l0Y2ggKHN0ci5jaGFyQ29kZUF0KGluZGV4KSkge1xuICAgICAgY2FzZSAzNDpcbiAgICAgICAgZXNjYXBlZCA9IFwiJnF1b3Q7XCI7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAzODpcbiAgICAgICAgZXNjYXBlZCA9IFwiJmFtcDtcIjtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIDM5OlxuICAgICAgICBlc2NhcGVkID0gXCImIzM5O1wiO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgNjA6XG4gICAgICAgIGVzY2FwZWQgPSBcIiZsdDtcIjtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIDYyOlxuICAgICAgICBlc2NhcGVkID0gXCImZ3Q7XCI7XG4gICAgICAgIGJyZWFrO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgY29udGludWU7XG4gICAgfVxuICAgIGlmIChsYXN0SW5kZXggIT09IGluZGV4KSB7XG4gICAgICBodG1sICs9IHN0ci5zbGljZShsYXN0SW5kZXgsIGluZGV4KTtcbiAgICB9XG4gICAgbGFzdEluZGV4ID0gaW5kZXggKyAxO1xuICAgIGh0bWwgKz0gZXNjYXBlZDtcbiAgfVxuICByZXR1cm4gbGFzdEluZGV4ICE9PSBpbmRleCA/IGh0bWwgKyBzdHIuc2xpY2UobGFzdEluZGV4LCBpbmRleCkgOiBodG1sO1xufVxuY29uc3QgY29tbWVudFN0cmlwUkUgPSAvXi0/Pnw8IS0tfC0tPnwtLSE+fDwhLSQvZztcbmZ1bmN0aW9uIGVzY2FwZUh0bWxDb21tZW50KHNyYykge1xuICByZXR1cm4gc3JjLnJlcGxhY2UoY29tbWVudFN0cmlwUkUsIFwiXCIpO1xufVxuXG5mdW5jdGlvbiBsb29zZUNvbXBhcmVBcnJheXMoYSwgYikge1xuICBpZiAoYS5sZW5ndGggIT09IGIubGVuZ3RoKVxuICAgIHJldHVybiBmYWxzZTtcbiAgbGV0IGVxdWFsID0gdHJ1ZTtcbiAgZm9yIChsZXQgaSA9IDA7IGVxdWFsICYmIGkgPCBhLmxlbmd0aDsgaSsrKSB7XG4gICAgZXF1YWwgPSBsb29zZUVxdWFsKGFbaV0sIGJbaV0pO1xuICB9XG4gIHJldHVybiBlcXVhbDtcbn1cbmZ1bmN0aW9uIGxvb3NlRXF1YWwoYSwgYikge1xuICBpZiAoYSA9PT0gYilcbiAgICByZXR1cm4gdHJ1ZTtcbiAgbGV0IGFWYWxpZFR5cGUgPSBpc0RhdGUoYSk7XG4gIGxldCBiVmFsaWRUeXBlID0gaXNEYXRlKGIpO1xuICBpZiAoYVZhbGlkVHlwZSB8fCBiVmFsaWRUeXBlKSB7XG4gICAgcmV0dXJuIGFWYWxpZFR5cGUgJiYgYlZhbGlkVHlwZSA/IGEuZ2V0VGltZSgpID09PSBiLmdldFRpbWUoKSA6IGZhbHNlO1xuICB9XG4gIGFWYWxpZFR5cGUgPSBpc1N5bWJvbChhKTtcbiAgYlZhbGlkVHlwZSA9IGlzU3ltYm9sKGIpO1xuICBpZiAoYVZhbGlkVHlwZSB8fCBiVmFsaWRUeXBlKSB7XG4gICAgcmV0dXJuIGEgPT09IGI7XG4gIH1cbiAgYVZhbGlkVHlwZSA9IGlzQXJyYXkoYSk7XG4gIGJWYWxpZFR5cGUgPSBpc0FycmF5KGIpO1xuICBpZiAoYVZhbGlkVHlwZSB8fCBiVmFsaWRUeXBlKSB7XG4gICAgcmV0dXJuIGFWYWxpZFR5cGUgJiYgYlZhbGlkVHlwZSA/IGxvb3NlQ29tcGFyZUFycmF5cyhhLCBiKSA6IGZhbHNlO1xuICB9XG4gIGFWYWxpZFR5cGUgPSBpc09iamVjdChhKTtcbiAgYlZhbGlkVHlwZSA9IGlzT2JqZWN0KGIpO1xuICBpZiAoYVZhbGlkVHlwZSB8fCBiVmFsaWRUeXBlKSB7XG4gICAgaWYgKCFhVmFsaWRUeXBlIHx8ICFiVmFsaWRUeXBlKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGNvbnN0IGFLZXlzQ291bnQgPSBPYmplY3Qua2V5cyhhKS5sZW5ndGg7XG4gICAgY29uc3QgYktleXNDb3VudCA9IE9iamVjdC5rZXlzKGIpLmxlbmd0aDtcbiAgICBpZiAoYUtleXNDb3VudCAhPT0gYktleXNDb3VudCkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBmb3IgKGNvbnN0IGtleSBpbiBhKSB7XG4gICAgICBjb25zdCBhSGFzS2V5ID0gYS5oYXNPd25Qcm9wZXJ0eShrZXkpO1xuICAgICAgY29uc3QgYkhhc0tleSA9IGIuaGFzT3duUHJvcGVydHkoa2V5KTtcbiAgICAgIGlmIChhSGFzS2V5ICYmICFiSGFzS2V5IHx8ICFhSGFzS2V5ICYmIGJIYXNLZXkgfHwgIWxvb3NlRXF1YWwoYVtrZXldLCBiW2tleV0pKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgcmV0dXJuIFN0cmluZyhhKSA9PT0gU3RyaW5nKGIpO1xufVxuZnVuY3Rpb24gbG9vc2VJbmRleE9mKGFyciwgdmFsKSB7XG4gIHJldHVybiBhcnIuZmluZEluZGV4KChpdGVtKSA9PiBsb29zZUVxdWFsKGl0ZW0sIHZhbCkpO1xufVxuXG5jb25zdCB0b0Rpc3BsYXlTdHJpbmcgPSAodmFsKSA9PiB7XG4gIHJldHVybiBpc1N0cmluZyh2YWwpID8gdmFsIDogdmFsID09IG51bGwgPyBcIlwiIDogaXNBcnJheSh2YWwpIHx8IGlzT2JqZWN0KHZhbCkgJiYgKHZhbC50b1N0cmluZyA9PT0gb2JqZWN0VG9TdHJpbmcgfHwgIWlzRnVuY3Rpb24odmFsLnRvU3RyaW5nKSkgPyBKU09OLnN0cmluZ2lmeSh2YWwsIHJlcGxhY2VyLCAyKSA6IFN0cmluZyh2YWwpO1xufTtcbmNvbnN0IHJlcGxhY2VyID0gKF9rZXksIHZhbCkgPT4ge1xuICBpZiAodmFsICYmIHZhbC5fX3ZfaXNSZWYpIHtcbiAgICByZXR1cm4gcmVwbGFjZXIoX2tleSwgdmFsLnZhbHVlKTtcbiAgfSBlbHNlIGlmIChpc01hcCh2YWwpKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIFtgTWFwKCR7dmFsLnNpemV9KWBdOiBbLi4udmFsLmVudHJpZXMoKV0ucmVkdWNlKFxuICAgICAgICAoZW50cmllcywgW2tleSwgdmFsMl0sIGkpID0+IHtcbiAgICAgICAgICBlbnRyaWVzW3N0cmluZ2lmeVN5bWJvbChrZXksIGkpICsgXCIgPT5cIl0gPSB2YWwyO1xuICAgICAgICAgIHJldHVybiBlbnRyaWVzO1xuICAgICAgICB9LFxuICAgICAgICB7fVxuICAgICAgKVxuICAgIH07XG4gIH0gZWxzZSBpZiAoaXNTZXQodmFsKSkge1xuICAgIHJldHVybiB7XG4gICAgICBbYFNldCgke3ZhbC5zaXplfSlgXTogWy4uLnZhbC52YWx1ZXMoKV0ubWFwKCh2KSA9PiBzdHJpbmdpZnlTeW1ib2wodikpXG4gICAgfTtcbiAgfSBlbHNlIGlmIChpc1N5bWJvbCh2YWwpKSB7XG4gICAgcmV0dXJuIHN0cmluZ2lmeVN5bWJvbCh2YWwpO1xuICB9IGVsc2UgaWYgKGlzT2JqZWN0KHZhbCkgJiYgIWlzQXJyYXkodmFsKSAmJiAhaXNQbGFpbk9iamVjdCh2YWwpKSB7XG4gICAgcmV0dXJuIFN0cmluZyh2YWwpO1xuICB9XG4gIHJldHVybiB2YWw7XG59O1xuY29uc3Qgc3RyaW5naWZ5U3ltYm9sID0gKHYsIGkgPSBcIlwiKSA9PiB7XG4gIHZhciBfYTtcbiAgcmV0dXJuIGlzU3ltYm9sKHYpID8gYFN5bWJvbCgkeyhfYSA9IHYuZGVzY3JpcHRpb24pICE9IG51bGwgPyBfYSA6IGl9KWAgOiB2O1xufTtcblxuZXhwb3J0IHsgRU1QVFlfQVJSLCBFTVBUWV9PQkosIE5PLCBOT09QLCBQYXRjaEZsYWdOYW1lcywgUGF0Y2hGbGFncywgU2hhcGVGbGFncywgU2xvdEZsYWdzLCBjYW1lbGl6ZSwgY2FwaXRhbGl6ZSwgZGVmLCBlc2NhcGVIdG1sLCBlc2NhcGVIdG1sQ29tbWVudCwgZXh0ZW5kLCBnZW5Qcm9wc0FjY2Vzc0V4cCwgZ2VuZXJhdGVDb2RlRnJhbWUsIGdldEdsb2JhbFRoaXMsIGhhc0NoYW5nZWQsIGhhc093biwgaHlwaGVuYXRlLCBpbmNsdWRlQm9vbGVhbkF0dHIsIGludm9rZUFycmF5Rm5zLCBpc0FycmF5LCBpc0Jvb2xlYW5BdHRyLCBpc0J1aWx0SW5EaXJlY3RpdmUsIGlzRGF0ZSwgaXNGdW5jdGlvbiwgaXNHbG9iYWxseUFsbG93ZWQsIGlzR2xvYmFsbHlXaGl0ZWxpc3RlZCwgaXNIVE1MVGFnLCBpc0ludGVnZXJLZXksIGlzS25vd25IdG1sQXR0ciwgaXNLbm93blN2Z0F0dHIsIGlzTWFwLCBpc01hdGhNTFRhZywgaXNNb2RlbExpc3RlbmVyLCBpc09iamVjdCwgaXNPbiwgaXNQbGFpbk9iamVjdCwgaXNQcm9taXNlLCBpc1JlZ0V4cCwgaXNSZW5kZXJhYmxlQXR0clZhbHVlLCBpc1Jlc2VydmVkUHJvcCwgaXNTU1JTYWZlQXR0ck5hbWUsIGlzU1ZHVGFnLCBpc1NldCwgaXNTcGVjaWFsQm9vbGVhbkF0dHIsIGlzU3RyaW5nLCBpc1N5bWJvbCwgaXNWb2lkVGFnLCBsb29zZUVxdWFsLCBsb29zZUluZGV4T2YsIGxvb3NlVG9OdW1iZXIsIG1ha2VNYXAsIG5vcm1hbGl6ZUNsYXNzLCBub3JtYWxpemVQcm9wcywgbm9ybWFsaXplU3R5bGUsIG9iamVjdFRvU3RyaW5nLCBwYXJzZVN0cmluZ1N0eWxlLCBwcm9wc1RvQXR0ck1hcCwgcmVtb3ZlLCBzbG90RmxhZ3NUZXh0LCBzdHJpbmdpZnlTdHlsZSwgdG9EaXNwbGF5U3RyaW5nLCB0b0hhbmRsZXJLZXksIHRvTnVtYmVyLCB0b1Jhd1R5cGUsIHRvVHlwZVN0cmluZyB9O1xuIiwiLyoqXG4qIEB2dWUvcmVhY3Rpdml0eSB2My40LjIxXG4qIChjKSAyMDE4LXByZXNlbnQgWXV4aSAoRXZhbikgWW91IGFuZCBWdWUgY29udHJpYnV0b3JzXG4qIEBsaWNlbnNlIE1JVFxuKiovXG5pbXBvcnQgeyBOT09QLCBleHRlbmQsIGlzQXJyYXksIGlzU3ltYm9sLCBpc01hcCwgaXNJbnRlZ2VyS2V5LCBoYXNPd24sIGhhc0NoYW5nZWQsIGlzT2JqZWN0LCBtYWtlTWFwLCBjYXBpdGFsaXplLCB0b1Jhd1R5cGUsIGRlZiwgaXNGdW5jdGlvbiB9IGZyb20gJ0B2dWUvc2hhcmVkJztcblxuZnVuY3Rpb24gd2Fybihtc2csIC4uLmFyZ3MpIHtcbiAgY29uc29sZS53YXJuKGBbVnVlIHdhcm5dICR7bXNnfWAsIC4uLmFyZ3MpO1xufVxuXG5sZXQgYWN0aXZlRWZmZWN0U2NvcGU7XG5jbGFzcyBFZmZlY3RTY29wZSB7XG4gIGNvbnN0cnVjdG9yKGRldGFjaGVkID0gZmFsc2UpIHtcbiAgICB0aGlzLmRldGFjaGVkID0gZGV0YWNoZWQ7XG4gICAgLyoqXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgdGhpcy5fYWN0aXZlID0gdHJ1ZTtcbiAgICAvKipcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICB0aGlzLmVmZmVjdHMgPSBbXTtcbiAgICAvKipcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICB0aGlzLmNsZWFudXBzID0gW107XG4gICAgdGhpcy5wYXJlbnQgPSBhY3RpdmVFZmZlY3RTY29wZTtcbiAgICBpZiAoIWRldGFjaGVkICYmIGFjdGl2ZUVmZmVjdFNjb3BlKSB7XG4gICAgICB0aGlzLmluZGV4ID0gKGFjdGl2ZUVmZmVjdFNjb3BlLnNjb3BlcyB8fCAoYWN0aXZlRWZmZWN0U2NvcGUuc2NvcGVzID0gW10pKS5wdXNoKFxuICAgICAgICB0aGlzXG4gICAgICApIC0gMTtcbiAgICB9XG4gIH1cbiAgZ2V0IGFjdGl2ZSgpIHtcbiAgICByZXR1cm4gdGhpcy5fYWN0aXZlO1xuICB9XG4gIHJ1bihmbikge1xuICAgIGlmICh0aGlzLl9hY3RpdmUpIHtcbiAgICAgIGNvbnN0IGN1cnJlbnRFZmZlY3RTY29wZSA9IGFjdGl2ZUVmZmVjdFNjb3BlO1xuICAgICAgdHJ5IHtcbiAgICAgICAgYWN0aXZlRWZmZWN0U2NvcGUgPSB0aGlzO1xuICAgICAgICByZXR1cm4gZm4oKTtcbiAgICAgIH0gZmluYWxseSB7XG4gICAgICAgIGFjdGl2ZUVmZmVjdFNjb3BlID0gY3VycmVudEVmZmVjdFNjb3BlO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSkge1xuICAgICAgd2FybihgY2Fubm90IHJ1biBhbiBpbmFjdGl2ZSBlZmZlY3Qgc2NvcGUuYCk7XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBUaGlzIHNob3VsZCBvbmx5IGJlIGNhbGxlZCBvbiBub24tZGV0YWNoZWQgc2NvcGVzXG4gICAqIEBpbnRlcm5hbFxuICAgKi9cbiAgb24oKSB7XG4gICAgYWN0aXZlRWZmZWN0U2NvcGUgPSB0aGlzO1xuICB9XG4gIC8qKlxuICAgKiBUaGlzIHNob3VsZCBvbmx5IGJlIGNhbGxlZCBvbiBub24tZGV0YWNoZWQgc2NvcGVzXG4gICAqIEBpbnRlcm5hbFxuICAgKi9cbiAgb2ZmKCkge1xuICAgIGFjdGl2ZUVmZmVjdFNjb3BlID0gdGhpcy5wYXJlbnQ7XG4gIH1cbiAgc3RvcChmcm9tUGFyZW50KSB7XG4gICAgaWYgKHRoaXMuX2FjdGl2ZSkge1xuICAgICAgbGV0IGksIGw7XG4gICAgICBmb3IgKGkgPSAwLCBsID0gdGhpcy5lZmZlY3RzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgICB0aGlzLmVmZmVjdHNbaV0uc3RvcCgpO1xuICAgICAgfVxuICAgICAgZm9yIChpID0gMCwgbCA9IHRoaXMuY2xlYW51cHMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgIHRoaXMuY2xlYW51cHNbaV0oKTtcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLnNjb3Blcykge1xuICAgICAgICBmb3IgKGkgPSAwLCBsID0gdGhpcy5zY29wZXMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgICAgdGhpcy5zY29wZXNbaV0uc3RvcCh0cnVlKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKCF0aGlzLmRldGFjaGVkICYmIHRoaXMucGFyZW50ICYmICFmcm9tUGFyZW50KSB7XG4gICAgICAgIGNvbnN0IGxhc3QgPSB0aGlzLnBhcmVudC5zY29wZXMucG9wKCk7XG4gICAgICAgIGlmIChsYXN0ICYmIGxhc3QgIT09IHRoaXMpIHtcbiAgICAgICAgICB0aGlzLnBhcmVudC5zY29wZXNbdGhpcy5pbmRleF0gPSBsYXN0O1xuICAgICAgICAgIGxhc3QuaW5kZXggPSB0aGlzLmluZGV4O1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICB0aGlzLnBhcmVudCA9IHZvaWQgMDtcbiAgICAgIHRoaXMuX2FjdGl2ZSA9IGZhbHNlO1xuICAgIH1cbiAgfVxufVxuZnVuY3Rpb24gZWZmZWN0U2NvcGUoZGV0YWNoZWQpIHtcbiAgcmV0dXJuIG5ldyBFZmZlY3RTY29wZShkZXRhY2hlZCk7XG59XG5mdW5jdGlvbiByZWNvcmRFZmZlY3RTY29wZShlZmZlY3QsIHNjb3BlID0gYWN0aXZlRWZmZWN0U2NvcGUpIHtcbiAgaWYgKHNjb3BlICYmIHNjb3BlLmFjdGl2ZSkge1xuICAgIHNjb3BlLmVmZmVjdHMucHVzaChlZmZlY3QpO1xuICB9XG59XG5mdW5jdGlvbiBnZXRDdXJyZW50U2NvcGUoKSB7XG4gIHJldHVybiBhY3RpdmVFZmZlY3RTY29wZTtcbn1cbmZ1bmN0aW9uIG9uU2NvcGVEaXNwb3NlKGZuKSB7XG4gIGlmIChhY3RpdmVFZmZlY3RTY29wZSkge1xuICAgIGFjdGl2ZUVmZmVjdFNjb3BlLmNsZWFudXBzLnB1c2goZm4pO1xuICB9IGVsc2UgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikpIHtcbiAgICB3YXJuKFxuICAgICAgYG9uU2NvcGVEaXNwb3NlKCkgaXMgY2FsbGVkIHdoZW4gdGhlcmUgaXMgbm8gYWN0aXZlIGVmZmVjdCBzY29wZSB0byBiZSBhc3NvY2lhdGVkIHdpdGguYFxuICAgICk7XG4gIH1cbn1cblxubGV0IGFjdGl2ZUVmZmVjdDtcbmNsYXNzIFJlYWN0aXZlRWZmZWN0IHtcbiAgY29uc3RydWN0b3IoZm4sIHRyaWdnZXIsIHNjaGVkdWxlciwgc2NvcGUpIHtcbiAgICB0aGlzLmZuID0gZm47XG4gICAgdGhpcy50cmlnZ2VyID0gdHJpZ2dlcjtcbiAgICB0aGlzLnNjaGVkdWxlciA9IHNjaGVkdWxlcjtcbiAgICB0aGlzLmFjdGl2ZSA9IHRydWU7XG4gICAgdGhpcy5kZXBzID0gW107XG4gICAgLyoqXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgdGhpcy5fZGlydHlMZXZlbCA9IDQ7XG4gICAgLyoqXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgdGhpcy5fdHJhY2tJZCA9IDA7XG4gICAgLyoqXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgdGhpcy5fcnVubmluZ3MgPSAwO1xuICAgIC8qKlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIHRoaXMuX3Nob3VsZFNjaGVkdWxlID0gZmFsc2U7XG4gICAgLyoqXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgdGhpcy5fZGVwc0xlbmd0aCA9IDA7XG4gICAgcmVjb3JkRWZmZWN0U2NvcGUodGhpcywgc2NvcGUpO1xuICB9XG4gIGdldCBkaXJ0eSgpIHtcbiAgICBpZiAodGhpcy5fZGlydHlMZXZlbCA9PT0gMiB8fCB0aGlzLl9kaXJ0eUxldmVsID09PSAzKSB7XG4gICAgICB0aGlzLl9kaXJ0eUxldmVsID0gMTtcbiAgICAgIHBhdXNlVHJhY2tpbmcoKTtcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5fZGVwc0xlbmd0aDsgaSsrKSB7XG4gICAgICAgIGNvbnN0IGRlcCA9IHRoaXMuZGVwc1tpXTtcbiAgICAgICAgaWYgKGRlcC5jb21wdXRlZCkge1xuICAgICAgICAgIHRyaWdnZXJDb21wdXRlZChkZXAuY29tcHV0ZWQpO1xuICAgICAgICAgIGlmICh0aGlzLl9kaXJ0eUxldmVsID49IDQpIHtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKHRoaXMuX2RpcnR5TGV2ZWwgPT09IDEpIHtcbiAgICAgICAgdGhpcy5fZGlydHlMZXZlbCA9IDA7XG4gICAgICB9XG4gICAgICByZXNldFRyYWNraW5nKCk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLl9kaXJ0eUxldmVsID49IDQ7XG4gIH1cbiAgc2V0IGRpcnR5KHYpIHtcbiAgICB0aGlzLl9kaXJ0eUxldmVsID0gdiA/IDQgOiAwO1xuICB9XG4gIHJ1bigpIHtcbiAgICB0aGlzLl9kaXJ0eUxldmVsID0gMDtcbiAgICBpZiAoIXRoaXMuYWN0aXZlKSB7XG4gICAgICByZXR1cm4gdGhpcy5mbigpO1xuICAgIH1cbiAgICBsZXQgbGFzdFNob3VsZFRyYWNrID0gc2hvdWxkVHJhY2s7XG4gICAgbGV0IGxhc3RFZmZlY3QgPSBhY3RpdmVFZmZlY3Q7XG4gICAgdHJ5IHtcbiAgICAgIHNob3VsZFRyYWNrID0gdHJ1ZTtcbiAgICAgIGFjdGl2ZUVmZmVjdCA9IHRoaXM7XG4gICAgICB0aGlzLl9ydW5uaW5ncysrO1xuICAgICAgcHJlQ2xlYW51cEVmZmVjdCh0aGlzKTtcbiAgICAgIHJldHVybiB0aGlzLmZuKCk7XG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIHBvc3RDbGVhbnVwRWZmZWN0KHRoaXMpO1xuICAgICAgdGhpcy5fcnVubmluZ3MtLTtcbiAgICAgIGFjdGl2ZUVmZmVjdCA9IGxhc3RFZmZlY3Q7XG4gICAgICBzaG91bGRUcmFjayA9IGxhc3RTaG91bGRUcmFjaztcbiAgICB9XG4gIH1cbiAgc3RvcCgpIHtcbiAgICB2YXIgX2E7XG4gICAgaWYgKHRoaXMuYWN0aXZlKSB7XG4gICAgICBwcmVDbGVhbnVwRWZmZWN0KHRoaXMpO1xuICAgICAgcG9zdENsZWFudXBFZmZlY3QodGhpcyk7XG4gICAgICAoX2EgPSB0aGlzLm9uU3RvcCkgPT0gbnVsbCA/IHZvaWQgMCA6IF9hLmNhbGwodGhpcyk7XG4gICAgICB0aGlzLmFjdGl2ZSA9IGZhbHNlO1xuICAgIH1cbiAgfVxufVxuZnVuY3Rpb24gdHJpZ2dlckNvbXB1dGVkKGNvbXB1dGVkKSB7XG4gIHJldHVybiBjb21wdXRlZC52YWx1ZTtcbn1cbmZ1bmN0aW9uIHByZUNsZWFudXBFZmZlY3QoZWZmZWN0Mikge1xuICBlZmZlY3QyLl90cmFja0lkKys7XG4gIGVmZmVjdDIuX2RlcHNMZW5ndGggPSAwO1xufVxuZnVuY3Rpb24gcG9zdENsZWFudXBFZmZlY3QoZWZmZWN0Mikge1xuICBpZiAoZWZmZWN0Mi5kZXBzLmxlbmd0aCA+IGVmZmVjdDIuX2RlcHNMZW5ndGgpIHtcbiAgICBmb3IgKGxldCBpID0gZWZmZWN0Mi5fZGVwc0xlbmd0aDsgaSA8IGVmZmVjdDIuZGVwcy5sZW5ndGg7IGkrKykge1xuICAgICAgY2xlYW51cERlcEVmZmVjdChlZmZlY3QyLmRlcHNbaV0sIGVmZmVjdDIpO1xuICAgIH1cbiAgICBlZmZlY3QyLmRlcHMubGVuZ3RoID0gZWZmZWN0Mi5fZGVwc0xlbmd0aDtcbiAgfVxufVxuZnVuY3Rpb24gY2xlYW51cERlcEVmZmVjdChkZXAsIGVmZmVjdDIpIHtcbiAgY29uc3QgdHJhY2tJZCA9IGRlcC5nZXQoZWZmZWN0Mik7XG4gIGlmICh0cmFja0lkICE9PSB2b2lkIDAgJiYgZWZmZWN0Mi5fdHJhY2tJZCAhPT0gdHJhY2tJZCkge1xuICAgIGRlcC5kZWxldGUoZWZmZWN0Mik7XG4gICAgaWYgKGRlcC5zaXplID09PSAwKSB7XG4gICAgICBkZXAuY2xlYW51cCgpO1xuICAgIH1cbiAgfVxufVxuZnVuY3Rpb24gZWZmZWN0KGZuLCBvcHRpb25zKSB7XG4gIGlmIChmbi5lZmZlY3QgaW5zdGFuY2VvZiBSZWFjdGl2ZUVmZmVjdCkge1xuICAgIGZuID0gZm4uZWZmZWN0LmZuO1xuICB9XG4gIGNvbnN0IF9lZmZlY3QgPSBuZXcgUmVhY3RpdmVFZmZlY3QoZm4sIE5PT1AsICgpID0+IHtcbiAgICBpZiAoX2VmZmVjdC5kaXJ0eSkge1xuICAgICAgX2VmZmVjdC5ydW4oKTtcbiAgICB9XG4gIH0pO1xuICBpZiAob3B0aW9ucykge1xuICAgIGV4dGVuZChfZWZmZWN0LCBvcHRpb25zKTtcbiAgICBpZiAob3B0aW9ucy5zY29wZSlcbiAgICAgIHJlY29yZEVmZmVjdFNjb3BlKF9lZmZlY3QsIG9wdGlvbnMuc2NvcGUpO1xuICB9XG4gIGlmICghb3B0aW9ucyB8fCAhb3B0aW9ucy5sYXp5KSB7XG4gICAgX2VmZmVjdC5ydW4oKTtcbiAgfVxuICBjb25zdCBydW5uZXIgPSBfZWZmZWN0LnJ1bi5iaW5kKF9lZmZlY3QpO1xuICBydW5uZXIuZWZmZWN0ID0gX2VmZmVjdDtcbiAgcmV0dXJuIHJ1bm5lcjtcbn1cbmZ1bmN0aW9uIHN0b3AocnVubmVyKSB7XG4gIHJ1bm5lci5lZmZlY3Quc3RvcCgpO1xufVxubGV0IHNob3VsZFRyYWNrID0gdHJ1ZTtcbmxldCBwYXVzZVNjaGVkdWxlU3RhY2sgPSAwO1xuY29uc3QgdHJhY2tTdGFjayA9IFtdO1xuZnVuY3Rpb24gcGF1c2VUcmFja2luZygpIHtcbiAgdHJhY2tTdGFjay5wdXNoKHNob3VsZFRyYWNrKTtcbiAgc2hvdWxkVHJhY2sgPSBmYWxzZTtcbn1cbmZ1bmN0aW9uIGVuYWJsZVRyYWNraW5nKCkge1xuICB0cmFja1N0YWNrLnB1c2goc2hvdWxkVHJhY2spO1xuICBzaG91bGRUcmFjayA9IHRydWU7XG59XG5mdW5jdGlvbiByZXNldFRyYWNraW5nKCkge1xuICBjb25zdCBsYXN0ID0gdHJhY2tTdGFjay5wb3AoKTtcbiAgc2hvdWxkVHJhY2sgPSBsYXN0ID09PSB2b2lkIDAgPyB0cnVlIDogbGFzdDtcbn1cbmZ1bmN0aW9uIHBhdXNlU2NoZWR1bGluZygpIHtcbiAgcGF1c2VTY2hlZHVsZVN0YWNrKys7XG59XG5mdW5jdGlvbiByZXNldFNjaGVkdWxpbmcoKSB7XG4gIHBhdXNlU2NoZWR1bGVTdGFjay0tO1xuICB3aGlsZSAoIXBhdXNlU2NoZWR1bGVTdGFjayAmJiBxdWV1ZUVmZmVjdFNjaGVkdWxlcnMubGVuZ3RoKSB7XG4gICAgcXVldWVFZmZlY3RTY2hlZHVsZXJzLnNoaWZ0KCkoKTtcbiAgfVxufVxuZnVuY3Rpb24gdHJhY2tFZmZlY3QoZWZmZWN0MiwgZGVwLCBkZWJ1Z2dlckV2ZW50RXh0cmFJbmZvKSB7XG4gIHZhciBfYTtcbiAgaWYgKGRlcC5nZXQoZWZmZWN0MikgIT09IGVmZmVjdDIuX3RyYWNrSWQpIHtcbiAgICBkZXAuc2V0KGVmZmVjdDIsIGVmZmVjdDIuX3RyYWNrSWQpO1xuICAgIGNvbnN0IG9sZERlcCA9IGVmZmVjdDIuZGVwc1tlZmZlY3QyLl9kZXBzTGVuZ3RoXTtcbiAgICBpZiAob2xkRGVwICE9PSBkZXApIHtcbiAgICAgIGlmIChvbGREZXApIHtcbiAgICAgICAgY2xlYW51cERlcEVmZmVjdChvbGREZXAsIGVmZmVjdDIpO1xuICAgICAgfVxuICAgICAgZWZmZWN0Mi5kZXBzW2VmZmVjdDIuX2RlcHNMZW5ndGgrK10gPSBkZXA7XG4gICAgfSBlbHNlIHtcbiAgICAgIGVmZmVjdDIuX2RlcHNMZW5ndGgrKztcbiAgICB9XG4gICAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikpIHtcbiAgICAgIChfYSA9IGVmZmVjdDIub25UcmFjaykgPT0gbnVsbCA/IHZvaWQgMCA6IF9hLmNhbGwoZWZmZWN0MiwgZXh0ZW5kKHsgZWZmZWN0OiBlZmZlY3QyIH0sIGRlYnVnZ2VyRXZlbnRFeHRyYUluZm8pKTtcbiAgICB9XG4gIH1cbn1cbmNvbnN0IHF1ZXVlRWZmZWN0U2NoZWR1bGVycyA9IFtdO1xuZnVuY3Rpb24gdHJpZ2dlckVmZmVjdHMoZGVwLCBkaXJ0eUxldmVsLCBkZWJ1Z2dlckV2ZW50RXh0cmFJbmZvKSB7XG4gIHZhciBfYTtcbiAgcGF1c2VTY2hlZHVsaW5nKCk7XG4gIGZvciAoY29uc3QgZWZmZWN0MiBvZiBkZXAua2V5cygpKSB7XG4gICAgbGV0IHRyYWNraW5nO1xuICAgIGlmIChlZmZlY3QyLl9kaXJ0eUxldmVsIDwgZGlydHlMZXZlbCAmJiAodHJhY2tpbmcgIT0gbnVsbCA/IHRyYWNraW5nIDogdHJhY2tpbmcgPSBkZXAuZ2V0KGVmZmVjdDIpID09PSBlZmZlY3QyLl90cmFja0lkKSkge1xuICAgICAgZWZmZWN0Mi5fc2hvdWxkU2NoZWR1bGUgfHwgKGVmZmVjdDIuX3Nob3VsZFNjaGVkdWxlID0gZWZmZWN0Mi5fZGlydHlMZXZlbCA9PT0gMCk7XG4gICAgICBlZmZlY3QyLl9kaXJ0eUxldmVsID0gZGlydHlMZXZlbDtcbiAgICB9XG4gICAgaWYgKGVmZmVjdDIuX3Nob3VsZFNjaGVkdWxlICYmICh0cmFja2luZyAhPSBudWxsID8gdHJhY2tpbmcgOiB0cmFja2luZyA9IGRlcC5nZXQoZWZmZWN0MikgPT09IGVmZmVjdDIuX3RyYWNrSWQpKSB7XG4gICAgICBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSkge1xuICAgICAgICAoX2EgPSBlZmZlY3QyLm9uVHJpZ2dlcikgPT0gbnVsbCA/IHZvaWQgMCA6IF9hLmNhbGwoZWZmZWN0MiwgZXh0ZW5kKHsgZWZmZWN0OiBlZmZlY3QyIH0sIGRlYnVnZ2VyRXZlbnRFeHRyYUluZm8pKTtcbiAgICAgIH1cbiAgICAgIGVmZmVjdDIudHJpZ2dlcigpO1xuICAgICAgaWYgKCghZWZmZWN0Mi5fcnVubmluZ3MgfHwgZWZmZWN0Mi5hbGxvd1JlY3Vyc2UpICYmIGVmZmVjdDIuX2RpcnR5TGV2ZWwgIT09IDIpIHtcbiAgICAgICAgZWZmZWN0Mi5fc2hvdWxkU2NoZWR1bGUgPSBmYWxzZTtcbiAgICAgICAgaWYgKGVmZmVjdDIuc2NoZWR1bGVyKSB7XG4gICAgICAgICAgcXVldWVFZmZlY3RTY2hlZHVsZXJzLnB1c2goZWZmZWN0Mi5zY2hlZHVsZXIpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG4gIHJlc2V0U2NoZWR1bGluZygpO1xufVxuXG5jb25zdCBjcmVhdGVEZXAgPSAoY2xlYW51cCwgY29tcHV0ZWQpID0+IHtcbiAgY29uc3QgZGVwID0gLyogQF9fUFVSRV9fICovIG5ldyBNYXAoKTtcbiAgZGVwLmNsZWFudXAgPSBjbGVhbnVwO1xuICBkZXAuY29tcHV0ZWQgPSBjb21wdXRlZDtcbiAgcmV0dXJuIGRlcDtcbn07XG5cbmNvbnN0IHRhcmdldE1hcCA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgV2Vha01hcCgpO1xuY29uc3QgSVRFUkFURV9LRVkgPSBTeW1ib2woISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSA/IFwiaXRlcmF0ZVwiIDogXCJcIik7XG5jb25zdCBNQVBfS0VZX0lURVJBVEVfS0VZID0gU3ltYm9sKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgPyBcIk1hcCBrZXkgaXRlcmF0ZVwiIDogXCJcIik7XG5mdW5jdGlvbiB0cmFjayh0YXJnZXQsIHR5cGUsIGtleSkge1xuICBpZiAoc2hvdWxkVHJhY2sgJiYgYWN0aXZlRWZmZWN0KSB7XG4gICAgbGV0IGRlcHNNYXAgPSB0YXJnZXRNYXAuZ2V0KHRhcmdldCk7XG4gICAgaWYgKCFkZXBzTWFwKSB7XG4gICAgICB0YXJnZXRNYXAuc2V0KHRhcmdldCwgZGVwc01hcCA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKCkpO1xuICAgIH1cbiAgICBsZXQgZGVwID0gZGVwc01hcC5nZXQoa2V5KTtcbiAgICBpZiAoIWRlcCkge1xuICAgICAgZGVwc01hcC5zZXQoa2V5LCBkZXAgPSBjcmVhdGVEZXAoKCkgPT4gZGVwc01hcC5kZWxldGUoa2V5KSkpO1xuICAgIH1cbiAgICB0cmFja0VmZmVjdChcbiAgICAgIGFjdGl2ZUVmZmVjdCxcbiAgICAgIGRlcCxcbiAgICAgICEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgPyB7XG4gICAgICAgIHRhcmdldCxcbiAgICAgICAgdHlwZSxcbiAgICAgICAga2V5XG4gICAgICB9IDogdm9pZCAwXG4gICAgKTtcbiAgfVxufVxuZnVuY3Rpb24gdHJpZ2dlcih0YXJnZXQsIHR5cGUsIGtleSwgbmV3VmFsdWUsIG9sZFZhbHVlLCBvbGRUYXJnZXQpIHtcbiAgY29uc3QgZGVwc01hcCA9IHRhcmdldE1hcC5nZXQodGFyZ2V0KTtcbiAgaWYgKCFkZXBzTWFwKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIGxldCBkZXBzID0gW107XG4gIGlmICh0eXBlID09PSBcImNsZWFyXCIpIHtcbiAgICBkZXBzID0gWy4uLmRlcHNNYXAudmFsdWVzKCldO1xuICB9IGVsc2UgaWYgKGtleSA9PT0gXCJsZW5ndGhcIiAmJiBpc0FycmF5KHRhcmdldCkpIHtcbiAgICBjb25zdCBuZXdMZW5ndGggPSBOdW1iZXIobmV3VmFsdWUpO1xuICAgIGRlcHNNYXAuZm9yRWFjaCgoZGVwLCBrZXkyKSA9PiB7XG4gICAgICBpZiAoa2V5MiA9PT0gXCJsZW5ndGhcIiB8fCAhaXNTeW1ib2woa2V5MikgJiYga2V5MiA+PSBuZXdMZW5ndGgpIHtcbiAgICAgICAgZGVwcy5wdXNoKGRlcCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH0gZWxzZSB7XG4gICAgaWYgKGtleSAhPT0gdm9pZCAwKSB7XG4gICAgICBkZXBzLnB1c2goZGVwc01hcC5nZXQoa2V5KSk7XG4gICAgfVxuICAgIHN3aXRjaCAodHlwZSkge1xuICAgICAgY2FzZSBcImFkZFwiOlxuICAgICAgICBpZiAoIWlzQXJyYXkodGFyZ2V0KSkge1xuICAgICAgICAgIGRlcHMucHVzaChkZXBzTWFwLmdldChJVEVSQVRFX0tFWSkpO1xuICAgICAgICAgIGlmIChpc01hcCh0YXJnZXQpKSB7XG4gICAgICAgICAgICBkZXBzLnB1c2goZGVwc01hcC5nZXQoTUFQX0tFWV9JVEVSQVRFX0tFWSkpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmIChpc0ludGVnZXJLZXkoa2V5KSkge1xuICAgICAgICAgIGRlcHMucHVzaChkZXBzTWFwLmdldChcImxlbmd0aFwiKSk7XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIFwiZGVsZXRlXCI6XG4gICAgICAgIGlmICghaXNBcnJheSh0YXJnZXQpKSB7XG4gICAgICAgICAgZGVwcy5wdXNoKGRlcHNNYXAuZ2V0KElURVJBVEVfS0VZKSk7XG4gICAgICAgICAgaWYgKGlzTWFwKHRhcmdldCkpIHtcbiAgICAgICAgICAgIGRlcHMucHVzaChkZXBzTWFwLmdldChNQVBfS0VZX0lURVJBVEVfS0VZKSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBcInNldFwiOlxuICAgICAgICBpZiAoaXNNYXAodGFyZ2V0KSkge1xuICAgICAgICAgIGRlcHMucHVzaChkZXBzTWFwLmdldChJVEVSQVRFX0tFWSkpO1xuICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxuICBwYXVzZVNjaGVkdWxpbmcoKTtcbiAgZm9yIChjb25zdCBkZXAgb2YgZGVwcykge1xuICAgIGlmIChkZXApIHtcbiAgICAgIHRyaWdnZXJFZmZlY3RzKFxuICAgICAgICBkZXAsXG4gICAgICAgIDQsXG4gICAgICAgICEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgPyB7XG4gICAgICAgICAgdGFyZ2V0LFxuICAgICAgICAgIHR5cGUsXG4gICAgICAgICAga2V5LFxuICAgICAgICAgIG5ld1ZhbHVlLFxuICAgICAgICAgIG9sZFZhbHVlLFxuICAgICAgICAgIG9sZFRhcmdldFxuICAgICAgICB9IDogdm9pZCAwXG4gICAgICApO1xuICAgIH1cbiAgfVxuICByZXNldFNjaGVkdWxpbmcoKTtcbn1cbmZ1bmN0aW9uIGdldERlcEZyb21SZWFjdGl2ZShvYmplY3QsIGtleSkge1xuICB2YXIgX2E7XG4gIHJldHVybiAoX2EgPSB0YXJnZXRNYXAuZ2V0KG9iamVjdCkpID09IG51bGwgPyB2b2lkIDAgOiBfYS5nZXQoa2V5KTtcbn1cblxuY29uc3QgaXNOb25UcmFja2FibGVLZXlzID0gLyogQF9fUFVSRV9fICovIG1ha2VNYXAoYF9fcHJvdG9fXyxfX3ZfaXNSZWYsX19pc1Z1ZWApO1xuY29uc3QgYnVpbHRJblN5bWJvbHMgPSBuZXcgU2V0KFxuICAvKiBAX19QVVJFX18gKi8gT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMoU3ltYm9sKS5maWx0ZXIoKGtleSkgPT4ga2V5ICE9PSBcImFyZ3VtZW50c1wiICYmIGtleSAhPT0gXCJjYWxsZXJcIikubWFwKChrZXkpID0+IFN5bWJvbFtrZXldKS5maWx0ZXIoaXNTeW1ib2wpXG4pO1xuY29uc3QgYXJyYXlJbnN0cnVtZW50YXRpb25zID0gLyogQF9fUFVSRV9fICovIGNyZWF0ZUFycmF5SW5zdHJ1bWVudGF0aW9ucygpO1xuZnVuY3Rpb24gY3JlYXRlQXJyYXlJbnN0cnVtZW50YXRpb25zKCkge1xuICBjb25zdCBpbnN0cnVtZW50YXRpb25zID0ge307XG4gIFtcImluY2x1ZGVzXCIsIFwiaW5kZXhPZlwiLCBcImxhc3RJbmRleE9mXCJdLmZvckVhY2goKGtleSkgPT4ge1xuICAgIGluc3RydW1lbnRhdGlvbnNba2V5XSA9IGZ1bmN0aW9uKC4uLmFyZ3MpIHtcbiAgICAgIGNvbnN0IGFyciA9IHRvUmF3KHRoaXMpO1xuICAgICAgZm9yIChsZXQgaSA9IDAsIGwgPSB0aGlzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgICB0cmFjayhhcnIsIFwiZ2V0XCIsIGkgKyBcIlwiKTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IHJlcyA9IGFycltrZXldKC4uLmFyZ3MpO1xuICAgICAgaWYgKHJlcyA9PT0gLTEgfHwgcmVzID09PSBmYWxzZSkge1xuICAgICAgICByZXR1cm4gYXJyW2tleV0oLi4uYXJncy5tYXAodG9SYXcpKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiByZXM7XG4gICAgICB9XG4gICAgfTtcbiAgfSk7XG4gIFtcInB1c2hcIiwgXCJwb3BcIiwgXCJzaGlmdFwiLCBcInVuc2hpZnRcIiwgXCJzcGxpY2VcIl0uZm9yRWFjaCgoa2V5KSA9PiB7XG4gICAgaW5zdHJ1bWVudGF0aW9uc1trZXldID0gZnVuY3Rpb24oLi4uYXJncykge1xuICAgICAgcGF1c2VUcmFja2luZygpO1xuICAgICAgcGF1c2VTY2hlZHVsaW5nKCk7XG4gICAgICBjb25zdCByZXMgPSB0b1Jhdyh0aGlzKVtrZXldLmFwcGx5KHRoaXMsIGFyZ3MpO1xuICAgICAgcmVzZXRTY2hlZHVsaW5nKCk7XG4gICAgICByZXNldFRyYWNraW5nKCk7XG4gICAgICByZXR1cm4gcmVzO1xuICAgIH07XG4gIH0pO1xuICByZXR1cm4gaW5zdHJ1bWVudGF0aW9ucztcbn1cbmZ1bmN0aW9uIGhhc093blByb3BlcnR5KGtleSkge1xuICBjb25zdCBvYmogPSB0b1Jhdyh0aGlzKTtcbiAgdHJhY2sob2JqLCBcImhhc1wiLCBrZXkpO1xuICByZXR1cm4gb2JqLmhhc093blByb3BlcnR5KGtleSk7XG59XG5jbGFzcyBCYXNlUmVhY3RpdmVIYW5kbGVyIHtcbiAgY29uc3RydWN0b3IoX2lzUmVhZG9ubHkgPSBmYWxzZSwgX2lzU2hhbGxvdyA9IGZhbHNlKSB7XG4gICAgdGhpcy5faXNSZWFkb25seSA9IF9pc1JlYWRvbmx5O1xuICAgIHRoaXMuX2lzU2hhbGxvdyA9IF9pc1NoYWxsb3c7XG4gIH1cbiAgZ2V0KHRhcmdldCwga2V5LCByZWNlaXZlcikge1xuICAgIGNvbnN0IGlzUmVhZG9ubHkyID0gdGhpcy5faXNSZWFkb25seSwgaXNTaGFsbG93MiA9IHRoaXMuX2lzU2hhbGxvdztcbiAgICBpZiAoa2V5ID09PSBcIl9fdl9pc1JlYWN0aXZlXCIpIHtcbiAgICAgIHJldHVybiAhaXNSZWFkb25seTI7XG4gICAgfSBlbHNlIGlmIChrZXkgPT09IFwiX192X2lzUmVhZG9ubHlcIikge1xuICAgICAgcmV0dXJuIGlzUmVhZG9ubHkyO1xuICAgIH0gZWxzZSBpZiAoa2V5ID09PSBcIl9fdl9pc1NoYWxsb3dcIikge1xuICAgICAgcmV0dXJuIGlzU2hhbGxvdzI7XG4gICAgfSBlbHNlIGlmIChrZXkgPT09IFwiX192X3Jhd1wiKSB7XG4gICAgICBpZiAocmVjZWl2ZXIgPT09IChpc1JlYWRvbmx5MiA/IGlzU2hhbGxvdzIgPyBzaGFsbG93UmVhZG9ubHlNYXAgOiByZWFkb25seU1hcCA6IGlzU2hhbGxvdzIgPyBzaGFsbG93UmVhY3RpdmVNYXAgOiByZWFjdGl2ZU1hcCkuZ2V0KHRhcmdldCkgfHwgLy8gcmVjZWl2ZXIgaXMgbm90IHRoZSByZWFjdGl2ZSBwcm94eSwgYnV0IGhhcyB0aGUgc2FtZSBwcm90b3R5cGVcbiAgICAgIC8vIHRoaXMgbWVhbnMgdGhlIHJlY2lldmVyIGlzIGEgdXNlciBwcm94eSBvZiB0aGUgcmVhY3RpdmUgcHJveHlcbiAgICAgIE9iamVjdC5nZXRQcm90b3R5cGVPZih0YXJnZXQpID09PSBPYmplY3QuZ2V0UHJvdG90eXBlT2YocmVjZWl2ZXIpKSB7XG4gICAgICAgIHJldHVybiB0YXJnZXQ7XG4gICAgICB9XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IHRhcmdldElzQXJyYXkgPSBpc0FycmF5KHRhcmdldCk7XG4gICAgaWYgKCFpc1JlYWRvbmx5Mikge1xuICAgICAgaWYgKHRhcmdldElzQXJyYXkgJiYgaGFzT3duKGFycmF5SW5zdHJ1bWVudGF0aW9ucywga2V5KSkge1xuICAgICAgICByZXR1cm4gUmVmbGVjdC5nZXQoYXJyYXlJbnN0cnVtZW50YXRpb25zLCBrZXksIHJlY2VpdmVyKTtcbiAgICAgIH1cbiAgICAgIGlmIChrZXkgPT09IFwiaGFzT3duUHJvcGVydHlcIikge1xuICAgICAgICByZXR1cm4gaGFzT3duUHJvcGVydHk7XG4gICAgICB9XG4gICAgfVxuICAgIGNvbnN0IHJlcyA9IFJlZmxlY3QuZ2V0KHRhcmdldCwga2V5LCByZWNlaXZlcik7XG4gICAgaWYgKGlzU3ltYm9sKGtleSkgPyBidWlsdEluU3ltYm9scy5oYXMoa2V5KSA6IGlzTm9uVHJhY2thYmxlS2V5cyhrZXkpKSB7XG4gICAgICByZXR1cm4gcmVzO1xuICAgIH1cbiAgICBpZiAoIWlzUmVhZG9ubHkyKSB7XG4gICAgICB0cmFjayh0YXJnZXQsIFwiZ2V0XCIsIGtleSk7XG4gICAgfVxuICAgIGlmIChpc1NoYWxsb3cyKSB7XG4gICAgICByZXR1cm4gcmVzO1xuICAgIH1cbiAgICBpZiAoaXNSZWYocmVzKSkge1xuICAgICAgcmV0dXJuIHRhcmdldElzQXJyYXkgJiYgaXNJbnRlZ2VyS2V5KGtleSkgPyByZXMgOiByZXMudmFsdWU7XG4gICAgfVxuICAgIGlmIChpc09iamVjdChyZXMpKSB7XG4gICAgICByZXR1cm4gaXNSZWFkb25seTIgPyByZWFkb25seShyZXMpIDogcmVhY3RpdmUocmVzKTtcbiAgICB9XG4gICAgcmV0dXJuIHJlcztcbiAgfVxufVxuY2xhc3MgTXV0YWJsZVJlYWN0aXZlSGFuZGxlciBleHRlbmRzIEJhc2VSZWFjdGl2ZUhhbmRsZXIge1xuICBjb25zdHJ1Y3Rvcihpc1NoYWxsb3cyID0gZmFsc2UpIHtcbiAgICBzdXBlcihmYWxzZSwgaXNTaGFsbG93Mik7XG4gIH1cbiAgc2V0KHRhcmdldCwga2V5LCB2YWx1ZSwgcmVjZWl2ZXIpIHtcbiAgICBsZXQgb2xkVmFsdWUgPSB0YXJnZXRba2V5XTtcbiAgICBpZiAoIXRoaXMuX2lzU2hhbGxvdykge1xuICAgICAgY29uc3QgaXNPbGRWYWx1ZVJlYWRvbmx5ID0gaXNSZWFkb25seShvbGRWYWx1ZSk7XG4gICAgICBpZiAoIWlzU2hhbGxvdyh2YWx1ZSkgJiYgIWlzUmVhZG9ubHkodmFsdWUpKSB7XG4gICAgICAgIG9sZFZhbHVlID0gdG9SYXcob2xkVmFsdWUpO1xuICAgICAgICB2YWx1ZSA9IHRvUmF3KHZhbHVlKTtcbiAgICAgIH1cbiAgICAgIGlmICghaXNBcnJheSh0YXJnZXQpICYmIGlzUmVmKG9sZFZhbHVlKSAmJiAhaXNSZWYodmFsdWUpKSB7XG4gICAgICAgIGlmIChpc09sZFZhbHVlUmVhZG9ubHkpIHtcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgb2xkVmFsdWUudmFsdWUgPSB2YWx1ZTtcbiAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBjb25zdCBoYWRLZXkgPSBpc0FycmF5KHRhcmdldCkgJiYgaXNJbnRlZ2VyS2V5KGtleSkgPyBOdW1iZXIoa2V5KSA8IHRhcmdldC5sZW5ndGggOiBoYXNPd24odGFyZ2V0LCBrZXkpO1xuICAgIGNvbnN0IHJlc3VsdCA9IFJlZmxlY3Quc2V0KHRhcmdldCwga2V5LCB2YWx1ZSwgcmVjZWl2ZXIpO1xuICAgIGlmICh0YXJnZXQgPT09IHRvUmF3KHJlY2VpdmVyKSkge1xuICAgICAgaWYgKCFoYWRLZXkpIHtcbiAgICAgICAgdHJpZ2dlcih0YXJnZXQsIFwiYWRkXCIsIGtleSwgdmFsdWUpO1xuICAgICAgfSBlbHNlIGlmIChoYXNDaGFuZ2VkKHZhbHVlLCBvbGRWYWx1ZSkpIHtcbiAgICAgICAgdHJpZ2dlcih0YXJnZXQsIFwic2V0XCIsIGtleSwgdmFsdWUsIG9sZFZhbHVlKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuICBkZWxldGVQcm9wZXJ0eSh0YXJnZXQsIGtleSkge1xuICAgIGNvbnN0IGhhZEtleSA9IGhhc093bih0YXJnZXQsIGtleSk7XG4gICAgY29uc3Qgb2xkVmFsdWUgPSB0YXJnZXRba2V5XTtcbiAgICBjb25zdCByZXN1bHQgPSBSZWZsZWN0LmRlbGV0ZVByb3BlcnR5KHRhcmdldCwga2V5KTtcbiAgICBpZiAocmVzdWx0ICYmIGhhZEtleSkge1xuICAgICAgdHJpZ2dlcih0YXJnZXQsIFwiZGVsZXRlXCIsIGtleSwgdm9pZCAwLCBvbGRWYWx1ZSk7XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cbiAgaGFzKHRhcmdldCwga2V5KSB7XG4gICAgY29uc3QgcmVzdWx0ID0gUmVmbGVjdC5oYXModGFyZ2V0LCBrZXkpO1xuICAgIGlmICghaXNTeW1ib2woa2V5KSB8fCAhYnVpbHRJblN5bWJvbHMuaGFzKGtleSkpIHtcbiAgICAgIHRyYWNrKHRhcmdldCwgXCJoYXNcIiwga2V5KTtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuICBvd25LZXlzKHRhcmdldCkge1xuICAgIHRyYWNrKFxuICAgICAgdGFyZ2V0LFxuICAgICAgXCJpdGVyYXRlXCIsXG4gICAgICBpc0FycmF5KHRhcmdldCkgPyBcImxlbmd0aFwiIDogSVRFUkFURV9LRVlcbiAgICApO1xuICAgIHJldHVybiBSZWZsZWN0Lm93bktleXModGFyZ2V0KTtcbiAgfVxufVxuY2xhc3MgUmVhZG9ubHlSZWFjdGl2ZUhhbmRsZXIgZXh0ZW5kcyBCYXNlUmVhY3RpdmVIYW5kbGVyIHtcbiAgY29uc3RydWN0b3IoaXNTaGFsbG93MiA9IGZhbHNlKSB7XG4gICAgc3VwZXIodHJ1ZSwgaXNTaGFsbG93Mik7XG4gIH1cbiAgc2V0KHRhcmdldCwga2V5KSB7XG4gICAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikpIHtcbiAgICAgIHdhcm4oXG4gICAgICAgIGBTZXQgb3BlcmF0aW9uIG9uIGtleSBcIiR7U3RyaW5nKGtleSl9XCIgZmFpbGVkOiB0YXJnZXQgaXMgcmVhZG9ubHkuYCxcbiAgICAgICAgdGFyZ2V0XG4gICAgICApO1xuICAgIH1cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuICBkZWxldGVQcm9wZXJ0eSh0YXJnZXQsIGtleSkge1xuICAgIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpKSB7XG4gICAgICB3YXJuKFxuICAgICAgICBgRGVsZXRlIG9wZXJhdGlvbiBvbiBrZXkgXCIke1N0cmluZyhrZXkpfVwiIGZhaWxlZDogdGFyZ2V0IGlzIHJlYWRvbmx5LmAsXG4gICAgICAgIHRhcmdldFxuICAgICAgKTtcbiAgICB9XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbn1cbmNvbnN0IG11dGFibGVIYW5kbGVycyA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgTXV0YWJsZVJlYWN0aXZlSGFuZGxlcigpO1xuY29uc3QgcmVhZG9ubHlIYW5kbGVycyA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgUmVhZG9ubHlSZWFjdGl2ZUhhbmRsZXIoKTtcbmNvbnN0IHNoYWxsb3dSZWFjdGl2ZUhhbmRsZXJzID0gLyogQF9fUFVSRV9fICovIG5ldyBNdXRhYmxlUmVhY3RpdmVIYW5kbGVyKFxuICB0cnVlXG4pO1xuY29uc3Qgc2hhbGxvd1JlYWRvbmx5SGFuZGxlcnMgPSAvKiBAX19QVVJFX18gKi8gbmV3IFJlYWRvbmx5UmVhY3RpdmVIYW5kbGVyKHRydWUpO1xuXG5jb25zdCB0b1NoYWxsb3cgPSAodmFsdWUpID0+IHZhbHVlO1xuY29uc3QgZ2V0UHJvdG8gPSAodikgPT4gUmVmbGVjdC5nZXRQcm90b3R5cGVPZih2KTtcbmZ1bmN0aW9uIGdldCh0YXJnZXQsIGtleSwgaXNSZWFkb25seSA9IGZhbHNlLCBpc1NoYWxsb3cgPSBmYWxzZSkge1xuICB0YXJnZXQgPSB0YXJnZXRbXCJfX3ZfcmF3XCJdO1xuICBjb25zdCByYXdUYXJnZXQgPSB0b1Jhdyh0YXJnZXQpO1xuICBjb25zdCByYXdLZXkgPSB0b1JhdyhrZXkpO1xuICBpZiAoIWlzUmVhZG9ubHkpIHtcbiAgICBpZiAoaGFzQ2hhbmdlZChrZXksIHJhd0tleSkpIHtcbiAgICAgIHRyYWNrKHJhd1RhcmdldCwgXCJnZXRcIiwga2V5KTtcbiAgICB9XG4gICAgdHJhY2socmF3VGFyZ2V0LCBcImdldFwiLCByYXdLZXkpO1xuICB9XG4gIGNvbnN0IHsgaGFzOiBoYXMyIH0gPSBnZXRQcm90byhyYXdUYXJnZXQpO1xuICBjb25zdCB3cmFwID0gaXNTaGFsbG93ID8gdG9TaGFsbG93IDogaXNSZWFkb25seSA/IHRvUmVhZG9ubHkgOiB0b1JlYWN0aXZlO1xuICBpZiAoaGFzMi5jYWxsKHJhd1RhcmdldCwga2V5KSkge1xuICAgIHJldHVybiB3cmFwKHRhcmdldC5nZXQoa2V5KSk7XG4gIH0gZWxzZSBpZiAoaGFzMi5jYWxsKHJhd1RhcmdldCwgcmF3S2V5KSkge1xuICAgIHJldHVybiB3cmFwKHRhcmdldC5nZXQocmF3S2V5KSk7XG4gIH0gZWxzZSBpZiAodGFyZ2V0ICE9PSByYXdUYXJnZXQpIHtcbiAgICB0YXJnZXQuZ2V0KGtleSk7XG4gIH1cbn1cbmZ1bmN0aW9uIGhhcyhrZXksIGlzUmVhZG9ubHkgPSBmYWxzZSkge1xuICBjb25zdCB0YXJnZXQgPSB0aGlzW1wiX192X3Jhd1wiXTtcbiAgY29uc3QgcmF3VGFyZ2V0ID0gdG9SYXcodGFyZ2V0KTtcbiAgY29uc3QgcmF3S2V5ID0gdG9SYXcoa2V5KTtcbiAgaWYgKCFpc1JlYWRvbmx5KSB7XG4gICAgaWYgKGhhc0NoYW5nZWQoa2V5LCByYXdLZXkpKSB7XG4gICAgICB0cmFjayhyYXdUYXJnZXQsIFwiaGFzXCIsIGtleSk7XG4gICAgfVxuICAgIHRyYWNrKHJhd1RhcmdldCwgXCJoYXNcIiwgcmF3S2V5KTtcbiAgfVxuICByZXR1cm4ga2V5ID09PSByYXdLZXkgPyB0YXJnZXQuaGFzKGtleSkgOiB0YXJnZXQuaGFzKGtleSkgfHwgdGFyZ2V0LmhhcyhyYXdLZXkpO1xufVxuZnVuY3Rpb24gc2l6ZSh0YXJnZXQsIGlzUmVhZG9ubHkgPSBmYWxzZSkge1xuICB0YXJnZXQgPSB0YXJnZXRbXCJfX3ZfcmF3XCJdO1xuICAhaXNSZWFkb25seSAmJiB0cmFjayh0b1Jhdyh0YXJnZXQpLCBcIml0ZXJhdGVcIiwgSVRFUkFURV9LRVkpO1xuICByZXR1cm4gUmVmbGVjdC5nZXQodGFyZ2V0LCBcInNpemVcIiwgdGFyZ2V0KTtcbn1cbmZ1bmN0aW9uIGFkZCh2YWx1ZSkge1xuICB2YWx1ZSA9IHRvUmF3KHZhbHVlKTtcbiAgY29uc3QgdGFyZ2V0ID0gdG9SYXcodGhpcyk7XG4gIGNvbnN0IHByb3RvID0gZ2V0UHJvdG8odGFyZ2V0KTtcbiAgY29uc3QgaGFkS2V5ID0gcHJvdG8uaGFzLmNhbGwodGFyZ2V0LCB2YWx1ZSk7XG4gIGlmICghaGFkS2V5KSB7XG4gICAgdGFyZ2V0LmFkZCh2YWx1ZSk7XG4gICAgdHJpZ2dlcih0YXJnZXQsIFwiYWRkXCIsIHZhbHVlLCB2YWx1ZSk7XG4gIH1cbiAgcmV0dXJuIHRoaXM7XG59XG5mdW5jdGlvbiBzZXQoa2V5LCB2YWx1ZSkge1xuICB2YWx1ZSA9IHRvUmF3KHZhbHVlKTtcbiAgY29uc3QgdGFyZ2V0ID0gdG9SYXcodGhpcyk7XG4gIGNvbnN0IHsgaGFzOiBoYXMyLCBnZXQ6IGdldDIgfSA9IGdldFByb3RvKHRhcmdldCk7XG4gIGxldCBoYWRLZXkgPSBoYXMyLmNhbGwodGFyZ2V0LCBrZXkpO1xuICBpZiAoIWhhZEtleSkge1xuICAgIGtleSA9IHRvUmF3KGtleSk7XG4gICAgaGFkS2V5ID0gaGFzMi5jYWxsKHRhcmdldCwga2V5KTtcbiAgfSBlbHNlIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpKSB7XG4gICAgY2hlY2tJZGVudGl0eUtleXModGFyZ2V0LCBoYXMyLCBrZXkpO1xuICB9XG4gIGNvbnN0IG9sZFZhbHVlID0gZ2V0Mi5jYWxsKHRhcmdldCwga2V5KTtcbiAgdGFyZ2V0LnNldChrZXksIHZhbHVlKTtcbiAgaWYgKCFoYWRLZXkpIHtcbiAgICB0cmlnZ2VyKHRhcmdldCwgXCJhZGRcIiwga2V5LCB2YWx1ZSk7XG4gIH0gZWxzZSBpZiAoaGFzQ2hhbmdlZCh2YWx1ZSwgb2xkVmFsdWUpKSB7XG4gICAgdHJpZ2dlcih0YXJnZXQsIFwic2V0XCIsIGtleSwgdmFsdWUsIG9sZFZhbHVlKTtcbiAgfVxuICByZXR1cm4gdGhpcztcbn1cbmZ1bmN0aW9uIGRlbGV0ZUVudHJ5KGtleSkge1xuICBjb25zdCB0YXJnZXQgPSB0b1Jhdyh0aGlzKTtcbiAgY29uc3QgeyBoYXM6IGhhczIsIGdldDogZ2V0MiB9ID0gZ2V0UHJvdG8odGFyZ2V0KTtcbiAgbGV0IGhhZEtleSA9IGhhczIuY2FsbCh0YXJnZXQsIGtleSk7XG4gIGlmICghaGFkS2V5KSB7XG4gICAga2V5ID0gdG9SYXcoa2V5KTtcbiAgICBoYWRLZXkgPSBoYXMyLmNhbGwodGFyZ2V0LCBrZXkpO1xuICB9IGVsc2UgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikpIHtcbiAgICBjaGVja0lkZW50aXR5S2V5cyh0YXJnZXQsIGhhczIsIGtleSk7XG4gIH1cbiAgY29uc3Qgb2xkVmFsdWUgPSBnZXQyID8gZ2V0Mi5jYWxsKHRhcmdldCwga2V5KSA6IHZvaWQgMDtcbiAgY29uc3QgcmVzdWx0ID0gdGFyZ2V0LmRlbGV0ZShrZXkpO1xuICBpZiAoaGFkS2V5KSB7XG4gICAgdHJpZ2dlcih0YXJnZXQsIFwiZGVsZXRlXCIsIGtleSwgdm9pZCAwLCBvbGRWYWx1ZSk7XG4gIH1cbiAgcmV0dXJuIHJlc3VsdDtcbn1cbmZ1bmN0aW9uIGNsZWFyKCkge1xuICBjb25zdCB0YXJnZXQgPSB0b1Jhdyh0aGlzKTtcbiAgY29uc3QgaGFkSXRlbXMgPSB0YXJnZXQuc2l6ZSAhPT0gMDtcbiAgY29uc3Qgb2xkVGFyZ2V0ID0gISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSA/IGlzTWFwKHRhcmdldCkgPyBuZXcgTWFwKHRhcmdldCkgOiBuZXcgU2V0KHRhcmdldCkgOiB2b2lkIDA7XG4gIGNvbnN0IHJlc3VsdCA9IHRhcmdldC5jbGVhcigpO1xuICBpZiAoaGFkSXRlbXMpIHtcbiAgICB0cmlnZ2VyKHRhcmdldCwgXCJjbGVhclwiLCB2b2lkIDAsIHZvaWQgMCwgb2xkVGFyZ2V0KTtcbiAgfVxuICByZXR1cm4gcmVzdWx0O1xufVxuZnVuY3Rpb24gY3JlYXRlRm9yRWFjaChpc1JlYWRvbmx5LCBpc1NoYWxsb3cpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uIGZvckVhY2goY2FsbGJhY2ssIHRoaXNBcmcpIHtcbiAgICBjb25zdCBvYnNlcnZlZCA9IHRoaXM7XG4gICAgY29uc3QgdGFyZ2V0ID0gb2JzZXJ2ZWRbXCJfX3ZfcmF3XCJdO1xuICAgIGNvbnN0IHJhd1RhcmdldCA9IHRvUmF3KHRhcmdldCk7XG4gICAgY29uc3Qgd3JhcCA9IGlzU2hhbGxvdyA/IHRvU2hhbGxvdyA6IGlzUmVhZG9ubHkgPyB0b1JlYWRvbmx5IDogdG9SZWFjdGl2ZTtcbiAgICAhaXNSZWFkb25seSAmJiB0cmFjayhyYXdUYXJnZXQsIFwiaXRlcmF0ZVwiLCBJVEVSQVRFX0tFWSk7XG4gICAgcmV0dXJuIHRhcmdldC5mb3JFYWNoKCh2YWx1ZSwga2V5KSA9PiB7XG4gICAgICByZXR1cm4gY2FsbGJhY2suY2FsbCh0aGlzQXJnLCB3cmFwKHZhbHVlKSwgd3JhcChrZXkpLCBvYnNlcnZlZCk7XG4gICAgfSk7XG4gIH07XG59XG5mdW5jdGlvbiBjcmVhdGVJdGVyYWJsZU1ldGhvZChtZXRob2QsIGlzUmVhZG9ubHksIGlzU2hhbGxvdykge1xuICByZXR1cm4gZnVuY3Rpb24oLi4uYXJncykge1xuICAgIGNvbnN0IHRhcmdldCA9IHRoaXNbXCJfX3ZfcmF3XCJdO1xuICAgIGNvbnN0IHJhd1RhcmdldCA9IHRvUmF3KHRhcmdldCk7XG4gICAgY29uc3QgdGFyZ2V0SXNNYXAgPSBpc01hcChyYXdUYXJnZXQpO1xuICAgIGNvbnN0IGlzUGFpciA9IG1ldGhvZCA9PT0gXCJlbnRyaWVzXCIgfHwgbWV0aG9kID09PSBTeW1ib2wuaXRlcmF0b3IgJiYgdGFyZ2V0SXNNYXA7XG4gICAgY29uc3QgaXNLZXlPbmx5ID0gbWV0aG9kID09PSBcImtleXNcIiAmJiB0YXJnZXRJc01hcDtcbiAgICBjb25zdCBpbm5lckl0ZXJhdG9yID0gdGFyZ2V0W21ldGhvZF0oLi4uYXJncyk7XG4gICAgY29uc3Qgd3JhcCA9IGlzU2hhbGxvdyA/IHRvU2hhbGxvdyA6IGlzUmVhZG9ubHkgPyB0b1JlYWRvbmx5IDogdG9SZWFjdGl2ZTtcbiAgICAhaXNSZWFkb25seSAmJiB0cmFjayhcbiAgICAgIHJhd1RhcmdldCxcbiAgICAgIFwiaXRlcmF0ZVwiLFxuICAgICAgaXNLZXlPbmx5ID8gTUFQX0tFWV9JVEVSQVRFX0tFWSA6IElURVJBVEVfS0VZXG4gICAgKTtcbiAgICByZXR1cm4ge1xuICAgICAgLy8gaXRlcmF0b3IgcHJvdG9jb2xcbiAgICAgIG5leHQoKSB7XG4gICAgICAgIGNvbnN0IHsgdmFsdWUsIGRvbmUgfSA9IGlubmVySXRlcmF0b3IubmV4dCgpO1xuICAgICAgICByZXR1cm4gZG9uZSA/IHsgdmFsdWUsIGRvbmUgfSA6IHtcbiAgICAgICAgICB2YWx1ZTogaXNQYWlyID8gW3dyYXAodmFsdWVbMF0pLCB3cmFwKHZhbHVlWzFdKV0gOiB3cmFwKHZhbHVlKSxcbiAgICAgICAgICBkb25lXG4gICAgICAgIH07XG4gICAgICB9LFxuICAgICAgLy8gaXRlcmFibGUgcHJvdG9jb2xcbiAgICAgIFtTeW1ib2wuaXRlcmF0b3JdKCkge1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgIH1cbiAgICB9O1xuICB9O1xufVxuZnVuY3Rpb24gY3JlYXRlUmVhZG9ubHlNZXRob2QodHlwZSkge1xuICByZXR1cm4gZnVuY3Rpb24oLi4uYXJncykge1xuICAgIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpKSB7XG4gICAgICBjb25zdCBrZXkgPSBhcmdzWzBdID8gYG9uIGtleSBcIiR7YXJnc1swXX1cIiBgIDogYGA7XG4gICAgICB3YXJuKFxuICAgICAgICBgJHtjYXBpdGFsaXplKHR5cGUpfSBvcGVyYXRpb24gJHtrZXl9ZmFpbGVkOiB0YXJnZXQgaXMgcmVhZG9ubHkuYCxcbiAgICAgICAgdG9SYXcodGhpcylcbiAgICAgICk7XG4gICAgfVxuICAgIHJldHVybiB0eXBlID09PSBcImRlbGV0ZVwiID8gZmFsc2UgOiB0eXBlID09PSBcImNsZWFyXCIgPyB2b2lkIDAgOiB0aGlzO1xuICB9O1xufVxuZnVuY3Rpb24gY3JlYXRlSW5zdHJ1bWVudGF0aW9ucygpIHtcbiAgY29uc3QgbXV0YWJsZUluc3RydW1lbnRhdGlvbnMyID0ge1xuICAgIGdldChrZXkpIHtcbiAgICAgIHJldHVybiBnZXQodGhpcywga2V5KTtcbiAgICB9LFxuICAgIGdldCBzaXplKCkge1xuICAgICAgcmV0dXJuIHNpemUodGhpcyk7XG4gICAgfSxcbiAgICBoYXMsXG4gICAgYWRkLFxuICAgIHNldCxcbiAgICBkZWxldGU6IGRlbGV0ZUVudHJ5LFxuICAgIGNsZWFyLFxuICAgIGZvckVhY2g6IGNyZWF0ZUZvckVhY2goZmFsc2UsIGZhbHNlKVxuICB9O1xuICBjb25zdCBzaGFsbG93SW5zdHJ1bWVudGF0aW9uczIgPSB7XG4gICAgZ2V0KGtleSkge1xuICAgICAgcmV0dXJuIGdldCh0aGlzLCBrZXksIGZhbHNlLCB0cnVlKTtcbiAgICB9LFxuICAgIGdldCBzaXplKCkge1xuICAgICAgcmV0dXJuIHNpemUodGhpcyk7XG4gICAgfSxcbiAgICBoYXMsXG4gICAgYWRkLFxuICAgIHNldCxcbiAgICBkZWxldGU6IGRlbGV0ZUVudHJ5LFxuICAgIGNsZWFyLFxuICAgIGZvckVhY2g6IGNyZWF0ZUZvckVhY2goZmFsc2UsIHRydWUpXG4gIH07XG4gIGNvbnN0IHJlYWRvbmx5SW5zdHJ1bWVudGF0aW9uczIgPSB7XG4gICAgZ2V0KGtleSkge1xuICAgICAgcmV0dXJuIGdldCh0aGlzLCBrZXksIHRydWUpO1xuICAgIH0sXG4gICAgZ2V0IHNpemUoKSB7XG4gICAgICByZXR1cm4gc2l6ZSh0aGlzLCB0cnVlKTtcbiAgICB9LFxuICAgIGhhcyhrZXkpIHtcbiAgICAgIHJldHVybiBoYXMuY2FsbCh0aGlzLCBrZXksIHRydWUpO1xuICAgIH0sXG4gICAgYWRkOiBjcmVhdGVSZWFkb25seU1ldGhvZChcImFkZFwiKSxcbiAgICBzZXQ6IGNyZWF0ZVJlYWRvbmx5TWV0aG9kKFwic2V0XCIpLFxuICAgIGRlbGV0ZTogY3JlYXRlUmVhZG9ubHlNZXRob2QoXCJkZWxldGVcIiksXG4gICAgY2xlYXI6IGNyZWF0ZVJlYWRvbmx5TWV0aG9kKFwiY2xlYXJcIiksXG4gICAgZm9yRWFjaDogY3JlYXRlRm9yRWFjaCh0cnVlLCBmYWxzZSlcbiAgfTtcbiAgY29uc3Qgc2hhbGxvd1JlYWRvbmx5SW5zdHJ1bWVudGF0aW9uczIgPSB7XG4gICAgZ2V0KGtleSkge1xuICAgICAgcmV0dXJuIGdldCh0aGlzLCBrZXksIHRydWUsIHRydWUpO1xuICAgIH0sXG4gICAgZ2V0IHNpemUoKSB7XG4gICAgICByZXR1cm4gc2l6ZSh0aGlzLCB0cnVlKTtcbiAgICB9LFxuICAgIGhhcyhrZXkpIHtcbiAgICAgIHJldHVybiBoYXMuY2FsbCh0aGlzLCBrZXksIHRydWUpO1xuICAgIH0sXG4gICAgYWRkOiBjcmVhdGVSZWFkb25seU1ldGhvZChcImFkZFwiKSxcbiAgICBzZXQ6IGNyZWF0ZVJlYWRvbmx5TWV0aG9kKFwic2V0XCIpLFxuICAgIGRlbGV0ZTogY3JlYXRlUmVhZG9ubHlNZXRob2QoXCJkZWxldGVcIiksXG4gICAgY2xlYXI6IGNyZWF0ZVJlYWRvbmx5TWV0aG9kKFwiY2xlYXJcIiksXG4gICAgZm9yRWFjaDogY3JlYXRlRm9yRWFjaCh0cnVlLCB0cnVlKVxuICB9O1xuICBjb25zdCBpdGVyYXRvck1ldGhvZHMgPSBbXCJrZXlzXCIsIFwidmFsdWVzXCIsIFwiZW50cmllc1wiLCBTeW1ib2wuaXRlcmF0b3JdO1xuICBpdGVyYXRvck1ldGhvZHMuZm9yRWFjaCgobWV0aG9kKSA9PiB7XG4gICAgbXV0YWJsZUluc3RydW1lbnRhdGlvbnMyW21ldGhvZF0gPSBjcmVhdGVJdGVyYWJsZU1ldGhvZChcbiAgICAgIG1ldGhvZCxcbiAgICAgIGZhbHNlLFxuICAgICAgZmFsc2VcbiAgICApO1xuICAgIHJlYWRvbmx5SW5zdHJ1bWVudGF0aW9uczJbbWV0aG9kXSA9IGNyZWF0ZUl0ZXJhYmxlTWV0aG9kKFxuICAgICAgbWV0aG9kLFxuICAgICAgdHJ1ZSxcbiAgICAgIGZhbHNlXG4gICAgKTtcbiAgICBzaGFsbG93SW5zdHJ1bWVudGF0aW9uczJbbWV0aG9kXSA9IGNyZWF0ZUl0ZXJhYmxlTWV0aG9kKFxuICAgICAgbWV0aG9kLFxuICAgICAgZmFsc2UsXG4gICAgICB0cnVlXG4gICAgKTtcbiAgICBzaGFsbG93UmVhZG9ubHlJbnN0cnVtZW50YXRpb25zMlttZXRob2RdID0gY3JlYXRlSXRlcmFibGVNZXRob2QoXG4gICAgICBtZXRob2QsXG4gICAgICB0cnVlLFxuICAgICAgdHJ1ZVxuICAgICk7XG4gIH0pO1xuICByZXR1cm4gW1xuICAgIG11dGFibGVJbnN0cnVtZW50YXRpb25zMixcbiAgICByZWFkb25seUluc3RydW1lbnRhdGlvbnMyLFxuICAgIHNoYWxsb3dJbnN0cnVtZW50YXRpb25zMixcbiAgICBzaGFsbG93UmVhZG9ubHlJbnN0cnVtZW50YXRpb25zMlxuICBdO1xufVxuY29uc3QgW1xuICBtdXRhYmxlSW5zdHJ1bWVudGF0aW9ucyxcbiAgcmVhZG9ubHlJbnN0cnVtZW50YXRpb25zLFxuICBzaGFsbG93SW5zdHJ1bWVudGF0aW9ucyxcbiAgc2hhbGxvd1JlYWRvbmx5SW5zdHJ1bWVudGF0aW9uc1xuXSA9IC8qIEBfX1BVUkVfXyAqLyBjcmVhdGVJbnN0cnVtZW50YXRpb25zKCk7XG5mdW5jdGlvbiBjcmVhdGVJbnN0cnVtZW50YXRpb25HZXR0ZXIoaXNSZWFkb25seSwgc2hhbGxvdykge1xuICBjb25zdCBpbnN0cnVtZW50YXRpb25zID0gc2hhbGxvdyA/IGlzUmVhZG9ubHkgPyBzaGFsbG93UmVhZG9ubHlJbnN0cnVtZW50YXRpb25zIDogc2hhbGxvd0luc3RydW1lbnRhdGlvbnMgOiBpc1JlYWRvbmx5ID8gcmVhZG9ubHlJbnN0cnVtZW50YXRpb25zIDogbXV0YWJsZUluc3RydW1lbnRhdGlvbnM7XG4gIHJldHVybiAodGFyZ2V0LCBrZXksIHJlY2VpdmVyKSA9PiB7XG4gICAgaWYgKGtleSA9PT0gXCJfX3ZfaXNSZWFjdGl2ZVwiKSB7XG4gICAgICByZXR1cm4gIWlzUmVhZG9ubHk7XG4gICAgfSBlbHNlIGlmIChrZXkgPT09IFwiX192X2lzUmVhZG9ubHlcIikge1xuICAgICAgcmV0dXJuIGlzUmVhZG9ubHk7XG4gICAgfSBlbHNlIGlmIChrZXkgPT09IFwiX192X3Jhd1wiKSB7XG4gICAgICByZXR1cm4gdGFyZ2V0O1xuICAgIH1cbiAgICByZXR1cm4gUmVmbGVjdC5nZXQoXG4gICAgICBoYXNPd24oaW5zdHJ1bWVudGF0aW9ucywga2V5KSAmJiBrZXkgaW4gdGFyZ2V0ID8gaW5zdHJ1bWVudGF0aW9ucyA6IHRhcmdldCxcbiAgICAgIGtleSxcbiAgICAgIHJlY2VpdmVyXG4gICAgKTtcbiAgfTtcbn1cbmNvbnN0IG11dGFibGVDb2xsZWN0aW9uSGFuZGxlcnMgPSB7XG4gIGdldDogLyogQF9fUFVSRV9fICovIGNyZWF0ZUluc3RydW1lbnRhdGlvbkdldHRlcihmYWxzZSwgZmFsc2UpXG59O1xuY29uc3Qgc2hhbGxvd0NvbGxlY3Rpb25IYW5kbGVycyA9IHtcbiAgZ2V0OiAvKiBAX19QVVJFX18gKi8gY3JlYXRlSW5zdHJ1bWVudGF0aW9uR2V0dGVyKGZhbHNlLCB0cnVlKVxufTtcbmNvbnN0IHJlYWRvbmx5Q29sbGVjdGlvbkhhbmRsZXJzID0ge1xuICBnZXQ6IC8qIEBfX1BVUkVfXyAqLyBjcmVhdGVJbnN0cnVtZW50YXRpb25HZXR0ZXIodHJ1ZSwgZmFsc2UpXG59O1xuY29uc3Qgc2hhbGxvd1JlYWRvbmx5Q29sbGVjdGlvbkhhbmRsZXJzID0ge1xuICBnZXQ6IC8qIEBfX1BVUkVfXyAqLyBjcmVhdGVJbnN0cnVtZW50YXRpb25HZXR0ZXIodHJ1ZSwgdHJ1ZSlcbn07XG5mdW5jdGlvbiBjaGVja0lkZW50aXR5S2V5cyh0YXJnZXQsIGhhczIsIGtleSkge1xuICBjb25zdCByYXdLZXkgPSB0b1JhdyhrZXkpO1xuICBpZiAocmF3S2V5ICE9PSBrZXkgJiYgaGFzMi5jYWxsKHRhcmdldCwgcmF3S2V5KSkge1xuICAgIGNvbnN0IHR5cGUgPSB0b1Jhd1R5cGUodGFyZ2V0KTtcbiAgICB3YXJuKFxuICAgICAgYFJlYWN0aXZlICR7dHlwZX0gY29udGFpbnMgYm90aCB0aGUgcmF3IGFuZCByZWFjdGl2ZSB2ZXJzaW9ucyBvZiB0aGUgc2FtZSBvYmplY3Qke3R5cGUgPT09IGBNYXBgID8gYCBhcyBrZXlzYCA6IGBgfSwgd2hpY2ggY2FuIGxlYWQgdG8gaW5jb25zaXN0ZW5jaWVzLiBBdm9pZCBkaWZmZXJlbnRpYXRpbmcgYmV0d2VlbiB0aGUgcmF3IGFuZCByZWFjdGl2ZSB2ZXJzaW9ucyBvZiBhbiBvYmplY3QgYW5kIG9ubHkgdXNlIHRoZSByZWFjdGl2ZSB2ZXJzaW9uIGlmIHBvc3NpYmxlLmBcbiAgICApO1xuICB9XG59XG5cbmNvbnN0IHJlYWN0aXZlTWFwID0gLyogQF9fUFVSRV9fICovIG5ldyBXZWFrTWFwKCk7XG5jb25zdCBzaGFsbG93UmVhY3RpdmVNYXAgPSAvKiBAX19QVVJFX18gKi8gbmV3IFdlYWtNYXAoKTtcbmNvbnN0IHJlYWRvbmx5TWFwID0gLyogQF9fUFVSRV9fICovIG5ldyBXZWFrTWFwKCk7XG5jb25zdCBzaGFsbG93UmVhZG9ubHlNYXAgPSAvKiBAX19QVVJFX18gKi8gbmV3IFdlYWtNYXAoKTtcbmZ1bmN0aW9uIHRhcmdldFR5cGVNYXAocmF3VHlwZSkge1xuICBzd2l0Y2ggKHJhd1R5cGUpIHtcbiAgICBjYXNlIFwiT2JqZWN0XCI6XG4gICAgY2FzZSBcIkFycmF5XCI6XG4gICAgICByZXR1cm4gMSAvKiBDT01NT04gKi87XG4gICAgY2FzZSBcIk1hcFwiOlxuICAgIGNhc2UgXCJTZXRcIjpcbiAgICBjYXNlIFwiV2Vha01hcFwiOlxuICAgIGNhc2UgXCJXZWFrU2V0XCI6XG4gICAgICByZXR1cm4gMiAvKiBDT0xMRUNUSU9OICovO1xuICAgIGRlZmF1bHQ6XG4gICAgICByZXR1cm4gMCAvKiBJTlZBTElEICovO1xuICB9XG59XG5mdW5jdGlvbiBnZXRUYXJnZXRUeXBlKHZhbHVlKSB7XG4gIHJldHVybiB2YWx1ZVtcIl9fdl9za2lwXCJdIHx8ICFPYmplY3QuaXNFeHRlbnNpYmxlKHZhbHVlKSA/IDAgLyogSU5WQUxJRCAqLyA6IHRhcmdldFR5cGVNYXAodG9SYXdUeXBlKHZhbHVlKSk7XG59XG5mdW5jdGlvbiByZWFjdGl2ZSh0YXJnZXQpIHtcbiAgaWYgKGlzUmVhZG9ubHkodGFyZ2V0KSkge1xuICAgIHJldHVybiB0YXJnZXQ7XG4gIH1cbiAgcmV0dXJuIGNyZWF0ZVJlYWN0aXZlT2JqZWN0KFxuICAgIHRhcmdldCxcbiAgICBmYWxzZSxcbiAgICBtdXRhYmxlSGFuZGxlcnMsXG4gICAgbXV0YWJsZUNvbGxlY3Rpb25IYW5kbGVycyxcbiAgICByZWFjdGl2ZU1hcFxuICApO1xufVxuZnVuY3Rpb24gc2hhbGxvd1JlYWN0aXZlKHRhcmdldCkge1xuICByZXR1cm4gY3JlYXRlUmVhY3RpdmVPYmplY3QoXG4gICAgdGFyZ2V0LFxuICAgIGZhbHNlLFxuICAgIHNoYWxsb3dSZWFjdGl2ZUhhbmRsZXJzLFxuICAgIHNoYWxsb3dDb2xsZWN0aW9uSGFuZGxlcnMsXG4gICAgc2hhbGxvd1JlYWN0aXZlTWFwXG4gICk7XG59XG5mdW5jdGlvbiByZWFkb25seSh0YXJnZXQpIHtcbiAgcmV0dXJuIGNyZWF0ZVJlYWN0aXZlT2JqZWN0KFxuICAgIHRhcmdldCxcbiAgICB0cnVlLFxuICAgIHJlYWRvbmx5SGFuZGxlcnMsXG4gICAgcmVhZG9ubHlDb2xsZWN0aW9uSGFuZGxlcnMsXG4gICAgcmVhZG9ubHlNYXBcbiAgKTtcbn1cbmZ1bmN0aW9uIHNoYWxsb3dSZWFkb25seSh0YXJnZXQpIHtcbiAgcmV0dXJuIGNyZWF0ZVJlYWN0aXZlT2JqZWN0KFxuICAgIHRhcmdldCxcbiAgICB0cnVlLFxuICAgIHNoYWxsb3dSZWFkb25seUhhbmRsZXJzLFxuICAgIHNoYWxsb3dSZWFkb25seUNvbGxlY3Rpb25IYW5kbGVycyxcbiAgICBzaGFsbG93UmVhZG9ubHlNYXBcbiAgKTtcbn1cbmZ1bmN0aW9uIGNyZWF0ZVJlYWN0aXZlT2JqZWN0KHRhcmdldCwgaXNSZWFkb25seTIsIGJhc2VIYW5kbGVycywgY29sbGVjdGlvbkhhbmRsZXJzLCBwcm94eU1hcCkge1xuICBpZiAoIWlzT2JqZWN0KHRhcmdldCkpIHtcbiAgICBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSkge1xuICAgICAgd2FybihgdmFsdWUgY2Fubm90IGJlIG1hZGUgcmVhY3RpdmU6ICR7U3RyaW5nKHRhcmdldCl9YCk7XG4gICAgfVxuICAgIHJldHVybiB0YXJnZXQ7XG4gIH1cbiAgaWYgKHRhcmdldFtcIl9fdl9yYXdcIl0gJiYgIShpc1JlYWRvbmx5MiAmJiB0YXJnZXRbXCJfX3ZfaXNSZWFjdGl2ZVwiXSkpIHtcbiAgICByZXR1cm4gdGFyZ2V0O1xuICB9XG4gIGNvbnN0IGV4aXN0aW5nUHJveHkgPSBwcm94eU1hcC5nZXQodGFyZ2V0KTtcbiAgaWYgKGV4aXN0aW5nUHJveHkpIHtcbiAgICByZXR1cm4gZXhpc3RpbmdQcm94eTtcbiAgfVxuICBjb25zdCB0YXJnZXRUeXBlID0gZ2V0VGFyZ2V0VHlwZSh0YXJnZXQpO1xuICBpZiAodGFyZ2V0VHlwZSA9PT0gMCAvKiBJTlZBTElEICovKSB7XG4gICAgcmV0dXJuIHRhcmdldDtcbiAgfVxuICBjb25zdCBwcm94eSA9IG5ldyBQcm94eShcbiAgICB0YXJnZXQsXG4gICAgdGFyZ2V0VHlwZSA9PT0gMiAvKiBDT0xMRUNUSU9OICovID8gY29sbGVjdGlvbkhhbmRsZXJzIDogYmFzZUhhbmRsZXJzXG4gICk7XG4gIHByb3h5TWFwLnNldCh0YXJnZXQsIHByb3h5KTtcbiAgcmV0dXJuIHByb3h5O1xufVxuZnVuY3Rpb24gaXNSZWFjdGl2ZSh2YWx1ZSkge1xuICBpZiAoaXNSZWFkb25seSh2YWx1ZSkpIHtcbiAgICByZXR1cm4gaXNSZWFjdGl2ZSh2YWx1ZVtcIl9fdl9yYXdcIl0pO1xuICB9XG4gIHJldHVybiAhISh2YWx1ZSAmJiB2YWx1ZVtcIl9fdl9pc1JlYWN0aXZlXCJdKTtcbn1cbmZ1bmN0aW9uIGlzUmVhZG9ubHkodmFsdWUpIHtcbiAgcmV0dXJuICEhKHZhbHVlICYmIHZhbHVlW1wiX192X2lzUmVhZG9ubHlcIl0pO1xufVxuZnVuY3Rpb24gaXNTaGFsbG93KHZhbHVlKSB7XG4gIHJldHVybiAhISh2YWx1ZSAmJiB2YWx1ZVtcIl9fdl9pc1NoYWxsb3dcIl0pO1xufVxuZnVuY3Rpb24gaXNQcm94eSh2YWx1ZSkge1xuICByZXR1cm4gaXNSZWFjdGl2ZSh2YWx1ZSkgfHwgaXNSZWFkb25seSh2YWx1ZSk7XG59XG5mdW5jdGlvbiB0b1JhdyhvYnNlcnZlZCkge1xuICBjb25zdCByYXcgPSBvYnNlcnZlZCAmJiBvYnNlcnZlZFtcIl9fdl9yYXdcIl07XG4gIHJldHVybiByYXcgPyB0b1JhdyhyYXcpIDogb2JzZXJ2ZWQ7XG59XG5mdW5jdGlvbiBtYXJrUmF3KHZhbHVlKSB7XG4gIGlmIChPYmplY3QuaXNFeHRlbnNpYmxlKHZhbHVlKSkge1xuICAgIGRlZih2YWx1ZSwgXCJfX3Zfc2tpcFwiLCB0cnVlKTtcbiAgfVxuICByZXR1cm4gdmFsdWU7XG59XG5jb25zdCB0b1JlYWN0aXZlID0gKHZhbHVlKSA9PiBpc09iamVjdCh2YWx1ZSkgPyByZWFjdGl2ZSh2YWx1ZSkgOiB2YWx1ZTtcbmNvbnN0IHRvUmVhZG9ubHkgPSAodmFsdWUpID0+IGlzT2JqZWN0KHZhbHVlKSA/IHJlYWRvbmx5KHZhbHVlKSA6IHZhbHVlO1xuXG5jb25zdCBDT01QVVRFRF9TSURFX0VGRkVDVF9XQVJOID0gYENvbXB1dGVkIGlzIHN0aWxsIGRpcnR5IGFmdGVyIGdldHRlciBldmFsdWF0aW9uLCBsaWtlbHkgYmVjYXVzZSBhIGNvbXB1dGVkIGlzIG11dGF0aW5nIGl0cyBvd24gZGVwZW5kZW5jeSBpbiBpdHMgZ2V0dGVyLiBTdGF0ZSBtdXRhdGlvbnMgaW4gY29tcHV0ZWQgZ2V0dGVycyBzaG91bGQgYmUgYXZvaWRlZC4gIENoZWNrIHRoZSBkb2NzIGZvciBtb3JlIGRldGFpbHM6IGh0dHBzOi8vdnVlanMub3JnL2d1aWRlL2Vzc2VudGlhbHMvY29tcHV0ZWQuaHRtbCNnZXR0ZXJzLXNob3VsZC1iZS1zaWRlLWVmZmVjdC1mcmVlYDtcbmNsYXNzIENvbXB1dGVkUmVmSW1wbCB7XG4gIGNvbnN0cnVjdG9yKGdldHRlciwgX3NldHRlciwgaXNSZWFkb25seSwgaXNTU1IpIHtcbiAgICB0aGlzLmdldHRlciA9IGdldHRlcjtcbiAgICB0aGlzLl9zZXR0ZXIgPSBfc2V0dGVyO1xuICAgIHRoaXMuZGVwID0gdm9pZCAwO1xuICAgIHRoaXMuX192X2lzUmVmID0gdHJ1ZTtcbiAgICB0aGlzW1wiX192X2lzUmVhZG9ubHlcIl0gPSBmYWxzZTtcbiAgICB0aGlzLmVmZmVjdCA9IG5ldyBSZWFjdGl2ZUVmZmVjdChcbiAgICAgICgpID0+IGdldHRlcih0aGlzLl92YWx1ZSksXG4gICAgICAoKSA9PiB0cmlnZ2VyUmVmVmFsdWUoXG4gICAgICAgIHRoaXMsXG4gICAgICAgIHRoaXMuZWZmZWN0Ll9kaXJ0eUxldmVsID09PSAyID8gMiA6IDNcbiAgICAgIClcbiAgICApO1xuICAgIHRoaXMuZWZmZWN0LmNvbXB1dGVkID0gdGhpcztcbiAgICB0aGlzLmVmZmVjdC5hY3RpdmUgPSB0aGlzLl9jYWNoZWFibGUgPSAhaXNTU1I7XG4gICAgdGhpc1tcIl9fdl9pc1JlYWRvbmx5XCJdID0gaXNSZWFkb25seTtcbiAgfVxuICBnZXQgdmFsdWUoKSB7XG4gICAgY29uc3Qgc2VsZiA9IHRvUmF3KHRoaXMpO1xuICAgIGlmICgoIXNlbGYuX2NhY2hlYWJsZSB8fCBzZWxmLmVmZmVjdC5kaXJ0eSkgJiYgaGFzQ2hhbmdlZChzZWxmLl92YWx1ZSwgc2VsZi5fdmFsdWUgPSBzZWxmLmVmZmVjdC5ydW4oKSkpIHtcbiAgICAgIHRyaWdnZXJSZWZWYWx1ZShzZWxmLCA0KTtcbiAgICB9XG4gICAgdHJhY2tSZWZWYWx1ZShzZWxmKTtcbiAgICBpZiAoc2VsZi5lZmZlY3QuX2RpcnR5TGV2ZWwgPj0gMikge1xuICAgICAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgJiYgdGhpcy5fd2FyblJlY3Vyc2l2ZSkge1xuICAgICAgICB3YXJuKENPTVBVVEVEX1NJREVfRUZGRUNUX1dBUk4sIGBcblxuZ2V0dGVyOiBgLCB0aGlzLmdldHRlcik7XG4gICAgICB9XG4gICAgICB0cmlnZ2VyUmVmVmFsdWUoc2VsZiwgMik7XG4gICAgfVxuICAgIHJldHVybiBzZWxmLl92YWx1ZTtcbiAgfVxuICBzZXQgdmFsdWUobmV3VmFsdWUpIHtcbiAgICB0aGlzLl9zZXR0ZXIobmV3VmFsdWUpO1xuICB9XG4gIC8vICNyZWdpb24gcG9seWZpbGwgX2RpcnR5IGZvciBiYWNrd2FyZCBjb21wYXRpYmlsaXR5IHRoaXJkIHBhcnR5IGNvZGUgZm9yIFZ1ZSA8PSAzLjMueFxuICBnZXQgX2RpcnR5KCkge1xuICAgIHJldHVybiB0aGlzLmVmZmVjdC5kaXJ0eTtcbiAgfVxuICBzZXQgX2RpcnR5KHYpIHtcbiAgICB0aGlzLmVmZmVjdC5kaXJ0eSA9IHY7XG4gIH1cbiAgLy8gI2VuZHJlZ2lvblxufVxuZnVuY3Rpb24gY29tcHV0ZWQoZ2V0dGVyT3JPcHRpb25zLCBkZWJ1Z09wdGlvbnMsIGlzU1NSID0gZmFsc2UpIHtcbiAgbGV0IGdldHRlcjtcbiAgbGV0IHNldHRlcjtcbiAgY29uc3Qgb25seUdldHRlciA9IGlzRnVuY3Rpb24oZ2V0dGVyT3JPcHRpb25zKTtcbiAgaWYgKG9ubHlHZXR0ZXIpIHtcbiAgICBnZXR0ZXIgPSBnZXR0ZXJPck9wdGlvbnM7XG4gICAgc2V0dGVyID0gISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSA/ICgpID0+IHtcbiAgICAgIHdhcm4oXCJXcml0ZSBvcGVyYXRpb24gZmFpbGVkOiBjb21wdXRlZCB2YWx1ZSBpcyByZWFkb25seVwiKTtcbiAgICB9IDogTk9PUDtcbiAgfSBlbHNlIHtcbiAgICBnZXR0ZXIgPSBnZXR0ZXJPck9wdGlvbnMuZ2V0O1xuICAgIHNldHRlciA9IGdldHRlck9yT3B0aW9ucy5zZXQ7XG4gIH1cbiAgY29uc3QgY1JlZiA9IG5ldyBDb21wdXRlZFJlZkltcGwoZ2V0dGVyLCBzZXR0ZXIsIG9ubHlHZXR0ZXIgfHwgIXNldHRlciwgaXNTU1IpO1xuICBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSAmJiBkZWJ1Z09wdGlvbnMgJiYgIWlzU1NSKSB7XG4gICAgY1JlZi5lZmZlY3Qub25UcmFjayA9IGRlYnVnT3B0aW9ucy5vblRyYWNrO1xuICAgIGNSZWYuZWZmZWN0Lm9uVHJpZ2dlciA9IGRlYnVnT3B0aW9ucy5vblRyaWdnZXI7XG4gIH1cbiAgcmV0dXJuIGNSZWY7XG59XG5cbmZ1bmN0aW9uIHRyYWNrUmVmVmFsdWUocmVmMikge1xuICB2YXIgX2E7XG4gIGlmIChzaG91bGRUcmFjayAmJiBhY3RpdmVFZmZlY3QpIHtcbiAgICByZWYyID0gdG9SYXcocmVmMik7XG4gICAgdHJhY2tFZmZlY3QoXG4gICAgICBhY3RpdmVFZmZlY3QsXG4gICAgICAoX2EgPSByZWYyLmRlcCkgIT0gbnVsbCA/IF9hIDogcmVmMi5kZXAgPSBjcmVhdGVEZXAoXG4gICAgICAgICgpID0+IHJlZjIuZGVwID0gdm9pZCAwLFxuICAgICAgICByZWYyIGluc3RhbmNlb2YgQ29tcHV0ZWRSZWZJbXBsID8gcmVmMiA6IHZvaWQgMFxuICAgICAgKSxcbiAgICAgICEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgPyB7XG4gICAgICAgIHRhcmdldDogcmVmMixcbiAgICAgICAgdHlwZTogXCJnZXRcIixcbiAgICAgICAga2V5OiBcInZhbHVlXCJcbiAgICAgIH0gOiB2b2lkIDBcbiAgICApO1xuICB9XG59XG5mdW5jdGlvbiB0cmlnZ2VyUmVmVmFsdWUocmVmMiwgZGlydHlMZXZlbCA9IDQsIG5ld1ZhbCkge1xuICByZWYyID0gdG9SYXcocmVmMik7XG4gIGNvbnN0IGRlcCA9IHJlZjIuZGVwO1xuICBpZiAoZGVwKSB7XG4gICAgdHJpZ2dlckVmZmVjdHMoXG4gICAgICBkZXAsXG4gICAgICBkaXJ0eUxldmVsLFxuICAgICAgISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSA/IHtcbiAgICAgICAgdGFyZ2V0OiByZWYyLFxuICAgICAgICB0eXBlOiBcInNldFwiLFxuICAgICAgICBrZXk6IFwidmFsdWVcIixcbiAgICAgICAgbmV3VmFsdWU6IG5ld1ZhbFxuICAgICAgfSA6IHZvaWQgMFxuICAgICk7XG4gIH1cbn1cbmZ1bmN0aW9uIGlzUmVmKHIpIHtcbiAgcmV0dXJuICEhKHIgJiYgci5fX3ZfaXNSZWYgPT09IHRydWUpO1xufVxuZnVuY3Rpb24gcmVmKHZhbHVlKSB7XG4gIHJldHVybiBjcmVhdGVSZWYodmFsdWUsIGZhbHNlKTtcbn1cbmZ1bmN0aW9uIHNoYWxsb3dSZWYodmFsdWUpIHtcbiAgcmV0dXJuIGNyZWF0ZVJlZih2YWx1ZSwgdHJ1ZSk7XG59XG5mdW5jdGlvbiBjcmVhdGVSZWYocmF3VmFsdWUsIHNoYWxsb3cpIHtcbiAgaWYgKGlzUmVmKHJhd1ZhbHVlKSkge1xuICAgIHJldHVybiByYXdWYWx1ZTtcbiAgfVxuICByZXR1cm4gbmV3IFJlZkltcGwocmF3VmFsdWUsIHNoYWxsb3cpO1xufVxuY2xhc3MgUmVmSW1wbCB7XG4gIGNvbnN0cnVjdG9yKHZhbHVlLCBfX3ZfaXNTaGFsbG93KSB7XG4gICAgdGhpcy5fX3ZfaXNTaGFsbG93ID0gX192X2lzU2hhbGxvdztcbiAgICB0aGlzLmRlcCA9IHZvaWQgMDtcbiAgICB0aGlzLl9fdl9pc1JlZiA9IHRydWU7XG4gICAgdGhpcy5fcmF3VmFsdWUgPSBfX3ZfaXNTaGFsbG93ID8gdmFsdWUgOiB0b1Jhdyh2YWx1ZSk7XG4gICAgdGhpcy5fdmFsdWUgPSBfX3ZfaXNTaGFsbG93ID8gdmFsdWUgOiB0b1JlYWN0aXZlKHZhbHVlKTtcbiAgfVxuICBnZXQgdmFsdWUoKSB7XG4gICAgdHJhY2tSZWZWYWx1ZSh0aGlzKTtcbiAgICByZXR1cm4gdGhpcy5fdmFsdWU7XG4gIH1cbiAgc2V0IHZhbHVlKG5ld1ZhbCkge1xuICAgIGNvbnN0IHVzZURpcmVjdFZhbHVlID0gdGhpcy5fX3ZfaXNTaGFsbG93IHx8IGlzU2hhbGxvdyhuZXdWYWwpIHx8IGlzUmVhZG9ubHkobmV3VmFsKTtcbiAgICBuZXdWYWwgPSB1c2VEaXJlY3RWYWx1ZSA/IG5ld1ZhbCA6IHRvUmF3KG5ld1ZhbCk7XG4gICAgaWYgKGhhc0NoYW5nZWQobmV3VmFsLCB0aGlzLl9yYXdWYWx1ZSkpIHtcbiAgICAgIHRoaXMuX3Jhd1ZhbHVlID0gbmV3VmFsO1xuICAgICAgdGhpcy5fdmFsdWUgPSB1c2VEaXJlY3RWYWx1ZSA/IG5ld1ZhbCA6IHRvUmVhY3RpdmUobmV3VmFsKTtcbiAgICAgIHRyaWdnZXJSZWZWYWx1ZSh0aGlzLCA0LCBuZXdWYWwpO1xuICAgIH1cbiAgfVxufVxuZnVuY3Rpb24gdHJpZ2dlclJlZihyZWYyKSB7XG4gIHRyaWdnZXJSZWZWYWx1ZShyZWYyLCA0LCAhIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpID8gcmVmMi52YWx1ZSA6IHZvaWQgMCk7XG59XG5mdW5jdGlvbiB1bnJlZihyZWYyKSB7XG4gIHJldHVybiBpc1JlZihyZWYyKSA/IHJlZjIudmFsdWUgOiByZWYyO1xufVxuZnVuY3Rpb24gdG9WYWx1ZShzb3VyY2UpIHtcbiAgcmV0dXJuIGlzRnVuY3Rpb24oc291cmNlKSA/IHNvdXJjZSgpIDogdW5yZWYoc291cmNlKTtcbn1cbmNvbnN0IHNoYWxsb3dVbndyYXBIYW5kbGVycyA9IHtcbiAgZ2V0OiAodGFyZ2V0LCBrZXksIHJlY2VpdmVyKSA9PiB1bnJlZihSZWZsZWN0LmdldCh0YXJnZXQsIGtleSwgcmVjZWl2ZXIpKSxcbiAgc2V0OiAodGFyZ2V0LCBrZXksIHZhbHVlLCByZWNlaXZlcikgPT4ge1xuICAgIGNvbnN0IG9sZFZhbHVlID0gdGFyZ2V0W2tleV07XG4gICAgaWYgKGlzUmVmKG9sZFZhbHVlKSAmJiAhaXNSZWYodmFsdWUpKSB7XG4gICAgICBvbGRWYWx1ZS52YWx1ZSA9IHZhbHVlO1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBSZWZsZWN0LnNldCh0YXJnZXQsIGtleSwgdmFsdWUsIHJlY2VpdmVyKTtcbiAgICB9XG4gIH1cbn07XG5mdW5jdGlvbiBwcm94eVJlZnMob2JqZWN0V2l0aFJlZnMpIHtcbiAgcmV0dXJuIGlzUmVhY3RpdmUob2JqZWN0V2l0aFJlZnMpID8gb2JqZWN0V2l0aFJlZnMgOiBuZXcgUHJveHkob2JqZWN0V2l0aFJlZnMsIHNoYWxsb3dVbndyYXBIYW5kbGVycyk7XG59XG5jbGFzcyBDdXN0b21SZWZJbXBsIHtcbiAgY29uc3RydWN0b3IoZmFjdG9yeSkge1xuICAgIHRoaXMuZGVwID0gdm9pZCAwO1xuICAgIHRoaXMuX192X2lzUmVmID0gdHJ1ZTtcbiAgICBjb25zdCB7IGdldCwgc2V0IH0gPSBmYWN0b3J5KFxuICAgICAgKCkgPT4gdHJhY2tSZWZWYWx1ZSh0aGlzKSxcbiAgICAgICgpID0+IHRyaWdnZXJSZWZWYWx1ZSh0aGlzKVxuICAgICk7XG4gICAgdGhpcy5fZ2V0ID0gZ2V0O1xuICAgIHRoaXMuX3NldCA9IHNldDtcbiAgfVxuICBnZXQgdmFsdWUoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2dldCgpO1xuICB9XG4gIHNldCB2YWx1ZShuZXdWYWwpIHtcbiAgICB0aGlzLl9zZXQobmV3VmFsKTtcbiAgfVxufVxuZnVuY3Rpb24gY3VzdG9tUmVmKGZhY3RvcnkpIHtcbiAgcmV0dXJuIG5ldyBDdXN0b21SZWZJbXBsKGZhY3RvcnkpO1xufVxuZnVuY3Rpb24gdG9SZWZzKG9iamVjdCkge1xuICBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSAmJiAhaXNQcm94eShvYmplY3QpKSB7XG4gICAgd2FybihgdG9SZWZzKCkgZXhwZWN0cyBhIHJlYWN0aXZlIG9iamVjdCBidXQgcmVjZWl2ZWQgYSBwbGFpbiBvbmUuYCk7XG4gIH1cbiAgY29uc3QgcmV0ID0gaXNBcnJheShvYmplY3QpID8gbmV3IEFycmF5KG9iamVjdC5sZW5ndGgpIDoge307XG4gIGZvciAoY29uc3Qga2V5IGluIG9iamVjdCkge1xuICAgIHJldFtrZXldID0gcHJvcGVydHlUb1JlZihvYmplY3QsIGtleSk7XG4gIH1cbiAgcmV0dXJuIHJldDtcbn1cbmNsYXNzIE9iamVjdFJlZkltcGwge1xuICBjb25zdHJ1Y3Rvcihfb2JqZWN0LCBfa2V5LCBfZGVmYXVsdFZhbHVlKSB7XG4gICAgdGhpcy5fb2JqZWN0ID0gX29iamVjdDtcbiAgICB0aGlzLl9rZXkgPSBfa2V5O1xuICAgIHRoaXMuX2RlZmF1bHRWYWx1ZSA9IF9kZWZhdWx0VmFsdWU7XG4gICAgdGhpcy5fX3ZfaXNSZWYgPSB0cnVlO1xuICB9XG4gIGdldCB2YWx1ZSgpIHtcbiAgICBjb25zdCB2YWwgPSB0aGlzLl9vYmplY3RbdGhpcy5fa2V5XTtcbiAgICByZXR1cm4gdmFsID09PSB2b2lkIDAgPyB0aGlzLl9kZWZhdWx0VmFsdWUgOiB2YWw7XG4gIH1cbiAgc2V0IHZhbHVlKG5ld1ZhbCkge1xuICAgIHRoaXMuX29iamVjdFt0aGlzLl9rZXldID0gbmV3VmFsO1xuICB9XG4gIGdldCBkZXAoKSB7XG4gICAgcmV0dXJuIGdldERlcEZyb21SZWFjdGl2ZSh0b1Jhdyh0aGlzLl9vYmplY3QpLCB0aGlzLl9rZXkpO1xuICB9XG59XG5jbGFzcyBHZXR0ZXJSZWZJbXBsIHtcbiAgY29uc3RydWN0b3IoX2dldHRlcikge1xuICAgIHRoaXMuX2dldHRlciA9IF9nZXR0ZXI7XG4gICAgdGhpcy5fX3ZfaXNSZWYgPSB0cnVlO1xuICAgIHRoaXMuX192X2lzUmVhZG9ubHkgPSB0cnVlO1xuICB9XG4gIGdldCB2YWx1ZSgpIHtcbiAgICByZXR1cm4gdGhpcy5fZ2V0dGVyKCk7XG4gIH1cbn1cbmZ1bmN0aW9uIHRvUmVmKHNvdXJjZSwga2V5LCBkZWZhdWx0VmFsdWUpIHtcbiAgaWYgKGlzUmVmKHNvdXJjZSkpIHtcbiAgICByZXR1cm4gc291cmNlO1xuICB9IGVsc2UgaWYgKGlzRnVuY3Rpb24oc291cmNlKSkge1xuICAgIHJldHVybiBuZXcgR2V0dGVyUmVmSW1wbChzb3VyY2UpO1xuICB9IGVsc2UgaWYgKGlzT2JqZWN0KHNvdXJjZSkgJiYgYXJndW1lbnRzLmxlbmd0aCA+IDEpIHtcbiAgICByZXR1cm4gcHJvcGVydHlUb1JlZihzb3VyY2UsIGtleSwgZGVmYXVsdFZhbHVlKTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gcmVmKHNvdXJjZSk7XG4gIH1cbn1cbmZ1bmN0aW9uIHByb3BlcnR5VG9SZWYoc291cmNlLCBrZXksIGRlZmF1bHRWYWx1ZSkge1xuICBjb25zdCB2YWwgPSBzb3VyY2Vba2V5XTtcbiAgcmV0dXJuIGlzUmVmKHZhbCkgPyB2YWwgOiBuZXcgT2JqZWN0UmVmSW1wbChzb3VyY2UsIGtleSwgZGVmYXVsdFZhbHVlKTtcbn1cblxuY29uc3QgZGVmZXJyZWRDb21wdXRlZCA9IGNvbXB1dGVkO1xuXG5jb25zdCBUcmFja09wVHlwZXMgPSB7XG4gIFwiR0VUXCI6IFwiZ2V0XCIsXG4gIFwiSEFTXCI6IFwiaGFzXCIsXG4gIFwiSVRFUkFURVwiOiBcIml0ZXJhdGVcIlxufTtcbmNvbnN0IFRyaWdnZXJPcFR5cGVzID0ge1xuICBcIlNFVFwiOiBcInNldFwiLFxuICBcIkFERFwiOiBcImFkZFwiLFxuICBcIkRFTEVURVwiOiBcImRlbGV0ZVwiLFxuICBcIkNMRUFSXCI6IFwiY2xlYXJcIlxufTtcbmNvbnN0IFJlYWN0aXZlRmxhZ3MgPSB7XG4gIFwiU0tJUFwiOiBcIl9fdl9za2lwXCIsXG4gIFwiSVNfUkVBQ1RJVkVcIjogXCJfX3ZfaXNSZWFjdGl2ZVwiLFxuICBcIklTX1JFQURPTkxZXCI6IFwiX192X2lzUmVhZG9ubHlcIixcbiAgXCJJU19TSEFMTE9XXCI6IFwiX192X2lzU2hhbGxvd1wiLFxuICBcIlJBV1wiOiBcIl9fdl9yYXdcIlxufTtcblxuZXhwb3J0IHsgRWZmZWN0U2NvcGUsIElURVJBVEVfS0VZLCBSZWFjdGl2ZUVmZmVjdCwgUmVhY3RpdmVGbGFncywgVHJhY2tPcFR5cGVzLCBUcmlnZ2VyT3BUeXBlcywgY29tcHV0ZWQsIGN1c3RvbVJlZiwgZGVmZXJyZWRDb21wdXRlZCwgZWZmZWN0LCBlZmZlY3RTY29wZSwgZW5hYmxlVHJhY2tpbmcsIGdldEN1cnJlbnRTY29wZSwgaXNQcm94eSwgaXNSZWFjdGl2ZSwgaXNSZWFkb25seSwgaXNSZWYsIGlzU2hhbGxvdywgbWFya1Jhdywgb25TY29wZURpc3Bvc2UsIHBhdXNlU2NoZWR1bGluZywgcGF1c2VUcmFja2luZywgcHJveHlSZWZzLCByZWFjdGl2ZSwgcmVhZG9ubHksIHJlZiwgcmVzZXRTY2hlZHVsaW5nLCByZXNldFRyYWNraW5nLCBzaGFsbG93UmVhY3RpdmUsIHNoYWxsb3dSZWFkb25seSwgc2hhbGxvd1JlZiwgc3RvcCwgdG9SYXcsIHRvUmVmLCB0b1JlZnMsIHRvVmFsdWUsIHRyYWNrLCB0cmlnZ2VyLCB0cmlnZ2VyUmVmLCB1bnJlZiB9O1xuIiwiLyoqXG4qIEB2dWUvcnVudGltZS1jb3JlIHYzLjQuMjFcbiogKGMpIDIwMTgtcHJlc2VudCBZdXhpIChFdmFuKSBZb3UgYW5kIFZ1ZSBjb250cmlidXRvcnNcbiogQGxpY2Vuc2UgTUlUXG4qKi9cbmltcG9ydCB7IHBhdXNlVHJhY2tpbmcsIHJlc2V0VHJhY2tpbmcsIGlzUmVmLCB0b1JhdywgaXNTaGFsbG93LCBpc1JlYWN0aXZlLCBSZWFjdGl2ZUVmZmVjdCwgZ2V0Q3VycmVudFNjb3BlLCByZWYsIHNoYWxsb3dSZWFkb25seSwgdHJhY2ssIHJlYWN0aXZlLCBzaGFsbG93UmVhY3RpdmUsIHRyaWdnZXIsIGlzUHJveHksIHByb3h5UmVmcywgbWFya1JhdywgRWZmZWN0U2NvcGUsIGNvbXB1dGVkIGFzIGNvbXB1dGVkJDEsIGN1c3RvbVJlZiwgaXNSZWFkb25seSB9IGZyb20gJ0B2dWUvcmVhY3Rpdml0eSc7XG5leHBvcnQgeyBFZmZlY3RTY29wZSwgUmVhY3RpdmVFZmZlY3QsIFRyYWNrT3BUeXBlcywgVHJpZ2dlck9wVHlwZXMsIGN1c3RvbVJlZiwgZWZmZWN0LCBlZmZlY3RTY29wZSwgZ2V0Q3VycmVudFNjb3BlLCBpc1Byb3h5LCBpc1JlYWN0aXZlLCBpc1JlYWRvbmx5LCBpc1JlZiwgaXNTaGFsbG93LCBtYXJrUmF3LCBvblNjb3BlRGlzcG9zZSwgcHJveHlSZWZzLCByZWFjdGl2ZSwgcmVhZG9ubHksIHJlZiwgc2hhbGxvd1JlYWN0aXZlLCBzaGFsbG93UmVhZG9ubHksIHNoYWxsb3dSZWYsIHN0b3AsIHRvUmF3LCB0b1JlZiwgdG9SZWZzLCB0b1ZhbHVlLCB0cmlnZ2VyUmVmLCB1bnJlZiB9IGZyb20gJ0B2dWUvcmVhY3Rpdml0eSc7XG5pbXBvcnQgeyBpc1N0cmluZywgaXNGdW5jdGlvbiwgaXNQcm9taXNlLCBpc0FycmF5LCBOT09QLCBnZXRHbG9iYWxUaGlzLCBleHRlbmQsIEVNUFRZX09CSiwgdG9IYW5kbGVyS2V5LCBsb29zZVRvTnVtYmVyLCBoeXBoZW5hdGUsIGNhbWVsaXplLCBpc09iamVjdCwgaXNPbiwgaGFzT3duLCBpc01vZGVsTGlzdGVuZXIsIGNhcGl0YWxpemUsIHRvTnVtYmVyLCBoYXNDaGFuZ2VkLCByZW1vdmUsIGlzU2V0LCBpc01hcCwgaXNQbGFpbk9iamVjdCwgaXNCdWlsdEluRGlyZWN0aXZlLCBpbnZva2VBcnJheUZucywgaXNSZWdFeHAsIGlzR2xvYmFsbHlBbGxvd2VkLCBOTywgZGVmLCBpc1Jlc2VydmVkUHJvcCwgRU1QVFlfQVJSLCB0b1Jhd1R5cGUsIG1ha2VNYXAsIG5vcm1hbGl6ZUNsYXNzLCBzdHJpbmdpZnlTdHlsZSwgbm9ybWFsaXplU3R5bGUsIGlzS25vd25TdmdBdHRyLCBpc0Jvb2xlYW5BdHRyLCBpc0tub3duSHRtbEF0dHIsIGluY2x1ZGVCb29sZWFuQXR0ciwgaXNSZW5kZXJhYmxlQXR0clZhbHVlIH0gZnJvbSAnQHZ1ZS9zaGFyZWQnO1xuZXhwb3J0IHsgY2FtZWxpemUsIGNhcGl0YWxpemUsIG5vcm1hbGl6ZUNsYXNzLCBub3JtYWxpemVQcm9wcywgbm9ybWFsaXplU3R5bGUsIHRvRGlzcGxheVN0cmluZywgdG9IYW5kbGVyS2V5IH0gZnJvbSAnQHZ1ZS9zaGFyZWQnO1xuXG5jb25zdCBzdGFjayA9IFtdO1xuZnVuY3Rpb24gcHVzaFdhcm5pbmdDb250ZXh0KHZub2RlKSB7XG4gIHN0YWNrLnB1c2godm5vZGUpO1xufVxuZnVuY3Rpb24gcG9wV2FybmluZ0NvbnRleHQoKSB7XG4gIHN0YWNrLnBvcCgpO1xufVxuZnVuY3Rpb24gd2FybiQxKG1zZywgLi4uYXJncykge1xuICBwYXVzZVRyYWNraW5nKCk7XG4gIGNvbnN0IGluc3RhbmNlID0gc3RhY2subGVuZ3RoID8gc3RhY2tbc3RhY2subGVuZ3RoIC0gMV0uY29tcG9uZW50IDogbnVsbDtcbiAgY29uc3QgYXBwV2FybkhhbmRsZXIgPSBpbnN0YW5jZSAmJiBpbnN0YW5jZS5hcHBDb250ZXh0LmNvbmZpZy53YXJuSGFuZGxlcjtcbiAgY29uc3QgdHJhY2UgPSBnZXRDb21wb25lbnRUcmFjZSgpO1xuICBpZiAoYXBwV2FybkhhbmRsZXIpIHtcbiAgICBjYWxsV2l0aEVycm9ySGFuZGxpbmcoXG4gICAgICBhcHBXYXJuSGFuZGxlcixcbiAgICAgIGluc3RhbmNlLFxuICAgICAgMTEsXG4gICAgICBbXG4gICAgICAgIG1zZyArIGFyZ3MubWFwKChhKSA9PiB7XG4gICAgICAgICAgdmFyIF9hLCBfYjtcbiAgICAgICAgICByZXR1cm4gKF9iID0gKF9hID0gYS50b1N0cmluZykgPT0gbnVsbCA/IHZvaWQgMCA6IF9hLmNhbGwoYSkpICE9IG51bGwgPyBfYiA6IEpTT04uc3RyaW5naWZ5KGEpO1xuICAgICAgICB9KS5qb2luKFwiXCIpLFxuICAgICAgICBpbnN0YW5jZSAmJiBpbnN0YW5jZS5wcm94eSxcbiAgICAgICAgdHJhY2UubWFwKFxuICAgICAgICAgICh7IHZub2RlIH0pID0+IGBhdCA8JHtmb3JtYXRDb21wb25lbnROYW1lKGluc3RhbmNlLCB2bm9kZS50eXBlKX0+YFxuICAgICAgICApLmpvaW4oXCJcXG5cIiksXG4gICAgICAgIHRyYWNlXG4gICAgICBdXG4gICAgKTtcbiAgfSBlbHNlIHtcbiAgICBjb25zdCB3YXJuQXJncyA9IFtgW1Z1ZSB3YXJuXTogJHttc2d9YCwgLi4uYXJnc107XG4gICAgaWYgKHRyYWNlLmxlbmd0aCAmJiAvLyBhdm9pZCBzcGFtbWluZyBjb25zb2xlIGR1cmluZyB0ZXN0c1xuICAgIHRydWUpIHtcbiAgICAgIHdhcm5BcmdzLnB1c2goYFxuYCwgLi4uZm9ybWF0VHJhY2UodHJhY2UpKTtcbiAgICB9XG4gICAgY29uc29sZS53YXJuKC4uLndhcm5BcmdzKTtcbiAgfVxuICByZXNldFRyYWNraW5nKCk7XG59XG5mdW5jdGlvbiBnZXRDb21wb25lbnRUcmFjZSgpIHtcbiAgbGV0IGN1cnJlbnRWTm9kZSA9IHN0YWNrW3N0YWNrLmxlbmd0aCAtIDFdO1xuICBpZiAoIWN1cnJlbnRWTm9kZSkge1xuICAgIHJldHVybiBbXTtcbiAgfVxuICBjb25zdCBub3JtYWxpemVkU3RhY2sgPSBbXTtcbiAgd2hpbGUgKGN1cnJlbnRWTm9kZSkge1xuICAgIGNvbnN0IGxhc3QgPSBub3JtYWxpemVkU3RhY2tbMF07XG4gICAgaWYgKGxhc3QgJiYgbGFzdC52bm9kZSA9PT0gY3VycmVudFZOb2RlKSB7XG4gICAgICBsYXN0LnJlY3Vyc2VDb3VudCsrO1xuICAgIH0gZWxzZSB7XG4gICAgICBub3JtYWxpemVkU3RhY2sucHVzaCh7XG4gICAgICAgIHZub2RlOiBjdXJyZW50Vk5vZGUsXG4gICAgICAgIHJlY3Vyc2VDb3VudDogMFxuICAgICAgfSk7XG4gICAgfVxuICAgIGNvbnN0IHBhcmVudEluc3RhbmNlID0gY3VycmVudFZOb2RlLmNvbXBvbmVudCAmJiBjdXJyZW50Vk5vZGUuY29tcG9uZW50LnBhcmVudDtcbiAgICBjdXJyZW50Vk5vZGUgPSBwYXJlbnRJbnN0YW5jZSAmJiBwYXJlbnRJbnN0YW5jZS52bm9kZTtcbiAgfVxuICByZXR1cm4gbm9ybWFsaXplZFN0YWNrO1xufVxuZnVuY3Rpb24gZm9ybWF0VHJhY2UodHJhY2UpIHtcbiAgY29uc3QgbG9ncyA9IFtdO1xuICB0cmFjZS5mb3JFYWNoKChlbnRyeSwgaSkgPT4ge1xuICAgIGxvZ3MucHVzaCguLi5pID09PSAwID8gW10gOiBbYFxuYF0sIC4uLmZvcm1hdFRyYWNlRW50cnkoZW50cnkpKTtcbiAgfSk7XG4gIHJldHVybiBsb2dzO1xufVxuZnVuY3Rpb24gZm9ybWF0VHJhY2VFbnRyeSh7IHZub2RlLCByZWN1cnNlQ291bnQgfSkge1xuICBjb25zdCBwb3N0Zml4ID0gcmVjdXJzZUNvdW50ID4gMCA/IGAuLi4gKCR7cmVjdXJzZUNvdW50fSByZWN1cnNpdmUgY2FsbHMpYCA6IGBgO1xuICBjb25zdCBpc1Jvb3QgPSB2bm9kZS5jb21wb25lbnQgPyB2bm9kZS5jb21wb25lbnQucGFyZW50ID09IG51bGwgOiBmYWxzZTtcbiAgY29uc3Qgb3BlbiA9IGAgYXQgPCR7Zm9ybWF0Q29tcG9uZW50TmFtZShcbiAgICB2bm9kZS5jb21wb25lbnQsXG4gICAgdm5vZGUudHlwZSxcbiAgICBpc1Jvb3RcbiAgKX1gO1xuICBjb25zdCBjbG9zZSA9IGA+YCArIHBvc3RmaXg7XG4gIHJldHVybiB2bm9kZS5wcm9wcyA/IFtvcGVuLCAuLi5mb3JtYXRQcm9wcyh2bm9kZS5wcm9wcyksIGNsb3NlXSA6IFtvcGVuICsgY2xvc2VdO1xufVxuZnVuY3Rpb24gZm9ybWF0UHJvcHMocHJvcHMpIHtcbiAgY29uc3QgcmVzID0gW107XG4gIGNvbnN0IGtleXMgPSBPYmplY3Qua2V5cyhwcm9wcyk7XG4gIGtleXMuc2xpY2UoMCwgMykuZm9yRWFjaCgoa2V5KSA9PiB7XG4gICAgcmVzLnB1c2goLi4uZm9ybWF0UHJvcChrZXksIHByb3BzW2tleV0pKTtcbiAgfSk7XG4gIGlmIChrZXlzLmxlbmd0aCA+IDMpIHtcbiAgICByZXMucHVzaChgIC4uLmApO1xuICB9XG4gIHJldHVybiByZXM7XG59XG5mdW5jdGlvbiBmb3JtYXRQcm9wKGtleSwgdmFsdWUsIHJhdykge1xuICBpZiAoaXNTdHJpbmcodmFsdWUpKSB7XG4gICAgdmFsdWUgPSBKU09OLnN0cmluZ2lmeSh2YWx1ZSk7XG4gICAgcmV0dXJuIHJhdyA/IHZhbHVlIDogW2Ake2tleX09JHt2YWx1ZX1gXTtcbiAgfSBlbHNlIGlmICh0eXBlb2YgdmFsdWUgPT09IFwibnVtYmVyXCIgfHwgdHlwZW9mIHZhbHVlID09PSBcImJvb2xlYW5cIiB8fCB2YWx1ZSA9PSBudWxsKSB7XG4gICAgcmV0dXJuIHJhdyA/IHZhbHVlIDogW2Ake2tleX09JHt2YWx1ZX1gXTtcbiAgfSBlbHNlIGlmIChpc1JlZih2YWx1ZSkpIHtcbiAgICB2YWx1ZSA9IGZvcm1hdFByb3Aoa2V5LCB0b1Jhdyh2YWx1ZS52YWx1ZSksIHRydWUpO1xuICAgIHJldHVybiByYXcgPyB2YWx1ZSA6IFtgJHtrZXl9PVJlZjxgLCB2YWx1ZSwgYD5gXTtcbiAgfSBlbHNlIGlmIChpc0Z1bmN0aW9uKHZhbHVlKSkge1xuICAgIHJldHVybiBbYCR7a2V5fT1mbiR7dmFsdWUubmFtZSA/IGA8JHt2YWx1ZS5uYW1lfT5gIDogYGB9YF07XG4gIH0gZWxzZSB7XG4gICAgdmFsdWUgPSB0b1Jhdyh2YWx1ZSk7XG4gICAgcmV0dXJuIHJhdyA/IHZhbHVlIDogW2Ake2tleX09YCwgdmFsdWVdO1xuICB9XG59XG5mdW5jdGlvbiBhc3NlcnROdW1iZXIodmFsLCB0eXBlKSB7XG4gIGlmICghISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSlcbiAgICByZXR1cm47XG4gIGlmICh2YWwgPT09IHZvaWQgMCkge1xuICAgIHJldHVybjtcbiAgfSBlbHNlIGlmICh0eXBlb2YgdmFsICE9PSBcIm51bWJlclwiKSB7XG4gICAgd2FybiQxKGAke3R5cGV9IGlzIG5vdCBhIHZhbGlkIG51bWJlciAtIGdvdCAke0pTT04uc3RyaW5naWZ5KHZhbCl9LmApO1xuICB9IGVsc2UgaWYgKGlzTmFOKHZhbCkpIHtcbiAgICB3YXJuJDEoYCR7dHlwZX0gaXMgTmFOIC0gdGhlIGR1cmF0aW9uIGV4cHJlc3Npb24gbWlnaHQgYmUgaW5jb3JyZWN0LmApO1xuICB9XG59XG5cbmNvbnN0IEVycm9yQ29kZXMgPSB7XG4gIFwiU0VUVVBfRlVOQ1RJT05cIjogMCxcbiAgXCIwXCI6IFwiU0VUVVBfRlVOQ1RJT05cIixcbiAgXCJSRU5ERVJfRlVOQ1RJT05cIjogMSxcbiAgXCIxXCI6IFwiUkVOREVSX0ZVTkNUSU9OXCIsXG4gIFwiV0FUQ0hfR0VUVEVSXCI6IDIsXG4gIFwiMlwiOiBcIldBVENIX0dFVFRFUlwiLFxuICBcIldBVENIX0NBTExCQUNLXCI6IDMsXG4gIFwiM1wiOiBcIldBVENIX0NBTExCQUNLXCIsXG4gIFwiV0FUQ0hfQ0xFQU5VUFwiOiA0LFxuICBcIjRcIjogXCJXQVRDSF9DTEVBTlVQXCIsXG4gIFwiTkFUSVZFX0VWRU5UX0hBTkRMRVJcIjogNSxcbiAgXCI1XCI6IFwiTkFUSVZFX0VWRU5UX0hBTkRMRVJcIixcbiAgXCJDT01QT05FTlRfRVZFTlRfSEFORExFUlwiOiA2LFxuICBcIjZcIjogXCJDT01QT05FTlRfRVZFTlRfSEFORExFUlwiLFxuICBcIlZOT0RFX0hPT0tcIjogNyxcbiAgXCI3XCI6IFwiVk5PREVfSE9PS1wiLFxuICBcIkRJUkVDVElWRV9IT09LXCI6IDgsXG4gIFwiOFwiOiBcIkRJUkVDVElWRV9IT09LXCIsXG4gIFwiVFJBTlNJVElPTl9IT09LXCI6IDksXG4gIFwiOVwiOiBcIlRSQU5TSVRJT05fSE9PS1wiLFxuICBcIkFQUF9FUlJPUl9IQU5ETEVSXCI6IDEwLFxuICBcIjEwXCI6IFwiQVBQX0VSUk9SX0hBTkRMRVJcIixcbiAgXCJBUFBfV0FSTl9IQU5ETEVSXCI6IDExLFxuICBcIjExXCI6IFwiQVBQX1dBUk5fSEFORExFUlwiLFxuICBcIkZVTkNUSU9OX1JFRlwiOiAxMixcbiAgXCIxMlwiOiBcIkZVTkNUSU9OX1JFRlwiLFxuICBcIkFTWU5DX0NPTVBPTkVOVF9MT0FERVJcIjogMTMsXG4gIFwiMTNcIjogXCJBU1lOQ19DT01QT05FTlRfTE9BREVSXCIsXG4gIFwiU0NIRURVTEVSXCI6IDE0LFxuICBcIjE0XCI6IFwiU0NIRURVTEVSXCJcbn07XG5jb25zdCBFcnJvclR5cGVTdHJpbmdzJDEgPSB7XG4gIFtcInNwXCJdOiBcInNlcnZlclByZWZldGNoIGhvb2tcIixcbiAgW1wiYmNcIl06IFwiYmVmb3JlQ3JlYXRlIGhvb2tcIixcbiAgW1wiY1wiXTogXCJjcmVhdGVkIGhvb2tcIixcbiAgW1wiYm1cIl06IFwiYmVmb3JlTW91bnQgaG9va1wiLFxuICBbXCJtXCJdOiBcIm1vdW50ZWQgaG9va1wiLFxuICBbXCJidVwiXTogXCJiZWZvcmVVcGRhdGUgaG9va1wiLFxuICBbXCJ1XCJdOiBcInVwZGF0ZWRcIixcbiAgW1wiYnVtXCJdOiBcImJlZm9yZVVubW91bnQgaG9va1wiLFxuICBbXCJ1bVwiXTogXCJ1bm1vdW50ZWQgaG9va1wiLFxuICBbXCJhXCJdOiBcImFjdGl2YXRlZCBob29rXCIsXG4gIFtcImRhXCJdOiBcImRlYWN0aXZhdGVkIGhvb2tcIixcbiAgW1wiZWNcIl06IFwiZXJyb3JDYXB0dXJlZCBob29rXCIsXG4gIFtcInJ0Y1wiXTogXCJyZW5kZXJUcmFja2VkIGhvb2tcIixcbiAgW1wicnRnXCJdOiBcInJlbmRlclRyaWdnZXJlZCBob29rXCIsXG4gIFswXTogXCJzZXR1cCBmdW5jdGlvblwiLFxuICBbMV06IFwicmVuZGVyIGZ1bmN0aW9uXCIsXG4gIFsyXTogXCJ3YXRjaGVyIGdldHRlclwiLFxuICBbM106IFwid2F0Y2hlciBjYWxsYmFja1wiLFxuICBbNF06IFwid2F0Y2hlciBjbGVhbnVwIGZ1bmN0aW9uXCIsXG4gIFs1XTogXCJuYXRpdmUgZXZlbnQgaGFuZGxlclwiLFxuICBbNl06IFwiY29tcG9uZW50IGV2ZW50IGhhbmRsZXJcIixcbiAgWzddOiBcInZub2RlIGhvb2tcIixcbiAgWzhdOiBcImRpcmVjdGl2ZSBob29rXCIsXG4gIFs5XTogXCJ0cmFuc2l0aW9uIGhvb2tcIixcbiAgWzEwXTogXCJhcHAgZXJyb3JIYW5kbGVyXCIsXG4gIFsxMV06IFwiYXBwIHdhcm5IYW5kbGVyXCIsXG4gIFsxMl06IFwicmVmIGZ1bmN0aW9uXCIsXG4gIFsxM106IFwiYXN5bmMgY29tcG9uZW50IGxvYWRlclwiLFxuICBbMTRdOiBcInNjaGVkdWxlciBmbHVzaC4gVGhpcyBpcyBsaWtlbHkgYSBWdWUgaW50ZXJuYWxzIGJ1Zy4gUGxlYXNlIG9wZW4gYW4gaXNzdWUgYXQgaHR0cHM6Ly9naXRodWIuY29tL3Z1ZWpzL2NvcmUgLlwiXG59O1xuZnVuY3Rpb24gY2FsbFdpdGhFcnJvckhhbmRsaW5nKGZuLCBpbnN0YW5jZSwgdHlwZSwgYXJncykge1xuICB0cnkge1xuICAgIHJldHVybiBhcmdzID8gZm4oLi4uYXJncykgOiBmbigpO1xuICB9IGNhdGNoIChlcnIpIHtcbiAgICBoYW5kbGVFcnJvcihlcnIsIGluc3RhbmNlLCB0eXBlKTtcbiAgfVxufVxuZnVuY3Rpb24gY2FsbFdpdGhBc3luY0Vycm9ySGFuZGxpbmcoZm4sIGluc3RhbmNlLCB0eXBlLCBhcmdzKSB7XG4gIGlmIChpc0Z1bmN0aW9uKGZuKSkge1xuICAgIGNvbnN0IHJlcyA9IGNhbGxXaXRoRXJyb3JIYW5kbGluZyhmbiwgaW5zdGFuY2UsIHR5cGUsIGFyZ3MpO1xuICAgIGlmIChyZXMgJiYgaXNQcm9taXNlKHJlcykpIHtcbiAgICAgIHJlcy5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICAgIGhhbmRsZUVycm9yKGVyciwgaW5zdGFuY2UsIHR5cGUpO1xuICAgICAgfSk7XG4gICAgfVxuICAgIHJldHVybiByZXM7XG4gIH1cbiAgY29uc3QgdmFsdWVzID0gW107XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgZm4ubGVuZ3RoOyBpKyspIHtcbiAgICB2YWx1ZXMucHVzaChjYWxsV2l0aEFzeW5jRXJyb3JIYW5kbGluZyhmbltpXSwgaW5zdGFuY2UsIHR5cGUsIGFyZ3MpKTtcbiAgfVxuICByZXR1cm4gdmFsdWVzO1xufVxuZnVuY3Rpb24gaGFuZGxlRXJyb3IoZXJyLCBpbnN0YW5jZSwgdHlwZSwgdGhyb3dJbkRldiA9IHRydWUpIHtcbiAgY29uc3QgY29udGV4dFZOb2RlID0gaW5zdGFuY2UgPyBpbnN0YW5jZS52bm9kZSA6IG51bGw7XG4gIGlmIChpbnN0YW5jZSkge1xuICAgIGxldCBjdXIgPSBpbnN0YW5jZS5wYXJlbnQ7XG4gICAgY29uc3QgZXhwb3NlZEluc3RhbmNlID0gaW5zdGFuY2UucHJveHk7XG4gICAgY29uc3QgZXJyb3JJbmZvID0gISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSA/IEVycm9yVHlwZVN0cmluZ3MkMVt0eXBlXSA6IGBodHRwczovL3Z1ZWpzLm9yZy9lcnJvci1yZWZlcmVuY2UvI3J1bnRpbWUtJHt0eXBlfWA7XG4gICAgd2hpbGUgKGN1cikge1xuICAgICAgY29uc3QgZXJyb3JDYXB0dXJlZEhvb2tzID0gY3VyLmVjO1xuICAgICAgaWYgKGVycm9yQ2FwdHVyZWRIb29rcykge1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGVycm9yQ2FwdHVyZWRIb29rcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIGlmIChlcnJvckNhcHR1cmVkSG9va3NbaV0oZXJyLCBleHBvc2VkSW5zdGFuY2UsIGVycm9ySW5mbykgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBjdXIgPSBjdXIucGFyZW50O1xuICAgIH1cbiAgICBjb25zdCBhcHBFcnJvckhhbmRsZXIgPSBpbnN0YW5jZS5hcHBDb250ZXh0LmNvbmZpZy5lcnJvckhhbmRsZXI7XG4gICAgaWYgKGFwcEVycm9ySGFuZGxlcikge1xuICAgICAgY2FsbFdpdGhFcnJvckhhbmRsaW5nKFxuICAgICAgICBhcHBFcnJvckhhbmRsZXIsXG4gICAgICAgIG51bGwsXG4gICAgICAgIDEwLFxuICAgICAgICBbZXJyLCBleHBvc2VkSW5zdGFuY2UsIGVycm9ySW5mb11cbiAgICAgICk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICB9XG4gIGxvZ0Vycm9yKGVyciwgdHlwZSwgY29udGV4dFZOb2RlLCB0aHJvd0luRGV2KTtcbn1cbmZ1bmN0aW9uIGxvZ0Vycm9yKGVyciwgdHlwZSwgY29udGV4dFZOb2RlLCB0aHJvd0luRGV2ID0gdHJ1ZSkge1xuICBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSkge1xuICAgIGNvbnN0IGluZm8gPSBFcnJvclR5cGVTdHJpbmdzJDFbdHlwZV07XG4gICAgaWYgKGNvbnRleHRWTm9kZSkge1xuICAgICAgcHVzaFdhcm5pbmdDb250ZXh0KGNvbnRleHRWTm9kZSk7XG4gICAgfVxuICAgIHdhcm4kMShgVW5oYW5kbGVkIGVycm9yJHtpbmZvID8gYCBkdXJpbmcgZXhlY3V0aW9uIG9mICR7aW5mb31gIDogYGB9YCk7XG4gICAgaWYgKGNvbnRleHRWTm9kZSkge1xuICAgICAgcG9wV2FybmluZ0NvbnRleHQoKTtcbiAgICB9XG4gICAgaWYgKHRocm93SW5EZXYpIHtcbiAgICAgIHRocm93IGVycjtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICBjb25zb2xlLmVycm9yKGVycik7XG4gIH1cbn1cblxubGV0IGlzRmx1c2hpbmcgPSBmYWxzZTtcbmxldCBpc0ZsdXNoUGVuZGluZyA9IGZhbHNlO1xuY29uc3QgcXVldWUgPSBbXTtcbmxldCBmbHVzaEluZGV4ID0gMDtcbmNvbnN0IHBlbmRpbmdQb3N0Rmx1c2hDYnMgPSBbXTtcbmxldCBhY3RpdmVQb3N0Rmx1c2hDYnMgPSBudWxsO1xubGV0IHBvc3RGbHVzaEluZGV4ID0gMDtcbmNvbnN0IHJlc29sdmVkUHJvbWlzZSA9IC8qIEBfX1BVUkVfXyAqLyBQcm9taXNlLnJlc29sdmUoKTtcbmxldCBjdXJyZW50Rmx1c2hQcm9taXNlID0gbnVsbDtcbmNvbnN0IFJFQ1VSU0lPTl9MSU1JVCA9IDEwMDtcbmZ1bmN0aW9uIG5leHRUaWNrKGZuKSB7XG4gIGNvbnN0IHAgPSBjdXJyZW50Rmx1c2hQcm9taXNlIHx8IHJlc29sdmVkUHJvbWlzZTtcbiAgcmV0dXJuIGZuID8gcC50aGVuKHRoaXMgPyBmbi5iaW5kKHRoaXMpIDogZm4pIDogcDtcbn1cbmZ1bmN0aW9uIGZpbmRJbnNlcnRpb25JbmRleChpZCkge1xuICBsZXQgc3RhcnQgPSBmbHVzaEluZGV4ICsgMTtcbiAgbGV0IGVuZCA9IHF1ZXVlLmxlbmd0aDtcbiAgd2hpbGUgKHN0YXJ0IDwgZW5kKSB7XG4gICAgY29uc3QgbWlkZGxlID0gc3RhcnQgKyBlbmQgPj4+IDE7XG4gICAgY29uc3QgbWlkZGxlSm9iID0gcXVldWVbbWlkZGxlXTtcbiAgICBjb25zdCBtaWRkbGVKb2JJZCA9IGdldElkKG1pZGRsZUpvYik7XG4gICAgaWYgKG1pZGRsZUpvYklkIDwgaWQgfHwgbWlkZGxlSm9iSWQgPT09IGlkICYmIG1pZGRsZUpvYi5wcmUpIHtcbiAgICAgIHN0YXJ0ID0gbWlkZGxlICsgMTtcbiAgICB9IGVsc2Uge1xuICAgICAgZW5kID0gbWlkZGxlO1xuICAgIH1cbiAgfVxuICByZXR1cm4gc3RhcnQ7XG59XG5mdW5jdGlvbiBxdWV1ZUpvYihqb2IpIHtcbiAgaWYgKCFxdWV1ZS5sZW5ndGggfHwgIXF1ZXVlLmluY2x1ZGVzKFxuICAgIGpvYixcbiAgICBpc0ZsdXNoaW5nICYmIGpvYi5hbGxvd1JlY3Vyc2UgPyBmbHVzaEluZGV4ICsgMSA6IGZsdXNoSW5kZXhcbiAgKSkge1xuICAgIGlmIChqb2IuaWQgPT0gbnVsbCkge1xuICAgICAgcXVldWUucHVzaChqb2IpO1xuICAgIH0gZWxzZSB7XG4gICAgICBxdWV1ZS5zcGxpY2UoZmluZEluc2VydGlvbkluZGV4KGpvYi5pZCksIDAsIGpvYik7XG4gICAgfVxuICAgIHF1ZXVlRmx1c2goKTtcbiAgfVxufVxuZnVuY3Rpb24gcXVldWVGbHVzaCgpIHtcbiAgaWYgKCFpc0ZsdXNoaW5nICYmICFpc0ZsdXNoUGVuZGluZykge1xuICAgIGlzRmx1c2hQZW5kaW5nID0gdHJ1ZTtcbiAgICBjdXJyZW50Rmx1c2hQcm9taXNlID0gcmVzb2x2ZWRQcm9taXNlLnRoZW4oZmx1c2hKb2JzKTtcbiAgfVxufVxuZnVuY3Rpb24gaW52YWxpZGF0ZUpvYihqb2IpIHtcbiAgY29uc3QgaSA9IHF1ZXVlLmluZGV4T2Yoam9iKTtcbiAgaWYgKGkgPiBmbHVzaEluZGV4KSB7XG4gICAgcXVldWUuc3BsaWNlKGksIDEpO1xuICB9XG59XG5mdW5jdGlvbiBxdWV1ZVBvc3RGbHVzaENiKGNiKSB7XG4gIGlmICghaXNBcnJheShjYikpIHtcbiAgICBpZiAoIWFjdGl2ZVBvc3RGbHVzaENicyB8fCAhYWN0aXZlUG9zdEZsdXNoQ2JzLmluY2x1ZGVzKFxuICAgICAgY2IsXG4gICAgICBjYi5hbGxvd1JlY3Vyc2UgPyBwb3N0Rmx1c2hJbmRleCArIDEgOiBwb3N0Rmx1c2hJbmRleFxuICAgICkpIHtcbiAgICAgIHBlbmRpbmdQb3N0Rmx1c2hDYnMucHVzaChjYik7XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIHBlbmRpbmdQb3N0Rmx1c2hDYnMucHVzaCguLi5jYik7XG4gIH1cbiAgcXVldWVGbHVzaCgpO1xufVxuZnVuY3Rpb24gZmx1c2hQcmVGbHVzaENicyhpbnN0YW5jZSwgc2VlbiwgaSA9IGlzRmx1c2hpbmcgPyBmbHVzaEluZGV4ICsgMSA6IDApIHtcbiAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikpIHtcbiAgICBzZWVuID0gc2VlbiB8fCAvKiBAX19QVVJFX18gKi8gbmV3IE1hcCgpO1xuICB9XG4gIGZvciAoOyBpIDwgcXVldWUubGVuZ3RoOyBpKyspIHtcbiAgICBjb25zdCBjYiA9IHF1ZXVlW2ldO1xuICAgIGlmIChjYiAmJiBjYi5wcmUpIHtcbiAgICAgIGlmIChpbnN0YW5jZSAmJiBjYi5pZCAhPT0gaW5zdGFuY2UudWlkKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuICAgICAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgJiYgY2hlY2tSZWN1cnNpdmVVcGRhdGVzKHNlZW4sIGNiKSkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIHF1ZXVlLnNwbGljZShpLCAxKTtcbiAgICAgIGktLTtcbiAgICAgIGNiKCk7XG4gICAgfVxuICB9XG59XG5mdW5jdGlvbiBmbHVzaFBvc3RGbHVzaENicyhzZWVuKSB7XG4gIGlmIChwZW5kaW5nUG9zdEZsdXNoQ2JzLmxlbmd0aCkge1xuICAgIGNvbnN0IGRlZHVwZWQgPSBbLi4ubmV3IFNldChwZW5kaW5nUG9zdEZsdXNoQ2JzKV0uc29ydChcbiAgICAgIChhLCBiKSA9PiBnZXRJZChhKSAtIGdldElkKGIpXG4gICAgKTtcbiAgICBwZW5kaW5nUG9zdEZsdXNoQ2JzLmxlbmd0aCA9IDA7XG4gICAgaWYgKGFjdGl2ZVBvc3RGbHVzaENicykge1xuICAgICAgYWN0aXZlUG9zdEZsdXNoQ2JzLnB1c2goLi4uZGVkdXBlZCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGFjdGl2ZVBvc3RGbHVzaENicyA9IGRlZHVwZWQ7XG4gICAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikpIHtcbiAgICAgIHNlZW4gPSBzZWVuIHx8IC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKCk7XG4gICAgfVxuICAgIGZvciAocG9zdEZsdXNoSW5kZXggPSAwOyBwb3N0Rmx1c2hJbmRleCA8IGFjdGl2ZVBvc3RGbHVzaENicy5sZW5ndGg7IHBvc3RGbHVzaEluZGV4KyspIHtcbiAgICAgIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpICYmIGNoZWNrUmVjdXJzaXZlVXBkYXRlcyhzZWVuLCBhY3RpdmVQb3N0Rmx1c2hDYnNbcG9zdEZsdXNoSW5kZXhdKSkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIGFjdGl2ZVBvc3RGbHVzaENic1twb3N0Rmx1c2hJbmRleF0oKTtcbiAgICB9XG4gICAgYWN0aXZlUG9zdEZsdXNoQ2JzID0gbnVsbDtcbiAgICBwb3N0Rmx1c2hJbmRleCA9IDA7XG4gIH1cbn1cbmNvbnN0IGdldElkID0gKGpvYikgPT4gam9iLmlkID09IG51bGwgPyBJbmZpbml0eSA6IGpvYi5pZDtcbmNvbnN0IGNvbXBhcmF0b3IgPSAoYSwgYikgPT4ge1xuICBjb25zdCBkaWZmID0gZ2V0SWQoYSkgLSBnZXRJZChiKTtcbiAgaWYgKGRpZmYgPT09IDApIHtcbiAgICBpZiAoYS5wcmUgJiYgIWIucHJlKVxuICAgICAgcmV0dXJuIC0xO1xuICAgIGlmIChiLnByZSAmJiAhYS5wcmUpXG4gICAgICByZXR1cm4gMTtcbiAgfVxuICByZXR1cm4gZGlmZjtcbn07XG5mdW5jdGlvbiBmbHVzaEpvYnMoc2Vlbikge1xuICBpc0ZsdXNoUGVuZGluZyA9IGZhbHNlO1xuICBpc0ZsdXNoaW5nID0gdHJ1ZTtcbiAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikpIHtcbiAgICBzZWVuID0gc2VlbiB8fCAvKiBAX19QVVJFX18gKi8gbmV3IE1hcCgpO1xuICB9XG4gIHF1ZXVlLnNvcnQoY29tcGFyYXRvcik7XG4gIGNvbnN0IGNoZWNrID0gISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSA/IChqb2IpID0+IGNoZWNrUmVjdXJzaXZlVXBkYXRlcyhzZWVuLCBqb2IpIDogTk9PUDtcbiAgdHJ5IHtcbiAgICBmb3IgKGZsdXNoSW5kZXggPSAwOyBmbHVzaEluZGV4IDwgcXVldWUubGVuZ3RoOyBmbHVzaEluZGV4KyspIHtcbiAgICAgIGNvbnN0IGpvYiA9IHF1ZXVlW2ZsdXNoSW5kZXhdO1xuICAgICAgaWYgKGpvYiAmJiBqb2IuYWN0aXZlICE9PSBmYWxzZSkge1xuICAgICAgICBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSAmJiBjaGVjayhqb2IpKSB7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgY2FsbFdpdGhFcnJvckhhbmRsaW5nKGpvYiwgbnVsbCwgMTQpO1xuICAgICAgfVxuICAgIH1cbiAgfSBmaW5hbGx5IHtcbiAgICBmbHVzaEluZGV4ID0gMDtcbiAgICBxdWV1ZS5sZW5ndGggPSAwO1xuICAgIGZsdXNoUG9zdEZsdXNoQ2JzKHNlZW4pO1xuICAgIGlzRmx1c2hpbmcgPSBmYWxzZTtcbiAgICBjdXJyZW50Rmx1c2hQcm9taXNlID0gbnVsbDtcbiAgICBpZiAocXVldWUubGVuZ3RoIHx8IHBlbmRpbmdQb3N0Rmx1c2hDYnMubGVuZ3RoKSB7XG4gICAgICBmbHVzaEpvYnMoc2Vlbik7XG4gICAgfVxuICB9XG59XG5mdW5jdGlvbiBjaGVja1JlY3Vyc2l2ZVVwZGF0ZXMoc2VlbiwgZm4pIHtcbiAgaWYgKCFzZWVuLmhhcyhmbikpIHtcbiAgICBzZWVuLnNldChmbiwgMSk7XG4gIH0gZWxzZSB7XG4gICAgY29uc3QgY291bnQgPSBzZWVuLmdldChmbik7XG4gICAgaWYgKGNvdW50ID4gUkVDVVJTSU9OX0xJTUlUKSB7XG4gICAgICBjb25zdCBpbnN0YW5jZSA9IGZuLm93bmVySW5zdGFuY2U7XG4gICAgICBjb25zdCBjb21wb25lbnROYW1lID0gaW5zdGFuY2UgJiYgZ2V0Q29tcG9uZW50TmFtZShpbnN0YW5jZS50eXBlKTtcbiAgICAgIGhhbmRsZUVycm9yKFxuICAgICAgICBgTWF4aW11bSByZWN1cnNpdmUgdXBkYXRlcyBleGNlZWRlZCR7Y29tcG9uZW50TmFtZSA/IGAgaW4gY29tcG9uZW50IDwke2NvbXBvbmVudE5hbWV9PmAgOiBgYH0uIFRoaXMgbWVhbnMgeW91IGhhdmUgYSByZWFjdGl2ZSBlZmZlY3QgdGhhdCBpcyBtdXRhdGluZyBpdHMgb3duIGRlcGVuZGVuY2llcyBhbmQgdGh1cyByZWN1cnNpdmVseSB0cmlnZ2VyaW5nIGl0c2VsZi4gUG9zc2libGUgc291cmNlcyBpbmNsdWRlIGNvbXBvbmVudCB0ZW1wbGF0ZSwgcmVuZGVyIGZ1bmN0aW9uLCB1cGRhdGVkIGhvb2sgb3Igd2F0Y2hlciBzb3VyY2UgZnVuY3Rpb24uYCxcbiAgICAgICAgbnVsbCxcbiAgICAgICAgMTBcbiAgICAgICk7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9IGVsc2Uge1xuICAgICAgc2Vlbi5zZXQoZm4sIGNvdW50ICsgMSk7XG4gICAgfVxuICB9XG59XG5cbmxldCBpc0htclVwZGF0aW5nID0gZmFsc2U7XG5jb25zdCBobXJEaXJ0eUNvbXBvbmVudHMgPSAvKiBAX19QVVJFX18gKi8gbmV3IFNldCgpO1xuaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikpIHtcbiAgZ2V0R2xvYmFsVGhpcygpLl9fVlVFX0hNUl9SVU5USU1FX18gPSB7XG4gICAgY3JlYXRlUmVjb3JkOiB0cnlXcmFwKGNyZWF0ZVJlY29yZCksXG4gICAgcmVyZW5kZXI6IHRyeVdyYXAocmVyZW5kZXIpLFxuICAgIHJlbG9hZDogdHJ5V3JhcChyZWxvYWQpXG4gIH07XG59XG5jb25zdCBtYXAgPSAvKiBAX19QVVJFX18gKi8gbmV3IE1hcCgpO1xuZnVuY3Rpb24gcmVnaXN0ZXJITVIoaW5zdGFuY2UpIHtcbiAgY29uc3QgaWQgPSBpbnN0YW5jZS50eXBlLl9faG1ySWQ7XG4gIGxldCByZWNvcmQgPSBtYXAuZ2V0KGlkKTtcbiAgaWYgKCFyZWNvcmQpIHtcbiAgICBjcmVhdGVSZWNvcmQoaWQsIGluc3RhbmNlLnR5cGUpO1xuICAgIHJlY29yZCA9IG1hcC5nZXQoaWQpO1xuICB9XG4gIHJlY29yZC5pbnN0YW5jZXMuYWRkKGluc3RhbmNlKTtcbn1cbmZ1bmN0aW9uIHVucmVnaXN0ZXJITVIoaW5zdGFuY2UpIHtcbiAgbWFwLmdldChpbnN0YW5jZS50eXBlLl9faG1ySWQpLmluc3RhbmNlcy5kZWxldGUoaW5zdGFuY2UpO1xufVxuZnVuY3Rpb24gY3JlYXRlUmVjb3JkKGlkLCBpbml0aWFsRGVmKSB7XG4gIGlmIChtYXAuaGFzKGlkKSkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICBtYXAuc2V0KGlkLCB7XG4gICAgaW5pdGlhbERlZjogbm9ybWFsaXplQ2xhc3NDb21wb25lbnQoaW5pdGlhbERlZiksXG4gICAgaW5zdGFuY2VzOiAvKiBAX19QVVJFX18gKi8gbmV3IFNldCgpXG4gIH0pO1xuICByZXR1cm4gdHJ1ZTtcbn1cbmZ1bmN0aW9uIG5vcm1hbGl6ZUNsYXNzQ29tcG9uZW50KGNvbXBvbmVudCkge1xuICByZXR1cm4gaXNDbGFzc0NvbXBvbmVudChjb21wb25lbnQpID8gY29tcG9uZW50Ll9fdmNjT3B0cyA6IGNvbXBvbmVudDtcbn1cbmZ1bmN0aW9uIHJlcmVuZGVyKGlkLCBuZXdSZW5kZXIpIHtcbiAgY29uc3QgcmVjb3JkID0gbWFwLmdldChpZCk7XG4gIGlmICghcmVjb3JkKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIHJlY29yZC5pbml0aWFsRGVmLnJlbmRlciA9IG5ld1JlbmRlcjtcbiAgWy4uLnJlY29yZC5pbnN0YW5jZXNdLmZvckVhY2goKGluc3RhbmNlKSA9PiB7XG4gICAgaWYgKG5ld1JlbmRlcikge1xuICAgICAgaW5zdGFuY2UucmVuZGVyID0gbmV3UmVuZGVyO1xuICAgICAgbm9ybWFsaXplQ2xhc3NDb21wb25lbnQoaW5zdGFuY2UudHlwZSkucmVuZGVyID0gbmV3UmVuZGVyO1xuICAgIH1cbiAgICBpbnN0YW5jZS5yZW5kZXJDYWNoZSA9IFtdO1xuICAgIGlzSG1yVXBkYXRpbmcgPSB0cnVlO1xuICAgIGluc3RhbmNlLmVmZmVjdC5kaXJ0eSA9IHRydWU7XG4gICAgaW5zdGFuY2UudXBkYXRlKCk7XG4gICAgaXNIbXJVcGRhdGluZyA9IGZhbHNlO1xuICB9KTtcbn1cbmZ1bmN0aW9uIHJlbG9hZChpZCwgbmV3Q29tcCkge1xuICBjb25zdCByZWNvcmQgPSBtYXAuZ2V0KGlkKTtcbiAgaWYgKCFyZWNvcmQpXG4gICAgcmV0dXJuO1xuICBuZXdDb21wID0gbm9ybWFsaXplQ2xhc3NDb21wb25lbnQobmV3Q29tcCk7XG4gIHVwZGF0ZUNvbXBvbmVudERlZihyZWNvcmQuaW5pdGlhbERlZiwgbmV3Q29tcCk7XG4gIGNvbnN0IGluc3RhbmNlcyA9IFsuLi5yZWNvcmQuaW5zdGFuY2VzXTtcbiAgZm9yIChjb25zdCBpbnN0YW5jZSBvZiBpbnN0YW5jZXMpIHtcbiAgICBjb25zdCBvbGRDb21wID0gbm9ybWFsaXplQ2xhc3NDb21wb25lbnQoaW5zdGFuY2UudHlwZSk7XG4gICAgaWYgKCFobXJEaXJ0eUNvbXBvbmVudHMuaGFzKG9sZENvbXApKSB7XG4gICAgICBpZiAob2xkQ29tcCAhPT0gcmVjb3JkLmluaXRpYWxEZWYpIHtcbiAgICAgICAgdXBkYXRlQ29tcG9uZW50RGVmKG9sZENvbXAsIG5ld0NvbXApO1xuICAgICAgfVxuICAgICAgaG1yRGlydHlDb21wb25lbnRzLmFkZChvbGRDb21wKTtcbiAgICB9XG4gICAgaW5zdGFuY2UuYXBwQ29udGV4dC5wcm9wc0NhY2hlLmRlbGV0ZShpbnN0YW5jZS50eXBlKTtcbiAgICBpbnN0YW5jZS5hcHBDb250ZXh0LmVtaXRzQ2FjaGUuZGVsZXRlKGluc3RhbmNlLnR5cGUpO1xuICAgIGluc3RhbmNlLmFwcENvbnRleHQub3B0aW9uc0NhY2hlLmRlbGV0ZShpbnN0YW5jZS50eXBlKTtcbiAgICBpZiAoaW5zdGFuY2UuY2VSZWxvYWQpIHtcbiAgICAgIGhtckRpcnR5Q29tcG9uZW50cy5hZGQob2xkQ29tcCk7XG4gICAgICBpbnN0YW5jZS5jZVJlbG9hZChuZXdDb21wLnN0eWxlcyk7XG4gICAgICBobXJEaXJ0eUNvbXBvbmVudHMuZGVsZXRlKG9sZENvbXApO1xuICAgIH0gZWxzZSBpZiAoaW5zdGFuY2UucGFyZW50KSB7XG4gICAgICBpbnN0YW5jZS5wYXJlbnQuZWZmZWN0LmRpcnR5ID0gdHJ1ZTtcbiAgICAgIHF1ZXVlSm9iKGluc3RhbmNlLnBhcmVudC51cGRhdGUpO1xuICAgIH0gZWxzZSBpZiAoaW5zdGFuY2UuYXBwQ29udGV4dC5yZWxvYWQpIHtcbiAgICAgIGluc3RhbmNlLmFwcENvbnRleHQucmVsb2FkKCk7XG4gICAgfSBlbHNlIGlmICh0eXBlb2Ygd2luZG93ICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICB3aW5kb3cubG9jYXRpb24ucmVsb2FkKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnNvbGUud2FybihcbiAgICAgICAgXCJbSE1SXSBSb290IG9yIG1hbnVhbGx5IG1vdW50ZWQgaW5zdGFuY2UgbW9kaWZpZWQuIEZ1bGwgcmVsb2FkIHJlcXVpcmVkLlwiXG4gICAgICApO1xuICAgIH1cbiAgfVxuICBxdWV1ZVBvc3RGbHVzaENiKCgpID0+IHtcbiAgICBmb3IgKGNvbnN0IGluc3RhbmNlIG9mIGluc3RhbmNlcykge1xuICAgICAgaG1yRGlydHlDb21wb25lbnRzLmRlbGV0ZShcbiAgICAgICAgbm9ybWFsaXplQ2xhc3NDb21wb25lbnQoaW5zdGFuY2UudHlwZSlcbiAgICAgICk7XG4gICAgfVxuICB9KTtcbn1cbmZ1bmN0aW9uIHVwZGF0ZUNvbXBvbmVudERlZihvbGRDb21wLCBuZXdDb21wKSB7XG4gIGV4dGVuZChvbGRDb21wLCBuZXdDb21wKTtcbiAgZm9yIChjb25zdCBrZXkgaW4gb2xkQ29tcCkge1xuICAgIGlmIChrZXkgIT09IFwiX19maWxlXCIgJiYgIShrZXkgaW4gbmV3Q29tcCkpIHtcbiAgICAgIGRlbGV0ZSBvbGRDb21wW2tleV07XG4gICAgfVxuICB9XG59XG5mdW5jdGlvbiB0cnlXcmFwKGZuKSB7XG4gIHJldHVybiAoaWQsIGFyZykgPT4ge1xuICAgIHRyeSB7XG4gICAgICByZXR1cm4gZm4oaWQsIGFyZyk7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgY29uc29sZS5lcnJvcihlKTtcbiAgICAgIGNvbnNvbGUud2FybihcbiAgICAgICAgYFtITVJdIFNvbWV0aGluZyB3ZW50IHdyb25nIGR1cmluZyBWdWUgY29tcG9uZW50IGhvdC1yZWxvYWQuIEZ1bGwgcmVsb2FkIHJlcXVpcmVkLmBcbiAgICAgICk7XG4gICAgfVxuICB9O1xufVxuXG5sZXQgZGV2dG9vbHMkMTtcbmxldCBidWZmZXIgPSBbXTtcbmxldCBkZXZ0b29sc05vdEluc3RhbGxlZCA9IGZhbHNlO1xuZnVuY3Rpb24gZW1pdCQxKGV2ZW50LCAuLi5hcmdzKSB7XG4gIGlmIChkZXZ0b29scyQxKSB7XG4gICAgZGV2dG9vbHMkMS5lbWl0KGV2ZW50LCAuLi5hcmdzKTtcbiAgfSBlbHNlIGlmICghZGV2dG9vbHNOb3RJbnN0YWxsZWQpIHtcbiAgICBidWZmZXIucHVzaCh7IGV2ZW50LCBhcmdzIH0pO1xuICB9XG59XG5mdW5jdGlvbiBzZXREZXZ0b29sc0hvb2skMShob29rLCB0YXJnZXQpIHtcbiAgdmFyIF9hLCBfYjtcbiAgZGV2dG9vbHMkMSA9IGhvb2s7XG4gIGlmIChkZXZ0b29scyQxKSB7XG4gICAgZGV2dG9vbHMkMS5lbmFibGVkID0gdHJ1ZTtcbiAgICBidWZmZXIuZm9yRWFjaCgoeyBldmVudCwgYXJncyB9KSA9PiBkZXZ0b29scyQxLmVtaXQoZXZlbnQsIC4uLmFyZ3MpKTtcbiAgICBidWZmZXIgPSBbXTtcbiAgfSBlbHNlIGlmIChcbiAgICAvLyBoYW5kbGUgbGF0ZSBkZXZ0b29scyBpbmplY3Rpb24gLSBvbmx5IGRvIHRoaXMgaWYgd2UgYXJlIGluIGFuIGFjdHVhbFxuICAgIC8vIGJyb3dzZXIgZW52aXJvbm1lbnQgdG8gYXZvaWQgdGhlIHRpbWVyIGhhbmRsZSBzdGFsbGluZyB0ZXN0IHJ1bm5lciBleGl0XG4gICAgLy8gKCM0ODE1KVxuICAgIHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCIgJiYgLy8gc29tZSBlbnZzIG1vY2sgd2luZG93IGJ1dCBub3QgZnVsbHlcbiAgICB3aW5kb3cuSFRNTEVsZW1lbnQgJiYgLy8gYWxzbyBleGNsdWRlIGpzZG9tXG4gICAgISgoX2IgPSAoX2EgPSB3aW5kb3cubmF2aWdhdG9yKSA9PSBudWxsID8gdm9pZCAwIDogX2EudXNlckFnZW50KSA9PSBudWxsID8gdm9pZCAwIDogX2IuaW5jbHVkZXMoXCJqc2RvbVwiKSlcbiAgKSB7XG4gICAgY29uc3QgcmVwbGF5ID0gdGFyZ2V0Ll9fVlVFX0RFVlRPT0xTX0hPT0tfUkVQTEFZX18gPSB0YXJnZXQuX19WVUVfREVWVE9PTFNfSE9PS19SRVBMQVlfXyB8fCBbXTtcbiAgICByZXBsYXkucHVzaCgobmV3SG9vaykgPT4ge1xuICAgICAgc2V0RGV2dG9vbHNIb29rJDEobmV3SG9vaywgdGFyZ2V0KTtcbiAgICB9KTtcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIGlmICghZGV2dG9vbHMkMSkge1xuICAgICAgICB0YXJnZXQuX19WVUVfREVWVE9PTFNfSE9PS19SRVBMQVlfXyA9IG51bGw7XG4gICAgICAgIGRldnRvb2xzTm90SW5zdGFsbGVkID0gdHJ1ZTtcbiAgICAgICAgYnVmZmVyID0gW107XG4gICAgICB9XG4gICAgfSwgM2UzKTtcbiAgfSBlbHNlIHtcbiAgICBkZXZ0b29sc05vdEluc3RhbGxlZCA9IHRydWU7XG4gICAgYnVmZmVyID0gW107XG4gIH1cbn1cbmZ1bmN0aW9uIGRldnRvb2xzSW5pdEFwcChhcHAsIHZlcnNpb24pIHtcbiAgZW1pdCQxKFwiYXBwOmluaXRcIiAvKiBBUFBfSU5JVCAqLywgYXBwLCB2ZXJzaW9uLCB7XG4gICAgRnJhZ21lbnQsXG4gICAgVGV4dCxcbiAgICBDb21tZW50LFxuICAgIFN0YXRpY1xuICB9KTtcbn1cbmZ1bmN0aW9uIGRldnRvb2xzVW5tb3VudEFwcChhcHApIHtcbiAgZW1pdCQxKFwiYXBwOnVubW91bnRcIiAvKiBBUFBfVU5NT1VOVCAqLywgYXBwKTtcbn1cbmNvbnN0IGRldnRvb2xzQ29tcG9uZW50QWRkZWQgPSAvKiBAX19QVVJFX18gKi8gY3JlYXRlRGV2dG9vbHNDb21wb25lbnRIb29rKFxuICBcImNvbXBvbmVudDphZGRlZFwiIC8qIENPTVBPTkVOVF9BRERFRCAqL1xuKTtcbmNvbnN0IGRldnRvb2xzQ29tcG9uZW50VXBkYXRlZCA9IC8qIEBfX1BVUkVfXyAqLyBjcmVhdGVEZXZ0b29sc0NvbXBvbmVudEhvb2soXCJjb21wb25lbnQ6dXBkYXRlZFwiIC8qIENPTVBPTkVOVF9VUERBVEVEICovKTtcbmNvbnN0IF9kZXZ0b29sc0NvbXBvbmVudFJlbW92ZWQgPSAvKiBAX19QVVJFX18gKi8gY3JlYXRlRGV2dG9vbHNDb21wb25lbnRIb29rKFxuICBcImNvbXBvbmVudDpyZW1vdmVkXCIgLyogQ09NUE9ORU5UX1JFTU9WRUQgKi9cbik7XG5jb25zdCBkZXZ0b29sc0NvbXBvbmVudFJlbW92ZWQgPSAoY29tcG9uZW50KSA9PiB7XG4gIGlmIChkZXZ0b29scyQxICYmIHR5cGVvZiBkZXZ0b29scyQxLmNsZWFudXBCdWZmZXIgPT09IFwiZnVuY3Rpb25cIiAmJiAvLyByZW1vdmUgdGhlIGNvbXBvbmVudCBpZiBpdCB3YXNuJ3QgYnVmZmVyZWRcbiAgIWRldnRvb2xzJDEuY2xlYW51cEJ1ZmZlcihjb21wb25lbnQpKSB7XG4gICAgX2RldnRvb2xzQ29tcG9uZW50UmVtb3ZlZChjb21wb25lbnQpO1xuICB9XG59O1xuZnVuY3Rpb24gY3JlYXRlRGV2dG9vbHNDb21wb25lbnRIb29rKGhvb2spIHtcbiAgcmV0dXJuIChjb21wb25lbnQpID0+IHtcbiAgICBlbWl0JDEoXG4gICAgICBob29rLFxuICAgICAgY29tcG9uZW50LmFwcENvbnRleHQuYXBwLFxuICAgICAgY29tcG9uZW50LnVpZCxcbiAgICAgIGNvbXBvbmVudC5wYXJlbnQgPyBjb21wb25lbnQucGFyZW50LnVpZCA6IHZvaWQgMCxcbiAgICAgIGNvbXBvbmVudFxuICAgICk7XG4gIH07XG59XG5jb25zdCBkZXZ0b29sc1BlcmZTdGFydCA9IC8qIEBfX1BVUkVfXyAqLyBjcmVhdGVEZXZ0b29sc1BlcmZvcm1hbmNlSG9vayhcbiAgXCJwZXJmOnN0YXJ0XCIgLyogUEVSRk9STUFOQ0VfU1RBUlQgKi9cbik7XG5jb25zdCBkZXZ0b29sc1BlcmZFbmQgPSAvKiBAX19QVVJFX18gKi8gY3JlYXRlRGV2dG9vbHNQZXJmb3JtYW5jZUhvb2soXG4gIFwicGVyZjplbmRcIiAvKiBQRVJGT1JNQU5DRV9FTkQgKi9cbik7XG5mdW5jdGlvbiBjcmVhdGVEZXZ0b29sc1BlcmZvcm1hbmNlSG9vayhob29rKSB7XG4gIHJldHVybiAoY29tcG9uZW50LCB0eXBlLCB0aW1lKSA9PiB7XG4gICAgZW1pdCQxKGhvb2ssIGNvbXBvbmVudC5hcHBDb250ZXh0LmFwcCwgY29tcG9uZW50LnVpZCwgY29tcG9uZW50LCB0eXBlLCB0aW1lKTtcbiAgfTtcbn1cbmZ1bmN0aW9uIGRldnRvb2xzQ29tcG9uZW50RW1pdChjb21wb25lbnQsIGV2ZW50LCBwYXJhbXMpIHtcbiAgZW1pdCQxKFxuICAgIFwiY29tcG9uZW50OmVtaXRcIiAvKiBDT01QT05FTlRfRU1JVCAqLyxcbiAgICBjb21wb25lbnQuYXBwQ29udGV4dC5hcHAsXG4gICAgY29tcG9uZW50LFxuICAgIGV2ZW50LFxuICAgIHBhcmFtc1xuICApO1xufVxuXG5mdW5jdGlvbiBlbWl0KGluc3RhbmNlLCBldmVudCwgLi4ucmF3QXJncykge1xuICBpZiAoaW5zdGFuY2UuaXNVbm1vdW50ZWQpXG4gICAgcmV0dXJuO1xuICBjb25zdCBwcm9wcyA9IGluc3RhbmNlLnZub2RlLnByb3BzIHx8IEVNUFRZX09CSjtcbiAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikpIHtcbiAgICBjb25zdCB7XG4gICAgICBlbWl0c09wdGlvbnMsXG4gICAgICBwcm9wc09wdGlvbnM6IFtwcm9wc09wdGlvbnNdXG4gICAgfSA9IGluc3RhbmNlO1xuICAgIGlmIChlbWl0c09wdGlvbnMpIHtcbiAgICAgIGlmICghKGV2ZW50IGluIGVtaXRzT3B0aW9ucykgJiYgdHJ1ZSkge1xuICAgICAgICBpZiAoIXByb3BzT3B0aW9ucyB8fCAhKHRvSGFuZGxlcktleShldmVudCkgaW4gcHJvcHNPcHRpb25zKSkge1xuICAgICAgICAgIHdhcm4kMShcbiAgICAgICAgICAgIGBDb21wb25lbnQgZW1pdHRlZCBldmVudCBcIiR7ZXZlbnR9XCIgYnV0IGl0IGlzIG5laXRoZXIgZGVjbGFyZWQgaW4gdGhlIGVtaXRzIG9wdGlvbiBub3IgYXMgYW4gXCIke3RvSGFuZGxlcktleShldmVudCl9XCIgcHJvcC5gXG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc3QgdmFsaWRhdG9yID0gZW1pdHNPcHRpb25zW2V2ZW50XTtcbiAgICAgICAgaWYgKGlzRnVuY3Rpb24odmFsaWRhdG9yKSkge1xuICAgICAgICAgIGNvbnN0IGlzVmFsaWQgPSB2YWxpZGF0b3IoLi4ucmF3QXJncyk7XG4gICAgICAgICAgaWYgKCFpc1ZhbGlkKSB7XG4gICAgICAgICAgICB3YXJuJDEoXG4gICAgICAgICAgICAgIGBJbnZhbGlkIGV2ZW50IGFyZ3VtZW50czogZXZlbnQgdmFsaWRhdGlvbiBmYWlsZWQgZm9yIGV2ZW50IFwiJHtldmVudH1cIi5gXG4gICAgICAgICAgICApO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuICBsZXQgYXJncyA9IHJhd0FyZ3M7XG4gIGNvbnN0IGlzTW9kZWxMaXN0ZW5lciA9IGV2ZW50LnN0YXJ0c1dpdGgoXCJ1cGRhdGU6XCIpO1xuICBjb25zdCBtb2RlbEFyZyA9IGlzTW9kZWxMaXN0ZW5lciAmJiBldmVudC5zbGljZSg3KTtcbiAgaWYgKG1vZGVsQXJnICYmIG1vZGVsQXJnIGluIHByb3BzKSB7XG4gICAgY29uc3QgbW9kaWZpZXJzS2V5ID0gYCR7bW9kZWxBcmcgPT09IFwibW9kZWxWYWx1ZVwiID8gXCJtb2RlbFwiIDogbW9kZWxBcmd9TW9kaWZpZXJzYDtcbiAgICBjb25zdCB7IG51bWJlciwgdHJpbSB9ID0gcHJvcHNbbW9kaWZpZXJzS2V5XSB8fCBFTVBUWV9PQko7XG4gICAgaWYgKHRyaW0pIHtcbiAgICAgIGFyZ3MgPSByYXdBcmdzLm1hcCgoYSkgPT4gaXNTdHJpbmcoYSkgPyBhLnRyaW0oKSA6IGEpO1xuICAgIH1cbiAgICBpZiAobnVtYmVyKSB7XG4gICAgICBhcmdzID0gcmF3QXJncy5tYXAobG9vc2VUb051bWJlcik7XG4gICAgfVxuICB9XG4gIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpIHx8IF9fVlVFX1BST0RfREVWVE9PTFNfXykge1xuICAgIGRldnRvb2xzQ29tcG9uZW50RW1pdChpbnN0YW5jZSwgZXZlbnQsIGFyZ3MpO1xuICB9XG4gIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpKSB7XG4gICAgY29uc3QgbG93ZXJDYXNlRXZlbnQgPSBldmVudC50b0xvd2VyQ2FzZSgpO1xuICAgIGlmIChsb3dlckNhc2VFdmVudCAhPT0gZXZlbnQgJiYgcHJvcHNbdG9IYW5kbGVyS2V5KGxvd2VyQ2FzZUV2ZW50KV0pIHtcbiAgICAgIHdhcm4kMShcbiAgICAgICAgYEV2ZW50IFwiJHtsb3dlckNhc2VFdmVudH1cIiBpcyBlbWl0dGVkIGluIGNvbXBvbmVudCAke2Zvcm1hdENvbXBvbmVudE5hbWUoXG4gICAgICAgICAgaW5zdGFuY2UsXG4gICAgICAgICAgaW5zdGFuY2UudHlwZVxuICAgICAgICApfSBidXQgdGhlIGhhbmRsZXIgaXMgcmVnaXN0ZXJlZCBmb3IgXCIke2V2ZW50fVwiLiBOb3RlIHRoYXQgSFRNTCBhdHRyaWJ1dGVzIGFyZSBjYXNlLWluc2Vuc2l0aXZlIGFuZCB5b3UgY2Fubm90IHVzZSB2LW9uIHRvIGxpc3RlbiB0byBjYW1lbENhc2UgZXZlbnRzIHdoZW4gdXNpbmcgaW4tRE9NIHRlbXBsYXRlcy4gWW91IHNob3VsZCBwcm9iYWJseSB1c2UgXCIke2h5cGhlbmF0ZShcbiAgICAgICAgICBldmVudFxuICAgICAgICApfVwiIGluc3RlYWQgb2YgXCIke2V2ZW50fVwiLmBcbiAgICAgICk7XG4gICAgfVxuICB9XG4gIGxldCBoYW5kbGVyTmFtZTtcbiAgbGV0IGhhbmRsZXIgPSBwcm9wc1toYW5kbGVyTmFtZSA9IHRvSGFuZGxlcktleShldmVudCldIHx8IC8vIGFsc28gdHJ5IGNhbWVsQ2FzZSBldmVudCBoYW5kbGVyICgjMjI0OSlcbiAgcHJvcHNbaGFuZGxlck5hbWUgPSB0b0hhbmRsZXJLZXkoY2FtZWxpemUoZXZlbnQpKV07XG4gIGlmICghaGFuZGxlciAmJiBpc01vZGVsTGlzdGVuZXIpIHtcbiAgICBoYW5kbGVyID0gcHJvcHNbaGFuZGxlck5hbWUgPSB0b0hhbmRsZXJLZXkoaHlwaGVuYXRlKGV2ZW50KSldO1xuICB9XG4gIGlmIChoYW5kbGVyKSB7XG4gICAgY2FsbFdpdGhBc3luY0Vycm9ySGFuZGxpbmcoXG4gICAgICBoYW5kbGVyLFxuICAgICAgaW5zdGFuY2UsXG4gICAgICA2LFxuICAgICAgYXJnc1xuICAgICk7XG4gIH1cbiAgY29uc3Qgb25jZUhhbmRsZXIgPSBwcm9wc1toYW5kbGVyTmFtZSArIGBPbmNlYF07XG4gIGlmIChvbmNlSGFuZGxlcikge1xuICAgIGlmICghaW5zdGFuY2UuZW1pdHRlZCkge1xuICAgICAgaW5zdGFuY2UuZW1pdHRlZCA9IHt9O1xuICAgIH0gZWxzZSBpZiAoaW5zdGFuY2UuZW1pdHRlZFtoYW5kbGVyTmFtZV0pIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaW5zdGFuY2UuZW1pdHRlZFtoYW5kbGVyTmFtZV0gPSB0cnVlO1xuICAgIGNhbGxXaXRoQXN5bmNFcnJvckhhbmRsaW5nKFxuICAgICAgb25jZUhhbmRsZXIsXG4gICAgICBpbnN0YW5jZSxcbiAgICAgIDYsXG4gICAgICBhcmdzXG4gICAgKTtcbiAgfVxufVxuZnVuY3Rpb24gbm9ybWFsaXplRW1pdHNPcHRpb25zKGNvbXAsIGFwcENvbnRleHQsIGFzTWl4aW4gPSBmYWxzZSkge1xuICBjb25zdCBjYWNoZSA9IGFwcENvbnRleHQuZW1pdHNDYWNoZTtcbiAgY29uc3QgY2FjaGVkID0gY2FjaGUuZ2V0KGNvbXApO1xuICBpZiAoY2FjaGVkICE9PSB2b2lkIDApIHtcbiAgICByZXR1cm4gY2FjaGVkO1xuICB9XG4gIGNvbnN0IHJhdyA9IGNvbXAuZW1pdHM7XG4gIGxldCBub3JtYWxpemVkID0ge307XG4gIGxldCBoYXNFeHRlbmRzID0gZmFsc2U7XG4gIGlmIChfX1ZVRV9PUFRJT05TX0FQSV9fICYmICFpc0Z1bmN0aW9uKGNvbXApKSB7XG4gICAgY29uc3QgZXh0ZW5kRW1pdHMgPSAocmF3MikgPT4ge1xuICAgICAgY29uc3Qgbm9ybWFsaXplZEZyb21FeHRlbmQgPSBub3JtYWxpemVFbWl0c09wdGlvbnMocmF3MiwgYXBwQ29udGV4dCwgdHJ1ZSk7XG4gICAgICBpZiAobm9ybWFsaXplZEZyb21FeHRlbmQpIHtcbiAgICAgICAgaGFzRXh0ZW5kcyA9IHRydWU7XG4gICAgICAgIGV4dGVuZChub3JtYWxpemVkLCBub3JtYWxpemVkRnJvbUV4dGVuZCk7XG4gICAgICB9XG4gICAgfTtcbiAgICBpZiAoIWFzTWl4aW4gJiYgYXBwQ29udGV4dC5taXhpbnMubGVuZ3RoKSB7XG4gICAgICBhcHBDb250ZXh0Lm1peGlucy5mb3JFYWNoKGV4dGVuZEVtaXRzKTtcbiAgICB9XG4gICAgaWYgKGNvbXAuZXh0ZW5kcykge1xuICAgICAgZXh0ZW5kRW1pdHMoY29tcC5leHRlbmRzKTtcbiAgICB9XG4gICAgaWYgKGNvbXAubWl4aW5zKSB7XG4gICAgICBjb21wLm1peGlucy5mb3JFYWNoKGV4dGVuZEVtaXRzKTtcbiAgICB9XG4gIH1cbiAgaWYgKCFyYXcgJiYgIWhhc0V4dGVuZHMpIHtcbiAgICBpZiAoaXNPYmplY3QoY29tcCkpIHtcbiAgICAgIGNhY2hlLnNldChjb21wLCBudWxsKTtcbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbiAgaWYgKGlzQXJyYXkocmF3KSkge1xuICAgIHJhdy5mb3JFYWNoKChrZXkpID0+IG5vcm1hbGl6ZWRba2V5XSA9IG51bGwpO1xuICB9IGVsc2Uge1xuICAgIGV4dGVuZChub3JtYWxpemVkLCByYXcpO1xuICB9XG4gIGlmIChpc09iamVjdChjb21wKSkge1xuICAgIGNhY2hlLnNldChjb21wLCBub3JtYWxpemVkKTtcbiAgfVxuICByZXR1cm4gbm9ybWFsaXplZDtcbn1cbmZ1bmN0aW9uIGlzRW1pdExpc3RlbmVyKG9wdGlvbnMsIGtleSkge1xuICBpZiAoIW9wdGlvbnMgfHwgIWlzT24oa2V5KSkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICBrZXkgPSBrZXkuc2xpY2UoMikucmVwbGFjZSgvT25jZSQvLCBcIlwiKTtcbiAgcmV0dXJuIGhhc093bihvcHRpb25zLCBrZXlbMF0udG9Mb3dlckNhc2UoKSArIGtleS5zbGljZSgxKSkgfHwgaGFzT3duKG9wdGlvbnMsIGh5cGhlbmF0ZShrZXkpKSB8fCBoYXNPd24ob3B0aW9ucywga2V5KTtcbn1cblxubGV0IGN1cnJlbnRSZW5kZXJpbmdJbnN0YW5jZSA9IG51bGw7XG5sZXQgY3VycmVudFNjb3BlSWQgPSBudWxsO1xuZnVuY3Rpb24gc2V0Q3VycmVudFJlbmRlcmluZ0luc3RhbmNlKGluc3RhbmNlKSB7XG4gIGNvbnN0IHByZXYgPSBjdXJyZW50UmVuZGVyaW5nSW5zdGFuY2U7XG4gIGN1cnJlbnRSZW5kZXJpbmdJbnN0YW5jZSA9IGluc3RhbmNlO1xuICBjdXJyZW50U2NvcGVJZCA9IGluc3RhbmNlICYmIGluc3RhbmNlLnR5cGUuX19zY29wZUlkIHx8IG51bGw7XG4gIHJldHVybiBwcmV2O1xufVxuZnVuY3Rpb24gcHVzaFNjb3BlSWQoaWQpIHtcbiAgY3VycmVudFNjb3BlSWQgPSBpZDtcbn1cbmZ1bmN0aW9uIHBvcFNjb3BlSWQoKSB7XG4gIGN1cnJlbnRTY29wZUlkID0gbnVsbDtcbn1cbmNvbnN0IHdpdGhTY29wZUlkID0gKF9pZCkgPT4gd2l0aEN0eDtcbmZ1bmN0aW9uIHdpdGhDdHgoZm4sIGN0eCA9IGN1cnJlbnRSZW5kZXJpbmdJbnN0YW5jZSwgaXNOb25TY29wZWRTbG90KSB7XG4gIGlmICghY3R4KVxuICAgIHJldHVybiBmbjtcbiAgaWYgKGZuLl9uKSB7XG4gICAgcmV0dXJuIGZuO1xuICB9XG4gIGNvbnN0IHJlbmRlckZuV2l0aENvbnRleHQgPSAoLi4uYXJncykgPT4ge1xuICAgIGlmIChyZW5kZXJGbldpdGhDb250ZXh0Ll9kKSB7XG4gICAgICBzZXRCbG9ja1RyYWNraW5nKC0xKTtcbiAgICB9XG4gICAgY29uc3QgcHJldkluc3RhbmNlID0gc2V0Q3VycmVudFJlbmRlcmluZ0luc3RhbmNlKGN0eCk7XG4gICAgbGV0IHJlcztcbiAgICB0cnkge1xuICAgICAgcmVzID0gZm4oLi4uYXJncyk7XG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIHNldEN1cnJlbnRSZW5kZXJpbmdJbnN0YW5jZShwcmV2SW5zdGFuY2UpO1xuICAgICAgaWYgKHJlbmRlckZuV2l0aENvbnRleHQuX2QpIHtcbiAgICAgICAgc2V0QmxvY2tUcmFja2luZygxKTtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgfHwgX19WVUVfUFJPRF9ERVZUT09MU19fKSB7XG4gICAgICBkZXZ0b29sc0NvbXBvbmVudFVwZGF0ZWQoY3R4KTtcbiAgICB9XG4gICAgcmV0dXJuIHJlcztcbiAgfTtcbiAgcmVuZGVyRm5XaXRoQ29udGV4dC5fbiA9IHRydWU7XG4gIHJlbmRlckZuV2l0aENvbnRleHQuX2MgPSB0cnVlO1xuICByZW5kZXJGbldpdGhDb250ZXh0Ll9kID0gdHJ1ZTtcbiAgcmV0dXJuIHJlbmRlckZuV2l0aENvbnRleHQ7XG59XG5cbmxldCBhY2Nlc3NlZEF0dHJzID0gZmFsc2U7XG5mdW5jdGlvbiBtYXJrQXR0cnNBY2Nlc3NlZCgpIHtcbiAgYWNjZXNzZWRBdHRycyA9IHRydWU7XG59XG5mdW5jdGlvbiByZW5kZXJDb21wb25lbnRSb290KGluc3RhbmNlKSB7XG4gIGNvbnN0IHtcbiAgICB0eXBlOiBDb21wb25lbnQsXG4gICAgdm5vZGUsXG4gICAgcHJveHksXG4gICAgd2l0aFByb3h5LFxuICAgIHByb3BzLFxuICAgIHByb3BzT3B0aW9uczogW3Byb3BzT3B0aW9uc10sXG4gICAgc2xvdHMsXG4gICAgYXR0cnMsXG4gICAgZW1pdCxcbiAgICByZW5kZXIsXG4gICAgcmVuZGVyQ2FjaGUsXG4gICAgZGF0YSxcbiAgICBzZXR1cFN0YXRlLFxuICAgIGN0eCxcbiAgICBpbmhlcml0QXR0cnNcbiAgfSA9IGluc3RhbmNlO1xuICBsZXQgcmVzdWx0O1xuICBsZXQgZmFsbHRocm91Z2hBdHRycztcbiAgY29uc3QgcHJldiA9IHNldEN1cnJlbnRSZW5kZXJpbmdJbnN0YW5jZShpbnN0YW5jZSk7XG4gIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpKSB7XG4gICAgYWNjZXNzZWRBdHRycyA9IGZhbHNlO1xuICB9XG4gIHRyeSB7XG4gICAgaWYgKHZub2RlLnNoYXBlRmxhZyAmIDQpIHtcbiAgICAgIGNvbnN0IHByb3h5VG9Vc2UgPSB3aXRoUHJveHkgfHwgcHJveHk7XG4gICAgICBjb25zdCB0aGlzUHJveHkgPSAhIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpICYmIHNldHVwU3RhdGUuX19pc1NjcmlwdFNldHVwID8gbmV3IFByb3h5KHByb3h5VG9Vc2UsIHtcbiAgICAgICAgZ2V0KHRhcmdldCwga2V5LCByZWNlaXZlcikge1xuICAgICAgICAgIHdhcm4kMShcbiAgICAgICAgICAgIGBQcm9wZXJ0eSAnJHtTdHJpbmcoXG4gICAgICAgICAgICAgIGtleVxuICAgICAgICAgICAgKX0nIHdhcyBhY2Nlc3NlZCB2aWEgJ3RoaXMnLiBBdm9pZCB1c2luZyAndGhpcycgaW4gdGVtcGxhdGVzLmBcbiAgICAgICAgICApO1xuICAgICAgICAgIHJldHVybiBSZWZsZWN0LmdldCh0YXJnZXQsIGtleSwgcmVjZWl2ZXIpO1xuICAgICAgICB9XG4gICAgICB9KSA6IHByb3h5VG9Vc2U7XG4gICAgICByZXN1bHQgPSBub3JtYWxpemVWTm9kZShcbiAgICAgICAgcmVuZGVyLmNhbGwoXG4gICAgICAgICAgdGhpc1Byb3h5LFxuICAgICAgICAgIHByb3h5VG9Vc2UsXG4gICAgICAgICAgcmVuZGVyQ2FjaGUsXG4gICAgICAgICAgcHJvcHMsXG4gICAgICAgICAgc2V0dXBTdGF0ZSxcbiAgICAgICAgICBkYXRhLFxuICAgICAgICAgIGN0eFxuICAgICAgICApXG4gICAgICApO1xuICAgICAgZmFsbHRocm91Z2hBdHRycyA9IGF0dHJzO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCByZW5kZXIyID0gQ29tcG9uZW50O1xuICAgICAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgJiYgYXR0cnMgPT09IHByb3BzKSB7XG4gICAgICAgIG1hcmtBdHRyc0FjY2Vzc2VkKCk7XG4gICAgICB9XG4gICAgICByZXN1bHQgPSBub3JtYWxpemVWTm9kZShcbiAgICAgICAgcmVuZGVyMi5sZW5ndGggPiAxID8gcmVuZGVyMihcbiAgICAgICAgICBwcm9wcyxcbiAgICAgICAgICAhIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpID8ge1xuICAgICAgICAgICAgZ2V0IGF0dHJzKCkge1xuICAgICAgICAgICAgICBtYXJrQXR0cnNBY2Nlc3NlZCgpO1xuICAgICAgICAgICAgICByZXR1cm4gYXR0cnM7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgc2xvdHMsXG4gICAgICAgICAgICBlbWl0XG4gICAgICAgICAgfSA6IHsgYXR0cnMsIHNsb3RzLCBlbWl0IH1cbiAgICAgICAgKSA6IHJlbmRlcjIoXG4gICAgICAgICAgcHJvcHMsXG4gICAgICAgICAgbnVsbFxuICAgICAgICAgIC8qIHdlIGtub3cgaXQgZG9lc24ndCBuZWVkIGl0ICovXG4gICAgICAgIClcbiAgICAgICk7XG4gICAgICBmYWxsdGhyb3VnaEF0dHJzID0gQ29tcG9uZW50LnByb3BzID8gYXR0cnMgOiBnZXRGdW5jdGlvbmFsRmFsbHRocm91Z2goYXR0cnMpO1xuICAgIH1cbiAgfSBjYXRjaCAoZXJyKSB7XG4gICAgYmxvY2tTdGFjay5sZW5ndGggPSAwO1xuICAgIGhhbmRsZUVycm9yKGVyciwgaW5zdGFuY2UsIDEpO1xuICAgIHJlc3VsdCA9IGNyZWF0ZVZOb2RlKENvbW1lbnQpO1xuICB9XG4gIGxldCByb290ID0gcmVzdWx0O1xuICBsZXQgc2V0Um9vdCA9IHZvaWQgMDtcbiAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgJiYgcmVzdWx0LnBhdGNoRmxhZyA+IDAgJiYgcmVzdWx0LnBhdGNoRmxhZyAmIDIwNDgpIHtcbiAgICBbcm9vdCwgc2V0Um9vdF0gPSBnZXRDaGlsZFJvb3QocmVzdWx0KTtcbiAgfVxuICBpZiAoZmFsbHRocm91Z2hBdHRycyAmJiBpbmhlcml0QXR0cnMgIT09IGZhbHNlKSB7XG4gICAgY29uc3Qga2V5cyA9IE9iamVjdC5rZXlzKGZhbGx0aHJvdWdoQXR0cnMpO1xuICAgIGNvbnN0IHsgc2hhcGVGbGFnIH0gPSByb290O1xuICAgIGlmIChrZXlzLmxlbmd0aCkge1xuICAgICAgaWYgKHNoYXBlRmxhZyAmICgxIHwgNikpIHtcbiAgICAgICAgaWYgKHByb3BzT3B0aW9ucyAmJiBrZXlzLnNvbWUoaXNNb2RlbExpc3RlbmVyKSkge1xuICAgICAgICAgIGZhbGx0aHJvdWdoQXR0cnMgPSBmaWx0ZXJNb2RlbExpc3RlbmVycyhcbiAgICAgICAgICAgIGZhbGx0aHJvdWdoQXR0cnMsXG4gICAgICAgICAgICBwcm9wc09wdGlvbnNcbiAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICAgIHJvb3QgPSBjbG9uZVZOb2RlKHJvb3QsIGZhbGx0aHJvdWdoQXR0cnMpO1xuICAgICAgfSBlbHNlIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpICYmICFhY2Nlc3NlZEF0dHJzICYmIHJvb3QudHlwZSAhPT0gQ29tbWVudCkge1xuICAgICAgICBjb25zdCBhbGxBdHRycyA9IE9iamVjdC5rZXlzKGF0dHJzKTtcbiAgICAgICAgY29uc3QgZXZlbnRBdHRycyA9IFtdO1xuICAgICAgICBjb25zdCBleHRyYUF0dHJzID0gW107XG4gICAgICAgIGZvciAobGV0IGkgPSAwLCBsID0gYWxsQXR0cnMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgICAgY29uc3Qga2V5ID0gYWxsQXR0cnNbaV07XG4gICAgICAgICAgaWYgKGlzT24oa2V5KSkge1xuICAgICAgICAgICAgaWYgKCFpc01vZGVsTGlzdGVuZXIoa2V5KSkge1xuICAgICAgICAgICAgICBldmVudEF0dHJzLnB1c2goa2V5WzJdLnRvTG93ZXJDYXNlKCkgKyBrZXkuc2xpY2UoMykpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBleHRyYUF0dHJzLnB1c2goa2V5KTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGV4dHJhQXR0cnMubGVuZ3RoKSB7XG4gICAgICAgICAgd2FybiQxKFxuICAgICAgICAgICAgYEV4dHJhbmVvdXMgbm9uLXByb3BzIGF0dHJpYnV0ZXMgKCR7ZXh0cmFBdHRycy5qb2luKFwiLCBcIil9KSB3ZXJlIHBhc3NlZCB0byBjb21wb25lbnQgYnV0IGNvdWxkIG5vdCBiZSBhdXRvbWF0aWNhbGx5IGluaGVyaXRlZCBiZWNhdXNlIGNvbXBvbmVudCByZW5kZXJzIGZyYWdtZW50IG9yIHRleHQgcm9vdCBub2Rlcy5gXG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZXZlbnRBdHRycy5sZW5ndGgpIHtcbiAgICAgICAgICB3YXJuJDEoXG4gICAgICAgICAgICBgRXh0cmFuZW91cyBub24tZW1pdHMgZXZlbnQgbGlzdGVuZXJzICgke2V2ZW50QXR0cnMuam9pbihcIiwgXCIpfSkgd2VyZSBwYXNzZWQgdG8gY29tcG9uZW50IGJ1dCBjb3VsZCBub3QgYmUgYXV0b21hdGljYWxseSBpbmhlcml0ZWQgYmVjYXVzZSBjb21wb25lbnQgcmVuZGVycyBmcmFnbWVudCBvciB0ZXh0IHJvb3Qgbm9kZXMuIElmIHRoZSBsaXN0ZW5lciBpcyBpbnRlbmRlZCB0byBiZSBhIGNvbXBvbmVudCBjdXN0b20gZXZlbnQgbGlzdGVuZXIgb25seSwgZGVjbGFyZSBpdCB1c2luZyB0aGUgXCJlbWl0c1wiIG9wdGlvbi5gXG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuICBpZiAodm5vZGUuZGlycykge1xuICAgIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpICYmICFpc0VsZW1lbnRSb290KHJvb3QpKSB7XG4gICAgICB3YXJuJDEoXG4gICAgICAgIGBSdW50aW1lIGRpcmVjdGl2ZSB1c2VkIG9uIGNvbXBvbmVudCB3aXRoIG5vbi1lbGVtZW50IHJvb3Qgbm9kZS4gVGhlIGRpcmVjdGl2ZXMgd2lsbCBub3QgZnVuY3Rpb24gYXMgaW50ZW5kZWQuYFxuICAgICAgKTtcbiAgICB9XG4gICAgcm9vdCA9IGNsb25lVk5vZGUocm9vdCk7XG4gICAgcm9vdC5kaXJzID0gcm9vdC5kaXJzID8gcm9vdC5kaXJzLmNvbmNhdCh2bm9kZS5kaXJzKSA6IHZub2RlLmRpcnM7XG4gIH1cbiAgaWYgKHZub2RlLnRyYW5zaXRpb24pIHtcbiAgICBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSAmJiAhaXNFbGVtZW50Um9vdChyb290KSkge1xuICAgICAgd2FybiQxKFxuICAgICAgICBgQ29tcG9uZW50IGluc2lkZSA8VHJhbnNpdGlvbj4gcmVuZGVycyBub24tZWxlbWVudCByb290IG5vZGUgdGhhdCBjYW5ub3QgYmUgYW5pbWF0ZWQuYFxuICAgICAgKTtcbiAgICB9XG4gICAgcm9vdC50cmFuc2l0aW9uID0gdm5vZGUudHJhbnNpdGlvbjtcbiAgfVxuICBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSAmJiBzZXRSb290KSB7XG4gICAgc2V0Um9vdChyb290KTtcbiAgfSBlbHNlIHtcbiAgICByZXN1bHQgPSByb290O1xuICB9XG4gIHNldEN1cnJlbnRSZW5kZXJpbmdJbnN0YW5jZShwcmV2KTtcbiAgcmV0dXJuIHJlc3VsdDtcbn1cbmNvbnN0IGdldENoaWxkUm9vdCA9ICh2bm9kZSkgPT4ge1xuICBjb25zdCByYXdDaGlsZHJlbiA9IHZub2RlLmNoaWxkcmVuO1xuICBjb25zdCBkeW5hbWljQ2hpbGRyZW4gPSB2bm9kZS5keW5hbWljQ2hpbGRyZW47XG4gIGNvbnN0IGNoaWxkUm9vdCA9IGZpbHRlclNpbmdsZVJvb3QocmF3Q2hpbGRyZW4sIGZhbHNlKTtcbiAgaWYgKCFjaGlsZFJvb3QpIHtcbiAgICByZXR1cm4gW3Zub2RlLCB2b2lkIDBdO1xuICB9IGVsc2UgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgJiYgY2hpbGRSb290LnBhdGNoRmxhZyA+IDAgJiYgY2hpbGRSb290LnBhdGNoRmxhZyAmIDIwNDgpIHtcbiAgICByZXR1cm4gZ2V0Q2hpbGRSb290KGNoaWxkUm9vdCk7XG4gIH1cbiAgY29uc3QgaW5kZXggPSByYXdDaGlsZHJlbi5pbmRleE9mKGNoaWxkUm9vdCk7XG4gIGNvbnN0IGR5bmFtaWNJbmRleCA9IGR5bmFtaWNDaGlsZHJlbiA/IGR5bmFtaWNDaGlsZHJlbi5pbmRleE9mKGNoaWxkUm9vdCkgOiAtMTtcbiAgY29uc3Qgc2V0Um9vdCA9ICh1cGRhdGVkUm9vdCkgPT4ge1xuICAgIHJhd0NoaWxkcmVuW2luZGV4XSA9IHVwZGF0ZWRSb290O1xuICAgIGlmIChkeW5hbWljQ2hpbGRyZW4pIHtcbiAgICAgIGlmIChkeW5hbWljSW5kZXggPiAtMSkge1xuICAgICAgICBkeW5hbWljQ2hpbGRyZW5bZHluYW1pY0luZGV4XSA9IHVwZGF0ZWRSb290O1xuICAgICAgfSBlbHNlIGlmICh1cGRhdGVkUm9vdC5wYXRjaEZsYWcgPiAwKSB7XG4gICAgICAgIHZub2RlLmR5bmFtaWNDaGlsZHJlbiA9IFsuLi5keW5hbWljQ2hpbGRyZW4sIHVwZGF0ZWRSb290XTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG4gIHJldHVybiBbbm9ybWFsaXplVk5vZGUoY2hpbGRSb290KSwgc2V0Um9vdF07XG59O1xuZnVuY3Rpb24gZmlsdGVyU2luZ2xlUm9vdChjaGlsZHJlbiwgcmVjdXJzZSA9IHRydWUpIHtcbiAgbGV0IHNpbmdsZVJvb3Q7XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgY2hpbGRyZW4ubGVuZ3RoOyBpKyspIHtcbiAgICBjb25zdCBjaGlsZCA9IGNoaWxkcmVuW2ldO1xuICAgIGlmIChpc1ZOb2RlKGNoaWxkKSkge1xuICAgICAgaWYgKGNoaWxkLnR5cGUgIT09IENvbW1lbnQgfHwgY2hpbGQuY2hpbGRyZW4gPT09IFwidi1pZlwiKSB7XG4gICAgICAgIGlmIChzaW5nbGVSb290KSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHNpbmdsZVJvb3QgPSBjaGlsZDtcbiAgICAgICAgICBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSAmJiByZWN1cnNlICYmIHNpbmdsZVJvb3QucGF0Y2hGbGFnID4gMCAmJiBzaW5nbGVSb290LnBhdGNoRmxhZyAmIDIwNDgpIHtcbiAgICAgICAgICAgIHJldHVybiBmaWx0ZXJTaW5nbGVSb290KHNpbmdsZVJvb3QuY2hpbGRyZW4pO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICB9XG4gIHJldHVybiBzaW5nbGVSb290O1xufVxuY29uc3QgZ2V0RnVuY3Rpb25hbEZhbGx0aHJvdWdoID0gKGF0dHJzKSA9PiB7XG4gIGxldCByZXM7XG4gIGZvciAoY29uc3Qga2V5IGluIGF0dHJzKSB7XG4gICAgaWYgKGtleSA9PT0gXCJjbGFzc1wiIHx8IGtleSA9PT0gXCJzdHlsZVwiIHx8IGlzT24oa2V5KSkge1xuICAgICAgKHJlcyB8fCAocmVzID0ge30pKVtrZXldID0gYXR0cnNba2V5XTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHJlcztcbn07XG5jb25zdCBmaWx0ZXJNb2RlbExpc3RlbmVycyA9IChhdHRycywgcHJvcHMpID0+IHtcbiAgY29uc3QgcmVzID0ge307XG4gIGZvciAoY29uc3Qga2V5IGluIGF0dHJzKSB7XG4gICAgaWYgKCFpc01vZGVsTGlzdGVuZXIoa2V5KSB8fCAhKGtleS5zbGljZSg5KSBpbiBwcm9wcykpIHtcbiAgICAgIHJlc1trZXldID0gYXR0cnNba2V5XTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHJlcztcbn07XG5jb25zdCBpc0VsZW1lbnRSb290ID0gKHZub2RlKSA9PiB7XG4gIHJldHVybiB2bm9kZS5zaGFwZUZsYWcgJiAoNiB8IDEpIHx8IHZub2RlLnR5cGUgPT09IENvbW1lbnQ7XG59O1xuZnVuY3Rpb24gc2hvdWxkVXBkYXRlQ29tcG9uZW50KHByZXZWTm9kZSwgbmV4dFZOb2RlLCBvcHRpbWl6ZWQpIHtcbiAgY29uc3QgeyBwcm9wczogcHJldlByb3BzLCBjaGlsZHJlbjogcHJldkNoaWxkcmVuLCBjb21wb25lbnQgfSA9IHByZXZWTm9kZTtcbiAgY29uc3QgeyBwcm9wczogbmV4dFByb3BzLCBjaGlsZHJlbjogbmV4dENoaWxkcmVuLCBwYXRjaEZsYWcgfSA9IG5leHRWTm9kZTtcbiAgY29uc3QgZW1pdHMgPSBjb21wb25lbnQuZW1pdHNPcHRpb25zO1xuICBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSAmJiAocHJldkNoaWxkcmVuIHx8IG5leHRDaGlsZHJlbikgJiYgaXNIbXJVcGRhdGluZykge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG4gIGlmIChuZXh0Vk5vZGUuZGlycyB8fCBuZXh0Vk5vZGUudHJhbnNpdGlvbikge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG4gIGlmIChvcHRpbWl6ZWQgJiYgcGF0Y2hGbGFnID49IDApIHtcbiAgICBpZiAocGF0Y2hGbGFnICYgMTAyNCkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIGlmIChwYXRjaEZsYWcgJiAxNikge1xuICAgICAgaWYgKCFwcmV2UHJvcHMpIHtcbiAgICAgICAgcmV0dXJuICEhbmV4dFByb3BzO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGhhc1Byb3BzQ2hhbmdlZChwcmV2UHJvcHMsIG5leHRQcm9wcywgZW1pdHMpO1xuICAgIH0gZWxzZSBpZiAocGF0Y2hGbGFnICYgOCkge1xuICAgICAgY29uc3QgZHluYW1pY1Byb3BzID0gbmV4dFZOb2RlLmR5bmFtaWNQcm9wcztcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZHluYW1pY1Byb3BzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGNvbnN0IGtleSA9IGR5bmFtaWNQcm9wc1tpXTtcbiAgICAgICAgaWYgKG5leHRQcm9wc1trZXldICE9PSBwcmV2UHJvcHNba2V5XSAmJiAhaXNFbWl0TGlzdGVuZXIoZW1pdHMsIGtleSkpIHtcbiAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfSBlbHNlIHtcbiAgICBpZiAocHJldkNoaWxkcmVuIHx8IG5leHRDaGlsZHJlbikge1xuICAgICAgaWYgKCFuZXh0Q2hpbGRyZW4gfHwgIW5leHRDaGlsZHJlbi4kc3RhYmxlKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAocHJldlByb3BzID09PSBuZXh0UHJvcHMpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgaWYgKCFwcmV2UHJvcHMpIHtcbiAgICAgIHJldHVybiAhIW5leHRQcm9wcztcbiAgICB9XG4gICAgaWYgKCFuZXh0UHJvcHMpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICByZXR1cm4gaGFzUHJvcHNDaGFuZ2VkKHByZXZQcm9wcywgbmV4dFByb3BzLCBlbWl0cyk7XG4gIH1cbiAgcmV0dXJuIGZhbHNlO1xufVxuZnVuY3Rpb24gaGFzUHJvcHNDaGFuZ2VkKHByZXZQcm9wcywgbmV4dFByb3BzLCBlbWl0c09wdGlvbnMpIHtcbiAgY29uc3QgbmV4dEtleXMgPSBPYmplY3Qua2V5cyhuZXh0UHJvcHMpO1xuICBpZiAobmV4dEtleXMubGVuZ3RoICE9PSBPYmplY3Qua2V5cyhwcmV2UHJvcHMpLmxlbmd0aCkge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgbmV4dEtleXMubGVuZ3RoOyBpKyspIHtcbiAgICBjb25zdCBrZXkgPSBuZXh0S2V5c1tpXTtcbiAgICBpZiAobmV4dFByb3BzW2tleV0gIT09IHByZXZQcm9wc1trZXldICYmICFpc0VtaXRMaXN0ZW5lcihlbWl0c09wdGlvbnMsIGtleSkpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgfVxuICByZXR1cm4gZmFsc2U7XG59XG5mdW5jdGlvbiB1cGRhdGVIT0NIb3N0RWwoeyB2bm9kZSwgcGFyZW50IH0sIGVsKSB7XG4gIHdoaWxlIChwYXJlbnQpIHtcbiAgICBjb25zdCByb290ID0gcGFyZW50LnN1YlRyZWU7XG4gICAgaWYgKHJvb3Quc3VzcGVuc2UgJiYgcm9vdC5zdXNwZW5zZS5hY3RpdmVCcmFuY2ggPT09IHZub2RlKSB7XG4gICAgICByb290LmVsID0gdm5vZGUuZWw7XG4gICAgfVxuICAgIGlmIChyb290ID09PSB2bm9kZSkge1xuICAgICAgKHZub2RlID0gcGFyZW50LnZub2RlKS5lbCA9IGVsO1xuICAgICAgcGFyZW50ID0gcGFyZW50LnBhcmVudDtcbiAgICB9IGVsc2Uge1xuICAgICAgYnJlYWs7XG4gICAgfVxuICB9XG59XG5cbmNvbnN0IENPTVBPTkVOVFMgPSBcImNvbXBvbmVudHNcIjtcbmNvbnN0IERJUkVDVElWRVMgPSBcImRpcmVjdGl2ZXNcIjtcbmZ1bmN0aW9uIHJlc29sdmVDb21wb25lbnQobmFtZSwgbWF5YmVTZWxmUmVmZXJlbmNlKSB7XG4gIHJldHVybiByZXNvbHZlQXNzZXQoQ09NUE9ORU5UUywgbmFtZSwgdHJ1ZSwgbWF5YmVTZWxmUmVmZXJlbmNlKSB8fCBuYW1lO1xufVxuY29uc3QgTlVMTF9EWU5BTUlDX0NPTVBPTkVOVCA9IFN5bWJvbC5mb3IoXCJ2LW5kY1wiKTtcbmZ1bmN0aW9uIHJlc29sdmVEeW5hbWljQ29tcG9uZW50KGNvbXBvbmVudCkge1xuICBpZiAoaXNTdHJpbmcoY29tcG9uZW50KSkge1xuICAgIHJldHVybiByZXNvbHZlQXNzZXQoQ09NUE9ORU5UUywgY29tcG9uZW50LCBmYWxzZSkgfHwgY29tcG9uZW50O1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBjb21wb25lbnQgfHwgTlVMTF9EWU5BTUlDX0NPTVBPTkVOVDtcbiAgfVxufVxuZnVuY3Rpb24gcmVzb2x2ZURpcmVjdGl2ZShuYW1lKSB7XG4gIHJldHVybiByZXNvbHZlQXNzZXQoRElSRUNUSVZFUywgbmFtZSk7XG59XG5mdW5jdGlvbiByZXNvbHZlQXNzZXQodHlwZSwgbmFtZSwgd2Fybk1pc3NpbmcgPSB0cnVlLCBtYXliZVNlbGZSZWZlcmVuY2UgPSBmYWxzZSkge1xuICBjb25zdCBpbnN0YW5jZSA9IGN1cnJlbnRSZW5kZXJpbmdJbnN0YW5jZSB8fCBjdXJyZW50SW5zdGFuY2U7XG4gIGlmIChpbnN0YW5jZSkge1xuICAgIGNvbnN0IENvbXBvbmVudCA9IGluc3RhbmNlLnR5cGU7XG4gICAgaWYgKHR5cGUgPT09IENPTVBPTkVOVFMpIHtcbiAgICAgIGNvbnN0IHNlbGZOYW1lID0gZ2V0Q29tcG9uZW50TmFtZShcbiAgICAgICAgQ29tcG9uZW50LFxuICAgICAgICBmYWxzZVxuICAgICAgKTtcbiAgICAgIGlmIChzZWxmTmFtZSAmJiAoc2VsZk5hbWUgPT09IG5hbWUgfHwgc2VsZk5hbWUgPT09IGNhbWVsaXplKG5hbWUpIHx8IHNlbGZOYW1lID09PSBjYXBpdGFsaXplKGNhbWVsaXplKG5hbWUpKSkpIHtcbiAgICAgICAgcmV0dXJuIENvbXBvbmVudDtcbiAgICAgIH1cbiAgICB9XG4gICAgY29uc3QgcmVzID0gKFxuICAgICAgLy8gbG9jYWwgcmVnaXN0cmF0aW9uXG4gICAgICAvLyBjaGVjayBpbnN0YW5jZVt0eXBlXSBmaXJzdCB3aGljaCBpcyByZXNvbHZlZCBmb3Igb3B0aW9ucyBBUElcbiAgICAgIHJlc29sdmUoaW5zdGFuY2VbdHlwZV0gfHwgQ29tcG9uZW50W3R5cGVdLCBuYW1lKSB8fCAvLyBnbG9iYWwgcmVnaXN0cmF0aW9uXG4gICAgICByZXNvbHZlKGluc3RhbmNlLmFwcENvbnRleHRbdHlwZV0sIG5hbWUpXG4gICAgKTtcbiAgICBpZiAoIXJlcyAmJiBtYXliZVNlbGZSZWZlcmVuY2UpIHtcbiAgICAgIHJldHVybiBDb21wb25lbnQ7XG4gICAgfVxuICAgIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpICYmIHdhcm5NaXNzaW5nICYmICFyZXMpIHtcbiAgICAgIGNvbnN0IGV4dHJhID0gdHlwZSA9PT0gQ09NUE9ORU5UUyA/IGBcbklmIHRoaXMgaXMgYSBuYXRpdmUgY3VzdG9tIGVsZW1lbnQsIG1ha2Ugc3VyZSB0byBleGNsdWRlIGl0IGZyb20gY29tcG9uZW50IHJlc29sdXRpb24gdmlhIGNvbXBpbGVyT3B0aW9ucy5pc0N1c3RvbUVsZW1lbnQuYCA6IGBgO1xuICAgICAgd2FybiQxKGBGYWlsZWQgdG8gcmVzb2x2ZSAke3R5cGUuc2xpY2UoMCwgLTEpfTogJHtuYW1lfSR7ZXh0cmF9YCk7XG4gICAgfVxuICAgIHJldHVybiByZXM7XG4gIH0gZWxzZSBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSkge1xuICAgIHdhcm4kMShcbiAgICAgIGByZXNvbHZlJHtjYXBpdGFsaXplKHR5cGUuc2xpY2UoMCwgLTEpKX0gY2FuIG9ubHkgYmUgdXNlZCBpbiByZW5kZXIoKSBvciBzZXR1cCgpLmBcbiAgICApO1xuICB9XG59XG5mdW5jdGlvbiByZXNvbHZlKHJlZ2lzdHJ5LCBuYW1lKSB7XG4gIHJldHVybiByZWdpc3RyeSAmJiAocmVnaXN0cnlbbmFtZV0gfHwgcmVnaXN0cnlbY2FtZWxpemUobmFtZSldIHx8IHJlZ2lzdHJ5W2NhcGl0YWxpemUoY2FtZWxpemUobmFtZSkpXSk7XG59XG5cbmNvbnN0IGlzU3VzcGVuc2UgPSAodHlwZSkgPT4gdHlwZS5fX2lzU3VzcGVuc2U7XG5sZXQgc3VzcGVuc2VJZCA9IDA7XG5jb25zdCBTdXNwZW5zZUltcGwgPSB7XG4gIG5hbWU6IFwiU3VzcGVuc2VcIixcbiAgLy8gSW4gb3JkZXIgdG8gbWFrZSBTdXNwZW5zZSB0cmVlLXNoYWthYmxlLCB3ZSBuZWVkIHRvIGF2b2lkIGltcG9ydGluZyBpdFxuICAvLyBkaXJlY3RseSBpbiB0aGUgcmVuZGVyZXIuIFRoZSByZW5kZXJlciBjaGVja3MgZm9yIHRoZSBfX2lzU3VzcGVuc2UgZmxhZ1xuICAvLyBvbiBhIHZub2RlJ3MgdHlwZSBhbmQgY2FsbHMgdGhlIGBwcm9jZXNzYCBtZXRob2QsIHBhc3NpbmcgaW4gcmVuZGVyZXJcbiAgLy8gaW50ZXJuYWxzLlxuICBfX2lzU3VzcGVuc2U6IHRydWUsXG4gIHByb2Nlc3MobjEsIG4yLCBjb250YWluZXIsIGFuY2hvciwgcGFyZW50Q29tcG9uZW50LCBwYXJlbnRTdXNwZW5zZSwgbmFtZXNwYWNlLCBzbG90U2NvcGVJZHMsIG9wdGltaXplZCwgcmVuZGVyZXJJbnRlcm5hbHMpIHtcbiAgICBpZiAobjEgPT0gbnVsbCkge1xuICAgICAgbW91bnRTdXNwZW5zZShcbiAgICAgICAgbjIsXG4gICAgICAgIGNvbnRhaW5lcixcbiAgICAgICAgYW5jaG9yLFxuICAgICAgICBwYXJlbnRDb21wb25lbnQsXG4gICAgICAgIHBhcmVudFN1c3BlbnNlLFxuICAgICAgICBuYW1lc3BhY2UsXG4gICAgICAgIHNsb3RTY29wZUlkcyxcbiAgICAgICAgb3B0aW1pemVkLFxuICAgICAgICByZW5kZXJlckludGVybmFsc1xuICAgICAgKTtcbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKHBhcmVudFN1c3BlbnNlICYmIHBhcmVudFN1c3BlbnNlLmRlcHMgPiAwICYmICFuMS5zdXNwZW5zZS5pc0luRmFsbGJhY2spIHtcbiAgICAgICAgbjIuc3VzcGVuc2UgPSBuMS5zdXNwZW5zZTtcbiAgICAgICAgbjIuc3VzcGVuc2Uudm5vZGUgPSBuMjtcbiAgICAgICAgbjIuZWwgPSBuMS5lbDtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgcGF0Y2hTdXNwZW5zZShcbiAgICAgICAgbjEsXG4gICAgICAgIG4yLFxuICAgICAgICBjb250YWluZXIsXG4gICAgICAgIGFuY2hvcixcbiAgICAgICAgcGFyZW50Q29tcG9uZW50LFxuICAgICAgICBuYW1lc3BhY2UsXG4gICAgICAgIHNsb3RTY29wZUlkcyxcbiAgICAgICAgb3B0aW1pemVkLFxuICAgICAgICByZW5kZXJlckludGVybmFsc1xuICAgICAgKTtcbiAgICB9XG4gIH0sXG4gIGh5ZHJhdGU6IGh5ZHJhdGVTdXNwZW5zZSxcbiAgY3JlYXRlOiBjcmVhdGVTdXNwZW5zZUJvdW5kYXJ5LFxuICBub3JtYWxpemU6IG5vcm1hbGl6ZVN1c3BlbnNlQ2hpbGRyZW5cbn07XG5jb25zdCBTdXNwZW5zZSA9IFN1c3BlbnNlSW1wbCA7XG5mdW5jdGlvbiB0cmlnZ2VyRXZlbnQodm5vZGUsIG5hbWUpIHtcbiAgY29uc3QgZXZlbnRMaXN0ZW5lciA9IHZub2RlLnByb3BzICYmIHZub2RlLnByb3BzW25hbWVdO1xuICBpZiAoaXNGdW5jdGlvbihldmVudExpc3RlbmVyKSkge1xuICAgIGV2ZW50TGlzdGVuZXIoKTtcbiAgfVxufVxuZnVuY3Rpb24gbW91bnRTdXNwZW5zZSh2bm9kZSwgY29udGFpbmVyLCBhbmNob3IsIHBhcmVudENvbXBvbmVudCwgcGFyZW50U3VzcGVuc2UsIG5hbWVzcGFjZSwgc2xvdFNjb3BlSWRzLCBvcHRpbWl6ZWQsIHJlbmRlcmVySW50ZXJuYWxzKSB7XG4gIGNvbnN0IHtcbiAgICBwOiBwYXRjaCxcbiAgICBvOiB7IGNyZWF0ZUVsZW1lbnQgfVxuICB9ID0gcmVuZGVyZXJJbnRlcm5hbHM7XG4gIGNvbnN0IGhpZGRlbkNvbnRhaW5lciA9IGNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gIGNvbnN0IHN1c3BlbnNlID0gdm5vZGUuc3VzcGVuc2UgPSBjcmVhdGVTdXNwZW5zZUJvdW5kYXJ5KFxuICAgIHZub2RlLFxuICAgIHBhcmVudFN1c3BlbnNlLFxuICAgIHBhcmVudENvbXBvbmVudCxcbiAgICBjb250YWluZXIsXG4gICAgaGlkZGVuQ29udGFpbmVyLFxuICAgIGFuY2hvcixcbiAgICBuYW1lc3BhY2UsXG4gICAgc2xvdFNjb3BlSWRzLFxuICAgIG9wdGltaXplZCxcbiAgICByZW5kZXJlckludGVybmFsc1xuICApO1xuICBwYXRjaChcbiAgICBudWxsLFxuICAgIHN1c3BlbnNlLnBlbmRpbmdCcmFuY2ggPSB2bm9kZS5zc0NvbnRlbnQsXG4gICAgaGlkZGVuQ29udGFpbmVyLFxuICAgIG51bGwsXG4gICAgcGFyZW50Q29tcG9uZW50LFxuICAgIHN1c3BlbnNlLFxuICAgIG5hbWVzcGFjZSxcbiAgICBzbG90U2NvcGVJZHNcbiAgKTtcbiAgaWYgKHN1c3BlbnNlLmRlcHMgPiAwKSB7XG4gICAgdHJpZ2dlckV2ZW50KHZub2RlLCBcIm9uUGVuZGluZ1wiKTtcbiAgICB0cmlnZ2VyRXZlbnQodm5vZGUsIFwib25GYWxsYmFja1wiKTtcbiAgICBwYXRjaChcbiAgICAgIG51bGwsXG4gICAgICB2bm9kZS5zc0ZhbGxiYWNrLFxuICAgICAgY29udGFpbmVyLFxuICAgICAgYW5jaG9yLFxuICAgICAgcGFyZW50Q29tcG9uZW50LFxuICAgICAgbnVsbCxcbiAgICAgIC8vIGZhbGxiYWNrIHRyZWUgd2lsbCBub3QgaGF2ZSBzdXNwZW5zZSBjb250ZXh0XG4gICAgICBuYW1lc3BhY2UsXG4gICAgICBzbG90U2NvcGVJZHNcbiAgICApO1xuICAgIHNldEFjdGl2ZUJyYW5jaChzdXNwZW5zZSwgdm5vZGUuc3NGYWxsYmFjayk7XG4gIH0gZWxzZSB7XG4gICAgc3VzcGVuc2UucmVzb2x2ZShmYWxzZSwgdHJ1ZSk7XG4gIH1cbn1cbmZ1bmN0aW9uIHBhdGNoU3VzcGVuc2UobjEsIG4yLCBjb250YWluZXIsIGFuY2hvciwgcGFyZW50Q29tcG9uZW50LCBuYW1lc3BhY2UsIHNsb3RTY29wZUlkcywgb3B0aW1pemVkLCB7IHA6IHBhdGNoLCB1bTogdW5tb3VudCwgbzogeyBjcmVhdGVFbGVtZW50IH0gfSkge1xuICBjb25zdCBzdXNwZW5zZSA9IG4yLnN1c3BlbnNlID0gbjEuc3VzcGVuc2U7XG4gIHN1c3BlbnNlLnZub2RlID0gbjI7XG4gIG4yLmVsID0gbjEuZWw7XG4gIGNvbnN0IG5ld0JyYW5jaCA9IG4yLnNzQ29udGVudDtcbiAgY29uc3QgbmV3RmFsbGJhY2sgPSBuMi5zc0ZhbGxiYWNrO1xuICBjb25zdCB7IGFjdGl2ZUJyYW5jaCwgcGVuZGluZ0JyYW5jaCwgaXNJbkZhbGxiYWNrLCBpc0h5ZHJhdGluZyB9ID0gc3VzcGVuc2U7XG4gIGlmIChwZW5kaW5nQnJhbmNoKSB7XG4gICAgc3VzcGVuc2UucGVuZGluZ0JyYW5jaCA9IG5ld0JyYW5jaDtcbiAgICBpZiAoaXNTYW1lVk5vZGVUeXBlKG5ld0JyYW5jaCwgcGVuZGluZ0JyYW5jaCkpIHtcbiAgICAgIHBhdGNoKFxuICAgICAgICBwZW5kaW5nQnJhbmNoLFxuICAgICAgICBuZXdCcmFuY2gsXG4gICAgICAgIHN1c3BlbnNlLmhpZGRlbkNvbnRhaW5lcixcbiAgICAgICAgbnVsbCxcbiAgICAgICAgcGFyZW50Q29tcG9uZW50LFxuICAgICAgICBzdXNwZW5zZSxcbiAgICAgICAgbmFtZXNwYWNlLFxuICAgICAgICBzbG90U2NvcGVJZHMsXG4gICAgICAgIG9wdGltaXplZFxuICAgICAgKTtcbiAgICAgIGlmIChzdXNwZW5zZS5kZXBzIDw9IDApIHtcbiAgICAgICAgc3VzcGVuc2UucmVzb2x2ZSgpO1xuICAgICAgfSBlbHNlIGlmIChpc0luRmFsbGJhY2spIHtcbiAgICAgICAgaWYgKCFpc0h5ZHJhdGluZykge1xuICAgICAgICAgIHBhdGNoKFxuICAgICAgICAgICAgYWN0aXZlQnJhbmNoLFxuICAgICAgICAgICAgbmV3RmFsbGJhY2ssXG4gICAgICAgICAgICBjb250YWluZXIsXG4gICAgICAgICAgICBhbmNob3IsXG4gICAgICAgICAgICBwYXJlbnRDb21wb25lbnQsXG4gICAgICAgICAgICBudWxsLFxuICAgICAgICAgICAgLy8gZmFsbGJhY2sgdHJlZSB3aWxsIG5vdCBoYXZlIHN1c3BlbnNlIGNvbnRleHRcbiAgICAgICAgICAgIG5hbWVzcGFjZSxcbiAgICAgICAgICAgIHNsb3RTY29wZUlkcyxcbiAgICAgICAgICAgIG9wdGltaXplZFxuICAgICAgICAgICk7XG4gICAgICAgICAgc2V0QWN0aXZlQnJhbmNoKHN1c3BlbnNlLCBuZXdGYWxsYmFjayk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgc3VzcGVuc2UucGVuZGluZ0lkID0gc3VzcGVuc2VJZCsrO1xuICAgICAgaWYgKGlzSHlkcmF0aW5nKSB7XG4gICAgICAgIHN1c3BlbnNlLmlzSHlkcmF0aW5nID0gZmFsc2U7XG4gICAgICAgIHN1c3BlbnNlLmFjdGl2ZUJyYW5jaCA9IHBlbmRpbmdCcmFuY2g7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB1bm1vdW50KHBlbmRpbmdCcmFuY2gsIHBhcmVudENvbXBvbmVudCwgc3VzcGVuc2UpO1xuICAgICAgfVxuICAgICAgc3VzcGVuc2UuZGVwcyA9IDA7XG4gICAgICBzdXNwZW5zZS5lZmZlY3RzLmxlbmd0aCA9IDA7XG4gICAgICBzdXNwZW5zZS5oaWRkZW5Db250YWluZXIgPSBjcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgaWYgKGlzSW5GYWxsYmFjaykge1xuICAgICAgICBwYXRjaChcbiAgICAgICAgICBudWxsLFxuICAgICAgICAgIG5ld0JyYW5jaCxcbiAgICAgICAgICBzdXNwZW5zZS5oaWRkZW5Db250YWluZXIsXG4gICAgICAgICAgbnVsbCxcbiAgICAgICAgICBwYXJlbnRDb21wb25lbnQsXG4gICAgICAgICAgc3VzcGVuc2UsXG4gICAgICAgICAgbmFtZXNwYWNlLFxuICAgICAgICAgIHNsb3RTY29wZUlkcyxcbiAgICAgICAgICBvcHRpbWl6ZWRcbiAgICAgICAgKTtcbiAgICAgICAgaWYgKHN1c3BlbnNlLmRlcHMgPD0gMCkge1xuICAgICAgICAgIHN1c3BlbnNlLnJlc29sdmUoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBwYXRjaChcbiAgICAgICAgICAgIGFjdGl2ZUJyYW5jaCxcbiAgICAgICAgICAgIG5ld0ZhbGxiYWNrLFxuICAgICAgICAgICAgY29udGFpbmVyLFxuICAgICAgICAgICAgYW5jaG9yLFxuICAgICAgICAgICAgcGFyZW50Q29tcG9uZW50LFxuICAgICAgICAgICAgbnVsbCxcbiAgICAgICAgICAgIC8vIGZhbGxiYWNrIHRyZWUgd2lsbCBub3QgaGF2ZSBzdXNwZW5zZSBjb250ZXh0XG4gICAgICAgICAgICBuYW1lc3BhY2UsXG4gICAgICAgICAgICBzbG90U2NvcGVJZHMsXG4gICAgICAgICAgICBvcHRpbWl6ZWRcbiAgICAgICAgICApO1xuICAgICAgICAgIHNldEFjdGl2ZUJyYW5jaChzdXNwZW5zZSwgbmV3RmFsbGJhY2spO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKGFjdGl2ZUJyYW5jaCAmJiBpc1NhbWVWTm9kZVR5cGUobmV3QnJhbmNoLCBhY3RpdmVCcmFuY2gpKSB7XG4gICAgICAgIHBhdGNoKFxuICAgICAgICAgIGFjdGl2ZUJyYW5jaCxcbiAgICAgICAgICBuZXdCcmFuY2gsXG4gICAgICAgICAgY29udGFpbmVyLFxuICAgICAgICAgIGFuY2hvcixcbiAgICAgICAgICBwYXJlbnRDb21wb25lbnQsXG4gICAgICAgICAgc3VzcGVuc2UsXG4gICAgICAgICAgbmFtZXNwYWNlLFxuICAgICAgICAgIHNsb3RTY29wZUlkcyxcbiAgICAgICAgICBvcHRpbWl6ZWRcbiAgICAgICAgKTtcbiAgICAgICAgc3VzcGVuc2UucmVzb2x2ZSh0cnVlKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHBhdGNoKFxuICAgICAgICAgIG51bGwsXG4gICAgICAgICAgbmV3QnJhbmNoLFxuICAgICAgICAgIHN1c3BlbnNlLmhpZGRlbkNvbnRhaW5lcixcbiAgICAgICAgICBudWxsLFxuICAgICAgICAgIHBhcmVudENvbXBvbmVudCxcbiAgICAgICAgICBzdXNwZW5zZSxcbiAgICAgICAgICBuYW1lc3BhY2UsXG4gICAgICAgICAgc2xvdFNjb3BlSWRzLFxuICAgICAgICAgIG9wdGltaXplZFxuICAgICAgICApO1xuICAgICAgICBpZiAoc3VzcGVuc2UuZGVwcyA8PSAwKSB7XG4gICAgICAgICAgc3VzcGVuc2UucmVzb2x2ZSgpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIGlmIChhY3RpdmVCcmFuY2ggJiYgaXNTYW1lVk5vZGVUeXBlKG5ld0JyYW5jaCwgYWN0aXZlQnJhbmNoKSkge1xuICAgICAgcGF0Y2goXG4gICAgICAgIGFjdGl2ZUJyYW5jaCxcbiAgICAgICAgbmV3QnJhbmNoLFxuICAgICAgICBjb250YWluZXIsXG4gICAgICAgIGFuY2hvcixcbiAgICAgICAgcGFyZW50Q29tcG9uZW50LFxuICAgICAgICBzdXNwZW5zZSxcbiAgICAgICAgbmFtZXNwYWNlLFxuICAgICAgICBzbG90U2NvcGVJZHMsXG4gICAgICAgIG9wdGltaXplZFxuICAgICAgKTtcbiAgICAgIHNldEFjdGl2ZUJyYW5jaChzdXNwZW5zZSwgbmV3QnJhbmNoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdHJpZ2dlckV2ZW50KG4yLCBcIm9uUGVuZGluZ1wiKTtcbiAgICAgIHN1c3BlbnNlLnBlbmRpbmdCcmFuY2ggPSBuZXdCcmFuY2g7XG4gICAgICBpZiAobmV3QnJhbmNoLnNoYXBlRmxhZyAmIDUxMikge1xuICAgICAgICBzdXNwZW5zZS5wZW5kaW5nSWQgPSBuZXdCcmFuY2guY29tcG9uZW50LnN1c3BlbnNlSWQ7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzdXNwZW5zZS5wZW5kaW5nSWQgPSBzdXNwZW5zZUlkKys7XG4gICAgICB9XG4gICAgICBwYXRjaChcbiAgICAgICAgbnVsbCxcbiAgICAgICAgbmV3QnJhbmNoLFxuICAgICAgICBzdXNwZW5zZS5oaWRkZW5Db250YWluZXIsXG4gICAgICAgIG51bGwsXG4gICAgICAgIHBhcmVudENvbXBvbmVudCxcbiAgICAgICAgc3VzcGVuc2UsXG4gICAgICAgIG5hbWVzcGFjZSxcbiAgICAgICAgc2xvdFNjb3BlSWRzLFxuICAgICAgICBvcHRpbWl6ZWRcbiAgICAgICk7XG4gICAgICBpZiAoc3VzcGVuc2UuZGVwcyA8PSAwKSB7XG4gICAgICAgIHN1c3BlbnNlLnJlc29sdmUoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnN0IHsgdGltZW91dCwgcGVuZGluZ0lkIH0gPSBzdXNwZW5zZTtcbiAgICAgICAgaWYgKHRpbWVvdXQgPiAwKSB7XG4gICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICBpZiAoc3VzcGVuc2UucGVuZGluZ0lkID09PSBwZW5kaW5nSWQpIHtcbiAgICAgICAgICAgICAgc3VzcGVuc2UuZmFsbGJhY2sobmV3RmFsbGJhY2spO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0sIHRpbWVvdXQpO1xuICAgICAgICB9IGVsc2UgaWYgKHRpbWVvdXQgPT09IDApIHtcbiAgICAgICAgICBzdXNwZW5zZS5mYWxsYmFjayhuZXdGYWxsYmFjayk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cbmxldCBoYXNXYXJuZWQgPSBmYWxzZTtcbmZ1bmN0aW9uIGNyZWF0ZVN1c3BlbnNlQm91bmRhcnkodm5vZGUsIHBhcmVudFN1c3BlbnNlLCBwYXJlbnRDb21wb25lbnQsIGNvbnRhaW5lciwgaGlkZGVuQ29udGFpbmVyLCBhbmNob3IsIG5hbWVzcGFjZSwgc2xvdFNjb3BlSWRzLCBvcHRpbWl6ZWQsIHJlbmRlcmVySW50ZXJuYWxzLCBpc0h5ZHJhdGluZyA9IGZhbHNlKSB7XG4gIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpICYmIHRydWUgJiYgIWhhc1dhcm5lZCkge1xuICAgIGhhc1dhcm5lZCA9IHRydWU7XG4gICAgY29uc29sZVtjb25zb2xlLmluZm8gPyBcImluZm9cIiA6IFwibG9nXCJdKFxuICAgICAgYDxTdXNwZW5zZT4gaXMgYW4gZXhwZXJpbWVudGFsIGZlYXR1cmUgYW5kIGl0cyBBUEkgd2lsbCBsaWtlbHkgY2hhbmdlLmBcbiAgICApO1xuICB9XG4gIGNvbnN0IHtcbiAgICBwOiBwYXRjaCxcbiAgICBtOiBtb3ZlLFxuICAgIHVtOiB1bm1vdW50LFxuICAgIG46IG5leHQsXG4gICAgbzogeyBwYXJlbnROb2RlLCByZW1vdmUgfVxuICB9ID0gcmVuZGVyZXJJbnRlcm5hbHM7XG4gIGxldCBwYXJlbnRTdXNwZW5zZUlkO1xuICBjb25zdCBpc1N1c3BlbnNpYmxlID0gaXNWTm9kZVN1c3BlbnNpYmxlKHZub2RlKTtcbiAgaWYgKGlzU3VzcGVuc2libGUpIHtcbiAgICBpZiAocGFyZW50U3VzcGVuc2UgPT0gbnVsbCA/IHZvaWQgMCA6IHBhcmVudFN1c3BlbnNlLnBlbmRpbmdCcmFuY2gpIHtcbiAgICAgIHBhcmVudFN1c3BlbnNlSWQgPSBwYXJlbnRTdXNwZW5zZS5wZW5kaW5nSWQ7XG4gICAgICBwYXJlbnRTdXNwZW5zZS5kZXBzKys7XG4gICAgfVxuICB9XG4gIGNvbnN0IHRpbWVvdXQgPSB2bm9kZS5wcm9wcyA/IHRvTnVtYmVyKHZub2RlLnByb3BzLnRpbWVvdXQpIDogdm9pZCAwO1xuICBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSkge1xuICAgIGFzc2VydE51bWJlcih0aW1lb3V0LCBgU3VzcGVuc2UgdGltZW91dGApO1xuICB9XG4gIGNvbnN0IGluaXRpYWxBbmNob3IgPSBhbmNob3I7XG4gIGNvbnN0IHN1c3BlbnNlID0ge1xuICAgIHZub2RlLFxuICAgIHBhcmVudDogcGFyZW50U3VzcGVuc2UsXG4gICAgcGFyZW50Q29tcG9uZW50LFxuICAgIG5hbWVzcGFjZSxcbiAgICBjb250YWluZXIsXG4gICAgaGlkZGVuQ29udGFpbmVyLFxuICAgIGRlcHM6IDAsXG4gICAgcGVuZGluZ0lkOiBzdXNwZW5zZUlkKyssXG4gICAgdGltZW91dDogdHlwZW9mIHRpbWVvdXQgPT09IFwibnVtYmVyXCIgPyB0aW1lb3V0IDogLTEsXG4gICAgYWN0aXZlQnJhbmNoOiBudWxsLFxuICAgIHBlbmRpbmdCcmFuY2g6IG51bGwsXG4gICAgaXNJbkZhbGxiYWNrOiAhaXNIeWRyYXRpbmcsXG4gICAgaXNIeWRyYXRpbmcsXG4gICAgaXNVbm1vdW50ZWQ6IGZhbHNlLFxuICAgIGVmZmVjdHM6IFtdLFxuICAgIHJlc29sdmUocmVzdW1lID0gZmFsc2UsIHN5bmMgPSBmYWxzZSkge1xuICAgICAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikpIHtcbiAgICAgICAgaWYgKCFyZXN1bWUgJiYgIXN1c3BlbnNlLnBlbmRpbmdCcmFuY2gpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICAgICBgc3VzcGVuc2UucmVzb2x2ZSgpIGlzIGNhbGxlZCB3aXRob3V0IGEgcGVuZGluZyBicmFuY2guYFxuICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHN1c3BlbnNlLmlzVW5tb3VudGVkKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAgICAgYHN1c3BlbnNlLnJlc29sdmUoKSBpcyBjYWxsZWQgb24gYW4gYWxyZWFkeSB1bm1vdW50ZWQgc3VzcGVuc2UgYm91bmRhcnkuYFxuICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGNvbnN0IHtcbiAgICAgICAgdm5vZGU6IHZub2RlMixcbiAgICAgICAgYWN0aXZlQnJhbmNoLFxuICAgICAgICBwZW5kaW5nQnJhbmNoLFxuICAgICAgICBwZW5kaW5nSWQsXG4gICAgICAgIGVmZmVjdHMsXG4gICAgICAgIHBhcmVudENvbXBvbmVudDogcGFyZW50Q29tcG9uZW50MixcbiAgICAgICAgY29udGFpbmVyOiBjb250YWluZXIyXG4gICAgICB9ID0gc3VzcGVuc2U7XG4gICAgICBsZXQgZGVsYXlFbnRlciA9IGZhbHNlO1xuICAgICAgaWYgKHN1c3BlbnNlLmlzSHlkcmF0aW5nKSB7XG4gICAgICAgIHN1c3BlbnNlLmlzSHlkcmF0aW5nID0gZmFsc2U7XG4gICAgICB9IGVsc2UgaWYgKCFyZXN1bWUpIHtcbiAgICAgICAgZGVsYXlFbnRlciA9IGFjdGl2ZUJyYW5jaCAmJiBwZW5kaW5nQnJhbmNoLnRyYW5zaXRpb24gJiYgcGVuZGluZ0JyYW5jaC50cmFuc2l0aW9uLm1vZGUgPT09IFwib3V0LWluXCI7XG4gICAgICAgIGlmIChkZWxheUVudGVyKSB7XG4gICAgICAgICAgYWN0aXZlQnJhbmNoLnRyYW5zaXRpb24uYWZ0ZXJMZWF2ZSA9ICgpID0+IHtcbiAgICAgICAgICAgIGlmIChwZW5kaW5nSWQgPT09IHN1c3BlbnNlLnBlbmRpbmdJZCkge1xuICAgICAgICAgICAgICBtb3ZlKFxuICAgICAgICAgICAgICAgIHBlbmRpbmdCcmFuY2gsXG4gICAgICAgICAgICAgICAgY29udGFpbmVyMixcbiAgICAgICAgICAgICAgICBhbmNob3IgPT09IGluaXRpYWxBbmNob3IgPyBuZXh0KGFjdGl2ZUJyYW5jaCkgOiBhbmNob3IsXG4gICAgICAgICAgICAgICAgMFxuICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICBxdWV1ZVBvc3RGbHVzaENiKGVmZmVjdHMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGFjdGl2ZUJyYW5jaCkge1xuICAgICAgICAgIGlmIChwYXJlbnROb2RlKGFjdGl2ZUJyYW5jaC5lbCkgIT09IHN1c3BlbnNlLmhpZGRlbkNvbnRhaW5lcikge1xuICAgICAgICAgICAgYW5jaG9yID0gbmV4dChhY3RpdmVCcmFuY2gpO1xuICAgICAgICAgIH1cbiAgICAgICAgICB1bm1vdW50KGFjdGl2ZUJyYW5jaCwgcGFyZW50Q29tcG9uZW50Miwgc3VzcGVuc2UsIHRydWUpO1xuICAgICAgICB9XG4gICAgICAgIGlmICghZGVsYXlFbnRlcikge1xuICAgICAgICAgIG1vdmUocGVuZGluZ0JyYW5jaCwgY29udGFpbmVyMiwgYW5jaG9yLCAwKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgc2V0QWN0aXZlQnJhbmNoKHN1c3BlbnNlLCBwZW5kaW5nQnJhbmNoKTtcbiAgICAgIHN1c3BlbnNlLnBlbmRpbmdCcmFuY2ggPSBudWxsO1xuICAgICAgc3VzcGVuc2UuaXNJbkZhbGxiYWNrID0gZmFsc2U7XG4gICAgICBsZXQgcGFyZW50ID0gc3VzcGVuc2UucGFyZW50O1xuICAgICAgbGV0IGhhc1VucmVzb2x2ZWRBbmNlc3RvciA9IGZhbHNlO1xuICAgICAgd2hpbGUgKHBhcmVudCkge1xuICAgICAgICBpZiAocGFyZW50LnBlbmRpbmdCcmFuY2gpIHtcbiAgICAgICAgICBwYXJlbnQuZWZmZWN0cy5wdXNoKC4uLmVmZmVjdHMpO1xuICAgICAgICAgIGhhc1VucmVzb2x2ZWRBbmNlc3RvciA9IHRydWU7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgcGFyZW50ID0gcGFyZW50LnBhcmVudDtcbiAgICAgIH1cbiAgICAgIGlmICghaGFzVW5yZXNvbHZlZEFuY2VzdG9yICYmICFkZWxheUVudGVyKSB7XG4gICAgICAgIHF1ZXVlUG9zdEZsdXNoQ2IoZWZmZWN0cyk7XG4gICAgICB9XG4gICAgICBzdXNwZW5zZS5lZmZlY3RzID0gW107XG4gICAgICBpZiAoaXNTdXNwZW5zaWJsZSkge1xuICAgICAgICBpZiAocGFyZW50U3VzcGVuc2UgJiYgcGFyZW50U3VzcGVuc2UucGVuZGluZ0JyYW5jaCAmJiBwYXJlbnRTdXNwZW5zZUlkID09PSBwYXJlbnRTdXNwZW5zZS5wZW5kaW5nSWQpIHtcbiAgICAgICAgICBwYXJlbnRTdXNwZW5zZS5kZXBzLS07XG4gICAgICAgICAgaWYgKHBhcmVudFN1c3BlbnNlLmRlcHMgPT09IDAgJiYgIXN5bmMpIHtcbiAgICAgICAgICAgIHBhcmVudFN1c3BlbnNlLnJlc29sdmUoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHRyaWdnZXJFdmVudCh2bm9kZTIsIFwib25SZXNvbHZlXCIpO1xuICAgIH0sXG4gICAgZmFsbGJhY2soZmFsbGJhY2tWTm9kZSkge1xuICAgICAgaWYgKCFzdXNwZW5zZS5wZW5kaW5nQnJhbmNoKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGNvbnN0IHsgdm5vZGU6IHZub2RlMiwgYWN0aXZlQnJhbmNoLCBwYXJlbnRDb21wb25lbnQ6IHBhcmVudENvbXBvbmVudDIsIGNvbnRhaW5lcjogY29udGFpbmVyMiwgbmFtZXNwYWNlOiBuYW1lc3BhY2UyIH0gPSBzdXNwZW5zZTtcbiAgICAgIHRyaWdnZXJFdmVudCh2bm9kZTIsIFwib25GYWxsYmFja1wiKTtcbiAgICAgIGNvbnN0IGFuY2hvcjIgPSBuZXh0KGFjdGl2ZUJyYW5jaCk7XG4gICAgICBjb25zdCBtb3VudEZhbGxiYWNrID0gKCkgPT4ge1xuICAgICAgICBpZiAoIXN1c3BlbnNlLmlzSW5GYWxsYmFjaykge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBwYXRjaChcbiAgICAgICAgICBudWxsLFxuICAgICAgICAgIGZhbGxiYWNrVk5vZGUsXG4gICAgICAgICAgY29udGFpbmVyMixcbiAgICAgICAgICBhbmNob3IyLFxuICAgICAgICAgIHBhcmVudENvbXBvbmVudDIsXG4gICAgICAgICAgbnVsbCxcbiAgICAgICAgICAvLyBmYWxsYmFjayB0cmVlIHdpbGwgbm90IGhhdmUgc3VzcGVuc2UgY29udGV4dFxuICAgICAgICAgIG5hbWVzcGFjZTIsXG4gICAgICAgICAgc2xvdFNjb3BlSWRzLFxuICAgICAgICAgIG9wdGltaXplZFxuICAgICAgICApO1xuICAgICAgICBzZXRBY3RpdmVCcmFuY2goc3VzcGVuc2UsIGZhbGxiYWNrVk5vZGUpO1xuICAgICAgfTtcbiAgICAgIGNvbnN0IGRlbGF5RW50ZXIgPSBmYWxsYmFja1ZOb2RlLnRyYW5zaXRpb24gJiYgZmFsbGJhY2tWTm9kZS50cmFuc2l0aW9uLm1vZGUgPT09IFwib3V0LWluXCI7XG4gICAgICBpZiAoZGVsYXlFbnRlcikge1xuICAgICAgICBhY3RpdmVCcmFuY2gudHJhbnNpdGlvbi5hZnRlckxlYXZlID0gbW91bnRGYWxsYmFjaztcbiAgICAgIH1cbiAgICAgIHN1c3BlbnNlLmlzSW5GYWxsYmFjayA9IHRydWU7XG4gICAgICB1bm1vdW50KFxuICAgICAgICBhY3RpdmVCcmFuY2gsXG4gICAgICAgIHBhcmVudENvbXBvbmVudDIsXG4gICAgICAgIG51bGwsXG4gICAgICAgIC8vIG5vIHN1c3BlbnNlIHNvIHVubW91bnQgaG9va3MgZmlyZSBub3dcbiAgICAgICAgdHJ1ZVxuICAgICAgICAvLyBzaG91bGRSZW1vdmVcbiAgICAgICk7XG4gICAgICBpZiAoIWRlbGF5RW50ZXIpIHtcbiAgICAgICAgbW91bnRGYWxsYmFjaygpO1xuICAgICAgfVxuICAgIH0sXG4gICAgbW92ZShjb250YWluZXIyLCBhbmNob3IyLCB0eXBlKSB7XG4gICAgICBzdXNwZW5zZS5hY3RpdmVCcmFuY2ggJiYgbW92ZShzdXNwZW5zZS5hY3RpdmVCcmFuY2gsIGNvbnRhaW5lcjIsIGFuY2hvcjIsIHR5cGUpO1xuICAgICAgc3VzcGVuc2UuY29udGFpbmVyID0gY29udGFpbmVyMjtcbiAgICB9LFxuICAgIG5leHQoKSB7XG4gICAgICByZXR1cm4gc3VzcGVuc2UuYWN0aXZlQnJhbmNoICYmIG5leHQoc3VzcGVuc2UuYWN0aXZlQnJhbmNoKTtcbiAgICB9LFxuICAgIHJlZ2lzdGVyRGVwKGluc3RhbmNlLCBzZXR1cFJlbmRlckVmZmVjdCkge1xuICAgICAgY29uc3QgaXNJblBlbmRpbmdTdXNwZW5zZSA9ICEhc3VzcGVuc2UucGVuZGluZ0JyYW5jaDtcbiAgICAgIGlmIChpc0luUGVuZGluZ1N1c3BlbnNlKSB7XG4gICAgICAgIHN1c3BlbnNlLmRlcHMrKztcbiAgICAgIH1cbiAgICAgIGNvbnN0IGh5ZHJhdGVkRWwgPSBpbnN0YW5jZS52bm9kZS5lbDtcbiAgICAgIGluc3RhbmNlLmFzeW5jRGVwLmNhdGNoKChlcnIpID0+IHtcbiAgICAgICAgaGFuZGxlRXJyb3IoZXJyLCBpbnN0YW5jZSwgMCk7XG4gICAgICB9KS50aGVuKChhc3luY1NldHVwUmVzdWx0KSA9PiB7XG4gICAgICAgIGlmIChpbnN0YW5jZS5pc1VubW91bnRlZCB8fCBzdXNwZW5zZS5pc1VubW91bnRlZCB8fCBzdXNwZW5zZS5wZW5kaW5nSWQgIT09IGluc3RhbmNlLnN1c3BlbnNlSWQpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaW5zdGFuY2UuYXN5bmNSZXNvbHZlZCA9IHRydWU7XG4gICAgICAgIGNvbnN0IHsgdm5vZGU6IHZub2RlMiB9ID0gaW5zdGFuY2U7XG4gICAgICAgIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpKSB7XG4gICAgICAgICAgcHVzaFdhcm5pbmdDb250ZXh0KHZub2RlMik7XG4gICAgICAgIH1cbiAgICAgICAgaGFuZGxlU2V0dXBSZXN1bHQoaW5zdGFuY2UsIGFzeW5jU2V0dXBSZXN1bHQsIGZhbHNlKTtcbiAgICAgICAgaWYgKGh5ZHJhdGVkRWwpIHtcbiAgICAgICAgICB2bm9kZTIuZWwgPSBoeWRyYXRlZEVsO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHBsYWNlaG9sZGVyID0gIWh5ZHJhdGVkRWwgJiYgaW5zdGFuY2Uuc3ViVHJlZS5lbDtcbiAgICAgICAgc2V0dXBSZW5kZXJFZmZlY3QoXG4gICAgICAgICAgaW5zdGFuY2UsXG4gICAgICAgICAgdm5vZGUyLFxuICAgICAgICAgIC8vIGNvbXBvbmVudCBtYXkgaGF2ZSBiZWVuIG1vdmVkIGJlZm9yZSByZXNvbHZlLlxuICAgICAgICAgIC8vIGlmIHRoaXMgaXMgbm90IGEgaHlkcmF0aW9uLCBpbnN0YW5jZS5zdWJUcmVlIHdpbGwgYmUgdGhlIGNvbW1lbnRcbiAgICAgICAgICAvLyBwbGFjZWhvbGRlci5cbiAgICAgICAgICBwYXJlbnROb2RlKGh5ZHJhdGVkRWwgfHwgaW5zdGFuY2Uuc3ViVHJlZS5lbCksXG4gICAgICAgICAgLy8gYW5jaG9yIHdpbGwgbm90IGJlIHVzZWQgaWYgdGhpcyBpcyBoeWRyYXRpb24sIHNvIG9ubHkgbmVlZCB0b1xuICAgICAgICAgIC8vIGNvbnNpZGVyIHRoZSBjb21tZW50IHBsYWNlaG9sZGVyIGNhc2UuXG4gICAgICAgICAgaHlkcmF0ZWRFbCA/IG51bGwgOiBuZXh0KGluc3RhbmNlLnN1YlRyZWUpLFxuICAgICAgICAgIHN1c3BlbnNlLFxuICAgICAgICAgIG5hbWVzcGFjZSxcbiAgICAgICAgICBvcHRpbWl6ZWRcbiAgICAgICAgKTtcbiAgICAgICAgaWYgKHBsYWNlaG9sZGVyKSB7XG4gICAgICAgICAgcmVtb3ZlKHBsYWNlaG9sZGVyKTtcbiAgICAgICAgfVxuICAgICAgICB1cGRhdGVIT0NIb3N0RWwoaW5zdGFuY2UsIHZub2RlMi5lbCk7XG4gICAgICAgIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpKSB7XG4gICAgICAgICAgcG9wV2FybmluZ0NvbnRleHQoKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaXNJblBlbmRpbmdTdXNwZW5zZSAmJiAtLXN1c3BlbnNlLmRlcHMgPT09IDApIHtcbiAgICAgICAgICBzdXNwZW5zZS5yZXNvbHZlKCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0sXG4gICAgdW5tb3VudChwYXJlbnRTdXNwZW5zZTIsIGRvUmVtb3ZlKSB7XG4gICAgICBzdXNwZW5zZS5pc1VubW91bnRlZCA9IHRydWU7XG4gICAgICBpZiAoc3VzcGVuc2UuYWN0aXZlQnJhbmNoKSB7XG4gICAgICAgIHVubW91bnQoXG4gICAgICAgICAgc3VzcGVuc2UuYWN0aXZlQnJhbmNoLFxuICAgICAgICAgIHBhcmVudENvbXBvbmVudCxcbiAgICAgICAgICBwYXJlbnRTdXNwZW5zZTIsXG4gICAgICAgICAgZG9SZW1vdmVcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICAgIGlmIChzdXNwZW5zZS5wZW5kaW5nQnJhbmNoKSB7XG4gICAgICAgIHVubW91bnQoXG4gICAgICAgICAgc3VzcGVuc2UucGVuZGluZ0JyYW5jaCxcbiAgICAgICAgICBwYXJlbnRDb21wb25lbnQsXG4gICAgICAgICAgcGFyZW50U3VzcGVuc2UyLFxuICAgICAgICAgIGRvUmVtb3ZlXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgfVxuICB9O1xuICByZXR1cm4gc3VzcGVuc2U7XG59XG5mdW5jdGlvbiBoeWRyYXRlU3VzcGVuc2Uobm9kZSwgdm5vZGUsIHBhcmVudENvbXBvbmVudCwgcGFyZW50U3VzcGVuc2UsIG5hbWVzcGFjZSwgc2xvdFNjb3BlSWRzLCBvcHRpbWl6ZWQsIHJlbmRlcmVySW50ZXJuYWxzLCBoeWRyYXRlTm9kZSkge1xuICBjb25zdCBzdXNwZW5zZSA9IHZub2RlLnN1c3BlbnNlID0gY3JlYXRlU3VzcGVuc2VCb3VuZGFyeShcbiAgICB2bm9kZSxcbiAgICBwYXJlbnRTdXNwZW5zZSxcbiAgICBwYXJlbnRDb21wb25lbnQsXG4gICAgbm9kZS5wYXJlbnROb2RlLFxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1yZXN0cmljdGVkLWdsb2JhbHNcbiAgICBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpLFxuICAgIG51bGwsXG4gICAgbmFtZXNwYWNlLFxuICAgIHNsb3RTY29wZUlkcyxcbiAgICBvcHRpbWl6ZWQsXG4gICAgcmVuZGVyZXJJbnRlcm5hbHMsXG4gICAgdHJ1ZVxuICApO1xuICBjb25zdCByZXN1bHQgPSBoeWRyYXRlTm9kZShcbiAgICBub2RlLFxuICAgIHN1c3BlbnNlLnBlbmRpbmdCcmFuY2ggPSB2bm9kZS5zc0NvbnRlbnQsXG4gICAgcGFyZW50Q29tcG9uZW50LFxuICAgIHN1c3BlbnNlLFxuICAgIHNsb3RTY29wZUlkcyxcbiAgICBvcHRpbWl6ZWRcbiAgKTtcbiAgaWYgKHN1c3BlbnNlLmRlcHMgPT09IDApIHtcbiAgICBzdXNwZW5zZS5yZXNvbHZlKGZhbHNlLCB0cnVlKTtcbiAgfVxuICByZXR1cm4gcmVzdWx0O1xufVxuZnVuY3Rpb24gbm9ybWFsaXplU3VzcGVuc2VDaGlsZHJlbih2bm9kZSkge1xuICBjb25zdCB7IHNoYXBlRmxhZywgY2hpbGRyZW4gfSA9IHZub2RlO1xuICBjb25zdCBpc1Nsb3RDaGlsZHJlbiA9IHNoYXBlRmxhZyAmIDMyO1xuICB2bm9kZS5zc0NvbnRlbnQgPSBub3JtYWxpemVTdXNwZW5zZVNsb3QoXG4gICAgaXNTbG90Q2hpbGRyZW4gPyBjaGlsZHJlbi5kZWZhdWx0IDogY2hpbGRyZW5cbiAgKTtcbiAgdm5vZGUuc3NGYWxsYmFjayA9IGlzU2xvdENoaWxkcmVuID8gbm9ybWFsaXplU3VzcGVuc2VTbG90KGNoaWxkcmVuLmZhbGxiYWNrKSA6IGNyZWF0ZVZOb2RlKENvbW1lbnQpO1xufVxuZnVuY3Rpb24gbm9ybWFsaXplU3VzcGVuc2VTbG90KHMpIHtcbiAgbGV0IGJsb2NrO1xuICBpZiAoaXNGdW5jdGlvbihzKSkge1xuICAgIGNvbnN0IHRyYWNrQmxvY2sgPSBpc0Jsb2NrVHJlZUVuYWJsZWQgJiYgcy5fYztcbiAgICBpZiAodHJhY2tCbG9jaykge1xuICAgICAgcy5fZCA9IGZhbHNlO1xuICAgICAgb3BlbkJsb2NrKCk7XG4gICAgfVxuICAgIHMgPSBzKCk7XG4gICAgaWYgKHRyYWNrQmxvY2spIHtcbiAgICAgIHMuX2QgPSB0cnVlO1xuICAgICAgYmxvY2sgPSBjdXJyZW50QmxvY2s7XG4gICAgICBjbG9zZUJsb2NrKCk7XG4gICAgfVxuICB9XG4gIGlmIChpc0FycmF5KHMpKSB7XG4gICAgY29uc3Qgc2luZ2xlQ2hpbGQgPSBmaWx0ZXJTaW5nbGVSb290KHMpO1xuICAgIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpICYmICFzaW5nbGVDaGlsZCAmJiBzLmZpbHRlcigoY2hpbGQpID0+IGNoaWxkICE9PSBOVUxMX0RZTkFNSUNfQ09NUE9ORU5UKS5sZW5ndGggPiAwKSB7XG4gICAgICB3YXJuJDEoYDxTdXNwZW5zZT4gc2xvdHMgZXhwZWN0IGEgc2luZ2xlIHJvb3Qgbm9kZS5gKTtcbiAgICB9XG4gICAgcyA9IHNpbmdsZUNoaWxkO1xuICB9XG4gIHMgPSBub3JtYWxpemVWTm9kZShzKTtcbiAgaWYgKGJsb2NrICYmICFzLmR5bmFtaWNDaGlsZHJlbikge1xuICAgIHMuZHluYW1pY0NoaWxkcmVuID0gYmxvY2suZmlsdGVyKChjKSA9PiBjICE9PSBzKTtcbiAgfVxuICByZXR1cm4gcztcbn1cbmZ1bmN0aW9uIHF1ZXVlRWZmZWN0V2l0aFN1c3BlbnNlKGZuLCBzdXNwZW5zZSkge1xuICBpZiAoc3VzcGVuc2UgJiYgc3VzcGVuc2UucGVuZGluZ0JyYW5jaCkge1xuICAgIGlmIChpc0FycmF5KGZuKSkge1xuICAgICAgc3VzcGVuc2UuZWZmZWN0cy5wdXNoKC4uLmZuKTtcbiAgICB9IGVsc2Uge1xuICAgICAgc3VzcGVuc2UuZWZmZWN0cy5wdXNoKGZuKTtcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgcXVldWVQb3N0Rmx1c2hDYihmbik7XG4gIH1cbn1cbmZ1bmN0aW9uIHNldEFjdGl2ZUJyYW5jaChzdXNwZW5zZSwgYnJhbmNoKSB7XG4gIHN1c3BlbnNlLmFjdGl2ZUJyYW5jaCA9IGJyYW5jaDtcbiAgY29uc3QgeyB2bm9kZSwgcGFyZW50Q29tcG9uZW50IH0gPSBzdXNwZW5zZTtcbiAgbGV0IGVsID0gYnJhbmNoLmVsO1xuICB3aGlsZSAoIWVsICYmIGJyYW5jaC5jb21wb25lbnQpIHtcbiAgICBicmFuY2ggPSBicmFuY2guY29tcG9uZW50LnN1YlRyZWU7XG4gICAgZWwgPSBicmFuY2guZWw7XG4gIH1cbiAgdm5vZGUuZWwgPSBlbDtcbiAgaWYgKHBhcmVudENvbXBvbmVudCAmJiBwYXJlbnRDb21wb25lbnQuc3ViVHJlZSA9PT0gdm5vZGUpIHtcbiAgICBwYXJlbnRDb21wb25lbnQudm5vZGUuZWwgPSBlbDtcbiAgICB1cGRhdGVIT0NIb3N0RWwocGFyZW50Q29tcG9uZW50LCBlbCk7XG4gIH1cbn1cbmZ1bmN0aW9uIGlzVk5vZGVTdXNwZW5zaWJsZSh2bm9kZSkge1xuICB2YXIgX2E7XG4gIHJldHVybiAoKF9hID0gdm5vZGUucHJvcHMpID09IG51bGwgPyB2b2lkIDAgOiBfYS5zdXNwZW5zaWJsZSkgIT0gbnVsbCAmJiB2bm9kZS5wcm9wcy5zdXNwZW5zaWJsZSAhPT0gZmFsc2U7XG59XG5cbmNvbnN0IHNzckNvbnRleHRLZXkgPSBTeW1ib2wuZm9yKFwidi1zY3hcIik7XG5jb25zdCB1c2VTU1JDb250ZXh0ID0gKCkgPT4ge1xuICB7XG4gICAgY29uc3QgY3R4ID0gaW5qZWN0KHNzckNvbnRleHRLZXkpO1xuICAgIGlmICghY3R4KSB7XG4gICAgICAhIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpICYmIHdhcm4kMShcbiAgICAgICAgYFNlcnZlciByZW5kZXJpbmcgY29udGV4dCBub3QgcHJvdmlkZWQuIE1ha2Ugc3VyZSB0byBvbmx5IGNhbGwgdXNlU1NSQ29udGV4dCgpIGNvbmRpdGlvbmFsbHkgaW4gdGhlIHNlcnZlciBidWlsZC5gXG4gICAgICApO1xuICAgIH1cbiAgICByZXR1cm4gY3R4O1xuICB9XG59O1xuXG5mdW5jdGlvbiB3YXRjaEVmZmVjdChlZmZlY3QsIG9wdGlvbnMpIHtcbiAgcmV0dXJuIGRvV2F0Y2goZWZmZWN0LCBudWxsLCBvcHRpb25zKTtcbn1cbmZ1bmN0aW9uIHdhdGNoUG9zdEVmZmVjdChlZmZlY3QsIG9wdGlvbnMpIHtcbiAgcmV0dXJuIGRvV2F0Y2goXG4gICAgZWZmZWN0LFxuICAgIG51bGwsXG4gICAgISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSA/IGV4dGVuZCh7fSwgb3B0aW9ucywgeyBmbHVzaDogXCJwb3N0XCIgfSkgOiB7IGZsdXNoOiBcInBvc3RcIiB9XG4gICk7XG59XG5mdW5jdGlvbiB3YXRjaFN5bmNFZmZlY3QoZWZmZWN0LCBvcHRpb25zKSB7XG4gIHJldHVybiBkb1dhdGNoKFxuICAgIGVmZmVjdCxcbiAgICBudWxsLFxuICAgICEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgPyBleHRlbmQoe30sIG9wdGlvbnMsIHsgZmx1c2g6IFwic3luY1wiIH0pIDogeyBmbHVzaDogXCJzeW5jXCIgfVxuICApO1xufVxuY29uc3QgSU5JVElBTF9XQVRDSEVSX1ZBTFVFID0ge307XG5mdW5jdGlvbiB3YXRjaChzb3VyY2UsIGNiLCBvcHRpb25zKSB7XG4gIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpICYmICFpc0Z1bmN0aW9uKGNiKSkge1xuICAgIHdhcm4kMShcbiAgICAgIGBcXGB3YXRjaChmbiwgb3B0aW9ucz8pXFxgIHNpZ25hdHVyZSBoYXMgYmVlbiBtb3ZlZCB0byBhIHNlcGFyYXRlIEFQSS4gVXNlIFxcYHdhdGNoRWZmZWN0KGZuLCBvcHRpb25zPylcXGAgaW5zdGVhZC4gXFxgd2F0Y2hcXGAgbm93IG9ubHkgc3VwcG9ydHMgXFxgd2F0Y2goc291cmNlLCBjYiwgb3B0aW9ucz8pIHNpZ25hdHVyZS5gXG4gICAgKTtcbiAgfVxuICByZXR1cm4gZG9XYXRjaChzb3VyY2UsIGNiLCBvcHRpb25zKTtcbn1cbmZ1bmN0aW9uIGRvV2F0Y2goc291cmNlLCBjYiwge1xuICBpbW1lZGlhdGUsXG4gIGRlZXAsXG4gIGZsdXNoLFxuICBvbmNlLFxuICBvblRyYWNrLFxuICBvblRyaWdnZXJcbn0gPSBFTVBUWV9PQkopIHtcbiAgaWYgKGNiICYmIG9uY2UpIHtcbiAgICBjb25zdCBfY2IgPSBjYjtcbiAgICBjYiA9ICguLi5hcmdzKSA9PiB7XG4gICAgICBfY2IoLi4uYXJncyk7XG4gICAgICB1bndhdGNoKCk7XG4gICAgfTtcbiAgfVxuICBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSAmJiBkZWVwICE9PSB2b2lkIDAgJiYgdHlwZW9mIGRlZXAgPT09IFwibnVtYmVyXCIpIHtcbiAgICB3YXJuJDEoXG4gICAgICBgd2F0Y2goKSBcImRlZXBcIiBvcHRpb24gd2l0aCBudW1iZXIgdmFsdWUgd2lsbCBiZSB1c2VkIGFzIHdhdGNoIGRlcHRoIGluIGZ1dHVyZSB2ZXJzaW9ucy4gUGxlYXNlIHVzZSBhIGJvb2xlYW4gaW5zdGVhZCB0byBhdm9pZCBwb3RlbnRpYWwgYnJlYWthZ2UuYFxuICAgICk7XG4gIH1cbiAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgJiYgIWNiKSB7XG4gICAgaWYgKGltbWVkaWF0ZSAhPT0gdm9pZCAwKSB7XG4gICAgICB3YXJuJDEoXG4gICAgICAgIGB3YXRjaCgpIFwiaW1tZWRpYXRlXCIgb3B0aW9uIGlzIG9ubHkgcmVzcGVjdGVkIHdoZW4gdXNpbmcgdGhlIHdhdGNoKHNvdXJjZSwgY2FsbGJhY2ssIG9wdGlvbnM/KSBzaWduYXR1cmUuYFxuICAgICAgKTtcbiAgICB9XG4gICAgaWYgKGRlZXAgIT09IHZvaWQgMCkge1xuICAgICAgd2FybiQxKFxuICAgICAgICBgd2F0Y2goKSBcImRlZXBcIiBvcHRpb24gaXMgb25seSByZXNwZWN0ZWQgd2hlbiB1c2luZyB0aGUgd2F0Y2goc291cmNlLCBjYWxsYmFjaywgb3B0aW9ucz8pIHNpZ25hdHVyZS5gXG4gICAgICApO1xuICAgIH1cbiAgICBpZiAob25jZSAhPT0gdm9pZCAwKSB7XG4gICAgICB3YXJuJDEoXG4gICAgICAgIGB3YXRjaCgpIFwib25jZVwiIG9wdGlvbiBpcyBvbmx5IHJlc3BlY3RlZCB3aGVuIHVzaW5nIHRoZSB3YXRjaChzb3VyY2UsIGNhbGxiYWNrLCBvcHRpb25zPykgc2lnbmF0dXJlLmBcbiAgICAgICk7XG4gICAgfVxuICB9XG4gIGNvbnN0IHdhcm5JbnZhbGlkU291cmNlID0gKHMpID0+IHtcbiAgICB3YXJuJDEoXG4gICAgICBgSW52YWxpZCB3YXRjaCBzb3VyY2U6IGAsXG4gICAgICBzLFxuICAgICAgYEEgd2F0Y2ggc291cmNlIGNhbiBvbmx5IGJlIGEgZ2V0dGVyL2VmZmVjdCBmdW5jdGlvbiwgYSByZWYsIGEgcmVhY3RpdmUgb2JqZWN0LCBvciBhbiBhcnJheSBvZiB0aGVzZSB0eXBlcy5gXG4gICAgKTtcbiAgfTtcbiAgY29uc3QgaW5zdGFuY2UgPSBjdXJyZW50SW5zdGFuY2U7XG4gIGNvbnN0IHJlYWN0aXZlR2V0dGVyID0gKHNvdXJjZTIpID0+IGRlZXAgPT09IHRydWUgPyBzb3VyY2UyIDogKFxuICAgIC8vIGZvciBkZWVwOiBmYWxzZSwgb25seSB0cmF2ZXJzZSByb290LWxldmVsIHByb3BlcnRpZXNcbiAgICB0cmF2ZXJzZShzb3VyY2UyLCBkZWVwID09PSBmYWxzZSA/IDEgOiB2b2lkIDApXG4gICk7XG4gIGxldCBnZXR0ZXI7XG4gIGxldCBmb3JjZVRyaWdnZXIgPSBmYWxzZTtcbiAgbGV0IGlzTXVsdGlTb3VyY2UgPSBmYWxzZTtcbiAgaWYgKGlzUmVmKHNvdXJjZSkpIHtcbiAgICBnZXR0ZXIgPSAoKSA9PiBzb3VyY2UudmFsdWU7XG4gICAgZm9yY2VUcmlnZ2VyID0gaXNTaGFsbG93KHNvdXJjZSk7XG4gIH0gZWxzZSBpZiAoaXNSZWFjdGl2ZShzb3VyY2UpKSB7XG4gICAgZ2V0dGVyID0gKCkgPT4gcmVhY3RpdmVHZXR0ZXIoc291cmNlKTtcbiAgICBmb3JjZVRyaWdnZXIgPSB0cnVlO1xuICB9IGVsc2UgaWYgKGlzQXJyYXkoc291cmNlKSkge1xuICAgIGlzTXVsdGlTb3VyY2UgPSB0cnVlO1xuICAgIGZvcmNlVHJpZ2dlciA9IHNvdXJjZS5zb21lKChzKSA9PiBpc1JlYWN0aXZlKHMpIHx8IGlzU2hhbGxvdyhzKSk7XG4gICAgZ2V0dGVyID0gKCkgPT4gc291cmNlLm1hcCgocykgPT4ge1xuICAgICAgaWYgKGlzUmVmKHMpKSB7XG4gICAgICAgIHJldHVybiBzLnZhbHVlO1xuICAgICAgfSBlbHNlIGlmIChpc1JlYWN0aXZlKHMpKSB7XG4gICAgICAgIHJldHVybiByZWFjdGl2ZUdldHRlcihzKTtcbiAgICAgIH0gZWxzZSBpZiAoaXNGdW5jdGlvbihzKSkge1xuICAgICAgICByZXR1cm4gY2FsbFdpdGhFcnJvckhhbmRsaW5nKHMsIGluc3RhbmNlLCAyKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgICEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgJiYgd2FybkludmFsaWRTb3VyY2Uocyk7XG4gICAgICB9XG4gICAgfSk7XG4gIH0gZWxzZSBpZiAoaXNGdW5jdGlvbihzb3VyY2UpKSB7XG4gICAgaWYgKGNiKSB7XG4gICAgICBnZXR0ZXIgPSAoKSA9PiBjYWxsV2l0aEVycm9ySGFuZGxpbmcoc291cmNlLCBpbnN0YW5jZSwgMik7XG4gICAgfSBlbHNlIHtcbiAgICAgIGdldHRlciA9ICgpID0+IHtcbiAgICAgICAgaWYgKGNsZWFudXApIHtcbiAgICAgICAgICBjbGVhbnVwKCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGNhbGxXaXRoQXN5bmNFcnJvckhhbmRsaW5nKFxuICAgICAgICAgIHNvdXJjZSxcbiAgICAgICAgICBpbnN0YW5jZSxcbiAgICAgICAgICAzLFxuICAgICAgICAgIFtvbkNsZWFudXBdXG4gICAgICAgICk7XG4gICAgICB9O1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICBnZXR0ZXIgPSBOT09QO1xuICAgICEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgJiYgd2FybkludmFsaWRTb3VyY2Uoc291cmNlKTtcbiAgfVxuICBpZiAoY2IgJiYgZGVlcCkge1xuICAgIGNvbnN0IGJhc2VHZXR0ZXIgPSBnZXR0ZXI7XG4gICAgZ2V0dGVyID0gKCkgPT4gdHJhdmVyc2UoYmFzZUdldHRlcigpKTtcbiAgfVxuICBsZXQgY2xlYW51cDtcbiAgbGV0IG9uQ2xlYW51cCA9IChmbikgPT4ge1xuICAgIGNsZWFudXAgPSBlZmZlY3Qub25TdG9wID0gKCkgPT4ge1xuICAgICAgY2FsbFdpdGhFcnJvckhhbmRsaW5nKGZuLCBpbnN0YW5jZSwgNCk7XG4gICAgICBjbGVhbnVwID0gZWZmZWN0Lm9uU3RvcCA9IHZvaWQgMDtcbiAgICB9O1xuICB9O1xuICBsZXQgc3NyQ2xlYW51cDtcbiAgaWYgKGlzSW5TU1JDb21wb25lbnRTZXR1cCkge1xuICAgIG9uQ2xlYW51cCA9IE5PT1A7XG4gICAgaWYgKCFjYikge1xuICAgICAgZ2V0dGVyKCk7XG4gICAgfSBlbHNlIGlmIChpbW1lZGlhdGUpIHtcbiAgICAgIGNhbGxXaXRoQXN5bmNFcnJvckhhbmRsaW5nKGNiLCBpbnN0YW5jZSwgMywgW1xuICAgICAgICBnZXR0ZXIoKSxcbiAgICAgICAgaXNNdWx0aVNvdXJjZSA/IFtdIDogdm9pZCAwLFxuICAgICAgICBvbkNsZWFudXBcbiAgICAgIF0pO1xuICAgIH1cbiAgICBpZiAoZmx1c2ggPT09IFwic3luY1wiKSB7XG4gICAgICBjb25zdCBjdHggPSB1c2VTU1JDb250ZXh0KCk7XG4gICAgICBzc3JDbGVhbnVwID0gY3R4Ll9fd2F0Y2hlckhhbmRsZXMgfHwgKGN0eC5fX3dhdGNoZXJIYW5kbGVzID0gW10pO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gTk9PUDtcbiAgICB9XG4gIH1cbiAgbGV0IG9sZFZhbHVlID0gaXNNdWx0aVNvdXJjZSA/IG5ldyBBcnJheShzb3VyY2UubGVuZ3RoKS5maWxsKElOSVRJQUxfV0FUQ0hFUl9WQUxVRSkgOiBJTklUSUFMX1dBVENIRVJfVkFMVUU7XG4gIGNvbnN0IGpvYiA9ICgpID0+IHtcbiAgICBpZiAoIWVmZmVjdC5hY3RpdmUgfHwgIWVmZmVjdC5kaXJ0eSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAoY2IpIHtcbiAgICAgIGNvbnN0IG5ld1ZhbHVlID0gZWZmZWN0LnJ1bigpO1xuICAgICAgaWYgKGRlZXAgfHwgZm9yY2VUcmlnZ2VyIHx8IChpc011bHRpU291cmNlID8gbmV3VmFsdWUuc29tZSgodiwgaSkgPT4gaGFzQ2hhbmdlZCh2LCBvbGRWYWx1ZVtpXSkpIDogaGFzQ2hhbmdlZChuZXdWYWx1ZSwgb2xkVmFsdWUpKSB8fCBmYWxzZSkge1xuICAgICAgICBpZiAoY2xlYW51cCkge1xuICAgICAgICAgIGNsZWFudXAoKTtcbiAgICAgICAgfVxuICAgICAgICBjYWxsV2l0aEFzeW5jRXJyb3JIYW5kbGluZyhjYiwgaW5zdGFuY2UsIDMsIFtcbiAgICAgICAgICBuZXdWYWx1ZSxcbiAgICAgICAgICAvLyBwYXNzIHVuZGVmaW5lZCBhcyB0aGUgb2xkIHZhbHVlIHdoZW4gaXQncyBjaGFuZ2VkIGZvciB0aGUgZmlyc3QgdGltZVxuICAgICAgICAgIG9sZFZhbHVlID09PSBJTklUSUFMX1dBVENIRVJfVkFMVUUgPyB2b2lkIDAgOiBpc011bHRpU291cmNlICYmIG9sZFZhbHVlWzBdID09PSBJTklUSUFMX1dBVENIRVJfVkFMVUUgPyBbXSA6IG9sZFZhbHVlLFxuICAgICAgICAgIG9uQ2xlYW51cFxuICAgICAgICBdKTtcbiAgICAgICAgb2xkVmFsdWUgPSBuZXdWYWx1ZTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgZWZmZWN0LnJ1bigpO1xuICAgIH1cbiAgfTtcbiAgam9iLmFsbG93UmVjdXJzZSA9ICEhY2I7XG4gIGxldCBzY2hlZHVsZXI7XG4gIGlmIChmbHVzaCA9PT0gXCJzeW5jXCIpIHtcbiAgICBzY2hlZHVsZXIgPSBqb2I7XG4gIH0gZWxzZSBpZiAoZmx1c2ggPT09IFwicG9zdFwiKSB7XG4gICAgc2NoZWR1bGVyID0gKCkgPT4gcXVldWVQb3N0UmVuZGVyRWZmZWN0KGpvYiwgaW5zdGFuY2UgJiYgaW5zdGFuY2Uuc3VzcGVuc2UpO1xuICB9IGVsc2Uge1xuICAgIGpvYi5wcmUgPSB0cnVlO1xuICAgIGlmIChpbnN0YW5jZSlcbiAgICAgIGpvYi5pZCA9IGluc3RhbmNlLnVpZDtcbiAgICBzY2hlZHVsZXIgPSAoKSA9PiBxdWV1ZUpvYihqb2IpO1xuICB9XG4gIGNvbnN0IGVmZmVjdCA9IG5ldyBSZWFjdGl2ZUVmZmVjdChnZXR0ZXIsIE5PT1AsIHNjaGVkdWxlcik7XG4gIGNvbnN0IHNjb3BlID0gZ2V0Q3VycmVudFNjb3BlKCk7XG4gIGNvbnN0IHVud2F0Y2ggPSAoKSA9PiB7XG4gICAgZWZmZWN0LnN0b3AoKTtcbiAgICBpZiAoc2NvcGUpIHtcbiAgICAgIHJlbW92ZShzY29wZS5lZmZlY3RzLCBlZmZlY3QpO1xuICAgIH1cbiAgfTtcbiAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikpIHtcbiAgICBlZmZlY3Qub25UcmFjayA9IG9uVHJhY2s7XG4gICAgZWZmZWN0Lm9uVHJpZ2dlciA9IG9uVHJpZ2dlcjtcbiAgfVxuICBpZiAoY2IpIHtcbiAgICBpZiAoaW1tZWRpYXRlKSB7XG4gICAgICBqb2IoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgb2xkVmFsdWUgPSBlZmZlY3QucnVuKCk7XG4gICAgfVxuICB9IGVsc2UgaWYgKGZsdXNoID09PSBcInBvc3RcIikge1xuICAgIHF1ZXVlUG9zdFJlbmRlckVmZmVjdChcbiAgICAgIGVmZmVjdC5ydW4uYmluZChlZmZlY3QpLFxuICAgICAgaW5zdGFuY2UgJiYgaW5zdGFuY2Uuc3VzcGVuc2VcbiAgICApO1xuICB9IGVsc2Uge1xuICAgIGVmZmVjdC5ydW4oKTtcbiAgfVxuICBpZiAoc3NyQ2xlYW51cClcbiAgICBzc3JDbGVhbnVwLnB1c2godW53YXRjaCk7XG4gIHJldHVybiB1bndhdGNoO1xufVxuZnVuY3Rpb24gaW5zdGFuY2VXYXRjaChzb3VyY2UsIHZhbHVlLCBvcHRpb25zKSB7XG4gIGNvbnN0IHB1YmxpY1RoaXMgPSB0aGlzLnByb3h5O1xuICBjb25zdCBnZXR0ZXIgPSBpc1N0cmluZyhzb3VyY2UpID8gc291cmNlLmluY2x1ZGVzKFwiLlwiKSA/IGNyZWF0ZVBhdGhHZXR0ZXIocHVibGljVGhpcywgc291cmNlKSA6ICgpID0+IHB1YmxpY1RoaXNbc291cmNlXSA6IHNvdXJjZS5iaW5kKHB1YmxpY1RoaXMsIHB1YmxpY1RoaXMpO1xuICBsZXQgY2I7XG4gIGlmIChpc0Z1bmN0aW9uKHZhbHVlKSkge1xuICAgIGNiID0gdmFsdWU7XG4gIH0gZWxzZSB7XG4gICAgY2IgPSB2YWx1ZS5oYW5kbGVyO1xuICAgIG9wdGlvbnMgPSB2YWx1ZTtcbiAgfVxuICBjb25zdCByZXNldCA9IHNldEN1cnJlbnRJbnN0YW5jZSh0aGlzKTtcbiAgY29uc3QgcmVzID0gZG9XYXRjaChnZXR0ZXIsIGNiLmJpbmQocHVibGljVGhpcyksIG9wdGlvbnMpO1xuICByZXNldCgpO1xuICByZXR1cm4gcmVzO1xufVxuZnVuY3Rpb24gY3JlYXRlUGF0aEdldHRlcihjdHgsIHBhdGgpIHtcbiAgY29uc3Qgc2VnbWVudHMgPSBwYXRoLnNwbGl0KFwiLlwiKTtcbiAgcmV0dXJuICgpID0+IHtcbiAgICBsZXQgY3VyID0gY3R4O1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc2VnbWVudHMubGVuZ3RoICYmIGN1cjsgaSsrKSB7XG4gICAgICBjdXIgPSBjdXJbc2VnbWVudHNbaV1dO1xuICAgIH1cbiAgICByZXR1cm4gY3VyO1xuICB9O1xufVxuZnVuY3Rpb24gdHJhdmVyc2UodmFsdWUsIGRlcHRoLCBjdXJyZW50RGVwdGggPSAwLCBzZWVuKSB7XG4gIGlmICghaXNPYmplY3QodmFsdWUpIHx8IHZhbHVlW1wiX192X3NraXBcIl0pIHtcbiAgICByZXR1cm4gdmFsdWU7XG4gIH1cbiAgaWYgKGRlcHRoICYmIGRlcHRoID4gMCkge1xuICAgIGlmIChjdXJyZW50RGVwdGggPj0gZGVwdGgpIHtcbiAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9XG4gICAgY3VycmVudERlcHRoKys7XG4gIH1cbiAgc2VlbiA9IHNlZW4gfHwgLyogQF9fUFVSRV9fICovIG5ldyBTZXQoKTtcbiAgaWYgKHNlZW4uaGFzKHZhbHVlKSkge1xuICAgIHJldHVybiB2YWx1ZTtcbiAgfVxuICBzZWVuLmFkZCh2YWx1ZSk7XG4gIGlmIChpc1JlZih2YWx1ZSkpIHtcbiAgICB0cmF2ZXJzZSh2YWx1ZS52YWx1ZSwgZGVwdGgsIGN1cnJlbnREZXB0aCwgc2Vlbik7XG4gIH0gZWxzZSBpZiAoaXNBcnJheSh2YWx1ZSkpIHtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHZhbHVlLmxlbmd0aDsgaSsrKSB7XG4gICAgICB0cmF2ZXJzZSh2YWx1ZVtpXSwgZGVwdGgsIGN1cnJlbnREZXB0aCwgc2Vlbik7XG4gICAgfVxuICB9IGVsc2UgaWYgKGlzU2V0KHZhbHVlKSB8fCBpc01hcCh2YWx1ZSkpIHtcbiAgICB2YWx1ZS5mb3JFYWNoKCh2KSA9PiB7XG4gICAgICB0cmF2ZXJzZSh2LCBkZXB0aCwgY3VycmVudERlcHRoLCBzZWVuKTtcbiAgICB9KTtcbiAgfSBlbHNlIGlmIChpc1BsYWluT2JqZWN0KHZhbHVlKSkge1xuICAgIGZvciAoY29uc3Qga2V5IGluIHZhbHVlKSB7XG4gICAgICB0cmF2ZXJzZSh2YWx1ZVtrZXldLCBkZXB0aCwgY3VycmVudERlcHRoLCBzZWVuKTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHZhbHVlO1xufVxuXG5mdW5jdGlvbiB2YWxpZGF0ZURpcmVjdGl2ZU5hbWUobmFtZSkge1xuICBpZiAoaXNCdWlsdEluRGlyZWN0aXZlKG5hbWUpKSB7XG4gICAgd2FybiQxKFwiRG8gbm90IHVzZSBidWlsdC1pbiBkaXJlY3RpdmUgaWRzIGFzIGN1c3RvbSBkaXJlY3RpdmUgaWQ6IFwiICsgbmFtZSk7XG4gIH1cbn1cbmZ1bmN0aW9uIHdpdGhEaXJlY3RpdmVzKHZub2RlLCBkaXJlY3RpdmVzKSB7XG4gIGlmIChjdXJyZW50UmVuZGVyaW5nSW5zdGFuY2UgPT09IG51bGwpIHtcbiAgICAhIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpICYmIHdhcm4kMShgd2l0aERpcmVjdGl2ZXMgY2FuIG9ubHkgYmUgdXNlZCBpbnNpZGUgcmVuZGVyIGZ1bmN0aW9ucy5gKTtcbiAgICByZXR1cm4gdm5vZGU7XG4gIH1cbiAgY29uc3QgaW5zdGFuY2UgPSBnZXRFeHBvc2VQcm94eShjdXJyZW50UmVuZGVyaW5nSW5zdGFuY2UpIHx8IGN1cnJlbnRSZW5kZXJpbmdJbnN0YW5jZS5wcm94eTtcbiAgY29uc3QgYmluZGluZ3MgPSB2bm9kZS5kaXJzIHx8ICh2bm9kZS5kaXJzID0gW10pO1xuICBmb3IgKGxldCBpID0gMDsgaSA8IGRpcmVjdGl2ZXMubGVuZ3RoOyBpKyspIHtcbiAgICBsZXQgW2RpciwgdmFsdWUsIGFyZywgbW9kaWZpZXJzID0gRU1QVFlfT0JKXSA9IGRpcmVjdGl2ZXNbaV07XG4gICAgaWYgKGRpcikge1xuICAgICAgaWYgKGlzRnVuY3Rpb24oZGlyKSkge1xuICAgICAgICBkaXIgPSB7XG4gICAgICAgICAgbW91bnRlZDogZGlyLFxuICAgICAgICAgIHVwZGF0ZWQ6IGRpclxuICAgICAgICB9O1xuICAgICAgfVxuICAgICAgaWYgKGRpci5kZWVwKSB7XG4gICAgICAgIHRyYXZlcnNlKHZhbHVlKTtcbiAgICAgIH1cbiAgICAgIGJpbmRpbmdzLnB1c2goe1xuICAgICAgICBkaXIsXG4gICAgICAgIGluc3RhbmNlLFxuICAgICAgICB2YWx1ZSxcbiAgICAgICAgb2xkVmFsdWU6IHZvaWQgMCxcbiAgICAgICAgYXJnLFxuICAgICAgICBtb2RpZmllcnNcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuICByZXR1cm4gdm5vZGU7XG59XG5mdW5jdGlvbiBpbnZva2VEaXJlY3RpdmVIb29rKHZub2RlLCBwcmV2Vk5vZGUsIGluc3RhbmNlLCBuYW1lKSB7XG4gIGNvbnN0IGJpbmRpbmdzID0gdm5vZGUuZGlycztcbiAgY29uc3Qgb2xkQmluZGluZ3MgPSBwcmV2Vk5vZGUgJiYgcHJldlZOb2RlLmRpcnM7XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgYmluZGluZ3MubGVuZ3RoOyBpKyspIHtcbiAgICBjb25zdCBiaW5kaW5nID0gYmluZGluZ3NbaV07XG4gICAgaWYgKG9sZEJpbmRpbmdzKSB7XG4gICAgICBiaW5kaW5nLm9sZFZhbHVlID0gb2xkQmluZGluZ3NbaV0udmFsdWU7XG4gICAgfVxuICAgIGxldCBob29rID0gYmluZGluZy5kaXJbbmFtZV07XG4gICAgaWYgKGhvb2spIHtcbiAgICAgIHBhdXNlVHJhY2tpbmcoKTtcbiAgICAgIGNhbGxXaXRoQXN5bmNFcnJvckhhbmRsaW5nKGhvb2ssIGluc3RhbmNlLCA4LCBbXG4gICAgICAgIHZub2RlLmVsLFxuICAgICAgICBiaW5kaW5nLFxuICAgICAgICB2bm9kZSxcbiAgICAgICAgcHJldlZOb2RlXG4gICAgICBdKTtcbiAgICAgIHJlc2V0VHJhY2tpbmcoKTtcbiAgICB9XG4gIH1cbn1cblxuY29uc3QgbGVhdmVDYktleSA9IFN5bWJvbChcIl9sZWF2ZUNiXCIpO1xuY29uc3QgZW50ZXJDYktleSA9IFN5bWJvbChcIl9lbnRlckNiXCIpO1xuZnVuY3Rpb24gdXNlVHJhbnNpdGlvblN0YXRlKCkge1xuICBjb25zdCBzdGF0ZSA9IHtcbiAgICBpc01vdW50ZWQ6IGZhbHNlLFxuICAgIGlzTGVhdmluZzogZmFsc2UsXG4gICAgaXNVbm1vdW50aW5nOiBmYWxzZSxcbiAgICBsZWF2aW5nVk5vZGVzOiAvKiBAX19QVVJFX18gKi8gbmV3IE1hcCgpXG4gIH07XG4gIG9uTW91bnRlZCgoKSA9PiB7XG4gICAgc3RhdGUuaXNNb3VudGVkID0gdHJ1ZTtcbiAgfSk7XG4gIG9uQmVmb3JlVW5tb3VudCgoKSA9PiB7XG4gICAgc3RhdGUuaXNVbm1vdW50aW5nID0gdHJ1ZTtcbiAgfSk7XG4gIHJldHVybiBzdGF0ZTtcbn1cbmNvbnN0IFRyYW5zaXRpb25Ib29rVmFsaWRhdG9yID0gW0Z1bmN0aW9uLCBBcnJheV07XG5jb25zdCBCYXNlVHJhbnNpdGlvblByb3BzVmFsaWRhdG9ycyA9IHtcbiAgbW9kZTogU3RyaW5nLFxuICBhcHBlYXI6IEJvb2xlYW4sXG4gIHBlcnNpc3RlZDogQm9vbGVhbixcbiAgLy8gZW50ZXJcbiAgb25CZWZvcmVFbnRlcjogVHJhbnNpdGlvbkhvb2tWYWxpZGF0b3IsXG4gIG9uRW50ZXI6IFRyYW5zaXRpb25Ib29rVmFsaWRhdG9yLFxuICBvbkFmdGVyRW50ZXI6IFRyYW5zaXRpb25Ib29rVmFsaWRhdG9yLFxuICBvbkVudGVyQ2FuY2VsbGVkOiBUcmFuc2l0aW9uSG9va1ZhbGlkYXRvcixcbiAgLy8gbGVhdmVcbiAgb25CZWZvcmVMZWF2ZTogVHJhbnNpdGlvbkhvb2tWYWxpZGF0b3IsXG4gIG9uTGVhdmU6IFRyYW5zaXRpb25Ib29rVmFsaWRhdG9yLFxuICBvbkFmdGVyTGVhdmU6IFRyYW5zaXRpb25Ib29rVmFsaWRhdG9yLFxuICBvbkxlYXZlQ2FuY2VsbGVkOiBUcmFuc2l0aW9uSG9va1ZhbGlkYXRvcixcbiAgLy8gYXBwZWFyXG4gIG9uQmVmb3JlQXBwZWFyOiBUcmFuc2l0aW9uSG9va1ZhbGlkYXRvcixcbiAgb25BcHBlYXI6IFRyYW5zaXRpb25Ib29rVmFsaWRhdG9yLFxuICBvbkFmdGVyQXBwZWFyOiBUcmFuc2l0aW9uSG9va1ZhbGlkYXRvcixcbiAgb25BcHBlYXJDYW5jZWxsZWQ6IFRyYW5zaXRpb25Ib29rVmFsaWRhdG9yXG59O1xuY29uc3QgQmFzZVRyYW5zaXRpb25JbXBsID0ge1xuICBuYW1lOiBgQmFzZVRyYW5zaXRpb25gLFxuICBwcm9wczogQmFzZVRyYW5zaXRpb25Qcm9wc1ZhbGlkYXRvcnMsXG4gIHNldHVwKHByb3BzLCB7IHNsb3RzIH0pIHtcbiAgICBjb25zdCBpbnN0YW5jZSA9IGdldEN1cnJlbnRJbnN0YW5jZSgpO1xuICAgIGNvbnN0IHN0YXRlID0gdXNlVHJhbnNpdGlvblN0YXRlKCk7XG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIGNvbnN0IGNoaWxkcmVuID0gc2xvdHMuZGVmYXVsdCAmJiBnZXRUcmFuc2l0aW9uUmF3Q2hpbGRyZW4oc2xvdHMuZGVmYXVsdCgpLCB0cnVlKTtcbiAgICAgIGlmICghY2hpbGRyZW4gfHwgIWNoaWxkcmVuLmxlbmd0aCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBsZXQgY2hpbGQgPSBjaGlsZHJlblswXTtcbiAgICAgIGlmIChjaGlsZHJlbi5sZW5ndGggPiAxKSB7XG4gICAgICAgIGxldCBoYXNGb3VuZCA9IGZhbHNlO1xuICAgICAgICBmb3IgKGNvbnN0IGMgb2YgY2hpbGRyZW4pIHtcbiAgICAgICAgICBpZiAoYy50eXBlICE9PSBDb21tZW50KSB7XG4gICAgICAgICAgICBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSAmJiBoYXNGb3VuZCkge1xuICAgICAgICAgICAgICB3YXJuJDEoXG4gICAgICAgICAgICAgICAgXCI8dHJhbnNpdGlvbj4gY2FuIG9ubHkgYmUgdXNlZCBvbiBhIHNpbmdsZSBlbGVtZW50IG9yIGNvbXBvbmVudC4gVXNlIDx0cmFuc2l0aW9uLWdyb3VwPiBmb3IgbGlzdHMuXCJcbiAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjaGlsZCA9IGM7XG4gICAgICAgICAgICBoYXNGb3VuZCA9IHRydWU7XG4gICAgICAgICAgICBpZiAoISEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikpXG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgY29uc3QgcmF3UHJvcHMgPSB0b1Jhdyhwcm9wcyk7XG4gICAgICBjb25zdCB7IG1vZGUgfSA9IHJhd1Byb3BzO1xuICAgICAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgJiYgbW9kZSAmJiBtb2RlICE9PSBcImluLW91dFwiICYmIG1vZGUgIT09IFwib3V0LWluXCIgJiYgbW9kZSAhPT0gXCJkZWZhdWx0XCIpIHtcbiAgICAgICAgd2FybiQxKGBpbnZhbGlkIDx0cmFuc2l0aW9uPiBtb2RlOiAke21vZGV9YCk7XG4gICAgICB9XG4gICAgICBpZiAoc3RhdGUuaXNMZWF2aW5nKSB7XG4gICAgICAgIHJldHVybiBlbXB0eVBsYWNlaG9sZGVyKGNoaWxkKTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IGlubmVyQ2hpbGQgPSBnZXRLZWVwQWxpdmVDaGlsZChjaGlsZCk7XG4gICAgICBpZiAoIWlubmVyQ2hpbGQpIHtcbiAgICAgICAgcmV0dXJuIGVtcHR5UGxhY2Vob2xkZXIoY2hpbGQpO1xuICAgICAgfVxuICAgICAgY29uc3QgZW50ZXJIb29rcyA9IHJlc29sdmVUcmFuc2l0aW9uSG9va3MoXG4gICAgICAgIGlubmVyQ2hpbGQsXG4gICAgICAgIHJhd1Byb3BzLFxuICAgICAgICBzdGF0ZSxcbiAgICAgICAgaW5zdGFuY2VcbiAgICAgICk7XG4gICAgICBzZXRUcmFuc2l0aW9uSG9va3MoaW5uZXJDaGlsZCwgZW50ZXJIb29rcyk7XG4gICAgICBjb25zdCBvbGRDaGlsZCA9IGluc3RhbmNlLnN1YlRyZWU7XG4gICAgICBjb25zdCBvbGRJbm5lckNoaWxkID0gb2xkQ2hpbGQgJiYgZ2V0S2VlcEFsaXZlQ2hpbGQob2xkQ2hpbGQpO1xuICAgICAgaWYgKG9sZElubmVyQ2hpbGQgJiYgb2xkSW5uZXJDaGlsZC50eXBlICE9PSBDb21tZW50ICYmICFpc1NhbWVWTm9kZVR5cGUoaW5uZXJDaGlsZCwgb2xkSW5uZXJDaGlsZCkpIHtcbiAgICAgICAgY29uc3QgbGVhdmluZ0hvb2tzID0gcmVzb2x2ZVRyYW5zaXRpb25Ib29rcyhcbiAgICAgICAgICBvbGRJbm5lckNoaWxkLFxuICAgICAgICAgIHJhd1Byb3BzLFxuICAgICAgICAgIHN0YXRlLFxuICAgICAgICAgIGluc3RhbmNlXG4gICAgICAgICk7XG4gICAgICAgIHNldFRyYW5zaXRpb25Ib29rcyhvbGRJbm5lckNoaWxkLCBsZWF2aW5nSG9va3MpO1xuICAgICAgICBpZiAobW9kZSA9PT0gXCJvdXQtaW5cIikge1xuICAgICAgICAgIHN0YXRlLmlzTGVhdmluZyA9IHRydWU7XG4gICAgICAgICAgbGVhdmluZ0hvb2tzLmFmdGVyTGVhdmUgPSAoKSA9PiB7XG4gICAgICAgICAgICBzdGF0ZS5pc0xlYXZpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgIGlmIChpbnN0YW5jZS51cGRhdGUuYWN0aXZlICE9PSBmYWxzZSkge1xuICAgICAgICAgICAgICBpbnN0YW5jZS5lZmZlY3QuZGlydHkgPSB0cnVlO1xuICAgICAgICAgICAgICBpbnN0YW5jZS51cGRhdGUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9O1xuICAgICAgICAgIHJldHVybiBlbXB0eVBsYWNlaG9sZGVyKGNoaWxkKTtcbiAgICAgICAgfSBlbHNlIGlmIChtb2RlID09PSBcImluLW91dFwiICYmIGlubmVyQ2hpbGQudHlwZSAhPT0gQ29tbWVudCkge1xuICAgICAgICAgIGxlYXZpbmdIb29rcy5kZWxheUxlYXZlID0gKGVsLCBlYXJseVJlbW92ZSwgZGVsYXllZExlYXZlKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBsZWF2aW5nVk5vZGVzQ2FjaGUgPSBnZXRMZWF2aW5nTm9kZXNGb3JUeXBlKFxuICAgICAgICAgICAgICBzdGF0ZSxcbiAgICAgICAgICAgICAgb2xkSW5uZXJDaGlsZFxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIGxlYXZpbmdWTm9kZXNDYWNoZVtTdHJpbmcob2xkSW5uZXJDaGlsZC5rZXkpXSA9IG9sZElubmVyQ2hpbGQ7XG4gICAgICAgICAgICBlbFtsZWF2ZUNiS2V5XSA9ICgpID0+IHtcbiAgICAgICAgICAgICAgZWFybHlSZW1vdmUoKTtcbiAgICAgICAgICAgICAgZWxbbGVhdmVDYktleV0gPSB2b2lkIDA7XG4gICAgICAgICAgICAgIGRlbGV0ZSBlbnRlckhvb2tzLmRlbGF5ZWRMZWF2ZTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBlbnRlckhvb2tzLmRlbGF5ZWRMZWF2ZSA9IGRlbGF5ZWRMZWF2ZTtcbiAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gY2hpbGQ7XG4gICAgfTtcbiAgfVxufTtcbmNvbnN0IEJhc2VUcmFuc2l0aW9uID0gQmFzZVRyYW5zaXRpb25JbXBsO1xuZnVuY3Rpb24gZ2V0TGVhdmluZ05vZGVzRm9yVHlwZShzdGF0ZSwgdm5vZGUpIHtcbiAgY29uc3QgeyBsZWF2aW5nVk5vZGVzIH0gPSBzdGF0ZTtcbiAgbGV0IGxlYXZpbmdWTm9kZXNDYWNoZSA9IGxlYXZpbmdWTm9kZXMuZ2V0KHZub2RlLnR5cGUpO1xuICBpZiAoIWxlYXZpbmdWTm9kZXNDYWNoZSkge1xuICAgIGxlYXZpbmdWTm9kZXNDYWNoZSA9IC8qIEBfX1BVUkVfXyAqLyBPYmplY3QuY3JlYXRlKG51bGwpO1xuICAgIGxlYXZpbmdWTm9kZXMuc2V0KHZub2RlLnR5cGUsIGxlYXZpbmdWTm9kZXNDYWNoZSk7XG4gIH1cbiAgcmV0dXJuIGxlYXZpbmdWTm9kZXNDYWNoZTtcbn1cbmZ1bmN0aW9uIHJlc29sdmVUcmFuc2l0aW9uSG9va3Modm5vZGUsIHByb3BzLCBzdGF0ZSwgaW5zdGFuY2UpIHtcbiAgY29uc3Qge1xuICAgIGFwcGVhcixcbiAgICBtb2RlLFxuICAgIHBlcnNpc3RlZCA9IGZhbHNlLFxuICAgIG9uQmVmb3JlRW50ZXIsXG4gICAgb25FbnRlcixcbiAgICBvbkFmdGVyRW50ZXIsXG4gICAgb25FbnRlckNhbmNlbGxlZCxcbiAgICBvbkJlZm9yZUxlYXZlLFxuICAgIG9uTGVhdmUsXG4gICAgb25BZnRlckxlYXZlLFxuICAgIG9uTGVhdmVDYW5jZWxsZWQsXG4gICAgb25CZWZvcmVBcHBlYXIsXG4gICAgb25BcHBlYXIsXG4gICAgb25BZnRlckFwcGVhcixcbiAgICBvbkFwcGVhckNhbmNlbGxlZFxuICB9ID0gcHJvcHM7XG4gIGNvbnN0IGtleSA9IFN0cmluZyh2bm9kZS5rZXkpO1xuICBjb25zdCBsZWF2aW5nVk5vZGVzQ2FjaGUgPSBnZXRMZWF2aW5nTm9kZXNGb3JUeXBlKHN0YXRlLCB2bm9kZSk7XG4gIGNvbnN0IGNhbGxIb29rID0gKGhvb2ssIGFyZ3MpID0+IHtcbiAgICBob29rICYmIGNhbGxXaXRoQXN5bmNFcnJvckhhbmRsaW5nKFxuICAgICAgaG9vayxcbiAgICAgIGluc3RhbmNlLFxuICAgICAgOSxcbiAgICAgIGFyZ3NcbiAgICApO1xuICB9O1xuICBjb25zdCBjYWxsQXN5bmNIb29rID0gKGhvb2ssIGFyZ3MpID0+IHtcbiAgICBjb25zdCBkb25lID0gYXJnc1sxXTtcbiAgICBjYWxsSG9vayhob29rLCBhcmdzKTtcbiAgICBpZiAoaXNBcnJheShob29rKSkge1xuICAgICAgaWYgKGhvb2suZXZlcnkoKGhvb2syKSA9PiBob29rMi5sZW5ndGggPD0gMSkpXG4gICAgICAgIGRvbmUoKTtcbiAgICB9IGVsc2UgaWYgKGhvb2subGVuZ3RoIDw9IDEpIHtcbiAgICAgIGRvbmUoKTtcbiAgICB9XG4gIH07XG4gIGNvbnN0IGhvb2tzID0ge1xuICAgIG1vZGUsXG4gICAgcGVyc2lzdGVkLFxuICAgIGJlZm9yZUVudGVyKGVsKSB7XG4gICAgICBsZXQgaG9vayA9IG9uQmVmb3JlRW50ZXI7XG4gICAgICBpZiAoIXN0YXRlLmlzTW91bnRlZCkge1xuICAgICAgICBpZiAoYXBwZWFyKSB7XG4gICAgICAgICAgaG9vayA9IG9uQmVmb3JlQXBwZWFyIHx8IG9uQmVmb3JlRW50ZXI7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoZWxbbGVhdmVDYktleV0pIHtcbiAgICAgICAgZWxbbGVhdmVDYktleV0oXG4gICAgICAgICAgdHJ1ZVxuICAgICAgICAgIC8qIGNhbmNlbGxlZCAqL1xuICAgICAgICApO1xuICAgICAgfVxuICAgICAgY29uc3QgbGVhdmluZ1ZOb2RlID0gbGVhdmluZ1ZOb2Rlc0NhY2hlW2tleV07XG4gICAgICBpZiAobGVhdmluZ1ZOb2RlICYmIGlzU2FtZVZOb2RlVHlwZSh2bm9kZSwgbGVhdmluZ1ZOb2RlKSAmJiBsZWF2aW5nVk5vZGUuZWxbbGVhdmVDYktleV0pIHtcbiAgICAgICAgbGVhdmluZ1ZOb2RlLmVsW2xlYXZlQ2JLZXldKCk7XG4gICAgICB9XG4gICAgICBjYWxsSG9vayhob29rLCBbZWxdKTtcbiAgICB9LFxuICAgIGVudGVyKGVsKSB7XG4gICAgICBsZXQgaG9vayA9IG9uRW50ZXI7XG4gICAgICBsZXQgYWZ0ZXJIb29rID0gb25BZnRlckVudGVyO1xuICAgICAgbGV0IGNhbmNlbEhvb2sgPSBvbkVudGVyQ2FuY2VsbGVkO1xuICAgICAgaWYgKCFzdGF0ZS5pc01vdW50ZWQpIHtcbiAgICAgICAgaWYgKGFwcGVhcikge1xuICAgICAgICAgIGhvb2sgPSBvbkFwcGVhciB8fCBvbkVudGVyO1xuICAgICAgICAgIGFmdGVySG9vayA9IG9uQWZ0ZXJBcHBlYXIgfHwgb25BZnRlckVudGVyO1xuICAgICAgICAgIGNhbmNlbEhvb2sgPSBvbkFwcGVhckNhbmNlbGxlZCB8fCBvbkVudGVyQ2FuY2VsbGVkO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgbGV0IGNhbGxlZCA9IGZhbHNlO1xuICAgICAgY29uc3QgZG9uZSA9IGVsW2VudGVyQ2JLZXldID0gKGNhbmNlbGxlZCkgPT4ge1xuICAgICAgICBpZiAoY2FsbGVkKVxuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgY2FsbGVkID0gdHJ1ZTtcbiAgICAgICAgaWYgKGNhbmNlbGxlZCkge1xuICAgICAgICAgIGNhbGxIb29rKGNhbmNlbEhvb2ssIFtlbF0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNhbGxIb29rKGFmdGVySG9vaywgW2VsXSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGhvb2tzLmRlbGF5ZWRMZWF2ZSkge1xuICAgICAgICAgIGhvb2tzLmRlbGF5ZWRMZWF2ZSgpO1xuICAgICAgICB9XG4gICAgICAgIGVsW2VudGVyQ2JLZXldID0gdm9pZCAwO1xuICAgICAgfTtcbiAgICAgIGlmIChob29rKSB7XG4gICAgICAgIGNhbGxBc3luY0hvb2soaG9vaywgW2VsLCBkb25lXSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBkb25lKCk7XG4gICAgICB9XG4gICAgfSxcbiAgICBsZWF2ZShlbCwgcmVtb3ZlKSB7XG4gICAgICBjb25zdCBrZXkyID0gU3RyaW5nKHZub2RlLmtleSk7XG4gICAgICBpZiAoZWxbZW50ZXJDYktleV0pIHtcbiAgICAgICAgZWxbZW50ZXJDYktleV0oXG4gICAgICAgICAgdHJ1ZVxuICAgICAgICAgIC8qIGNhbmNlbGxlZCAqL1xuICAgICAgICApO1xuICAgICAgfVxuICAgICAgaWYgKHN0YXRlLmlzVW5tb3VudGluZykge1xuICAgICAgICByZXR1cm4gcmVtb3ZlKCk7XG4gICAgICB9XG4gICAgICBjYWxsSG9vayhvbkJlZm9yZUxlYXZlLCBbZWxdKTtcbiAgICAgIGxldCBjYWxsZWQgPSBmYWxzZTtcbiAgICAgIGNvbnN0IGRvbmUgPSBlbFtsZWF2ZUNiS2V5XSA9IChjYW5jZWxsZWQpID0+IHtcbiAgICAgICAgaWYgKGNhbGxlZClcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIGNhbGxlZCA9IHRydWU7XG4gICAgICAgIHJlbW92ZSgpO1xuICAgICAgICBpZiAoY2FuY2VsbGVkKSB7XG4gICAgICAgICAgY2FsbEhvb2sob25MZWF2ZUNhbmNlbGxlZCwgW2VsXSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY2FsbEhvb2sob25BZnRlckxlYXZlLCBbZWxdKTtcbiAgICAgICAgfVxuICAgICAgICBlbFtsZWF2ZUNiS2V5XSA9IHZvaWQgMDtcbiAgICAgICAgaWYgKGxlYXZpbmdWTm9kZXNDYWNoZVtrZXkyXSA9PT0gdm5vZGUpIHtcbiAgICAgICAgICBkZWxldGUgbGVhdmluZ1ZOb2Rlc0NhY2hlW2tleTJdO1xuICAgICAgICB9XG4gICAgICB9O1xuICAgICAgbGVhdmluZ1ZOb2Rlc0NhY2hlW2tleTJdID0gdm5vZGU7XG4gICAgICBpZiAob25MZWF2ZSkge1xuICAgICAgICBjYWxsQXN5bmNIb29rKG9uTGVhdmUsIFtlbCwgZG9uZV0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZG9uZSgpO1xuICAgICAgfVxuICAgIH0sXG4gICAgY2xvbmUodm5vZGUyKSB7XG4gICAgICByZXR1cm4gcmVzb2x2ZVRyYW5zaXRpb25Ib29rcyh2bm9kZTIsIHByb3BzLCBzdGF0ZSwgaW5zdGFuY2UpO1xuICAgIH1cbiAgfTtcbiAgcmV0dXJuIGhvb2tzO1xufVxuZnVuY3Rpb24gZW1wdHlQbGFjZWhvbGRlcih2bm9kZSkge1xuICBpZiAoaXNLZWVwQWxpdmUodm5vZGUpKSB7XG4gICAgdm5vZGUgPSBjbG9uZVZOb2RlKHZub2RlKTtcbiAgICB2bm9kZS5jaGlsZHJlbiA9IG51bGw7XG4gICAgcmV0dXJuIHZub2RlO1xuICB9XG59XG5mdW5jdGlvbiBnZXRLZWVwQWxpdmVDaGlsZCh2bm9kZSkge1xuICByZXR1cm4gaXNLZWVwQWxpdmUodm5vZGUpID8gKFxuICAgIC8vICM3MTIxIGVuc3VyZSBnZXQgdGhlIGNoaWxkIGNvbXBvbmVudCBzdWJ0cmVlIGluIGNhc2VcbiAgICAvLyBpdCdzIGJlZW4gcmVwbGFjZWQgZHVyaW5nIEhNUlxuICAgICEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgJiYgdm5vZGUuY29tcG9uZW50ID8gdm5vZGUuY29tcG9uZW50LnN1YlRyZWUgOiB2bm9kZS5jaGlsZHJlbiA/IHZub2RlLmNoaWxkcmVuWzBdIDogdm9pZCAwXG4gICkgOiB2bm9kZTtcbn1cbmZ1bmN0aW9uIHNldFRyYW5zaXRpb25Ib29rcyh2bm9kZSwgaG9va3MpIHtcbiAgaWYgKHZub2RlLnNoYXBlRmxhZyAmIDYgJiYgdm5vZGUuY29tcG9uZW50KSB7XG4gICAgc2V0VHJhbnNpdGlvbkhvb2tzKHZub2RlLmNvbXBvbmVudC5zdWJUcmVlLCBob29rcyk7XG4gIH0gZWxzZSBpZiAodm5vZGUuc2hhcGVGbGFnICYgMTI4KSB7XG4gICAgdm5vZGUuc3NDb250ZW50LnRyYW5zaXRpb24gPSBob29rcy5jbG9uZSh2bm9kZS5zc0NvbnRlbnQpO1xuICAgIHZub2RlLnNzRmFsbGJhY2sudHJhbnNpdGlvbiA9IGhvb2tzLmNsb25lKHZub2RlLnNzRmFsbGJhY2spO1xuICB9IGVsc2Uge1xuICAgIHZub2RlLnRyYW5zaXRpb24gPSBob29rcztcbiAgfVxufVxuZnVuY3Rpb24gZ2V0VHJhbnNpdGlvblJhd0NoaWxkcmVuKGNoaWxkcmVuLCBrZWVwQ29tbWVudCA9IGZhbHNlLCBwYXJlbnRLZXkpIHtcbiAgbGV0IHJldCA9IFtdO1xuICBsZXQga2V5ZWRGcmFnbWVudENvdW50ID0gMDtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBjaGlsZHJlbi5sZW5ndGg7IGkrKykge1xuICAgIGxldCBjaGlsZCA9IGNoaWxkcmVuW2ldO1xuICAgIGNvbnN0IGtleSA9IHBhcmVudEtleSA9PSBudWxsID8gY2hpbGQua2V5IDogU3RyaW5nKHBhcmVudEtleSkgKyBTdHJpbmcoY2hpbGQua2V5ICE9IG51bGwgPyBjaGlsZC5rZXkgOiBpKTtcbiAgICBpZiAoY2hpbGQudHlwZSA9PT0gRnJhZ21lbnQpIHtcbiAgICAgIGlmIChjaGlsZC5wYXRjaEZsYWcgJiAxMjgpXG4gICAgICAgIGtleWVkRnJhZ21lbnRDb3VudCsrO1xuICAgICAgcmV0ID0gcmV0LmNvbmNhdChcbiAgICAgICAgZ2V0VHJhbnNpdGlvblJhd0NoaWxkcmVuKGNoaWxkLmNoaWxkcmVuLCBrZWVwQ29tbWVudCwga2V5KVxuICAgICAgKTtcbiAgICB9IGVsc2UgaWYgKGtlZXBDb21tZW50IHx8IGNoaWxkLnR5cGUgIT09IENvbW1lbnQpIHtcbiAgICAgIHJldC5wdXNoKGtleSAhPSBudWxsID8gY2xvbmVWTm9kZShjaGlsZCwgeyBrZXkgfSkgOiBjaGlsZCk7XG4gICAgfVxuICB9XG4gIGlmIChrZXllZEZyYWdtZW50Q291bnQgPiAxKSB7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCByZXQubGVuZ3RoOyBpKyspIHtcbiAgICAgIHJldFtpXS5wYXRjaEZsYWcgPSAtMjtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHJldDtcbn1cblxuLyohICNfX05PX1NJREVfRUZGRUNUU19fICovXG4vLyBAX19OT19TSURFX0VGRkVDVFNfX1xuZnVuY3Rpb24gZGVmaW5lQ29tcG9uZW50KG9wdGlvbnMsIGV4dHJhT3B0aW9ucykge1xuICByZXR1cm4gaXNGdW5jdGlvbihvcHRpb25zKSA/IChcbiAgICAvLyAjODMyNjogZXh0ZW5kIGNhbGwgYW5kIG9wdGlvbnMubmFtZSBhY2Nlc3MgYXJlIGNvbnNpZGVyZWQgc2lkZS1lZmZlY3RzXG4gICAgLy8gYnkgUm9sbHVwLCBzbyB3ZSBoYXZlIHRvIHdyYXAgaXQgaW4gYSBwdXJlLWFubm90YXRlZCBJSUZFLlxuICAgIC8qIEBfX1BVUkVfXyAqLyAoKCkgPT4gZXh0ZW5kKHsgbmFtZTogb3B0aW9ucy5uYW1lIH0sIGV4dHJhT3B0aW9ucywgeyBzZXR1cDogb3B0aW9ucyB9KSkoKVxuICApIDogb3B0aW9ucztcbn1cblxuY29uc3QgaXNBc3luY1dyYXBwZXIgPSAoaSkgPT4gISFpLnR5cGUuX19hc3luY0xvYWRlcjtcbi8qISAjX19OT19TSURFX0VGRkVDVFNfXyAqL1xuLy8gQF9fTk9fU0lERV9FRkZFQ1RTX19cbmZ1bmN0aW9uIGRlZmluZUFzeW5jQ29tcG9uZW50KHNvdXJjZSkge1xuICBpZiAoaXNGdW5jdGlvbihzb3VyY2UpKSB7XG4gICAgc291cmNlID0geyBsb2FkZXI6IHNvdXJjZSB9O1xuICB9XG4gIGNvbnN0IHtcbiAgICBsb2FkZXIsXG4gICAgbG9hZGluZ0NvbXBvbmVudCxcbiAgICBlcnJvckNvbXBvbmVudCxcbiAgICBkZWxheSA9IDIwMCxcbiAgICB0aW1lb3V0LFxuICAgIC8vIHVuZGVmaW5lZCA9IG5ldmVyIHRpbWVzIG91dFxuICAgIHN1c3BlbnNpYmxlID0gdHJ1ZSxcbiAgICBvbkVycm9yOiB1c2VyT25FcnJvclxuICB9ID0gc291cmNlO1xuICBsZXQgcGVuZGluZ1JlcXVlc3QgPSBudWxsO1xuICBsZXQgcmVzb2x2ZWRDb21wO1xuICBsZXQgcmV0cmllcyA9IDA7XG4gIGNvbnN0IHJldHJ5ID0gKCkgPT4ge1xuICAgIHJldHJpZXMrKztcbiAgICBwZW5kaW5nUmVxdWVzdCA9IG51bGw7XG4gICAgcmV0dXJuIGxvYWQoKTtcbiAgfTtcbiAgY29uc3QgbG9hZCA9ICgpID0+IHtcbiAgICBsZXQgdGhpc1JlcXVlc3Q7XG4gICAgcmV0dXJuIHBlbmRpbmdSZXF1ZXN0IHx8ICh0aGlzUmVxdWVzdCA9IHBlbmRpbmdSZXF1ZXN0ID0gbG9hZGVyKCkuY2F0Y2goKGVycikgPT4ge1xuICAgICAgZXJyID0gZXJyIGluc3RhbmNlb2YgRXJyb3IgPyBlcnIgOiBuZXcgRXJyb3IoU3RyaW5nKGVycikpO1xuICAgICAgaWYgKHVzZXJPbkVycm9yKSB7XG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgY29uc3QgdXNlclJldHJ5ID0gKCkgPT4gcmVzb2x2ZShyZXRyeSgpKTtcbiAgICAgICAgICBjb25zdCB1c2VyRmFpbCA9ICgpID0+IHJlamVjdChlcnIpO1xuICAgICAgICAgIHVzZXJPbkVycm9yKGVyciwgdXNlclJldHJ5LCB1c2VyRmFpbCwgcmV0cmllcyArIDEpO1xuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRocm93IGVycjtcbiAgICAgIH1cbiAgICB9KS50aGVuKChjb21wKSA9PiB7XG4gICAgICBpZiAodGhpc1JlcXVlc3QgIT09IHBlbmRpbmdSZXF1ZXN0ICYmIHBlbmRpbmdSZXF1ZXN0KSB7XG4gICAgICAgIHJldHVybiBwZW5kaW5nUmVxdWVzdDtcbiAgICAgIH1cbiAgICAgIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpICYmICFjb21wKSB7XG4gICAgICAgIHdhcm4kMShcbiAgICAgICAgICBgQXN5bmMgY29tcG9uZW50IGxvYWRlciByZXNvbHZlZCB0byB1bmRlZmluZWQuIElmIHlvdSBhcmUgdXNpbmcgcmV0cnkoKSwgbWFrZSBzdXJlIHRvIHJldHVybiBpdHMgcmV0dXJuIHZhbHVlLmBcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICAgIGlmIChjb21wICYmIChjb21wLl9fZXNNb2R1bGUgfHwgY29tcFtTeW1ib2wudG9TdHJpbmdUYWddID09PSBcIk1vZHVsZVwiKSkge1xuICAgICAgICBjb21wID0gY29tcC5kZWZhdWx0O1xuICAgICAgfVxuICAgICAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgJiYgY29tcCAmJiAhaXNPYmplY3QoY29tcCkgJiYgIWlzRnVuY3Rpb24oY29tcCkpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIGFzeW5jIGNvbXBvbmVudCBsb2FkIHJlc3VsdDogJHtjb21wfWApO1xuICAgICAgfVxuICAgICAgcmVzb2x2ZWRDb21wID0gY29tcDtcbiAgICAgIHJldHVybiBjb21wO1xuICAgIH0pKTtcbiAgfTtcbiAgcmV0dXJuIGRlZmluZUNvbXBvbmVudCh7XG4gICAgbmFtZTogXCJBc3luY0NvbXBvbmVudFdyYXBwZXJcIixcbiAgICBfX2FzeW5jTG9hZGVyOiBsb2FkLFxuICAgIGdldCBfX2FzeW5jUmVzb2x2ZWQoKSB7XG4gICAgICByZXR1cm4gcmVzb2x2ZWRDb21wO1xuICAgIH0sXG4gICAgc2V0dXAoKSB7XG4gICAgICBjb25zdCBpbnN0YW5jZSA9IGN1cnJlbnRJbnN0YW5jZTtcbiAgICAgIGlmIChyZXNvbHZlZENvbXApIHtcbiAgICAgICAgcmV0dXJuICgpID0+IGNyZWF0ZUlubmVyQ29tcChyZXNvbHZlZENvbXAsIGluc3RhbmNlKTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IG9uRXJyb3IgPSAoZXJyKSA9PiB7XG4gICAgICAgIHBlbmRpbmdSZXF1ZXN0ID0gbnVsbDtcbiAgICAgICAgaGFuZGxlRXJyb3IoXG4gICAgICAgICAgZXJyLFxuICAgICAgICAgIGluc3RhbmNlLFxuICAgICAgICAgIDEzLFxuICAgICAgICAgICFlcnJvckNvbXBvbmVudFxuICAgICAgICApO1xuICAgICAgfTtcbiAgICAgIGlmIChzdXNwZW5zaWJsZSAmJiBpbnN0YW5jZS5zdXNwZW5zZSB8fCBpc0luU1NSQ29tcG9uZW50U2V0dXApIHtcbiAgICAgICAgcmV0dXJuIGxvYWQoKS50aGVuKChjb21wKSA9PiB7XG4gICAgICAgICAgcmV0dXJuICgpID0+IGNyZWF0ZUlubmVyQ29tcChjb21wLCBpbnN0YW5jZSk7XG4gICAgICAgIH0pLmNhdGNoKChlcnIpID0+IHtcbiAgICAgICAgICBvbkVycm9yKGVycik7XG4gICAgICAgICAgcmV0dXJuICgpID0+IGVycm9yQ29tcG9uZW50ID8gY3JlYXRlVk5vZGUoZXJyb3JDb21wb25lbnQsIHtcbiAgICAgICAgICAgIGVycm9yOiBlcnJcbiAgICAgICAgICB9KSA6IG51bGw7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgY29uc3QgbG9hZGVkID0gcmVmKGZhbHNlKTtcbiAgICAgIGNvbnN0IGVycm9yID0gcmVmKCk7XG4gICAgICBjb25zdCBkZWxheWVkID0gcmVmKCEhZGVsYXkpO1xuICAgICAgaWYgKGRlbGF5KSB7XG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgIGRlbGF5ZWQudmFsdWUgPSBmYWxzZTtcbiAgICAgICAgfSwgZGVsYXkpO1xuICAgICAgfVxuICAgICAgaWYgKHRpbWVvdXQgIT0gbnVsbCkge1xuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICBpZiAoIWxvYWRlZC52YWx1ZSAmJiAhZXJyb3IudmFsdWUpIHtcbiAgICAgICAgICAgIGNvbnN0IGVyciA9IG5ldyBFcnJvcihcbiAgICAgICAgICAgICAgYEFzeW5jIGNvbXBvbmVudCB0aW1lZCBvdXQgYWZ0ZXIgJHt0aW1lb3V0fW1zLmBcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICBvbkVycm9yKGVycik7XG4gICAgICAgICAgICBlcnJvci52YWx1ZSA9IGVycjtcbiAgICAgICAgICB9XG4gICAgICAgIH0sIHRpbWVvdXQpO1xuICAgICAgfVxuICAgICAgbG9hZCgpLnRoZW4oKCkgPT4ge1xuICAgICAgICBsb2FkZWQudmFsdWUgPSB0cnVlO1xuICAgICAgICBpZiAoaW5zdGFuY2UucGFyZW50ICYmIGlzS2VlcEFsaXZlKGluc3RhbmNlLnBhcmVudC52bm9kZSkpIHtcbiAgICAgICAgICBpbnN0YW5jZS5wYXJlbnQuZWZmZWN0LmRpcnR5ID0gdHJ1ZTtcbiAgICAgICAgICBxdWV1ZUpvYihpbnN0YW5jZS5wYXJlbnQudXBkYXRlKTtcbiAgICAgICAgfVxuICAgICAgfSkuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICBvbkVycm9yKGVycik7XG4gICAgICAgIGVycm9yLnZhbHVlID0gZXJyO1xuICAgICAgfSk7XG4gICAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgICBpZiAobG9hZGVkLnZhbHVlICYmIHJlc29sdmVkQ29tcCkge1xuICAgICAgICAgIHJldHVybiBjcmVhdGVJbm5lckNvbXAocmVzb2x2ZWRDb21wLCBpbnN0YW5jZSk7XG4gICAgICAgIH0gZWxzZSBpZiAoZXJyb3IudmFsdWUgJiYgZXJyb3JDb21wb25lbnQpIHtcbiAgICAgICAgICByZXR1cm4gY3JlYXRlVk5vZGUoZXJyb3JDb21wb25lbnQsIHtcbiAgICAgICAgICAgIGVycm9yOiBlcnJvci52YWx1ZVxuICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2UgaWYgKGxvYWRpbmdDb21wb25lbnQgJiYgIWRlbGF5ZWQudmFsdWUpIHtcbiAgICAgICAgICByZXR1cm4gY3JlYXRlVk5vZGUobG9hZGluZ0NvbXBvbmVudCk7XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgfVxuICB9KTtcbn1cbmZ1bmN0aW9uIGNyZWF0ZUlubmVyQ29tcChjb21wLCBwYXJlbnQpIHtcbiAgY29uc3QgeyByZWY6IHJlZjIsIHByb3BzLCBjaGlsZHJlbiwgY2UgfSA9IHBhcmVudC52bm9kZTtcbiAgY29uc3Qgdm5vZGUgPSBjcmVhdGVWTm9kZShjb21wLCBwcm9wcywgY2hpbGRyZW4pO1xuICB2bm9kZS5yZWYgPSByZWYyO1xuICB2bm9kZS5jZSA9IGNlO1xuICBkZWxldGUgcGFyZW50LnZub2RlLmNlO1xuICByZXR1cm4gdm5vZGU7XG59XG5cbmNvbnN0IGlzS2VlcEFsaXZlID0gKHZub2RlKSA9PiB2bm9kZS50eXBlLl9faXNLZWVwQWxpdmU7XG5jb25zdCBLZWVwQWxpdmVJbXBsID0ge1xuICBuYW1lOiBgS2VlcEFsaXZlYCxcbiAgLy8gTWFya2VyIGZvciBzcGVjaWFsIGhhbmRsaW5nIGluc2lkZSB0aGUgcmVuZGVyZXIuIFdlIGFyZSBub3QgdXNpbmcgYSA9PT1cbiAgLy8gY2hlY2sgZGlyZWN0bHkgb24gS2VlcEFsaXZlIGluIHRoZSByZW5kZXJlciwgYmVjYXVzZSBpbXBvcnRpbmcgaXQgZGlyZWN0bHlcbiAgLy8gd291bGQgcHJldmVudCBpdCBmcm9tIGJlaW5nIHRyZWUtc2hha2VuLlxuICBfX2lzS2VlcEFsaXZlOiB0cnVlLFxuICBwcm9wczoge1xuICAgIGluY2x1ZGU6IFtTdHJpbmcsIFJlZ0V4cCwgQXJyYXldLFxuICAgIGV4Y2x1ZGU6IFtTdHJpbmcsIFJlZ0V4cCwgQXJyYXldLFxuICAgIG1heDogW1N0cmluZywgTnVtYmVyXVxuICB9LFxuICBzZXR1cChwcm9wcywgeyBzbG90cyB9KSB7XG4gICAgY29uc3QgaW5zdGFuY2UgPSBnZXRDdXJyZW50SW5zdGFuY2UoKTtcbiAgICBjb25zdCBzaGFyZWRDb250ZXh0ID0gaW5zdGFuY2UuY3R4O1xuICAgIGlmICghc2hhcmVkQ29udGV4dC5yZW5kZXJlcikge1xuICAgICAgcmV0dXJuICgpID0+IHtcbiAgICAgICAgY29uc3QgY2hpbGRyZW4gPSBzbG90cy5kZWZhdWx0ICYmIHNsb3RzLmRlZmF1bHQoKTtcbiAgICAgICAgcmV0dXJuIGNoaWxkcmVuICYmIGNoaWxkcmVuLmxlbmd0aCA9PT0gMSA/IGNoaWxkcmVuWzBdIDogY2hpbGRyZW47XG4gICAgICB9O1xuICAgIH1cbiAgICBjb25zdCBjYWNoZSA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKCk7XG4gICAgY29uc3Qga2V5cyA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgU2V0KCk7XG4gICAgbGV0IGN1cnJlbnQgPSBudWxsO1xuICAgIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpIHx8IF9fVlVFX1BST0RfREVWVE9PTFNfXykge1xuICAgICAgaW5zdGFuY2UuX192X2NhY2hlID0gY2FjaGU7XG4gICAgfVxuICAgIGNvbnN0IHBhcmVudFN1c3BlbnNlID0gaW5zdGFuY2Uuc3VzcGVuc2U7XG4gICAgY29uc3Qge1xuICAgICAgcmVuZGVyZXI6IHtcbiAgICAgICAgcDogcGF0Y2gsXG4gICAgICAgIG06IG1vdmUsXG4gICAgICAgIHVtOiBfdW5tb3VudCxcbiAgICAgICAgbzogeyBjcmVhdGVFbGVtZW50IH1cbiAgICAgIH1cbiAgICB9ID0gc2hhcmVkQ29udGV4dDtcbiAgICBjb25zdCBzdG9yYWdlQ29udGFpbmVyID0gY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICBzaGFyZWRDb250ZXh0LmFjdGl2YXRlID0gKHZub2RlLCBjb250YWluZXIsIGFuY2hvciwgbmFtZXNwYWNlLCBvcHRpbWl6ZWQpID0+IHtcbiAgICAgIGNvbnN0IGluc3RhbmNlMiA9IHZub2RlLmNvbXBvbmVudDtcbiAgICAgIG1vdmUodm5vZGUsIGNvbnRhaW5lciwgYW5jaG9yLCAwLCBwYXJlbnRTdXNwZW5zZSk7XG4gICAgICBwYXRjaChcbiAgICAgICAgaW5zdGFuY2UyLnZub2RlLFxuICAgICAgICB2bm9kZSxcbiAgICAgICAgY29udGFpbmVyLFxuICAgICAgICBhbmNob3IsXG4gICAgICAgIGluc3RhbmNlMixcbiAgICAgICAgcGFyZW50U3VzcGVuc2UsXG4gICAgICAgIG5hbWVzcGFjZSxcbiAgICAgICAgdm5vZGUuc2xvdFNjb3BlSWRzLFxuICAgICAgICBvcHRpbWl6ZWRcbiAgICAgICk7XG4gICAgICBxdWV1ZVBvc3RSZW5kZXJFZmZlY3QoKCkgPT4ge1xuICAgICAgICBpbnN0YW5jZTIuaXNEZWFjdGl2YXRlZCA9IGZhbHNlO1xuICAgICAgICBpZiAoaW5zdGFuY2UyLmEpIHtcbiAgICAgICAgICBpbnZva2VBcnJheUZucyhpbnN0YW5jZTIuYSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgdm5vZGVIb29rID0gdm5vZGUucHJvcHMgJiYgdm5vZGUucHJvcHMub25Wbm9kZU1vdW50ZWQ7XG4gICAgICAgIGlmICh2bm9kZUhvb2spIHtcbiAgICAgICAgICBpbnZva2VWTm9kZUhvb2sodm5vZGVIb29rLCBpbnN0YW5jZTIucGFyZW50LCB2bm9kZSk7XG4gICAgICAgIH1cbiAgICAgIH0sIHBhcmVudFN1c3BlbnNlKTtcbiAgICAgIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpIHx8IF9fVlVFX1BST0RfREVWVE9PTFNfXykge1xuICAgICAgICBkZXZ0b29sc0NvbXBvbmVudEFkZGVkKGluc3RhbmNlMik7XG4gICAgICB9XG4gICAgfTtcbiAgICBzaGFyZWRDb250ZXh0LmRlYWN0aXZhdGUgPSAodm5vZGUpID0+IHtcbiAgICAgIGNvbnN0IGluc3RhbmNlMiA9IHZub2RlLmNvbXBvbmVudDtcbiAgICAgIG1vdmUodm5vZGUsIHN0b3JhZ2VDb250YWluZXIsIG51bGwsIDEsIHBhcmVudFN1c3BlbnNlKTtcbiAgICAgIHF1ZXVlUG9zdFJlbmRlckVmZmVjdCgoKSA9PiB7XG4gICAgICAgIGlmIChpbnN0YW5jZTIuZGEpIHtcbiAgICAgICAgICBpbnZva2VBcnJheUZucyhpbnN0YW5jZTIuZGEpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHZub2RlSG9vayA9IHZub2RlLnByb3BzICYmIHZub2RlLnByb3BzLm9uVm5vZGVVbm1vdW50ZWQ7XG4gICAgICAgIGlmICh2bm9kZUhvb2spIHtcbiAgICAgICAgICBpbnZva2VWTm9kZUhvb2sodm5vZGVIb29rLCBpbnN0YW5jZTIucGFyZW50LCB2bm9kZSk7XG4gICAgICAgIH1cbiAgICAgICAgaW5zdGFuY2UyLmlzRGVhY3RpdmF0ZWQgPSB0cnVlO1xuICAgICAgfSwgcGFyZW50U3VzcGVuc2UpO1xuICAgICAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgfHwgX19WVUVfUFJPRF9ERVZUT09MU19fKSB7XG4gICAgICAgIGRldnRvb2xzQ29tcG9uZW50QWRkZWQoaW5zdGFuY2UyKTtcbiAgICAgIH1cbiAgICB9O1xuICAgIGZ1bmN0aW9uIHVubW91bnQodm5vZGUpIHtcbiAgICAgIHJlc2V0U2hhcGVGbGFnKHZub2RlKTtcbiAgICAgIF91bm1vdW50KHZub2RlLCBpbnN0YW5jZSwgcGFyZW50U3VzcGVuc2UsIHRydWUpO1xuICAgIH1cbiAgICBmdW5jdGlvbiBwcnVuZUNhY2hlKGZpbHRlcikge1xuICAgICAgY2FjaGUuZm9yRWFjaCgodm5vZGUsIGtleSkgPT4ge1xuICAgICAgICBjb25zdCBuYW1lID0gZ2V0Q29tcG9uZW50TmFtZSh2bm9kZS50eXBlKTtcbiAgICAgICAgaWYgKG5hbWUgJiYgKCFmaWx0ZXIgfHwgIWZpbHRlcihuYW1lKSkpIHtcbiAgICAgICAgICBwcnVuZUNhY2hlRW50cnkoa2V5KTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHBydW5lQ2FjaGVFbnRyeShrZXkpIHtcbiAgICAgIGNvbnN0IGNhY2hlZCA9IGNhY2hlLmdldChrZXkpO1xuICAgICAgaWYgKCFjdXJyZW50IHx8ICFpc1NhbWVWTm9kZVR5cGUoY2FjaGVkLCBjdXJyZW50KSkge1xuICAgICAgICB1bm1vdW50KGNhY2hlZCk7XG4gICAgICB9IGVsc2UgaWYgKGN1cnJlbnQpIHtcbiAgICAgICAgcmVzZXRTaGFwZUZsYWcoY3VycmVudCk7XG4gICAgICB9XG4gICAgICBjYWNoZS5kZWxldGUoa2V5KTtcbiAgICAgIGtleXMuZGVsZXRlKGtleSk7XG4gICAgfVxuICAgIHdhdGNoKFxuICAgICAgKCkgPT4gW3Byb3BzLmluY2x1ZGUsIHByb3BzLmV4Y2x1ZGVdLFxuICAgICAgKFtpbmNsdWRlLCBleGNsdWRlXSkgPT4ge1xuICAgICAgICBpbmNsdWRlICYmIHBydW5lQ2FjaGUoKG5hbWUpID0+IG1hdGNoZXMoaW5jbHVkZSwgbmFtZSkpO1xuICAgICAgICBleGNsdWRlICYmIHBydW5lQ2FjaGUoKG5hbWUpID0+ICFtYXRjaGVzKGV4Y2x1ZGUsIG5hbWUpKTtcbiAgICAgIH0sXG4gICAgICAvLyBwcnVuZSBwb3N0LXJlbmRlciBhZnRlciBgY3VycmVudGAgaGFzIGJlZW4gdXBkYXRlZFxuICAgICAgeyBmbHVzaDogXCJwb3N0XCIsIGRlZXA6IHRydWUgfVxuICAgICk7XG4gICAgbGV0IHBlbmRpbmdDYWNoZUtleSA9IG51bGw7XG4gICAgY29uc3QgY2FjaGVTdWJ0cmVlID0gKCkgPT4ge1xuICAgICAgaWYgKHBlbmRpbmdDYWNoZUtleSAhPSBudWxsKSB7XG4gICAgICAgIGNhY2hlLnNldChwZW5kaW5nQ2FjaGVLZXksIGdldElubmVyQ2hpbGQoaW5zdGFuY2Uuc3ViVHJlZSkpO1xuICAgICAgfVxuICAgIH07XG4gICAgb25Nb3VudGVkKGNhY2hlU3VidHJlZSk7XG4gICAgb25VcGRhdGVkKGNhY2hlU3VidHJlZSk7XG4gICAgb25CZWZvcmVVbm1vdW50KCgpID0+IHtcbiAgICAgIGNhY2hlLmZvckVhY2goKGNhY2hlZCkgPT4ge1xuICAgICAgICBjb25zdCB7IHN1YlRyZWUsIHN1c3BlbnNlIH0gPSBpbnN0YW5jZTtcbiAgICAgICAgY29uc3Qgdm5vZGUgPSBnZXRJbm5lckNoaWxkKHN1YlRyZWUpO1xuICAgICAgICBpZiAoY2FjaGVkLnR5cGUgPT09IHZub2RlLnR5cGUgJiYgY2FjaGVkLmtleSA9PT0gdm5vZGUua2V5KSB7XG4gICAgICAgICAgcmVzZXRTaGFwZUZsYWcodm5vZGUpO1xuICAgICAgICAgIGNvbnN0IGRhID0gdm5vZGUuY29tcG9uZW50LmRhO1xuICAgICAgICAgIGRhICYmIHF1ZXVlUG9zdFJlbmRlckVmZmVjdChkYSwgc3VzcGVuc2UpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB1bm1vdW50KGNhY2hlZCk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgcGVuZGluZ0NhY2hlS2V5ID0gbnVsbDtcbiAgICAgIGlmICghc2xvdHMuZGVmYXVsdCkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH1cbiAgICAgIGNvbnN0IGNoaWxkcmVuID0gc2xvdHMuZGVmYXVsdCgpO1xuICAgICAgY29uc3QgcmF3Vk5vZGUgPSBjaGlsZHJlblswXTtcbiAgICAgIGlmIChjaGlsZHJlbi5sZW5ndGggPiAxKSB7XG4gICAgICAgIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpKSB7XG4gICAgICAgICAgd2FybiQxKGBLZWVwQWxpdmUgc2hvdWxkIGNvbnRhaW4gZXhhY3RseSBvbmUgY29tcG9uZW50IGNoaWxkLmApO1xuICAgICAgICB9XG4gICAgICAgIGN1cnJlbnQgPSBudWxsO1xuICAgICAgICByZXR1cm4gY2hpbGRyZW47XG4gICAgICB9IGVsc2UgaWYgKCFpc1ZOb2RlKHJhd1ZOb2RlKSB8fCAhKHJhd1ZOb2RlLnNoYXBlRmxhZyAmIDQpICYmICEocmF3Vk5vZGUuc2hhcGVGbGFnICYgMTI4KSkge1xuICAgICAgICBjdXJyZW50ID0gbnVsbDtcbiAgICAgICAgcmV0dXJuIHJhd1ZOb2RlO1xuICAgICAgfVxuICAgICAgbGV0IHZub2RlID0gZ2V0SW5uZXJDaGlsZChyYXdWTm9kZSk7XG4gICAgICBjb25zdCBjb21wID0gdm5vZGUudHlwZTtcbiAgICAgIGNvbnN0IG5hbWUgPSBnZXRDb21wb25lbnROYW1lKFxuICAgICAgICBpc0FzeW5jV3JhcHBlcih2bm9kZSkgPyB2bm9kZS50eXBlLl9fYXN5bmNSZXNvbHZlZCB8fCB7fSA6IGNvbXBcbiAgICAgICk7XG4gICAgICBjb25zdCB7IGluY2x1ZGUsIGV4Y2x1ZGUsIG1heCB9ID0gcHJvcHM7XG4gICAgICBpZiAoaW5jbHVkZSAmJiAoIW5hbWUgfHwgIW1hdGNoZXMoaW5jbHVkZSwgbmFtZSkpIHx8IGV4Y2x1ZGUgJiYgbmFtZSAmJiBtYXRjaGVzKGV4Y2x1ZGUsIG5hbWUpKSB7XG4gICAgICAgIGN1cnJlbnQgPSB2bm9kZTtcbiAgICAgICAgcmV0dXJuIHJhd1ZOb2RlO1xuICAgICAgfVxuICAgICAgY29uc3Qga2V5ID0gdm5vZGUua2V5ID09IG51bGwgPyBjb21wIDogdm5vZGUua2V5O1xuICAgICAgY29uc3QgY2FjaGVkVk5vZGUgPSBjYWNoZS5nZXQoa2V5KTtcbiAgICAgIGlmICh2bm9kZS5lbCkge1xuICAgICAgICB2bm9kZSA9IGNsb25lVk5vZGUodm5vZGUpO1xuICAgICAgICBpZiAocmF3Vk5vZGUuc2hhcGVGbGFnICYgMTI4KSB7XG4gICAgICAgICAgcmF3Vk5vZGUuc3NDb250ZW50ID0gdm5vZGU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHBlbmRpbmdDYWNoZUtleSA9IGtleTtcbiAgICAgIGlmIChjYWNoZWRWTm9kZSkge1xuICAgICAgICB2bm9kZS5lbCA9IGNhY2hlZFZOb2RlLmVsO1xuICAgICAgICB2bm9kZS5jb21wb25lbnQgPSBjYWNoZWRWTm9kZS5jb21wb25lbnQ7XG4gICAgICAgIGlmICh2bm9kZS50cmFuc2l0aW9uKSB7XG4gICAgICAgICAgc2V0VHJhbnNpdGlvbkhvb2tzKHZub2RlLCB2bm9kZS50cmFuc2l0aW9uKTtcbiAgICAgICAgfVxuICAgICAgICB2bm9kZS5zaGFwZUZsYWcgfD0gNTEyO1xuICAgICAgICBrZXlzLmRlbGV0ZShrZXkpO1xuICAgICAgICBrZXlzLmFkZChrZXkpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAga2V5cy5hZGQoa2V5KTtcbiAgICAgICAgaWYgKG1heCAmJiBrZXlzLnNpemUgPiBwYXJzZUludChtYXgsIDEwKSkge1xuICAgICAgICAgIHBydW5lQ2FjaGVFbnRyeShrZXlzLnZhbHVlcygpLm5leHQoKS52YWx1ZSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHZub2RlLnNoYXBlRmxhZyB8PSAyNTY7XG4gICAgICBjdXJyZW50ID0gdm5vZGU7XG4gICAgICByZXR1cm4gaXNTdXNwZW5zZShyYXdWTm9kZS50eXBlKSA/IHJhd1ZOb2RlIDogdm5vZGU7XG4gICAgfTtcbiAgfVxufTtcbmNvbnN0IEtlZXBBbGl2ZSA9IEtlZXBBbGl2ZUltcGw7XG5mdW5jdGlvbiBtYXRjaGVzKHBhdHRlcm4sIG5hbWUpIHtcbiAgaWYgKGlzQXJyYXkocGF0dGVybikpIHtcbiAgICByZXR1cm4gcGF0dGVybi5zb21lKChwKSA9PiBtYXRjaGVzKHAsIG5hbWUpKTtcbiAgfSBlbHNlIGlmIChpc1N0cmluZyhwYXR0ZXJuKSkge1xuICAgIHJldHVybiBwYXR0ZXJuLnNwbGl0KFwiLFwiKS5pbmNsdWRlcyhuYW1lKTtcbiAgfSBlbHNlIGlmIChpc1JlZ0V4cChwYXR0ZXJuKSkge1xuICAgIHJldHVybiBwYXR0ZXJuLnRlc3QobmFtZSk7XG4gIH1cbiAgcmV0dXJuIGZhbHNlO1xufVxuZnVuY3Rpb24gb25BY3RpdmF0ZWQoaG9vaywgdGFyZ2V0KSB7XG4gIHJlZ2lzdGVyS2VlcEFsaXZlSG9vayhob29rLCBcImFcIiwgdGFyZ2V0KTtcbn1cbmZ1bmN0aW9uIG9uRGVhY3RpdmF0ZWQoaG9vaywgdGFyZ2V0KSB7XG4gIHJlZ2lzdGVyS2VlcEFsaXZlSG9vayhob29rLCBcImRhXCIsIHRhcmdldCk7XG59XG5mdW5jdGlvbiByZWdpc3RlcktlZXBBbGl2ZUhvb2soaG9vaywgdHlwZSwgdGFyZ2V0ID0gY3VycmVudEluc3RhbmNlKSB7XG4gIGNvbnN0IHdyYXBwZWRIb29rID0gaG9vay5fX3dkYyB8fCAoaG9vay5fX3dkYyA9ICgpID0+IHtcbiAgICBsZXQgY3VycmVudCA9IHRhcmdldDtcbiAgICB3aGlsZSAoY3VycmVudCkge1xuICAgICAgaWYgKGN1cnJlbnQuaXNEZWFjdGl2YXRlZCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBjdXJyZW50ID0gY3VycmVudC5wYXJlbnQ7XG4gICAgfVxuICAgIHJldHVybiBob29rKCk7XG4gIH0pO1xuICBpbmplY3RIb29rKHR5cGUsIHdyYXBwZWRIb29rLCB0YXJnZXQpO1xuICBpZiAodGFyZ2V0KSB7XG4gICAgbGV0IGN1cnJlbnQgPSB0YXJnZXQucGFyZW50O1xuICAgIHdoaWxlIChjdXJyZW50ICYmIGN1cnJlbnQucGFyZW50KSB7XG4gICAgICBpZiAoaXNLZWVwQWxpdmUoY3VycmVudC5wYXJlbnQudm5vZGUpKSB7XG4gICAgICAgIGluamVjdFRvS2VlcEFsaXZlUm9vdCh3cmFwcGVkSG9vaywgdHlwZSwgdGFyZ2V0LCBjdXJyZW50KTtcbiAgICAgIH1cbiAgICAgIGN1cnJlbnQgPSBjdXJyZW50LnBhcmVudDtcbiAgICB9XG4gIH1cbn1cbmZ1bmN0aW9uIGluamVjdFRvS2VlcEFsaXZlUm9vdChob29rLCB0eXBlLCB0YXJnZXQsIGtlZXBBbGl2ZVJvb3QpIHtcbiAgY29uc3QgaW5qZWN0ZWQgPSBpbmplY3RIb29rKFxuICAgIHR5cGUsXG4gICAgaG9vayxcbiAgICBrZWVwQWxpdmVSb290LFxuICAgIHRydWVcbiAgICAvKiBwcmVwZW5kICovXG4gICk7XG4gIG9uVW5tb3VudGVkKCgpID0+IHtcbiAgICByZW1vdmUoa2VlcEFsaXZlUm9vdFt0eXBlXSwgaW5qZWN0ZWQpO1xuICB9LCB0YXJnZXQpO1xufVxuZnVuY3Rpb24gcmVzZXRTaGFwZUZsYWcodm5vZGUpIHtcbiAgdm5vZGUuc2hhcGVGbGFnICY9IH4yNTY7XG4gIHZub2RlLnNoYXBlRmxhZyAmPSB+NTEyO1xufVxuZnVuY3Rpb24gZ2V0SW5uZXJDaGlsZCh2bm9kZSkge1xuICByZXR1cm4gdm5vZGUuc2hhcGVGbGFnICYgMTI4ID8gdm5vZGUuc3NDb250ZW50IDogdm5vZGU7XG59XG5cbmZ1bmN0aW9uIGluamVjdEhvb2sodHlwZSwgaG9vaywgdGFyZ2V0ID0gY3VycmVudEluc3RhbmNlLCBwcmVwZW5kID0gZmFsc2UpIHtcbiAgaWYgKHRhcmdldCkge1xuICAgIGNvbnN0IGhvb2tzID0gdGFyZ2V0W3R5cGVdIHx8ICh0YXJnZXRbdHlwZV0gPSBbXSk7XG4gICAgY29uc3Qgd3JhcHBlZEhvb2sgPSBob29rLl9fd2VoIHx8IChob29rLl9fd2VoID0gKC4uLmFyZ3MpID0+IHtcbiAgICAgIGlmICh0YXJnZXQuaXNVbm1vdW50ZWQpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgcGF1c2VUcmFja2luZygpO1xuICAgICAgY29uc3QgcmVzZXQgPSBzZXRDdXJyZW50SW5zdGFuY2UodGFyZ2V0KTtcbiAgICAgIGNvbnN0IHJlcyA9IGNhbGxXaXRoQXN5bmNFcnJvckhhbmRsaW5nKGhvb2ssIHRhcmdldCwgdHlwZSwgYXJncyk7XG4gICAgICByZXNldCgpO1xuICAgICAgcmVzZXRUcmFja2luZygpO1xuICAgICAgcmV0dXJuIHJlcztcbiAgICB9KTtcbiAgICBpZiAocHJlcGVuZCkge1xuICAgICAgaG9va3MudW5zaGlmdCh3cmFwcGVkSG9vayk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGhvb2tzLnB1c2god3JhcHBlZEhvb2spO1xuICAgIH1cbiAgICByZXR1cm4gd3JhcHBlZEhvb2s7XG4gIH0gZWxzZSBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSkge1xuICAgIGNvbnN0IGFwaU5hbWUgPSB0b0hhbmRsZXJLZXkoRXJyb3JUeXBlU3RyaW5ncyQxW3R5cGVdLnJlcGxhY2UoLyBob29rJC8sIFwiXCIpKTtcbiAgICB3YXJuJDEoXG4gICAgICBgJHthcGlOYW1lfSBpcyBjYWxsZWQgd2hlbiB0aGVyZSBpcyBubyBhY3RpdmUgY29tcG9uZW50IGluc3RhbmNlIHRvIGJlIGFzc29jaWF0ZWQgd2l0aC4gTGlmZWN5Y2xlIGluamVjdGlvbiBBUElzIGNhbiBvbmx5IGJlIHVzZWQgZHVyaW5nIGV4ZWN1dGlvbiBvZiBzZXR1cCgpLmAgKyAoYCBJZiB5b3UgYXJlIHVzaW5nIGFzeW5jIHNldHVwKCksIG1ha2Ugc3VyZSB0byByZWdpc3RlciBsaWZlY3ljbGUgaG9va3MgYmVmb3JlIHRoZSBmaXJzdCBhd2FpdCBzdGF0ZW1lbnQuYCApXG4gICAgKTtcbiAgfVxufVxuY29uc3QgY3JlYXRlSG9vayA9IChsaWZlY3ljbGUpID0+IChob29rLCB0YXJnZXQgPSBjdXJyZW50SW5zdGFuY2UpID0+IChcbiAgLy8gcG9zdC1jcmVhdGUgbGlmZWN5Y2xlIHJlZ2lzdHJhdGlvbnMgYXJlIG5vb3BzIGR1cmluZyBTU1IgKGV4Y2VwdCBmb3Igc2VydmVyUHJlZmV0Y2gpXG4gICghaXNJblNTUkNvbXBvbmVudFNldHVwIHx8IGxpZmVjeWNsZSA9PT0gXCJzcFwiKSAmJiBpbmplY3RIb29rKGxpZmVjeWNsZSwgKC4uLmFyZ3MpID0+IGhvb2soLi4uYXJncyksIHRhcmdldClcbik7XG5jb25zdCBvbkJlZm9yZU1vdW50ID0gY3JlYXRlSG9vayhcImJtXCIpO1xuY29uc3Qgb25Nb3VudGVkID0gY3JlYXRlSG9vayhcIm1cIik7XG5jb25zdCBvbkJlZm9yZVVwZGF0ZSA9IGNyZWF0ZUhvb2soXCJidVwiKTtcbmNvbnN0IG9uVXBkYXRlZCA9IGNyZWF0ZUhvb2soXCJ1XCIpO1xuY29uc3Qgb25CZWZvcmVVbm1vdW50ID0gY3JlYXRlSG9vayhcImJ1bVwiKTtcbmNvbnN0IG9uVW5tb3VudGVkID0gY3JlYXRlSG9vayhcInVtXCIpO1xuY29uc3Qgb25TZXJ2ZXJQcmVmZXRjaCA9IGNyZWF0ZUhvb2soXCJzcFwiKTtcbmNvbnN0IG9uUmVuZGVyVHJpZ2dlcmVkID0gY3JlYXRlSG9vayhcbiAgXCJydGdcIlxuKTtcbmNvbnN0IG9uUmVuZGVyVHJhY2tlZCA9IGNyZWF0ZUhvb2soXG4gIFwicnRjXCJcbik7XG5mdW5jdGlvbiBvbkVycm9yQ2FwdHVyZWQoaG9vaywgdGFyZ2V0ID0gY3VycmVudEluc3RhbmNlKSB7XG4gIGluamVjdEhvb2soXCJlY1wiLCBob29rLCB0YXJnZXQpO1xufVxuXG5mdW5jdGlvbiByZW5kZXJMaXN0KHNvdXJjZSwgcmVuZGVySXRlbSwgY2FjaGUsIGluZGV4KSB7XG4gIGxldCByZXQ7XG4gIGNvbnN0IGNhY2hlZCA9IGNhY2hlICYmIGNhY2hlW2luZGV4XTtcbiAgaWYgKGlzQXJyYXkoc291cmNlKSB8fCBpc1N0cmluZyhzb3VyY2UpKSB7XG4gICAgcmV0ID0gbmV3IEFycmF5KHNvdXJjZS5sZW5ndGgpO1xuICAgIGZvciAobGV0IGkgPSAwLCBsID0gc291cmNlLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgcmV0W2ldID0gcmVuZGVySXRlbShzb3VyY2VbaV0sIGksIHZvaWQgMCwgY2FjaGVkICYmIGNhY2hlZFtpXSk7XG4gICAgfVxuICB9IGVsc2UgaWYgKHR5cGVvZiBzb3VyY2UgPT09IFwibnVtYmVyXCIpIHtcbiAgICBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSAmJiAhTnVtYmVyLmlzSW50ZWdlcihzb3VyY2UpKSB7XG4gICAgICB3YXJuJDEoYFRoZSB2LWZvciByYW5nZSBleHBlY3QgYW4gaW50ZWdlciB2YWx1ZSBidXQgZ290ICR7c291cmNlfS5gKTtcbiAgICB9XG4gICAgcmV0ID0gbmV3IEFycmF5KHNvdXJjZSk7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzb3VyY2U7IGkrKykge1xuICAgICAgcmV0W2ldID0gcmVuZGVySXRlbShpICsgMSwgaSwgdm9pZCAwLCBjYWNoZWQgJiYgY2FjaGVkW2ldKTtcbiAgICB9XG4gIH0gZWxzZSBpZiAoaXNPYmplY3Qoc291cmNlKSkge1xuICAgIGlmIChzb3VyY2VbU3ltYm9sLml0ZXJhdG9yXSkge1xuICAgICAgcmV0ID0gQXJyYXkuZnJvbShcbiAgICAgICAgc291cmNlLFxuICAgICAgICAoaXRlbSwgaSkgPT4gcmVuZGVySXRlbShpdGVtLCBpLCB2b2lkIDAsIGNhY2hlZCAmJiBjYWNoZWRbaV0pXG4gICAgICApO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBrZXlzID0gT2JqZWN0LmtleXMoc291cmNlKTtcbiAgICAgIHJldCA9IG5ldyBBcnJheShrZXlzLmxlbmd0aCk7XG4gICAgICBmb3IgKGxldCBpID0gMCwgbCA9IGtleXMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgIGNvbnN0IGtleSA9IGtleXNbaV07XG4gICAgICAgIHJldFtpXSA9IHJlbmRlckl0ZW0oc291cmNlW2tleV0sIGtleSwgaSwgY2FjaGVkICYmIGNhY2hlZFtpXSk7XG4gICAgICB9XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIHJldCA9IFtdO1xuICB9XG4gIGlmIChjYWNoZSkge1xuICAgIGNhY2hlW2luZGV4XSA9IHJldDtcbiAgfVxuICByZXR1cm4gcmV0O1xufVxuXG5mdW5jdGlvbiBjcmVhdGVTbG90cyhzbG90cywgZHluYW1pY1Nsb3RzKSB7XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgZHluYW1pY1Nsb3RzLmxlbmd0aDsgaSsrKSB7XG4gICAgY29uc3Qgc2xvdCA9IGR5bmFtaWNTbG90c1tpXTtcbiAgICBpZiAoaXNBcnJheShzbG90KSkge1xuICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBzbG90Lmxlbmd0aDsgaisrKSB7XG4gICAgICAgIHNsb3RzW3Nsb3Rbal0ubmFtZV0gPSBzbG90W2pdLmZuO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoc2xvdCkge1xuICAgICAgc2xvdHNbc2xvdC5uYW1lXSA9IHNsb3Qua2V5ID8gKC4uLmFyZ3MpID0+IHtcbiAgICAgICAgY29uc3QgcmVzID0gc2xvdC5mbiguLi5hcmdzKTtcbiAgICAgICAgaWYgKHJlcylcbiAgICAgICAgICByZXMua2V5ID0gc2xvdC5rZXk7XG4gICAgICAgIHJldHVybiByZXM7XG4gICAgICB9IDogc2xvdC5mbjtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHNsb3RzO1xufVxuXG5mdW5jdGlvbiByZW5kZXJTbG90KHNsb3RzLCBuYW1lLCBwcm9wcyA9IHt9LCBmYWxsYmFjaywgbm9TbG90dGVkKSB7XG4gIGlmIChjdXJyZW50UmVuZGVyaW5nSW5zdGFuY2UuaXNDRSB8fCBjdXJyZW50UmVuZGVyaW5nSW5zdGFuY2UucGFyZW50ICYmIGlzQXN5bmNXcmFwcGVyKGN1cnJlbnRSZW5kZXJpbmdJbnN0YW5jZS5wYXJlbnQpICYmIGN1cnJlbnRSZW5kZXJpbmdJbnN0YW5jZS5wYXJlbnQuaXNDRSkge1xuICAgIGlmIChuYW1lICE9PSBcImRlZmF1bHRcIilcbiAgICAgIHByb3BzLm5hbWUgPSBuYW1lO1xuICAgIHJldHVybiBjcmVhdGVWTm9kZShcInNsb3RcIiwgcHJvcHMsIGZhbGxiYWNrICYmIGZhbGxiYWNrKCkpO1xuICB9XG4gIGxldCBzbG90ID0gc2xvdHNbbmFtZV07XG4gIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpICYmIHNsb3QgJiYgc2xvdC5sZW5ndGggPiAxKSB7XG4gICAgd2FybiQxKFxuICAgICAgYFNTUi1vcHRpbWl6ZWQgc2xvdCBmdW5jdGlvbiBkZXRlY3RlZCBpbiBhIG5vbi1TU1Itb3B0aW1pemVkIHJlbmRlciBmdW5jdGlvbi4gWW91IG5lZWQgdG8gbWFyayB0aGlzIGNvbXBvbmVudCB3aXRoICRkeW5hbWljLXNsb3RzIGluIHRoZSBwYXJlbnQgdGVtcGxhdGUuYFxuICAgICk7XG4gICAgc2xvdCA9ICgpID0+IFtdO1xuICB9XG4gIGlmIChzbG90ICYmIHNsb3QuX2MpIHtcbiAgICBzbG90Ll9kID0gZmFsc2U7XG4gIH1cbiAgb3BlbkJsb2NrKCk7XG4gIGNvbnN0IHZhbGlkU2xvdENvbnRlbnQgPSBzbG90ICYmIGVuc3VyZVZhbGlkVk5vZGUoc2xvdChwcm9wcykpO1xuICBjb25zdCByZW5kZXJlZCA9IGNyZWF0ZUJsb2NrKFxuICAgIEZyYWdtZW50LFxuICAgIHtcbiAgICAgIGtleTogcHJvcHMua2V5IHx8IC8vIHNsb3QgY29udGVudCBhcnJheSBvZiBhIGR5bmFtaWMgY29uZGl0aW9uYWwgc2xvdCBtYXkgaGF2ZSBhIGJyYW5jaFxuICAgICAgLy8ga2V5IGF0dGFjaGVkIGluIHRoZSBgY3JlYXRlU2xvdHNgIGhlbHBlciwgcmVzcGVjdCB0aGF0XG4gICAgICB2YWxpZFNsb3RDb250ZW50ICYmIHZhbGlkU2xvdENvbnRlbnQua2V5IHx8IGBfJHtuYW1lfWBcbiAgICB9LFxuICAgIHZhbGlkU2xvdENvbnRlbnQgfHwgKGZhbGxiYWNrID8gZmFsbGJhY2soKSA6IFtdKSxcbiAgICB2YWxpZFNsb3RDb250ZW50ICYmIHNsb3RzLl8gPT09IDEgPyA2NCA6IC0yXG4gICk7XG4gIGlmICghbm9TbG90dGVkICYmIHJlbmRlcmVkLnNjb3BlSWQpIHtcbiAgICByZW5kZXJlZC5zbG90U2NvcGVJZHMgPSBbcmVuZGVyZWQuc2NvcGVJZCArIFwiLXNcIl07XG4gIH1cbiAgaWYgKHNsb3QgJiYgc2xvdC5fYykge1xuICAgIHNsb3QuX2QgPSB0cnVlO1xuICB9XG4gIHJldHVybiByZW5kZXJlZDtcbn1cbmZ1bmN0aW9uIGVuc3VyZVZhbGlkVk5vZGUodm5vZGVzKSB7XG4gIHJldHVybiB2bm9kZXMuc29tZSgoY2hpbGQpID0+IHtcbiAgICBpZiAoIWlzVk5vZGUoY2hpbGQpKVxuICAgICAgcmV0dXJuIHRydWU7XG4gICAgaWYgKGNoaWxkLnR5cGUgPT09IENvbW1lbnQpXG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgaWYgKGNoaWxkLnR5cGUgPT09IEZyYWdtZW50ICYmICFlbnN1cmVWYWxpZFZOb2RlKGNoaWxkLmNoaWxkcmVuKSlcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfSkgPyB2bm9kZXMgOiBudWxsO1xufVxuXG5mdW5jdGlvbiB0b0hhbmRsZXJzKG9iaiwgcHJlc2VydmVDYXNlSWZOZWNlc3NhcnkpIHtcbiAgY29uc3QgcmV0ID0ge307XG4gIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpICYmICFpc09iamVjdChvYmopKSB7XG4gICAgd2FybiQxKGB2LW9uIHdpdGggbm8gYXJndW1lbnQgZXhwZWN0cyBhbiBvYmplY3QgdmFsdWUuYCk7XG4gICAgcmV0dXJuIHJldDtcbiAgfVxuICBmb3IgKGNvbnN0IGtleSBpbiBvYmopIHtcbiAgICByZXRbcHJlc2VydmVDYXNlSWZOZWNlc3NhcnkgJiYgL1tBLVpdLy50ZXN0KGtleSkgPyBgb246JHtrZXl9YCA6IHRvSGFuZGxlcktleShrZXkpXSA9IG9ialtrZXldO1xuICB9XG4gIHJldHVybiByZXQ7XG59XG5cbmNvbnN0IGdldFB1YmxpY0luc3RhbmNlID0gKGkpID0+IHtcbiAgaWYgKCFpKVxuICAgIHJldHVybiBudWxsO1xuICBpZiAoaXNTdGF0ZWZ1bENvbXBvbmVudChpKSlcbiAgICByZXR1cm4gZ2V0RXhwb3NlUHJveHkoaSkgfHwgaS5wcm94eTtcbiAgcmV0dXJuIGdldFB1YmxpY0luc3RhbmNlKGkucGFyZW50KTtcbn07XG5jb25zdCBwdWJsaWNQcm9wZXJ0aWVzTWFwID0gKFxuICAvLyBNb3ZlIFBVUkUgbWFya2VyIHRvIG5ldyBsaW5lIHRvIHdvcmthcm91bmQgY29tcGlsZXIgZGlzY2FyZGluZyBpdFxuICAvLyBkdWUgdG8gdHlwZSBhbm5vdGF0aW9uXG4gIC8qIEBfX1BVUkVfXyAqLyBleHRlbmQoLyogQF9fUFVSRV9fICovIE9iamVjdC5jcmVhdGUobnVsbCksIHtcbiAgICAkOiAoaSkgPT4gaSxcbiAgICAkZWw6IChpKSA9PiBpLnZub2RlLmVsLFxuICAgICRkYXRhOiAoaSkgPT4gaS5kYXRhLFxuICAgICRwcm9wczogKGkpID0+ICEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgPyBzaGFsbG93UmVhZG9ubHkoaS5wcm9wcykgOiBpLnByb3BzLFxuICAgICRhdHRyczogKGkpID0+ICEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgPyBzaGFsbG93UmVhZG9ubHkoaS5hdHRycykgOiBpLmF0dHJzLFxuICAgICRzbG90czogKGkpID0+ICEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgPyBzaGFsbG93UmVhZG9ubHkoaS5zbG90cykgOiBpLnNsb3RzLFxuICAgICRyZWZzOiAoaSkgPT4gISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSA/IHNoYWxsb3dSZWFkb25seShpLnJlZnMpIDogaS5yZWZzLFxuICAgICRwYXJlbnQ6IChpKSA9PiBnZXRQdWJsaWNJbnN0YW5jZShpLnBhcmVudCksXG4gICAgJHJvb3Q6IChpKSA9PiBnZXRQdWJsaWNJbnN0YW5jZShpLnJvb3QpLFxuICAgICRlbWl0OiAoaSkgPT4gaS5lbWl0LFxuICAgICRvcHRpb25zOiAoaSkgPT4gX19WVUVfT1BUSU9OU19BUElfXyA/IHJlc29sdmVNZXJnZWRPcHRpb25zKGkpIDogaS50eXBlLFxuICAgICRmb3JjZVVwZGF0ZTogKGkpID0+IGkuZiB8fCAoaS5mID0gKCkgPT4ge1xuICAgICAgaS5lZmZlY3QuZGlydHkgPSB0cnVlO1xuICAgICAgcXVldWVKb2IoaS51cGRhdGUpO1xuICAgIH0pLFxuICAgICRuZXh0VGljazogKGkpID0+IGkubiB8fCAoaS5uID0gbmV4dFRpY2suYmluZChpLnByb3h5KSksXG4gICAgJHdhdGNoOiAoaSkgPT4gX19WVUVfT1BUSU9OU19BUElfXyA/IGluc3RhbmNlV2F0Y2guYmluZChpKSA6IE5PT1BcbiAgfSlcbik7XG5jb25zdCBpc1Jlc2VydmVkUHJlZml4ID0gKGtleSkgPT4ga2V5ID09PSBcIl9cIiB8fCBrZXkgPT09IFwiJFwiO1xuY29uc3QgaGFzU2V0dXBCaW5kaW5nID0gKHN0YXRlLCBrZXkpID0+IHN0YXRlICE9PSBFTVBUWV9PQkogJiYgIXN0YXRlLl9faXNTY3JpcHRTZXR1cCAmJiBoYXNPd24oc3RhdGUsIGtleSk7XG5jb25zdCBQdWJsaWNJbnN0YW5jZVByb3h5SGFuZGxlcnMgPSB7XG4gIGdldCh7IF86IGluc3RhbmNlIH0sIGtleSkge1xuICAgIGNvbnN0IHsgY3R4LCBzZXR1cFN0YXRlLCBkYXRhLCBwcm9wcywgYWNjZXNzQ2FjaGUsIHR5cGUsIGFwcENvbnRleHQgfSA9IGluc3RhbmNlO1xuICAgIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpICYmIGtleSA9PT0gXCJfX2lzVnVlXCIpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBsZXQgbm9ybWFsaXplZFByb3BzO1xuICAgIGlmIChrZXlbMF0gIT09IFwiJFwiKSB7XG4gICAgICBjb25zdCBuID0gYWNjZXNzQ2FjaGVba2V5XTtcbiAgICAgIGlmIChuICE9PSB2b2lkIDApIHtcbiAgICAgICAgc3dpdGNoIChuKSB7XG4gICAgICAgICAgY2FzZSAxIC8qIFNFVFVQICovOlxuICAgICAgICAgICAgcmV0dXJuIHNldHVwU3RhdGVba2V5XTtcbiAgICAgICAgICBjYXNlIDIgLyogREFUQSAqLzpcbiAgICAgICAgICAgIHJldHVybiBkYXRhW2tleV07XG4gICAgICAgICAgY2FzZSA0IC8qIENPTlRFWFQgKi86XG4gICAgICAgICAgICByZXR1cm4gY3R4W2tleV07XG4gICAgICAgICAgY2FzZSAzIC8qIFBST1BTICovOlxuICAgICAgICAgICAgcmV0dXJuIHByb3BzW2tleV07XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoaGFzU2V0dXBCaW5kaW5nKHNldHVwU3RhdGUsIGtleSkpIHtcbiAgICAgICAgYWNjZXNzQ2FjaGVba2V5XSA9IDEgLyogU0VUVVAgKi87XG4gICAgICAgIHJldHVybiBzZXR1cFN0YXRlW2tleV07XG4gICAgICB9IGVsc2UgaWYgKGRhdGEgIT09IEVNUFRZX09CSiAmJiBoYXNPd24oZGF0YSwga2V5KSkge1xuICAgICAgICBhY2Nlc3NDYWNoZVtrZXldID0gMiAvKiBEQVRBICovO1xuICAgICAgICByZXR1cm4gZGF0YVtrZXldO1xuICAgICAgfSBlbHNlIGlmIChcbiAgICAgICAgLy8gb25seSBjYWNoZSBvdGhlciBwcm9wZXJ0aWVzIHdoZW4gaW5zdGFuY2UgaGFzIGRlY2xhcmVkICh0aHVzIHN0YWJsZSlcbiAgICAgICAgLy8gcHJvcHNcbiAgICAgICAgKG5vcm1hbGl6ZWRQcm9wcyA9IGluc3RhbmNlLnByb3BzT3B0aW9uc1swXSkgJiYgaGFzT3duKG5vcm1hbGl6ZWRQcm9wcywga2V5KVxuICAgICAgKSB7XG4gICAgICAgIGFjY2Vzc0NhY2hlW2tleV0gPSAzIC8qIFBST1BTICovO1xuICAgICAgICByZXR1cm4gcHJvcHNba2V5XTtcbiAgICAgIH0gZWxzZSBpZiAoY3R4ICE9PSBFTVBUWV9PQkogJiYgaGFzT3duKGN0eCwga2V5KSkge1xuICAgICAgICBhY2Nlc3NDYWNoZVtrZXldID0gNCAvKiBDT05URVhUICovO1xuICAgICAgICByZXR1cm4gY3R4W2tleV07XG4gICAgICB9IGVsc2UgaWYgKCFfX1ZVRV9PUFRJT05TX0FQSV9fIHx8IHNob3VsZENhY2hlQWNjZXNzKSB7XG4gICAgICAgIGFjY2Vzc0NhY2hlW2tleV0gPSAwIC8qIE9USEVSICovO1xuICAgICAgfVxuICAgIH1cbiAgICBjb25zdCBwdWJsaWNHZXR0ZXIgPSBwdWJsaWNQcm9wZXJ0aWVzTWFwW2tleV07XG4gICAgbGV0IGNzc01vZHVsZSwgZ2xvYmFsUHJvcGVydGllcztcbiAgICBpZiAocHVibGljR2V0dGVyKSB7XG4gICAgICBpZiAoa2V5ID09PSBcIiRhdHRyc1wiKSB7XG4gICAgICAgIHRyYWNrKGluc3RhbmNlLCBcImdldFwiLCBrZXkpO1xuICAgICAgICAhIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpICYmIG1hcmtBdHRyc0FjY2Vzc2VkKCk7XG4gICAgICB9IGVsc2UgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgJiYga2V5ID09PSBcIiRzbG90c1wiKSB7XG4gICAgICAgIHRyYWNrKGluc3RhbmNlLCBcImdldFwiLCBrZXkpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHB1YmxpY0dldHRlcihpbnN0YW5jZSk7XG4gICAgfSBlbHNlIGlmIChcbiAgICAgIC8vIGNzcyBtb2R1bGUgKGluamVjdGVkIGJ5IHZ1ZS1sb2FkZXIpXG4gICAgICAoY3NzTW9kdWxlID0gdHlwZS5fX2Nzc01vZHVsZXMpICYmIChjc3NNb2R1bGUgPSBjc3NNb2R1bGVba2V5XSlcbiAgICApIHtcbiAgICAgIHJldHVybiBjc3NNb2R1bGU7XG4gICAgfSBlbHNlIGlmIChjdHggIT09IEVNUFRZX09CSiAmJiBoYXNPd24oY3R4LCBrZXkpKSB7XG4gICAgICBhY2Nlc3NDYWNoZVtrZXldID0gNCAvKiBDT05URVhUICovO1xuICAgICAgcmV0dXJuIGN0eFtrZXldO1xuICAgIH0gZWxzZSBpZiAoXG4gICAgICAvLyBnbG9iYWwgcHJvcGVydGllc1xuICAgICAgZ2xvYmFsUHJvcGVydGllcyA9IGFwcENvbnRleHQuY29uZmlnLmdsb2JhbFByb3BlcnRpZXMsIGhhc093bihnbG9iYWxQcm9wZXJ0aWVzLCBrZXkpXG4gICAgKSB7XG4gICAgICB7XG4gICAgICAgIHJldHVybiBnbG9iYWxQcm9wZXJ0aWVzW2tleV07XG4gICAgICB9XG4gICAgfSBlbHNlIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpICYmIGN1cnJlbnRSZW5kZXJpbmdJbnN0YW5jZSAmJiAoIWlzU3RyaW5nKGtleSkgfHwgLy8gIzEwOTEgYXZvaWQgaW50ZXJuYWwgaXNSZWYvaXNWTm9kZSBjaGVja3Mgb24gY29tcG9uZW50IGluc3RhbmNlIGxlYWRpbmdcbiAgICAvLyB0byBpbmZpbml0ZSB3YXJuaW5nIGxvb3BcbiAgICBrZXkuaW5kZXhPZihcIl9fdlwiKSAhPT0gMCkpIHtcbiAgICAgIGlmIChkYXRhICE9PSBFTVBUWV9PQkogJiYgaXNSZXNlcnZlZFByZWZpeChrZXlbMF0pICYmIGhhc093bihkYXRhLCBrZXkpKSB7XG4gICAgICAgIHdhcm4kMShcbiAgICAgICAgICBgUHJvcGVydHkgJHtKU09OLnN0cmluZ2lmeShcbiAgICAgICAgICAgIGtleVxuICAgICAgICAgICl9IG11c3QgYmUgYWNjZXNzZWQgdmlhICRkYXRhIGJlY2F1c2UgaXQgc3RhcnRzIHdpdGggYSByZXNlcnZlZCBjaGFyYWN0ZXIgKFwiJFwiIG9yIFwiX1wiKSBhbmQgaXMgbm90IHByb3hpZWQgb24gdGhlIHJlbmRlciBjb250ZXh0LmBcbiAgICAgICAgKTtcbiAgICAgIH0gZWxzZSBpZiAoaW5zdGFuY2UgPT09IGN1cnJlbnRSZW5kZXJpbmdJbnN0YW5jZSkge1xuICAgICAgICB3YXJuJDEoXG4gICAgICAgICAgYFByb3BlcnR5ICR7SlNPTi5zdHJpbmdpZnkoa2V5KX0gd2FzIGFjY2Vzc2VkIGR1cmluZyByZW5kZXIgYnV0IGlzIG5vdCBkZWZpbmVkIG9uIGluc3RhbmNlLmBcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9XG4gIH0sXG4gIHNldCh7IF86IGluc3RhbmNlIH0sIGtleSwgdmFsdWUpIHtcbiAgICBjb25zdCB7IGRhdGEsIHNldHVwU3RhdGUsIGN0eCB9ID0gaW5zdGFuY2U7XG4gICAgaWYgKGhhc1NldHVwQmluZGluZyhzZXR1cFN0YXRlLCBrZXkpKSB7XG4gICAgICBzZXR1cFN0YXRlW2tleV0gPSB2YWx1ZTtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH0gZWxzZSBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSAmJiBzZXR1cFN0YXRlLl9faXNTY3JpcHRTZXR1cCAmJiBoYXNPd24oc2V0dXBTdGF0ZSwga2V5KSkge1xuICAgICAgd2FybiQxKGBDYW5ub3QgbXV0YXRlIDxzY3JpcHQgc2V0dXA+IGJpbmRpbmcgXCIke2tleX1cIiBmcm9tIE9wdGlvbnMgQVBJLmApO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH0gZWxzZSBpZiAoZGF0YSAhPT0gRU1QVFlfT0JKICYmIGhhc093bihkYXRhLCBrZXkpKSB7XG4gICAgICBkYXRhW2tleV0gPSB2YWx1ZTtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH0gZWxzZSBpZiAoaGFzT3duKGluc3RhbmNlLnByb3BzLCBrZXkpKSB7XG4gICAgICAhIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpICYmIHdhcm4kMShgQXR0ZW1wdGluZyB0byBtdXRhdGUgcHJvcCBcIiR7a2V5fVwiLiBQcm9wcyBhcmUgcmVhZG9ubHkuYCk7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGlmIChrZXlbMF0gPT09IFwiJFwiICYmIGtleS5zbGljZSgxKSBpbiBpbnN0YW5jZSkge1xuICAgICAgISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSAmJiB3YXJuJDEoXG4gICAgICAgIGBBdHRlbXB0aW5nIHRvIG11dGF0ZSBwdWJsaWMgcHJvcGVydHkgXCIke2tleX1cIi4gUHJvcGVydGllcyBzdGFydGluZyB3aXRoICQgYXJlIHJlc2VydmVkIGFuZCByZWFkb25seS5gXG4gICAgICApO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH0gZWxzZSB7XG4gICAgICBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSAmJiBrZXkgaW4gaW5zdGFuY2UuYXBwQ29udGV4dC5jb25maWcuZ2xvYmFsUHJvcGVydGllcykge1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoY3R4LCBrZXksIHtcbiAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICB2YWx1ZVxuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGN0eFtrZXldID0gdmFsdWU7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xuICB9LFxuICBoYXMoe1xuICAgIF86IHsgZGF0YSwgc2V0dXBTdGF0ZSwgYWNjZXNzQ2FjaGUsIGN0eCwgYXBwQ29udGV4dCwgcHJvcHNPcHRpb25zIH1cbiAgfSwga2V5KSB7XG4gICAgbGV0IG5vcm1hbGl6ZWRQcm9wcztcbiAgICByZXR1cm4gISFhY2Nlc3NDYWNoZVtrZXldIHx8IGRhdGEgIT09IEVNUFRZX09CSiAmJiBoYXNPd24oZGF0YSwga2V5KSB8fCBoYXNTZXR1cEJpbmRpbmcoc2V0dXBTdGF0ZSwga2V5KSB8fCAobm9ybWFsaXplZFByb3BzID0gcHJvcHNPcHRpb25zWzBdKSAmJiBoYXNPd24obm9ybWFsaXplZFByb3BzLCBrZXkpIHx8IGhhc093bihjdHgsIGtleSkgfHwgaGFzT3duKHB1YmxpY1Byb3BlcnRpZXNNYXAsIGtleSkgfHwgaGFzT3duKGFwcENvbnRleHQuY29uZmlnLmdsb2JhbFByb3BlcnRpZXMsIGtleSk7XG4gIH0sXG4gIGRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBkZXNjcmlwdG9yKSB7XG4gICAgaWYgKGRlc2NyaXB0b3IuZ2V0ICE9IG51bGwpIHtcbiAgICAgIHRhcmdldC5fLmFjY2Vzc0NhY2hlW2tleV0gPSAwO1xuICAgIH0gZWxzZSBpZiAoaGFzT3duKGRlc2NyaXB0b3IsIFwidmFsdWVcIikpIHtcbiAgICAgIHRoaXMuc2V0KHRhcmdldCwga2V5LCBkZXNjcmlwdG9yLnZhbHVlLCBudWxsKTtcbiAgICB9XG4gICAgcmV0dXJuIFJlZmxlY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIGRlc2NyaXB0b3IpO1xuICB9XG59O1xuaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgJiYgdHJ1ZSkge1xuICBQdWJsaWNJbnN0YW5jZVByb3h5SGFuZGxlcnMub3duS2V5cyA9ICh0YXJnZXQpID0+IHtcbiAgICB3YXJuJDEoXG4gICAgICBgQXZvaWQgYXBwIGxvZ2ljIHRoYXQgcmVsaWVzIG9uIGVudW1lcmF0aW5nIGtleXMgb24gYSBjb21wb25lbnQgaW5zdGFuY2UuIFRoZSBrZXlzIHdpbGwgYmUgZW1wdHkgaW4gcHJvZHVjdGlvbiBtb2RlIHRvIGF2b2lkIHBlcmZvcm1hbmNlIG92ZXJoZWFkLmBcbiAgICApO1xuICAgIHJldHVybiBSZWZsZWN0Lm93bktleXModGFyZ2V0KTtcbiAgfTtcbn1cbmNvbnN0IFJ1bnRpbWVDb21waWxlZFB1YmxpY0luc3RhbmNlUHJveHlIYW5kbGVycyA9IC8qIEBfX1BVUkVfXyAqLyBleHRlbmQoXG4gIHt9LFxuICBQdWJsaWNJbnN0YW5jZVByb3h5SGFuZGxlcnMsXG4gIHtcbiAgICBnZXQodGFyZ2V0LCBrZXkpIHtcbiAgICAgIGlmIChrZXkgPT09IFN5bWJvbC51bnNjb3BhYmxlcykge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICByZXR1cm4gUHVibGljSW5zdGFuY2VQcm94eUhhbmRsZXJzLmdldCh0YXJnZXQsIGtleSwgdGFyZ2V0KTtcbiAgICB9LFxuICAgIGhhcyhfLCBrZXkpIHtcbiAgICAgIGNvbnN0IGhhcyA9IGtleVswXSAhPT0gXCJfXCIgJiYgIWlzR2xvYmFsbHlBbGxvd2VkKGtleSk7XG4gICAgICBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSAmJiAhaGFzICYmIFB1YmxpY0luc3RhbmNlUHJveHlIYW5kbGVycy5oYXMoXywga2V5KSkge1xuICAgICAgICB3YXJuJDEoXG4gICAgICAgICAgYFByb3BlcnR5ICR7SlNPTi5zdHJpbmdpZnkoXG4gICAgICAgICAgICBrZXlcbiAgICAgICAgICApfSBzaG91bGQgbm90IHN0YXJ0IHdpdGggXyB3aGljaCBpcyBhIHJlc2VydmVkIHByZWZpeCBmb3IgVnVlIGludGVybmFscy5gXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgICByZXR1cm4gaGFzO1xuICAgIH1cbiAgfVxuKTtcbmZ1bmN0aW9uIGNyZWF0ZURldlJlbmRlckNvbnRleHQoaW5zdGFuY2UpIHtcbiAgY29uc3QgdGFyZ2V0ID0ge307XG4gIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGBfYCwge1xuICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICBnZXQ6ICgpID0+IGluc3RhbmNlXG4gIH0pO1xuICBPYmplY3Qua2V5cyhwdWJsaWNQcm9wZXJ0aWVzTWFwKS5mb3JFYWNoKChrZXkpID0+IHtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHtcbiAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgZ2V0OiAoKSA9PiBwdWJsaWNQcm9wZXJ0aWVzTWFwW2tleV0oaW5zdGFuY2UpLFxuICAgICAgLy8gaW50ZXJjZXB0ZWQgYnkgdGhlIHByb3h5IHNvIG5vIG5lZWQgZm9yIGltcGxlbWVudGF0aW9uLFxuICAgICAgLy8gYnV0IG5lZWRlZCB0byBwcmV2ZW50IHNldCBlcnJvcnNcbiAgICAgIHNldDogTk9PUFxuICAgIH0pO1xuICB9KTtcbiAgcmV0dXJuIHRhcmdldDtcbn1cbmZ1bmN0aW9uIGV4cG9zZVByb3BzT25SZW5kZXJDb250ZXh0KGluc3RhbmNlKSB7XG4gIGNvbnN0IHtcbiAgICBjdHgsXG4gICAgcHJvcHNPcHRpb25zOiBbcHJvcHNPcHRpb25zXVxuICB9ID0gaW5zdGFuY2U7XG4gIGlmIChwcm9wc09wdGlvbnMpIHtcbiAgICBPYmplY3Qua2V5cyhwcm9wc09wdGlvbnMpLmZvckVhY2goKGtleSkgPT4ge1xuICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGN0eCwga2V5LCB7XG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgZ2V0OiAoKSA9PiBpbnN0YW5jZS5wcm9wc1trZXldLFxuICAgICAgICBzZXQ6IE5PT1BcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG59XG5mdW5jdGlvbiBleHBvc2VTZXR1cFN0YXRlT25SZW5kZXJDb250ZXh0KGluc3RhbmNlKSB7XG4gIGNvbnN0IHsgY3R4LCBzZXR1cFN0YXRlIH0gPSBpbnN0YW5jZTtcbiAgT2JqZWN0LmtleXModG9SYXcoc2V0dXBTdGF0ZSkpLmZvckVhY2goKGtleSkgPT4ge1xuICAgIGlmICghc2V0dXBTdGF0ZS5fX2lzU2NyaXB0U2V0dXApIHtcbiAgICAgIGlmIChpc1Jlc2VydmVkUHJlZml4KGtleVswXSkpIHtcbiAgICAgICAgd2FybiQxKFxuICAgICAgICAgIGBzZXR1cCgpIHJldHVybiBwcm9wZXJ0eSAke0pTT04uc3RyaW5naWZ5KFxuICAgICAgICAgICAga2V5XG4gICAgICAgICAgKX0gc2hvdWxkIG5vdCBzdGFydCB3aXRoIFwiJFwiIG9yIFwiX1wiIHdoaWNoIGFyZSByZXNlcnZlZCBwcmVmaXhlcyBmb3IgVnVlIGludGVybmFscy5gXG4gICAgICAgICk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShjdHgsIGtleSwge1xuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgIGdldDogKCkgPT4gc2V0dXBTdGF0ZVtrZXldLFxuICAgICAgICBzZXQ6IE5PT1BcbiAgICAgIH0pO1xuICAgIH1cbiAgfSk7XG59XG5cbmNvbnN0IHdhcm5SdW50aW1lVXNhZ2UgPSAobWV0aG9kKSA9PiB3YXJuJDEoXG4gIGAke21ldGhvZH0oKSBpcyBhIGNvbXBpbGVyLWhpbnQgaGVscGVyIHRoYXQgaXMgb25seSB1c2FibGUgaW5zaWRlIDxzY3JpcHQgc2V0dXA+IG9mIGEgc2luZ2xlIGZpbGUgY29tcG9uZW50LiBJdHMgYXJndW1lbnRzIHNob3VsZCBiZSBjb21waWxlZCBhd2F5IGFuZCBwYXNzaW5nIGl0IGF0IHJ1bnRpbWUgaGFzIG5vIGVmZmVjdC5gXG4pO1xuZnVuY3Rpb24gZGVmaW5lUHJvcHMoKSB7XG4gIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpKSB7XG4gICAgd2FyblJ1bnRpbWVVc2FnZShgZGVmaW5lUHJvcHNgKTtcbiAgfVxuICByZXR1cm4gbnVsbDtcbn1cbmZ1bmN0aW9uIGRlZmluZUVtaXRzKCkge1xuICBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSkge1xuICAgIHdhcm5SdW50aW1lVXNhZ2UoYGRlZmluZUVtaXRzYCk7XG4gIH1cbiAgcmV0dXJuIG51bGw7XG59XG5mdW5jdGlvbiBkZWZpbmVFeHBvc2UoZXhwb3NlZCkge1xuICBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSkge1xuICAgIHdhcm5SdW50aW1lVXNhZ2UoYGRlZmluZUV4cG9zZWApO1xuICB9XG59XG5mdW5jdGlvbiBkZWZpbmVPcHRpb25zKG9wdGlvbnMpIHtcbiAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikpIHtcbiAgICB3YXJuUnVudGltZVVzYWdlKGBkZWZpbmVPcHRpb25zYCk7XG4gIH1cbn1cbmZ1bmN0aW9uIGRlZmluZVNsb3RzKCkge1xuICBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSkge1xuICAgIHdhcm5SdW50aW1lVXNhZ2UoYGRlZmluZVNsb3RzYCk7XG4gIH1cbiAgcmV0dXJuIG51bGw7XG59XG5mdW5jdGlvbiBkZWZpbmVNb2RlbCgpIHtcbiAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikpIHtcbiAgICB3YXJuUnVudGltZVVzYWdlKFwiZGVmaW5lTW9kZWxcIik7XG4gIH1cbn1cbmZ1bmN0aW9uIHdpdGhEZWZhdWx0cyhwcm9wcywgZGVmYXVsdHMpIHtcbiAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikpIHtcbiAgICB3YXJuUnVudGltZVVzYWdlKGB3aXRoRGVmYXVsdHNgKTtcbiAgfVxuICByZXR1cm4gbnVsbDtcbn1cbmZ1bmN0aW9uIHVzZVNsb3RzKCkge1xuICByZXR1cm4gZ2V0Q29udGV4dCgpLnNsb3RzO1xufVxuZnVuY3Rpb24gdXNlQXR0cnMoKSB7XG4gIHJldHVybiBnZXRDb250ZXh0KCkuYXR0cnM7XG59XG5mdW5jdGlvbiBnZXRDb250ZXh0KCkge1xuICBjb25zdCBpID0gZ2V0Q3VycmVudEluc3RhbmNlKCk7XG4gIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpICYmICFpKSB7XG4gICAgd2FybiQxKGB1c2VDb250ZXh0KCkgY2FsbGVkIHdpdGhvdXQgYWN0aXZlIGluc3RhbmNlLmApO1xuICB9XG4gIHJldHVybiBpLnNldHVwQ29udGV4dCB8fCAoaS5zZXR1cENvbnRleHQgPSBjcmVhdGVTZXR1cENvbnRleHQoaSkpO1xufVxuZnVuY3Rpb24gbm9ybWFsaXplUHJvcHNPckVtaXRzKHByb3BzKSB7XG4gIHJldHVybiBpc0FycmF5KHByb3BzKSA/IHByb3BzLnJlZHVjZShcbiAgICAobm9ybWFsaXplZCwgcCkgPT4gKG5vcm1hbGl6ZWRbcF0gPSBudWxsLCBub3JtYWxpemVkKSxcbiAgICB7fVxuICApIDogcHJvcHM7XG59XG5mdW5jdGlvbiBtZXJnZURlZmF1bHRzKHJhdywgZGVmYXVsdHMpIHtcbiAgY29uc3QgcHJvcHMgPSBub3JtYWxpemVQcm9wc09yRW1pdHMocmF3KTtcbiAgZm9yIChjb25zdCBrZXkgaW4gZGVmYXVsdHMpIHtcbiAgICBpZiAoa2V5LnN0YXJ0c1dpdGgoXCJfX3NraXBcIikpXG4gICAgICBjb250aW51ZTtcbiAgICBsZXQgb3B0ID0gcHJvcHNba2V5XTtcbiAgICBpZiAob3B0KSB7XG4gICAgICBpZiAoaXNBcnJheShvcHQpIHx8IGlzRnVuY3Rpb24ob3B0KSkge1xuICAgICAgICBvcHQgPSBwcm9wc1trZXldID0geyB0eXBlOiBvcHQsIGRlZmF1bHQ6IGRlZmF1bHRzW2tleV0gfTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG9wdC5kZWZhdWx0ID0gZGVmYXVsdHNba2V5XTtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKG9wdCA9PT0gbnVsbCkge1xuICAgICAgb3B0ID0gcHJvcHNba2V5XSA9IHsgZGVmYXVsdDogZGVmYXVsdHNba2V5XSB9O1xuICAgIH0gZWxzZSBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSkge1xuICAgICAgd2FybiQxKGBwcm9wcyBkZWZhdWx0IGtleSBcIiR7a2V5fVwiIGhhcyBubyBjb3JyZXNwb25kaW5nIGRlY2xhcmF0aW9uLmApO1xuICAgIH1cbiAgICBpZiAob3B0ICYmIGRlZmF1bHRzW2BfX3NraXBfJHtrZXl9YF0pIHtcbiAgICAgIG9wdC5za2lwRmFjdG9yeSA9IHRydWU7XG4gICAgfVxuICB9XG4gIHJldHVybiBwcm9wcztcbn1cbmZ1bmN0aW9uIG1lcmdlTW9kZWxzKGEsIGIpIHtcbiAgaWYgKCFhIHx8ICFiKVxuICAgIHJldHVybiBhIHx8IGI7XG4gIGlmIChpc0FycmF5KGEpICYmIGlzQXJyYXkoYikpXG4gICAgcmV0dXJuIGEuY29uY2F0KGIpO1xuICByZXR1cm4gZXh0ZW5kKHt9LCBub3JtYWxpemVQcm9wc09yRW1pdHMoYSksIG5vcm1hbGl6ZVByb3BzT3JFbWl0cyhiKSk7XG59XG5mdW5jdGlvbiBjcmVhdGVQcm9wc1Jlc3RQcm94eShwcm9wcywgZXhjbHVkZWRLZXlzKSB7XG4gIGNvbnN0IHJldCA9IHt9O1xuICBmb3IgKGNvbnN0IGtleSBpbiBwcm9wcykge1xuICAgIGlmICghZXhjbHVkZWRLZXlzLmluY2x1ZGVzKGtleSkpIHtcbiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShyZXQsIGtleSwge1xuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBnZXQ6ICgpID0+IHByb3BzW2tleV1cbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuICByZXR1cm4gcmV0O1xufVxuZnVuY3Rpb24gd2l0aEFzeW5jQ29udGV4dChnZXRBd2FpdGFibGUpIHtcbiAgY29uc3QgY3R4ID0gZ2V0Q3VycmVudEluc3RhbmNlKCk7XG4gIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpICYmICFjdHgpIHtcbiAgICB3YXJuJDEoXG4gICAgICBgd2l0aEFzeW5jQ29udGV4dCBjYWxsZWQgd2l0aG91dCBhY3RpdmUgY3VycmVudCBpbnN0YW5jZS4gVGhpcyBpcyBsaWtlbHkgYSBidWcuYFxuICAgICk7XG4gIH1cbiAgbGV0IGF3YWl0YWJsZSA9IGdldEF3YWl0YWJsZSgpO1xuICB1bnNldEN1cnJlbnRJbnN0YW5jZSgpO1xuICBpZiAoaXNQcm9taXNlKGF3YWl0YWJsZSkpIHtcbiAgICBhd2FpdGFibGUgPSBhd2FpdGFibGUuY2F0Y2goKGUpID0+IHtcbiAgICAgIHNldEN1cnJlbnRJbnN0YW5jZShjdHgpO1xuICAgICAgdGhyb3cgZTtcbiAgICB9KTtcbiAgfVxuICByZXR1cm4gW2F3YWl0YWJsZSwgKCkgPT4gc2V0Q3VycmVudEluc3RhbmNlKGN0eCldO1xufVxuXG5mdW5jdGlvbiBjcmVhdGVEdXBsaWNhdGVDaGVja2VyKCkge1xuICBjb25zdCBjYWNoZSA9IC8qIEBfX1BVUkVfXyAqLyBPYmplY3QuY3JlYXRlKG51bGwpO1xuICByZXR1cm4gKHR5cGUsIGtleSkgPT4ge1xuICAgIGlmIChjYWNoZVtrZXldKSB7XG4gICAgICB3YXJuJDEoYCR7dHlwZX0gcHJvcGVydHkgXCIke2tleX1cIiBpcyBhbHJlYWR5IGRlZmluZWQgaW4gJHtjYWNoZVtrZXldfS5gKTtcbiAgICB9IGVsc2Uge1xuICAgICAgY2FjaGVba2V5XSA9IHR5cGU7XG4gICAgfVxuICB9O1xufVxubGV0IHNob3VsZENhY2hlQWNjZXNzID0gdHJ1ZTtcbmZ1bmN0aW9uIGFwcGx5T3B0aW9ucyhpbnN0YW5jZSkge1xuICBjb25zdCBvcHRpb25zID0gcmVzb2x2ZU1lcmdlZE9wdGlvbnMoaW5zdGFuY2UpO1xuICBjb25zdCBwdWJsaWNUaGlzID0gaW5zdGFuY2UucHJveHk7XG4gIGNvbnN0IGN0eCA9IGluc3RhbmNlLmN0eDtcbiAgc2hvdWxkQ2FjaGVBY2Nlc3MgPSBmYWxzZTtcbiAgaWYgKG9wdGlvbnMuYmVmb3JlQ3JlYXRlKSB7XG4gICAgY2FsbEhvb2sob3B0aW9ucy5iZWZvcmVDcmVhdGUsIGluc3RhbmNlLCBcImJjXCIpO1xuICB9XG4gIGNvbnN0IHtcbiAgICAvLyBzdGF0ZVxuICAgIGRhdGE6IGRhdGFPcHRpb25zLFxuICAgIGNvbXB1dGVkOiBjb21wdXRlZE9wdGlvbnMsXG4gICAgbWV0aG9kcyxcbiAgICB3YXRjaDogd2F0Y2hPcHRpb25zLFxuICAgIHByb3ZpZGU6IHByb3ZpZGVPcHRpb25zLFxuICAgIGluamVjdDogaW5qZWN0T3B0aW9ucyxcbiAgICAvLyBsaWZlY3ljbGVcbiAgICBjcmVhdGVkLFxuICAgIGJlZm9yZU1vdW50LFxuICAgIG1vdW50ZWQsXG4gICAgYmVmb3JlVXBkYXRlLFxuICAgIHVwZGF0ZWQsXG4gICAgYWN0aXZhdGVkLFxuICAgIGRlYWN0aXZhdGVkLFxuICAgIGJlZm9yZURlc3Ryb3ksXG4gICAgYmVmb3JlVW5tb3VudCxcbiAgICBkZXN0cm95ZWQsXG4gICAgdW5tb3VudGVkLFxuICAgIHJlbmRlcixcbiAgICByZW5kZXJUcmFja2VkLFxuICAgIHJlbmRlclRyaWdnZXJlZCxcbiAgICBlcnJvckNhcHR1cmVkLFxuICAgIHNlcnZlclByZWZldGNoLFxuICAgIC8vIHB1YmxpYyBBUElcbiAgICBleHBvc2UsXG4gICAgaW5oZXJpdEF0dHJzLFxuICAgIC8vIGFzc2V0c1xuICAgIGNvbXBvbmVudHMsXG4gICAgZGlyZWN0aXZlcyxcbiAgICBmaWx0ZXJzXG4gIH0gPSBvcHRpb25zO1xuICBjb25zdCBjaGVja0R1cGxpY2F0ZVByb3BlcnRpZXMgPSAhIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpID8gY3JlYXRlRHVwbGljYXRlQ2hlY2tlcigpIDogbnVsbDtcbiAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikpIHtcbiAgICBjb25zdCBbcHJvcHNPcHRpb25zXSA9IGluc3RhbmNlLnByb3BzT3B0aW9ucztcbiAgICBpZiAocHJvcHNPcHRpb25zKSB7XG4gICAgICBmb3IgKGNvbnN0IGtleSBpbiBwcm9wc09wdGlvbnMpIHtcbiAgICAgICAgY2hlY2tEdXBsaWNhdGVQcm9wZXJ0aWVzKFwiUHJvcHNcIiAvKiBQUk9QUyAqLywga2V5KTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgaWYgKGluamVjdE9wdGlvbnMpIHtcbiAgICByZXNvbHZlSW5qZWN0aW9ucyhpbmplY3RPcHRpb25zLCBjdHgsIGNoZWNrRHVwbGljYXRlUHJvcGVydGllcyk7XG4gIH1cbiAgaWYgKG1ldGhvZHMpIHtcbiAgICBmb3IgKGNvbnN0IGtleSBpbiBtZXRob2RzKSB7XG4gICAgICBjb25zdCBtZXRob2RIYW5kbGVyID0gbWV0aG9kc1trZXldO1xuICAgICAgaWYgKGlzRnVuY3Rpb24obWV0aG9kSGFuZGxlcikpIHtcbiAgICAgICAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikpIHtcbiAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoY3R4LCBrZXksIHtcbiAgICAgICAgICAgIHZhbHVlOiBtZXRob2RIYW5kbGVyLmJpbmQocHVibGljVGhpcyksXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWVcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjdHhba2V5XSA9IG1ldGhvZEhhbmRsZXIuYmluZChwdWJsaWNUaGlzKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSkge1xuICAgICAgICAgIGNoZWNrRHVwbGljYXRlUHJvcGVydGllcyhcIk1ldGhvZHNcIiAvKiBNRVRIT0RTICovLCBrZXkpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikpIHtcbiAgICAgICAgd2FybiQxKFxuICAgICAgICAgIGBNZXRob2QgXCIke2tleX1cIiBoYXMgdHlwZSBcIiR7dHlwZW9mIG1ldGhvZEhhbmRsZXJ9XCIgaW4gdGhlIGNvbXBvbmVudCBkZWZpbml0aW9uLiBEaWQgeW91IHJlZmVyZW5jZSB0aGUgZnVuY3Rpb24gY29ycmVjdGx5P2BcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgaWYgKGRhdGFPcHRpb25zKSB7XG4gICAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgJiYgIWlzRnVuY3Rpb24oZGF0YU9wdGlvbnMpKSB7XG4gICAgICB3YXJuJDEoXG4gICAgICAgIGBUaGUgZGF0YSBvcHRpb24gbXVzdCBiZSBhIGZ1bmN0aW9uLiBQbGFpbiBvYmplY3QgdXNhZ2UgaXMgbm8gbG9uZ2VyIHN1cHBvcnRlZC5gXG4gICAgICApO1xuICAgIH1cbiAgICBjb25zdCBkYXRhID0gZGF0YU9wdGlvbnMuY2FsbChwdWJsaWNUaGlzLCBwdWJsaWNUaGlzKTtcbiAgICBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSAmJiBpc1Byb21pc2UoZGF0YSkpIHtcbiAgICAgIHdhcm4kMShcbiAgICAgICAgYGRhdGEoKSByZXR1cm5lZCBhIFByb21pc2UgLSBub3RlIGRhdGEoKSBjYW5ub3QgYmUgYXN5bmM7IElmIHlvdSBpbnRlbmQgdG8gcGVyZm9ybSBkYXRhIGZldGNoaW5nIGJlZm9yZSBjb21wb25lbnQgcmVuZGVycywgdXNlIGFzeW5jIHNldHVwKCkgKyA8U3VzcGVuc2U+LmBcbiAgICAgICk7XG4gICAgfVxuICAgIGlmICghaXNPYmplY3QoZGF0YSkpIHtcbiAgICAgICEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgJiYgd2FybiQxKGBkYXRhKCkgc2hvdWxkIHJldHVybiBhbiBvYmplY3QuYCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGluc3RhbmNlLmRhdGEgPSByZWFjdGl2ZShkYXRhKTtcbiAgICAgIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpKSB7XG4gICAgICAgIGZvciAoY29uc3Qga2V5IGluIGRhdGEpIHtcbiAgICAgICAgICBjaGVja0R1cGxpY2F0ZVByb3BlcnRpZXMoXCJEYXRhXCIgLyogREFUQSAqLywga2V5KTtcbiAgICAgICAgICBpZiAoIWlzUmVzZXJ2ZWRQcmVmaXgoa2V5WzBdKSkge1xuICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGN0eCwga2V5LCB7XG4gICAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgICAgZ2V0OiAoKSA9PiBkYXRhW2tleV0sXG4gICAgICAgICAgICAgIHNldDogTk9PUFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG4gIHNob3VsZENhY2hlQWNjZXNzID0gdHJ1ZTtcbiAgaWYgKGNvbXB1dGVkT3B0aW9ucykge1xuICAgIGZvciAoY29uc3Qga2V5IGluIGNvbXB1dGVkT3B0aW9ucykge1xuICAgICAgY29uc3Qgb3B0ID0gY29tcHV0ZWRPcHRpb25zW2tleV07XG4gICAgICBjb25zdCBnZXQgPSBpc0Z1bmN0aW9uKG9wdCkgPyBvcHQuYmluZChwdWJsaWNUaGlzLCBwdWJsaWNUaGlzKSA6IGlzRnVuY3Rpb24ob3B0LmdldCkgPyBvcHQuZ2V0LmJpbmQocHVibGljVGhpcywgcHVibGljVGhpcykgOiBOT09QO1xuICAgICAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgJiYgZ2V0ID09PSBOT09QKSB7XG4gICAgICAgIHdhcm4kMShgQ29tcHV0ZWQgcHJvcGVydHkgXCIke2tleX1cIiBoYXMgbm8gZ2V0dGVyLmApO1xuICAgICAgfVxuICAgICAgY29uc3Qgc2V0ID0gIWlzRnVuY3Rpb24ob3B0KSAmJiBpc0Z1bmN0aW9uKG9wdC5zZXQpID8gb3B0LnNldC5iaW5kKHB1YmxpY1RoaXMpIDogISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSA/ICgpID0+IHtcbiAgICAgICAgd2FybiQxKFxuICAgICAgICAgIGBXcml0ZSBvcGVyYXRpb24gZmFpbGVkOiBjb21wdXRlZCBwcm9wZXJ0eSBcIiR7a2V5fVwiIGlzIHJlYWRvbmx5LmBcbiAgICAgICAgKTtcbiAgICAgIH0gOiBOT09QO1xuICAgICAgY29uc3QgYyA9IGNvbXB1dGVkKHtcbiAgICAgICAgZ2V0LFxuICAgICAgICBzZXRcbiAgICAgIH0pO1xuICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGN0eCwga2V5LCB7XG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgZ2V0OiAoKSA9PiBjLnZhbHVlLFxuICAgICAgICBzZXQ6ICh2KSA9PiBjLnZhbHVlID0gdlxuICAgICAgfSk7XG4gICAgICBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSkge1xuICAgICAgICBjaGVja0R1cGxpY2F0ZVByb3BlcnRpZXMoXCJDb21wdXRlZFwiIC8qIENPTVBVVEVEICovLCBrZXkpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICBpZiAod2F0Y2hPcHRpb25zKSB7XG4gICAgZm9yIChjb25zdCBrZXkgaW4gd2F0Y2hPcHRpb25zKSB7XG4gICAgICBjcmVhdGVXYXRjaGVyKHdhdGNoT3B0aW9uc1trZXldLCBjdHgsIHB1YmxpY1RoaXMsIGtleSk7XG4gICAgfVxuICB9XG4gIGlmIChwcm92aWRlT3B0aW9ucykge1xuICAgIGNvbnN0IHByb3ZpZGVzID0gaXNGdW5jdGlvbihwcm92aWRlT3B0aW9ucykgPyBwcm92aWRlT3B0aW9ucy5jYWxsKHB1YmxpY1RoaXMpIDogcHJvdmlkZU9wdGlvbnM7XG4gICAgUmVmbGVjdC5vd25LZXlzKHByb3ZpZGVzKS5mb3JFYWNoKChrZXkpID0+IHtcbiAgICAgIHByb3ZpZGUoa2V5LCBwcm92aWRlc1trZXldKTtcbiAgICB9KTtcbiAgfVxuICBpZiAoY3JlYXRlZCkge1xuICAgIGNhbGxIb29rKGNyZWF0ZWQsIGluc3RhbmNlLCBcImNcIik7XG4gIH1cbiAgZnVuY3Rpb24gcmVnaXN0ZXJMaWZlY3ljbGVIb29rKHJlZ2lzdGVyLCBob29rKSB7XG4gICAgaWYgKGlzQXJyYXkoaG9vaykpIHtcbiAgICAgIGhvb2suZm9yRWFjaCgoX2hvb2spID0+IHJlZ2lzdGVyKF9ob29rLmJpbmQocHVibGljVGhpcykpKTtcbiAgICB9IGVsc2UgaWYgKGhvb2spIHtcbiAgICAgIHJlZ2lzdGVyKGhvb2suYmluZChwdWJsaWNUaGlzKSk7XG4gICAgfVxuICB9XG4gIHJlZ2lzdGVyTGlmZWN5Y2xlSG9vayhvbkJlZm9yZU1vdW50LCBiZWZvcmVNb3VudCk7XG4gIHJlZ2lzdGVyTGlmZWN5Y2xlSG9vayhvbk1vdW50ZWQsIG1vdW50ZWQpO1xuICByZWdpc3RlckxpZmVjeWNsZUhvb2sob25CZWZvcmVVcGRhdGUsIGJlZm9yZVVwZGF0ZSk7XG4gIHJlZ2lzdGVyTGlmZWN5Y2xlSG9vayhvblVwZGF0ZWQsIHVwZGF0ZWQpO1xuICByZWdpc3RlckxpZmVjeWNsZUhvb2sob25BY3RpdmF0ZWQsIGFjdGl2YXRlZCk7XG4gIHJlZ2lzdGVyTGlmZWN5Y2xlSG9vayhvbkRlYWN0aXZhdGVkLCBkZWFjdGl2YXRlZCk7XG4gIHJlZ2lzdGVyTGlmZWN5Y2xlSG9vayhvbkVycm9yQ2FwdHVyZWQsIGVycm9yQ2FwdHVyZWQpO1xuICByZWdpc3RlckxpZmVjeWNsZUhvb2sob25SZW5kZXJUcmFja2VkLCByZW5kZXJUcmFja2VkKTtcbiAgcmVnaXN0ZXJMaWZlY3ljbGVIb29rKG9uUmVuZGVyVHJpZ2dlcmVkLCByZW5kZXJUcmlnZ2VyZWQpO1xuICByZWdpc3RlckxpZmVjeWNsZUhvb2sob25CZWZvcmVVbm1vdW50LCBiZWZvcmVVbm1vdW50KTtcbiAgcmVnaXN0ZXJMaWZlY3ljbGVIb29rKG9uVW5tb3VudGVkLCB1bm1vdW50ZWQpO1xuICByZWdpc3RlckxpZmVjeWNsZUhvb2sob25TZXJ2ZXJQcmVmZXRjaCwgc2VydmVyUHJlZmV0Y2gpO1xuICBpZiAoaXNBcnJheShleHBvc2UpKSB7XG4gICAgaWYgKGV4cG9zZS5sZW5ndGgpIHtcbiAgICAgIGNvbnN0IGV4cG9zZWQgPSBpbnN0YW5jZS5leHBvc2VkIHx8IChpbnN0YW5jZS5leHBvc2VkID0ge30pO1xuICAgICAgZXhwb3NlLmZvckVhY2goKGtleSkgPT4ge1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3NlZCwga2V5LCB7XG4gICAgICAgICAgZ2V0OiAoKSA9PiBwdWJsaWNUaGlzW2tleV0sXG4gICAgICAgICAgc2V0OiAodmFsKSA9PiBwdWJsaWNUaGlzW2tleV0gPSB2YWxcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9IGVsc2UgaWYgKCFpbnN0YW5jZS5leHBvc2VkKSB7XG4gICAgICBpbnN0YW5jZS5leHBvc2VkID0ge307XG4gICAgfVxuICB9XG4gIGlmIChyZW5kZXIgJiYgaW5zdGFuY2UucmVuZGVyID09PSBOT09QKSB7XG4gICAgaW5zdGFuY2UucmVuZGVyID0gcmVuZGVyO1xuICB9XG4gIGlmIChpbmhlcml0QXR0cnMgIT0gbnVsbCkge1xuICAgIGluc3RhbmNlLmluaGVyaXRBdHRycyA9IGluaGVyaXRBdHRycztcbiAgfVxuICBpZiAoY29tcG9uZW50cylcbiAgICBpbnN0YW5jZS5jb21wb25lbnRzID0gY29tcG9uZW50cztcbiAgaWYgKGRpcmVjdGl2ZXMpXG4gICAgaW5zdGFuY2UuZGlyZWN0aXZlcyA9IGRpcmVjdGl2ZXM7XG59XG5mdW5jdGlvbiByZXNvbHZlSW5qZWN0aW9ucyhpbmplY3RPcHRpb25zLCBjdHgsIGNoZWNrRHVwbGljYXRlUHJvcGVydGllcyA9IE5PT1ApIHtcbiAgaWYgKGlzQXJyYXkoaW5qZWN0T3B0aW9ucykpIHtcbiAgICBpbmplY3RPcHRpb25zID0gbm9ybWFsaXplSW5qZWN0KGluamVjdE9wdGlvbnMpO1xuICB9XG4gIGZvciAoY29uc3Qga2V5IGluIGluamVjdE9wdGlvbnMpIHtcbiAgICBjb25zdCBvcHQgPSBpbmplY3RPcHRpb25zW2tleV07XG4gICAgbGV0IGluamVjdGVkO1xuICAgIGlmIChpc09iamVjdChvcHQpKSB7XG4gICAgICBpZiAoXCJkZWZhdWx0XCIgaW4gb3B0KSB7XG4gICAgICAgIGluamVjdGVkID0gaW5qZWN0KFxuICAgICAgICAgIG9wdC5mcm9tIHx8IGtleSxcbiAgICAgICAgICBvcHQuZGVmYXVsdCxcbiAgICAgICAgICB0cnVlXG4gICAgICAgICk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpbmplY3RlZCA9IGluamVjdChvcHQuZnJvbSB8fCBrZXkpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBpbmplY3RlZCA9IGluamVjdChvcHQpO1xuICAgIH1cbiAgICBpZiAoaXNSZWYoaW5qZWN0ZWQpKSB7XG4gICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoY3R4LCBrZXksIHtcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICBnZXQ6ICgpID0+IGluamVjdGVkLnZhbHVlLFxuICAgICAgICBzZXQ6ICh2KSA9PiBpbmplY3RlZC52YWx1ZSA9IHZcbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICBjdHhba2V5XSA9IGluamVjdGVkO1xuICAgIH1cbiAgICBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSkge1xuICAgICAgY2hlY2tEdXBsaWNhdGVQcm9wZXJ0aWVzKFwiSW5qZWN0XCIgLyogSU5KRUNUICovLCBrZXkpO1xuICAgIH1cbiAgfVxufVxuZnVuY3Rpb24gY2FsbEhvb2soaG9vaywgaW5zdGFuY2UsIHR5cGUpIHtcbiAgY2FsbFdpdGhBc3luY0Vycm9ySGFuZGxpbmcoXG4gICAgaXNBcnJheShob29rKSA/IGhvb2subWFwKChoKSA9PiBoLmJpbmQoaW5zdGFuY2UucHJveHkpKSA6IGhvb2suYmluZChpbnN0YW5jZS5wcm94eSksXG4gICAgaW5zdGFuY2UsXG4gICAgdHlwZVxuICApO1xufVxuZnVuY3Rpb24gY3JlYXRlV2F0Y2hlcihyYXcsIGN0eCwgcHVibGljVGhpcywga2V5KSB7XG4gIGNvbnN0IGdldHRlciA9IGtleS5pbmNsdWRlcyhcIi5cIikgPyBjcmVhdGVQYXRoR2V0dGVyKHB1YmxpY1RoaXMsIGtleSkgOiAoKSA9PiBwdWJsaWNUaGlzW2tleV07XG4gIGlmIChpc1N0cmluZyhyYXcpKSB7XG4gICAgY29uc3QgaGFuZGxlciA9IGN0eFtyYXddO1xuICAgIGlmIChpc0Z1bmN0aW9uKGhhbmRsZXIpKSB7XG4gICAgICB3YXRjaChnZXR0ZXIsIGhhbmRsZXIpO1xuICAgIH0gZWxzZSBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSkge1xuICAgICAgd2FybiQxKGBJbnZhbGlkIHdhdGNoIGhhbmRsZXIgc3BlY2lmaWVkIGJ5IGtleSBcIiR7cmF3fVwiYCwgaGFuZGxlcik7XG4gICAgfVxuICB9IGVsc2UgaWYgKGlzRnVuY3Rpb24ocmF3KSkge1xuICAgIHdhdGNoKGdldHRlciwgcmF3LmJpbmQocHVibGljVGhpcykpO1xuICB9IGVsc2UgaWYgKGlzT2JqZWN0KHJhdykpIHtcbiAgICBpZiAoaXNBcnJheShyYXcpKSB7XG4gICAgICByYXcuZm9yRWFjaCgocikgPT4gY3JlYXRlV2F0Y2hlcihyLCBjdHgsIHB1YmxpY1RoaXMsIGtleSkpO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBoYW5kbGVyID0gaXNGdW5jdGlvbihyYXcuaGFuZGxlcikgPyByYXcuaGFuZGxlci5iaW5kKHB1YmxpY1RoaXMpIDogY3R4W3Jhdy5oYW5kbGVyXTtcbiAgICAgIGlmIChpc0Z1bmN0aW9uKGhhbmRsZXIpKSB7XG4gICAgICAgIHdhdGNoKGdldHRlciwgaGFuZGxlciwgcmF3KTtcbiAgICAgIH0gZWxzZSBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSkge1xuICAgICAgICB3YXJuJDEoYEludmFsaWQgd2F0Y2ggaGFuZGxlciBzcGVjaWZpZWQgYnkga2V5IFwiJHtyYXcuaGFuZGxlcn1cImAsIGhhbmRsZXIpO1xuICAgICAgfVxuICAgIH1cbiAgfSBlbHNlIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpKSB7XG4gICAgd2FybiQxKGBJbnZhbGlkIHdhdGNoIG9wdGlvbjogXCIke2tleX1cImAsIHJhdyk7XG4gIH1cbn1cbmZ1bmN0aW9uIHJlc29sdmVNZXJnZWRPcHRpb25zKGluc3RhbmNlKSB7XG4gIGNvbnN0IGJhc2UgPSBpbnN0YW5jZS50eXBlO1xuICBjb25zdCB7IG1peGlucywgZXh0ZW5kczogZXh0ZW5kc09wdGlvbnMgfSA9IGJhc2U7XG4gIGNvbnN0IHtcbiAgICBtaXhpbnM6IGdsb2JhbE1peGlucyxcbiAgICBvcHRpb25zQ2FjaGU6IGNhY2hlLFxuICAgIGNvbmZpZzogeyBvcHRpb25NZXJnZVN0cmF0ZWdpZXMgfVxuICB9ID0gaW5zdGFuY2UuYXBwQ29udGV4dDtcbiAgY29uc3QgY2FjaGVkID0gY2FjaGUuZ2V0KGJhc2UpO1xuICBsZXQgcmVzb2x2ZWQ7XG4gIGlmIChjYWNoZWQpIHtcbiAgICByZXNvbHZlZCA9IGNhY2hlZDtcbiAgfSBlbHNlIGlmICghZ2xvYmFsTWl4aW5zLmxlbmd0aCAmJiAhbWl4aW5zICYmICFleHRlbmRzT3B0aW9ucykge1xuICAgIHtcbiAgICAgIHJlc29sdmVkID0gYmFzZTtcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgcmVzb2x2ZWQgPSB7fTtcbiAgICBpZiAoZ2xvYmFsTWl4aW5zLmxlbmd0aCkge1xuICAgICAgZ2xvYmFsTWl4aW5zLmZvckVhY2goXG4gICAgICAgIChtKSA9PiBtZXJnZU9wdGlvbnMocmVzb2x2ZWQsIG0sIG9wdGlvbk1lcmdlU3RyYXRlZ2llcywgdHJ1ZSlcbiAgICAgICk7XG4gICAgfVxuICAgIG1lcmdlT3B0aW9ucyhyZXNvbHZlZCwgYmFzZSwgb3B0aW9uTWVyZ2VTdHJhdGVnaWVzKTtcbiAgfVxuICBpZiAoaXNPYmplY3QoYmFzZSkpIHtcbiAgICBjYWNoZS5zZXQoYmFzZSwgcmVzb2x2ZWQpO1xuICB9XG4gIHJldHVybiByZXNvbHZlZDtcbn1cbmZ1bmN0aW9uIG1lcmdlT3B0aW9ucyh0bywgZnJvbSwgc3RyYXRzLCBhc01peGluID0gZmFsc2UpIHtcbiAgY29uc3QgeyBtaXhpbnMsIGV4dGVuZHM6IGV4dGVuZHNPcHRpb25zIH0gPSBmcm9tO1xuICBpZiAoZXh0ZW5kc09wdGlvbnMpIHtcbiAgICBtZXJnZU9wdGlvbnModG8sIGV4dGVuZHNPcHRpb25zLCBzdHJhdHMsIHRydWUpO1xuICB9XG4gIGlmIChtaXhpbnMpIHtcbiAgICBtaXhpbnMuZm9yRWFjaChcbiAgICAgIChtKSA9PiBtZXJnZU9wdGlvbnModG8sIG0sIHN0cmF0cywgdHJ1ZSlcbiAgICApO1xuICB9XG4gIGZvciAoY29uc3Qga2V5IGluIGZyb20pIHtcbiAgICBpZiAoYXNNaXhpbiAmJiBrZXkgPT09IFwiZXhwb3NlXCIpIHtcbiAgICAgICEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgJiYgd2FybiQxKFxuICAgICAgICBgXCJleHBvc2VcIiBvcHRpb24gaXMgaWdub3JlZCB3aGVuIGRlY2xhcmVkIGluIG1peGlucyBvciBleHRlbmRzLiBJdCBzaG91bGQgb25seSBiZSBkZWNsYXJlZCBpbiB0aGUgYmFzZSBjb21wb25lbnQgaXRzZWxmLmBcbiAgICAgICk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IHN0cmF0ID0gaW50ZXJuYWxPcHRpb25NZXJnZVN0cmF0c1trZXldIHx8IHN0cmF0cyAmJiBzdHJhdHNba2V5XTtcbiAgICAgIHRvW2tleV0gPSBzdHJhdCA/IHN0cmF0KHRvW2tleV0sIGZyb21ba2V5XSkgOiBmcm9tW2tleV07XG4gICAgfVxuICB9XG4gIHJldHVybiB0bztcbn1cbmNvbnN0IGludGVybmFsT3B0aW9uTWVyZ2VTdHJhdHMgPSB7XG4gIGRhdGE6IG1lcmdlRGF0YUZuLFxuICBwcm9wczogbWVyZ2VFbWl0c09yUHJvcHNPcHRpb25zLFxuICBlbWl0czogbWVyZ2VFbWl0c09yUHJvcHNPcHRpb25zLFxuICAvLyBvYmplY3RzXG4gIG1ldGhvZHM6IG1lcmdlT2JqZWN0T3B0aW9ucyxcbiAgY29tcHV0ZWQ6IG1lcmdlT2JqZWN0T3B0aW9ucyxcbiAgLy8gbGlmZWN5Y2xlXG4gIGJlZm9yZUNyZWF0ZTogbWVyZ2VBc0FycmF5LFxuICBjcmVhdGVkOiBtZXJnZUFzQXJyYXksXG4gIGJlZm9yZU1vdW50OiBtZXJnZUFzQXJyYXksXG4gIG1vdW50ZWQ6IG1lcmdlQXNBcnJheSxcbiAgYmVmb3JlVXBkYXRlOiBtZXJnZUFzQXJyYXksXG4gIHVwZGF0ZWQ6IG1lcmdlQXNBcnJheSxcbiAgYmVmb3JlRGVzdHJveTogbWVyZ2VBc0FycmF5LFxuICBiZWZvcmVVbm1vdW50OiBtZXJnZUFzQXJyYXksXG4gIGRlc3Ryb3llZDogbWVyZ2VBc0FycmF5LFxuICB1bm1vdW50ZWQ6IG1lcmdlQXNBcnJheSxcbiAgYWN0aXZhdGVkOiBtZXJnZUFzQXJyYXksXG4gIGRlYWN0aXZhdGVkOiBtZXJnZUFzQXJyYXksXG4gIGVycm9yQ2FwdHVyZWQ6IG1lcmdlQXNBcnJheSxcbiAgc2VydmVyUHJlZmV0Y2g6IG1lcmdlQXNBcnJheSxcbiAgLy8gYXNzZXRzXG4gIGNvbXBvbmVudHM6IG1lcmdlT2JqZWN0T3B0aW9ucyxcbiAgZGlyZWN0aXZlczogbWVyZ2VPYmplY3RPcHRpb25zLFxuICAvLyB3YXRjaFxuICB3YXRjaDogbWVyZ2VXYXRjaE9wdGlvbnMsXG4gIC8vIHByb3ZpZGUgLyBpbmplY3RcbiAgcHJvdmlkZTogbWVyZ2VEYXRhRm4sXG4gIGluamVjdDogbWVyZ2VJbmplY3Rcbn07XG5mdW5jdGlvbiBtZXJnZURhdGFGbih0bywgZnJvbSkge1xuICBpZiAoIWZyb20pIHtcbiAgICByZXR1cm4gdG87XG4gIH1cbiAgaWYgKCF0bykge1xuICAgIHJldHVybiBmcm9tO1xuICB9XG4gIHJldHVybiBmdW5jdGlvbiBtZXJnZWREYXRhRm4oKSB7XG4gICAgcmV0dXJuIChleHRlbmQpKFxuICAgICAgaXNGdW5jdGlvbih0bykgPyB0by5jYWxsKHRoaXMsIHRoaXMpIDogdG8sXG4gICAgICBpc0Z1bmN0aW9uKGZyb20pID8gZnJvbS5jYWxsKHRoaXMsIHRoaXMpIDogZnJvbVxuICAgICk7XG4gIH07XG59XG5mdW5jdGlvbiBtZXJnZUluamVjdCh0bywgZnJvbSkge1xuICByZXR1cm4gbWVyZ2VPYmplY3RPcHRpb25zKG5vcm1hbGl6ZUluamVjdCh0byksIG5vcm1hbGl6ZUluamVjdChmcm9tKSk7XG59XG5mdW5jdGlvbiBub3JtYWxpemVJbmplY3QocmF3KSB7XG4gIGlmIChpc0FycmF5KHJhdykpIHtcbiAgICBjb25zdCByZXMgPSB7fTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHJhdy5sZW5ndGg7IGkrKykge1xuICAgICAgcmVzW3Jhd1tpXV0gPSByYXdbaV07XG4gICAgfVxuICAgIHJldHVybiByZXM7XG4gIH1cbiAgcmV0dXJuIHJhdztcbn1cbmZ1bmN0aW9uIG1lcmdlQXNBcnJheSh0bywgZnJvbSkge1xuICByZXR1cm4gdG8gPyBbLi4ubmV3IFNldChbXS5jb25jYXQodG8sIGZyb20pKV0gOiBmcm9tO1xufVxuZnVuY3Rpb24gbWVyZ2VPYmplY3RPcHRpb25zKHRvLCBmcm9tKSB7XG4gIHJldHVybiB0byA/IGV4dGVuZCgvKiBAX19QVVJFX18gKi8gT2JqZWN0LmNyZWF0ZShudWxsKSwgdG8sIGZyb20pIDogZnJvbTtcbn1cbmZ1bmN0aW9uIG1lcmdlRW1pdHNPclByb3BzT3B0aW9ucyh0bywgZnJvbSkge1xuICBpZiAodG8pIHtcbiAgICBpZiAoaXNBcnJheSh0bykgJiYgaXNBcnJheShmcm9tKSkge1xuICAgICAgcmV0dXJuIFsuLi4vKiBAX19QVVJFX18gKi8gbmV3IFNldChbLi4udG8sIC4uLmZyb21dKV07XG4gICAgfVxuICAgIHJldHVybiBleHRlbmQoXG4gICAgICAvKiBAX19QVVJFX18gKi8gT2JqZWN0LmNyZWF0ZShudWxsKSxcbiAgICAgIG5vcm1hbGl6ZVByb3BzT3JFbWl0cyh0byksXG4gICAgICBub3JtYWxpemVQcm9wc09yRW1pdHMoZnJvbSAhPSBudWxsID8gZnJvbSA6IHt9KVxuICAgICk7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIGZyb207XG4gIH1cbn1cbmZ1bmN0aW9uIG1lcmdlV2F0Y2hPcHRpb25zKHRvLCBmcm9tKSB7XG4gIGlmICghdG8pXG4gICAgcmV0dXJuIGZyb207XG4gIGlmICghZnJvbSlcbiAgICByZXR1cm4gdG87XG4gIGNvbnN0IG1lcmdlZCA9IGV4dGVuZCgvKiBAX19QVVJFX18gKi8gT2JqZWN0LmNyZWF0ZShudWxsKSwgdG8pO1xuICBmb3IgKGNvbnN0IGtleSBpbiBmcm9tKSB7XG4gICAgbWVyZ2VkW2tleV0gPSBtZXJnZUFzQXJyYXkodG9ba2V5XSwgZnJvbVtrZXldKTtcbiAgfVxuICByZXR1cm4gbWVyZ2VkO1xufVxuXG5mdW5jdGlvbiBjcmVhdGVBcHBDb250ZXh0KCkge1xuICByZXR1cm4ge1xuICAgIGFwcDogbnVsbCxcbiAgICBjb25maWc6IHtcbiAgICAgIGlzTmF0aXZlVGFnOiBOTyxcbiAgICAgIHBlcmZvcm1hbmNlOiBmYWxzZSxcbiAgICAgIGdsb2JhbFByb3BlcnRpZXM6IHt9LFxuICAgICAgb3B0aW9uTWVyZ2VTdHJhdGVnaWVzOiB7fSxcbiAgICAgIGVycm9ySGFuZGxlcjogdm9pZCAwLFxuICAgICAgd2FybkhhbmRsZXI6IHZvaWQgMCxcbiAgICAgIGNvbXBpbGVyT3B0aW9uczoge31cbiAgICB9LFxuICAgIG1peGluczogW10sXG4gICAgY29tcG9uZW50czoge30sXG4gICAgZGlyZWN0aXZlczoge30sXG4gICAgcHJvdmlkZXM6IC8qIEBfX1BVUkVfXyAqLyBPYmplY3QuY3JlYXRlKG51bGwpLFxuICAgIG9wdGlvbnNDYWNoZTogLyogQF9fUFVSRV9fICovIG5ldyBXZWFrTWFwKCksXG4gICAgcHJvcHNDYWNoZTogLyogQF9fUFVSRV9fICovIG5ldyBXZWFrTWFwKCksXG4gICAgZW1pdHNDYWNoZTogLyogQF9fUFVSRV9fICovIG5ldyBXZWFrTWFwKClcbiAgfTtcbn1cbmxldCB1aWQkMSA9IDA7XG5mdW5jdGlvbiBjcmVhdGVBcHBBUEkocmVuZGVyLCBoeWRyYXRlKSB7XG4gIHJldHVybiBmdW5jdGlvbiBjcmVhdGVBcHAocm9vdENvbXBvbmVudCwgcm9vdFByb3BzID0gbnVsbCkge1xuICAgIGlmICghaXNGdW5jdGlvbihyb290Q29tcG9uZW50KSkge1xuICAgICAgcm9vdENvbXBvbmVudCA9IGV4dGVuZCh7fSwgcm9vdENvbXBvbmVudCk7XG4gICAgfVxuICAgIGlmIChyb290UHJvcHMgIT0gbnVsbCAmJiAhaXNPYmplY3Qocm9vdFByb3BzKSkge1xuICAgICAgISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSAmJiB3YXJuJDEoYHJvb3QgcHJvcHMgcGFzc2VkIHRvIGFwcC5tb3VudCgpIG11c3QgYmUgYW4gb2JqZWN0LmApO1xuICAgICAgcm9vdFByb3BzID0gbnVsbDtcbiAgICB9XG4gICAgY29uc3QgY29udGV4dCA9IGNyZWF0ZUFwcENvbnRleHQoKTtcbiAgICBjb25zdCBpbnN0YWxsZWRQbHVnaW5zID0gLyogQF9fUFVSRV9fICovIG5ldyBXZWFrU2V0KCk7XG4gICAgbGV0IGlzTW91bnRlZCA9IGZhbHNlO1xuICAgIGNvbnN0IGFwcCA9IGNvbnRleHQuYXBwID0ge1xuICAgICAgX3VpZDogdWlkJDErKyxcbiAgICAgIF9jb21wb25lbnQ6IHJvb3RDb21wb25lbnQsXG4gICAgICBfcHJvcHM6IHJvb3RQcm9wcyxcbiAgICAgIF9jb250YWluZXI6IG51bGwsXG4gICAgICBfY29udGV4dDogY29udGV4dCxcbiAgICAgIF9pbnN0YW5jZTogbnVsbCxcbiAgICAgIHZlcnNpb24sXG4gICAgICBnZXQgY29uZmlnKCkge1xuICAgICAgICByZXR1cm4gY29udGV4dC5jb25maWc7XG4gICAgICB9LFxuICAgICAgc2V0IGNvbmZpZyh2KSB7XG4gICAgICAgIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpKSB7XG4gICAgICAgICAgd2FybiQxKFxuICAgICAgICAgICAgYGFwcC5jb25maWcgY2Fubm90IGJlIHJlcGxhY2VkLiBNb2RpZnkgaW5kaXZpZHVhbCBvcHRpb25zIGluc3RlYWQuYFxuICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICB1c2UocGx1Z2luLCAuLi5vcHRpb25zKSB7XG4gICAgICAgIGlmIChpbnN0YWxsZWRQbHVnaW5zLmhhcyhwbHVnaW4pKSB7XG4gICAgICAgICAgISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSAmJiB3YXJuJDEoYFBsdWdpbiBoYXMgYWxyZWFkeSBiZWVuIGFwcGxpZWQgdG8gdGFyZ2V0IGFwcC5gKTtcbiAgICAgICAgfSBlbHNlIGlmIChwbHVnaW4gJiYgaXNGdW5jdGlvbihwbHVnaW4uaW5zdGFsbCkpIHtcbiAgICAgICAgICBpbnN0YWxsZWRQbHVnaW5zLmFkZChwbHVnaW4pO1xuICAgICAgICAgIHBsdWdpbi5pbnN0YWxsKGFwcCwgLi4ub3B0aW9ucyk7XG4gICAgICAgIH0gZWxzZSBpZiAoaXNGdW5jdGlvbihwbHVnaW4pKSB7XG4gICAgICAgICAgaW5zdGFsbGVkUGx1Z2lucy5hZGQocGx1Z2luKTtcbiAgICAgICAgICBwbHVnaW4oYXBwLCAuLi5vcHRpb25zKTtcbiAgICAgICAgfSBlbHNlIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpKSB7XG4gICAgICAgICAgd2FybiQxKFxuICAgICAgICAgICAgYEEgcGx1Z2luIG11c3QgZWl0aGVyIGJlIGEgZnVuY3Rpb24gb3IgYW4gb2JqZWN0IHdpdGggYW4gXCJpbnN0YWxsXCIgZnVuY3Rpb24uYFxuICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGFwcDtcbiAgICAgIH0sXG4gICAgICBtaXhpbihtaXhpbikge1xuICAgICAgICBpZiAoX19WVUVfT1BUSU9OU19BUElfXykge1xuICAgICAgICAgIGlmICghY29udGV4dC5taXhpbnMuaW5jbHVkZXMobWl4aW4pKSB7XG4gICAgICAgICAgICBjb250ZXh0Lm1peGlucy5wdXNoKG1peGluKTtcbiAgICAgICAgICB9IGVsc2UgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikpIHtcbiAgICAgICAgICAgIHdhcm4kMShcbiAgICAgICAgICAgICAgXCJNaXhpbiBoYXMgYWxyZWFkeSBiZWVuIGFwcGxpZWQgdG8gdGFyZ2V0IGFwcFwiICsgKG1peGluLm5hbWUgPyBgOiAke21peGluLm5hbWV9YCA6IFwiXCIpXG4gICAgICAgICAgICApO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpKSB7XG4gICAgICAgICAgd2FybiQxKFwiTWl4aW5zIGFyZSBvbmx5IGF2YWlsYWJsZSBpbiBidWlsZHMgc3VwcG9ydGluZyBPcHRpb25zIEFQSVwiKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gYXBwO1xuICAgICAgfSxcbiAgICAgIGNvbXBvbmVudChuYW1lLCBjb21wb25lbnQpIHtcbiAgICAgICAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikpIHtcbiAgICAgICAgICB2YWxpZGF0ZUNvbXBvbmVudE5hbWUobmFtZSwgY29udGV4dC5jb25maWcpO1xuICAgICAgICB9XG4gICAgICAgIGlmICghY29tcG9uZW50KSB7XG4gICAgICAgICAgcmV0dXJuIGNvbnRleHQuY29tcG9uZW50c1tuYW1lXTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSAmJiBjb250ZXh0LmNvbXBvbmVudHNbbmFtZV0pIHtcbiAgICAgICAgICB3YXJuJDEoYENvbXBvbmVudCBcIiR7bmFtZX1cIiBoYXMgYWxyZWFkeSBiZWVuIHJlZ2lzdGVyZWQgaW4gdGFyZ2V0IGFwcC5gKTtcbiAgICAgICAgfVxuICAgICAgICBjb250ZXh0LmNvbXBvbmVudHNbbmFtZV0gPSBjb21wb25lbnQ7XG4gICAgICAgIHJldHVybiBhcHA7XG4gICAgICB9LFxuICAgICAgZGlyZWN0aXZlKG5hbWUsIGRpcmVjdGl2ZSkge1xuICAgICAgICBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSkge1xuICAgICAgICAgIHZhbGlkYXRlRGlyZWN0aXZlTmFtZShuYW1lKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIWRpcmVjdGl2ZSkge1xuICAgICAgICAgIHJldHVybiBjb250ZXh0LmRpcmVjdGl2ZXNbbmFtZV07XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgJiYgY29udGV4dC5kaXJlY3RpdmVzW25hbWVdKSB7XG4gICAgICAgICAgd2FybiQxKGBEaXJlY3RpdmUgXCIke25hbWV9XCIgaGFzIGFscmVhZHkgYmVlbiByZWdpc3RlcmVkIGluIHRhcmdldCBhcHAuYCk7XG4gICAgICAgIH1cbiAgICAgICAgY29udGV4dC5kaXJlY3RpdmVzW25hbWVdID0gZGlyZWN0aXZlO1xuICAgICAgICByZXR1cm4gYXBwO1xuICAgICAgfSxcbiAgICAgIG1vdW50KHJvb3RDb250YWluZXIsIGlzSHlkcmF0ZSwgbmFtZXNwYWNlKSB7XG4gICAgICAgIGlmICghaXNNb3VudGVkKSB7XG4gICAgICAgICAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgJiYgcm9vdENvbnRhaW5lci5fX3Z1ZV9hcHBfXykge1xuICAgICAgICAgICAgd2FybiQxKFxuICAgICAgICAgICAgICBgVGhlcmUgaXMgYWxyZWFkeSBhbiBhcHAgaW5zdGFuY2UgbW91bnRlZCBvbiB0aGUgaG9zdCBjb250YWluZXIuXG4gSWYgeW91IHdhbnQgdG8gbW91bnQgYW5vdGhlciBhcHAgb24gdGhlIHNhbWUgaG9zdCBjb250YWluZXIsIHlvdSBuZWVkIHRvIHVubW91bnQgdGhlIHByZXZpb3VzIGFwcCBieSBjYWxsaW5nIFxcYGFwcC51bm1vdW50KClcXGAgZmlyc3QuYFxuICAgICAgICAgICAgKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgY29uc3Qgdm5vZGUgPSBjcmVhdGVWTm9kZShyb290Q29tcG9uZW50LCByb290UHJvcHMpO1xuICAgICAgICAgIHZub2RlLmFwcENvbnRleHQgPSBjb250ZXh0O1xuICAgICAgICAgIGlmIChuYW1lc3BhY2UgPT09IHRydWUpIHtcbiAgICAgICAgICAgIG5hbWVzcGFjZSA9IFwic3ZnXCI7XG4gICAgICAgICAgfSBlbHNlIGlmIChuYW1lc3BhY2UgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICBuYW1lc3BhY2UgPSB2b2lkIDA7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpKSB7XG4gICAgICAgICAgICBjb250ZXh0LnJlbG9hZCA9ICgpID0+IHtcbiAgICAgICAgICAgICAgcmVuZGVyKFxuICAgICAgICAgICAgICAgIGNsb25lVk5vZGUodm5vZGUpLFxuICAgICAgICAgICAgICAgIHJvb3RDb250YWluZXIsXG4gICAgICAgICAgICAgICAgbmFtZXNwYWNlXG4gICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoaXNIeWRyYXRlICYmIGh5ZHJhdGUpIHtcbiAgICAgICAgICAgIGh5ZHJhdGUodm5vZGUsIHJvb3RDb250YWluZXIpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZW5kZXIodm5vZGUsIHJvb3RDb250YWluZXIsIG5hbWVzcGFjZSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlzTW91bnRlZCA9IHRydWU7XG4gICAgICAgICAgYXBwLl9jb250YWluZXIgPSByb290Q29udGFpbmVyO1xuICAgICAgICAgIHJvb3RDb250YWluZXIuX192dWVfYXBwX18gPSBhcHA7XG4gICAgICAgICAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgfHwgX19WVUVfUFJPRF9ERVZUT09MU19fKSB7XG4gICAgICAgICAgICBhcHAuX2luc3RhbmNlID0gdm5vZGUuY29tcG9uZW50O1xuICAgICAgICAgICAgZGV2dG9vbHNJbml0QXBwKGFwcCwgdmVyc2lvbik7XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiBnZXRFeHBvc2VQcm94eSh2bm9kZS5jb21wb25lbnQpIHx8IHZub2RlLmNvbXBvbmVudC5wcm94eTtcbiAgICAgICAgfSBlbHNlIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpKSB7XG4gICAgICAgICAgd2FybiQxKFxuICAgICAgICAgICAgYEFwcCBoYXMgYWxyZWFkeSBiZWVuIG1vdW50ZWQuXG5JZiB5b3Ugd2FudCB0byByZW1vdW50IHRoZSBzYW1lIGFwcCwgbW92ZSB5b3VyIGFwcCBjcmVhdGlvbiBsb2dpYyBpbnRvIGEgZmFjdG9yeSBmdW5jdGlvbiBhbmQgY3JlYXRlIGZyZXNoIGFwcCBpbnN0YW5jZXMgZm9yIGVhY2ggbW91bnQgLSBlLmcuIFxcYGNvbnN0IGNyZWF0ZU15QXBwID0gKCkgPT4gY3JlYXRlQXBwKEFwcClcXGBgXG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIHVubW91bnQoKSB7XG4gICAgICAgIGlmIChpc01vdW50ZWQpIHtcbiAgICAgICAgICByZW5kZXIobnVsbCwgYXBwLl9jb250YWluZXIpO1xuICAgICAgICAgIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpIHx8IF9fVlVFX1BST0RfREVWVE9PTFNfXykge1xuICAgICAgICAgICAgYXBwLl9pbnN0YW5jZSA9IG51bGw7XG4gICAgICAgICAgICBkZXZ0b29sc1VubW91bnRBcHAoYXBwKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgZGVsZXRlIGFwcC5fY29udGFpbmVyLl9fdnVlX2FwcF9fO1xuICAgICAgICB9IGVsc2UgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikpIHtcbiAgICAgICAgICB3YXJuJDEoYENhbm5vdCB1bm1vdW50IGFuIGFwcCB0aGF0IGlzIG5vdCBtb3VudGVkLmApO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgcHJvdmlkZShrZXksIHZhbHVlKSB7XG4gICAgICAgIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpICYmIGtleSBpbiBjb250ZXh0LnByb3ZpZGVzKSB7XG4gICAgICAgICAgd2FybiQxKFxuICAgICAgICAgICAgYEFwcCBhbHJlYWR5IHByb3ZpZGVzIHByb3BlcnR5IHdpdGgga2V5IFwiJHtTdHJpbmcoa2V5KX1cIi4gSXQgd2lsbCBiZSBvdmVyd3JpdHRlbiB3aXRoIHRoZSBuZXcgdmFsdWUuYFxuICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgICAgY29udGV4dC5wcm92aWRlc1trZXldID0gdmFsdWU7XG4gICAgICAgIHJldHVybiBhcHA7XG4gICAgICB9LFxuICAgICAgcnVuV2l0aENvbnRleHQoZm4pIHtcbiAgICAgICAgY29uc3QgbGFzdEFwcCA9IGN1cnJlbnRBcHA7XG4gICAgICAgIGN1cnJlbnRBcHAgPSBhcHA7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgcmV0dXJuIGZuKCk7XG4gICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgY3VycmVudEFwcCA9IGxhc3RBcHA7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9O1xuICAgIHJldHVybiBhcHA7XG4gIH07XG59XG5sZXQgY3VycmVudEFwcCA9IG51bGw7XG5cbmZ1bmN0aW9uIHByb3ZpZGUoa2V5LCB2YWx1ZSkge1xuICBpZiAoIWN1cnJlbnRJbnN0YW5jZSkge1xuICAgIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpKSB7XG4gICAgICB3YXJuJDEoYHByb3ZpZGUoKSBjYW4gb25seSBiZSB1c2VkIGluc2lkZSBzZXR1cCgpLmApO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICBsZXQgcHJvdmlkZXMgPSBjdXJyZW50SW5zdGFuY2UucHJvdmlkZXM7XG4gICAgY29uc3QgcGFyZW50UHJvdmlkZXMgPSBjdXJyZW50SW5zdGFuY2UucGFyZW50ICYmIGN1cnJlbnRJbnN0YW5jZS5wYXJlbnQucHJvdmlkZXM7XG4gICAgaWYgKHBhcmVudFByb3ZpZGVzID09PSBwcm92aWRlcykge1xuICAgICAgcHJvdmlkZXMgPSBjdXJyZW50SW5zdGFuY2UucHJvdmlkZXMgPSBPYmplY3QuY3JlYXRlKHBhcmVudFByb3ZpZGVzKTtcbiAgICB9XG4gICAgcHJvdmlkZXNba2V5XSA9IHZhbHVlO1xuICB9XG59XG5mdW5jdGlvbiBpbmplY3Qoa2V5LCBkZWZhdWx0VmFsdWUsIHRyZWF0RGVmYXVsdEFzRmFjdG9yeSA9IGZhbHNlKSB7XG4gIGNvbnN0IGluc3RhbmNlID0gY3VycmVudEluc3RhbmNlIHx8IGN1cnJlbnRSZW5kZXJpbmdJbnN0YW5jZTtcbiAgaWYgKGluc3RhbmNlIHx8IGN1cnJlbnRBcHApIHtcbiAgICBjb25zdCBwcm92aWRlcyA9IGluc3RhbmNlID8gaW5zdGFuY2UucGFyZW50ID09IG51bGwgPyBpbnN0YW5jZS52bm9kZS5hcHBDb250ZXh0ICYmIGluc3RhbmNlLnZub2RlLmFwcENvbnRleHQucHJvdmlkZXMgOiBpbnN0YW5jZS5wYXJlbnQucHJvdmlkZXMgOiBjdXJyZW50QXBwLl9jb250ZXh0LnByb3ZpZGVzO1xuICAgIGlmIChwcm92aWRlcyAmJiBrZXkgaW4gcHJvdmlkZXMpIHtcbiAgICAgIHJldHVybiBwcm92aWRlc1trZXldO1xuICAgIH0gZWxzZSBpZiAoYXJndW1lbnRzLmxlbmd0aCA+IDEpIHtcbiAgICAgIHJldHVybiB0cmVhdERlZmF1bHRBc0ZhY3RvcnkgJiYgaXNGdW5jdGlvbihkZWZhdWx0VmFsdWUpID8gZGVmYXVsdFZhbHVlLmNhbGwoaW5zdGFuY2UgJiYgaW5zdGFuY2UucHJveHkpIDogZGVmYXVsdFZhbHVlO1xuICAgIH0gZWxzZSBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSkge1xuICAgICAgd2FybiQxKGBpbmplY3Rpb24gXCIke1N0cmluZyhrZXkpfVwiIG5vdCBmb3VuZC5gKTtcbiAgICB9XG4gIH0gZWxzZSBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSkge1xuICAgIHdhcm4kMShgaW5qZWN0KCkgY2FuIG9ubHkgYmUgdXNlZCBpbnNpZGUgc2V0dXAoKSBvciBmdW5jdGlvbmFsIGNvbXBvbmVudHMuYCk7XG4gIH1cbn1cbmZ1bmN0aW9uIGhhc0luamVjdGlvbkNvbnRleHQoKSB7XG4gIHJldHVybiAhIShjdXJyZW50SW5zdGFuY2UgfHwgY3VycmVudFJlbmRlcmluZ0luc3RhbmNlIHx8IGN1cnJlbnRBcHApO1xufVxuXG5mdW5jdGlvbiBpbml0UHJvcHMoaW5zdGFuY2UsIHJhd1Byb3BzLCBpc1N0YXRlZnVsLCBpc1NTUiA9IGZhbHNlKSB7XG4gIGNvbnN0IHByb3BzID0ge307XG4gIGNvbnN0IGF0dHJzID0ge307XG4gIGRlZihhdHRycywgSW50ZXJuYWxPYmplY3RLZXksIDEpO1xuICBpbnN0YW5jZS5wcm9wc0RlZmF1bHRzID0gLyogQF9fUFVSRV9fICovIE9iamVjdC5jcmVhdGUobnVsbCk7XG4gIHNldEZ1bGxQcm9wcyhpbnN0YW5jZSwgcmF3UHJvcHMsIHByb3BzLCBhdHRycyk7XG4gIGZvciAoY29uc3Qga2V5IGluIGluc3RhbmNlLnByb3BzT3B0aW9uc1swXSkge1xuICAgIGlmICghKGtleSBpbiBwcm9wcykpIHtcbiAgICAgIHByb3BzW2tleV0gPSB2b2lkIDA7XG4gICAgfVxuICB9XG4gIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpKSB7XG4gICAgdmFsaWRhdGVQcm9wcyhyYXdQcm9wcyB8fCB7fSwgcHJvcHMsIGluc3RhbmNlKTtcbiAgfVxuICBpZiAoaXNTdGF0ZWZ1bCkge1xuICAgIGluc3RhbmNlLnByb3BzID0gaXNTU1IgPyBwcm9wcyA6IHNoYWxsb3dSZWFjdGl2ZShwcm9wcyk7XG4gIH0gZWxzZSB7XG4gICAgaWYgKCFpbnN0YW5jZS50eXBlLnByb3BzKSB7XG4gICAgICBpbnN0YW5jZS5wcm9wcyA9IGF0dHJzO1xuICAgIH0gZWxzZSB7XG4gICAgICBpbnN0YW5jZS5wcm9wcyA9IHByb3BzO1xuICAgIH1cbiAgfVxuICBpbnN0YW5jZS5hdHRycyA9IGF0dHJzO1xufVxuZnVuY3Rpb24gaXNJbkhtckNvbnRleHQoaW5zdGFuY2UpIHtcbiAgd2hpbGUgKGluc3RhbmNlKSB7XG4gICAgaWYgKGluc3RhbmNlLnR5cGUuX19obXJJZClcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIGluc3RhbmNlID0gaW5zdGFuY2UucGFyZW50O1xuICB9XG59XG5mdW5jdGlvbiB1cGRhdGVQcm9wcyhpbnN0YW5jZSwgcmF3UHJvcHMsIHJhd1ByZXZQcm9wcywgb3B0aW1pemVkKSB7XG4gIGNvbnN0IHtcbiAgICBwcm9wcyxcbiAgICBhdHRycyxcbiAgICB2bm9kZTogeyBwYXRjaEZsYWcgfVxuICB9ID0gaW5zdGFuY2U7XG4gIGNvbnN0IHJhd0N1cnJlbnRQcm9wcyA9IHRvUmF3KHByb3BzKTtcbiAgY29uc3QgW29wdGlvbnNdID0gaW5zdGFuY2UucHJvcHNPcHRpb25zO1xuICBsZXQgaGFzQXR0cnNDaGFuZ2VkID0gZmFsc2U7XG4gIGlmIChcbiAgICAvLyBhbHdheXMgZm9yY2UgZnVsbCBkaWZmIGluIGRldlxuICAgIC8vIC0gIzE5NDIgaWYgaG1yIGlzIGVuYWJsZWQgd2l0aCBzZmMgY29tcG9uZW50XG4gICAgLy8gLSB2aXRlIzg3MiBub24tc2ZjIGNvbXBvbmVudCB1c2VkIGJ5IHNmYyBjb21wb25lbnRcbiAgICAhKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgJiYgaXNJbkhtckNvbnRleHQoaW5zdGFuY2UpKSAmJiAob3B0aW1pemVkIHx8IHBhdGNoRmxhZyA+IDApICYmICEocGF0Y2hGbGFnICYgMTYpXG4gICkge1xuICAgIGlmIChwYXRjaEZsYWcgJiA4KSB7XG4gICAgICBjb25zdCBwcm9wc1RvVXBkYXRlID0gaW5zdGFuY2Uudm5vZGUuZHluYW1pY1Byb3BzO1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwcm9wc1RvVXBkYXRlLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGxldCBrZXkgPSBwcm9wc1RvVXBkYXRlW2ldO1xuICAgICAgICBpZiAoaXNFbWl0TGlzdGVuZXIoaW5zdGFuY2UuZW1pdHNPcHRpb25zLCBrZXkpKSB7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgdmFsdWUgPSByYXdQcm9wc1trZXldO1xuICAgICAgICBpZiAob3B0aW9ucykge1xuICAgICAgICAgIGlmIChoYXNPd24oYXR0cnMsIGtleSkpIHtcbiAgICAgICAgICAgIGlmICh2YWx1ZSAhPT0gYXR0cnNba2V5XSkge1xuICAgICAgICAgICAgICBhdHRyc1trZXldID0gdmFsdWU7XG4gICAgICAgICAgICAgIGhhc0F0dHJzQ2hhbmdlZCA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IGNhbWVsaXplZEtleSA9IGNhbWVsaXplKGtleSk7XG4gICAgICAgICAgICBwcm9wc1tjYW1lbGl6ZWRLZXldID0gcmVzb2x2ZVByb3BWYWx1ZShcbiAgICAgICAgICAgICAgb3B0aW9ucyxcbiAgICAgICAgICAgICAgcmF3Q3VycmVudFByb3BzLFxuICAgICAgICAgICAgICBjYW1lbGl6ZWRLZXksXG4gICAgICAgICAgICAgIHZhbHVlLFxuICAgICAgICAgICAgICBpbnN0YW5jZSxcbiAgICAgICAgICAgICAgZmFsc2VcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGlmICh2YWx1ZSAhPT0gYXR0cnNba2V5XSkge1xuICAgICAgICAgICAgYXR0cnNba2V5XSA9IHZhbHVlO1xuICAgICAgICAgICAgaGFzQXR0cnNDaGFuZ2VkID0gdHJ1ZTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgaWYgKHNldEZ1bGxQcm9wcyhpbnN0YW5jZSwgcmF3UHJvcHMsIHByb3BzLCBhdHRycykpIHtcbiAgICAgIGhhc0F0dHJzQ2hhbmdlZCA9IHRydWU7XG4gICAgfVxuICAgIGxldCBrZWJhYktleTtcbiAgICBmb3IgKGNvbnN0IGtleSBpbiByYXdDdXJyZW50UHJvcHMpIHtcbiAgICAgIGlmICghcmF3UHJvcHMgfHwgLy8gZm9yIGNhbWVsQ2FzZVxuICAgICAgIWhhc093bihyYXdQcm9wcywga2V5KSAmJiAvLyBpdCdzIHBvc3NpYmxlIHRoZSBvcmlnaW5hbCBwcm9wcyB3YXMgcGFzc2VkIGluIGFzIGtlYmFiLWNhc2VcbiAgICAgIC8vIGFuZCBjb252ZXJ0ZWQgdG8gY2FtZWxDYXNlICgjOTU1KVxuICAgICAgKChrZWJhYktleSA9IGh5cGhlbmF0ZShrZXkpKSA9PT0ga2V5IHx8ICFoYXNPd24ocmF3UHJvcHMsIGtlYmFiS2V5KSkpIHtcbiAgICAgICAgaWYgKG9wdGlvbnMpIHtcbiAgICAgICAgICBpZiAocmF3UHJldlByb3BzICYmIC8vIGZvciBjYW1lbENhc2VcbiAgICAgICAgICAocmF3UHJldlByb3BzW2tleV0gIT09IHZvaWQgMCB8fCAvLyBmb3Iga2ViYWItY2FzZVxuICAgICAgICAgIHJhd1ByZXZQcm9wc1trZWJhYktleV0gIT09IHZvaWQgMCkpIHtcbiAgICAgICAgICAgIHByb3BzW2tleV0gPSByZXNvbHZlUHJvcFZhbHVlKFxuICAgICAgICAgICAgICBvcHRpb25zLFxuICAgICAgICAgICAgICByYXdDdXJyZW50UHJvcHMsXG4gICAgICAgICAgICAgIGtleSxcbiAgICAgICAgICAgICAgdm9pZCAwLFxuICAgICAgICAgICAgICBpbnN0YW5jZSxcbiAgICAgICAgICAgICAgdHJ1ZVxuICAgICAgICAgICAgKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZGVsZXRlIHByb3BzW2tleV07XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKGF0dHJzICE9PSByYXdDdXJyZW50UHJvcHMpIHtcbiAgICAgIGZvciAoY29uc3Qga2V5IGluIGF0dHJzKSB7XG4gICAgICAgIGlmICghcmF3UHJvcHMgfHwgIWhhc093bihyYXdQcm9wcywga2V5KSAmJiB0cnVlKSB7XG4gICAgICAgICAgZGVsZXRlIGF0dHJzW2tleV07XG4gICAgICAgICAgaGFzQXR0cnNDaGFuZ2VkID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuICBpZiAoaGFzQXR0cnNDaGFuZ2VkKSB7XG4gICAgdHJpZ2dlcihpbnN0YW5jZSwgXCJzZXRcIiwgXCIkYXR0cnNcIik7XG4gIH1cbiAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikpIHtcbiAgICB2YWxpZGF0ZVByb3BzKHJhd1Byb3BzIHx8IHt9LCBwcm9wcywgaW5zdGFuY2UpO1xuICB9XG59XG5mdW5jdGlvbiBzZXRGdWxsUHJvcHMoaW5zdGFuY2UsIHJhd1Byb3BzLCBwcm9wcywgYXR0cnMpIHtcbiAgY29uc3QgW29wdGlvbnMsIG5lZWRDYXN0S2V5c10gPSBpbnN0YW5jZS5wcm9wc09wdGlvbnM7XG4gIGxldCBoYXNBdHRyc0NoYW5nZWQgPSBmYWxzZTtcbiAgbGV0IHJhd0Nhc3RWYWx1ZXM7XG4gIGlmIChyYXdQcm9wcykge1xuICAgIGZvciAobGV0IGtleSBpbiByYXdQcm9wcykge1xuICAgICAgaWYgKGlzUmVzZXJ2ZWRQcm9wKGtleSkpIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgICBjb25zdCB2YWx1ZSA9IHJhd1Byb3BzW2tleV07XG4gICAgICBsZXQgY2FtZWxLZXk7XG4gICAgICBpZiAob3B0aW9ucyAmJiBoYXNPd24ob3B0aW9ucywgY2FtZWxLZXkgPSBjYW1lbGl6ZShrZXkpKSkge1xuICAgICAgICBpZiAoIW5lZWRDYXN0S2V5cyB8fCAhbmVlZENhc3RLZXlzLmluY2x1ZGVzKGNhbWVsS2V5KSkge1xuICAgICAgICAgIHByb3BzW2NhbWVsS2V5XSA9IHZhbHVlO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIChyYXdDYXN0VmFsdWVzIHx8IChyYXdDYXN0VmFsdWVzID0ge30pKVtjYW1lbEtleV0gPSB2YWx1ZTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmICghaXNFbWl0TGlzdGVuZXIoaW5zdGFuY2UuZW1pdHNPcHRpb25zLCBrZXkpKSB7XG4gICAgICAgIGlmICghKGtleSBpbiBhdHRycykgfHwgdmFsdWUgIT09IGF0dHJzW2tleV0pIHtcbiAgICAgICAgICBhdHRyc1trZXldID0gdmFsdWU7XG4gICAgICAgICAgaGFzQXR0cnNDaGFuZ2VkID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuICBpZiAobmVlZENhc3RLZXlzKSB7XG4gICAgY29uc3QgcmF3Q3VycmVudFByb3BzID0gdG9SYXcocHJvcHMpO1xuICAgIGNvbnN0IGNhc3RWYWx1ZXMgPSByYXdDYXN0VmFsdWVzIHx8IEVNUFRZX09CSjtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IG5lZWRDYXN0S2V5cy5sZW5ndGg7IGkrKykge1xuICAgICAgY29uc3Qga2V5ID0gbmVlZENhc3RLZXlzW2ldO1xuICAgICAgcHJvcHNba2V5XSA9IHJlc29sdmVQcm9wVmFsdWUoXG4gICAgICAgIG9wdGlvbnMsXG4gICAgICAgIHJhd0N1cnJlbnRQcm9wcyxcbiAgICAgICAga2V5LFxuICAgICAgICBjYXN0VmFsdWVzW2tleV0sXG4gICAgICAgIGluc3RhbmNlLFxuICAgICAgICAhaGFzT3duKGNhc3RWYWx1ZXMsIGtleSlcbiAgICAgICk7XG4gICAgfVxuICB9XG4gIHJldHVybiBoYXNBdHRyc0NoYW5nZWQ7XG59XG5mdW5jdGlvbiByZXNvbHZlUHJvcFZhbHVlKG9wdGlvbnMsIHByb3BzLCBrZXksIHZhbHVlLCBpbnN0YW5jZSwgaXNBYnNlbnQpIHtcbiAgY29uc3Qgb3B0ID0gb3B0aW9uc1trZXldO1xuICBpZiAob3B0ICE9IG51bGwpIHtcbiAgICBjb25zdCBoYXNEZWZhdWx0ID0gaGFzT3duKG9wdCwgXCJkZWZhdWx0XCIpO1xuICAgIGlmIChoYXNEZWZhdWx0ICYmIHZhbHVlID09PSB2b2lkIDApIHtcbiAgICAgIGNvbnN0IGRlZmF1bHRWYWx1ZSA9IG9wdC5kZWZhdWx0O1xuICAgICAgaWYgKG9wdC50eXBlICE9PSBGdW5jdGlvbiAmJiAhb3B0LnNraXBGYWN0b3J5ICYmIGlzRnVuY3Rpb24oZGVmYXVsdFZhbHVlKSkge1xuICAgICAgICBjb25zdCB7IHByb3BzRGVmYXVsdHMgfSA9IGluc3RhbmNlO1xuICAgICAgICBpZiAoa2V5IGluIHByb3BzRGVmYXVsdHMpIHtcbiAgICAgICAgICB2YWx1ZSA9IHByb3BzRGVmYXVsdHNba2V5XTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjb25zdCByZXNldCA9IHNldEN1cnJlbnRJbnN0YW5jZShpbnN0YW5jZSk7XG4gICAgICAgICAgdmFsdWUgPSBwcm9wc0RlZmF1bHRzW2tleV0gPSBkZWZhdWx0VmFsdWUuY2FsbChcbiAgICAgICAgICAgIG51bGwsXG4gICAgICAgICAgICBwcm9wc1xuICAgICAgICAgICk7XG4gICAgICAgICAgcmVzZXQoKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdmFsdWUgPSBkZWZhdWx0VmFsdWU7XG4gICAgICB9XG4gICAgfVxuICAgIGlmIChvcHRbMCAvKiBzaG91bGRDYXN0ICovXSkge1xuICAgICAgaWYgKGlzQWJzZW50ICYmICFoYXNEZWZhdWx0KSB7XG4gICAgICAgIHZhbHVlID0gZmFsc2U7XG4gICAgICB9IGVsc2UgaWYgKG9wdFsxIC8qIHNob3VsZENhc3RUcnVlICovXSAmJiAodmFsdWUgPT09IFwiXCIgfHwgdmFsdWUgPT09IGh5cGhlbmF0ZShrZXkpKSkge1xuICAgICAgICB2YWx1ZSA9IHRydWU7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIHJldHVybiB2YWx1ZTtcbn1cbmZ1bmN0aW9uIG5vcm1hbGl6ZVByb3BzT3B0aW9ucyhjb21wLCBhcHBDb250ZXh0LCBhc01peGluID0gZmFsc2UpIHtcbiAgY29uc3QgY2FjaGUgPSBhcHBDb250ZXh0LnByb3BzQ2FjaGU7XG4gIGNvbnN0IGNhY2hlZCA9IGNhY2hlLmdldChjb21wKTtcbiAgaWYgKGNhY2hlZCkge1xuICAgIHJldHVybiBjYWNoZWQ7XG4gIH1cbiAgY29uc3QgcmF3ID0gY29tcC5wcm9wcztcbiAgY29uc3Qgbm9ybWFsaXplZCA9IHt9O1xuICBjb25zdCBuZWVkQ2FzdEtleXMgPSBbXTtcbiAgbGV0IGhhc0V4dGVuZHMgPSBmYWxzZTtcbiAgaWYgKF9fVlVFX09QVElPTlNfQVBJX18gJiYgIWlzRnVuY3Rpb24oY29tcCkpIHtcbiAgICBjb25zdCBleHRlbmRQcm9wcyA9IChyYXcyKSA9PiB7XG4gICAgICBoYXNFeHRlbmRzID0gdHJ1ZTtcbiAgICAgIGNvbnN0IFtwcm9wcywga2V5c10gPSBub3JtYWxpemVQcm9wc09wdGlvbnMocmF3MiwgYXBwQ29udGV4dCwgdHJ1ZSk7XG4gICAgICBleHRlbmQobm9ybWFsaXplZCwgcHJvcHMpO1xuICAgICAgaWYgKGtleXMpXG4gICAgICAgIG5lZWRDYXN0S2V5cy5wdXNoKC4uLmtleXMpO1xuICAgIH07XG4gICAgaWYgKCFhc01peGluICYmIGFwcENvbnRleHQubWl4aW5zLmxlbmd0aCkge1xuICAgICAgYXBwQ29udGV4dC5taXhpbnMuZm9yRWFjaChleHRlbmRQcm9wcyk7XG4gICAgfVxuICAgIGlmIChjb21wLmV4dGVuZHMpIHtcbiAgICAgIGV4dGVuZFByb3BzKGNvbXAuZXh0ZW5kcyk7XG4gICAgfVxuICAgIGlmIChjb21wLm1peGlucykge1xuICAgICAgY29tcC5taXhpbnMuZm9yRWFjaChleHRlbmRQcm9wcyk7XG4gICAgfVxuICB9XG4gIGlmICghcmF3ICYmICFoYXNFeHRlbmRzKSB7XG4gICAgaWYgKGlzT2JqZWN0KGNvbXApKSB7XG4gICAgICBjYWNoZS5zZXQoY29tcCwgRU1QVFlfQVJSKTtcbiAgICB9XG4gICAgcmV0dXJuIEVNUFRZX0FSUjtcbiAgfVxuICBpZiAoaXNBcnJheShyYXcpKSB7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCByYXcubGVuZ3RoOyBpKyspIHtcbiAgICAgIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpICYmICFpc1N0cmluZyhyYXdbaV0pKSB7XG4gICAgICAgIHdhcm4kMShgcHJvcHMgbXVzdCBiZSBzdHJpbmdzIHdoZW4gdXNpbmcgYXJyYXkgc3ludGF4LmAsIHJhd1tpXSk7XG4gICAgICB9XG4gICAgICBjb25zdCBub3JtYWxpemVkS2V5ID0gY2FtZWxpemUocmF3W2ldKTtcbiAgICAgIGlmICh2YWxpZGF0ZVByb3BOYW1lKG5vcm1hbGl6ZWRLZXkpKSB7XG4gICAgICAgIG5vcm1hbGl6ZWRbbm9ybWFsaXplZEtleV0gPSBFTVBUWV9PQko7XG4gICAgICB9XG4gICAgfVxuICB9IGVsc2UgaWYgKHJhdykge1xuICAgIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpICYmICFpc09iamVjdChyYXcpKSB7XG4gICAgICB3YXJuJDEoYGludmFsaWQgcHJvcHMgb3B0aW9uc2AsIHJhdyk7XG4gICAgfVxuICAgIGZvciAoY29uc3Qga2V5IGluIHJhdykge1xuICAgICAgY29uc3Qgbm9ybWFsaXplZEtleSA9IGNhbWVsaXplKGtleSk7XG4gICAgICBpZiAodmFsaWRhdGVQcm9wTmFtZShub3JtYWxpemVkS2V5KSkge1xuICAgICAgICBjb25zdCBvcHQgPSByYXdba2V5XTtcbiAgICAgICAgY29uc3QgcHJvcCA9IG5vcm1hbGl6ZWRbbm9ybWFsaXplZEtleV0gPSBpc0FycmF5KG9wdCkgfHwgaXNGdW5jdGlvbihvcHQpID8geyB0eXBlOiBvcHQgfSA6IGV4dGVuZCh7fSwgb3B0KTtcbiAgICAgICAgaWYgKHByb3ApIHtcbiAgICAgICAgICBjb25zdCBib29sZWFuSW5kZXggPSBnZXRUeXBlSW5kZXgoQm9vbGVhbiwgcHJvcC50eXBlKTtcbiAgICAgICAgICBjb25zdCBzdHJpbmdJbmRleCA9IGdldFR5cGVJbmRleChTdHJpbmcsIHByb3AudHlwZSk7XG4gICAgICAgICAgcHJvcFswIC8qIHNob3VsZENhc3QgKi9dID0gYm9vbGVhbkluZGV4ID4gLTE7XG4gICAgICAgICAgcHJvcFsxIC8qIHNob3VsZENhc3RUcnVlICovXSA9IHN0cmluZ0luZGV4IDwgMCB8fCBib29sZWFuSW5kZXggPCBzdHJpbmdJbmRleDtcbiAgICAgICAgICBpZiAoYm9vbGVhbkluZGV4ID4gLTEgfHwgaGFzT3duKHByb3AsIFwiZGVmYXVsdFwiKSkge1xuICAgICAgICAgICAgbmVlZENhc3RLZXlzLnB1c2gobm9ybWFsaXplZEtleSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG4gIGNvbnN0IHJlcyA9IFtub3JtYWxpemVkLCBuZWVkQ2FzdEtleXNdO1xuICBpZiAoaXNPYmplY3QoY29tcCkpIHtcbiAgICBjYWNoZS5zZXQoY29tcCwgcmVzKTtcbiAgfVxuICByZXR1cm4gcmVzO1xufVxuZnVuY3Rpb24gdmFsaWRhdGVQcm9wTmFtZShrZXkpIHtcbiAgaWYgKGtleVswXSAhPT0gXCIkXCIgJiYgIWlzUmVzZXJ2ZWRQcm9wKGtleSkpIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfSBlbHNlIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpKSB7XG4gICAgd2FybiQxKGBJbnZhbGlkIHByb3AgbmFtZTogXCIke2tleX1cIiBpcyBhIHJlc2VydmVkIHByb3BlcnR5LmApO1xuICB9XG4gIHJldHVybiBmYWxzZTtcbn1cbmZ1bmN0aW9uIGdldFR5cGUoY3Rvcikge1xuICBpZiAoY3RvciA9PT0gbnVsbCkge1xuICAgIHJldHVybiBcIm51bGxcIjtcbiAgfVxuICBpZiAodHlwZW9mIGN0b3IgPT09IFwiZnVuY3Rpb25cIikge1xuICAgIHJldHVybiBjdG9yLm5hbWUgfHwgXCJcIjtcbiAgfSBlbHNlIGlmICh0eXBlb2YgY3RvciA9PT0gXCJvYmplY3RcIikge1xuICAgIGNvbnN0IG5hbWUgPSBjdG9yLmNvbnN0cnVjdG9yICYmIGN0b3IuY29uc3RydWN0b3IubmFtZTtcbiAgICByZXR1cm4gbmFtZSB8fCBcIlwiO1xuICB9XG4gIHJldHVybiBcIlwiO1xufVxuZnVuY3Rpb24gaXNTYW1lVHlwZShhLCBiKSB7XG4gIHJldHVybiBnZXRUeXBlKGEpID09PSBnZXRUeXBlKGIpO1xufVxuZnVuY3Rpb24gZ2V0VHlwZUluZGV4KHR5cGUsIGV4cGVjdGVkVHlwZXMpIHtcbiAgaWYgKGlzQXJyYXkoZXhwZWN0ZWRUeXBlcykpIHtcbiAgICByZXR1cm4gZXhwZWN0ZWRUeXBlcy5maW5kSW5kZXgoKHQpID0+IGlzU2FtZVR5cGUodCwgdHlwZSkpO1xuICB9IGVsc2UgaWYgKGlzRnVuY3Rpb24oZXhwZWN0ZWRUeXBlcykpIHtcbiAgICByZXR1cm4gaXNTYW1lVHlwZShleHBlY3RlZFR5cGVzLCB0eXBlKSA/IDAgOiAtMTtcbiAgfVxuICByZXR1cm4gLTE7XG59XG5mdW5jdGlvbiB2YWxpZGF0ZVByb3BzKHJhd1Byb3BzLCBwcm9wcywgaW5zdGFuY2UpIHtcbiAgY29uc3QgcmVzb2x2ZWRWYWx1ZXMgPSB0b1Jhdyhwcm9wcyk7XG4gIGNvbnN0IG9wdGlvbnMgPSBpbnN0YW5jZS5wcm9wc09wdGlvbnNbMF07XG4gIGZvciAoY29uc3Qga2V5IGluIG9wdGlvbnMpIHtcbiAgICBsZXQgb3B0ID0gb3B0aW9uc1trZXldO1xuICAgIGlmIChvcHQgPT0gbnVsbClcbiAgICAgIGNvbnRpbnVlO1xuICAgIHZhbGlkYXRlUHJvcChcbiAgICAgIGtleSxcbiAgICAgIHJlc29sdmVkVmFsdWVzW2tleV0sXG4gICAgICBvcHQsXG4gICAgICAhIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpID8gc2hhbGxvd1JlYWRvbmx5KHJlc29sdmVkVmFsdWVzKSA6IHJlc29sdmVkVmFsdWVzLFxuICAgICAgIWhhc093bihyYXdQcm9wcywga2V5KSAmJiAhaGFzT3duKHJhd1Byb3BzLCBoeXBoZW5hdGUoa2V5KSlcbiAgICApO1xuICB9XG59XG5mdW5jdGlvbiB2YWxpZGF0ZVByb3AobmFtZSwgdmFsdWUsIHByb3AsIHByb3BzLCBpc0Fic2VudCkge1xuICBjb25zdCB7IHR5cGUsIHJlcXVpcmVkLCB2YWxpZGF0b3IsIHNraXBDaGVjayB9ID0gcHJvcDtcbiAgaWYgKHJlcXVpcmVkICYmIGlzQWJzZW50KSB7XG4gICAgd2FybiQxKCdNaXNzaW5nIHJlcXVpcmVkIHByb3A6IFwiJyArIG5hbWUgKyAnXCInKTtcbiAgICByZXR1cm47XG4gIH1cbiAgaWYgKHZhbHVlID09IG51bGwgJiYgIXJlcXVpcmVkKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIGlmICh0eXBlICE9IG51bGwgJiYgdHlwZSAhPT0gdHJ1ZSAmJiAhc2tpcENoZWNrKSB7XG4gICAgbGV0IGlzVmFsaWQgPSBmYWxzZTtcbiAgICBjb25zdCB0eXBlcyA9IGlzQXJyYXkodHlwZSkgPyB0eXBlIDogW3R5cGVdO1xuICAgIGNvbnN0IGV4cGVjdGVkVHlwZXMgPSBbXTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHR5cGVzLmxlbmd0aCAmJiAhaXNWYWxpZDsgaSsrKSB7XG4gICAgICBjb25zdCB7IHZhbGlkLCBleHBlY3RlZFR5cGUgfSA9IGFzc2VydFR5cGUodmFsdWUsIHR5cGVzW2ldKTtcbiAgICAgIGV4cGVjdGVkVHlwZXMucHVzaChleHBlY3RlZFR5cGUgfHwgXCJcIik7XG4gICAgICBpc1ZhbGlkID0gdmFsaWQ7XG4gICAgfVxuICAgIGlmICghaXNWYWxpZCkge1xuICAgICAgd2FybiQxKGdldEludmFsaWRUeXBlTWVzc2FnZShuYW1lLCB2YWx1ZSwgZXhwZWN0ZWRUeXBlcykpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgfVxuICBpZiAodmFsaWRhdG9yICYmICF2YWxpZGF0b3IodmFsdWUsIHByb3BzKSkge1xuICAgIHdhcm4kMSgnSW52YWxpZCBwcm9wOiBjdXN0b20gdmFsaWRhdG9yIGNoZWNrIGZhaWxlZCBmb3IgcHJvcCBcIicgKyBuYW1lICsgJ1wiLicpO1xuICB9XG59XG5jb25zdCBpc1NpbXBsZVR5cGUgPSAvKiBAX19QVVJFX18gKi8gbWFrZU1hcChcbiAgXCJTdHJpbmcsTnVtYmVyLEJvb2xlYW4sRnVuY3Rpb24sU3ltYm9sLEJpZ0ludFwiXG4pO1xuZnVuY3Rpb24gYXNzZXJ0VHlwZSh2YWx1ZSwgdHlwZSkge1xuICBsZXQgdmFsaWQ7XG4gIGNvbnN0IGV4cGVjdGVkVHlwZSA9IGdldFR5cGUodHlwZSk7XG4gIGlmIChpc1NpbXBsZVR5cGUoZXhwZWN0ZWRUeXBlKSkge1xuICAgIGNvbnN0IHQgPSB0eXBlb2YgdmFsdWU7XG4gICAgdmFsaWQgPSB0ID09PSBleHBlY3RlZFR5cGUudG9Mb3dlckNhc2UoKTtcbiAgICBpZiAoIXZhbGlkICYmIHQgPT09IFwib2JqZWN0XCIpIHtcbiAgICAgIHZhbGlkID0gdmFsdWUgaW5zdGFuY2VvZiB0eXBlO1xuICAgIH1cbiAgfSBlbHNlIGlmIChleHBlY3RlZFR5cGUgPT09IFwiT2JqZWN0XCIpIHtcbiAgICB2YWxpZCA9IGlzT2JqZWN0KHZhbHVlKTtcbiAgfSBlbHNlIGlmIChleHBlY3RlZFR5cGUgPT09IFwiQXJyYXlcIikge1xuICAgIHZhbGlkID0gaXNBcnJheSh2YWx1ZSk7XG4gIH0gZWxzZSBpZiAoZXhwZWN0ZWRUeXBlID09PSBcIm51bGxcIikge1xuICAgIHZhbGlkID0gdmFsdWUgPT09IG51bGw7XG4gIH0gZWxzZSB7XG4gICAgdmFsaWQgPSB2YWx1ZSBpbnN0YW5jZW9mIHR5cGU7XG4gIH1cbiAgcmV0dXJuIHtcbiAgICB2YWxpZCxcbiAgICBleHBlY3RlZFR5cGVcbiAgfTtcbn1cbmZ1bmN0aW9uIGdldEludmFsaWRUeXBlTWVzc2FnZShuYW1lLCB2YWx1ZSwgZXhwZWN0ZWRUeXBlcykge1xuICBpZiAoZXhwZWN0ZWRUeXBlcy5sZW5ndGggPT09IDApIHtcbiAgICByZXR1cm4gYFByb3AgdHlwZSBbXSBmb3IgcHJvcCBcIiR7bmFtZX1cIiB3b24ndCBtYXRjaCBhbnl0aGluZy4gRGlkIHlvdSBtZWFuIHRvIHVzZSB0eXBlIEFycmF5IGluc3RlYWQ/YDtcbiAgfVxuICBsZXQgbWVzc2FnZSA9IGBJbnZhbGlkIHByb3A6IHR5cGUgY2hlY2sgZmFpbGVkIGZvciBwcm9wIFwiJHtuYW1lfVwiLiBFeHBlY3RlZCAke2V4cGVjdGVkVHlwZXMubWFwKGNhcGl0YWxpemUpLmpvaW4oXCIgfCBcIil9YDtcbiAgY29uc3QgZXhwZWN0ZWRUeXBlID0gZXhwZWN0ZWRUeXBlc1swXTtcbiAgY29uc3QgcmVjZWl2ZWRUeXBlID0gdG9SYXdUeXBlKHZhbHVlKTtcbiAgY29uc3QgZXhwZWN0ZWRWYWx1ZSA9IHN0eWxlVmFsdWUodmFsdWUsIGV4cGVjdGVkVHlwZSk7XG4gIGNvbnN0IHJlY2VpdmVkVmFsdWUgPSBzdHlsZVZhbHVlKHZhbHVlLCByZWNlaXZlZFR5cGUpO1xuICBpZiAoZXhwZWN0ZWRUeXBlcy5sZW5ndGggPT09IDEgJiYgaXNFeHBsaWNhYmxlKGV4cGVjdGVkVHlwZSkgJiYgIWlzQm9vbGVhbihleHBlY3RlZFR5cGUsIHJlY2VpdmVkVHlwZSkpIHtcbiAgICBtZXNzYWdlICs9IGAgd2l0aCB2YWx1ZSAke2V4cGVjdGVkVmFsdWV9YDtcbiAgfVxuICBtZXNzYWdlICs9IGAsIGdvdCAke3JlY2VpdmVkVHlwZX0gYDtcbiAgaWYgKGlzRXhwbGljYWJsZShyZWNlaXZlZFR5cGUpKSB7XG4gICAgbWVzc2FnZSArPSBgd2l0aCB2YWx1ZSAke3JlY2VpdmVkVmFsdWV9LmA7XG4gIH1cbiAgcmV0dXJuIG1lc3NhZ2U7XG59XG5mdW5jdGlvbiBzdHlsZVZhbHVlKHZhbHVlLCB0eXBlKSB7XG4gIGlmICh0eXBlID09PSBcIlN0cmluZ1wiKSB7XG4gICAgcmV0dXJuIGBcIiR7dmFsdWV9XCJgO1xuICB9IGVsc2UgaWYgKHR5cGUgPT09IFwiTnVtYmVyXCIpIHtcbiAgICByZXR1cm4gYCR7TnVtYmVyKHZhbHVlKX1gO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBgJHt2YWx1ZX1gO1xuICB9XG59XG5mdW5jdGlvbiBpc0V4cGxpY2FibGUodHlwZSkge1xuICBjb25zdCBleHBsaWNpdFR5cGVzID0gW1wic3RyaW5nXCIsIFwibnVtYmVyXCIsIFwiYm9vbGVhblwiXTtcbiAgcmV0dXJuIGV4cGxpY2l0VHlwZXMuc29tZSgoZWxlbSkgPT4gdHlwZS50b0xvd2VyQ2FzZSgpID09PSBlbGVtKTtcbn1cbmZ1bmN0aW9uIGlzQm9vbGVhbiguLi5hcmdzKSB7XG4gIHJldHVybiBhcmdzLnNvbWUoKGVsZW0pID0+IGVsZW0udG9Mb3dlckNhc2UoKSA9PT0gXCJib29sZWFuXCIpO1xufVxuXG5jb25zdCBpc0ludGVybmFsS2V5ID0gKGtleSkgPT4ga2V5WzBdID09PSBcIl9cIiB8fCBrZXkgPT09IFwiJHN0YWJsZVwiO1xuY29uc3Qgbm9ybWFsaXplU2xvdFZhbHVlID0gKHZhbHVlKSA9PiBpc0FycmF5KHZhbHVlKSA/IHZhbHVlLm1hcChub3JtYWxpemVWTm9kZSkgOiBbbm9ybWFsaXplVk5vZGUodmFsdWUpXTtcbmNvbnN0IG5vcm1hbGl6ZVNsb3QgPSAoa2V5LCByYXdTbG90LCBjdHgpID0+IHtcbiAgaWYgKHJhd1Nsb3QuX24pIHtcbiAgICByZXR1cm4gcmF3U2xvdDtcbiAgfVxuICBjb25zdCBub3JtYWxpemVkID0gd2l0aEN0eCgoLi4uYXJncykgPT4ge1xuICAgIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpICYmIGN1cnJlbnRJbnN0YW5jZSAmJiAoIWN0eCB8fCBjdHgucm9vdCA9PT0gY3VycmVudEluc3RhbmNlLnJvb3QpKSB7XG4gICAgICB3YXJuJDEoXG4gICAgICAgIGBTbG90IFwiJHtrZXl9XCIgaW52b2tlZCBvdXRzaWRlIG9mIHRoZSByZW5kZXIgZnVuY3Rpb246IHRoaXMgd2lsbCBub3QgdHJhY2sgZGVwZW5kZW5jaWVzIHVzZWQgaW4gdGhlIHNsb3QuIEludm9rZSB0aGUgc2xvdCBmdW5jdGlvbiBpbnNpZGUgdGhlIHJlbmRlciBmdW5jdGlvbiBpbnN0ZWFkLmBcbiAgICAgICk7XG4gICAgfVxuICAgIHJldHVybiBub3JtYWxpemVTbG90VmFsdWUocmF3U2xvdCguLi5hcmdzKSk7XG4gIH0sIGN0eCk7XG4gIG5vcm1hbGl6ZWQuX2MgPSBmYWxzZTtcbiAgcmV0dXJuIG5vcm1hbGl6ZWQ7XG59O1xuY29uc3Qgbm9ybWFsaXplT2JqZWN0U2xvdHMgPSAocmF3U2xvdHMsIHNsb3RzLCBpbnN0YW5jZSkgPT4ge1xuICBjb25zdCBjdHggPSByYXdTbG90cy5fY3R4O1xuICBmb3IgKGNvbnN0IGtleSBpbiByYXdTbG90cykge1xuICAgIGlmIChpc0ludGVybmFsS2V5KGtleSkpXG4gICAgICBjb250aW51ZTtcbiAgICBjb25zdCB2YWx1ZSA9IHJhd1Nsb3RzW2tleV07XG4gICAgaWYgKGlzRnVuY3Rpb24odmFsdWUpKSB7XG4gICAgICBzbG90c1trZXldID0gbm9ybWFsaXplU2xvdChrZXksIHZhbHVlLCBjdHgpO1xuICAgIH0gZWxzZSBpZiAodmFsdWUgIT0gbnVsbCkge1xuICAgICAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgJiYgdHJ1ZSkge1xuICAgICAgICB3YXJuJDEoXG4gICAgICAgICAgYE5vbi1mdW5jdGlvbiB2YWx1ZSBlbmNvdW50ZXJlZCBmb3Igc2xvdCBcIiR7a2V5fVwiLiBQcmVmZXIgZnVuY3Rpb24gc2xvdHMgZm9yIGJldHRlciBwZXJmb3JtYW5jZS5gXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgICBjb25zdCBub3JtYWxpemVkID0gbm9ybWFsaXplU2xvdFZhbHVlKHZhbHVlKTtcbiAgICAgIHNsb3RzW2tleV0gPSAoKSA9PiBub3JtYWxpemVkO1xuICAgIH1cbiAgfVxufTtcbmNvbnN0IG5vcm1hbGl6ZVZOb2RlU2xvdHMgPSAoaW5zdGFuY2UsIGNoaWxkcmVuKSA9PiB7XG4gIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpICYmICFpc0tlZXBBbGl2ZShpbnN0YW5jZS52bm9kZSkgJiYgdHJ1ZSkge1xuICAgIHdhcm4kMShcbiAgICAgIGBOb24tZnVuY3Rpb24gdmFsdWUgZW5jb3VudGVyZWQgZm9yIGRlZmF1bHQgc2xvdC4gUHJlZmVyIGZ1bmN0aW9uIHNsb3RzIGZvciBiZXR0ZXIgcGVyZm9ybWFuY2UuYFxuICAgICk7XG4gIH1cbiAgY29uc3Qgbm9ybWFsaXplZCA9IG5vcm1hbGl6ZVNsb3RWYWx1ZShjaGlsZHJlbik7XG4gIGluc3RhbmNlLnNsb3RzLmRlZmF1bHQgPSAoKSA9PiBub3JtYWxpemVkO1xufTtcbmNvbnN0IGluaXRTbG90cyA9IChpbnN0YW5jZSwgY2hpbGRyZW4pID0+IHtcbiAgaWYgKGluc3RhbmNlLnZub2RlLnNoYXBlRmxhZyAmIDMyKSB7XG4gICAgY29uc3QgdHlwZSA9IGNoaWxkcmVuLl87XG4gICAgaWYgKHR5cGUpIHtcbiAgICAgIGluc3RhbmNlLnNsb3RzID0gdG9SYXcoY2hpbGRyZW4pO1xuICAgICAgZGVmKGNoaWxkcmVuLCBcIl9cIiwgdHlwZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIG5vcm1hbGl6ZU9iamVjdFNsb3RzKFxuICAgICAgICBjaGlsZHJlbixcbiAgICAgICAgaW5zdGFuY2Uuc2xvdHMgPSB7fSk7XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIGluc3RhbmNlLnNsb3RzID0ge307XG4gICAgaWYgKGNoaWxkcmVuKSB7XG4gICAgICBub3JtYWxpemVWTm9kZVNsb3RzKGluc3RhbmNlLCBjaGlsZHJlbik7XG4gICAgfVxuICB9XG4gIGRlZihpbnN0YW5jZS5zbG90cywgSW50ZXJuYWxPYmplY3RLZXksIDEpO1xufTtcbmNvbnN0IHVwZGF0ZVNsb3RzID0gKGluc3RhbmNlLCBjaGlsZHJlbiwgb3B0aW1pemVkKSA9PiB7XG4gIGNvbnN0IHsgdm5vZGUsIHNsb3RzIH0gPSBpbnN0YW5jZTtcbiAgbGV0IG5lZWREZWxldGlvbkNoZWNrID0gdHJ1ZTtcbiAgbGV0IGRlbGV0aW9uQ29tcGFyaXNvblRhcmdldCA9IEVNUFRZX09CSjtcbiAgaWYgKHZub2RlLnNoYXBlRmxhZyAmIDMyKSB7XG4gICAgY29uc3QgdHlwZSA9IGNoaWxkcmVuLl87XG4gICAgaWYgKHR5cGUpIHtcbiAgICAgIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpICYmIGlzSG1yVXBkYXRpbmcpIHtcbiAgICAgICAgZXh0ZW5kKHNsb3RzLCBjaGlsZHJlbik7XG4gICAgICAgIHRyaWdnZXIoaW5zdGFuY2UsIFwic2V0XCIsIFwiJHNsb3RzXCIpO1xuICAgICAgfSBlbHNlIGlmIChvcHRpbWl6ZWQgJiYgdHlwZSA9PT0gMSkge1xuICAgICAgICBuZWVkRGVsZXRpb25DaGVjayA9IGZhbHNlO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZXh0ZW5kKHNsb3RzLCBjaGlsZHJlbik7XG4gICAgICAgIGlmICghb3B0aW1pemVkICYmIHR5cGUgPT09IDEpIHtcbiAgICAgICAgICBkZWxldGUgc2xvdHMuXztcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBuZWVkRGVsZXRpb25DaGVjayA9ICFjaGlsZHJlbi4kc3RhYmxlO1xuICAgICAgbm9ybWFsaXplT2JqZWN0U2xvdHMoY2hpbGRyZW4sIHNsb3RzKTtcbiAgICB9XG4gICAgZGVsZXRpb25Db21wYXJpc29uVGFyZ2V0ID0gY2hpbGRyZW47XG4gIH0gZWxzZSBpZiAoY2hpbGRyZW4pIHtcbiAgICBub3JtYWxpemVWTm9kZVNsb3RzKGluc3RhbmNlLCBjaGlsZHJlbik7XG4gICAgZGVsZXRpb25Db21wYXJpc29uVGFyZ2V0ID0geyBkZWZhdWx0OiAxIH07XG4gIH1cbiAgaWYgKG5lZWREZWxldGlvbkNoZWNrKSB7XG4gICAgZm9yIChjb25zdCBrZXkgaW4gc2xvdHMpIHtcbiAgICAgIGlmICghaXNJbnRlcm5hbEtleShrZXkpICYmIGRlbGV0aW9uQ29tcGFyaXNvblRhcmdldFtrZXldID09IG51bGwpIHtcbiAgICAgICAgZGVsZXRlIHNsb3RzW2tleV07XG4gICAgICB9XG4gICAgfVxuICB9XG59O1xuXG5mdW5jdGlvbiBzZXRSZWYocmF3UmVmLCBvbGRSYXdSZWYsIHBhcmVudFN1c3BlbnNlLCB2bm9kZSwgaXNVbm1vdW50ID0gZmFsc2UpIHtcbiAgaWYgKGlzQXJyYXkocmF3UmVmKSkge1xuICAgIHJhd1JlZi5mb3JFYWNoKFxuICAgICAgKHIsIGkpID0+IHNldFJlZihcbiAgICAgICAgcixcbiAgICAgICAgb2xkUmF3UmVmICYmIChpc0FycmF5KG9sZFJhd1JlZikgPyBvbGRSYXdSZWZbaV0gOiBvbGRSYXdSZWYpLFxuICAgICAgICBwYXJlbnRTdXNwZW5zZSxcbiAgICAgICAgdm5vZGUsXG4gICAgICAgIGlzVW5tb3VudFxuICAgICAgKVxuICAgICk7XG4gICAgcmV0dXJuO1xuICB9XG4gIGlmIChpc0FzeW5jV3JhcHBlcih2bm9kZSkgJiYgIWlzVW5tb3VudCkge1xuICAgIHJldHVybjtcbiAgfVxuICBjb25zdCByZWZWYWx1ZSA9IHZub2RlLnNoYXBlRmxhZyAmIDQgPyBnZXRFeHBvc2VQcm94eSh2bm9kZS5jb21wb25lbnQpIHx8IHZub2RlLmNvbXBvbmVudC5wcm94eSA6IHZub2RlLmVsO1xuICBjb25zdCB2YWx1ZSA9IGlzVW5tb3VudCA/IG51bGwgOiByZWZWYWx1ZTtcbiAgY29uc3QgeyBpOiBvd25lciwgcjogcmVmIH0gPSByYXdSZWY7XG4gIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpICYmICFvd25lcikge1xuICAgIHdhcm4kMShcbiAgICAgIGBNaXNzaW5nIHJlZiBvd25lciBjb250ZXh0LiByZWYgY2Fubm90IGJlIHVzZWQgb24gaG9pc3RlZCB2bm9kZXMuIEEgdm5vZGUgd2l0aCByZWYgbXVzdCBiZSBjcmVhdGVkIGluc2lkZSB0aGUgcmVuZGVyIGZ1bmN0aW9uLmBcbiAgICApO1xuICAgIHJldHVybjtcbiAgfVxuICBjb25zdCBvbGRSZWYgPSBvbGRSYXdSZWYgJiYgb2xkUmF3UmVmLnI7XG4gIGNvbnN0IHJlZnMgPSBvd25lci5yZWZzID09PSBFTVBUWV9PQkogPyBvd25lci5yZWZzID0ge30gOiBvd25lci5yZWZzO1xuICBjb25zdCBzZXR1cFN0YXRlID0gb3duZXIuc2V0dXBTdGF0ZTtcbiAgaWYgKG9sZFJlZiAhPSBudWxsICYmIG9sZFJlZiAhPT0gcmVmKSB7XG4gICAgaWYgKGlzU3RyaW5nKG9sZFJlZikpIHtcbiAgICAgIHJlZnNbb2xkUmVmXSA9IG51bGw7XG4gICAgICBpZiAoaGFzT3duKHNldHVwU3RhdGUsIG9sZFJlZikpIHtcbiAgICAgICAgc2V0dXBTdGF0ZVtvbGRSZWZdID0gbnVsbDtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKGlzUmVmKG9sZFJlZikpIHtcbiAgICAgIG9sZFJlZi52YWx1ZSA9IG51bGw7XG4gICAgfVxuICB9XG4gIGlmIChpc0Z1bmN0aW9uKHJlZikpIHtcbiAgICBjYWxsV2l0aEVycm9ySGFuZGxpbmcocmVmLCBvd25lciwgMTIsIFt2YWx1ZSwgcmVmc10pO1xuICB9IGVsc2Uge1xuICAgIGNvbnN0IF9pc1N0cmluZyA9IGlzU3RyaW5nKHJlZik7XG4gICAgY29uc3QgX2lzUmVmID0gaXNSZWYocmVmKTtcbiAgICBpZiAoX2lzU3RyaW5nIHx8IF9pc1JlZikge1xuICAgICAgY29uc3QgZG9TZXQgPSAoKSA9PiB7XG4gICAgICAgIGlmIChyYXdSZWYuZikge1xuICAgICAgICAgIGNvbnN0IGV4aXN0aW5nID0gX2lzU3RyaW5nID8gaGFzT3duKHNldHVwU3RhdGUsIHJlZikgPyBzZXR1cFN0YXRlW3JlZl0gOiByZWZzW3JlZl0gOiByZWYudmFsdWU7XG4gICAgICAgICAgaWYgKGlzVW5tb3VudCkge1xuICAgICAgICAgICAgaXNBcnJheShleGlzdGluZykgJiYgcmVtb3ZlKGV4aXN0aW5nLCByZWZWYWx1ZSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGlmICghaXNBcnJheShleGlzdGluZykpIHtcbiAgICAgICAgICAgICAgaWYgKF9pc1N0cmluZykge1xuICAgICAgICAgICAgICAgIHJlZnNbcmVmXSA9IFtyZWZWYWx1ZV07XG4gICAgICAgICAgICAgICAgaWYgKGhhc093bihzZXR1cFN0YXRlLCByZWYpKSB7XG4gICAgICAgICAgICAgICAgICBzZXR1cFN0YXRlW3JlZl0gPSByZWZzW3JlZl07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJlZi52YWx1ZSA9IFtyZWZWYWx1ZV07XG4gICAgICAgICAgICAgICAgaWYgKHJhd1JlZi5rKVxuICAgICAgICAgICAgICAgICAgcmVmc1tyYXdSZWYua10gPSByZWYudmFsdWU7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSBpZiAoIWV4aXN0aW5nLmluY2x1ZGVzKHJlZlZhbHVlKSkge1xuICAgICAgICAgICAgICBleGlzdGluZy5wdXNoKHJlZlZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAoX2lzU3RyaW5nKSB7XG4gICAgICAgICAgcmVmc1tyZWZdID0gdmFsdWU7XG4gICAgICAgICAgaWYgKGhhc093bihzZXR1cFN0YXRlLCByZWYpKSB7XG4gICAgICAgICAgICBzZXR1cFN0YXRlW3JlZl0gPSB2YWx1ZTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAoX2lzUmVmKSB7XG4gICAgICAgICAgcmVmLnZhbHVlID0gdmFsdWU7XG4gICAgICAgICAgaWYgKHJhd1JlZi5rKVxuICAgICAgICAgICAgcmVmc1tyYXdSZWYua10gPSB2YWx1ZTtcbiAgICAgICAgfSBlbHNlIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpKSB7XG4gICAgICAgICAgd2FybiQxKFwiSW52YWxpZCB0ZW1wbGF0ZSByZWYgdHlwZTpcIiwgcmVmLCBgKCR7dHlwZW9mIHJlZn0pYCk7XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgICBpZiAodmFsdWUpIHtcbiAgICAgICAgZG9TZXQuaWQgPSAtMTtcbiAgICAgICAgcXVldWVQb3N0UmVuZGVyRWZmZWN0KGRvU2V0LCBwYXJlbnRTdXNwZW5zZSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBkb1NldCgpO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSkge1xuICAgICAgd2FybiQxKFwiSW52YWxpZCB0ZW1wbGF0ZSByZWYgdHlwZTpcIiwgcmVmLCBgKCR7dHlwZW9mIHJlZn0pYCk7XG4gICAgfVxuICB9XG59XG5cbmxldCBoYXNNaXNtYXRjaCA9IGZhbHNlO1xuY29uc3QgaXNTVkdDb250YWluZXIgPSAoY29udGFpbmVyKSA9PiBjb250YWluZXIubmFtZXNwYWNlVVJJLmluY2x1ZGVzKFwic3ZnXCIpICYmIGNvbnRhaW5lci50YWdOYW1lICE9PSBcImZvcmVpZ25PYmplY3RcIjtcbmNvbnN0IGlzTWF0aE1MQ29udGFpbmVyID0gKGNvbnRhaW5lcikgPT4gY29udGFpbmVyLm5hbWVzcGFjZVVSSS5pbmNsdWRlcyhcIk1hdGhNTFwiKTtcbmNvbnN0IGdldENvbnRhaW5lclR5cGUgPSAoY29udGFpbmVyKSA9PiB7XG4gIGlmIChpc1NWR0NvbnRhaW5lcihjb250YWluZXIpKVxuICAgIHJldHVybiBcInN2Z1wiO1xuICBpZiAoaXNNYXRoTUxDb250YWluZXIoY29udGFpbmVyKSlcbiAgICByZXR1cm4gXCJtYXRobWxcIjtcbiAgcmV0dXJuIHZvaWQgMDtcbn07XG5jb25zdCBpc0NvbW1lbnQgPSAobm9kZSkgPT4gbm9kZS5ub2RlVHlwZSA9PT0gOCAvKiBDT01NRU5UICovO1xuZnVuY3Rpb24gY3JlYXRlSHlkcmF0aW9uRnVuY3Rpb25zKHJlbmRlcmVySW50ZXJuYWxzKSB7XG4gIGNvbnN0IHtcbiAgICBtdDogbW91bnRDb21wb25lbnQsXG4gICAgcDogcGF0Y2gsXG4gICAgbzoge1xuICAgICAgcGF0Y2hQcm9wLFxuICAgICAgY3JlYXRlVGV4dCxcbiAgICAgIG5leHRTaWJsaW5nLFxuICAgICAgcGFyZW50Tm9kZSxcbiAgICAgIHJlbW92ZSxcbiAgICAgIGluc2VydCxcbiAgICAgIGNyZWF0ZUNvbW1lbnRcbiAgICB9XG4gIH0gPSByZW5kZXJlckludGVybmFscztcbiAgY29uc3QgaHlkcmF0ZSA9ICh2bm9kZSwgY29udGFpbmVyKSA9PiB7XG4gICAgaWYgKCFjb250YWluZXIuaGFzQ2hpbGROb2RlcygpKSB7XG4gICAgICAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSB8fCBfX1ZVRV9QUk9EX0hZRFJBVElPTl9NSVNNQVRDSF9ERVRBSUxTX18pICYmIHdhcm4kMShcbiAgICAgICAgYEF0dGVtcHRpbmcgdG8gaHlkcmF0ZSBleGlzdGluZyBtYXJrdXAgYnV0IGNvbnRhaW5lciBpcyBlbXB0eS4gUGVyZm9ybWluZyBmdWxsIG1vdW50IGluc3RlYWQuYFxuICAgICAgKTtcbiAgICAgIHBhdGNoKG51bGwsIHZub2RlLCBjb250YWluZXIpO1xuICAgICAgZmx1c2hQb3N0Rmx1c2hDYnMoKTtcbiAgICAgIGNvbnRhaW5lci5fdm5vZGUgPSB2bm9kZTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaGFzTWlzbWF0Y2ggPSBmYWxzZTtcbiAgICBoeWRyYXRlTm9kZShjb250YWluZXIuZmlyc3RDaGlsZCwgdm5vZGUsIG51bGwsIG51bGwsIG51bGwpO1xuICAgIGZsdXNoUG9zdEZsdXNoQ2JzKCk7XG4gICAgY29udGFpbmVyLl92bm9kZSA9IHZub2RlO1xuICAgIGlmIChoYXNNaXNtYXRjaCAmJiB0cnVlKSB7XG4gICAgICBjb25zb2xlLmVycm9yKGBIeWRyYXRpb24gY29tcGxldGVkIGJ1dCBjb250YWlucyBtaXNtYXRjaGVzLmApO1xuICAgIH1cbiAgfTtcbiAgY29uc3QgaHlkcmF0ZU5vZGUgPSAobm9kZSwgdm5vZGUsIHBhcmVudENvbXBvbmVudCwgcGFyZW50U3VzcGVuc2UsIHNsb3RTY29wZUlkcywgb3B0aW1pemVkID0gZmFsc2UpID0+IHtcbiAgICBjb25zdCBpc0ZyYWdtZW50U3RhcnQgPSBpc0NvbW1lbnQobm9kZSkgJiYgbm9kZS5kYXRhID09PSBcIltcIjtcbiAgICBjb25zdCBvbk1pc21hdGNoID0gKCkgPT4gaGFuZGxlTWlzbWF0Y2goXG4gICAgICBub2RlLFxuICAgICAgdm5vZGUsXG4gICAgICBwYXJlbnRDb21wb25lbnQsXG4gICAgICBwYXJlbnRTdXNwZW5zZSxcbiAgICAgIHNsb3RTY29wZUlkcyxcbiAgICAgIGlzRnJhZ21lbnRTdGFydFxuICAgICk7XG4gICAgY29uc3QgeyB0eXBlLCByZWYsIHNoYXBlRmxhZywgcGF0Y2hGbGFnIH0gPSB2bm9kZTtcbiAgICBsZXQgZG9tVHlwZSA9IG5vZGUubm9kZVR5cGU7XG4gICAgdm5vZGUuZWwgPSBub2RlO1xuICAgIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpIHx8IF9fVlVFX1BST0RfREVWVE9PTFNfXykge1xuICAgICAgaWYgKCEoXCJfX3Zub2RlXCIgaW4gbm9kZSkpIHtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG5vZGUsIFwiX192bm9kZVwiLCB7XG4gICAgICAgICAgdmFsdWU6IHZub2RlLFxuICAgICAgICAgIGVudW1lcmFibGU6IGZhbHNlXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgaWYgKCEoXCJfX3Z1ZVBhcmVudENvbXBvbmVudFwiIGluIG5vZGUpKSB7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShub2RlLCBcIl9fdnVlUGFyZW50Q29tcG9uZW50XCIsIHtcbiAgICAgICAgICB2YWx1ZTogcGFyZW50Q29tcG9uZW50LFxuICAgICAgICAgIGVudW1lcmFibGU6IGZhbHNlXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAocGF0Y2hGbGFnID09PSAtMikge1xuICAgICAgb3B0aW1pemVkID0gZmFsc2U7XG4gICAgICB2bm9kZS5keW5hbWljQ2hpbGRyZW4gPSBudWxsO1xuICAgIH1cbiAgICBsZXQgbmV4dE5vZGUgPSBudWxsO1xuICAgIHN3aXRjaCAodHlwZSkge1xuICAgICAgY2FzZSBUZXh0OlxuICAgICAgICBpZiAoZG9tVHlwZSAhPT0gMyAvKiBURVhUICovKSB7XG4gICAgICAgICAgaWYgKHZub2RlLmNoaWxkcmVuID09PSBcIlwiKSB7XG4gICAgICAgICAgICBpbnNlcnQodm5vZGUuZWwgPSBjcmVhdGVUZXh0KFwiXCIpLCBwYXJlbnROb2RlKG5vZGUpLCBub2RlKTtcbiAgICAgICAgICAgIG5leHROb2RlID0gbm9kZTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbmV4dE5vZGUgPSBvbk1pc21hdGNoKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGlmIChub2RlLmRhdGEgIT09IHZub2RlLmNoaWxkcmVuKSB7XG4gICAgICAgICAgICBoYXNNaXNtYXRjaCA9IHRydWU7XG4gICAgICAgICAgICAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSB8fCBfX1ZVRV9QUk9EX0hZRFJBVElPTl9NSVNNQVRDSF9ERVRBSUxTX18pICYmIHdhcm4kMShcbiAgICAgICAgICAgICAgYEh5ZHJhdGlvbiB0ZXh0IG1pc21hdGNoIGluYCxcbiAgICAgICAgICAgICAgbm9kZS5wYXJlbnROb2RlLFxuICAgICAgICAgICAgICBgXG4gIC0gcmVuZGVyZWQgb24gc2VydmVyOiAke0pTT04uc3RyaW5naWZ5KFxuICAgICAgICAgICAgICAgIG5vZGUuZGF0YVxuICAgICAgICAgICAgICApfVxuICAtIGV4cGVjdGVkIG9uIGNsaWVudDogJHtKU09OLnN0cmluZ2lmeSh2bm9kZS5jaGlsZHJlbil9YFxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIG5vZGUuZGF0YSA9IHZub2RlLmNoaWxkcmVuO1xuICAgICAgICAgIH1cbiAgICAgICAgICBuZXh0Tm9kZSA9IG5leHRTaWJsaW5nKG5vZGUpO1xuICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBDb21tZW50OlxuICAgICAgICBpZiAoaXNUZW1wbGF0ZU5vZGUobm9kZSkpIHtcbiAgICAgICAgICBuZXh0Tm9kZSA9IG5leHRTaWJsaW5nKG5vZGUpO1xuICAgICAgICAgIHJlcGxhY2VOb2RlKFxuICAgICAgICAgICAgdm5vZGUuZWwgPSBub2RlLmNvbnRlbnQuZmlyc3RDaGlsZCxcbiAgICAgICAgICAgIG5vZGUsXG4gICAgICAgICAgICBwYXJlbnRDb21wb25lbnRcbiAgICAgICAgICApO1xuICAgICAgICB9IGVsc2UgaWYgKGRvbVR5cGUgIT09IDggLyogQ09NTUVOVCAqLyB8fCBpc0ZyYWdtZW50U3RhcnQpIHtcbiAgICAgICAgICBuZXh0Tm9kZSA9IG9uTWlzbWF0Y2goKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBuZXh0Tm9kZSA9IG5leHRTaWJsaW5nKG5vZGUpO1xuICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBTdGF0aWM6XG4gICAgICAgIGlmIChpc0ZyYWdtZW50U3RhcnQpIHtcbiAgICAgICAgICBub2RlID0gbmV4dFNpYmxpbmcobm9kZSk7XG4gICAgICAgICAgZG9tVHlwZSA9IG5vZGUubm9kZVR5cGU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGRvbVR5cGUgPT09IDEgLyogRUxFTUVOVCAqLyB8fCBkb21UeXBlID09PSAzIC8qIFRFWFQgKi8pIHtcbiAgICAgICAgICBuZXh0Tm9kZSA9IG5vZGU7XG4gICAgICAgICAgY29uc3QgbmVlZFRvQWRvcHRDb250ZW50ID0gIXZub2RlLmNoaWxkcmVuLmxlbmd0aDtcbiAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHZub2RlLnN0YXRpY0NvdW50OyBpKyspIHtcbiAgICAgICAgICAgIGlmIChuZWVkVG9BZG9wdENvbnRlbnQpXG4gICAgICAgICAgICAgIHZub2RlLmNoaWxkcmVuICs9IG5leHROb2RlLm5vZGVUeXBlID09PSAxIC8qIEVMRU1FTlQgKi8gPyBuZXh0Tm9kZS5vdXRlckhUTUwgOiBuZXh0Tm9kZS5kYXRhO1xuICAgICAgICAgICAgaWYgKGkgPT09IHZub2RlLnN0YXRpY0NvdW50IC0gMSkge1xuICAgICAgICAgICAgICB2bm9kZS5hbmNob3IgPSBuZXh0Tm9kZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG5leHROb2RlID0gbmV4dFNpYmxpbmcobmV4dE5vZGUpO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gaXNGcmFnbWVudFN0YXJ0ID8gbmV4dFNpYmxpbmcobmV4dE5vZGUpIDogbmV4dE5vZGU7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgb25NaXNtYXRjaCgpO1xuICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBGcmFnbWVudDpcbiAgICAgICAgaWYgKCFpc0ZyYWdtZW50U3RhcnQpIHtcbiAgICAgICAgICBuZXh0Tm9kZSA9IG9uTWlzbWF0Y2goKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBuZXh0Tm9kZSA9IGh5ZHJhdGVGcmFnbWVudChcbiAgICAgICAgICAgIG5vZGUsXG4gICAgICAgICAgICB2bm9kZSxcbiAgICAgICAgICAgIHBhcmVudENvbXBvbmVudCxcbiAgICAgICAgICAgIHBhcmVudFN1c3BlbnNlLFxuICAgICAgICAgICAgc2xvdFNjb3BlSWRzLFxuICAgICAgICAgICAgb3B0aW1pemVkXG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgICBicmVhaztcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIGlmIChzaGFwZUZsYWcgJiAxKSB7XG4gICAgICAgICAgaWYgKChkb21UeXBlICE9PSAxIC8qIEVMRU1FTlQgKi8gfHwgdm5vZGUudHlwZS50b0xvd2VyQ2FzZSgpICE9PSBub2RlLnRhZ05hbWUudG9Mb3dlckNhc2UoKSkgJiYgIWlzVGVtcGxhdGVOb2RlKG5vZGUpKSB7XG4gICAgICAgICAgICBuZXh0Tm9kZSA9IG9uTWlzbWF0Y2goKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbmV4dE5vZGUgPSBoeWRyYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgbm9kZSxcbiAgICAgICAgICAgICAgdm5vZGUsXG4gICAgICAgICAgICAgIHBhcmVudENvbXBvbmVudCxcbiAgICAgICAgICAgICAgcGFyZW50U3VzcGVuc2UsXG4gICAgICAgICAgICAgIHNsb3RTY29wZUlkcyxcbiAgICAgICAgICAgICAgb3B0aW1pemVkXG4gICAgICAgICAgICApO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmIChzaGFwZUZsYWcgJiA2KSB7XG4gICAgICAgICAgdm5vZGUuc2xvdFNjb3BlSWRzID0gc2xvdFNjb3BlSWRzO1xuICAgICAgICAgIGNvbnN0IGNvbnRhaW5lciA9IHBhcmVudE5vZGUobm9kZSk7XG4gICAgICAgICAgaWYgKGlzRnJhZ21lbnRTdGFydCkge1xuICAgICAgICAgICAgbmV4dE5vZGUgPSBsb2NhdGVDbG9zaW5nQW5jaG9yKG5vZGUpO1xuICAgICAgICAgIH0gZWxzZSBpZiAoaXNDb21tZW50KG5vZGUpICYmIG5vZGUuZGF0YSA9PT0gXCJ0ZWxlcG9ydCBzdGFydFwiKSB7XG4gICAgICAgICAgICBuZXh0Tm9kZSA9IGxvY2F0ZUNsb3NpbmdBbmNob3Iobm9kZSwgbm9kZS5kYXRhLCBcInRlbGVwb3J0IGVuZFwiKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbmV4dE5vZGUgPSBuZXh0U2libGluZyhub2RlKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgbW91bnRDb21wb25lbnQoXG4gICAgICAgICAgICB2bm9kZSxcbiAgICAgICAgICAgIGNvbnRhaW5lcixcbiAgICAgICAgICAgIG51bGwsXG4gICAgICAgICAgICBwYXJlbnRDb21wb25lbnQsXG4gICAgICAgICAgICBwYXJlbnRTdXNwZW5zZSxcbiAgICAgICAgICAgIGdldENvbnRhaW5lclR5cGUoY29udGFpbmVyKSxcbiAgICAgICAgICAgIG9wdGltaXplZFxuICAgICAgICAgICk7XG4gICAgICAgICAgaWYgKGlzQXN5bmNXcmFwcGVyKHZub2RlKSkge1xuICAgICAgICAgICAgbGV0IHN1YlRyZWU7XG4gICAgICAgICAgICBpZiAoaXNGcmFnbWVudFN0YXJ0KSB7XG4gICAgICAgICAgICAgIHN1YlRyZWUgPSBjcmVhdGVWTm9kZShGcmFnbWVudCk7XG4gICAgICAgICAgICAgIHN1YlRyZWUuYW5jaG9yID0gbmV4dE5vZGUgPyBuZXh0Tm9kZS5wcmV2aW91c1NpYmxpbmcgOiBjb250YWluZXIubGFzdENoaWxkO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgc3ViVHJlZSA9IG5vZGUubm9kZVR5cGUgPT09IDMgPyBjcmVhdGVUZXh0Vk5vZGUoXCJcIikgOiBjcmVhdGVWTm9kZShcImRpdlwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHN1YlRyZWUuZWwgPSBub2RlO1xuICAgICAgICAgICAgdm5vZGUuY29tcG9uZW50LnN1YlRyZWUgPSBzdWJUcmVlO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmIChzaGFwZUZsYWcgJiA2NCkge1xuICAgICAgICAgIGlmIChkb21UeXBlICE9PSA4IC8qIENPTU1FTlQgKi8pIHtcbiAgICAgICAgICAgIG5leHROb2RlID0gb25NaXNtYXRjaCgpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBuZXh0Tm9kZSA9IHZub2RlLnR5cGUuaHlkcmF0ZShcbiAgICAgICAgICAgICAgbm9kZSxcbiAgICAgICAgICAgICAgdm5vZGUsXG4gICAgICAgICAgICAgIHBhcmVudENvbXBvbmVudCxcbiAgICAgICAgICAgICAgcGFyZW50U3VzcGVuc2UsXG4gICAgICAgICAgICAgIHNsb3RTY29wZUlkcyxcbiAgICAgICAgICAgICAgb3B0aW1pemVkLFxuICAgICAgICAgICAgICByZW5kZXJlckludGVybmFscyxcbiAgICAgICAgICAgICAgaHlkcmF0ZUNoaWxkcmVuXG4gICAgICAgICAgICApO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmIChzaGFwZUZsYWcgJiAxMjgpIHtcbiAgICAgICAgICBuZXh0Tm9kZSA9IHZub2RlLnR5cGUuaHlkcmF0ZShcbiAgICAgICAgICAgIG5vZGUsXG4gICAgICAgICAgICB2bm9kZSxcbiAgICAgICAgICAgIHBhcmVudENvbXBvbmVudCxcbiAgICAgICAgICAgIHBhcmVudFN1c3BlbnNlLFxuICAgICAgICAgICAgZ2V0Q29udGFpbmVyVHlwZShwYXJlbnROb2RlKG5vZGUpKSxcbiAgICAgICAgICAgIHNsb3RTY29wZUlkcyxcbiAgICAgICAgICAgIG9wdGltaXplZCxcbiAgICAgICAgICAgIHJlbmRlcmVySW50ZXJuYWxzLFxuICAgICAgICAgICAgaHlkcmF0ZU5vZGVcbiAgICAgICAgICApO1xuICAgICAgICB9IGVsc2UgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgfHwgX19WVUVfUFJPRF9IWURSQVRJT05fTUlTTUFUQ0hfREVUQUlMU19fKSB7XG4gICAgICAgICAgd2FybiQxKFwiSW52YWxpZCBIb3N0Vk5vZGUgdHlwZTpcIiwgdHlwZSwgYCgke3R5cGVvZiB0eXBlfSlgKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAocmVmICE9IG51bGwpIHtcbiAgICAgIHNldFJlZihyZWYsIG51bGwsIHBhcmVudFN1c3BlbnNlLCB2bm9kZSk7XG4gICAgfVxuICAgIHJldHVybiBuZXh0Tm9kZTtcbiAgfTtcbiAgY29uc3QgaHlkcmF0ZUVsZW1lbnQgPSAoZWwsIHZub2RlLCBwYXJlbnRDb21wb25lbnQsIHBhcmVudFN1c3BlbnNlLCBzbG90U2NvcGVJZHMsIG9wdGltaXplZCkgPT4ge1xuICAgIG9wdGltaXplZCA9IG9wdGltaXplZCB8fCAhIXZub2RlLmR5bmFtaWNDaGlsZHJlbjtcbiAgICBjb25zdCB7IHR5cGUsIHByb3BzLCBwYXRjaEZsYWcsIHNoYXBlRmxhZywgZGlycywgdHJhbnNpdGlvbiB9ID0gdm5vZGU7XG4gICAgY29uc3QgZm9yY2VQYXRjaCA9IHR5cGUgPT09IFwiaW5wdXRcIiB8fCB0eXBlID09PSBcIm9wdGlvblwiO1xuICAgIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpIHx8IGZvcmNlUGF0Y2ggfHwgcGF0Y2hGbGFnICE9PSAtMSkge1xuICAgICAgaWYgKGRpcnMpIHtcbiAgICAgICAgaW52b2tlRGlyZWN0aXZlSG9vayh2bm9kZSwgbnVsbCwgcGFyZW50Q29tcG9uZW50LCBcImNyZWF0ZWRcIik7XG4gICAgICB9XG4gICAgICBsZXQgbmVlZENhbGxUcmFuc2l0aW9uSG9va3MgPSBmYWxzZTtcbiAgICAgIGlmIChpc1RlbXBsYXRlTm9kZShlbCkpIHtcbiAgICAgICAgbmVlZENhbGxUcmFuc2l0aW9uSG9va3MgPSBuZWVkVHJhbnNpdGlvbihwYXJlbnRTdXNwZW5zZSwgdHJhbnNpdGlvbikgJiYgcGFyZW50Q29tcG9uZW50ICYmIHBhcmVudENvbXBvbmVudC52bm9kZS5wcm9wcyAmJiBwYXJlbnRDb21wb25lbnQudm5vZGUucHJvcHMuYXBwZWFyO1xuICAgICAgICBjb25zdCBjb250ZW50ID0gZWwuY29udGVudC5maXJzdENoaWxkO1xuICAgICAgICBpZiAobmVlZENhbGxUcmFuc2l0aW9uSG9va3MpIHtcbiAgICAgICAgICB0cmFuc2l0aW9uLmJlZm9yZUVudGVyKGNvbnRlbnQpO1xuICAgICAgICB9XG4gICAgICAgIHJlcGxhY2VOb2RlKGNvbnRlbnQsIGVsLCBwYXJlbnRDb21wb25lbnQpO1xuICAgICAgICB2bm9kZS5lbCA9IGVsID0gY29udGVudDtcbiAgICAgIH1cbiAgICAgIGlmIChzaGFwZUZsYWcgJiAxNiAmJiAvLyBza2lwIGlmIGVsZW1lbnQgaGFzIGlubmVySFRNTCAvIHRleHRDb250ZW50XG4gICAgICAhKHByb3BzICYmIChwcm9wcy5pbm5lckhUTUwgfHwgcHJvcHMudGV4dENvbnRlbnQpKSkge1xuICAgICAgICBsZXQgbmV4dCA9IGh5ZHJhdGVDaGlsZHJlbihcbiAgICAgICAgICBlbC5maXJzdENoaWxkLFxuICAgICAgICAgIHZub2RlLFxuICAgICAgICAgIGVsLFxuICAgICAgICAgIHBhcmVudENvbXBvbmVudCxcbiAgICAgICAgICBwYXJlbnRTdXNwZW5zZSxcbiAgICAgICAgICBzbG90U2NvcGVJZHMsXG4gICAgICAgICAgb3B0aW1pemVkXG4gICAgICAgICk7XG4gICAgICAgIGxldCBoYXNXYXJuZWQgPSBmYWxzZTtcbiAgICAgICAgd2hpbGUgKG5leHQpIHtcbiAgICAgICAgICBoYXNNaXNtYXRjaCA9IHRydWU7XG4gICAgICAgICAgaWYgKCghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpIHx8IF9fVlVFX1BST0RfSFlEUkFUSU9OX01JU01BVENIX0RFVEFJTFNfXykgJiYgIWhhc1dhcm5lZCkge1xuICAgICAgICAgICAgd2FybiQxKFxuICAgICAgICAgICAgICBgSHlkcmF0aW9uIGNoaWxkcmVuIG1pc21hdGNoIG9uYCxcbiAgICAgICAgICAgICAgZWwsXG4gICAgICAgICAgICAgIGBcblNlcnZlciByZW5kZXJlZCBlbGVtZW50IGNvbnRhaW5zIG1vcmUgY2hpbGQgbm9kZXMgdGhhbiBjbGllbnQgdmRvbS5gXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgaGFzV2FybmVkID0gdHJ1ZTtcbiAgICAgICAgICB9XG4gICAgICAgICAgY29uc3QgY3VyID0gbmV4dDtcbiAgICAgICAgICBuZXh0ID0gbmV4dC5uZXh0U2libGluZztcbiAgICAgICAgICByZW1vdmUoY3VyKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChzaGFwZUZsYWcgJiA4KSB7XG4gICAgICAgIGlmIChlbC50ZXh0Q29udGVudCAhPT0gdm5vZGUuY2hpbGRyZW4pIHtcbiAgICAgICAgICBoYXNNaXNtYXRjaCA9IHRydWU7XG4gICAgICAgICAgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgfHwgX19WVUVfUFJPRF9IWURSQVRJT05fTUlTTUFUQ0hfREVUQUlMU19fKSAmJiB3YXJuJDEoXG4gICAgICAgICAgICBgSHlkcmF0aW9uIHRleHQgY29udGVudCBtaXNtYXRjaCBvbmAsXG4gICAgICAgICAgICBlbCxcbiAgICAgICAgICAgIGBcbiAgLSByZW5kZXJlZCBvbiBzZXJ2ZXI6ICR7ZWwudGV4dENvbnRlbnR9XG4gIC0gZXhwZWN0ZWQgb24gY2xpZW50OiAke3Zub2RlLmNoaWxkcmVufWBcbiAgICAgICAgICApO1xuICAgICAgICAgIGVsLnRleHRDb250ZW50ID0gdm5vZGUuY2hpbGRyZW47XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmIChwcm9wcykge1xuICAgICAgICBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSB8fCBmb3JjZVBhdGNoIHx8ICFvcHRpbWl6ZWQgfHwgcGF0Y2hGbGFnICYgKDE2IHwgMzIpKSB7XG4gICAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gcHJvcHMpIHtcbiAgICAgICAgICAgIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpICYmIHByb3BIYXNNaXNtYXRjaChlbCwga2V5LCBwcm9wc1trZXldLCB2bm9kZSwgcGFyZW50Q29tcG9uZW50KSkge1xuICAgICAgICAgICAgICBoYXNNaXNtYXRjaCA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZm9yY2VQYXRjaCAmJiAoa2V5LmVuZHNXaXRoKFwidmFsdWVcIikgfHwga2V5ID09PSBcImluZGV0ZXJtaW5hdGVcIikgfHwgaXNPbihrZXkpICYmICFpc1Jlc2VydmVkUHJvcChrZXkpIHx8IC8vIGZvcmNlIGh5ZHJhdGUgdi1iaW5kIHdpdGggLnByb3AgbW9kaWZpZXJzXG4gICAgICAgICAgICBrZXlbMF0gPT09IFwiLlwiKSB7XG4gICAgICAgICAgICAgIHBhdGNoUHJvcChcbiAgICAgICAgICAgICAgICBlbCxcbiAgICAgICAgICAgICAgICBrZXksXG4gICAgICAgICAgICAgICAgbnVsbCxcbiAgICAgICAgICAgICAgICBwcm9wc1trZXldLFxuICAgICAgICAgICAgICAgIHZvaWQgMCxcbiAgICAgICAgICAgICAgICB2b2lkIDAsXG4gICAgICAgICAgICAgICAgcGFyZW50Q29tcG9uZW50XG4gICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKHByb3BzLm9uQ2xpY2spIHtcbiAgICAgICAgICBwYXRjaFByb3AoXG4gICAgICAgICAgICBlbCxcbiAgICAgICAgICAgIFwib25DbGlja1wiLFxuICAgICAgICAgICAgbnVsbCxcbiAgICAgICAgICAgIHByb3BzLm9uQ2xpY2ssXG4gICAgICAgICAgICB2b2lkIDAsXG4gICAgICAgICAgICB2b2lkIDAsXG4gICAgICAgICAgICBwYXJlbnRDb21wb25lbnRcbiAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBsZXQgdm5vZGVIb29rcztcbiAgICAgIGlmICh2bm9kZUhvb2tzID0gcHJvcHMgJiYgcHJvcHMub25Wbm9kZUJlZm9yZU1vdW50KSB7XG4gICAgICAgIGludm9rZVZOb2RlSG9vayh2bm9kZUhvb2tzLCBwYXJlbnRDb21wb25lbnQsIHZub2RlKTtcbiAgICAgIH1cbiAgICAgIGlmIChkaXJzKSB7XG4gICAgICAgIGludm9rZURpcmVjdGl2ZUhvb2sodm5vZGUsIG51bGwsIHBhcmVudENvbXBvbmVudCwgXCJiZWZvcmVNb3VudFwiKTtcbiAgICAgIH1cbiAgICAgIGlmICgodm5vZGVIb29rcyA9IHByb3BzICYmIHByb3BzLm9uVm5vZGVNb3VudGVkKSB8fCBkaXJzIHx8IG5lZWRDYWxsVHJhbnNpdGlvbkhvb2tzKSB7XG4gICAgICAgIHF1ZXVlRWZmZWN0V2l0aFN1c3BlbnNlKCgpID0+IHtcbiAgICAgICAgICB2bm9kZUhvb2tzICYmIGludm9rZVZOb2RlSG9vayh2bm9kZUhvb2tzLCBwYXJlbnRDb21wb25lbnQsIHZub2RlKTtcbiAgICAgICAgICBuZWVkQ2FsbFRyYW5zaXRpb25Ib29rcyAmJiB0cmFuc2l0aW9uLmVudGVyKGVsKTtcbiAgICAgICAgICBkaXJzICYmIGludm9rZURpcmVjdGl2ZUhvb2sodm5vZGUsIG51bGwsIHBhcmVudENvbXBvbmVudCwgXCJtb3VudGVkXCIpO1xuICAgICAgICB9LCBwYXJlbnRTdXNwZW5zZSk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBlbC5uZXh0U2libGluZztcbiAgfTtcbiAgY29uc3QgaHlkcmF0ZUNoaWxkcmVuID0gKG5vZGUsIHBhcmVudFZOb2RlLCBjb250YWluZXIsIHBhcmVudENvbXBvbmVudCwgcGFyZW50U3VzcGVuc2UsIHNsb3RTY29wZUlkcywgb3B0aW1pemVkKSA9PiB7XG4gICAgb3B0aW1pemVkID0gb3B0aW1pemVkIHx8ICEhcGFyZW50Vk5vZGUuZHluYW1pY0NoaWxkcmVuO1xuICAgIGNvbnN0IGNoaWxkcmVuID0gcGFyZW50Vk5vZGUuY2hpbGRyZW47XG4gICAgY29uc3QgbCA9IGNoaWxkcmVuLmxlbmd0aDtcbiAgICBsZXQgaGFzV2FybmVkID0gZmFsc2U7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsOyBpKyspIHtcbiAgICAgIGNvbnN0IHZub2RlID0gb3B0aW1pemVkID8gY2hpbGRyZW5baV0gOiBjaGlsZHJlbltpXSA9IG5vcm1hbGl6ZVZOb2RlKGNoaWxkcmVuW2ldKTtcbiAgICAgIGlmIChub2RlKSB7XG4gICAgICAgIG5vZGUgPSBoeWRyYXRlTm9kZShcbiAgICAgICAgICBub2RlLFxuICAgICAgICAgIHZub2RlLFxuICAgICAgICAgIHBhcmVudENvbXBvbmVudCxcbiAgICAgICAgICBwYXJlbnRTdXNwZW5zZSxcbiAgICAgICAgICBzbG90U2NvcGVJZHMsXG4gICAgICAgICAgb3B0aW1pemVkXG4gICAgICAgICk7XG4gICAgICB9IGVsc2UgaWYgKHZub2RlLnR5cGUgPT09IFRleHQgJiYgIXZub2RlLmNoaWxkcmVuKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaGFzTWlzbWF0Y2ggPSB0cnVlO1xuICAgICAgICBpZiAoKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgfHwgX19WVUVfUFJPRF9IWURSQVRJT05fTUlTTUFUQ0hfREVUQUlMU19fKSAmJiAhaGFzV2FybmVkKSB7XG4gICAgICAgICAgd2FybiQxKFxuICAgICAgICAgICAgYEh5ZHJhdGlvbiBjaGlsZHJlbiBtaXNtYXRjaCBvbmAsXG4gICAgICAgICAgICBjb250YWluZXIsXG4gICAgICAgICAgICBgXG5TZXJ2ZXIgcmVuZGVyZWQgZWxlbWVudCBjb250YWlucyBmZXdlciBjaGlsZCBub2RlcyB0aGFuIGNsaWVudCB2ZG9tLmBcbiAgICAgICAgICApO1xuICAgICAgICAgIGhhc1dhcm5lZCA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgcGF0Y2goXG4gICAgICAgICAgbnVsbCxcbiAgICAgICAgICB2bm9kZSxcbiAgICAgICAgICBjb250YWluZXIsXG4gICAgICAgICAgbnVsbCxcbiAgICAgICAgICBwYXJlbnRDb21wb25lbnQsXG4gICAgICAgICAgcGFyZW50U3VzcGVuc2UsXG4gICAgICAgICAgZ2V0Q29udGFpbmVyVHlwZShjb250YWluZXIpLFxuICAgICAgICAgIHNsb3RTY29wZUlkc1xuICAgICAgICApO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbm9kZTtcbiAgfTtcbiAgY29uc3QgaHlkcmF0ZUZyYWdtZW50ID0gKG5vZGUsIHZub2RlLCBwYXJlbnRDb21wb25lbnQsIHBhcmVudFN1c3BlbnNlLCBzbG90U2NvcGVJZHMsIG9wdGltaXplZCkgPT4ge1xuICAgIGNvbnN0IHsgc2xvdFNjb3BlSWRzOiBmcmFnbWVudFNsb3RTY29wZUlkcyB9ID0gdm5vZGU7XG4gICAgaWYgKGZyYWdtZW50U2xvdFNjb3BlSWRzKSB7XG4gICAgICBzbG90U2NvcGVJZHMgPSBzbG90U2NvcGVJZHMgPyBzbG90U2NvcGVJZHMuY29uY2F0KGZyYWdtZW50U2xvdFNjb3BlSWRzKSA6IGZyYWdtZW50U2xvdFNjb3BlSWRzO1xuICAgIH1cbiAgICBjb25zdCBjb250YWluZXIgPSBwYXJlbnROb2RlKG5vZGUpO1xuICAgIGNvbnN0IG5leHQgPSBoeWRyYXRlQ2hpbGRyZW4oXG4gICAgICBuZXh0U2libGluZyhub2RlKSxcbiAgICAgIHZub2RlLFxuICAgICAgY29udGFpbmVyLFxuICAgICAgcGFyZW50Q29tcG9uZW50LFxuICAgICAgcGFyZW50U3VzcGVuc2UsXG4gICAgICBzbG90U2NvcGVJZHMsXG4gICAgICBvcHRpbWl6ZWRcbiAgICApO1xuICAgIGlmIChuZXh0ICYmIGlzQ29tbWVudChuZXh0KSAmJiBuZXh0LmRhdGEgPT09IFwiXVwiKSB7XG4gICAgICByZXR1cm4gbmV4dFNpYmxpbmcodm5vZGUuYW5jaG9yID0gbmV4dCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGhhc01pc21hdGNoID0gdHJ1ZTtcbiAgICAgIGluc2VydCh2bm9kZS5hbmNob3IgPSBjcmVhdGVDb21tZW50KGBdYCksIGNvbnRhaW5lciwgbmV4dCk7XG4gICAgICByZXR1cm4gbmV4dDtcbiAgICB9XG4gIH07XG4gIGNvbnN0IGhhbmRsZU1pc21hdGNoID0gKG5vZGUsIHZub2RlLCBwYXJlbnRDb21wb25lbnQsIHBhcmVudFN1c3BlbnNlLCBzbG90U2NvcGVJZHMsIGlzRnJhZ21lbnQpID0+IHtcbiAgICBoYXNNaXNtYXRjaCA9IHRydWU7XG4gICAgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgfHwgX19WVUVfUFJPRF9IWURSQVRJT05fTUlTTUFUQ0hfREVUQUlMU19fKSAmJiB3YXJuJDEoXG4gICAgICBgSHlkcmF0aW9uIG5vZGUgbWlzbWF0Y2g6XG4tIHJlbmRlcmVkIG9uIHNlcnZlcjpgLFxuICAgICAgbm9kZSxcbiAgICAgIG5vZGUubm9kZVR5cGUgPT09IDMgLyogVEVYVCAqLyA/IGAodGV4dClgIDogaXNDb21tZW50KG5vZGUpICYmIG5vZGUuZGF0YSA9PT0gXCJbXCIgPyBgKHN0YXJ0IG9mIGZyYWdtZW50KWAgOiBgYCxcbiAgICAgIGBcbi0gZXhwZWN0ZWQgb24gY2xpZW50OmAsXG4gICAgICB2bm9kZS50eXBlXG4gICAgKTtcbiAgICB2bm9kZS5lbCA9IG51bGw7XG4gICAgaWYgKGlzRnJhZ21lbnQpIHtcbiAgICAgIGNvbnN0IGVuZCA9IGxvY2F0ZUNsb3NpbmdBbmNob3Iobm9kZSk7XG4gICAgICB3aGlsZSAodHJ1ZSkge1xuICAgICAgICBjb25zdCBuZXh0MiA9IG5leHRTaWJsaW5nKG5vZGUpO1xuICAgICAgICBpZiAobmV4dDIgJiYgbmV4dDIgIT09IGVuZCkge1xuICAgICAgICAgIHJlbW92ZShuZXh0Mik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgY29uc3QgbmV4dCA9IG5leHRTaWJsaW5nKG5vZGUpO1xuICAgIGNvbnN0IGNvbnRhaW5lciA9IHBhcmVudE5vZGUobm9kZSk7XG4gICAgcmVtb3ZlKG5vZGUpO1xuICAgIHBhdGNoKFxuICAgICAgbnVsbCxcbiAgICAgIHZub2RlLFxuICAgICAgY29udGFpbmVyLFxuICAgICAgbmV4dCxcbiAgICAgIHBhcmVudENvbXBvbmVudCxcbiAgICAgIHBhcmVudFN1c3BlbnNlLFxuICAgICAgZ2V0Q29udGFpbmVyVHlwZShjb250YWluZXIpLFxuICAgICAgc2xvdFNjb3BlSWRzXG4gICAgKTtcbiAgICByZXR1cm4gbmV4dDtcbiAgfTtcbiAgY29uc3QgbG9jYXRlQ2xvc2luZ0FuY2hvciA9IChub2RlLCBvcGVuID0gXCJbXCIsIGNsb3NlID0gXCJdXCIpID0+IHtcbiAgICBsZXQgbWF0Y2ggPSAwO1xuICAgIHdoaWxlIChub2RlKSB7XG4gICAgICBub2RlID0gbmV4dFNpYmxpbmcobm9kZSk7XG4gICAgICBpZiAobm9kZSAmJiBpc0NvbW1lbnQobm9kZSkpIHtcbiAgICAgICAgaWYgKG5vZGUuZGF0YSA9PT0gb3BlbilcbiAgICAgICAgICBtYXRjaCsrO1xuICAgICAgICBpZiAobm9kZS5kYXRhID09PSBjbG9zZSkge1xuICAgICAgICAgIGlmIChtYXRjaCA9PT0gMCkge1xuICAgICAgICAgICAgcmV0dXJuIG5leHRTaWJsaW5nKG5vZGUpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBtYXRjaC0tO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbm9kZTtcbiAgfTtcbiAgY29uc3QgcmVwbGFjZU5vZGUgPSAobmV3Tm9kZSwgb2xkTm9kZSwgcGFyZW50Q29tcG9uZW50KSA9PiB7XG4gICAgY29uc3QgcGFyZW50Tm9kZTIgPSBvbGROb2RlLnBhcmVudE5vZGU7XG4gICAgaWYgKHBhcmVudE5vZGUyKSB7XG4gICAgICBwYXJlbnROb2RlMi5yZXBsYWNlQ2hpbGQobmV3Tm9kZSwgb2xkTm9kZSk7XG4gICAgfVxuICAgIGxldCBwYXJlbnQgPSBwYXJlbnRDb21wb25lbnQ7XG4gICAgd2hpbGUgKHBhcmVudCkge1xuICAgICAgaWYgKHBhcmVudC52bm9kZS5lbCA9PT0gb2xkTm9kZSkge1xuICAgICAgICBwYXJlbnQudm5vZGUuZWwgPSBwYXJlbnQuc3ViVHJlZS5lbCA9IG5ld05vZGU7XG4gICAgICB9XG4gICAgICBwYXJlbnQgPSBwYXJlbnQucGFyZW50O1xuICAgIH1cbiAgfTtcbiAgY29uc3QgaXNUZW1wbGF0ZU5vZGUgPSAobm9kZSkgPT4ge1xuICAgIHJldHVybiBub2RlLm5vZGVUeXBlID09PSAxIC8qIEVMRU1FTlQgKi8gJiYgbm9kZS50YWdOYW1lLnRvTG93ZXJDYXNlKCkgPT09IFwidGVtcGxhdGVcIjtcbiAgfTtcbiAgcmV0dXJuIFtoeWRyYXRlLCBoeWRyYXRlTm9kZV07XG59XG5mdW5jdGlvbiBwcm9wSGFzTWlzbWF0Y2goZWwsIGtleSwgY2xpZW50VmFsdWUsIHZub2RlLCBpbnN0YW5jZSkge1xuICB2YXIgX2E7XG4gIGxldCBtaXNtYXRjaFR5cGU7XG4gIGxldCBtaXNtYXRjaEtleTtcbiAgbGV0IGFjdHVhbDtcbiAgbGV0IGV4cGVjdGVkO1xuICBpZiAoa2V5ID09PSBcImNsYXNzXCIpIHtcbiAgICBhY3R1YWwgPSBlbC5nZXRBdHRyaWJ1dGUoXCJjbGFzc1wiKTtcbiAgICBleHBlY3RlZCA9IG5vcm1hbGl6ZUNsYXNzKGNsaWVudFZhbHVlKTtcbiAgICBpZiAoIWlzU2V0RXF1YWwodG9DbGFzc1NldChhY3R1YWwgfHwgXCJcIiksIHRvQ2xhc3NTZXQoZXhwZWN0ZWQpKSkge1xuICAgICAgbWlzbWF0Y2hUeXBlID0gbWlzbWF0Y2hLZXkgPSBgY2xhc3NgO1xuICAgIH1cbiAgfSBlbHNlIGlmIChrZXkgPT09IFwic3R5bGVcIikge1xuICAgIGFjdHVhbCA9IGVsLmdldEF0dHJpYnV0ZShcInN0eWxlXCIpO1xuICAgIGV4cGVjdGVkID0gaXNTdHJpbmcoY2xpZW50VmFsdWUpID8gY2xpZW50VmFsdWUgOiBzdHJpbmdpZnlTdHlsZShub3JtYWxpemVTdHlsZShjbGllbnRWYWx1ZSkpO1xuICAgIGNvbnN0IGFjdHVhbE1hcCA9IHRvU3R5bGVNYXAoYWN0dWFsKTtcbiAgICBjb25zdCBleHBlY3RlZE1hcCA9IHRvU3R5bGVNYXAoZXhwZWN0ZWQpO1xuICAgIGlmICh2bm9kZS5kaXJzKSB7XG4gICAgICBmb3IgKGNvbnN0IHsgZGlyLCB2YWx1ZSB9IG9mIHZub2RlLmRpcnMpIHtcbiAgICAgICAgaWYgKGRpci5uYW1lID09PSBcInNob3dcIiAmJiAhdmFsdWUpIHtcbiAgICAgICAgICBleHBlY3RlZE1hcC5zZXQoXCJkaXNwbGF5XCIsIFwibm9uZVwiKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBjb25zdCByb290ID0gaW5zdGFuY2UgPT0gbnVsbCA/IHZvaWQgMCA6IGluc3RhbmNlLnN1YlRyZWU7XG4gICAgaWYgKHZub2RlID09PSByb290IHx8IChyb290ID09IG51bGwgPyB2b2lkIDAgOiByb290LnR5cGUpID09PSBGcmFnbWVudCAmJiByb290LmNoaWxkcmVuLmluY2x1ZGVzKHZub2RlKSkge1xuICAgICAgY29uc3QgY3NzVmFycyA9IChfYSA9IGluc3RhbmNlID09IG51bGwgPyB2b2lkIDAgOiBpbnN0YW5jZS5nZXRDc3NWYXJzKSA9PSBudWxsID8gdm9pZCAwIDogX2EuY2FsbChpbnN0YW5jZSk7XG4gICAgICBmb3IgKGNvbnN0IGtleTIgaW4gY3NzVmFycykge1xuICAgICAgICBleHBlY3RlZE1hcC5zZXQoYC0tJHtrZXkyfWAsIFN0cmluZyhjc3NWYXJzW2tleTJdKSk7XG4gICAgICB9XG4gICAgfVxuICAgIGlmICghaXNNYXBFcXVhbChhY3R1YWxNYXAsIGV4cGVjdGVkTWFwKSkge1xuICAgICAgbWlzbWF0Y2hUeXBlID0gbWlzbWF0Y2hLZXkgPSBcInN0eWxlXCI7XG4gICAgfVxuICB9IGVsc2UgaWYgKGVsIGluc3RhbmNlb2YgU1ZHRWxlbWVudCAmJiBpc0tub3duU3ZnQXR0cihrZXkpIHx8IGVsIGluc3RhbmNlb2YgSFRNTEVsZW1lbnQgJiYgKGlzQm9vbGVhbkF0dHIoa2V5KSB8fCBpc0tub3duSHRtbEF0dHIoa2V5KSkpIHtcbiAgICBpZiAoaXNCb29sZWFuQXR0cihrZXkpKSB7XG4gICAgICBhY3R1YWwgPSBlbC5oYXNBdHRyaWJ1dGUoa2V5KTtcbiAgICAgIGV4cGVjdGVkID0gaW5jbHVkZUJvb2xlYW5BdHRyKGNsaWVudFZhbHVlKTtcbiAgICB9IGVsc2UgaWYgKGNsaWVudFZhbHVlID09IG51bGwpIHtcbiAgICAgIGFjdHVhbCA9IGVsLmhhc0F0dHJpYnV0ZShrZXkpO1xuICAgICAgZXhwZWN0ZWQgPSBmYWxzZTtcbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKGVsLmhhc0F0dHJpYnV0ZShrZXkpKSB7XG4gICAgICAgIGFjdHVhbCA9IGVsLmdldEF0dHJpYnV0ZShrZXkpO1xuICAgICAgfSBlbHNlIGlmIChrZXkgPT09IFwidmFsdWVcIiAmJiBlbC50YWdOYW1lID09PSBcIlRFWFRBUkVBXCIpIHtcbiAgICAgICAgYWN0dWFsID0gZWwudmFsdWU7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBhY3R1YWwgPSBmYWxzZTtcbiAgICAgIH1cbiAgICAgIGV4cGVjdGVkID0gaXNSZW5kZXJhYmxlQXR0clZhbHVlKGNsaWVudFZhbHVlKSA/IFN0cmluZyhjbGllbnRWYWx1ZSkgOiBmYWxzZTtcbiAgICB9XG4gICAgaWYgKGFjdHVhbCAhPT0gZXhwZWN0ZWQpIHtcbiAgICAgIG1pc21hdGNoVHlwZSA9IGBhdHRyaWJ1dGVgO1xuICAgICAgbWlzbWF0Y2hLZXkgPSBrZXk7XG4gICAgfVxuICB9XG4gIGlmIChtaXNtYXRjaFR5cGUpIHtcbiAgICBjb25zdCBmb3JtYXQgPSAodikgPT4gdiA9PT0gZmFsc2UgPyBgKG5vdCByZW5kZXJlZClgIDogYCR7bWlzbWF0Y2hLZXl9PVwiJHt2fVwiYDtcbiAgICBjb25zdCBwcmVTZWdtZW50ID0gYEh5ZHJhdGlvbiAke21pc21hdGNoVHlwZX0gbWlzbWF0Y2ggb25gO1xuICAgIGNvbnN0IHBvc3RTZWdtZW50ID0gYFxuICAtIHJlbmRlcmVkIG9uIHNlcnZlcjogJHtmb3JtYXQoYWN0dWFsKX1cbiAgLSBleHBlY3RlZCBvbiBjbGllbnQ6ICR7Zm9ybWF0KGV4cGVjdGVkKX1cbiAgTm90ZTogdGhpcyBtaXNtYXRjaCBpcyBjaGVjay1vbmx5LiBUaGUgRE9NIHdpbGwgbm90IGJlIHJlY3RpZmllZCBpbiBwcm9kdWN0aW9uIGR1ZSB0byBwZXJmb3JtYW5jZSBvdmVyaGVhZC5cbiAgWW91IHNob3VsZCBmaXggdGhlIHNvdXJjZSBvZiB0aGUgbWlzbWF0Y2guYDtcbiAgICB7XG4gICAgICB3YXJuJDEocHJlU2VnbWVudCwgZWwsIHBvc3RTZWdtZW50KTtcbiAgICB9XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbiAgcmV0dXJuIGZhbHNlO1xufVxuZnVuY3Rpb24gdG9DbGFzc1NldChzdHIpIHtcbiAgcmV0dXJuIG5ldyBTZXQoc3RyLnRyaW0oKS5zcGxpdCgvXFxzKy8pKTtcbn1cbmZ1bmN0aW9uIGlzU2V0RXF1YWwoYSwgYikge1xuICBpZiAoYS5zaXplICE9PSBiLnNpemUpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgZm9yIChjb25zdCBzIG9mIGEpIHtcbiAgICBpZiAoIWIuaGFzKHMpKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9XG4gIHJldHVybiB0cnVlO1xufVxuZnVuY3Rpb24gdG9TdHlsZU1hcChzdHIpIHtcbiAgY29uc3Qgc3R5bGVNYXAgPSAvKiBAX19QVVJFX18gKi8gbmV3IE1hcCgpO1xuICBmb3IgKGNvbnN0IGl0ZW0gb2Ygc3RyLnNwbGl0KFwiO1wiKSkge1xuICAgIGxldCBba2V5LCB2YWx1ZV0gPSBpdGVtLnNwbGl0KFwiOlwiKTtcbiAgICBrZXkgPSBrZXkgPT0gbnVsbCA/IHZvaWQgMCA6IGtleS50cmltKCk7XG4gICAgdmFsdWUgPSB2YWx1ZSA9PSBudWxsID8gdm9pZCAwIDogdmFsdWUudHJpbSgpO1xuICAgIGlmIChrZXkgJiYgdmFsdWUpIHtcbiAgICAgIHN0eWxlTWFwLnNldChrZXksIHZhbHVlKTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHN0eWxlTWFwO1xufVxuZnVuY3Rpb24gaXNNYXBFcXVhbChhLCBiKSB7XG4gIGlmIChhLnNpemUgIT09IGIuc2l6ZSkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBhKSB7XG4gICAgaWYgKHZhbHVlICE9PSBiLmdldChrZXkpKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9XG4gIHJldHVybiB0cnVlO1xufVxuXG5sZXQgc3VwcG9ydGVkO1xubGV0IHBlcmY7XG5mdW5jdGlvbiBzdGFydE1lYXN1cmUoaW5zdGFuY2UsIHR5cGUpIHtcbiAgaWYgKGluc3RhbmNlLmFwcENvbnRleHQuY29uZmlnLnBlcmZvcm1hbmNlICYmIGlzU3VwcG9ydGVkKCkpIHtcbiAgICBwZXJmLm1hcmsoYHZ1ZS0ke3R5cGV9LSR7aW5zdGFuY2UudWlkfWApO1xuICB9XG4gIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpIHx8IF9fVlVFX1BST0RfREVWVE9PTFNfXykge1xuICAgIGRldnRvb2xzUGVyZlN0YXJ0KGluc3RhbmNlLCB0eXBlLCBpc1N1cHBvcnRlZCgpID8gcGVyZi5ub3coKSA6IERhdGUubm93KCkpO1xuICB9XG59XG5mdW5jdGlvbiBlbmRNZWFzdXJlKGluc3RhbmNlLCB0eXBlKSB7XG4gIGlmIChpbnN0YW5jZS5hcHBDb250ZXh0LmNvbmZpZy5wZXJmb3JtYW5jZSAmJiBpc1N1cHBvcnRlZCgpKSB7XG4gICAgY29uc3Qgc3RhcnRUYWcgPSBgdnVlLSR7dHlwZX0tJHtpbnN0YW5jZS51aWR9YDtcbiAgICBjb25zdCBlbmRUYWcgPSBzdGFydFRhZyArIGA6ZW5kYDtcbiAgICBwZXJmLm1hcmsoZW5kVGFnKTtcbiAgICBwZXJmLm1lYXN1cmUoXG4gICAgICBgPCR7Zm9ybWF0Q29tcG9uZW50TmFtZShpbnN0YW5jZSwgaW5zdGFuY2UudHlwZSl9PiAke3R5cGV9YCxcbiAgICAgIHN0YXJ0VGFnLFxuICAgICAgZW5kVGFnXG4gICAgKTtcbiAgICBwZXJmLmNsZWFyTWFya3Moc3RhcnRUYWcpO1xuICAgIHBlcmYuY2xlYXJNYXJrcyhlbmRUYWcpO1xuICB9XG4gIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpIHx8IF9fVlVFX1BST0RfREVWVE9PTFNfXykge1xuICAgIGRldnRvb2xzUGVyZkVuZChpbnN0YW5jZSwgdHlwZSwgaXNTdXBwb3J0ZWQoKSA/IHBlcmYubm93KCkgOiBEYXRlLm5vdygpKTtcbiAgfVxufVxuZnVuY3Rpb24gaXNTdXBwb3J0ZWQoKSB7XG4gIGlmIChzdXBwb3J0ZWQgIT09IHZvaWQgMCkge1xuICAgIHJldHVybiBzdXBwb3J0ZWQ7XG4gIH1cbiAgaWYgKHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCIgJiYgd2luZG93LnBlcmZvcm1hbmNlKSB7XG4gICAgc3VwcG9ydGVkID0gdHJ1ZTtcbiAgICBwZXJmID0gd2luZG93LnBlcmZvcm1hbmNlO1xuICB9IGVsc2Uge1xuICAgIHN1cHBvcnRlZCA9IGZhbHNlO1xuICB9XG4gIHJldHVybiBzdXBwb3J0ZWQ7XG59XG5cbmZ1bmN0aW9uIGluaXRGZWF0dXJlRmxhZ3MoKSB7XG4gIGNvbnN0IG5lZWRXYXJuID0gW107XG4gIGlmICh0eXBlb2YgX19WVUVfT1BUSU9OU19BUElfXyAhPT0gXCJib29sZWFuXCIpIHtcbiAgICAhIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpICYmIG5lZWRXYXJuLnB1c2goYF9fVlVFX09QVElPTlNfQVBJX19gKTtcbiAgICBnZXRHbG9iYWxUaGlzKCkuX19WVUVfT1BUSU9OU19BUElfXyA9IHRydWU7XG4gIH1cbiAgaWYgKHR5cGVvZiBfX1ZVRV9QUk9EX0RFVlRPT0xTX18gIT09IFwiYm9vbGVhblwiKSB7XG4gICAgISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSAmJiBuZWVkV2Fybi5wdXNoKGBfX1ZVRV9QUk9EX0RFVlRPT0xTX19gKTtcbiAgICBnZXRHbG9iYWxUaGlzKCkuX19WVUVfUFJPRF9ERVZUT09MU19fID0gZmFsc2U7XG4gIH1cbiAgaWYgKHR5cGVvZiBfX1ZVRV9QUk9EX0hZRFJBVElPTl9NSVNNQVRDSF9ERVRBSUxTX18gIT09IFwiYm9vbGVhblwiKSB7XG4gICAgISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSAmJiBuZWVkV2Fybi5wdXNoKGBfX1ZVRV9QUk9EX0hZRFJBVElPTl9NSVNNQVRDSF9ERVRBSUxTX19gKTtcbiAgICBnZXRHbG9iYWxUaGlzKCkuX19WVUVfUFJPRF9IWURSQVRJT05fTUlTTUFUQ0hfREVUQUlMU19fID0gZmFsc2U7XG4gIH1cbiAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgJiYgbmVlZFdhcm4ubGVuZ3RoKSB7XG4gICAgY29uc3QgbXVsdGkgPSBuZWVkV2Fybi5sZW5ndGggPiAxO1xuICAgIGNvbnNvbGUud2FybihcbiAgICAgIGBGZWF0dXJlIGZsYWcke211bHRpID8gYHNgIDogYGB9ICR7bmVlZFdhcm4uam9pbihcIiwgXCIpfSAke211bHRpID8gYGFyZWAgOiBgaXNgfSBub3QgZXhwbGljaXRseSBkZWZpbmVkLiBZb3UgYXJlIHJ1bm5pbmcgdGhlIGVzbS1idW5kbGVyIGJ1aWxkIG9mIFZ1ZSwgd2hpY2ggZXhwZWN0cyB0aGVzZSBjb21waWxlLXRpbWUgZmVhdHVyZSBmbGFncyB0byBiZSBnbG9iYWxseSBpbmplY3RlZCB2aWEgdGhlIGJ1bmRsZXIgY29uZmlnIGluIG9yZGVyIHRvIGdldCBiZXR0ZXIgdHJlZS1zaGFraW5nIGluIHRoZSBwcm9kdWN0aW9uIGJ1bmRsZS5cblxuRm9yIG1vcmUgZGV0YWlscywgc2VlIGh0dHBzOi8vbGluay52dWVqcy5vcmcvZmVhdHVyZS1mbGFncy5gXG4gICAgKTtcbiAgfVxufVxuXG5jb25zdCBxdWV1ZVBvc3RSZW5kZXJFZmZlY3QgPSBxdWV1ZUVmZmVjdFdpdGhTdXNwZW5zZSA7XG5mdW5jdGlvbiBjcmVhdGVSZW5kZXJlcihvcHRpb25zKSB7XG4gIHJldHVybiBiYXNlQ3JlYXRlUmVuZGVyZXIob3B0aW9ucyk7XG59XG5mdW5jdGlvbiBjcmVhdGVIeWRyYXRpb25SZW5kZXJlcihvcHRpb25zKSB7XG4gIHJldHVybiBiYXNlQ3JlYXRlUmVuZGVyZXIob3B0aW9ucywgY3JlYXRlSHlkcmF0aW9uRnVuY3Rpb25zKTtcbn1cbmZ1bmN0aW9uIGJhc2VDcmVhdGVSZW5kZXJlcihvcHRpb25zLCBjcmVhdGVIeWRyYXRpb25GbnMpIHtcbiAge1xuICAgIGluaXRGZWF0dXJlRmxhZ3MoKTtcbiAgfVxuICBjb25zdCB0YXJnZXQgPSBnZXRHbG9iYWxUaGlzKCk7XG4gIHRhcmdldC5fX1ZVRV9fID0gdHJ1ZTtcbiAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgfHwgX19WVUVfUFJPRF9ERVZUT09MU19fKSB7XG4gICAgc2V0RGV2dG9vbHNIb29rJDEodGFyZ2V0Ll9fVlVFX0RFVlRPT0xTX0dMT0JBTF9IT09LX18sIHRhcmdldCk7XG4gIH1cbiAgY29uc3Qge1xuICAgIGluc2VydDogaG9zdEluc2VydCxcbiAgICByZW1vdmU6IGhvc3RSZW1vdmUsXG4gICAgcGF0Y2hQcm9wOiBob3N0UGF0Y2hQcm9wLFxuICAgIGNyZWF0ZUVsZW1lbnQ6IGhvc3RDcmVhdGVFbGVtZW50LFxuICAgIGNyZWF0ZVRleHQ6IGhvc3RDcmVhdGVUZXh0LFxuICAgIGNyZWF0ZUNvbW1lbnQ6IGhvc3RDcmVhdGVDb21tZW50LFxuICAgIHNldFRleHQ6IGhvc3RTZXRUZXh0LFxuICAgIHNldEVsZW1lbnRUZXh0OiBob3N0U2V0RWxlbWVudFRleHQsXG4gICAgcGFyZW50Tm9kZTogaG9zdFBhcmVudE5vZGUsXG4gICAgbmV4dFNpYmxpbmc6IGhvc3ROZXh0U2libGluZyxcbiAgICBzZXRTY29wZUlkOiBob3N0U2V0U2NvcGVJZCA9IE5PT1AsXG4gICAgaW5zZXJ0U3RhdGljQ29udGVudDogaG9zdEluc2VydFN0YXRpY0NvbnRlbnRcbiAgfSA9IG9wdGlvbnM7XG4gIGNvbnN0IHBhdGNoID0gKG4xLCBuMiwgY29udGFpbmVyLCBhbmNob3IgPSBudWxsLCBwYXJlbnRDb21wb25lbnQgPSBudWxsLCBwYXJlbnRTdXNwZW5zZSA9IG51bGwsIG5hbWVzcGFjZSA9IHZvaWQgMCwgc2xvdFNjb3BlSWRzID0gbnVsbCwgb3B0aW1pemVkID0gISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSAmJiBpc0htclVwZGF0aW5nID8gZmFsc2UgOiAhIW4yLmR5bmFtaWNDaGlsZHJlbikgPT4ge1xuICAgIGlmIChuMSA9PT0gbjIpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKG4xICYmICFpc1NhbWVWTm9kZVR5cGUobjEsIG4yKSkge1xuICAgICAgYW5jaG9yID0gZ2V0TmV4dEhvc3ROb2RlKG4xKTtcbiAgICAgIHVubW91bnQobjEsIHBhcmVudENvbXBvbmVudCwgcGFyZW50U3VzcGVuc2UsIHRydWUpO1xuICAgICAgbjEgPSBudWxsO1xuICAgIH1cbiAgICBpZiAobjIucGF0Y2hGbGFnID09PSAtMikge1xuICAgICAgb3B0aW1pemVkID0gZmFsc2U7XG4gICAgICBuMi5keW5hbWljQ2hpbGRyZW4gPSBudWxsO1xuICAgIH1cbiAgICBjb25zdCB7IHR5cGUsIHJlZiwgc2hhcGVGbGFnIH0gPSBuMjtcbiAgICBzd2l0Y2ggKHR5cGUpIHtcbiAgICAgIGNhc2UgVGV4dDpcbiAgICAgICAgcHJvY2Vzc1RleHQobjEsIG4yLCBjb250YWluZXIsIGFuY2hvcik7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBDb21tZW50OlxuICAgICAgICBwcm9jZXNzQ29tbWVudE5vZGUobjEsIG4yLCBjb250YWluZXIsIGFuY2hvcik7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBTdGF0aWM6XG4gICAgICAgIGlmIChuMSA9PSBudWxsKSB7XG4gICAgICAgICAgbW91bnRTdGF0aWNOb2RlKG4yLCBjb250YWluZXIsIGFuY2hvciwgbmFtZXNwYWNlKTtcbiAgICAgICAgfSBlbHNlIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpKSB7XG4gICAgICAgICAgcGF0Y2hTdGF0aWNOb2RlKG4xLCBuMiwgY29udGFpbmVyLCBuYW1lc3BhY2UpO1xuICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBGcmFnbWVudDpcbiAgICAgICAgcHJvY2Vzc0ZyYWdtZW50KFxuICAgICAgICAgIG4xLFxuICAgICAgICAgIG4yLFxuICAgICAgICAgIGNvbnRhaW5lcixcbiAgICAgICAgICBhbmNob3IsXG4gICAgICAgICAgcGFyZW50Q29tcG9uZW50LFxuICAgICAgICAgIHBhcmVudFN1c3BlbnNlLFxuICAgICAgICAgIG5hbWVzcGFjZSxcbiAgICAgICAgICBzbG90U2NvcGVJZHMsXG4gICAgICAgICAgb3B0aW1pemVkXG4gICAgICAgICk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgaWYgKHNoYXBlRmxhZyAmIDEpIHtcbiAgICAgICAgICBwcm9jZXNzRWxlbWVudChcbiAgICAgICAgICAgIG4xLFxuICAgICAgICAgICAgbjIsXG4gICAgICAgICAgICBjb250YWluZXIsXG4gICAgICAgICAgICBhbmNob3IsXG4gICAgICAgICAgICBwYXJlbnRDb21wb25lbnQsXG4gICAgICAgICAgICBwYXJlbnRTdXNwZW5zZSxcbiAgICAgICAgICAgIG5hbWVzcGFjZSxcbiAgICAgICAgICAgIHNsb3RTY29wZUlkcyxcbiAgICAgICAgICAgIG9wdGltaXplZFxuICAgICAgICAgICk7XG4gICAgICAgIH0gZWxzZSBpZiAoc2hhcGVGbGFnICYgNikge1xuICAgICAgICAgIHByb2Nlc3NDb21wb25lbnQoXG4gICAgICAgICAgICBuMSxcbiAgICAgICAgICAgIG4yLFxuICAgICAgICAgICAgY29udGFpbmVyLFxuICAgICAgICAgICAgYW5jaG9yLFxuICAgICAgICAgICAgcGFyZW50Q29tcG9uZW50LFxuICAgICAgICAgICAgcGFyZW50U3VzcGVuc2UsXG4gICAgICAgICAgICBuYW1lc3BhY2UsXG4gICAgICAgICAgICBzbG90U2NvcGVJZHMsXG4gICAgICAgICAgICBvcHRpbWl6ZWRcbiAgICAgICAgICApO1xuICAgICAgICB9IGVsc2UgaWYgKHNoYXBlRmxhZyAmIDY0KSB7XG4gICAgICAgICAgdHlwZS5wcm9jZXNzKFxuICAgICAgICAgICAgbjEsXG4gICAgICAgICAgICBuMixcbiAgICAgICAgICAgIGNvbnRhaW5lcixcbiAgICAgICAgICAgIGFuY2hvcixcbiAgICAgICAgICAgIHBhcmVudENvbXBvbmVudCxcbiAgICAgICAgICAgIHBhcmVudFN1c3BlbnNlLFxuICAgICAgICAgICAgbmFtZXNwYWNlLFxuICAgICAgICAgICAgc2xvdFNjb3BlSWRzLFxuICAgICAgICAgICAgb3B0aW1pemVkLFxuICAgICAgICAgICAgaW50ZXJuYWxzXG4gICAgICAgICAgKTtcbiAgICAgICAgfSBlbHNlIGlmIChzaGFwZUZsYWcgJiAxMjgpIHtcbiAgICAgICAgICB0eXBlLnByb2Nlc3MoXG4gICAgICAgICAgICBuMSxcbiAgICAgICAgICAgIG4yLFxuICAgICAgICAgICAgY29udGFpbmVyLFxuICAgICAgICAgICAgYW5jaG9yLFxuICAgICAgICAgICAgcGFyZW50Q29tcG9uZW50LFxuICAgICAgICAgICAgcGFyZW50U3VzcGVuc2UsXG4gICAgICAgICAgICBuYW1lc3BhY2UsXG4gICAgICAgICAgICBzbG90U2NvcGVJZHMsXG4gICAgICAgICAgICBvcHRpbWl6ZWQsXG4gICAgICAgICAgICBpbnRlcm5hbHNcbiAgICAgICAgICApO1xuICAgICAgICB9IGVsc2UgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikpIHtcbiAgICAgICAgICB3YXJuJDEoXCJJbnZhbGlkIFZOb2RlIHR5cGU6XCIsIHR5cGUsIGAoJHt0eXBlb2YgdHlwZX0pYCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaWYgKHJlZiAhPSBudWxsICYmIHBhcmVudENvbXBvbmVudCkge1xuICAgICAgc2V0UmVmKHJlZiwgbjEgJiYgbjEucmVmLCBwYXJlbnRTdXNwZW5zZSwgbjIgfHwgbjEsICFuMik7XG4gICAgfVxuICB9O1xuICBjb25zdCBwcm9jZXNzVGV4dCA9IChuMSwgbjIsIGNvbnRhaW5lciwgYW5jaG9yKSA9PiB7XG4gICAgaWYgKG4xID09IG51bGwpIHtcbiAgICAgIGhvc3RJbnNlcnQoXG4gICAgICAgIG4yLmVsID0gaG9zdENyZWF0ZVRleHQobjIuY2hpbGRyZW4pLFxuICAgICAgICBjb250YWluZXIsXG4gICAgICAgIGFuY2hvclxuICAgICAgKTtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgZWwgPSBuMi5lbCA9IG4xLmVsO1xuICAgICAgaWYgKG4yLmNoaWxkcmVuICE9PSBuMS5jaGlsZHJlbikge1xuICAgICAgICBob3N0U2V0VGV4dChlbCwgbjIuY2hpbGRyZW4pO1xuICAgICAgfVxuICAgIH1cbiAgfTtcbiAgY29uc3QgcHJvY2Vzc0NvbW1lbnROb2RlID0gKG4xLCBuMiwgY29udGFpbmVyLCBhbmNob3IpID0+IHtcbiAgICBpZiAobjEgPT0gbnVsbCkge1xuICAgICAgaG9zdEluc2VydChcbiAgICAgICAgbjIuZWwgPSBob3N0Q3JlYXRlQ29tbWVudChuMi5jaGlsZHJlbiB8fCBcIlwiKSxcbiAgICAgICAgY29udGFpbmVyLFxuICAgICAgICBhbmNob3JcbiAgICAgICk7XG4gICAgfSBlbHNlIHtcbiAgICAgIG4yLmVsID0gbjEuZWw7XG4gICAgfVxuICB9O1xuICBjb25zdCBtb3VudFN0YXRpY05vZGUgPSAobjIsIGNvbnRhaW5lciwgYW5jaG9yLCBuYW1lc3BhY2UpID0+IHtcbiAgICBbbjIuZWwsIG4yLmFuY2hvcl0gPSBob3N0SW5zZXJ0U3RhdGljQ29udGVudChcbiAgICAgIG4yLmNoaWxkcmVuLFxuICAgICAgY29udGFpbmVyLFxuICAgICAgYW5jaG9yLFxuICAgICAgbmFtZXNwYWNlLFxuICAgICAgbjIuZWwsXG4gICAgICBuMi5hbmNob3JcbiAgICApO1xuICB9O1xuICBjb25zdCBwYXRjaFN0YXRpY05vZGUgPSAobjEsIG4yLCBjb250YWluZXIsIG5hbWVzcGFjZSkgPT4ge1xuICAgIGlmIChuMi5jaGlsZHJlbiAhPT0gbjEuY2hpbGRyZW4pIHtcbiAgICAgIGNvbnN0IGFuY2hvciA9IGhvc3ROZXh0U2libGluZyhuMS5hbmNob3IpO1xuICAgICAgcmVtb3ZlU3RhdGljTm9kZShuMSk7XG4gICAgICBbbjIuZWwsIG4yLmFuY2hvcl0gPSBob3N0SW5zZXJ0U3RhdGljQ29udGVudChcbiAgICAgICAgbjIuY2hpbGRyZW4sXG4gICAgICAgIGNvbnRhaW5lcixcbiAgICAgICAgYW5jaG9yLFxuICAgICAgICBuYW1lc3BhY2VcbiAgICAgICk7XG4gICAgfSBlbHNlIHtcbiAgICAgIG4yLmVsID0gbjEuZWw7XG4gICAgICBuMi5hbmNob3IgPSBuMS5hbmNob3I7XG4gICAgfVxuICB9O1xuICBjb25zdCBtb3ZlU3RhdGljTm9kZSA9ICh7IGVsLCBhbmNob3IgfSwgY29udGFpbmVyLCBuZXh0U2libGluZykgPT4ge1xuICAgIGxldCBuZXh0O1xuICAgIHdoaWxlIChlbCAmJiBlbCAhPT0gYW5jaG9yKSB7XG4gICAgICBuZXh0ID0gaG9zdE5leHRTaWJsaW5nKGVsKTtcbiAgICAgIGhvc3RJbnNlcnQoZWwsIGNvbnRhaW5lciwgbmV4dFNpYmxpbmcpO1xuICAgICAgZWwgPSBuZXh0O1xuICAgIH1cbiAgICBob3N0SW5zZXJ0KGFuY2hvciwgY29udGFpbmVyLCBuZXh0U2libGluZyk7XG4gIH07XG4gIGNvbnN0IHJlbW92ZVN0YXRpY05vZGUgPSAoeyBlbCwgYW5jaG9yIH0pID0+IHtcbiAgICBsZXQgbmV4dDtcbiAgICB3aGlsZSAoZWwgJiYgZWwgIT09IGFuY2hvcikge1xuICAgICAgbmV4dCA9IGhvc3ROZXh0U2libGluZyhlbCk7XG4gICAgICBob3N0UmVtb3ZlKGVsKTtcbiAgICAgIGVsID0gbmV4dDtcbiAgICB9XG4gICAgaG9zdFJlbW92ZShhbmNob3IpO1xuICB9O1xuICBjb25zdCBwcm9jZXNzRWxlbWVudCA9IChuMSwgbjIsIGNvbnRhaW5lciwgYW5jaG9yLCBwYXJlbnRDb21wb25lbnQsIHBhcmVudFN1c3BlbnNlLCBuYW1lc3BhY2UsIHNsb3RTY29wZUlkcywgb3B0aW1pemVkKSA9PiB7XG4gICAgaWYgKG4yLnR5cGUgPT09IFwic3ZnXCIpIHtcbiAgICAgIG5hbWVzcGFjZSA9IFwic3ZnXCI7XG4gICAgfSBlbHNlIGlmIChuMi50eXBlID09PSBcIm1hdGhcIikge1xuICAgICAgbmFtZXNwYWNlID0gXCJtYXRobWxcIjtcbiAgICB9XG4gICAgaWYgKG4xID09IG51bGwpIHtcbiAgICAgIG1vdW50RWxlbWVudChcbiAgICAgICAgbjIsXG4gICAgICAgIGNvbnRhaW5lcixcbiAgICAgICAgYW5jaG9yLFxuICAgICAgICBwYXJlbnRDb21wb25lbnQsXG4gICAgICAgIHBhcmVudFN1c3BlbnNlLFxuICAgICAgICBuYW1lc3BhY2UsXG4gICAgICAgIHNsb3RTY29wZUlkcyxcbiAgICAgICAgb3B0aW1pemVkXG4gICAgICApO1xuICAgIH0gZWxzZSB7XG4gICAgICBwYXRjaEVsZW1lbnQoXG4gICAgICAgIG4xLFxuICAgICAgICBuMixcbiAgICAgICAgcGFyZW50Q29tcG9uZW50LFxuICAgICAgICBwYXJlbnRTdXNwZW5zZSxcbiAgICAgICAgbmFtZXNwYWNlLFxuICAgICAgICBzbG90U2NvcGVJZHMsXG4gICAgICAgIG9wdGltaXplZFxuICAgICAgKTtcbiAgICB9XG4gIH07XG4gIGNvbnN0IG1vdW50RWxlbWVudCA9ICh2bm9kZSwgY29udGFpbmVyLCBhbmNob3IsIHBhcmVudENvbXBvbmVudCwgcGFyZW50U3VzcGVuc2UsIG5hbWVzcGFjZSwgc2xvdFNjb3BlSWRzLCBvcHRpbWl6ZWQpID0+IHtcbiAgICBsZXQgZWw7XG4gICAgbGV0IHZub2RlSG9vaztcbiAgICBjb25zdCB7IHByb3BzLCBzaGFwZUZsYWcsIHRyYW5zaXRpb24sIGRpcnMgfSA9IHZub2RlO1xuICAgIGVsID0gdm5vZGUuZWwgPSBob3N0Q3JlYXRlRWxlbWVudChcbiAgICAgIHZub2RlLnR5cGUsXG4gICAgICBuYW1lc3BhY2UsXG4gICAgICBwcm9wcyAmJiBwcm9wcy5pcyxcbiAgICAgIHByb3BzXG4gICAgKTtcbiAgICBpZiAoc2hhcGVGbGFnICYgOCkge1xuICAgICAgaG9zdFNldEVsZW1lbnRUZXh0KGVsLCB2bm9kZS5jaGlsZHJlbik7XG4gICAgfSBlbHNlIGlmIChzaGFwZUZsYWcgJiAxNikge1xuICAgICAgbW91bnRDaGlsZHJlbihcbiAgICAgICAgdm5vZGUuY2hpbGRyZW4sXG4gICAgICAgIGVsLFxuICAgICAgICBudWxsLFxuICAgICAgICBwYXJlbnRDb21wb25lbnQsXG4gICAgICAgIHBhcmVudFN1c3BlbnNlLFxuICAgICAgICByZXNvbHZlQ2hpbGRyZW5OYW1lc3BhY2Uodm5vZGUsIG5hbWVzcGFjZSksXG4gICAgICAgIHNsb3RTY29wZUlkcyxcbiAgICAgICAgb3B0aW1pemVkXG4gICAgICApO1xuICAgIH1cbiAgICBpZiAoZGlycykge1xuICAgICAgaW52b2tlRGlyZWN0aXZlSG9vayh2bm9kZSwgbnVsbCwgcGFyZW50Q29tcG9uZW50LCBcImNyZWF0ZWRcIik7XG4gICAgfVxuICAgIHNldFNjb3BlSWQoZWwsIHZub2RlLCB2bm9kZS5zY29wZUlkLCBzbG90U2NvcGVJZHMsIHBhcmVudENvbXBvbmVudCk7XG4gICAgaWYgKHByb3BzKSB7XG4gICAgICBmb3IgKGNvbnN0IGtleSBpbiBwcm9wcykge1xuICAgICAgICBpZiAoa2V5ICE9PSBcInZhbHVlXCIgJiYgIWlzUmVzZXJ2ZWRQcm9wKGtleSkpIHtcbiAgICAgICAgICBob3N0UGF0Y2hQcm9wKFxuICAgICAgICAgICAgZWwsXG4gICAgICAgICAgICBrZXksXG4gICAgICAgICAgICBudWxsLFxuICAgICAgICAgICAgcHJvcHNba2V5XSxcbiAgICAgICAgICAgIG5hbWVzcGFjZSxcbiAgICAgICAgICAgIHZub2RlLmNoaWxkcmVuLFxuICAgICAgICAgICAgcGFyZW50Q29tcG9uZW50LFxuICAgICAgICAgICAgcGFyZW50U3VzcGVuc2UsXG4gICAgICAgICAgICB1bm1vdW50Q2hpbGRyZW5cbiAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoXCJ2YWx1ZVwiIGluIHByb3BzKSB7XG4gICAgICAgIGhvc3RQYXRjaFByb3AoZWwsIFwidmFsdWVcIiwgbnVsbCwgcHJvcHMudmFsdWUsIG5hbWVzcGFjZSk7XG4gICAgICB9XG4gICAgICBpZiAodm5vZGVIb29rID0gcHJvcHMub25Wbm9kZUJlZm9yZU1vdW50KSB7XG4gICAgICAgIGludm9rZVZOb2RlSG9vayh2bm9kZUhvb2ssIHBhcmVudENvbXBvbmVudCwgdm5vZGUpO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSB8fCBfX1ZVRV9QUk9EX0RFVlRPT0xTX18pIHtcbiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlbCwgXCJfX3Zub2RlXCIsIHtcbiAgICAgICAgdmFsdWU6IHZub2RlLFxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZVxuICAgICAgfSk7XG4gICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZWwsIFwiX192dWVQYXJlbnRDb21wb25lbnRcIiwge1xuICAgICAgICB2YWx1ZTogcGFyZW50Q29tcG9uZW50LFxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZVxuICAgICAgfSk7XG4gICAgfVxuICAgIGlmIChkaXJzKSB7XG4gICAgICBpbnZva2VEaXJlY3RpdmVIb29rKHZub2RlLCBudWxsLCBwYXJlbnRDb21wb25lbnQsIFwiYmVmb3JlTW91bnRcIik7XG4gICAgfVxuICAgIGNvbnN0IG5lZWRDYWxsVHJhbnNpdGlvbkhvb2tzID0gbmVlZFRyYW5zaXRpb24ocGFyZW50U3VzcGVuc2UsIHRyYW5zaXRpb24pO1xuICAgIGlmIChuZWVkQ2FsbFRyYW5zaXRpb25Ib29rcykge1xuICAgICAgdHJhbnNpdGlvbi5iZWZvcmVFbnRlcihlbCk7XG4gICAgfVxuICAgIGhvc3RJbnNlcnQoZWwsIGNvbnRhaW5lciwgYW5jaG9yKTtcbiAgICBpZiAoKHZub2RlSG9vayA9IHByb3BzICYmIHByb3BzLm9uVm5vZGVNb3VudGVkKSB8fCBuZWVkQ2FsbFRyYW5zaXRpb25Ib29rcyB8fCBkaXJzKSB7XG4gICAgICBxdWV1ZVBvc3RSZW5kZXJFZmZlY3QoKCkgPT4ge1xuICAgICAgICB2bm9kZUhvb2sgJiYgaW52b2tlVk5vZGVIb29rKHZub2RlSG9vaywgcGFyZW50Q29tcG9uZW50LCB2bm9kZSk7XG4gICAgICAgIG5lZWRDYWxsVHJhbnNpdGlvbkhvb2tzICYmIHRyYW5zaXRpb24uZW50ZXIoZWwpO1xuICAgICAgICBkaXJzICYmIGludm9rZURpcmVjdGl2ZUhvb2sodm5vZGUsIG51bGwsIHBhcmVudENvbXBvbmVudCwgXCJtb3VudGVkXCIpO1xuICAgICAgfSwgcGFyZW50U3VzcGVuc2UpO1xuICAgIH1cbiAgfTtcbiAgY29uc3Qgc2V0U2NvcGVJZCA9IChlbCwgdm5vZGUsIHNjb3BlSWQsIHNsb3RTY29wZUlkcywgcGFyZW50Q29tcG9uZW50KSA9PiB7XG4gICAgaWYgKHNjb3BlSWQpIHtcbiAgICAgIGhvc3RTZXRTY29wZUlkKGVsLCBzY29wZUlkKTtcbiAgICB9XG4gICAgaWYgKHNsb3RTY29wZUlkcykge1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzbG90U2NvcGVJZHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgaG9zdFNldFNjb3BlSWQoZWwsIHNsb3RTY29wZUlkc1tpXSk7XG4gICAgICB9XG4gICAgfVxuICAgIGlmIChwYXJlbnRDb21wb25lbnQpIHtcbiAgICAgIGxldCBzdWJUcmVlID0gcGFyZW50Q29tcG9uZW50LnN1YlRyZWU7XG4gICAgICBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSAmJiBzdWJUcmVlLnBhdGNoRmxhZyA+IDAgJiYgc3ViVHJlZS5wYXRjaEZsYWcgJiAyMDQ4KSB7XG4gICAgICAgIHN1YlRyZWUgPSBmaWx0ZXJTaW5nbGVSb290KHN1YlRyZWUuY2hpbGRyZW4pIHx8IHN1YlRyZWU7XG4gICAgICB9XG4gICAgICBpZiAodm5vZGUgPT09IHN1YlRyZWUpIHtcbiAgICAgICAgY29uc3QgcGFyZW50Vk5vZGUgPSBwYXJlbnRDb21wb25lbnQudm5vZGU7XG4gICAgICAgIHNldFNjb3BlSWQoXG4gICAgICAgICAgZWwsXG4gICAgICAgICAgcGFyZW50Vk5vZGUsXG4gICAgICAgICAgcGFyZW50Vk5vZGUuc2NvcGVJZCxcbiAgICAgICAgICBwYXJlbnRWTm9kZS5zbG90U2NvcGVJZHMsXG4gICAgICAgICAgcGFyZW50Q29tcG9uZW50LnBhcmVudFxuICAgICAgICApO1xuICAgICAgfVxuICAgIH1cbiAgfTtcbiAgY29uc3QgbW91bnRDaGlsZHJlbiA9IChjaGlsZHJlbiwgY29udGFpbmVyLCBhbmNob3IsIHBhcmVudENvbXBvbmVudCwgcGFyZW50U3VzcGVuc2UsIG5hbWVzcGFjZSwgc2xvdFNjb3BlSWRzLCBvcHRpbWl6ZWQsIHN0YXJ0ID0gMCkgPT4ge1xuICAgIGZvciAobGV0IGkgPSBzdGFydDsgaSA8IGNoaWxkcmVuLmxlbmd0aDsgaSsrKSB7XG4gICAgICBjb25zdCBjaGlsZCA9IGNoaWxkcmVuW2ldID0gb3B0aW1pemVkID8gY2xvbmVJZk1vdW50ZWQoY2hpbGRyZW5baV0pIDogbm9ybWFsaXplVk5vZGUoY2hpbGRyZW5baV0pO1xuICAgICAgcGF0Y2goXG4gICAgICAgIG51bGwsXG4gICAgICAgIGNoaWxkLFxuICAgICAgICBjb250YWluZXIsXG4gICAgICAgIGFuY2hvcixcbiAgICAgICAgcGFyZW50Q29tcG9uZW50LFxuICAgICAgICBwYXJlbnRTdXNwZW5zZSxcbiAgICAgICAgbmFtZXNwYWNlLFxuICAgICAgICBzbG90U2NvcGVJZHMsXG4gICAgICAgIG9wdGltaXplZFxuICAgICAgKTtcbiAgICB9XG4gIH07XG4gIGNvbnN0IHBhdGNoRWxlbWVudCA9IChuMSwgbjIsIHBhcmVudENvbXBvbmVudCwgcGFyZW50U3VzcGVuc2UsIG5hbWVzcGFjZSwgc2xvdFNjb3BlSWRzLCBvcHRpbWl6ZWQpID0+IHtcbiAgICBjb25zdCBlbCA9IG4yLmVsID0gbjEuZWw7XG4gICAgbGV0IHsgcGF0Y2hGbGFnLCBkeW5hbWljQ2hpbGRyZW4sIGRpcnMgfSA9IG4yO1xuICAgIHBhdGNoRmxhZyB8PSBuMS5wYXRjaEZsYWcgJiAxNjtcbiAgICBjb25zdCBvbGRQcm9wcyA9IG4xLnByb3BzIHx8IEVNUFRZX09CSjtcbiAgICBjb25zdCBuZXdQcm9wcyA9IG4yLnByb3BzIHx8IEVNUFRZX09CSjtcbiAgICBsZXQgdm5vZGVIb29rO1xuICAgIHBhcmVudENvbXBvbmVudCAmJiB0b2dnbGVSZWN1cnNlKHBhcmVudENvbXBvbmVudCwgZmFsc2UpO1xuICAgIGlmICh2bm9kZUhvb2sgPSBuZXdQcm9wcy5vblZub2RlQmVmb3JlVXBkYXRlKSB7XG4gICAgICBpbnZva2VWTm9kZUhvb2sodm5vZGVIb29rLCBwYXJlbnRDb21wb25lbnQsIG4yLCBuMSk7XG4gICAgfVxuICAgIGlmIChkaXJzKSB7XG4gICAgICBpbnZva2VEaXJlY3RpdmVIb29rKG4yLCBuMSwgcGFyZW50Q29tcG9uZW50LCBcImJlZm9yZVVwZGF0ZVwiKTtcbiAgICB9XG4gICAgcGFyZW50Q29tcG9uZW50ICYmIHRvZ2dsZVJlY3Vyc2UocGFyZW50Q29tcG9uZW50LCB0cnVlKTtcbiAgICBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSAmJiBpc0htclVwZGF0aW5nKSB7XG4gICAgICBwYXRjaEZsYWcgPSAwO1xuICAgICAgb3B0aW1pemVkID0gZmFsc2U7XG4gICAgICBkeW5hbWljQ2hpbGRyZW4gPSBudWxsO1xuICAgIH1cbiAgICBpZiAoZHluYW1pY0NoaWxkcmVuKSB7XG4gICAgICBwYXRjaEJsb2NrQ2hpbGRyZW4oXG4gICAgICAgIG4xLmR5bmFtaWNDaGlsZHJlbixcbiAgICAgICAgZHluYW1pY0NoaWxkcmVuLFxuICAgICAgICBlbCxcbiAgICAgICAgcGFyZW50Q29tcG9uZW50LFxuICAgICAgICBwYXJlbnRTdXNwZW5zZSxcbiAgICAgICAgcmVzb2x2ZUNoaWxkcmVuTmFtZXNwYWNlKG4yLCBuYW1lc3BhY2UpLFxuICAgICAgICBzbG90U2NvcGVJZHNcbiAgICAgICk7XG4gICAgICBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSkge1xuICAgICAgICB0cmF2ZXJzZVN0YXRpY0NoaWxkcmVuKG4xLCBuMik7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmICghb3B0aW1pemVkKSB7XG4gICAgICBwYXRjaENoaWxkcmVuKFxuICAgICAgICBuMSxcbiAgICAgICAgbjIsXG4gICAgICAgIGVsLFxuICAgICAgICBudWxsLFxuICAgICAgICBwYXJlbnRDb21wb25lbnQsXG4gICAgICAgIHBhcmVudFN1c3BlbnNlLFxuICAgICAgICByZXNvbHZlQ2hpbGRyZW5OYW1lc3BhY2UobjIsIG5hbWVzcGFjZSksXG4gICAgICAgIHNsb3RTY29wZUlkcyxcbiAgICAgICAgZmFsc2VcbiAgICAgICk7XG4gICAgfVxuICAgIGlmIChwYXRjaEZsYWcgPiAwKSB7XG4gICAgICBpZiAocGF0Y2hGbGFnICYgMTYpIHtcbiAgICAgICAgcGF0Y2hQcm9wcyhcbiAgICAgICAgICBlbCxcbiAgICAgICAgICBuMixcbiAgICAgICAgICBvbGRQcm9wcyxcbiAgICAgICAgICBuZXdQcm9wcyxcbiAgICAgICAgICBwYXJlbnRDb21wb25lbnQsXG4gICAgICAgICAgcGFyZW50U3VzcGVuc2UsXG4gICAgICAgICAgbmFtZXNwYWNlXG4gICAgICAgICk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAocGF0Y2hGbGFnICYgMikge1xuICAgICAgICAgIGlmIChvbGRQcm9wcy5jbGFzcyAhPT0gbmV3UHJvcHMuY2xhc3MpIHtcbiAgICAgICAgICAgIGhvc3RQYXRjaFByb3AoZWwsIFwiY2xhc3NcIiwgbnVsbCwgbmV3UHJvcHMuY2xhc3MsIG5hbWVzcGFjZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChwYXRjaEZsYWcgJiA0KSB7XG4gICAgICAgICAgaG9zdFBhdGNoUHJvcChlbCwgXCJzdHlsZVwiLCBvbGRQcm9wcy5zdHlsZSwgbmV3UHJvcHMuc3R5bGUsIG5hbWVzcGFjZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHBhdGNoRmxhZyAmIDgpIHtcbiAgICAgICAgICBjb25zdCBwcm9wc1RvVXBkYXRlID0gbjIuZHluYW1pY1Byb3BzO1xuICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcHJvcHNUb1VwZGF0ZS5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgY29uc3Qga2V5ID0gcHJvcHNUb1VwZGF0ZVtpXTtcbiAgICAgICAgICAgIGNvbnN0IHByZXYgPSBvbGRQcm9wc1trZXldO1xuICAgICAgICAgICAgY29uc3QgbmV4dCA9IG5ld1Byb3BzW2tleV07XG4gICAgICAgICAgICBpZiAobmV4dCAhPT0gcHJldiB8fCBrZXkgPT09IFwidmFsdWVcIikge1xuICAgICAgICAgICAgICBob3N0UGF0Y2hQcm9wKFxuICAgICAgICAgICAgICAgIGVsLFxuICAgICAgICAgICAgICAgIGtleSxcbiAgICAgICAgICAgICAgICBwcmV2LFxuICAgICAgICAgICAgICAgIG5leHQsXG4gICAgICAgICAgICAgICAgbmFtZXNwYWNlLFxuICAgICAgICAgICAgICAgIG4xLmNoaWxkcmVuLFxuICAgICAgICAgICAgICAgIHBhcmVudENvbXBvbmVudCxcbiAgICAgICAgICAgICAgICBwYXJlbnRTdXNwZW5zZSxcbiAgICAgICAgICAgICAgICB1bm1vdW50Q2hpbGRyZW5cbiAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmIChwYXRjaEZsYWcgJiAxKSB7XG4gICAgICAgIGlmIChuMS5jaGlsZHJlbiAhPT0gbjIuY2hpbGRyZW4pIHtcbiAgICAgICAgICBob3N0U2V0RWxlbWVudFRleHQoZWwsIG4yLmNoaWxkcmVuKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoIW9wdGltaXplZCAmJiBkeW5hbWljQ2hpbGRyZW4gPT0gbnVsbCkge1xuICAgICAgcGF0Y2hQcm9wcyhcbiAgICAgICAgZWwsXG4gICAgICAgIG4yLFxuICAgICAgICBvbGRQcm9wcyxcbiAgICAgICAgbmV3UHJvcHMsXG4gICAgICAgIHBhcmVudENvbXBvbmVudCxcbiAgICAgICAgcGFyZW50U3VzcGVuc2UsXG4gICAgICAgIG5hbWVzcGFjZVxuICAgICAgKTtcbiAgICB9XG4gICAgaWYgKCh2bm9kZUhvb2sgPSBuZXdQcm9wcy5vblZub2RlVXBkYXRlZCkgfHwgZGlycykge1xuICAgICAgcXVldWVQb3N0UmVuZGVyRWZmZWN0KCgpID0+IHtcbiAgICAgICAgdm5vZGVIb29rICYmIGludm9rZVZOb2RlSG9vayh2bm9kZUhvb2ssIHBhcmVudENvbXBvbmVudCwgbjIsIG4xKTtcbiAgICAgICAgZGlycyAmJiBpbnZva2VEaXJlY3RpdmVIb29rKG4yLCBuMSwgcGFyZW50Q29tcG9uZW50LCBcInVwZGF0ZWRcIik7XG4gICAgICB9LCBwYXJlbnRTdXNwZW5zZSk7XG4gICAgfVxuICB9O1xuICBjb25zdCBwYXRjaEJsb2NrQ2hpbGRyZW4gPSAob2xkQ2hpbGRyZW4sIG5ld0NoaWxkcmVuLCBmYWxsYmFja0NvbnRhaW5lciwgcGFyZW50Q29tcG9uZW50LCBwYXJlbnRTdXNwZW5zZSwgbmFtZXNwYWNlLCBzbG90U2NvcGVJZHMpID0+IHtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IG5ld0NoaWxkcmVuLmxlbmd0aDsgaSsrKSB7XG4gICAgICBjb25zdCBvbGRWTm9kZSA9IG9sZENoaWxkcmVuW2ldO1xuICAgICAgY29uc3QgbmV3Vk5vZGUgPSBuZXdDaGlsZHJlbltpXTtcbiAgICAgIGNvbnN0IGNvbnRhaW5lciA9IChcbiAgICAgICAgLy8gb2xkVk5vZGUgbWF5IGJlIGFuIGVycm9yZWQgYXN5bmMgc2V0dXAoKSBjb21wb25lbnQgaW5zaWRlIFN1c3BlbnNlXG4gICAgICAgIC8vIHdoaWNoIHdpbGwgbm90IGhhdmUgYSBtb3VudGVkIGVsZW1lbnRcbiAgICAgICAgb2xkVk5vZGUuZWwgJiYgLy8gLSBJbiB0aGUgY2FzZSBvZiBhIEZyYWdtZW50LCB3ZSBuZWVkIHRvIHByb3ZpZGUgdGhlIGFjdHVhbCBwYXJlbnRcbiAgICAgICAgLy8gb2YgdGhlIEZyYWdtZW50IGl0c2VsZiBzbyBpdCBjYW4gbW92ZSBpdHMgY2hpbGRyZW4uXG4gICAgICAgIChvbGRWTm9kZS50eXBlID09PSBGcmFnbWVudCB8fCAvLyAtIEluIHRoZSBjYXNlIG9mIGRpZmZlcmVudCBub2RlcywgdGhlcmUgaXMgZ29pbmcgdG8gYmUgYSByZXBsYWNlbWVudFxuICAgICAgICAvLyB3aGljaCBhbHNvIHJlcXVpcmVzIHRoZSBjb3JyZWN0IHBhcmVudCBjb250YWluZXJcbiAgICAgICAgIWlzU2FtZVZOb2RlVHlwZShvbGRWTm9kZSwgbmV3Vk5vZGUpIHx8IC8vIC0gSW4gdGhlIGNhc2Ugb2YgYSBjb21wb25lbnQsIGl0IGNvdWxkIGNvbnRhaW4gYW55dGhpbmcuXG4gICAgICAgIG9sZFZOb2RlLnNoYXBlRmxhZyAmICg2IHwgNjQpKSA/IGhvc3RQYXJlbnROb2RlKG9sZFZOb2RlLmVsKSA6IChcbiAgICAgICAgICAvLyBJbiBvdGhlciBjYXNlcywgdGhlIHBhcmVudCBjb250YWluZXIgaXMgbm90IGFjdHVhbGx5IHVzZWQgc28gd2VcbiAgICAgICAgICAvLyBqdXN0IHBhc3MgdGhlIGJsb2NrIGVsZW1lbnQgaGVyZSB0byBhdm9pZCBhIERPTSBwYXJlbnROb2RlIGNhbGwuXG4gICAgICAgICAgZmFsbGJhY2tDb250YWluZXJcbiAgICAgICAgKVxuICAgICAgKTtcbiAgICAgIHBhdGNoKFxuICAgICAgICBvbGRWTm9kZSxcbiAgICAgICAgbmV3Vk5vZGUsXG4gICAgICAgIGNvbnRhaW5lcixcbiAgICAgICAgbnVsbCxcbiAgICAgICAgcGFyZW50Q29tcG9uZW50LFxuICAgICAgICBwYXJlbnRTdXNwZW5zZSxcbiAgICAgICAgbmFtZXNwYWNlLFxuICAgICAgICBzbG90U2NvcGVJZHMsXG4gICAgICAgIHRydWVcbiAgICAgICk7XG4gICAgfVxuICB9O1xuICBjb25zdCBwYXRjaFByb3BzID0gKGVsLCB2bm9kZSwgb2xkUHJvcHMsIG5ld1Byb3BzLCBwYXJlbnRDb21wb25lbnQsIHBhcmVudFN1c3BlbnNlLCBuYW1lc3BhY2UpID0+IHtcbiAgICBpZiAob2xkUHJvcHMgIT09IG5ld1Byb3BzKSB7XG4gICAgICBpZiAob2xkUHJvcHMgIT09IEVNUFRZX09CSikge1xuICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiBvbGRQcm9wcykge1xuICAgICAgICAgIGlmICghaXNSZXNlcnZlZFByb3Aoa2V5KSAmJiAhKGtleSBpbiBuZXdQcm9wcykpIHtcbiAgICAgICAgICAgIGhvc3RQYXRjaFByb3AoXG4gICAgICAgICAgICAgIGVsLFxuICAgICAgICAgICAgICBrZXksXG4gICAgICAgICAgICAgIG9sZFByb3BzW2tleV0sXG4gICAgICAgICAgICAgIG51bGwsXG4gICAgICAgICAgICAgIG5hbWVzcGFjZSxcbiAgICAgICAgICAgICAgdm5vZGUuY2hpbGRyZW4sXG4gICAgICAgICAgICAgIHBhcmVudENvbXBvbmVudCxcbiAgICAgICAgICAgICAgcGFyZW50U3VzcGVuc2UsXG4gICAgICAgICAgICAgIHVubW91bnRDaGlsZHJlblxuICAgICAgICAgICAgKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGZvciAoY29uc3Qga2V5IGluIG5ld1Byb3BzKSB7XG4gICAgICAgIGlmIChpc1Jlc2VydmVkUHJvcChrZXkpKVxuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICBjb25zdCBuZXh0ID0gbmV3UHJvcHNba2V5XTtcbiAgICAgICAgY29uc3QgcHJldiA9IG9sZFByb3BzW2tleV07XG4gICAgICAgIGlmIChuZXh0ICE9PSBwcmV2ICYmIGtleSAhPT0gXCJ2YWx1ZVwiKSB7XG4gICAgICAgICAgaG9zdFBhdGNoUHJvcChcbiAgICAgICAgICAgIGVsLFxuICAgICAgICAgICAga2V5LFxuICAgICAgICAgICAgcHJldixcbiAgICAgICAgICAgIG5leHQsXG4gICAgICAgICAgICBuYW1lc3BhY2UsXG4gICAgICAgICAgICB2bm9kZS5jaGlsZHJlbixcbiAgICAgICAgICAgIHBhcmVudENvbXBvbmVudCxcbiAgICAgICAgICAgIHBhcmVudFN1c3BlbnNlLFxuICAgICAgICAgICAgdW5tb3VudENoaWxkcmVuXG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKFwidmFsdWVcIiBpbiBuZXdQcm9wcykge1xuICAgICAgICBob3N0UGF0Y2hQcm9wKGVsLCBcInZhbHVlXCIsIG9sZFByb3BzLnZhbHVlLCBuZXdQcm9wcy52YWx1ZSwgbmFtZXNwYWNlKTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG4gIGNvbnN0IHByb2Nlc3NGcmFnbWVudCA9IChuMSwgbjIsIGNvbnRhaW5lciwgYW5jaG9yLCBwYXJlbnRDb21wb25lbnQsIHBhcmVudFN1c3BlbnNlLCBuYW1lc3BhY2UsIHNsb3RTY29wZUlkcywgb3B0aW1pemVkKSA9PiB7XG4gICAgY29uc3QgZnJhZ21lbnRTdGFydEFuY2hvciA9IG4yLmVsID0gbjEgPyBuMS5lbCA6IGhvc3RDcmVhdGVUZXh0KFwiXCIpO1xuICAgIGNvbnN0IGZyYWdtZW50RW5kQW5jaG9yID0gbjIuYW5jaG9yID0gbjEgPyBuMS5hbmNob3IgOiBob3N0Q3JlYXRlVGV4dChcIlwiKTtcbiAgICBsZXQgeyBwYXRjaEZsYWcsIGR5bmFtaWNDaGlsZHJlbiwgc2xvdFNjb3BlSWRzOiBmcmFnbWVudFNsb3RTY29wZUlkcyB9ID0gbjI7XG4gICAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgJiYgLy8gIzU1MjMgZGV2IHJvb3QgZnJhZ21lbnQgbWF5IGluaGVyaXQgZGlyZWN0aXZlc1xuICAgIChpc0htclVwZGF0aW5nIHx8IHBhdGNoRmxhZyAmIDIwNDgpKSB7XG4gICAgICBwYXRjaEZsYWcgPSAwO1xuICAgICAgb3B0aW1pemVkID0gZmFsc2U7XG4gICAgICBkeW5hbWljQ2hpbGRyZW4gPSBudWxsO1xuICAgIH1cbiAgICBpZiAoZnJhZ21lbnRTbG90U2NvcGVJZHMpIHtcbiAgICAgIHNsb3RTY29wZUlkcyA9IHNsb3RTY29wZUlkcyA/IHNsb3RTY29wZUlkcy5jb25jYXQoZnJhZ21lbnRTbG90U2NvcGVJZHMpIDogZnJhZ21lbnRTbG90U2NvcGVJZHM7XG4gICAgfVxuICAgIGlmIChuMSA9PSBudWxsKSB7XG4gICAgICBob3N0SW5zZXJ0KGZyYWdtZW50U3RhcnRBbmNob3IsIGNvbnRhaW5lciwgYW5jaG9yKTtcbiAgICAgIGhvc3RJbnNlcnQoZnJhZ21lbnRFbmRBbmNob3IsIGNvbnRhaW5lciwgYW5jaG9yKTtcbiAgICAgIG1vdW50Q2hpbGRyZW4oXG4gICAgICAgIC8vICMxMDAwN1xuICAgICAgICAvLyBzdWNoIGZyYWdtZW50IGxpa2UgYDw+PC8+YCB3aWxsIGJlIGNvbXBpbGVkIGludG9cbiAgICAgICAgLy8gYSBmcmFnbWVudCB3aGljaCBkb2Vzbid0IGhhdmUgYSBjaGlsZHJlbi5cbiAgICAgICAgLy8gSW4gdGhpcyBjYXNlIGZhbGxiYWNrIHRvIGFuIGVtcHR5IGFycmF5XG4gICAgICAgIG4yLmNoaWxkcmVuIHx8IFtdLFxuICAgICAgICBjb250YWluZXIsXG4gICAgICAgIGZyYWdtZW50RW5kQW5jaG9yLFxuICAgICAgICBwYXJlbnRDb21wb25lbnQsXG4gICAgICAgIHBhcmVudFN1c3BlbnNlLFxuICAgICAgICBuYW1lc3BhY2UsXG4gICAgICAgIHNsb3RTY29wZUlkcyxcbiAgICAgICAgb3B0aW1pemVkXG4gICAgICApO1xuICAgIH0gZWxzZSB7XG4gICAgICBpZiAocGF0Y2hGbGFnID4gMCAmJiBwYXRjaEZsYWcgJiA2NCAmJiBkeW5hbWljQ2hpbGRyZW4gJiYgLy8gIzI3MTUgdGhlIHByZXZpb3VzIGZyYWdtZW50IGNvdWxkJ3ZlIGJlZW4gYSBCQUlMZWQgb25lIGFzIGEgcmVzdWx0XG4gICAgICAvLyBvZiByZW5kZXJTbG90KCkgd2l0aCBubyB2YWxpZCBjaGlsZHJlblxuICAgICAgbjEuZHluYW1pY0NoaWxkcmVuKSB7XG4gICAgICAgIHBhdGNoQmxvY2tDaGlsZHJlbihcbiAgICAgICAgICBuMS5keW5hbWljQ2hpbGRyZW4sXG4gICAgICAgICAgZHluYW1pY0NoaWxkcmVuLFxuICAgICAgICAgIGNvbnRhaW5lcixcbiAgICAgICAgICBwYXJlbnRDb21wb25lbnQsXG4gICAgICAgICAgcGFyZW50U3VzcGVuc2UsXG4gICAgICAgICAgbmFtZXNwYWNlLFxuICAgICAgICAgIHNsb3RTY29wZUlkc1xuICAgICAgICApO1xuICAgICAgICBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSkge1xuICAgICAgICAgIHRyYXZlcnNlU3RhdGljQ2hpbGRyZW4objEsIG4yKTtcbiAgICAgICAgfSBlbHNlIGlmIChcbiAgICAgICAgICAvLyAjMjA4MCBpZiB0aGUgc3RhYmxlIGZyYWdtZW50IGhhcyBhIGtleSwgaXQncyBhIDx0ZW1wbGF0ZSB2LWZvcj4gdGhhdCBtYXlcbiAgICAgICAgICAvLyAgZ2V0IG1vdmVkIGFyb3VuZC4gTWFrZSBzdXJlIGFsbCByb290IGxldmVsIHZub2RlcyBpbmhlcml0IGVsLlxuICAgICAgICAgIC8vICMyMTM0IG9yIGlmIGl0J3MgYSBjb21wb25lbnQgcm9vdCwgaXQgbWF5IGFsc28gZ2V0IG1vdmVkIGFyb3VuZFxuICAgICAgICAgIC8vIGFzIHRoZSBjb21wb25lbnQgaXMgYmVpbmcgbW92ZWQuXG4gICAgICAgICAgbjIua2V5ICE9IG51bGwgfHwgcGFyZW50Q29tcG9uZW50ICYmIG4yID09PSBwYXJlbnRDb21wb25lbnQuc3ViVHJlZVxuICAgICAgICApIHtcbiAgICAgICAgICB0cmF2ZXJzZVN0YXRpY0NoaWxkcmVuKFxuICAgICAgICAgICAgbjEsXG4gICAgICAgICAgICBuMixcbiAgICAgICAgICAgIHRydWVcbiAgICAgICAgICAgIC8qIHNoYWxsb3cgKi9cbiAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBwYXRjaENoaWxkcmVuKFxuICAgICAgICAgIG4xLFxuICAgICAgICAgIG4yLFxuICAgICAgICAgIGNvbnRhaW5lcixcbiAgICAgICAgICBmcmFnbWVudEVuZEFuY2hvcixcbiAgICAgICAgICBwYXJlbnRDb21wb25lbnQsXG4gICAgICAgICAgcGFyZW50U3VzcGVuc2UsXG4gICAgICAgICAgbmFtZXNwYWNlLFxuICAgICAgICAgIHNsb3RTY29wZUlkcyxcbiAgICAgICAgICBvcHRpbWl6ZWRcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG4gIGNvbnN0IHByb2Nlc3NDb21wb25lbnQgPSAobjEsIG4yLCBjb250YWluZXIsIGFuY2hvciwgcGFyZW50Q29tcG9uZW50LCBwYXJlbnRTdXNwZW5zZSwgbmFtZXNwYWNlLCBzbG90U2NvcGVJZHMsIG9wdGltaXplZCkgPT4ge1xuICAgIG4yLnNsb3RTY29wZUlkcyA9IHNsb3RTY29wZUlkcztcbiAgICBpZiAobjEgPT0gbnVsbCkge1xuICAgICAgaWYgKG4yLnNoYXBlRmxhZyAmIDUxMikge1xuICAgICAgICBwYXJlbnRDb21wb25lbnQuY3R4LmFjdGl2YXRlKFxuICAgICAgICAgIG4yLFxuICAgICAgICAgIGNvbnRhaW5lcixcbiAgICAgICAgICBhbmNob3IsXG4gICAgICAgICAgbmFtZXNwYWNlLFxuICAgICAgICAgIG9wdGltaXplZFxuICAgICAgICApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbW91bnRDb21wb25lbnQoXG4gICAgICAgICAgbjIsXG4gICAgICAgICAgY29udGFpbmVyLFxuICAgICAgICAgIGFuY2hvcixcbiAgICAgICAgICBwYXJlbnRDb21wb25lbnQsXG4gICAgICAgICAgcGFyZW50U3VzcGVuc2UsXG4gICAgICAgICAgbmFtZXNwYWNlLFxuICAgICAgICAgIG9wdGltaXplZFxuICAgICAgICApO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICB1cGRhdGVDb21wb25lbnQobjEsIG4yLCBvcHRpbWl6ZWQpO1xuICAgIH1cbiAgfTtcbiAgY29uc3QgbW91bnRDb21wb25lbnQgPSAoaW5pdGlhbFZOb2RlLCBjb250YWluZXIsIGFuY2hvciwgcGFyZW50Q29tcG9uZW50LCBwYXJlbnRTdXNwZW5zZSwgbmFtZXNwYWNlLCBvcHRpbWl6ZWQpID0+IHtcbiAgICBjb25zdCBpbnN0YW5jZSA9IChpbml0aWFsVk5vZGUuY29tcG9uZW50ID0gY3JlYXRlQ29tcG9uZW50SW5zdGFuY2UoXG4gICAgICBpbml0aWFsVk5vZGUsXG4gICAgICBwYXJlbnRDb21wb25lbnQsXG4gICAgICBwYXJlbnRTdXNwZW5zZVxuICAgICkpO1xuICAgIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpICYmIGluc3RhbmNlLnR5cGUuX19obXJJZCkge1xuICAgICAgcmVnaXN0ZXJITVIoaW5zdGFuY2UpO1xuICAgIH1cbiAgICBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSkge1xuICAgICAgcHVzaFdhcm5pbmdDb250ZXh0KGluaXRpYWxWTm9kZSk7XG4gICAgICBzdGFydE1lYXN1cmUoaW5zdGFuY2UsIGBtb3VudGApO1xuICAgIH1cbiAgICBpZiAoaXNLZWVwQWxpdmUoaW5pdGlhbFZOb2RlKSkge1xuICAgICAgaW5zdGFuY2UuY3R4LnJlbmRlcmVyID0gaW50ZXJuYWxzO1xuICAgIH1cbiAgICB7XG4gICAgICBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSkge1xuICAgICAgICBzdGFydE1lYXN1cmUoaW5zdGFuY2UsIGBpbml0YCk7XG4gICAgICB9XG4gICAgICBzZXR1cENvbXBvbmVudChpbnN0YW5jZSk7XG4gICAgICBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSkge1xuICAgICAgICBlbmRNZWFzdXJlKGluc3RhbmNlLCBgaW5pdGApO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAoaW5zdGFuY2UuYXN5bmNEZXApIHtcbiAgICAgIHBhcmVudFN1c3BlbnNlICYmIHBhcmVudFN1c3BlbnNlLnJlZ2lzdGVyRGVwKGluc3RhbmNlLCBzZXR1cFJlbmRlckVmZmVjdCk7XG4gICAgICBpZiAoIWluaXRpYWxWTm9kZS5lbCkge1xuICAgICAgICBjb25zdCBwbGFjZWhvbGRlciA9IGluc3RhbmNlLnN1YlRyZWUgPSBjcmVhdGVWTm9kZShDb21tZW50KTtcbiAgICAgICAgcHJvY2Vzc0NvbW1lbnROb2RlKG51bGwsIHBsYWNlaG9sZGVyLCBjb250YWluZXIsIGFuY2hvcik7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHNldHVwUmVuZGVyRWZmZWN0KFxuICAgICAgICBpbnN0YW5jZSxcbiAgICAgICAgaW5pdGlhbFZOb2RlLFxuICAgICAgICBjb250YWluZXIsXG4gICAgICAgIGFuY2hvcixcbiAgICAgICAgcGFyZW50U3VzcGVuc2UsXG4gICAgICAgIG5hbWVzcGFjZSxcbiAgICAgICAgb3B0aW1pemVkXG4gICAgICApO1xuICAgIH1cbiAgICBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSkge1xuICAgICAgcG9wV2FybmluZ0NvbnRleHQoKTtcbiAgICAgIGVuZE1lYXN1cmUoaW5zdGFuY2UsIGBtb3VudGApO1xuICAgIH1cbiAgfTtcbiAgY29uc3QgdXBkYXRlQ29tcG9uZW50ID0gKG4xLCBuMiwgb3B0aW1pemVkKSA9PiB7XG4gICAgY29uc3QgaW5zdGFuY2UgPSBuMi5jb21wb25lbnQgPSBuMS5jb21wb25lbnQ7XG4gICAgaWYgKHNob3VsZFVwZGF0ZUNvbXBvbmVudChuMSwgbjIsIG9wdGltaXplZCkpIHtcbiAgICAgIGlmIChpbnN0YW5jZS5hc3luY0RlcCAmJiAhaW5zdGFuY2UuYXN5bmNSZXNvbHZlZCkge1xuICAgICAgICBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSkge1xuICAgICAgICAgIHB1c2hXYXJuaW5nQ29udGV4dChuMik7XG4gICAgICAgIH1cbiAgICAgICAgdXBkYXRlQ29tcG9uZW50UHJlUmVuZGVyKGluc3RhbmNlLCBuMiwgb3B0aW1pemVkKTtcbiAgICAgICAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikpIHtcbiAgICAgICAgICBwb3BXYXJuaW5nQ29udGV4dCgpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybjtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGluc3RhbmNlLm5leHQgPSBuMjtcbiAgICAgICAgaW52YWxpZGF0ZUpvYihpbnN0YW5jZS51cGRhdGUpO1xuICAgICAgICBpbnN0YW5jZS5lZmZlY3QuZGlydHkgPSB0cnVlO1xuICAgICAgICBpbnN0YW5jZS51cGRhdGUoKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgbjIuZWwgPSBuMS5lbDtcbiAgICAgIGluc3RhbmNlLnZub2RlID0gbjI7XG4gICAgfVxuICB9O1xuICBjb25zdCBzZXR1cFJlbmRlckVmZmVjdCA9IChpbnN0YW5jZSwgaW5pdGlhbFZOb2RlLCBjb250YWluZXIsIGFuY2hvciwgcGFyZW50U3VzcGVuc2UsIG5hbWVzcGFjZSwgb3B0aW1pemVkKSA9PiB7XG4gICAgY29uc3QgY29tcG9uZW50VXBkYXRlRm4gPSAoKSA9PiB7XG4gICAgICBpZiAoIWluc3RhbmNlLmlzTW91bnRlZCkge1xuICAgICAgICBsZXQgdm5vZGVIb29rO1xuICAgICAgICBjb25zdCB7IGVsLCBwcm9wcyB9ID0gaW5pdGlhbFZOb2RlO1xuICAgICAgICBjb25zdCB7IGJtLCBtLCBwYXJlbnQgfSA9IGluc3RhbmNlO1xuICAgICAgICBjb25zdCBpc0FzeW5jV3JhcHBlclZOb2RlID0gaXNBc3luY1dyYXBwZXIoaW5pdGlhbFZOb2RlKTtcbiAgICAgICAgdG9nZ2xlUmVjdXJzZShpbnN0YW5jZSwgZmFsc2UpO1xuICAgICAgICBpZiAoYm0pIHtcbiAgICAgICAgICBpbnZva2VBcnJheUZucyhibSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFpc0FzeW5jV3JhcHBlclZOb2RlICYmICh2bm9kZUhvb2sgPSBwcm9wcyAmJiBwcm9wcy5vblZub2RlQmVmb3JlTW91bnQpKSB7XG4gICAgICAgICAgaW52b2tlVk5vZGVIb29rKHZub2RlSG9vaywgcGFyZW50LCBpbml0aWFsVk5vZGUpO1xuICAgICAgICB9XG4gICAgICAgIHRvZ2dsZVJlY3Vyc2UoaW5zdGFuY2UsIHRydWUpO1xuICAgICAgICBpZiAoZWwgJiYgaHlkcmF0ZU5vZGUpIHtcbiAgICAgICAgICBjb25zdCBoeWRyYXRlU3ViVHJlZSA9ICgpID0+IHtcbiAgICAgICAgICAgIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpKSB7XG4gICAgICAgICAgICAgIHN0YXJ0TWVhc3VyZShpbnN0YW5jZSwgYHJlbmRlcmApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaW5zdGFuY2Uuc3ViVHJlZSA9IHJlbmRlckNvbXBvbmVudFJvb3QoaW5zdGFuY2UpO1xuICAgICAgICAgICAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikpIHtcbiAgICAgICAgICAgICAgZW5kTWVhc3VyZShpbnN0YW5jZSwgYHJlbmRlcmApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikpIHtcbiAgICAgICAgICAgICAgc3RhcnRNZWFzdXJlKGluc3RhbmNlLCBgaHlkcmF0ZWApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaHlkcmF0ZU5vZGUoXG4gICAgICAgICAgICAgIGVsLFxuICAgICAgICAgICAgICBpbnN0YW5jZS5zdWJUcmVlLFxuICAgICAgICAgICAgICBpbnN0YW5jZSxcbiAgICAgICAgICAgICAgcGFyZW50U3VzcGVuc2UsXG4gICAgICAgICAgICAgIG51bGxcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSkge1xuICAgICAgICAgICAgICBlbmRNZWFzdXJlKGluc3RhbmNlLCBgaHlkcmF0ZWApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH07XG4gICAgICAgICAgaWYgKGlzQXN5bmNXcmFwcGVyVk5vZGUpIHtcbiAgICAgICAgICAgIGluaXRpYWxWTm9kZS50eXBlLl9fYXN5bmNMb2FkZXIoKS50aGVuKFxuICAgICAgICAgICAgICAvLyBub3RlOiB3ZSBhcmUgbW92aW5nIHRoZSByZW5kZXIgY2FsbCBpbnRvIGFuIGFzeW5jIGNhbGxiYWNrLFxuICAgICAgICAgICAgICAvLyB3aGljaCBtZWFucyBpdCB3b24ndCB0cmFjayBkZXBlbmRlbmNpZXMgLSBidXQgaXQncyBvayBiZWNhdXNlXG4gICAgICAgICAgICAgIC8vIGEgc2VydmVyLXJlbmRlcmVkIGFzeW5jIHdyYXBwZXIgaXMgYWxyZWFkeSBpbiByZXNvbHZlZCBzdGF0ZVxuICAgICAgICAgICAgICAvLyBhbmQgaXQgd2lsbCBuZXZlciBuZWVkIHRvIGNoYW5nZS5cbiAgICAgICAgICAgICAgKCkgPT4gIWluc3RhbmNlLmlzVW5tb3VudGVkICYmIGh5ZHJhdGVTdWJUcmVlKClcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGh5ZHJhdGVTdWJUcmVlKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpKSB7XG4gICAgICAgICAgICBzdGFydE1lYXN1cmUoaW5zdGFuY2UsIGByZW5kZXJgKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgY29uc3Qgc3ViVHJlZSA9IGluc3RhbmNlLnN1YlRyZWUgPSByZW5kZXJDb21wb25lbnRSb290KGluc3RhbmNlKTtcbiAgICAgICAgICBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSkge1xuICAgICAgICAgICAgZW5kTWVhc3VyZShpbnN0YW5jZSwgYHJlbmRlcmApO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSkge1xuICAgICAgICAgICAgc3RhcnRNZWFzdXJlKGluc3RhbmNlLCBgcGF0Y2hgKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcGF0Y2goXG4gICAgICAgICAgICBudWxsLFxuICAgICAgICAgICAgc3ViVHJlZSxcbiAgICAgICAgICAgIGNvbnRhaW5lcixcbiAgICAgICAgICAgIGFuY2hvcixcbiAgICAgICAgICAgIGluc3RhbmNlLFxuICAgICAgICAgICAgcGFyZW50U3VzcGVuc2UsXG4gICAgICAgICAgICBuYW1lc3BhY2VcbiAgICAgICAgICApO1xuICAgICAgICAgIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpKSB7XG4gICAgICAgICAgICBlbmRNZWFzdXJlKGluc3RhbmNlLCBgcGF0Y2hgKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaW5pdGlhbFZOb2RlLmVsID0gc3ViVHJlZS5lbDtcbiAgICAgICAgfVxuICAgICAgICBpZiAobSkge1xuICAgICAgICAgIHF1ZXVlUG9zdFJlbmRlckVmZmVjdChtLCBwYXJlbnRTdXNwZW5zZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFpc0FzeW5jV3JhcHBlclZOb2RlICYmICh2bm9kZUhvb2sgPSBwcm9wcyAmJiBwcm9wcy5vblZub2RlTW91bnRlZCkpIHtcbiAgICAgICAgICBjb25zdCBzY29wZWRJbml0aWFsVk5vZGUgPSBpbml0aWFsVk5vZGU7XG4gICAgICAgICAgcXVldWVQb3N0UmVuZGVyRWZmZWN0KFxuICAgICAgICAgICAgKCkgPT4gaW52b2tlVk5vZGVIb29rKHZub2RlSG9vaywgcGFyZW50LCBzY29wZWRJbml0aWFsVk5vZGUpLFxuICAgICAgICAgICAgcGFyZW50U3VzcGVuc2VcbiAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpbml0aWFsVk5vZGUuc2hhcGVGbGFnICYgMjU2IHx8IHBhcmVudCAmJiBpc0FzeW5jV3JhcHBlcihwYXJlbnQudm5vZGUpICYmIHBhcmVudC52bm9kZS5zaGFwZUZsYWcgJiAyNTYpIHtcbiAgICAgICAgICBpbnN0YW5jZS5hICYmIHF1ZXVlUG9zdFJlbmRlckVmZmVjdChpbnN0YW5jZS5hLCBwYXJlbnRTdXNwZW5zZSk7XG4gICAgICAgIH1cbiAgICAgICAgaW5zdGFuY2UuaXNNb3VudGVkID0gdHJ1ZTtcbiAgICAgICAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgfHwgX19WVUVfUFJPRF9ERVZUT09MU19fKSB7XG4gICAgICAgICAgZGV2dG9vbHNDb21wb25lbnRBZGRlZChpbnN0YW5jZSk7XG4gICAgICAgIH1cbiAgICAgICAgaW5pdGlhbFZOb2RlID0gY29udGFpbmVyID0gYW5jaG9yID0gbnVsbDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGxldCB7IG5leHQsIGJ1LCB1LCBwYXJlbnQsIHZub2RlIH0gPSBpbnN0YW5jZTtcbiAgICAgICAge1xuICAgICAgICAgIGNvbnN0IG5vbkh5ZHJhdGVkQXN5bmNSb290ID0gbG9jYXRlTm9uSHlkcmF0ZWRBc3luY1Jvb3QoaW5zdGFuY2UpO1xuICAgICAgICAgIGlmIChub25IeWRyYXRlZEFzeW5jUm9vdCkge1xuICAgICAgICAgICAgaWYgKG5leHQpIHtcbiAgICAgICAgICAgICAgbmV4dC5lbCA9IHZub2RlLmVsO1xuICAgICAgICAgICAgICB1cGRhdGVDb21wb25lbnRQcmVSZW5kZXIoaW5zdGFuY2UsIG5leHQsIG9wdGltaXplZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBub25IeWRyYXRlZEFzeW5jUm9vdC5hc3luY0RlcC50aGVuKCgpID0+IHtcbiAgICAgICAgICAgICAgaWYgKCFpbnN0YW5jZS5pc1VubW91bnRlZCkge1xuICAgICAgICAgICAgICAgIGNvbXBvbmVudFVwZGF0ZUZuKCk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBsZXQgb3JpZ2luTmV4dCA9IG5leHQ7XG4gICAgICAgIGxldCB2bm9kZUhvb2s7XG4gICAgICAgIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpKSB7XG4gICAgICAgICAgcHVzaFdhcm5pbmdDb250ZXh0KG5leHQgfHwgaW5zdGFuY2Uudm5vZGUpO1xuICAgICAgICB9XG4gICAgICAgIHRvZ2dsZVJlY3Vyc2UoaW5zdGFuY2UsIGZhbHNlKTtcbiAgICAgICAgaWYgKG5leHQpIHtcbiAgICAgICAgICBuZXh0LmVsID0gdm5vZGUuZWw7XG4gICAgICAgICAgdXBkYXRlQ29tcG9uZW50UHJlUmVuZGVyKGluc3RhbmNlLCBuZXh0LCBvcHRpbWl6ZWQpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIG5leHQgPSB2bm9kZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoYnUpIHtcbiAgICAgICAgICBpbnZva2VBcnJheUZucyhidSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHZub2RlSG9vayA9IG5leHQucHJvcHMgJiYgbmV4dC5wcm9wcy5vblZub2RlQmVmb3JlVXBkYXRlKSB7XG4gICAgICAgICAgaW52b2tlVk5vZGVIb29rKHZub2RlSG9vaywgcGFyZW50LCBuZXh0LCB2bm9kZSk7XG4gICAgICAgIH1cbiAgICAgICAgdG9nZ2xlUmVjdXJzZShpbnN0YW5jZSwgdHJ1ZSk7XG4gICAgICAgIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpKSB7XG4gICAgICAgICAgc3RhcnRNZWFzdXJlKGluc3RhbmNlLCBgcmVuZGVyYCk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgbmV4dFRyZWUgPSByZW5kZXJDb21wb25lbnRSb290KGluc3RhbmNlKTtcbiAgICAgICAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikpIHtcbiAgICAgICAgICBlbmRNZWFzdXJlKGluc3RhbmNlLCBgcmVuZGVyYCk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcHJldlRyZWUgPSBpbnN0YW5jZS5zdWJUcmVlO1xuICAgICAgICBpbnN0YW5jZS5zdWJUcmVlID0gbmV4dFRyZWU7XG4gICAgICAgIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpKSB7XG4gICAgICAgICAgc3RhcnRNZWFzdXJlKGluc3RhbmNlLCBgcGF0Y2hgKTtcbiAgICAgICAgfVxuICAgICAgICBwYXRjaChcbiAgICAgICAgICBwcmV2VHJlZSxcbiAgICAgICAgICBuZXh0VHJlZSxcbiAgICAgICAgICAvLyBwYXJlbnQgbWF5IGhhdmUgY2hhbmdlZCBpZiBpdCdzIGluIGEgdGVsZXBvcnRcbiAgICAgICAgICBob3N0UGFyZW50Tm9kZShwcmV2VHJlZS5lbCksXG4gICAgICAgICAgLy8gYW5jaG9yIG1heSBoYXZlIGNoYW5nZWQgaWYgaXQncyBpbiBhIGZyYWdtZW50XG4gICAgICAgICAgZ2V0TmV4dEhvc3ROb2RlKHByZXZUcmVlKSxcbiAgICAgICAgICBpbnN0YW5jZSxcbiAgICAgICAgICBwYXJlbnRTdXNwZW5zZSxcbiAgICAgICAgICBuYW1lc3BhY2VcbiAgICAgICAgKTtcbiAgICAgICAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikpIHtcbiAgICAgICAgICBlbmRNZWFzdXJlKGluc3RhbmNlLCBgcGF0Y2hgKTtcbiAgICAgICAgfVxuICAgICAgICBuZXh0LmVsID0gbmV4dFRyZWUuZWw7XG4gICAgICAgIGlmIChvcmlnaW5OZXh0ID09PSBudWxsKSB7XG4gICAgICAgICAgdXBkYXRlSE9DSG9zdEVsKGluc3RhbmNlLCBuZXh0VHJlZS5lbCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHUpIHtcbiAgICAgICAgICBxdWV1ZVBvc3RSZW5kZXJFZmZlY3QodSwgcGFyZW50U3VzcGVuc2UpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh2bm9kZUhvb2sgPSBuZXh0LnByb3BzICYmIG5leHQucHJvcHMub25Wbm9kZVVwZGF0ZWQpIHtcbiAgICAgICAgICBxdWV1ZVBvc3RSZW5kZXJFZmZlY3QoXG4gICAgICAgICAgICAoKSA9PiBpbnZva2VWTm9kZUhvb2sodm5vZGVIb29rLCBwYXJlbnQsIG5leHQsIHZub2RlKSxcbiAgICAgICAgICAgIHBhcmVudFN1c3BlbnNlXG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSB8fCBfX1ZVRV9QUk9EX0RFVlRPT0xTX18pIHtcbiAgICAgICAgICBkZXZ0b29sc0NvbXBvbmVudFVwZGF0ZWQoaW5zdGFuY2UpO1xuICAgICAgICB9XG4gICAgICAgIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpKSB7XG4gICAgICAgICAgcG9wV2FybmluZ0NvbnRleHQoKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH07XG4gICAgY29uc3QgZWZmZWN0ID0gaW5zdGFuY2UuZWZmZWN0ID0gbmV3IFJlYWN0aXZlRWZmZWN0KFxuICAgICAgY29tcG9uZW50VXBkYXRlRm4sXG4gICAgICBOT09QLFxuICAgICAgKCkgPT4gcXVldWVKb2IodXBkYXRlKSxcbiAgICAgIGluc3RhbmNlLnNjb3BlXG4gICAgICAvLyB0cmFjayBpdCBpbiBjb21wb25lbnQncyBlZmZlY3Qgc2NvcGVcbiAgICApO1xuICAgIGNvbnN0IHVwZGF0ZSA9IGluc3RhbmNlLnVwZGF0ZSA9ICgpID0+IHtcbiAgICAgIGlmIChlZmZlY3QuZGlydHkpIHtcbiAgICAgICAgZWZmZWN0LnJ1bigpO1xuICAgICAgfVxuICAgIH07XG4gICAgdXBkYXRlLmlkID0gaW5zdGFuY2UudWlkO1xuICAgIHRvZ2dsZVJlY3Vyc2UoaW5zdGFuY2UsIHRydWUpO1xuICAgIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpKSB7XG4gICAgICBlZmZlY3Qub25UcmFjayA9IGluc3RhbmNlLnJ0YyA/IChlKSA9PiBpbnZva2VBcnJheUZucyhpbnN0YW5jZS5ydGMsIGUpIDogdm9pZCAwO1xuICAgICAgZWZmZWN0Lm9uVHJpZ2dlciA9IGluc3RhbmNlLnJ0ZyA/IChlKSA9PiBpbnZva2VBcnJheUZucyhpbnN0YW5jZS5ydGcsIGUpIDogdm9pZCAwO1xuICAgICAgdXBkYXRlLm93bmVySW5zdGFuY2UgPSBpbnN0YW5jZTtcbiAgICB9XG4gICAgdXBkYXRlKCk7XG4gIH07XG4gIGNvbnN0IHVwZGF0ZUNvbXBvbmVudFByZVJlbmRlciA9IChpbnN0YW5jZSwgbmV4dFZOb2RlLCBvcHRpbWl6ZWQpID0+IHtcbiAgICBuZXh0Vk5vZGUuY29tcG9uZW50ID0gaW5zdGFuY2U7XG4gICAgY29uc3QgcHJldlByb3BzID0gaW5zdGFuY2Uudm5vZGUucHJvcHM7XG4gICAgaW5zdGFuY2Uudm5vZGUgPSBuZXh0Vk5vZGU7XG4gICAgaW5zdGFuY2UubmV4dCA9IG51bGw7XG4gICAgdXBkYXRlUHJvcHMoaW5zdGFuY2UsIG5leHRWTm9kZS5wcm9wcywgcHJldlByb3BzLCBvcHRpbWl6ZWQpO1xuICAgIHVwZGF0ZVNsb3RzKGluc3RhbmNlLCBuZXh0Vk5vZGUuY2hpbGRyZW4sIG9wdGltaXplZCk7XG4gICAgcGF1c2VUcmFja2luZygpO1xuICAgIGZsdXNoUHJlRmx1c2hDYnMoaW5zdGFuY2UpO1xuICAgIHJlc2V0VHJhY2tpbmcoKTtcbiAgfTtcbiAgY29uc3QgcGF0Y2hDaGlsZHJlbiA9IChuMSwgbjIsIGNvbnRhaW5lciwgYW5jaG9yLCBwYXJlbnRDb21wb25lbnQsIHBhcmVudFN1c3BlbnNlLCBuYW1lc3BhY2UsIHNsb3RTY29wZUlkcywgb3B0aW1pemVkID0gZmFsc2UpID0+IHtcbiAgICBjb25zdCBjMSA9IG4xICYmIG4xLmNoaWxkcmVuO1xuICAgIGNvbnN0IHByZXZTaGFwZUZsYWcgPSBuMSA/IG4xLnNoYXBlRmxhZyA6IDA7XG4gICAgY29uc3QgYzIgPSBuMi5jaGlsZHJlbjtcbiAgICBjb25zdCB7IHBhdGNoRmxhZywgc2hhcGVGbGFnIH0gPSBuMjtcbiAgICBpZiAocGF0Y2hGbGFnID4gMCkge1xuICAgICAgaWYgKHBhdGNoRmxhZyAmIDEyOCkge1xuICAgICAgICBwYXRjaEtleWVkQ2hpbGRyZW4oXG4gICAgICAgICAgYzEsXG4gICAgICAgICAgYzIsXG4gICAgICAgICAgY29udGFpbmVyLFxuICAgICAgICAgIGFuY2hvcixcbiAgICAgICAgICBwYXJlbnRDb21wb25lbnQsXG4gICAgICAgICAgcGFyZW50U3VzcGVuc2UsXG4gICAgICAgICAgbmFtZXNwYWNlLFxuICAgICAgICAgIHNsb3RTY29wZUlkcyxcbiAgICAgICAgICBvcHRpbWl6ZWRcbiAgICAgICAgKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfSBlbHNlIGlmIChwYXRjaEZsYWcgJiAyNTYpIHtcbiAgICAgICAgcGF0Y2hVbmtleWVkQ2hpbGRyZW4oXG4gICAgICAgICAgYzEsXG4gICAgICAgICAgYzIsXG4gICAgICAgICAgY29udGFpbmVyLFxuICAgICAgICAgIGFuY2hvcixcbiAgICAgICAgICBwYXJlbnRDb21wb25lbnQsXG4gICAgICAgICAgcGFyZW50U3VzcGVuc2UsXG4gICAgICAgICAgbmFtZXNwYWNlLFxuICAgICAgICAgIHNsb3RTY29wZUlkcyxcbiAgICAgICAgICBvcHRpbWl6ZWRcbiAgICAgICAgKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAoc2hhcGVGbGFnICYgOCkge1xuICAgICAgaWYgKHByZXZTaGFwZUZsYWcgJiAxNikge1xuICAgICAgICB1bm1vdW50Q2hpbGRyZW4oYzEsIHBhcmVudENvbXBvbmVudCwgcGFyZW50U3VzcGVuc2UpO1xuICAgICAgfVxuICAgICAgaWYgKGMyICE9PSBjMSkge1xuICAgICAgICBob3N0U2V0RWxlbWVudFRleHQoY29udGFpbmVyLCBjMik7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmIChwcmV2U2hhcGVGbGFnICYgMTYpIHtcbiAgICAgICAgaWYgKHNoYXBlRmxhZyAmIDE2KSB7XG4gICAgICAgICAgcGF0Y2hLZXllZENoaWxkcmVuKFxuICAgICAgICAgICAgYzEsXG4gICAgICAgICAgICBjMixcbiAgICAgICAgICAgIGNvbnRhaW5lcixcbiAgICAgICAgICAgIGFuY2hvcixcbiAgICAgICAgICAgIHBhcmVudENvbXBvbmVudCxcbiAgICAgICAgICAgIHBhcmVudFN1c3BlbnNlLFxuICAgICAgICAgICAgbmFtZXNwYWNlLFxuICAgICAgICAgICAgc2xvdFNjb3BlSWRzLFxuICAgICAgICAgICAgb3B0aW1pemVkXG4gICAgICAgICAgKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB1bm1vdW50Q2hpbGRyZW4oYzEsIHBhcmVudENvbXBvbmVudCwgcGFyZW50U3VzcGVuc2UsIHRydWUpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAocHJldlNoYXBlRmxhZyAmIDgpIHtcbiAgICAgICAgICBob3N0U2V0RWxlbWVudFRleHQoY29udGFpbmVyLCBcIlwiKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoc2hhcGVGbGFnICYgMTYpIHtcbiAgICAgICAgICBtb3VudENoaWxkcmVuKFxuICAgICAgICAgICAgYzIsXG4gICAgICAgICAgICBjb250YWluZXIsXG4gICAgICAgICAgICBhbmNob3IsXG4gICAgICAgICAgICBwYXJlbnRDb21wb25lbnQsXG4gICAgICAgICAgICBwYXJlbnRTdXNwZW5zZSxcbiAgICAgICAgICAgIG5hbWVzcGFjZSxcbiAgICAgICAgICAgIHNsb3RTY29wZUlkcyxcbiAgICAgICAgICAgIG9wdGltaXplZFxuICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH07XG4gIGNvbnN0IHBhdGNoVW5rZXllZENoaWxkcmVuID0gKGMxLCBjMiwgY29udGFpbmVyLCBhbmNob3IsIHBhcmVudENvbXBvbmVudCwgcGFyZW50U3VzcGVuc2UsIG5hbWVzcGFjZSwgc2xvdFNjb3BlSWRzLCBvcHRpbWl6ZWQpID0+IHtcbiAgICBjMSA9IGMxIHx8IEVNUFRZX0FSUjtcbiAgICBjMiA9IGMyIHx8IEVNUFRZX0FSUjtcbiAgICBjb25zdCBvbGRMZW5ndGggPSBjMS5sZW5ndGg7XG4gICAgY29uc3QgbmV3TGVuZ3RoID0gYzIubGVuZ3RoO1xuICAgIGNvbnN0IGNvbW1vbkxlbmd0aCA9IE1hdGgubWluKG9sZExlbmd0aCwgbmV3TGVuZ3RoKTtcbiAgICBsZXQgaTtcbiAgICBmb3IgKGkgPSAwOyBpIDwgY29tbW9uTGVuZ3RoOyBpKyspIHtcbiAgICAgIGNvbnN0IG5leHRDaGlsZCA9IGMyW2ldID0gb3B0aW1pemVkID8gY2xvbmVJZk1vdW50ZWQoYzJbaV0pIDogbm9ybWFsaXplVk5vZGUoYzJbaV0pO1xuICAgICAgcGF0Y2goXG4gICAgICAgIGMxW2ldLFxuICAgICAgICBuZXh0Q2hpbGQsXG4gICAgICAgIGNvbnRhaW5lcixcbiAgICAgICAgbnVsbCxcbiAgICAgICAgcGFyZW50Q29tcG9uZW50LFxuICAgICAgICBwYXJlbnRTdXNwZW5zZSxcbiAgICAgICAgbmFtZXNwYWNlLFxuICAgICAgICBzbG90U2NvcGVJZHMsXG4gICAgICAgIG9wdGltaXplZFxuICAgICAgKTtcbiAgICB9XG4gICAgaWYgKG9sZExlbmd0aCA+IG5ld0xlbmd0aCkge1xuICAgICAgdW5tb3VudENoaWxkcmVuKFxuICAgICAgICBjMSxcbiAgICAgICAgcGFyZW50Q29tcG9uZW50LFxuICAgICAgICBwYXJlbnRTdXNwZW5zZSxcbiAgICAgICAgdHJ1ZSxcbiAgICAgICAgZmFsc2UsXG4gICAgICAgIGNvbW1vbkxlbmd0aFxuICAgICAgKTtcbiAgICB9IGVsc2Uge1xuICAgICAgbW91bnRDaGlsZHJlbihcbiAgICAgICAgYzIsXG4gICAgICAgIGNvbnRhaW5lcixcbiAgICAgICAgYW5jaG9yLFxuICAgICAgICBwYXJlbnRDb21wb25lbnQsXG4gICAgICAgIHBhcmVudFN1c3BlbnNlLFxuICAgICAgICBuYW1lc3BhY2UsXG4gICAgICAgIHNsb3RTY29wZUlkcyxcbiAgICAgICAgb3B0aW1pemVkLFxuICAgICAgICBjb21tb25MZW5ndGhcbiAgICAgICk7XG4gICAgfVxuICB9O1xuICBjb25zdCBwYXRjaEtleWVkQ2hpbGRyZW4gPSAoYzEsIGMyLCBjb250YWluZXIsIHBhcmVudEFuY2hvciwgcGFyZW50Q29tcG9uZW50LCBwYXJlbnRTdXNwZW5zZSwgbmFtZXNwYWNlLCBzbG90U2NvcGVJZHMsIG9wdGltaXplZCkgPT4ge1xuICAgIGxldCBpID0gMDtcbiAgICBjb25zdCBsMiA9IGMyLmxlbmd0aDtcbiAgICBsZXQgZTEgPSBjMS5sZW5ndGggLSAxO1xuICAgIGxldCBlMiA9IGwyIC0gMTtcbiAgICB3aGlsZSAoaSA8PSBlMSAmJiBpIDw9IGUyKSB7XG4gICAgICBjb25zdCBuMSA9IGMxW2ldO1xuICAgICAgY29uc3QgbjIgPSBjMltpXSA9IG9wdGltaXplZCA/IGNsb25lSWZNb3VudGVkKGMyW2ldKSA6IG5vcm1hbGl6ZVZOb2RlKGMyW2ldKTtcbiAgICAgIGlmIChpc1NhbWVWTm9kZVR5cGUobjEsIG4yKSkge1xuICAgICAgICBwYXRjaChcbiAgICAgICAgICBuMSxcbiAgICAgICAgICBuMixcbiAgICAgICAgICBjb250YWluZXIsXG4gICAgICAgICAgbnVsbCxcbiAgICAgICAgICBwYXJlbnRDb21wb25lbnQsXG4gICAgICAgICAgcGFyZW50U3VzcGVuc2UsXG4gICAgICAgICAgbmFtZXNwYWNlLFxuICAgICAgICAgIHNsb3RTY29wZUlkcyxcbiAgICAgICAgICBvcHRpbWl6ZWRcbiAgICAgICAgKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgaSsrO1xuICAgIH1cbiAgICB3aGlsZSAoaSA8PSBlMSAmJiBpIDw9IGUyKSB7XG4gICAgICBjb25zdCBuMSA9IGMxW2UxXTtcbiAgICAgIGNvbnN0IG4yID0gYzJbZTJdID0gb3B0aW1pemVkID8gY2xvbmVJZk1vdW50ZWQoYzJbZTJdKSA6IG5vcm1hbGl6ZVZOb2RlKGMyW2UyXSk7XG4gICAgICBpZiAoaXNTYW1lVk5vZGVUeXBlKG4xLCBuMikpIHtcbiAgICAgICAgcGF0Y2goXG4gICAgICAgICAgbjEsXG4gICAgICAgICAgbjIsXG4gICAgICAgICAgY29udGFpbmVyLFxuICAgICAgICAgIG51bGwsXG4gICAgICAgICAgcGFyZW50Q29tcG9uZW50LFxuICAgICAgICAgIHBhcmVudFN1c3BlbnNlLFxuICAgICAgICAgIG5hbWVzcGFjZSxcbiAgICAgICAgICBzbG90U2NvcGVJZHMsXG4gICAgICAgICAgb3B0aW1pemVkXG4gICAgICAgICk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICAgIGUxLS07XG4gICAgICBlMi0tO1xuICAgIH1cbiAgICBpZiAoaSA+IGUxKSB7XG4gICAgICBpZiAoaSA8PSBlMikge1xuICAgICAgICBjb25zdCBuZXh0UG9zID0gZTIgKyAxO1xuICAgICAgICBjb25zdCBhbmNob3IgPSBuZXh0UG9zIDwgbDIgPyBjMltuZXh0UG9zXS5lbCA6IHBhcmVudEFuY2hvcjtcbiAgICAgICAgd2hpbGUgKGkgPD0gZTIpIHtcbiAgICAgICAgICBwYXRjaChcbiAgICAgICAgICAgIG51bGwsXG4gICAgICAgICAgICBjMltpXSA9IG9wdGltaXplZCA/IGNsb25lSWZNb3VudGVkKGMyW2ldKSA6IG5vcm1hbGl6ZVZOb2RlKGMyW2ldKSxcbiAgICAgICAgICAgIGNvbnRhaW5lcixcbiAgICAgICAgICAgIGFuY2hvcixcbiAgICAgICAgICAgIHBhcmVudENvbXBvbmVudCxcbiAgICAgICAgICAgIHBhcmVudFN1c3BlbnNlLFxuICAgICAgICAgICAgbmFtZXNwYWNlLFxuICAgICAgICAgICAgc2xvdFNjb3BlSWRzLFxuICAgICAgICAgICAgb3B0aW1pemVkXG4gICAgICAgICAgKTtcbiAgICAgICAgICBpKys7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKGkgPiBlMikge1xuICAgICAgd2hpbGUgKGkgPD0gZTEpIHtcbiAgICAgICAgdW5tb3VudChjMVtpXSwgcGFyZW50Q29tcG9uZW50LCBwYXJlbnRTdXNwZW5zZSwgdHJ1ZSk7XG4gICAgICAgIGkrKztcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgczEgPSBpO1xuICAgICAgY29uc3QgczIgPSBpO1xuICAgICAgY29uc3Qga2V5VG9OZXdJbmRleE1hcCA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKCk7XG4gICAgICBmb3IgKGkgPSBzMjsgaSA8PSBlMjsgaSsrKSB7XG4gICAgICAgIGNvbnN0IG5leHRDaGlsZCA9IGMyW2ldID0gb3B0aW1pemVkID8gY2xvbmVJZk1vdW50ZWQoYzJbaV0pIDogbm9ybWFsaXplVk5vZGUoYzJbaV0pO1xuICAgICAgICBpZiAobmV4dENoaWxkLmtleSAhPSBudWxsKSB7XG4gICAgICAgICAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgJiYga2V5VG9OZXdJbmRleE1hcC5oYXMobmV4dENoaWxkLmtleSkpIHtcbiAgICAgICAgICAgIHdhcm4kMShcbiAgICAgICAgICAgICAgYER1cGxpY2F0ZSBrZXlzIGZvdW5kIGR1cmluZyB1cGRhdGU6YCxcbiAgICAgICAgICAgICAgSlNPTi5zdHJpbmdpZnkobmV4dENoaWxkLmtleSksXG4gICAgICAgICAgICAgIGBNYWtlIHN1cmUga2V5cyBhcmUgdW5pcXVlLmBcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGtleVRvTmV3SW5kZXhNYXAuc2V0KG5leHRDaGlsZC5rZXksIGkpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBsZXQgajtcbiAgICAgIGxldCBwYXRjaGVkID0gMDtcbiAgICAgIGNvbnN0IHRvQmVQYXRjaGVkID0gZTIgLSBzMiArIDE7XG4gICAgICBsZXQgbW92ZWQgPSBmYWxzZTtcbiAgICAgIGxldCBtYXhOZXdJbmRleFNvRmFyID0gMDtcbiAgICAgIGNvbnN0IG5ld0luZGV4VG9PbGRJbmRleE1hcCA9IG5ldyBBcnJheSh0b0JlUGF0Y2hlZCk7XG4gICAgICBmb3IgKGkgPSAwOyBpIDwgdG9CZVBhdGNoZWQ7IGkrKylcbiAgICAgICAgbmV3SW5kZXhUb09sZEluZGV4TWFwW2ldID0gMDtcbiAgICAgIGZvciAoaSA9IHMxOyBpIDw9IGUxOyBpKyspIHtcbiAgICAgICAgY29uc3QgcHJldkNoaWxkID0gYzFbaV07XG4gICAgICAgIGlmIChwYXRjaGVkID49IHRvQmVQYXRjaGVkKSB7XG4gICAgICAgICAgdW5tb3VudChwcmV2Q2hpbGQsIHBhcmVudENvbXBvbmVudCwgcGFyZW50U3VzcGVuc2UsIHRydWUpO1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGxldCBuZXdJbmRleDtcbiAgICAgICAgaWYgKHByZXZDaGlsZC5rZXkgIT0gbnVsbCkge1xuICAgICAgICAgIG5ld0luZGV4ID0ga2V5VG9OZXdJbmRleE1hcC5nZXQocHJldkNoaWxkLmtleSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZm9yIChqID0gczI7IGogPD0gZTI7IGorKykge1xuICAgICAgICAgICAgaWYgKG5ld0luZGV4VG9PbGRJbmRleE1hcFtqIC0gczJdID09PSAwICYmIGlzU2FtZVZOb2RlVHlwZShwcmV2Q2hpbGQsIGMyW2pdKSkge1xuICAgICAgICAgICAgICBuZXdJbmRleCA9IGo7XG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAobmV3SW5kZXggPT09IHZvaWQgMCkge1xuICAgICAgICAgIHVubW91bnQocHJldkNoaWxkLCBwYXJlbnRDb21wb25lbnQsIHBhcmVudFN1c3BlbnNlLCB0cnVlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBuZXdJbmRleFRvT2xkSW5kZXhNYXBbbmV3SW5kZXggLSBzMl0gPSBpICsgMTtcbiAgICAgICAgICBpZiAobmV3SW5kZXggPj0gbWF4TmV3SW5kZXhTb0Zhcikge1xuICAgICAgICAgICAgbWF4TmV3SW5kZXhTb0ZhciA9IG5ld0luZGV4O1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBtb3ZlZCA9IHRydWU7XG4gICAgICAgICAgfVxuICAgICAgICAgIHBhdGNoKFxuICAgICAgICAgICAgcHJldkNoaWxkLFxuICAgICAgICAgICAgYzJbbmV3SW5kZXhdLFxuICAgICAgICAgICAgY29udGFpbmVyLFxuICAgICAgICAgICAgbnVsbCxcbiAgICAgICAgICAgIHBhcmVudENvbXBvbmVudCxcbiAgICAgICAgICAgIHBhcmVudFN1c3BlbnNlLFxuICAgICAgICAgICAgbmFtZXNwYWNlLFxuICAgICAgICAgICAgc2xvdFNjb3BlSWRzLFxuICAgICAgICAgICAgb3B0aW1pemVkXG4gICAgICAgICAgKTtcbiAgICAgICAgICBwYXRjaGVkKys7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGNvbnN0IGluY3JlYXNpbmdOZXdJbmRleFNlcXVlbmNlID0gbW92ZWQgPyBnZXRTZXF1ZW5jZShuZXdJbmRleFRvT2xkSW5kZXhNYXApIDogRU1QVFlfQVJSO1xuICAgICAgaiA9IGluY3JlYXNpbmdOZXdJbmRleFNlcXVlbmNlLmxlbmd0aCAtIDE7XG4gICAgICBmb3IgKGkgPSB0b0JlUGF0Y2hlZCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgICAgIGNvbnN0IG5leHRJbmRleCA9IHMyICsgaTtcbiAgICAgICAgY29uc3QgbmV4dENoaWxkID0gYzJbbmV4dEluZGV4XTtcbiAgICAgICAgY29uc3QgYW5jaG9yID0gbmV4dEluZGV4ICsgMSA8IGwyID8gYzJbbmV4dEluZGV4ICsgMV0uZWwgOiBwYXJlbnRBbmNob3I7XG4gICAgICAgIGlmIChuZXdJbmRleFRvT2xkSW5kZXhNYXBbaV0gPT09IDApIHtcbiAgICAgICAgICBwYXRjaChcbiAgICAgICAgICAgIG51bGwsXG4gICAgICAgICAgICBuZXh0Q2hpbGQsXG4gICAgICAgICAgICBjb250YWluZXIsXG4gICAgICAgICAgICBhbmNob3IsXG4gICAgICAgICAgICBwYXJlbnRDb21wb25lbnQsXG4gICAgICAgICAgICBwYXJlbnRTdXNwZW5zZSxcbiAgICAgICAgICAgIG5hbWVzcGFjZSxcbiAgICAgICAgICAgIHNsb3RTY29wZUlkcyxcbiAgICAgICAgICAgIG9wdGltaXplZFxuICAgICAgICAgICk7XG4gICAgICAgIH0gZWxzZSBpZiAobW92ZWQpIHtcbiAgICAgICAgICBpZiAoaiA8IDAgfHwgaSAhPT0gaW5jcmVhc2luZ05ld0luZGV4U2VxdWVuY2Vbal0pIHtcbiAgICAgICAgICAgIG1vdmUobmV4dENoaWxkLCBjb250YWluZXIsIGFuY2hvciwgMik7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGotLTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH07XG4gIGNvbnN0IG1vdmUgPSAodm5vZGUsIGNvbnRhaW5lciwgYW5jaG9yLCBtb3ZlVHlwZSwgcGFyZW50U3VzcGVuc2UgPSBudWxsKSA9PiB7XG4gICAgY29uc3QgeyBlbCwgdHlwZSwgdHJhbnNpdGlvbiwgY2hpbGRyZW4sIHNoYXBlRmxhZyB9ID0gdm5vZGU7XG4gICAgaWYgKHNoYXBlRmxhZyAmIDYpIHtcbiAgICAgIG1vdmUodm5vZGUuY29tcG9uZW50LnN1YlRyZWUsIGNvbnRhaW5lciwgYW5jaG9yLCBtb3ZlVHlwZSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmIChzaGFwZUZsYWcgJiAxMjgpIHtcbiAgICAgIHZub2RlLnN1c3BlbnNlLm1vdmUoY29udGFpbmVyLCBhbmNob3IsIG1vdmVUeXBlKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKHNoYXBlRmxhZyAmIDY0KSB7XG4gICAgICB0eXBlLm1vdmUodm5vZGUsIGNvbnRhaW5lciwgYW5jaG9yLCBpbnRlcm5hbHMpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAodHlwZSA9PT0gRnJhZ21lbnQpIHtcbiAgICAgIGhvc3RJbnNlcnQoZWwsIGNvbnRhaW5lciwgYW5jaG9yKTtcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY2hpbGRyZW4ubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgbW92ZShjaGlsZHJlbltpXSwgY29udGFpbmVyLCBhbmNob3IsIG1vdmVUeXBlKTtcbiAgICAgIH1cbiAgICAgIGhvc3RJbnNlcnQodm5vZGUuYW5jaG9yLCBjb250YWluZXIsIGFuY2hvcik7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmICh0eXBlID09PSBTdGF0aWMpIHtcbiAgICAgIG1vdmVTdGF0aWNOb2RlKHZub2RlLCBjb250YWluZXIsIGFuY2hvcik7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IG5lZWRUcmFuc2l0aW9uMiA9IG1vdmVUeXBlICE9PSAyICYmIHNoYXBlRmxhZyAmIDEgJiYgdHJhbnNpdGlvbjtcbiAgICBpZiAobmVlZFRyYW5zaXRpb24yKSB7XG4gICAgICBpZiAobW92ZVR5cGUgPT09IDApIHtcbiAgICAgICAgdHJhbnNpdGlvbi5iZWZvcmVFbnRlcihlbCk7XG4gICAgICAgIGhvc3RJbnNlcnQoZWwsIGNvbnRhaW5lciwgYW5jaG9yKTtcbiAgICAgICAgcXVldWVQb3N0UmVuZGVyRWZmZWN0KCgpID0+IHRyYW5zaXRpb24uZW50ZXIoZWwpLCBwYXJlbnRTdXNwZW5zZSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zdCB7IGxlYXZlLCBkZWxheUxlYXZlLCBhZnRlckxlYXZlIH0gPSB0cmFuc2l0aW9uO1xuICAgICAgICBjb25zdCByZW1vdmUyID0gKCkgPT4gaG9zdEluc2VydChlbCwgY29udGFpbmVyLCBhbmNob3IpO1xuICAgICAgICBjb25zdCBwZXJmb3JtTGVhdmUgPSAoKSA9PiB7XG4gICAgICAgICAgbGVhdmUoZWwsICgpID0+IHtcbiAgICAgICAgICAgIHJlbW92ZTIoKTtcbiAgICAgICAgICAgIGFmdGVyTGVhdmUgJiYgYWZ0ZXJMZWF2ZSgpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgICAgICBpZiAoZGVsYXlMZWF2ZSkge1xuICAgICAgICAgIGRlbGF5TGVhdmUoZWwsIHJlbW92ZTIsIHBlcmZvcm1MZWF2ZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcGVyZm9ybUxlYXZlKCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgaG9zdEluc2VydChlbCwgY29udGFpbmVyLCBhbmNob3IpO1xuICAgIH1cbiAgfTtcbiAgY29uc3QgdW5tb3VudCA9ICh2bm9kZSwgcGFyZW50Q29tcG9uZW50LCBwYXJlbnRTdXNwZW5zZSwgZG9SZW1vdmUgPSBmYWxzZSwgb3B0aW1pemVkID0gZmFsc2UpID0+IHtcbiAgICBjb25zdCB7XG4gICAgICB0eXBlLFxuICAgICAgcHJvcHMsXG4gICAgICByZWYsXG4gICAgICBjaGlsZHJlbixcbiAgICAgIGR5bmFtaWNDaGlsZHJlbixcbiAgICAgIHNoYXBlRmxhZyxcbiAgICAgIHBhdGNoRmxhZyxcbiAgICAgIGRpcnNcbiAgICB9ID0gdm5vZGU7XG4gICAgaWYgKHJlZiAhPSBudWxsKSB7XG4gICAgICBzZXRSZWYocmVmLCBudWxsLCBwYXJlbnRTdXNwZW5zZSwgdm5vZGUsIHRydWUpO1xuICAgIH1cbiAgICBpZiAoc2hhcGVGbGFnICYgMjU2KSB7XG4gICAgICBwYXJlbnRDb21wb25lbnQuY3R4LmRlYWN0aXZhdGUodm5vZGUpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBzaG91bGRJbnZva2VEaXJzID0gc2hhcGVGbGFnICYgMSAmJiBkaXJzO1xuICAgIGNvbnN0IHNob3VsZEludm9rZVZub2RlSG9vayA9ICFpc0FzeW5jV3JhcHBlcih2bm9kZSk7XG4gICAgbGV0IHZub2RlSG9vaztcbiAgICBpZiAoc2hvdWxkSW52b2tlVm5vZGVIb29rICYmICh2bm9kZUhvb2sgPSBwcm9wcyAmJiBwcm9wcy5vblZub2RlQmVmb3JlVW5tb3VudCkpIHtcbiAgICAgIGludm9rZVZOb2RlSG9vayh2bm9kZUhvb2ssIHBhcmVudENvbXBvbmVudCwgdm5vZGUpO1xuICAgIH1cbiAgICBpZiAoc2hhcGVGbGFnICYgNikge1xuICAgICAgdW5tb3VudENvbXBvbmVudCh2bm9kZS5jb21wb25lbnQsIHBhcmVudFN1c3BlbnNlLCBkb1JlbW92ZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmIChzaGFwZUZsYWcgJiAxMjgpIHtcbiAgICAgICAgdm5vZGUuc3VzcGVuc2UudW5tb3VudChwYXJlbnRTdXNwZW5zZSwgZG9SZW1vdmUpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBpZiAoc2hvdWxkSW52b2tlRGlycykge1xuICAgICAgICBpbnZva2VEaXJlY3RpdmVIb29rKHZub2RlLCBudWxsLCBwYXJlbnRDb21wb25lbnQsIFwiYmVmb3JlVW5tb3VudFwiKTtcbiAgICAgIH1cbiAgICAgIGlmIChzaGFwZUZsYWcgJiA2NCkge1xuICAgICAgICB2bm9kZS50eXBlLnJlbW92ZShcbiAgICAgICAgICB2bm9kZSxcbiAgICAgICAgICBwYXJlbnRDb21wb25lbnQsXG4gICAgICAgICAgcGFyZW50U3VzcGVuc2UsXG4gICAgICAgICAgb3B0aW1pemVkLFxuICAgICAgICAgIGludGVybmFscyxcbiAgICAgICAgICBkb1JlbW92ZVxuICAgICAgICApO1xuICAgICAgfSBlbHNlIGlmIChkeW5hbWljQ2hpbGRyZW4gJiYgLy8gIzExNTM6IGZhc3QgcGF0aCBzaG91bGQgbm90IGJlIHRha2VuIGZvciBub24tc3RhYmxlICh2LWZvcikgZnJhZ21lbnRzXG4gICAgICAodHlwZSAhPT0gRnJhZ21lbnQgfHwgcGF0Y2hGbGFnID4gMCAmJiBwYXRjaEZsYWcgJiA2NCkpIHtcbiAgICAgICAgdW5tb3VudENoaWxkcmVuKFxuICAgICAgICAgIGR5bmFtaWNDaGlsZHJlbixcbiAgICAgICAgICBwYXJlbnRDb21wb25lbnQsXG4gICAgICAgICAgcGFyZW50U3VzcGVuc2UsXG4gICAgICAgICAgZmFsc2UsXG4gICAgICAgICAgdHJ1ZVxuICAgICAgICApO1xuICAgICAgfSBlbHNlIGlmICh0eXBlID09PSBGcmFnbWVudCAmJiBwYXRjaEZsYWcgJiAoMTI4IHwgMjU2KSB8fCAhb3B0aW1pemVkICYmIHNoYXBlRmxhZyAmIDE2KSB7XG4gICAgICAgIHVubW91bnRDaGlsZHJlbihjaGlsZHJlbiwgcGFyZW50Q29tcG9uZW50LCBwYXJlbnRTdXNwZW5zZSk7XG4gICAgICB9XG4gICAgICBpZiAoZG9SZW1vdmUpIHtcbiAgICAgICAgcmVtb3ZlKHZub2RlKTtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKHNob3VsZEludm9rZVZub2RlSG9vayAmJiAodm5vZGVIb29rID0gcHJvcHMgJiYgcHJvcHMub25Wbm9kZVVubW91bnRlZCkgfHwgc2hvdWxkSW52b2tlRGlycykge1xuICAgICAgcXVldWVQb3N0UmVuZGVyRWZmZWN0KCgpID0+IHtcbiAgICAgICAgdm5vZGVIb29rICYmIGludm9rZVZOb2RlSG9vayh2bm9kZUhvb2ssIHBhcmVudENvbXBvbmVudCwgdm5vZGUpO1xuICAgICAgICBzaG91bGRJbnZva2VEaXJzICYmIGludm9rZURpcmVjdGl2ZUhvb2sodm5vZGUsIG51bGwsIHBhcmVudENvbXBvbmVudCwgXCJ1bm1vdW50ZWRcIik7XG4gICAgICB9LCBwYXJlbnRTdXNwZW5zZSk7XG4gICAgfVxuICB9O1xuICBjb25zdCByZW1vdmUgPSAodm5vZGUpID0+IHtcbiAgICBjb25zdCB7IHR5cGUsIGVsLCBhbmNob3IsIHRyYW5zaXRpb24gfSA9IHZub2RlO1xuICAgIGlmICh0eXBlID09PSBGcmFnbWVudCkge1xuICAgICAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgJiYgdm5vZGUucGF0Y2hGbGFnID4gMCAmJiB2bm9kZS5wYXRjaEZsYWcgJiAyMDQ4ICYmIHRyYW5zaXRpb24gJiYgIXRyYW5zaXRpb24ucGVyc2lzdGVkKSB7XG4gICAgICAgIHZub2RlLmNoaWxkcmVuLmZvckVhY2goKGNoaWxkKSA9PiB7XG4gICAgICAgICAgaWYgKGNoaWxkLnR5cGUgPT09IENvbW1lbnQpIHtcbiAgICAgICAgICAgIGhvc3RSZW1vdmUoY2hpbGQuZWwpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZW1vdmUoY2hpbGQpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZW1vdmVGcmFnbWVudChlbCwgYW5jaG9yKTtcbiAgICAgIH1cbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKHR5cGUgPT09IFN0YXRpYykge1xuICAgICAgcmVtb3ZlU3RhdGljTm9kZSh2bm9kZSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IHBlcmZvcm1SZW1vdmUgPSAoKSA9PiB7XG4gICAgICBob3N0UmVtb3ZlKGVsKTtcbiAgICAgIGlmICh0cmFuc2l0aW9uICYmICF0cmFuc2l0aW9uLnBlcnNpc3RlZCAmJiB0cmFuc2l0aW9uLmFmdGVyTGVhdmUpIHtcbiAgICAgICAgdHJhbnNpdGlvbi5hZnRlckxlYXZlKCk7XG4gICAgICB9XG4gICAgfTtcbiAgICBpZiAodm5vZGUuc2hhcGVGbGFnICYgMSAmJiB0cmFuc2l0aW9uICYmICF0cmFuc2l0aW9uLnBlcnNpc3RlZCkge1xuICAgICAgY29uc3QgeyBsZWF2ZSwgZGVsYXlMZWF2ZSB9ID0gdHJhbnNpdGlvbjtcbiAgICAgIGNvbnN0IHBlcmZvcm1MZWF2ZSA9ICgpID0+IGxlYXZlKGVsLCBwZXJmb3JtUmVtb3ZlKTtcbiAgICAgIGlmIChkZWxheUxlYXZlKSB7XG4gICAgICAgIGRlbGF5TGVhdmUodm5vZGUuZWwsIHBlcmZvcm1SZW1vdmUsIHBlcmZvcm1MZWF2ZSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBwZXJmb3JtTGVhdmUoKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgcGVyZm9ybVJlbW92ZSgpO1xuICAgIH1cbiAgfTtcbiAgY29uc3QgcmVtb3ZlRnJhZ21lbnQgPSAoY3VyLCBlbmQpID0+IHtcbiAgICBsZXQgbmV4dDtcbiAgICB3aGlsZSAoY3VyICE9PSBlbmQpIHtcbiAgICAgIG5leHQgPSBob3N0TmV4dFNpYmxpbmcoY3VyKTtcbiAgICAgIGhvc3RSZW1vdmUoY3VyKTtcbiAgICAgIGN1ciA9IG5leHQ7XG4gICAgfVxuICAgIGhvc3RSZW1vdmUoZW5kKTtcbiAgfTtcbiAgY29uc3QgdW5tb3VudENvbXBvbmVudCA9IChpbnN0YW5jZSwgcGFyZW50U3VzcGVuc2UsIGRvUmVtb3ZlKSA9PiB7XG4gICAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgJiYgaW5zdGFuY2UudHlwZS5fX2htcklkKSB7XG4gICAgICB1bnJlZ2lzdGVySE1SKGluc3RhbmNlKTtcbiAgICB9XG4gICAgY29uc3QgeyBidW0sIHNjb3BlLCB1cGRhdGUsIHN1YlRyZWUsIHVtIH0gPSBpbnN0YW5jZTtcbiAgICBpZiAoYnVtKSB7XG4gICAgICBpbnZva2VBcnJheUZucyhidW0pO1xuICAgIH1cbiAgICBzY29wZS5zdG9wKCk7XG4gICAgaWYgKHVwZGF0ZSkge1xuICAgICAgdXBkYXRlLmFjdGl2ZSA9IGZhbHNlO1xuICAgICAgdW5tb3VudChzdWJUcmVlLCBpbnN0YW5jZSwgcGFyZW50U3VzcGVuc2UsIGRvUmVtb3ZlKTtcbiAgICB9XG4gICAgaWYgKHVtKSB7XG4gICAgICBxdWV1ZVBvc3RSZW5kZXJFZmZlY3QodW0sIHBhcmVudFN1c3BlbnNlKTtcbiAgICB9XG4gICAgcXVldWVQb3N0UmVuZGVyRWZmZWN0KCgpID0+IHtcbiAgICAgIGluc3RhbmNlLmlzVW5tb3VudGVkID0gdHJ1ZTtcbiAgICB9LCBwYXJlbnRTdXNwZW5zZSk7XG4gICAgaWYgKHBhcmVudFN1c3BlbnNlICYmIHBhcmVudFN1c3BlbnNlLnBlbmRpbmdCcmFuY2ggJiYgIXBhcmVudFN1c3BlbnNlLmlzVW5tb3VudGVkICYmIGluc3RhbmNlLmFzeW5jRGVwICYmICFpbnN0YW5jZS5hc3luY1Jlc29sdmVkICYmIGluc3RhbmNlLnN1c3BlbnNlSWQgPT09IHBhcmVudFN1c3BlbnNlLnBlbmRpbmdJZCkge1xuICAgICAgcGFyZW50U3VzcGVuc2UuZGVwcy0tO1xuICAgICAgaWYgKHBhcmVudFN1c3BlbnNlLmRlcHMgPT09IDApIHtcbiAgICAgICAgcGFyZW50U3VzcGVuc2UucmVzb2x2ZSgpO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSB8fCBfX1ZVRV9QUk9EX0RFVlRPT0xTX18pIHtcbiAgICAgIGRldnRvb2xzQ29tcG9uZW50UmVtb3ZlZChpbnN0YW5jZSk7XG4gICAgfVxuICB9O1xuICBjb25zdCB1bm1vdW50Q2hpbGRyZW4gPSAoY2hpbGRyZW4sIHBhcmVudENvbXBvbmVudCwgcGFyZW50U3VzcGVuc2UsIGRvUmVtb3ZlID0gZmFsc2UsIG9wdGltaXplZCA9IGZhbHNlLCBzdGFydCA9IDApID0+IHtcbiAgICBmb3IgKGxldCBpID0gc3RhcnQ7IGkgPCBjaGlsZHJlbi5sZW5ndGg7IGkrKykge1xuICAgICAgdW5tb3VudChjaGlsZHJlbltpXSwgcGFyZW50Q29tcG9uZW50LCBwYXJlbnRTdXNwZW5zZSwgZG9SZW1vdmUsIG9wdGltaXplZCk7XG4gICAgfVxuICB9O1xuICBjb25zdCBnZXROZXh0SG9zdE5vZGUgPSAodm5vZGUpID0+IHtcbiAgICBpZiAodm5vZGUuc2hhcGVGbGFnICYgNikge1xuICAgICAgcmV0dXJuIGdldE5leHRIb3N0Tm9kZSh2bm9kZS5jb21wb25lbnQuc3ViVHJlZSk7XG4gICAgfVxuICAgIGlmICh2bm9kZS5zaGFwZUZsYWcgJiAxMjgpIHtcbiAgICAgIHJldHVybiB2bm9kZS5zdXNwZW5zZS5uZXh0KCk7XG4gICAgfVxuICAgIHJldHVybiBob3N0TmV4dFNpYmxpbmcodm5vZGUuYW5jaG9yIHx8IHZub2RlLmVsKTtcbiAgfTtcbiAgbGV0IGlzRmx1c2hpbmcgPSBmYWxzZTtcbiAgY29uc3QgcmVuZGVyID0gKHZub2RlLCBjb250YWluZXIsIG5hbWVzcGFjZSkgPT4ge1xuICAgIGlmICh2bm9kZSA9PSBudWxsKSB7XG4gICAgICBpZiAoY29udGFpbmVyLl92bm9kZSkge1xuICAgICAgICB1bm1vdW50KGNvbnRhaW5lci5fdm5vZGUsIG51bGwsIG51bGwsIHRydWUpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBwYXRjaChcbiAgICAgICAgY29udGFpbmVyLl92bm9kZSB8fCBudWxsLFxuICAgICAgICB2bm9kZSxcbiAgICAgICAgY29udGFpbmVyLFxuICAgICAgICBudWxsLFxuICAgICAgICBudWxsLFxuICAgICAgICBudWxsLFxuICAgICAgICBuYW1lc3BhY2VcbiAgICAgICk7XG4gICAgfVxuICAgIGlmICghaXNGbHVzaGluZykge1xuICAgICAgaXNGbHVzaGluZyA9IHRydWU7XG4gICAgICBmbHVzaFByZUZsdXNoQ2JzKCk7XG4gICAgICBmbHVzaFBvc3RGbHVzaENicygpO1xuICAgICAgaXNGbHVzaGluZyA9IGZhbHNlO1xuICAgIH1cbiAgICBjb250YWluZXIuX3Zub2RlID0gdm5vZGU7XG4gIH07XG4gIGNvbnN0IGludGVybmFscyA9IHtcbiAgICBwOiBwYXRjaCxcbiAgICB1bTogdW5tb3VudCxcbiAgICBtOiBtb3ZlLFxuICAgIHI6IHJlbW92ZSxcbiAgICBtdDogbW91bnRDb21wb25lbnQsXG4gICAgbWM6IG1vdW50Q2hpbGRyZW4sXG4gICAgcGM6IHBhdGNoQ2hpbGRyZW4sXG4gICAgcGJjOiBwYXRjaEJsb2NrQ2hpbGRyZW4sXG4gICAgbjogZ2V0TmV4dEhvc3ROb2RlLFxuICAgIG86IG9wdGlvbnNcbiAgfTtcbiAgbGV0IGh5ZHJhdGU7XG4gIGxldCBoeWRyYXRlTm9kZTtcbiAgaWYgKGNyZWF0ZUh5ZHJhdGlvbkZucykge1xuICAgIFtoeWRyYXRlLCBoeWRyYXRlTm9kZV0gPSBjcmVhdGVIeWRyYXRpb25GbnMoXG4gICAgICBpbnRlcm5hbHNcbiAgICApO1xuICB9XG4gIHJldHVybiB7XG4gICAgcmVuZGVyLFxuICAgIGh5ZHJhdGUsXG4gICAgY3JlYXRlQXBwOiBjcmVhdGVBcHBBUEkocmVuZGVyLCBoeWRyYXRlKVxuICB9O1xufVxuZnVuY3Rpb24gcmVzb2x2ZUNoaWxkcmVuTmFtZXNwYWNlKHsgdHlwZSwgcHJvcHMgfSwgY3VycmVudE5hbWVzcGFjZSkge1xuICByZXR1cm4gY3VycmVudE5hbWVzcGFjZSA9PT0gXCJzdmdcIiAmJiB0eXBlID09PSBcImZvcmVpZ25PYmplY3RcIiB8fCBjdXJyZW50TmFtZXNwYWNlID09PSBcIm1hdGhtbFwiICYmIHR5cGUgPT09IFwiYW5ub3RhdGlvbi14bWxcIiAmJiBwcm9wcyAmJiBwcm9wcy5lbmNvZGluZyAmJiBwcm9wcy5lbmNvZGluZy5pbmNsdWRlcyhcImh0bWxcIikgPyB2b2lkIDAgOiBjdXJyZW50TmFtZXNwYWNlO1xufVxuZnVuY3Rpb24gdG9nZ2xlUmVjdXJzZSh7IGVmZmVjdCwgdXBkYXRlIH0sIGFsbG93ZWQpIHtcbiAgZWZmZWN0LmFsbG93UmVjdXJzZSA9IHVwZGF0ZS5hbGxvd1JlY3Vyc2UgPSBhbGxvd2VkO1xufVxuZnVuY3Rpb24gbmVlZFRyYW5zaXRpb24ocGFyZW50U3VzcGVuc2UsIHRyYW5zaXRpb24pIHtcbiAgcmV0dXJuICghcGFyZW50U3VzcGVuc2UgfHwgcGFyZW50U3VzcGVuc2UgJiYgIXBhcmVudFN1c3BlbnNlLnBlbmRpbmdCcmFuY2gpICYmIHRyYW5zaXRpb24gJiYgIXRyYW5zaXRpb24ucGVyc2lzdGVkO1xufVxuZnVuY3Rpb24gdHJhdmVyc2VTdGF0aWNDaGlsZHJlbihuMSwgbjIsIHNoYWxsb3cgPSBmYWxzZSkge1xuICBjb25zdCBjaDEgPSBuMS5jaGlsZHJlbjtcbiAgY29uc3QgY2gyID0gbjIuY2hpbGRyZW47XG4gIGlmIChpc0FycmF5KGNoMSkgJiYgaXNBcnJheShjaDIpKSB7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjaDEubGVuZ3RoOyBpKyspIHtcbiAgICAgIGNvbnN0IGMxID0gY2gxW2ldO1xuICAgICAgbGV0IGMyID0gY2gyW2ldO1xuICAgICAgaWYgKGMyLnNoYXBlRmxhZyAmIDEgJiYgIWMyLmR5bmFtaWNDaGlsZHJlbikge1xuICAgICAgICBpZiAoYzIucGF0Y2hGbGFnIDw9IDAgfHwgYzIucGF0Y2hGbGFnID09PSAzMikge1xuICAgICAgICAgIGMyID0gY2gyW2ldID0gY2xvbmVJZk1vdW50ZWQoY2gyW2ldKTtcbiAgICAgICAgICBjMi5lbCA9IGMxLmVsO1xuICAgICAgICB9XG4gICAgICAgIGlmICghc2hhbGxvdylcbiAgICAgICAgICB0cmF2ZXJzZVN0YXRpY0NoaWxkcmVuKGMxLCBjMik7XG4gICAgICB9XG4gICAgICBpZiAoYzIudHlwZSA9PT0gVGV4dCkge1xuICAgICAgICBjMi5lbCA9IGMxLmVsO1xuICAgICAgfVxuICAgICAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgJiYgYzIudHlwZSA9PT0gQ29tbWVudCAmJiAhYzIuZWwpIHtcbiAgICAgICAgYzIuZWwgPSBjMS5lbDtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cbmZ1bmN0aW9uIGdldFNlcXVlbmNlKGFycikge1xuICBjb25zdCBwID0gYXJyLnNsaWNlKCk7XG4gIGNvbnN0IHJlc3VsdCA9IFswXTtcbiAgbGV0IGksIGosIHUsIHYsIGM7XG4gIGNvbnN0IGxlbiA9IGFyci5sZW5ndGg7XG4gIGZvciAoaSA9IDA7IGkgPCBsZW47IGkrKykge1xuICAgIGNvbnN0IGFyckkgPSBhcnJbaV07XG4gICAgaWYgKGFyckkgIT09IDApIHtcbiAgICAgIGogPSByZXN1bHRbcmVzdWx0Lmxlbmd0aCAtIDFdO1xuICAgICAgaWYgKGFycltqXSA8IGFyckkpIHtcbiAgICAgICAgcFtpXSA9IGo7XG4gICAgICAgIHJlc3VsdC5wdXNoKGkpO1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIHUgPSAwO1xuICAgICAgdiA9IHJlc3VsdC5sZW5ndGggLSAxO1xuICAgICAgd2hpbGUgKHUgPCB2KSB7XG4gICAgICAgIGMgPSB1ICsgdiA+PiAxO1xuICAgICAgICBpZiAoYXJyW3Jlc3VsdFtjXV0gPCBhcnJJKSB7XG4gICAgICAgICAgdSA9IGMgKyAxO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHYgPSBjO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoYXJySSA8IGFycltyZXN1bHRbdV1dKSB7XG4gICAgICAgIGlmICh1ID4gMCkge1xuICAgICAgICAgIHBbaV0gPSByZXN1bHRbdSAtIDFdO1xuICAgICAgICB9XG4gICAgICAgIHJlc3VsdFt1XSA9IGk7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIHUgPSByZXN1bHQubGVuZ3RoO1xuICB2ID0gcmVzdWx0W3UgLSAxXTtcbiAgd2hpbGUgKHUtLSA+IDApIHtcbiAgICByZXN1bHRbdV0gPSB2O1xuICAgIHYgPSBwW3ZdO1xuICB9XG4gIHJldHVybiByZXN1bHQ7XG59XG5mdW5jdGlvbiBsb2NhdGVOb25IeWRyYXRlZEFzeW5jUm9vdChpbnN0YW5jZSkge1xuICBjb25zdCBzdWJDb21wb25lbnQgPSBpbnN0YW5jZS5zdWJUcmVlLmNvbXBvbmVudDtcbiAgaWYgKHN1YkNvbXBvbmVudCkge1xuICAgIGlmIChzdWJDb21wb25lbnQuYXN5bmNEZXAgJiYgIXN1YkNvbXBvbmVudC5hc3luY1Jlc29sdmVkKSB7XG4gICAgICByZXR1cm4gc3ViQ29tcG9uZW50O1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gbG9jYXRlTm9uSHlkcmF0ZWRBc3luY1Jvb3Qoc3ViQ29tcG9uZW50KTtcbiAgICB9XG4gIH1cbn1cblxuY29uc3QgaXNUZWxlcG9ydCA9ICh0eXBlKSA9PiB0eXBlLl9faXNUZWxlcG9ydDtcbmNvbnN0IGlzVGVsZXBvcnREaXNhYmxlZCA9IChwcm9wcykgPT4gcHJvcHMgJiYgKHByb3BzLmRpc2FibGVkIHx8IHByb3BzLmRpc2FibGVkID09PSBcIlwiKTtcbmNvbnN0IGlzVGFyZ2V0U1ZHID0gKHRhcmdldCkgPT4gdHlwZW9mIFNWR0VsZW1lbnQgIT09IFwidW5kZWZpbmVkXCIgJiYgdGFyZ2V0IGluc3RhbmNlb2YgU1ZHRWxlbWVudDtcbmNvbnN0IGlzVGFyZ2V0TWF0aE1MID0gKHRhcmdldCkgPT4gdHlwZW9mIE1hdGhNTEVsZW1lbnQgPT09IFwiZnVuY3Rpb25cIiAmJiB0YXJnZXQgaW5zdGFuY2VvZiBNYXRoTUxFbGVtZW50O1xuY29uc3QgcmVzb2x2ZVRhcmdldCA9IChwcm9wcywgc2VsZWN0KSA9PiB7XG4gIGNvbnN0IHRhcmdldFNlbGVjdG9yID0gcHJvcHMgJiYgcHJvcHMudG87XG4gIGlmIChpc1N0cmluZyh0YXJnZXRTZWxlY3RvcikpIHtcbiAgICBpZiAoIXNlbGVjdCkge1xuICAgICAgISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSAmJiB3YXJuJDEoXG4gICAgICAgIGBDdXJyZW50IHJlbmRlcmVyIGRvZXMgbm90IHN1cHBvcnQgc3RyaW5nIHRhcmdldCBmb3IgVGVsZXBvcnRzLiAobWlzc2luZyBxdWVyeVNlbGVjdG9yIHJlbmRlcmVyIG9wdGlvbilgXG4gICAgICApO1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IHRhcmdldCA9IHNlbGVjdCh0YXJnZXRTZWxlY3Rvcik7XG4gICAgICBpZiAoIXRhcmdldCkge1xuICAgICAgICAhIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpICYmIHdhcm4kMShcbiAgICAgICAgICBgRmFpbGVkIHRvIGxvY2F0ZSBUZWxlcG9ydCB0YXJnZXQgd2l0aCBzZWxlY3RvciBcIiR7dGFyZ2V0U2VsZWN0b3J9XCIuIE5vdGUgdGhlIHRhcmdldCBlbGVtZW50IG11c3QgZXhpc3QgYmVmb3JlIHRoZSBjb21wb25lbnQgaXMgbW91bnRlZCAtIGkuZS4gdGhlIHRhcmdldCBjYW5ub3QgYmUgcmVuZGVyZWQgYnkgdGhlIGNvbXBvbmVudCBpdHNlbGYsIGFuZCBpZGVhbGx5IHNob3VsZCBiZSBvdXRzaWRlIG9mIHRoZSBlbnRpcmUgVnVlIGNvbXBvbmVudCB0cmVlLmBcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB0YXJnZXQ7XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpICYmICF0YXJnZXRTZWxlY3RvciAmJiAhaXNUZWxlcG9ydERpc2FibGVkKHByb3BzKSkge1xuICAgICAgd2FybiQxKGBJbnZhbGlkIFRlbGVwb3J0IHRhcmdldDogJHt0YXJnZXRTZWxlY3Rvcn1gKTtcbiAgICB9XG4gICAgcmV0dXJuIHRhcmdldFNlbGVjdG9yO1xuICB9XG59O1xuY29uc3QgVGVsZXBvcnRJbXBsID0ge1xuICBuYW1lOiBcIlRlbGVwb3J0XCIsXG4gIF9faXNUZWxlcG9ydDogdHJ1ZSxcbiAgcHJvY2VzcyhuMSwgbjIsIGNvbnRhaW5lciwgYW5jaG9yLCBwYXJlbnRDb21wb25lbnQsIHBhcmVudFN1c3BlbnNlLCBuYW1lc3BhY2UsIHNsb3RTY29wZUlkcywgb3B0aW1pemVkLCBpbnRlcm5hbHMpIHtcbiAgICBjb25zdCB7XG4gICAgICBtYzogbW91bnRDaGlsZHJlbixcbiAgICAgIHBjOiBwYXRjaENoaWxkcmVuLFxuICAgICAgcGJjOiBwYXRjaEJsb2NrQ2hpbGRyZW4sXG4gICAgICBvOiB7IGluc2VydCwgcXVlcnlTZWxlY3RvciwgY3JlYXRlVGV4dCwgY3JlYXRlQ29tbWVudCB9XG4gICAgfSA9IGludGVybmFscztcbiAgICBjb25zdCBkaXNhYmxlZCA9IGlzVGVsZXBvcnREaXNhYmxlZChuMi5wcm9wcyk7XG4gICAgbGV0IHsgc2hhcGVGbGFnLCBjaGlsZHJlbiwgZHluYW1pY0NoaWxkcmVuIH0gPSBuMjtcbiAgICBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSAmJiBpc0htclVwZGF0aW5nKSB7XG4gICAgICBvcHRpbWl6ZWQgPSBmYWxzZTtcbiAgICAgIGR5bmFtaWNDaGlsZHJlbiA9IG51bGw7XG4gICAgfVxuICAgIGlmIChuMSA9PSBudWxsKSB7XG4gICAgICBjb25zdCBwbGFjZWhvbGRlciA9IG4yLmVsID0gISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSA/IGNyZWF0ZUNvbW1lbnQoXCJ0ZWxlcG9ydCBzdGFydFwiKSA6IGNyZWF0ZVRleHQoXCJcIik7XG4gICAgICBjb25zdCBtYWluQW5jaG9yID0gbjIuYW5jaG9yID0gISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSA/IGNyZWF0ZUNvbW1lbnQoXCJ0ZWxlcG9ydCBlbmRcIikgOiBjcmVhdGVUZXh0KFwiXCIpO1xuICAgICAgaW5zZXJ0KHBsYWNlaG9sZGVyLCBjb250YWluZXIsIGFuY2hvcik7XG4gICAgICBpbnNlcnQobWFpbkFuY2hvciwgY29udGFpbmVyLCBhbmNob3IpO1xuICAgICAgY29uc3QgdGFyZ2V0ID0gbjIudGFyZ2V0ID0gcmVzb2x2ZVRhcmdldChuMi5wcm9wcywgcXVlcnlTZWxlY3Rvcik7XG4gICAgICBjb25zdCB0YXJnZXRBbmNob3IgPSBuMi50YXJnZXRBbmNob3IgPSBjcmVhdGVUZXh0KFwiXCIpO1xuICAgICAgaWYgKHRhcmdldCkge1xuICAgICAgICBpbnNlcnQodGFyZ2V0QW5jaG9yLCB0YXJnZXQpO1xuICAgICAgICBpZiAobmFtZXNwYWNlID09PSBcInN2Z1wiIHx8IGlzVGFyZ2V0U1ZHKHRhcmdldCkpIHtcbiAgICAgICAgICBuYW1lc3BhY2UgPSBcInN2Z1wiO1xuICAgICAgICB9IGVsc2UgaWYgKG5hbWVzcGFjZSA9PT0gXCJtYXRobWxcIiB8fCBpc1RhcmdldE1hdGhNTCh0YXJnZXQpKSB7XG4gICAgICAgICAgbmFtZXNwYWNlID0gXCJtYXRobWxcIjtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpICYmICFkaXNhYmxlZCkge1xuICAgICAgICB3YXJuJDEoXCJJbnZhbGlkIFRlbGVwb3J0IHRhcmdldCBvbiBtb3VudDpcIiwgdGFyZ2V0LCBgKCR7dHlwZW9mIHRhcmdldH0pYCk7XG4gICAgICB9XG4gICAgICBjb25zdCBtb3VudCA9IChjb250YWluZXIyLCBhbmNob3IyKSA9PiB7XG4gICAgICAgIGlmIChzaGFwZUZsYWcgJiAxNikge1xuICAgICAgICAgIG1vdW50Q2hpbGRyZW4oXG4gICAgICAgICAgICBjaGlsZHJlbixcbiAgICAgICAgICAgIGNvbnRhaW5lcjIsXG4gICAgICAgICAgICBhbmNob3IyLFxuICAgICAgICAgICAgcGFyZW50Q29tcG9uZW50LFxuICAgICAgICAgICAgcGFyZW50U3VzcGVuc2UsXG4gICAgICAgICAgICBuYW1lc3BhY2UsXG4gICAgICAgICAgICBzbG90U2NvcGVJZHMsXG4gICAgICAgICAgICBvcHRpbWl6ZWRcbiAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICB9O1xuICAgICAgaWYgKGRpc2FibGVkKSB7XG4gICAgICAgIG1vdW50KGNvbnRhaW5lciwgbWFpbkFuY2hvcik7XG4gICAgICB9IGVsc2UgaWYgKHRhcmdldCkge1xuICAgICAgICBtb3VudCh0YXJnZXQsIHRhcmdldEFuY2hvcik7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIG4yLmVsID0gbjEuZWw7XG4gICAgICBjb25zdCBtYWluQW5jaG9yID0gbjIuYW5jaG9yID0gbjEuYW5jaG9yO1xuICAgICAgY29uc3QgdGFyZ2V0ID0gbjIudGFyZ2V0ID0gbjEudGFyZ2V0O1xuICAgICAgY29uc3QgdGFyZ2V0QW5jaG9yID0gbjIudGFyZ2V0QW5jaG9yID0gbjEudGFyZ2V0QW5jaG9yO1xuICAgICAgY29uc3Qgd2FzRGlzYWJsZWQgPSBpc1RlbGVwb3J0RGlzYWJsZWQobjEucHJvcHMpO1xuICAgICAgY29uc3QgY3VycmVudENvbnRhaW5lciA9IHdhc0Rpc2FibGVkID8gY29udGFpbmVyIDogdGFyZ2V0O1xuICAgICAgY29uc3QgY3VycmVudEFuY2hvciA9IHdhc0Rpc2FibGVkID8gbWFpbkFuY2hvciA6IHRhcmdldEFuY2hvcjtcbiAgICAgIGlmIChuYW1lc3BhY2UgPT09IFwic3ZnXCIgfHwgaXNUYXJnZXRTVkcodGFyZ2V0KSkge1xuICAgICAgICBuYW1lc3BhY2UgPSBcInN2Z1wiO1xuICAgICAgfSBlbHNlIGlmIChuYW1lc3BhY2UgPT09IFwibWF0aG1sXCIgfHwgaXNUYXJnZXRNYXRoTUwodGFyZ2V0KSkge1xuICAgICAgICBuYW1lc3BhY2UgPSBcIm1hdGhtbFwiO1xuICAgICAgfVxuICAgICAgaWYgKGR5bmFtaWNDaGlsZHJlbikge1xuICAgICAgICBwYXRjaEJsb2NrQ2hpbGRyZW4oXG4gICAgICAgICAgbjEuZHluYW1pY0NoaWxkcmVuLFxuICAgICAgICAgIGR5bmFtaWNDaGlsZHJlbixcbiAgICAgICAgICBjdXJyZW50Q29udGFpbmVyLFxuICAgICAgICAgIHBhcmVudENvbXBvbmVudCxcbiAgICAgICAgICBwYXJlbnRTdXNwZW5zZSxcbiAgICAgICAgICBuYW1lc3BhY2UsXG4gICAgICAgICAgc2xvdFNjb3BlSWRzXG4gICAgICAgICk7XG4gICAgICAgIHRyYXZlcnNlU3RhdGljQ2hpbGRyZW4objEsIG4yLCB0cnVlKTtcbiAgICAgIH0gZWxzZSBpZiAoIW9wdGltaXplZCkge1xuICAgICAgICBwYXRjaENoaWxkcmVuKFxuICAgICAgICAgIG4xLFxuICAgICAgICAgIG4yLFxuICAgICAgICAgIGN1cnJlbnRDb250YWluZXIsXG4gICAgICAgICAgY3VycmVudEFuY2hvcixcbiAgICAgICAgICBwYXJlbnRDb21wb25lbnQsXG4gICAgICAgICAgcGFyZW50U3VzcGVuc2UsXG4gICAgICAgICAgbmFtZXNwYWNlLFxuICAgICAgICAgIHNsb3RTY29wZUlkcyxcbiAgICAgICAgICBmYWxzZVxuICAgICAgICApO1xuICAgICAgfVxuICAgICAgaWYgKGRpc2FibGVkKSB7XG4gICAgICAgIGlmICghd2FzRGlzYWJsZWQpIHtcbiAgICAgICAgICBtb3ZlVGVsZXBvcnQoXG4gICAgICAgICAgICBuMixcbiAgICAgICAgICAgIGNvbnRhaW5lcixcbiAgICAgICAgICAgIG1haW5BbmNob3IsXG4gICAgICAgICAgICBpbnRlcm5hbHMsXG4gICAgICAgICAgICAxXG4gICAgICAgICAgKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpZiAobjIucHJvcHMgJiYgbjEucHJvcHMgJiYgbjIucHJvcHMudG8gIT09IG4xLnByb3BzLnRvKSB7XG4gICAgICAgICAgICBuMi5wcm9wcy50byA9IG4xLnByb3BzLnRvO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKChuMi5wcm9wcyAmJiBuMi5wcm9wcy50bykgIT09IChuMS5wcm9wcyAmJiBuMS5wcm9wcy50bykpIHtcbiAgICAgICAgICBjb25zdCBuZXh0VGFyZ2V0ID0gbjIudGFyZ2V0ID0gcmVzb2x2ZVRhcmdldChcbiAgICAgICAgICAgIG4yLnByb3BzLFxuICAgICAgICAgICAgcXVlcnlTZWxlY3RvclxuICAgICAgICAgICk7XG4gICAgICAgICAgaWYgKG5leHRUYXJnZXQpIHtcbiAgICAgICAgICAgIG1vdmVUZWxlcG9ydChcbiAgICAgICAgICAgICAgbjIsXG4gICAgICAgICAgICAgIG5leHRUYXJnZXQsXG4gICAgICAgICAgICAgIG51bGwsXG4gICAgICAgICAgICAgIGludGVybmFscyxcbiAgICAgICAgICAgICAgMFxuICAgICAgICAgICAgKTtcbiAgICAgICAgICB9IGVsc2UgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikpIHtcbiAgICAgICAgICAgIHdhcm4kMShcbiAgICAgICAgICAgICAgXCJJbnZhbGlkIFRlbGVwb3J0IHRhcmdldCBvbiB1cGRhdGU6XCIsXG4gICAgICAgICAgICAgIHRhcmdldCxcbiAgICAgICAgICAgICAgYCgke3R5cGVvZiB0YXJnZXR9KWBcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKHdhc0Rpc2FibGVkKSB7XG4gICAgICAgICAgbW92ZVRlbGVwb3J0KFxuICAgICAgICAgICAgbjIsXG4gICAgICAgICAgICB0YXJnZXQsXG4gICAgICAgICAgICB0YXJnZXRBbmNob3IsXG4gICAgICAgICAgICBpbnRlcm5hbHMsXG4gICAgICAgICAgICAxXG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICB1cGRhdGVDc3NWYXJzKG4yKTtcbiAgfSxcbiAgcmVtb3ZlKHZub2RlLCBwYXJlbnRDb21wb25lbnQsIHBhcmVudFN1c3BlbnNlLCBvcHRpbWl6ZWQsIHsgdW06IHVubW91bnQsIG86IHsgcmVtb3ZlOiBob3N0UmVtb3ZlIH0gfSwgZG9SZW1vdmUpIHtcbiAgICBjb25zdCB7IHNoYXBlRmxhZywgY2hpbGRyZW4sIGFuY2hvciwgdGFyZ2V0QW5jaG9yLCB0YXJnZXQsIHByb3BzIH0gPSB2bm9kZTtcbiAgICBpZiAodGFyZ2V0KSB7XG4gICAgICBob3N0UmVtb3ZlKHRhcmdldEFuY2hvcik7XG4gICAgfVxuICAgIGRvUmVtb3ZlICYmIGhvc3RSZW1vdmUoYW5jaG9yKTtcbiAgICBpZiAoc2hhcGVGbGFnICYgMTYpIHtcbiAgICAgIGNvbnN0IHNob3VsZFJlbW92ZSA9IGRvUmVtb3ZlIHx8ICFpc1RlbGVwb3J0RGlzYWJsZWQocHJvcHMpO1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjaGlsZHJlbi5sZW5ndGg7IGkrKykge1xuICAgICAgICBjb25zdCBjaGlsZCA9IGNoaWxkcmVuW2ldO1xuICAgICAgICB1bm1vdW50KFxuICAgICAgICAgIGNoaWxkLFxuICAgICAgICAgIHBhcmVudENvbXBvbmVudCxcbiAgICAgICAgICBwYXJlbnRTdXNwZW5zZSxcbiAgICAgICAgICBzaG91bGRSZW1vdmUsXG4gICAgICAgICAgISFjaGlsZC5keW5hbWljQ2hpbGRyZW5cbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9XG4gIH0sXG4gIG1vdmU6IG1vdmVUZWxlcG9ydCxcbiAgaHlkcmF0ZTogaHlkcmF0ZVRlbGVwb3J0XG59O1xuZnVuY3Rpb24gbW92ZVRlbGVwb3J0KHZub2RlLCBjb250YWluZXIsIHBhcmVudEFuY2hvciwgeyBvOiB7IGluc2VydCB9LCBtOiBtb3ZlIH0sIG1vdmVUeXBlID0gMikge1xuICBpZiAobW92ZVR5cGUgPT09IDApIHtcbiAgICBpbnNlcnQodm5vZGUudGFyZ2V0QW5jaG9yLCBjb250YWluZXIsIHBhcmVudEFuY2hvcik7XG4gIH1cbiAgY29uc3QgeyBlbCwgYW5jaG9yLCBzaGFwZUZsYWcsIGNoaWxkcmVuLCBwcm9wcyB9ID0gdm5vZGU7XG4gIGNvbnN0IGlzUmVvcmRlciA9IG1vdmVUeXBlID09PSAyO1xuICBpZiAoaXNSZW9yZGVyKSB7XG4gICAgaW5zZXJ0KGVsLCBjb250YWluZXIsIHBhcmVudEFuY2hvcik7XG4gIH1cbiAgaWYgKCFpc1Jlb3JkZXIgfHwgaXNUZWxlcG9ydERpc2FibGVkKHByb3BzKSkge1xuICAgIGlmIChzaGFwZUZsYWcgJiAxNikge1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjaGlsZHJlbi5sZW5ndGg7IGkrKykge1xuICAgICAgICBtb3ZlKFxuICAgICAgICAgIGNoaWxkcmVuW2ldLFxuICAgICAgICAgIGNvbnRhaW5lcixcbiAgICAgICAgICBwYXJlbnRBbmNob3IsXG4gICAgICAgICAgMlxuICAgICAgICApO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICBpZiAoaXNSZW9yZGVyKSB7XG4gICAgaW5zZXJ0KGFuY2hvciwgY29udGFpbmVyLCBwYXJlbnRBbmNob3IpO1xuICB9XG59XG5mdW5jdGlvbiBoeWRyYXRlVGVsZXBvcnQobm9kZSwgdm5vZGUsIHBhcmVudENvbXBvbmVudCwgcGFyZW50U3VzcGVuc2UsIHNsb3RTY29wZUlkcywgb3B0aW1pemVkLCB7XG4gIG86IHsgbmV4dFNpYmxpbmcsIHBhcmVudE5vZGUsIHF1ZXJ5U2VsZWN0b3IgfVxufSwgaHlkcmF0ZUNoaWxkcmVuKSB7XG4gIGNvbnN0IHRhcmdldCA9IHZub2RlLnRhcmdldCA9IHJlc29sdmVUYXJnZXQoXG4gICAgdm5vZGUucHJvcHMsXG4gICAgcXVlcnlTZWxlY3RvclxuICApO1xuICBpZiAodGFyZ2V0KSB7XG4gICAgY29uc3QgdGFyZ2V0Tm9kZSA9IHRhcmdldC5fbHBhIHx8IHRhcmdldC5maXJzdENoaWxkO1xuICAgIGlmICh2bm9kZS5zaGFwZUZsYWcgJiAxNikge1xuICAgICAgaWYgKGlzVGVsZXBvcnREaXNhYmxlZCh2bm9kZS5wcm9wcykpIHtcbiAgICAgICAgdm5vZGUuYW5jaG9yID0gaHlkcmF0ZUNoaWxkcmVuKFxuICAgICAgICAgIG5leHRTaWJsaW5nKG5vZGUpLFxuICAgICAgICAgIHZub2RlLFxuICAgICAgICAgIHBhcmVudE5vZGUobm9kZSksXG4gICAgICAgICAgcGFyZW50Q29tcG9uZW50LFxuICAgICAgICAgIHBhcmVudFN1c3BlbnNlLFxuICAgICAgICAgIHNsb3RTY29wZUlkcyxcbiAgICAgICAgICBvcHRpbWl6ZWRcbiAgICAgICAgKTtcbiAgICAgICAgdm5vZGUudGFyZ2V0QW5jaG9yID0gdGFyZ2V0Tm9kZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHZub2RlLmFuY2hvciA9IG5leHRTaWJsaW5nKG5vZGUpO1xuICAgICAgICBsZXQgdGFyZ2V0QW5jaG9yID0gdGFyZ2V0Tm9kZTtcbiAgICAgICAgd2hpbGUgKHRhcmdldEFuY2hvcikge1xuICAgICAgICAgIHRhcmdldEFuY2hvciA9IG5leHRTaWJsaW5nKHRhcmdldEFuY2hvcik7XG4gICAgICAgICAgaWYgKHRhcmdldEFuY2hvciAmJiB0YXJnZXRBbmNob3Iubm9kZVR5cGUgPT09IDggJiYgdGFyZ2V0QW5jaG9yLmRhdGEgPT09IFwidGVsZXBvcnQgYW5jaG9yXCIpIHtcbiAgICAgICAgICAgIHZub2RlLnRhcmdldEFuY2hvciA9IHRhcmdldEFuY2hvcjtcbiAgICAgICAgICAgIHRhcmdldC5fbHBhID0gdm5vZGUudGFyZ2V0QW5jaG9yICYmIG5leHRTaWJsaW5nKHZub2RlLnRhcmdldEFuY2hvcik7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaHlkcmF0ZUNoaWxkcmVuKFxuICAgICAgICAgIHRhcmdldE5vZGUsXG4gICAgICAgICAgdm5vZGUsXG4gICAgICAgICAgdGFyZ2V0LFxuICAgICAgICAgIHBhcmVudENvbXBvbmVudCxcbiAgICAgICAgICBwYXJlbnRTdXNwZW5zZSxcbiAgICAgICAgICBzbG90U2NvcGVJZHMsXG4gICAgICAgICAgb3B0aW1pemVkXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgfVxuICAgIHVwZGF0ZUNzc1ZhcnModm5vZGUpO1xuICB9XG4gIHJldHVybiB2bm9kZS5hbmNob3IgJiYgbmV4dFNpYmxpbmcodm5vZGUuYW5jaG9yKTtcbn1cbmNvbnN0IFRlbGVwb3J0ID0gVGVsZXBvcnRJbXBsO1xuZnVuY3Rpb24gdXBkYXRlQ3NzVmFycyh2bm9kZSkge1xuICBjb25zdCBjdHggPSB2bm9kZS5jdHg7XG4gIGlmIChjdHggJiYgY3R4LnV0KSB7XG4gICAgbGV0IG5vZGUgPSB2bm9kZS5jaGlsZHJlblswXS5lbDtcbiAgICB3aGlsZSAobm9kZSAmJiBub2RlICE9PSB2bm9kZS50YXJnZXRBbmNob3IpIHtcbiAgICAgIGlmIChub2RlLm5vZGVUeXBlID09PSAxKVxuICAgICAgICBub2RlLnNldEF0dHJpYnV0ZShcImRhdGEtdi1vd25lclwiLCBjdHgudWlkKTtcbiAgICAgIG5vZGUgPSBub2RlLm5leHRTaWJsaW5nO1xuICAgIH1cbiAgICBjdHgudXQoKTtcbiAgfVxufVxuXG5jb25zdCBGcmFnbWVudCA9IFN5bWJvbC5mb3IoXCJ2LWZndFwiKTtcbmNvbnN0IFRleHQgPSBTeW1ib2wuZm9yKFwidi10eHRcIik7XG5jb25zdCBDb21tZW50ID0gU3ltYm9sLmZvcihcInYtY210XCIpO1xuY29uc3QgU3RhdGljID0gU3ltYm9sLmZvcihcInYtc3RjXCIpO1xuY29uc3QgYmxvY2tTdGFjayA9IFtdO1xubGV0IGN1cnJlbnRCbG9jayA9IG51bGw7XG5mdW5jdGlvbiBvcGVuQmxvY2soZGlzYWJsZVRyYWNraW5nID0gZmFsc2UpIHtcbiAgYmxvY2tTdGFjay5wdXNoKGN1cnJlbnRCbG9jayA9IGRpc2FibGVUcmFja2luZyA/IG51bGwgOiBbXSk7XG59XG5mdW5jdGlvbiBjbG9zZUJsb2NrKCkge1xuICBibG9ja1N0YWNrLnBvcCgpO1xuICBjdXJyZW50QmxvY2sgPSBibG9ja1N0YWNrW2Jsb2NrU3RhY2subGVuZ3RoIC0gMV0gfHwgbnVsbDtcbn1cbmxldCBpc0Jsb2NrVHJlZUVuYWJsZWQgPSAxO1xuZnVuY3Rpb24gc2V0QmxvY2tUcmFja2luZyh2YWx1ZSkge1xuICBpc0Jsb2NrVHJlZUVuYWJsZWQgKz0gdmFsdWU7XG59XG5mdW5jdGlvbiBzZXR1cEJsb2NrKHZub2RlKSB7XG4gIHZub2RlLmR5bmFtaWNDaGlsZHJlbiA9IGlzQmxvY2tUcmVlRW5hYmxlZCA+IDAgPyBjdXJyZW50QmxvY2sgfHwgRU1QVFlfQVJSIDogbnVsbDtcbiAgY2xvc2VCbG9jaygpO1xuICBpZiAoaXNCbG9ja1RyZWVFbmFibGVkID4gMCAmJiBjdXJyZW50QmxvY2spIHtcbiAgICBjdXJyZW50QmxvY2sucHVzaCh2bm9kZSk7XG4gIH1cbiAgcmV0dXJuIHZub2RlO1xufVxuZnVuY3Rpb24gY3JlYXRlRWxlbWVudEJsb2NrKHR5cGUsIHByb3BzLCBjaGlsZHJlbiwgcGF0Y2hGbGFnLCBkeW5hbWljUHJvcHMsIHNoYXBlRmxhZykge1xuICByZXR1cm4gc2V0dXBCbG9jayhcbiAgICBjcmVhdGVCYXNlVk5vZGUoXG4gICAgICB0eXBlLFxuICAgICAgcHJvcHMsXG4gICAgICBjaGlsZHJlbixcbiAgICAgIHBhdGNoRmxhZyxcbiAgICAgIGR5bmFtaWNQcm9wcyxcbiAgICAgIHNoYXBlRmxhZyxcbiAgICAgIHRydWVcbiAgICApXG4gICk7XG59XG5mdW5jdGlvbiBjcmVhdGVCbG9jayh0eXBlLCBwcm9wcywgY2hpbGRyZW4sIHBhdGNoRmxhZywgZHluYW1pY1Byb3BzKSB7XG4gIHJldHVybiBzZXR1cEJsb2NrKFxuICAgIGNyZWF0ZVZOb2RlKFxuICAgICAgdHlwZSxcbiAgICAgIHByb3BzLFxuICAgICAgY2hpbGRyZW4sXG4gICAgICBwYXRjaEZsYWcsXG4gICAgICBkeW5hbWljUHJvcHMsXG4gICAgICB0cnVlXG4gICAgKVxuICApO1xufVxuZnVuY3Rpb24gaXNWTm9kZSh2YWx1ZSkge1xuICByZXR1cm4gdmFsdWUgPyB2YWx1ZS5fX3ZfaXNWTm9kZSA9PT0gdHJ1ZSA6IGZhbHNlO1xufVxuZnVuY3Rpb24gaXNTYW1lVk5vZGVUeXBlKG4xLCBuMikge1xuICBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSAmJiBuMi5zaGFwZUZsYWcgJiA2ICYmIGhtckRpcnR5Q29tcG9uZW50cy5oYXMobjIudHlwZSkpIHtcbiAgICBuMS5zaGFwZUZsYWcgJj0gfjI1NjtcbiAgICBuMi5zaGFwZUZsYWcgJj0gfjUxMjtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgcmV0dXJuIG4xLnR5cGUgPT09IG4yLnR5cGUgJiYgbjEua2V5ID09PSBuMi5rZXk7XG59XG5sZXQgdm5vZGVBcmdzVHJhbnNmb3JtZXI7XG5mdW5jdGlvbiB0cmFuc2Zvcm1WTm9kZUFyZ3ModHJhbnNmb3JtZXIpIHtcbiAgdm5vZGVBcmdzVHJhbnNmb3JtZXIgPSB0cmFuc2Zvcm1lcjtcbn1cbmNvbnN0IGNyZWF0ZVZOb2RlV2l0aEFyZ3NUcmFuc2Zvcm0gPSAoLi4uYXJncykgPT4ge1xuICByZXR1cm4gX2NyZWF0ZVZOb2RlKFxuICAgIC4uLnZub2RlQXJnc1RyYW5zZm9ybWVyID8gdm5vZGVBcmdzVHJhbnNmb3JtZXIoYXJncywgY3VycmVudFJlbmRlcmluZ0luc3RhbmNlKSA6IGFyZ3NcbiAgKTtcbn07XG5jb25zdCBJbnRlcm5hbE9iamVjdEtleSA9IGBfX3ZJbnRlcm5hbGA7XG5jb25zdCBub3JtYWxpemVLZXkgPSAoeyBrZXkgfSkgPT4ga2V5ICE9IG51bGwgPyBrZXkgOiBudWxsO1xuY29uc3Qgbm9ybWFsaXplUmVmID0gKHtcbiAgcmVmLFxuICByZWZfa2V5LFxuICByZWZfZm9yXG59KSA9PiB7XG4gIGlmICh0eXBlb2YgcmVmID09PSBcIm51bWJlclwiKSB7XG4gICAgcmVmID0gXCJcIiArIHJlZjtcbiAgfVxuICByZXR1cm4gcmVmICE9IG51bGwgPyBpc1N0cmluZyhyZWYpIHx8IGlzUmVmKHJlZikgfHwgaXNGdW5jdGlvbihyZWYpID8geyBpOiBjdXJyZW50UmVuZGVyaW5nSW5zdGFuY2UsIHI6IHJlZiwgazogcmVmX2tleSwgZjogISFyZWZfZm9yIH0gOiByZWYgOiBudWxsO1xufTtcbmZ1bmN0aW9uIGNyZWF0ZUJhc2VWTm9kZSh0eXBlLCBwcm9wcyA9IG51bGwsIGNoaWxkcmVuID0gbnVsbCwgcGF0Y2hGbGFnID0gMCwgZHluYW1pY1Byb3BzID0gbnVsbCwgc2hhcGVGbGFnID0gdHlwZSA9PT0gRnJhZ21lbnQgPyAwIDogMSwgaXNCbG9ja05vZGUgPSBmYWxzZSwgbmVlZEZ1bGxDaGlsZHJlbk5vcm1hbGl6YXRpb24gPSBmYWxzZSkge1xuICBjb25zdCB2bm9kZSA9IHtcbiAgICBfX3ZfaXNWTm9kZTogdHJ1ZSxcbiAgICBfX3Zfc2tpcDogdHJ1ZSxcbiAgICB0eXBlLFxuICAgIHByb3BzLFxuICAgIGtleTogcHJvcHMgJiYgbm9ybWFsaXplS2V5KHByb3BzKSxcbiAgICByZWY6IHByb3BzICYmIG5vcm1hbGl6ZVJlZihwcm9wcyksXG4gICAgc2NvcGVJZDogY3VycmVudFNjb3BlSWQsXG4gICAgc2xvdFNjb3BlSWRzOiBudWxsLFxuICAgIGNoaWxkcmVuLFxuICAgIGNvbXBvbmVudDogbnVsbCxcbiAgICBzdXNwZW5zZTogbnVsbCxcbiAgICBzc0NvbnRlbnQ6IG51bGwsXG4gICAgc3NGYWxsYmFjazogbnVsbCxcbiAgICBkaXJzOiBudWxsLFxuICAgIHRyYW5zaXRpb246IG51bGwsXG4gICAgZWw6IG51bGwsXG4gICAgYW5jaG9yOiBudWxsLFxuICAgIHRhcmdldDogbnVsbCxcbiAgICB0YXJnZXRBbmNob3I6IG51bGwsXG4gICAgc3RhdGljQ291bnQ6IDAsXG4gICAgc2hhcGVGbGFnLFxuICAgIHBhdGNoRmxhZyxcbiAgICBkeW5hbWljUHJvcHMsXG4gICAgZHluYW1pY0NoaWxkcmVuOiBudWxsLFxuICAgIGFwcENvbnRleHQ6IG51bGwsXG4gICAgY3R4OiBjdXJyZW50UmVuZGVyaW5nSW5zdGFuY2VcbiAgfTtcbiAgaWYgKG5lZWRGdWxsQ2hpbGRyZW5Ob3JtYWxpemF0aW9uKSB7XG4gICAgbm9ybWFsaXplQ2hpbGRyZW4odm5vZGUsIGNoaWxkcmVuKTtcbiAgICBpZiAoc2hhcGVGbGFnICYgMTI4KSB7XG4gICAgICB0eXBlLm5vcm1hbGl6ZSh2bm9kZSk7XG4gICAgfVxuICB9IGVsc2UgaWYgKGNoaWxkcmVuKSB7XG4gICAgdm5vZGUuc2hhcGVGbGFnIHw9IGlzU3RyaW5nKGNoaWxkcmVuKSA/IDggOiAxNjtcbiAgfVxuICBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSAmJiB2bm9kZS5rZXkgIT09IHZub2RlLmtleSkge1xuICAgIHdhcm4kMShgVk5vZGUgY3JlYXRlZCB3aXRoIGludmFsaWQga2V5IChOYU4pLiBWTm9kZSB0eXBlOmAsIHZub2RlLnR5cGUpO1xuICB9XG4gIGlmIChpc0Jsb2NrVHJlZUVuYWJsZWQgPiAwICYmIC8vIGF2b2lkIGEgYmxvY2sgbm9kZSBmcm9tIHRyYWNraW5nIGl0c2VsZlxuICAhaXNCbG9ja05vZGUgJiYgLy8gaGFzIGN1cnJlbnQgcGFyZW50IGJsb2NrXG4gIGN1cnJlbnRCbG9jayAmJiAvLyBwcmVzZW5jZSBvZiBhIHBhdGNoIGZsYWcgaW5kaWNhdGVzIHRoaXMgbm9kZSBuZWVkcyBwYXRjaGluZyBvbiB1cGRhdGVzLlxuICAvLyBjb21wb25lbnQgbm9kZXMgYWxzbyBzaG91bGQgYWx3YXlzIGJlIHBhdGNoZWQsIGJlY2F1c2UgZXZlbiBpZiB0aGVcbiAgLy8gY29tcG9uZW50IGRvZXNuJ3QgbmVlZCB0byB1cGRhdGUsIGl0IG5lZWRzIHRvIHBlcnNpc3QgdGhlIGluc3RhbmNlIG9uIHRvXG4gIC8vIHRoZSBuZXh0IHZub2RlIHNvIHRoYXQgaXQgY2FuIGJlIHByb3Blcmx5IHVubW91bnRlZCBsYXRlci5cbiAgKHZub2RlLnBhdGNoRmxhZyA+IDAgfHwgc2hhcGVGbGFnICYgNikgJiYgLy8gdGhlIEVWRU5UUyBmbGFnIGlzIG9ubHkgZm9yIGh5ZHJhdGlvbiBhbmQgaWYgaXQgaXMgdGhlIG9ubHkgZmxhZywgdGhlXG4gIC8vIHZub2RlIHNob3VsZCBub3QgYmUgY29uc2lkZXJlZCBkeW5hbWljIGR1ZSB0byBoYW5kbGVyIGNhY2hpbmcuXG4gIHZub2RlLnBhdGNoRmxhZyAhPT0gMzIpIHtcbiAgICBjdXJyZW50QmxvY2sucHVzaCh2bm9kZSk7XG4gIH1cbiAgcmV0dXJuIHZub2RlO1xufVxuY29uc3QgY3JlYXRlVk5vZGUgPSAhIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpID8gY3JlYXRlVk5vZGVXaXRoQXJnc1RyYW5zZm9ybSA6IF9jcmVhdGVWTm9kZTtcbmZ1bmN0aW9uIF9jcmVhdGVWTm9kZSh0eXBlLCBwcm9wcyA9IG51bGwsIGNoaWxkcmVuID0gbnVsbCwgcGF0Y2hGbGFnID0gMCwgZHluYW1pY1Byb3BzID0gbnVsbCwgaXNCbG9ja05vZGUgPSBmYWxzZSkge1xuICBpZiAoIXR5cGUgfHwgdHlwZSA9PT0gTlVMTF9EWU5BTUlDX0NPTVBPTkVOVCkge1xuICAgIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpICYmICF0eXBlKSB7XG4gICAgICB3YXJuJDEoYEludmFsaWQgdm5vZGUgdHlwZSB3aGVuIGNyZWF0aW5nIHZub2RlOiAke3R5cGV9LmApO1xuICAgIH1cbiAgICB0eXBlID0gQ29tbWVudDtcbiAgfVxuICBpZiAoaXNWTm9kZSh0eXBlKSkge1xuICAgIGNvbnN0IGNsb25lZCA9IGNsb25lVk5vZGUoXG4gICAgICB0eXBlLFxuICAgICAgcHJvcHMsXG4gICAgICB0cnVlXG4gICAgICAvKiBtZXJnZVJlZjogdHJ1ZSAqL1xuICAgICk7XG4gICAgaWYgKGNoaWxkcmVuKSB7XG4gICAgICBub3JtYWxpemVDaGlsZHJlbihjbG9uZWQsIGNoaWxkcmVuKTtcbiAgICB9XG4gICAgaWYgKGlzQmxvY2tUcmVlRW5hYmxlZCA+IDAgJiYgIWlzQmxvY2tOb2RlICYmIGN1cnJlbnRCbG9jaykge1xuICAgICAgaWYgKGNsb25lZC5zaGFwZUZsYWcgJiA2KSB7XG4gICAgICAgIGN1cnJlbnRCbG9ja1tjdXJyZW50QmxvY2suaW5kZXhPZih0eXBlKV0gPSBjbG9uZWQ7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjdXJyZW50QmxvY2sucHVzaChjbG9uZWQpO1xuICAgICAgfVxuICAgIH1cbiAgICBjbG9uZWQucGF0Y2hGbGFnIHw9IC0yO1xuICAgIHJldHVybiBjbG9uZWQ7XG4gIH1cbiAgaWYgKGlzQ2xhc3NDb21wb25lbnQodHlwZSkpIHtcbiAgICB0eXBlID0gdHlwZS5fX3ZjY09wdHM7XG4gIH1cbiAgaWYgKHByb3BzKSB7XG4gICAgcHJvcHMgPSBndWFyZFJlYWN0aXZlUHJvcHMocHJvcHMpO1xuICAgIGxldCB7IGNsYXNzOiBrbGFzcywgc3R5bGUgfSA9IHByb3BzO1xuICAgIGlmIChrbGFzcyAmJiAhaXNTdHJpbmcoa2xhc3MpKSB7XG4gICAgICBwcm9wcy5jbGFzcyA9IG5vcm1hbGl6ZUNsYXNzKGtsYXNzKTtcbiAgICB9XG4gICAgaWYgKGlzT2JqZWN0KHN0eWxlKSkge1xuICAgICAgaWYgKGlzUHJveHkoc3R5bGUpICYmICFpc0FycmF5KHN0eWxlKSkge1xuICAgICAgICBzdHlsZSA9IGV4dGVuZCh7fSwgc3R5bGUpO1xuICAgICAgfVxuICAgICAgcHJvcHMuc3R5bGUgPSBub3JtYWxpemVTdHlsZShzdHlsZSk7XG4gICAgfVxuICB9XG4gIGNvbnN0IHNoYXBlRmxhZyA9IGlzU3RyaW5nKHR5cGUpID8gMSA6IGlzU3VzcGVuc2UodHlwZSkgPyAxMjggOiBpc1RlbGVwb3J0KHR5cGUpID8gNjQgOiBpc09iamVjdCh0eXBlKSA/IDQgOiBpc0Z1bmN0aW9uKHR5cGUpID8gMiA6IDA7XG4gIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpICYmIHNoYXBlRmxhZyAmIDQgJiYgaXNQcm94eSh0eXBlKSkge1xuICAgIHR5cGUgPSB0b1Jhdyh0eXBlKTtcbiAgICB3YXJuJDEoXG4gICAgICBgVnVlIHJlY2VpdmVkIGEgQ29tcG9uZW50IHRoYXQgd2FzIG1hZGUgYSByZWFjdGl2ZSBvYmplY3QuIFRoaXMgY2FuIGxlYWQgdG8gdW5uZWNlc3NhcnkgcGVyZm9ybWFuY2Ugb3ZlcmhlYWQgYW5kIHNob3VsZCBiZSBhdm9pZGVkIGJ5IG1hcmtpbmcgdGhlIGNvbXBvbmVudCB3aXRoIFxcYG1hcmtSYXdcXGAgb3IgdXNpbmcgXFxgc2hhbGxvd1JlZlxcYCBpbnN0ZWFkIG9mIFxcYHJlZlxcYC5gLFxuICAgICAgYFxuQ29tcG9uZW50IHRoYXQgd2FzIG1hZGUgcmVhY3RpdmU6IGAsXG4gICAgICB0eXBlXG4gICAgKTtcbiAgfVxuICByZXR1cm4gY3JlYXRlQmFzZVZOb2RlKFxuICAgIHR5cGUsXG4gICAgcHJvcHMsXG4gICAgY2hpbGRyZW4sXG4gICAgcGF0Y2hGbGFnLFxuICAgIGR5bmFtaWNQcm9wcyxcbiAgICBzaGFwZUZsYWcsXG4gICAgaXNCbG9ja05vZGUsXG4gICAgdHJ1ZVxuICApO1xufVxuZnVuY3Rpb24gZ3VhcmRSZWFjdGl2ZVByb3BzKHByb3BzKSB7XG4gIGlmICghcHJvcHMpXG4gICAgcmV0dXJuIG51bGw7XG4gIHJldHVybiBpc1Byb3h5KHByb3BzKSB8fCBJbnRlcm5hbE9iamVjdEtleSBpbiBwcm9wcyA/IGV4dGVuZCh7fSwgcHJvcHMpIDogcHJvcHM7XG59XG5mdW5jdGlvbiBjbG9uZVZOb2RlKHZub2RlLCBleHRyYVByb3BzLCBtZXJnZVJlZiA9IGZhbHNlKSB7XG4gIGNvbnN0IHsgcHJvcHMsIHJlZiwgcGF0Y2hGbGFnLCBjaGlsZHJlbiB9ID0gdm5vZGU7XG4gIGNvbnN0IG1lcmdlZFByb3BzID0gZXh0cmFQcm9wcyA/IG1lcmdlUHJvcHMocHJvcHMgfHwge30sIGV4dHJhUHJvcHMpIDogcHJvcHM7XG4gIGNvbnN0IGNsb25lZCA9IHtcbiAgICBfX3ZfaXNWTm9kZTogdHJ1ZSxcbiAgICBfX3Zfc2tpcDogdHJ1ZSxcbiAgICB0eXBlOiB2bm9kZS50eXBlLFxuICAgIHByb3BzOiBtZXJnZWRQcm9wcyxcbiAgICBrZXk6IG1lcmdlZFByb3BzICYmIG5vcm1hbGl6ZUtleShtZXJnZWRQcm9wcyksXG4gICAgcmVmOiBleHRyYVByb3BzICYmIGV4dHJhUHJvcHMucmVmID8gKFxuICAgICAgLy8gIzIwNzggaW4gdGhlIGNhc2Ugb2YgPGNvbXBvbmVudCA6aXM9XCJ2bm9kZVwiIHJlZj1cImV4dHJhXCIvPlxuICAgICAgLy8gaWYgdGhlIHZub2RlIGl0c2VsZiBhbHJlYWR5IGhhcyBhIHJlZiwgY2xvbmVWTm9kZSB3aWxsIG5lZWQgdG8gbWVyZ2VcbiAgICAgIC8vIHRoZSByZWZzIHNvIHRoZSBzaW5nbGUgdm5vZGUgY2FuIGJlIHNldCBvbiBtdWx0aXBsZSByZWZzXG4gICAgICBtZXJnZVJlZiAmJiByZWYgPyBpc0FycmF5KHJlZikgPyByZWYuY29uY2F0KG5vcm1hbGl6ZVJlZihleHRyYVByb3BzKSkgOiBbcmVmLCBub3JtYWxpemVSZWYoZXh0cmFQcm9wcyldIDogbm9ybWFsaXplUmVmKGV4dHJhUHJvcHMpXG4gICAgKSA6IHJlZixcbiAgICBzY29wZUlkOiB2bm9kZS5zY29wZUlkLFxuICAgIHNsb3RTY29wZUlkczogdm5vZGUuc2xvdFNjb3BlSWRzLFxuICAgIGNoaWxkcmVuOiAhIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpICYmIHBhdGNoRmxhZyA9PT0gLTEgJiYgaXNBcnJheShjaGlsZHJlbikgPyBjaGlsZHJlbi5tYXAoZGVlcENsb25lVk5vZGUpIDogY2hpbGRyZW4sXG4gICAgdGFyZ2V0OiB2bm9kZS50YXJnZXQsXG4gICAgdGFyZ2V0QW5jaG9yOiB2bm9kZS50YXJnZXRBbmNob3IsXG4gICAgc3RhdGljQ291bnQ6IHZub2RlLnN0YXRpY0NvdW50LFxuICAgIHNoYXBlRmxhZzogdm5vZGUuc2hhcGVGbGFnLFxuICAgIC8vIGlmIHRoZSB2bm9kZSBpcyBjbG9uZWQgd2l0aCBleHRyYSBwcm9wcywgd2UgY2FuIG5vIGxvbmdlciBhc3N1bWUgaXRzXG4gICAgLy8gZXhpc3RpbmcgcGF0Y2ggZmxhZyB0byBiZSByZWxpYWJsZSBhbmQgbmVlZCB0byBhZGQgdGhlIEZVTExfUFJPUFMgZmxhZy5cbiAgICAvLyBub3RlOiBwcmVzZXJ2ZSBmbGFnIGZvciBmcmFnbWVudHMgc2luY2UgdGhleSB1c2UgdGhlIGZsYWcgZm9yIGNoaWxkcmVuXG4gICAgLy8gZmFzdCBwYXRocyBvbmx5LlxuICAgIHBhdGNoRmxhZzogZXh0cmFQcm9wcyAmJiB2bm9kZS50eXBlICE9PSBGcmFnbWVudCA/IHBhdGNoRmxhZyA9PT0gLTEgPyAxNiA6IHBhdGNoRmxhZyB8IDE2IDogcGF0Y2hGbGFnLFxuICAgIGR5bmFtaWNQcm9wczogdm5vZGUuZHluYW1pY1Byb3BzLFxuICAgIGR5bmFtaWNDaGlsZHJlbjogdm5vZGUuZHluYW1pY0NoaWxkcmVuLFxuICAgIGFwcENvbnRleHQ6IHZub2RlLmFwcENvbnRleHQsXG4gICAgZGlyczogdm5vZGUuZGlycyxcbiAgICB0cmFuc2l0aW9uOiB2bm9kZS50cmFuc2l0aW9uLFxuICAgIC8vIFRoZXNlIHNob3VsZCB0ZWNobmljYWxseSBvbmx5IGJlIG5vbi1udWxsIG9uIG1vdW50ZWQgVk5vZGVzLiBIb3dldmVyLFxuICAgIC8vIHRoZXkgKnNob3VsZCogYmUgY29waWVkIGZvciBrZXB0LWFsaXZlIHZub2Rlcy4gU28gd2UganVzdCBhbHdheXMgY29weVxuICAgIC8vIHRoZW0gc2luY2UgdGhlbSBiZWluZyBub24tbnVsbCBkdXJpbmcgYSBtb3VudCBkb2Vzbid0IGFmZmVjdCB0aGUgbG9naWMgYXNcbiAgICAvLyB0aGV5IHdpbGwgc2ltcGx5IGJlIG92ZXJ3cml0dGVuLlxuICAgIGNvbXBvbmVudDogdm5vZGUuY29tcG9uZW50LFxuICAgIHN1c3BlbnNlOiB2bm9kZS5zdXNwZW5zZSxcbiAgICBzc0NvbnRlbnQ6IHZub2RlLnNzQ29udGVudCAmJiBjbG9uZVZOb2RlKHZub2RlLnNzQ29udGVudCksXG4gICAgc3NGYWxsYmFjazogdm5vZGUuc3NGYWxsYmFjayAmJiBjbG9uZVZOb2RlKHZub2RlLnNzRmFsbGJhY2spLFxuICAgIGVsOiB2bm9kZS5lbCxcbiAgICBhbmNob3I6IHZub2RlLmFuY2hvcixcbiAgICBjdHg6IHZub2RlLmN0eCxcbiAgICBjZTogdm5vZGUuY2VcbiAgfTtcbiAgcmV0dXJuIGNsb25lZDtcbn1cbmZ1bmN0aW9uIGRlZXBDbG9uZVZOb2RlKHZub2RlKSB7XG4gIGNvbnN0IGNsb25lZCA9IGNsb25lVk5vZGUodm5vZGUpO1xuICBpZiAoaXNBcnJheSh2bm9kZS5jaGlsZHJlbikpIHtcbiAgICBjbG9uZWQuY2hpbGRyZW4gPSB2bm9kZS5jaGlsZHJlbi5tYXAoZGVlcENsb25lVk5vZGUpO1xuICB9XG4gIHJldHVybiBjbG9uZWQ7XG59XG5mdW5jdGlvbiBjcmVhdGVUZXh0Vk5vZGUodGV4dCA9IFwiIFwiLCBmbGFnID0gMCkge1xuICByZXR1cm4gY3JlYXRlVk5vZGUoVGV4dCwgbnVsbCwgdGV4dCwgZmxhZyk7XG59XG5mdW5jdGlvbiBjcmVhdGVTdGF0aWNWTm9kZShjb250ZW50LCBudW1iZXJPZk5vZGVzKSB7XG4gIGNvbnN0IHZub2RlID0gY3JlYXRlVk5vZGUoU3RhdGljLCBudWxsLCBjb250ZW50KTtcbiAgdm5vZGUuc3RhdGljQ291bnQgPSBudW1iZXJPZk5vZGVzO1xuICByZXR1cm4gdm5vZGU7XG59XG5mdW5jdGlvbiBjcmVhdGVDb21tZW50Vk5vZGUodGV4dCA9IFwiXCIsIGFzQmxvY2sgPSBmYWxzZSkge1xuICByZXR1cm4gYXNCbG9jayA/IChvcGVuQmxvY2soKSwgY3JlYXRlQmxvY2soQ29tbWVudCwgbnVsbCwgdGV4dCkpIDogY3JlYXRlVk5vZGUoQ29tbWVudCwgbnVsbCwgdGV4dCk7XG59XG5mdW5jdGlvbiBub3JtYWxpemVWTm9kZShjaGlsZCkge1xuICBpZiAoY2hpbGQgPT0gbnVsbCB8fCB0eXBlb2YgY2hpbGQgPT09IFwiYm9vbGVhblwiKSB7XG4gICAgcmV0dXJuIGNyZWF0ZVZOb2RlKENvbW1lbnQpO1xuICB9IGVsc2UgaWYgKGlzQXJyYXkoY2hpbGQpKSB7XG4gICAgcmV0dXJuIGNyZWF0ZVZOb2RlKFxuICAgICAgRnJhZ21lbnQsXG4gICAgICBudWxsLFxuICAgICAgLy8gIzM2NjYsIGF2b2lkIHJlZmVyZW5jZSBwb2xsdXRpb24gd2hlbiByZXVzaW5nIHZub2RlXG4gICAgICBjaGlsZC5zbGljZSgpXG4gICAgKTtcbiAgfSBlbHNlIGlmICh0eXBlb2YgY2hpbGQgPT09IFwib2JqZWN0XCIpIHtcbiAgICByZXR1cm4gY2xvbmVJZk1vdW50ZWQoY2hpbGQpO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBjcmVhdGVWTm9kZShUZXh0LCBudWxsLCBTdHJpbmcoY2hpbGQpKTtcbiAgfVxufVxuZnVuY3Rpb24gY2xvbmVJZk1vdW50ZWQoY2hpbGQpIHtcbiAgcmV0dXJuIGNoaWxkLmVsID09PSBudWxsICYmIGNoaWxkLnBhdGNoRmxhZyAhPT0gLTEgfHwgY2hpbGQubWVtbyA/IGNoaWxkIDogY2xvbmVWTm9kZShjaGlsZCk7XG59XG5mdW5jdGlvbiBub3JtYWxpemVDaGlsZHJlbih2bm9kZSwgY2hpbGRyZW4pIHtcbiAgbGV0IHR5cGUgPSAwO1xuICBjb25zdCB7IHNoYXBlRmxhZyB9ID0gdm5vZGU7XG4gIGlmIChjaGlsZHJlbiA9PSBudWxsKSB7XG4gICAgY2hpbGRyZW4gPSBudWxsO1xuICB9IGVsc2UgaWYgKGlzQXJyYXkoY2hpbGRyZW4pKSB7XG4gICAgdHlwZSA9IDE2O1xuICB9IGVsc2UgaWYgKHR5cGVvZiBjaGlsZHJlbiA9PT0gXCJvYmplY3RcIikge1xuICAgIGlmIChzaGFwZUZsYWcgJiAoMSB8IDY0KSkge1xuICAgICAgY29uc3Qgc2xvdCA9IGNoaWxkcmVuLmRlZmF1bHQ7XG4gICAgICBpZiAoc2xvdCkge1xuICAgICAgICBzbG90Ll9jICYmIChzbG90Ll9kID0gZmFsc2UpO1xuICAgICAgICBub3JtYWxpemVDaGlsZHJlbih2bm9kZSwgc2xvdCgpKTtcbiAgICAgICAgc2xvdC5fYyAmJiAoc2xvdC5fZCA9IHRydWUpO1xuICAgICAgfVxuICAgICAgcmV0dXJuO1xuICAgIH0gZWxzZSB7XG4gICAgICB0eXBlID0gMzI7XG4gICAgICBjb25zdCBzbG90RmxhZyA9IGNoaWxkcmVuLl87XG4gICAgICBpZiAoIXNsb3RGbGFnICYmICEoSW50ZXJuYWxPYmplY3RLZXkgaW4gY2hpbGRyZW4pKSB7XG4gICAgICAgIGNoaWxkcmVuLl9jdHggPSBjdXJyZW50UmVuZGVyaW5nSW5zdGFuY2U7XG4gICAgICB9IGVsc2UgaWYgKHNsb3RGbGFnID09PSAzICYmIGN1cnJlbnRSZW5kZXJpbmdJbnN0YW5jZSkge1xuICAgICAgICBpZiAoY3VycmVudFJlbmRlcmluZ0luc3RhbmNlLnNsb3RzLl8gPT09IDEpIHtcbiAgICAgICAgICBjaGlsZHJlbi5fID0gMTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjaGlsZHJlbi5fID0gMjtcbiAgICAgICAgICB2bm9kZS5wYXRjaEZsYWcgfD0gMTAyNDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfSBlbHNlIGlmIChpc0Z1bmN0aW9uKGNoaWxkcmVuKSkge1xuICAgIGNoaWxkcmVuID0geyBkZWZhdWx0OiBjaGlsZHJlbiwgX2N0eDogY3VycmVudFJlbmRlcmluZ0luc3RhbmNlIH07XG4gICAgdHlwZSA9IDMyO1xuICB9IGVsc2Uge1xuICAgIGNoaWxkcmVuID0gU3RyaW5nKGNoaWxkcmVuKTtcbiAgICBpZiAoc2hhcGVGbGFnICYgNjQpIHtcbiAgICAgIHR5cGUgPSAxNjtcbiAgICAgIGNoaWxkcmVuID0gW2NyZWF0ZVRleHRWTm9kZShjaGlsZHJlbildO1xuICAgIH0gZWxzZSB7XG4gICAgICB0eXBlID0gODtcbiAgICB9XG4gIH1cbiAgdm5vZGUuY2hpbGRyZW4gPSBjaGlsZHJlbjtcbiAgdm5vZGUuc2hhcGVGbGFnIHw9IHR5cGU7XG59XG5mdW5jdGlvbiBtZXJnZVByb3BzKC4uLmFyZ3MpIHtcbiAgY29uc3QgcmV0ID0ge307XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgYXJncy5sZW5ndGg7IGkrKykge1xuICAgIGNvbnN0IHRvTWVyZ2UgPSBhcmdzW2ldO1xuICAgIGZvciAoY29uc3Qga2V5IGluIHRvTWVyZ2UpIHtcbiAgICAgIGlmIChrZXkgPT09IFwiY2xhc3NcIikge1xuICAgICAgICBpZiAocmV0LmNsYXNzICE9PSB0b01lcmdlLmNsYXNzKSB7XG4gICAgICAgICAgcmV0LmNsYXNzID0gbm9ybWFsaXplQ2xhc3MoW3JldC5jbGFzcywgdG9NZXJnZS5jbGFzc10pO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKGtleSA9PT0gXCJzdHlsZVwiKSB7XG4gICAgICAgIHJldC5zdHlsZSA9IG5vcm1hbGl6ZVN0eWxlKFtyZXQuc3R5bGUsIHRvTWVyZ2Uuc3R5bGVdKTtcbiAgICAgIH0gZWxzZSBpZiAoaXNPbihrZXkpKSB7XG4gICAgICAgIGNvbnN0IGV4aXN0aW5nID0gcmV0W2tleV07XG4gICAgICAgIGNvbnN0IGluY29taW5nID0gdG9NZXJnZVtrZXldO1xuICAgICAgICBpZiAoaW5jb21pbmcgJiYgZXhpc3RpbmcgIT09IGluY29taW5nICYmICEoaXNBcnJheShleGlzdGluZykgJiYgZXhpc3RpbmcuaW5jbHVkZXMoaW5jb21pbmcpKSkge1xuICAgICAgICAgIHJldFtrZXldID0gZXhpc3RpbmcgPyBbXS5jb25jYXQoZXhpc3RpbmcsIGluY29taW5nKSA6IGluY29taW5nO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKGtleSAhPT0gXCJcIikge1xuICAgICAgICByZXRba2V5XSA9IHRvTWVyZ2Vba2V5XTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgcmV0dXJuIHJldDtcbn1cbmZ1bmN0aW9uIGludm9rZVZOb2RlSG9vayhob29rLCBpbnN0YW5jZSwgdm5vZGUsIHByZXZWTm9kZSA9IG51bGwpIHtcbiAgY2FsbFdpdGhBc3luY0Vycm9ySGFuZGxpbmcoaG9vaywgaW5zdGFuY2UsIDcsIFtcbiAgICB2bm9kZSxcbiAgICBwcmV2Vk5vZGVcbiAgXSk7XG59XG5cbmNvbnN0IGVtcHR5QXBwQ29udGV4dCA9IGNyZWF0ZUFwcENvbnRleHQoKTtcbmxldCB1aWQgPSAwO1xuZnVuY3Rpb24gY3JlYXRlQ29tcG9uZW50SW5zdGFuY2Uodm5vZGUsIHBhcmVudCwgc3VzcGVuc2UpIHtcbiAgY29uc3QgdHlwZSA9IHZub2RlLnR5cGU7XG4gIGNvbnN0IGFwcENvbnRleHQgPSAocGFyZW50ID8gcGFyZW50LmFwcENvbnRleHQgOiB2bm9kZS5hcHBDb250ZXh0KSB8fCBlbXB0eUFwcENvbnRleHQ7XG4gIGNvbnN0IGluc3RhbmNlID0ge1xuICAgIHVpZDogdWlkKyssXG4gICAgdm5vZGUsXG4gICAgdHlwZSxcbiAgICBwYXJlbnQsXG4gICAgYXBwQ29udGV4dCxcbiAgICByb290OiBudWxsLFxuICAgIC8vIHRvIGJlIGltbWVkaWF0ZWx5IHNldFxuICAgIG5leHQ6IG51bGwsXG4gICAgc3ViVHJlZTogbnVsbCxcbiAgICAvLyB3aWxsIGJlIHNldCBzeW5jaHJvbm91c2x5IHJpZ2h0IGFmdGVyIGNyZWF0aW9uXG4gICAgZWZmZWN0OiBudWxsLFxuICAgIHVwZGF0ZTogbnVsbCxcbiAgICAvLyB3aWxsIGJlIHNldCBzeW5jaHJvbm91c2x5IHJpZ2h0IGFmdGVyIGNyZWF0aW9uXG4gICAgc2NvcGU6IG5ldyBFZmZlY3RTY29wZShcbiAgICAgIHRydWVcbiAgICAgIC8qIGRldGFjaGVkICovXG4gICAgKSxcbiAgICByZW5kZXI6IG51bGwsXG4gICAgcHJveHk6IG51bGwsXG4gICAgZXhwb3NlZDogbnVsbCxcbiAgICBleHBvc2VQcm94eTogbnVsbCxcbiAgICB3aXRoUHJveHk6IG51bGwsXG4gICAgcHJvdmlkZXM6IHBhcmVudCA/IHBhcmVudC5wcm92aWRlcyA6IE9iamVjdC5jcmVhdGUoYXBwQ29udGV4dC5wcm92aWRlcyksXG4gICAgYWNjZXNzQ2FjaGU6IG51bGwsXG4gICAgcmVuZGVyQ2FjaGU6IFtdLFxuICAgIC8vIGxvY2FsIHJlc29sdmVkIGFzc2V0c1xuICAgIGNvbXBvbmVudHM6IG51bGwsXG4gICAgZGlyZWN0aXZlczogbnVsbCxcbiAgICAvLyByZXNvbHZlZCBwcm9wcyBhbmQgZW1pdHMgb3B0aW9uc1xuICAgIHByb3BzT3B0aW9uczogbm9ybWFsaXplUHJvcHNPcHRpb25zKHR5cGUsIGFwcENvbnRleHQpLFxuICAgIGVtaXRzT3B0aW9uczogbm9ybWFsaXplRW1pdHNPcHRpb25zKHR5cGUsIGFwcENvbnRleHQpLFxuICAgIC8vIGVtaXRcbiAgICBlbWl0OiBudWxsLFxuICAgIC8vIHRvIGJlIHNldCBpbW1lZGlhdGVseVxuICAgIGVtaXR0ZWQ6IG51bGwsXG4gICAgLy8gcHJvcHMgZGVmYXVsdCB2YWx1ZVxuICAgIHByb3BzRGVmYXVsdHM6IEVNUFRZX09CSixcbiAgICAvLyBpbmhlcml0QXR0cnNcbiAgICBpbmhlcml0QXR0cnM6IHR5cGUuaW5oZXJpdEF0dHJzLFxuICAgIC8vIHN0YXRlXG4gICAgY3R4OiBFTVBUWV9PQkosXG4gICAgZGF0YTogRU1QVFlfT0JKLFxuICAgIHByb3BzOiBFTVBUWV9PQkosXG4gICAgYXR0cnM6IEVNUFRZX09CSixcbiAgICBzbG90czogRU1QVFlfT0JKLFxuICAgIHJlZnM6IEVNUFRZX09CSixcbiAgICBzZXR1cFN0YXRlOiBFTVBUWV9PQkosXG4gICAgc2V0dXBDb250ZXh0OiBudWxsLFxuICAgIGF0dHJzUHJveHk6IG51bGwsXG4gICAgc2xvdHNQcm94eTogbnVsbCxcbiAgICAvLyBzdXNwZW5zZSByZWxhdGVkXG4gICAgc3VzcGVuc2UsXG4gICAgc3VzcGVuc2VJZDogc3VzcGVuc2UgPyBzdXNwZW5zZS5wZW5kaW5nSWQgOiAwLFxuICAgIGFzeW5jRGVwOiBudWxsLFxuICAgIGFzeW5jUmVzb2x2ZWQ6IGZhbHNlLFxuICAgIC8vIGxpZmVjeWNsZSBob29rc1xuICAgIC8vIG5vdCB1c2luZyBlbnVtcyBoZXJlIGJlY2F1c2UgaXQgcmVzdWx0cyBpbiBjb21wdXRlZCBwcm9wZXJ0aWVzXG4gICAgaXNNb3VudGVkOiBmYWxzZSxcbiAgICBpc1VubW91bnRlZDogZmFsc2UsXG4gICAgaXNEZWFjdGl2YXRlZDogZmFsc2UsXG4gICAgYmM6IG51bGwsXG4gICAgYzogbnVsbCxcbiAgICBibTogbnVsbCxcbiAgICBtOiBudWxsLFxuICAgIGJ1OiBudWxsLFxuICAgIHU6IG51bGwsXG4gICAgdW06IG51bGwsXG4gICAgYnVtOiBudWxsLFxuICAgIGRhOiBudWxsLFxuICAgIGE6IG51bGwsXG4gICAgcnRnOiBudWxsLFxuICAgIHJ0YzogbnVsbCxcbiAgICBlYzogbnVsbCxcbiAgICBzcDogbnVsbFxuICB9O1xuICBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSkge1xuICAgIGluc3RhbmNlLmN0eCA9IGNyZWF0ZURldlJlbmRlckNvbnRleHQoaW5zdGFuY2UpO1xuICB9IGVsc2Uge1xuICAgIGluc3RhbmNlLmN0eCA9IHsgXzogaW5zdGFuY2UgfTtcbiAgfVxuICBpbnN0YW5jZS5yb290ID0gcGFyZW50ID8gcGFyZW50LnJvb3QgOiBpbnN0YW5jZTtcbiAgaW5zdGFuY2UuZW1pdCA9IGVtaXQuYmluZChudWxsLCBpbnN0YW5jZSk7XG4gIGlmICh2bm9kZS5jZSkge1xuICAgIHZub2RlLmNlKGluc3RhbmNlKTtcbiAgfVxuICByZXR1cm4gaW5zdGFuY2U7XG59XG5sZXQgY3VycmVudEluc3RhbmNlID0gbnVsbDtcbmNvbnN0IGdldEN1cnJlbnRJbnN0YW5jZSA9ICgpID0+IGN1cnJlbnRJbnN0YW5jZSB8fCBjdXJyZW50UmVuZGVyaW5nSW5zdGFuY2U7XG5sZXQgaW50ZXJuYWxTZXRDdXJyZW50SW5zdGFuY2U7XG5sZXQgc2V0SW5TU1JTZXR1cFN0YXRlO1xue1xuICBjb25zdCBnID0gZ2V0R2xvYmFsVGhpcygpO1xuICBjb25zdCByZWdpc3Rlckdsb2JhbFNldHRlciA9IChrZXksIHNldHRlcikgPT4ge1xuICAgIGxldCBzZXR0ZXJzO1xuICAgIGlmICghKHNldHRlcnMgPSBnW2tleV0pKVxuICAgICAgc2V0dGVycyA9IGdba2V5XSA9IFtdO1xuICAgIHNldHRlcnMucHVzaChzZXR0ZXIpO1xuICAgIHJldHVybiAodikgPT4ge1xuICAgICAgaWYgKHNldHRlcnMubGVuZ3RoID4gMSlcbiAgICAgICAgc2V0dGVycy5mb3JFYWNoKChzZXQpID0+IHNldCh2KSk7XG4gICAgICBlbHNlXG4gICAgICAgIHNldHRlcnNbMF0odik7XG4gICAgfTtcbiAgfTtcbiAgaW50ZXJuYWxTZXRDdXJyZW50SW5zdGFuY2UgPSByZWdpc3Rlckdsb2JhbFNldHRlcihcbiAgICBgX19WVUVfSU5TVEFOQ0VfU0VUVEVSU19fYCxcbiAgICAodikgPT4gY3VycmVudEluc3RhbmNlID0gdlxuICApO1xuICBzZXRJblNTUlNldHVwU3RhdGUgPSByZWdpc3Rlckdsb2JhbFNldHRlcihcbiAgICBgX19WVUVfU1NSX1NFVFRFUlNfX2AsXG4gICAgKHYpID0+IGlzSW5TU1JDb21wb25lbnRTZXR1cCA9IHZcbiAgKTtcbn1cbmNvbnN0IHNldEN1cnJlbnRJbnN0YW5jZSA9IChpbnN0YW5jZSkgPT4ge1xuICBjb25zdCBwcmV2ID0gY3VycmVudEluc3RhbmNlO1xuICBpbnRlcm5hbFNldEN1cnJlbnRJbnN0YW5jZShpbnN0YW5jZSk7XG4gIGluc3RhbmNlLnNjb3BlLm9uKCk7XG4gIHJldHVybiAoKSA9PiB7XG4gICAgaW5zdGFuY2Uuc2NvcGUub2ZmKCk7XG4gICAgaW50ZXJuYWxTZXRDdXJyZW50SW5zdGFuY2UocHJldik7XG4gIH07XG59O1xuY29uc3QgdW5zZXRDdXJyZW50SW5zdGFuY2UgPSAoKSA9PiB7XG4gIGN1cnJlbnRJbnN0YW5jZSAmJiBjdXJyZW50SW5zdGFuY2Uuc2NvcGUub2ZmKCk7XG4gIGludGVybmFsU2V0Q3VycmVudEluc3RhbmNlKG51bGwpO1xufTtcbmNvbnN0IGlzQnVpbHRJblRhZyA9IC8qIEBfX1BVUkVfXyAqLyBtYWtlTWFwKFwic2xvdCxjb21wb25lbnRcIik7XG5mdW5jdGlvbiB2YWxpZGF0ZUNvbXBvbmVudE5hbWUobmFtZSwgeyBpc05hdGl2ZVRhZyB9KSB7XG4gIGlmIChpc0J1aWx0SW5UYWcobmFtZSkgfHwgaXNOYXRpdmVUYWcobmFtZSkpIHtcbiAgICB3YXJuJDEoXG4gICAgICBcIkRvIG5vdCB1c2UgYnVpbHQtaW4gb3IgcmVzZXJ2ZWQgSFRNTCBlbGVtZW50cyBhcyBjb21wb25lbnQgaWQ6IFwiICsgbmFtZVxuICAgICk7XG4gIH1cbn1cbmZ1bmN0aW9uIGlzU3RhdGVmdWxDb21wb25lbnQoaW5zdGFuY2UpIHtcbiAgcmV0dXJuIGluc3RhbmNlLnZub2RlLnNoYXBlRmxhZyAmIDQ7XG59XG5sZXQgaXNJblNTUkNvbXBvbmVudFNldHVwID0gZmFsc2U7XG5mdW5jdGlvbiBzZXR1cENvbXBvbmVudChpbnN0YW5jZSwgaXNTU1IgPSBmYWxzZSkge1xuICBpc1NTUiAmJiBzZXRJblNTUlNldHVwU3RhdGUoaXNTU1IpO1xuICBjb25zdCB7IHByb3BzLCBjaGlsZHJlbiB9ID0gaW5zdGFuY2Uudm5vZGU7XG4gIGNvbnN0IGlzU3RhdGVmdWwgPSBpc1N0YXRlZnVsQ29tcG9uZW50KGluc3RhbmNlKTtcbiAgaW5pdFByb3BzKGluc3RhbmNlLCBwcm9wcywgaXNTdGF0ZWZ1bCwgaXNTU1IpO1xuICBpbml0U2xvdHMoaW5zdGFuY2UsIGNoaWxkcmVuKTtcbiAgY29uc3Qgc2V0dXBSZXN1bHQgPSBpc1N0YXRlZnVsID8gc2V0dXBTdGF0ZWZ1bENvbXBvbmVudChpbnN0YW5jZSwgaXNTU1IpIDogdm9pZCAwO1xuICBpc1NTUiAmJiBzZXRJblNTUlNldHVwU3RhdGUoZmFsc2UpO1xuICByZXR1cm4gc2V0dXBSZXN1bHQ7XG59XG5mdW5jdGlvbiBzZXR1cFN0YXRlZnVsQ29tcG9uZW50KGluc3RhbmNlLCBpc1NTUikge1xuICB2YXIgX2E7XG4gIGNvbnN0IENvbXBvbmVudCA9IGluc3RhbmNlLnR5cGU7XG4gIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpKSB7XG4gICAgaWYgKENvbXBvbmVudC5uYW1lKSB7XG4gICAgICB2YWxpZGF0ZUNvbXBvbmVudE5hbWUoQ29tcG9uZW50Lm5hbWUsIGluc3RhbmNlLmFwcENvbnRleHQuY29uZmlnKTtcbiAgICB9XG4gICAgaWYgKENvbXBvbmVudC5jb21wb25lbnRzKSB7XG4gICAgICBjb25zdCBuYW1lcyA9IE9iamVjdC5rZXlzKENvbXBvbmVudC5jb21wb25lbnRzKTtcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbmFtZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdmFsaWRhdGVDb21wb25lbnROYW1lKG5hbWVzW2ldLCBpbnN0YW5jZS5hcHBDb250ZXh0LmNvbmZpZyk7XG4gICAgICB9XG4gICAgfVxuICAgIGlmIChDb21wb25lbnQuZGlyZWN0aXZlcykge1xuICAgICAgY29uc3QgbmFtZXMgPSBPYmplY3Qua2V5cyhDb21wb25lbnQuZGlyZWN0aXZlcyk7XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG5hbWVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHZhbGlkYXRlRGlyZWN0aXZlTmFtZShuYW1lc1tpXSk7XG4gICAgICB9XG4gICAgfVxuICAgIGlmIChDb21wb25lbnQuY29tcGlsZXJPcHRpb25zICYmIGlzUnVudGltZU9ubHkoKSkge1xuICAgICAgd2FybiQxKFxuICAgICAgICBgXCJjb21waWxlck9wdGlvbnNcIiBpcyBvbmx5IHN1cHBvcnRlZCB3aGVuIHVzaW5nIGEgYnVpbGQgb2YgVnVlIHRoYXQgaW5jbHVkZXMgdGhlIHJ1bnRpbWUgY29tcGlsZXIuIFNpbmNlIHlvdSBhcmUgdXNpbmcgYSBydW50aW1lLW9ubHkgYnVpbGQsIHRoZSBvcHRpb25zIHNob3VsZCBiZSBwYXNzZWQgdmlhIHlvdXIgYnVpbGQgdG9vbCBjb25maWcgaW5zdGVhZC5gXG4gICAgICApO1xuICAgIH1cbiAgfVxuICBpbnN0YW5jZS5hY2Nlc3NDYWNoZSA9IC8qIEBfX1BVUkVfXyAqLyBPYmplY3QuY3JlYXRlKG51bGwpO1xuICBpbnN0YW5jZS5wcm94eSA9IG1hcmtSYXcobmV3IFByb3h5KGluc3RhbmNlLmN0eCwgUHVibGljSW5zdGFuY2VQcm94eUhhbmRsZXJzKSk7XG4gIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpKSB7XG4gICAgZXhwb3NlUHJvcHNPblJlbmRlckNvbnRleHQoaW5zdGFuY2UpO1xuICB9XG4gIGNvbnN0IHsgc2V0dXAgfSA9IENvbXBvbmVudDtcbiAgaWYgKHNldHVwKSB7XG4gICAgY29uc3Qgc2V0dXBDb250ZXh0ID0gaW5zdGFuY2Uuc2V0dXBDb250ZXh0ID0gc2V0dXAubGVuZ3RoID4gMSA/IGNyZWF0ZVNldHVwQ29udGV4dChpbnN0YW5jZSkgOiBudWxsO1xuICAgIGNvbnN0IHJlc2V0ID0gc2V0Q3VycmVudEluc3RhbmNlKGluc3RhbmNlKTtcbiAgICBwYXVzZVRyYWNraW5nKCk7XG4gICAgY29uc3Qgc2V0dXBSZXN1bHQgPSBjYWxsV2l0aEVycm9ySGFuZGxpbmcoXG4gICAgICBzZXR1cCxcbiAgICAgIGluc3RhbmNlLFxuICAgICAgMCxcbiAgICAgIFtcbiAgICAgICAgISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSA/IHNoYWxsb3dSZWFkb25seShpbnN0YW5jZS5wcm9wcykgOiBpbnN0YW5jZS5wcm9wcyxcbiAgICAgICAgc2V0dXBDb250ZXh0XG4gICAgICBdXG4gICAgKTtcbiAgICByZXNldFRyYWNraW5nKCk7XG4gICAgcmVzZXQoKTtcbiAgICBpZiAoaXNQcm9taXNlKHNldHVwUmVzdWx0KSkge1xuICAgICAgc2V0dXBSZXN1bHQudGhlbih1bnNldEN1cnJlbnRJbnN0YW5jZSwgdW5zZXRDdXJyZW50SW5zdGFuY2UpO1xuICAgICAgaWYgKGlzU1NSKSB7XG4gICAgICAgIHJldHVybiBzZXR1cFJlc3VsdC50aGVuKChyZXNvbHZlZFJlc3VsdCkgPT4ge1xuICAgICAgICAgIGhhbmRsZVNldHVwUmVzdWx0KGluc3RhbmNlLCByZXNvbHZlZFJlc3VsdCwgaXNTU1IpO1xuICAgICAgICB9KS5jYXRjaCgoZSkgPT4ge1xuICAgICAgICAgIGhhbmRsZUVycm9yKGUsIGluc3RhbmNlLCAwKTtcbiAgICAgICAgfSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpbnN0YW5jZS5hc3luY0RlcCA9IHNldHVwUmVzdWx0O1xuICAgICAgICBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSAmJiAhaW5zdGFuY2Uuc3VzcGVuc2UpIHtcbiAgICAgICAgICBjb25zdCBuYW1lID0gKF9hID0gQ29tcG9uZW50Lm5hbWUpICE9IG51bGwgPyBfYSA6IFwiQW5vbnltb3VzXCI7XG4gICAgICAgICAgd2FybiQxKFxuICAgICAgICAgICAgYENvbXBvbmVudCA8JHtuYW1lfT46IHNldHVwIGZ1bmN0aW9uIHJldHVybmVkIGEgcHJvbWlzZSwgYnV0IG5vIDxTdXNwZW5zZT4gYm91bmRhcnkgd2FzIGZvdW5kIGluIHRoZSBwYXJlbnQgY29tcG9uZW50IHRyZWUuIEEgY29tcG9uZW50IHdpdGggYXN5bmMgc2V0dXAoKSBtdXN0IGJlIG5lc3RlZCBpbiBhIDxTdXNwZW5zZT4gaW4gb3JkZXIgdG8gYmUgcmVuZGVyZWQuYFxuICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgaGFuZGxlU2V0dXBSZXN1bHQoaW5zdGFuY2UsIHNldHVwUmVzdWx0LCBpc1NTUik7XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIGZpbmlzaENvbXBvbmVudFNldHVwKGluc3RhbmNlLCBpc1NTUik7XG4gIH1cbn1cbmZ1bmN0aW9uIGhhbmRsZVNldHVwUmVzdWx0KGluc3RhbmNlLCBzZXR1cFJlc3VsdCwgaXNTU1IpIHtcbiAgaWYgKGlzRnVuY3Rpb24oc2V0dXBSZXN1bHQpKSB7XG4gICAgaWYgKGluc3RhbmNlLnR5cGUuX19zc3JJbmxpbmVSZW5kZXIpIHtcbiAgICAgIGluc3RhbmNlLnNzclJlbmRlciA9IHNldHVwUmVzdWx0O1xuICAgIH0gZWxzZSB7XG4gICAgICBpbnN0YW5jZS5yZW5kZXIgPSBzZXR1cFJlc3VsdDtcbiAgICB9XG4gIH0gZWxzZSBpZiAoaXNPYmplY3Qoc2V0dXBSZXN1bHQpKSB7XG4gICAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgJiYgaXNWTm9kZShzZXR1cFJlc3VsdCkpIHtcbiAgICAgIHdhcm4kMShcbiAgICAgICAgYHNldHVwKCkgc2hvdWxkIG5vdCByZXR1cm4gVk5vZGVzIGRpcmVjdGx5IC0gcmV0dXJuIGEgcmVuZGVyIGZ1bmN0aW9uIGluc3RlYWQuYFxuICAgICAgKTtcbiAgICB9XG4gICAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgfHwgX19WVUVfUFJPRF9ERVZUT09MU19fKSB7XG4gICAgICBpbnN0YW5jZS5kZXZ0b29sc1Jhd1NldHVwU3RhdGUgPSBzZXR1cFJlc3VsdDtcbiAgICB9XG4gICAgaW5zdGFuY2Uuc2V0dXBTdGF0ZSA9IHByb3h5UmVmcyhzZXR1cFJlc3VsdCk7XG4gICAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikpIHtcbiAgICAgIGV4cG9zZVNldHVwU3RhdGVPblJlbmRlckNvbnRleHQoaW5zdGFuY2UpO1xuICAgIH1cbiAgfSBlbHNlIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpICYmIHNldHVwUmVzdWx0ICE9PSB2b2lkIDApIHtcbiAgICB3YXJuJDEoXG4gICAgICBgc2V0dXAoKSBzaG91bGQgcmV0dXJuIGFuIG9iamVjdC4gUmVjZWl2ZWQ6ICR7c2V0dXBSZXN1bHQgPT09IG51bGwgPyBcIm51bGxcIiA6IHR5cGVvZiBzZXR1cFJlc3VsdH1gXG4gICAgKTtcbiAgfVxuICBmaW5pc2hDb21wb25lbnRTZXR1cChpbnN0YW5jZSwgaXNTU1IpO1xufVxubGV0IGNvbXBpbGU7XG5sZXQgaW5zdGFsbFdpdGhQcm94eTtcbmZ1bmN0aW9uIHJlZ2lzdGVyUnVudGltZUNvbXBpbGVyKF9jb21waWxlKSB7XG4gIGNvbXBpbGUgPSBfY29tcGlsZTtcbiAgaW5zdGFsbFdpdGhQcm94eSA9IChpKSA9PiB7XG4gICAgaWYgKGkucmVuZGVyLl9yYykge1xuICAgICAgaS53aXRoUHJveHkgPSBuZXcgUHJveHkoaS5jdHgsIFJ1bnRpbWVDb21waWxlZFB1YmxpY0luc3RhbmNlUHJveHlIYW5kbGVycyk7XG4gICAgfVxuICB9O1xufVxuY29uc3QgaXNSdW50aW1lT25seSA9ICgpID0+ICFjb21waWxlO1xuZnVuY3Rpb24gZmluaXNoQ29tcG9uZW50U2V0dXAoaW5zdGFuY2UsIGlzU1NSLCBza2lwT3B0aW9ucykge1xuICBjb25zdCBDb21wb25lbnQgPSBpbnN0YW5jZS50eXBlO1xuICBpZiAoIWluc3RhbmNlLnJlbmRlcikge1xuICAgIGlmICghaXNTU1IgJiYgY29tcGlsZSAmJiAhQ29tcG9uZW50LnJlbmRlcikge1xuICAgICAgY29uc3QgdGVtcGxhdGUgPSBDb21wb25lbnQudGVtcGxhdGUgfHwgcmVzb2x2ZU1lcmdlZE9wdGlvbnMoaW5zdGFuY2UpLnRlbXBsYXRlO1xuICAgICAgaWYgKHRlbXBsYXRlKSB7XG4gICAgICAgIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpKSB7XG4gICAgICAgICAgc3RhcnRNZWFzdXJlKGluc3RhbmNlLCBgY29tcGlsZWApO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHsgaXNDdXN0b21FbGVtZW50LCBjb21waWxlck9wdGlvbnMgfSA9IGluc3RhbmNlLmFwcENvbnRleHQuY29uZmlnO1xuICAgICAgICBjb25zdCB7IGRlbGltaXRlcnMsIGNvbXBpbGVyT3B0aW9uczogY29tcG9uZW50Q29tcGlsZXJPcHRpb25zIH0gPSBDb21wb25lbnQ7XG4gICAgICAgIGNvbnN0IGZpbmFsQ29tcGlsZXJPcHRpb25zID0gZXh0ZW5kKFxuICAgICAgICAgIGV4dGVuZChcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgaXNDdXN0b21FbGVtZW50LFxuICAgICAgICAgICAgICBkZWxpbWl0ZXJzXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgY29tcGlsZXJPcHRpb25zXG4gICAgICAgICAgKSxcbiAgICAgICAgICBjb21wb25lbnRDb21waWxlck9wdGlvbnNcbiAgICAgICAgKTtcbiAgICAgICAgQ29tcG9uZW50LnJlbmRlciA9IGNvbXBpbGUodGVtcGxhdGUsIGZpbmFsQ29tcGlsZXJPcHRpb25zKTtcbiAgICAgICAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikpIHtcbiAgICAgICAgICBlbmRNZWFzdXJlKGluc3RhbmNlLCBgY29tcGlsZWApO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIGluc3RhbmNlLnJlbmRlciA9IENvbXBvbmVudC5yZW5kZXIgfHwgTk9PUDtcbiAgICBpZiAoaW5zdGFsbFdpdGhQcm94eSkge1xuICAgICAgaW5zdGFsbFdpdGhQcm94eShpbnN0YW5jZSk7XG4gICAgfVxuICB9XG4gIGlmIChfX1ZVRV9PUFRJT05TX0FQSV9fICYmIHRydWUpIHtcbiAgICBjb25zdCByZXNldCA9IHNldEN1cnJlbnRJbnN0YW5jZShpbnN0YW5jZSk7XG4gICAgcGF1c2VUcmFja2luZygpO1xuICAgIHRyeSB7XG4gICAgICBhcHBseU9wdGlvbnMoaW5zdGFuY2UpO1xuICAgIH0gZmluYWxseSB7XG4gICAgICByZXNldFRyYWNraW5nKCk7XG4gICAgICByZXNldCgpO1xuICAgIH1cbiAgfVxuICBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSAmJiAhQ29tcG9uZW50LnJlbmRlciAmJiBpbnN0YW5jZS5yZW5kZXIgPT09IE5PT1AgJiYgIWlzU1NSKSB7XG4gICAgaWYgKCFjb21waWxlICYmIENvbXBvbmVudC50ZW1wbGF0ZSkge1xuICAgICAgd2FybiQxKFxuICAgICAgICBgQ29tcG9uZW50IHByb3ZpZGVkIHRlbXBsYXRlIG9wdGlvbiBidXQgcnVudGltZSBjb21waWxhdGlvbiBpcyBub3Qgc3VwcG9ydGVkIGluIHRoaXMgYnVpbGQgb2YgVnVlLmAgKyAoYCBDb25maWd1cmUgeW91ciBidW5kbGVyIHRvIGFsaWFzIFwidnVlXCIgdG8gXCJ2dWUvZGlzdC92dWUuZXNtLWJ1bmRsZXIuanNcIi5gIClcbiAgICAgICk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHdhcm4kMShgQ29tcG9uZW50IGlzIG1pc3NpbmcgdGVtcGxhdGUgb3IgcmVuZGVyIGZ1bmN0aW9uLmApO1xuICAgIH1cbiAgfVxufVxuZnVuY3Rpb24gZ2V0QXR0cnNQcm94eShpbnN0YW5jZSkge1xuICByZXR1cm4gaW5zdGFuY2UuYXR0cnNQcm94eSB8fCAoaW5zdGFuY2UuYXR0cnNQcm94eSA9IG5ldyBQcm94eShcbiAgICBpbnN0YW5jZS5hdHRycyxcbiAgICAhIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpID8ge1xuICAgICAgZ2V0KHRhcmdldCwga2V5KSB7XG4gICAgICAgIG1hcmtBdHRyc0FjY2Vzc2VkKCk7XG4gICAgICAgIHRyYWNrKGluc3RhbmNlLCBcImdldFwiLCBcIiRhdHRyc1wiKTtcbiAgICAgICAgcmV0dXJuIHRhcmdldFtrZXldO1xuICAgICAgfSxcbiAgICAgIHNldCgpIHtcbiAgICAgICAgd2FybiQxKGBzZXR1cENvbnRleHQuYXR0cnMgaXMgcmVhZG9ubHkuYCk7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH0sXG4gICAgICBkZWxldGVQcm9wZXJ0eSgpIHtcbiAgICAgICAgd2FybiQxKGBzZXR1cENvbnRleHQuYXR0cnMgaXMgcmVhZG9ubHkuYCk7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICB9IDoge1xuICAgICAgZ2V0KHRhcmdldCwga2V5KSB7XG4gICAgICAgIHRyYWNrKGluc3RhbmNlLCBcImdldFwiLCBcIiRhdHRyc1wiKTtcbiAgICAgICAgcmV0dXJuIHRhcmdldFtrZXldO1xuICAgICAgfVxuICAgIH1cbiAgKSk7XG59XG5mdW5jdGlvbiBnZXRTbG90c1Byb3h5KGluc3RhbmNlKSB7XG4gIHJldHVybiBpbnN0YW5jZS5zbG90c1Byb3h5IHx8IChpbnN0YW5jZS5zbG90c1Byb3h5ID0gbmV3IFByb3h5KGluc3RhbmNlLnNsb3RzLCB7XG4gICAgZ2V0KHRhcmdldCwga2V5KSB7XG4gICAgICB0cmFjayhpbnN0YW5jZSwgXCJnZXRcIiwgXCIkc2xvdHNcIik7XG4gICAgICByZXR1cm4gdGFyZ2V0W2tleV07XG4gICAgfVxuICB9KSk7XG59XG5mdW5jdGlvbiBjcmVhdGVTZXR1cENvbnRleHQoaW5zdGFuY2UpIHtcbiAgY29uc3QgZXhwb3NlID0gKGV4cG9zZWQpID0+IHtcbiAgICBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSkge1xuICAgICAgaWYgKGluc3RhbmNlLmV4cG9zZWQpIHtcbiAgICAgICAgd2FybiQxKGBleHBvc2UoKSBzaG91bGQgYmUgY2FsbGVkIG9ubHkgb25jZSBwZXIgc2V0dXAoKS5gKTtcbiAgICAgIH1cbiAgICAgIGlmIChleHBvc2VkICE9IG51bGwpIHtcbiAgICAgICAgbGV0IGV4cG9zZWRUeXBlID0gdHlwZW9mIGV4cG9zZWQ7XG4gICAgICAgIGlmIChleHBvc2VkVHlwZSA9PT0gXCJvYmplY3RcIikge1xuICAgICAgICAgIGlmIChpc0FycmF5KGV4cG9zZWQpKSB7XG4gICAgICAgICAgICBleHBvc2VkVHlwZSA9IFwiYXJyYXlcIjtcbiAgICAgICAgICB9IGVsc2UgaWYgKGlzUmVmKGV4cG9zZWQpKSB7XG4gICAgICAgICAgICBleHBvc2VkVHlwZSA9IFwicmVmXCI7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChleHBvc2VkVHlwZSAhPT0gXCJvYmplY3RcIikge1xuICAgICAgICAgIHdhcm4kMShcbiAgICAgICAgICAgIGBleHBvc2UoKSBzaG91bGQgYmUgcGFzc2VkIGEgcGxhaW4gb2JqZWN0LCByZWNlaXZlZCAke2V4cG9zZWRUeXBlfS5gXG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBpbnN0YW5jZS5leHBvc2VkID0gZXhwb3NlZCB8fCB7fTtcbiAgfTtcbiAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikpIHtcbiAgICByZXR1cm4gT2JqZWN0LmZyZWV6ZSh7XG4gICAgICBnZXQgYXR0cnMoKSB7XG4gICAgICAgIHJldHVybiBnZXRBdHRyc1Byb3h5KGluc3RhbmNlKTtcbiAgICAgIH0sXG4gICAgICBnZXQgc2xvdHMoKSB7XG4gICAgICAgIHJldHVybiBnZXRTbG90c1Byb3h5KGluc3RhbmNlKTtcbiAgICAgIH0sXG4gICAgICBnZXQgZW1pdCgpIHtcbiAgICAgICAgcmV0dXJuIChldmVudCwgLi4uYXJncykgPT4gaW5zdGFuY2UuZW1pdChldmVudCwgLi4uYXJncyk7XG4gICAgICB9LFxuICAgICAgZXhwb3NlXG4gICAgfSk7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGdldCBhdHRycygpIHtcbiAgICAgICAgcmV0dXJuIGdldEF0dHJzUHJveHkoaW5zdGFuY2UpO1xuICAgICAgfSxcbiAgICAgIHNsb3RzOiBpbnN0YW5jZS5zbG90cyxcbiAgICAgIGVtaXQ6IGluc3RhbmNlLmVtaXQsXG4gICAgICBleHBvc2VcbiAgICB9O1xuICB9XG59XG5mdW5jdGlvbiBnZXRFeHBvc2VQcm94eShpbnN0YW5jZSkge1xuICBpZiAoaW5zdGFuY2UuZXhwb3NlZCkge1xuICAgIHJldHVybiBpbnN0YW5jZS5leHBvc2VQcm94eSB8fCAoaW5zdGFuY2UuZXhwb3NlUHJveHkgPSBuZXcgUHJveHkocHJveHlSZWZzKG1hcmtSYXcoaW5zdGFuY2UuZXhwb3NlZCkpLCB7XG4gICAgICBnZXQodGFyZ2V0LCBrZXkpIHtcbiAgICAgICAgaWYgKGtleSBpbiB0YXJnZXQpIHtcbiAgICAgICAgICByZXR1cm4gdGFyZ2V0W2tleV07XG4gICAgICAgIH0gZWxzZSBpZiAoa2V5IGluIHB1YmxpY1Byb3BlcnRpZXNNYXApIHtcbiAgICAgICAgICByZXR1cm4gcHVibGljUHJvcGVydGllc01hcFtrZXldKGluc3RhbmNlKTtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIGhhcyh0YXJnZXQsIGtleSkge1xuICAgICAgICByZXR1cm4ga2V5IGluIHRhcmdldCB8fCBrZXkgaW4gcHVibGljUHJvcGVydGllc01hcDtcbiAgICAgIH1cbiAgICB9KSk7XG4gIH1cbn1cbmNvbnN0IGNsYXNzaWZ5UkUgPSAvKD86XnxbLV9dKShcXHcpL2c7XG5jb25zdCBjbGFzc2lmeSA9IChzdHIpID0+IHN0ci5yZXBsYWNlKGNsYXNzaWZ5UkUsIChjKSA9PiBjLnRvVXBwZXJDYXNlKCkpLnJlcGxhY2UoL1stX10vZywgXCJcIik7XG5mdW5jdGlvbiBnZXRDb21wb25lbnROYW1lKENvbXBvbmVudCwgaW5jbHVkZUluZmVycmVkID0gdHJ1ZSkge1xuICByZXR1cm4gaXNGdW5jdGlvbihDb21wb25lbnQpID8gQ29tcG9uZW50LmRpc3BsYXlOYW1lIHx8IENvbXBvbmVudC5uYW1lIDogQ29tcG9uZW50Lm5hbWUgfHwgaW5jbHVkZUluZmVycmVkICYmIENvbXBvbmVudC5fX25hbWU7XG59XG5mdW5jdGlvbiBmb3JtYXRDb21wb25lbnROYW1lKGluc3RhbmNlLCBDb21wb25lbnQsIGlzUm9vdCA9IGZhbHNlKSB7XG4gIGxldCBuYW1lID0gZ2V0Q29tcG9uZW50TmFtZShDb21wb25lbnQpO1xuICBpZiAoIW5hbWUgJiYgQ29tcG9uZW50Ll9fZmlsZSkge1xuICAgIGNvbnN0IG1hdGNoID0gQ29tcG9uZW50Ll9fZmlsZS5tYXRjaCgvKFteL1xcXFxdKylcXC5cXHcrJC8pO1xuICAgIGlmIChtYXRjaCkge1xuICAgICAgbmFtZSA9IG1hdGNoWzFdO1xuICAgIH1cbiAgfVxuICBpZiAoIW5hbWUgJiYgaW5zdGFuY2UgJiYgaW5zdGFuY2UucGFyZW50KSB7XG4gICAgY29uc3QgaW5mZXJGcm9tUmVnaXN0cnkgPSAocmVnaXN0cnkpID0+IHtcbiAgICAgIGZvciAoY29uc3Qga2V5IGluIHJlZ2lzdHJ5KSB7XG4gICAgICAgIGlmIChyZWdpc3RyeVtrZXldID09PSBDb21wb25lbnQpIHtcbiAgICAgICAgICByZXR1cm4ga2V5O1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfTtcbiAgICBuYW1lID0gaW5mZXJGcm9tUmVnaXN0cnkoXG4gICAgICBpbnN0YW5jZS5jb21wb25lbnRzIHx8IGluc3RhbmNlLnBhcmVudC50eXBlLmNvbXBvbmVudHNcbiAgICApIHx8IGluZmVyRnJvbVJlZ2lzdHJ5KGluc3RhbmNlLmFwcENvbnRleHQuY29tcG9uZW50cyk7XG4gIH1cbiAgcmV0dXJuIG5hbWUgPyBjbGFzc2lmeShuYW1lKSA6IGlzUm9vdCA/IGBBcHBgIDogYEFub255bW91c2A7XG59XG5mdW5jdGlvbiBpc0NsYXNzQ29tcG9uZW50KHZhbHVlKSB7XG4gIHJldHVybiBpc0Z1bmN0aW9uKHZhbHVlKSAmJiBcIl9fdmNjT3B0c1wiIGluIHZhbHVlO1xufVxuXG5jb25zdCBjb21wdXRlZCA9IChnZXR0ZXJPck9wdGlvbnMsIGRlYnVnT3B0aW9ucykgPT4ge1xuICBjb25zdCBjID0gY29tcHV0ZWQkMShnZXR0ZXJPck9wdGlvbnMsIGRlYnVnT3B0aW9ucywgaXNJblNTUkNvbXBvbmVudFNldHVwKTtcbiAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikpIHtcbiAgICBjb25zdCBpID0gZ2V0Q3VycmVudEluc3RhbmNlKCk7XG4gICAgaWYgKGkgJiYgaS5hcHBDb250ZXh0LmNvbmZpZy53YXJuUmVjdXJzaXZlQ29tcHV0ZWQpIHtcbiAgICAgIGMuX3dhcm5SZWN1cnNpdmUgPSB0cnVlO1xuICAgIH1cbiAgfVxuICByZXR1cm4gYztcbn07XG5cbmZ1bmN0aW9uIHVzZU1vZGVsKHByb3BzLCBuYW1lLCBvcHRpb25zID0gRU1QVFlfT0JKKSB7XG4gIGNvbnN0IGkgPSBnZXRDdXJyZW50SW5zdGFuY2UoKTtcbiAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgJiYgIWkpIHtcbiAgICB3YXJuJDEoYHVzZU1vZGVsKCkgY2FsbGVkIHdpdGhvdXQgYWN0aXZlIGluc3RhbmNlLmApO1xuICAgIHJldHVybiByZWYoKTtcbiAgfVxuICBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSAmJiAhaS5wcm9wc09wdGlvbnNbMF1bbmFtZV0pIHtcbiAgICB3YXJuJDEoYHVzZU1vZGVsKCkgY2FsbGVkIHdpdGggcHJvcCBcIiR7bmFtZX1cIiB3aGljaCBpcyBub3QgZGVjbGFyZWQuYCk7XG4gICAgcmV0dXJuIHJlZigpO1xuICB9XG4gIGNvbnN0IGNhbWVsaXplZE5hbWUgPSBjYW1lbGl6ZShuYW1lKTtcbiAgY29uc3QgaHlwaGVuYXRlZE5hbWUgPSBoeXBoZW5hdGUobmFtZSk7XG4gIGNvbnN0IHJlcyA9IGN1c3RvbVJlZigodHJhY2ssIHRyaWdnZXIpID0+IHtcbiAgICBsZXQgbG9jYWxWYWx1ZTtcbiAgICB3YXRjaFN5bmNFZmZlY3QoKCkgPT4ge1xuICAgICAgY29uc3QgcHJvcFZhbHVlID0gcHJvcHNbbmFtZV07XG4gICAgICBpZiAoaGFzQ2hhbmdlZChsb2NhbFZhbHVlLCBwcm9wVmFsdWUpKSB7XG4gICAgICAgIGxvY2FsVmFsdWUgPSBwcm9wVmFsdWU7XG4gICAgICAgIHRyaWdnZXIoKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4ge1xuICAgICAgZ2V0KCkge1xuICAgICAgICB0cmFjaygpO1xuICAgICAgICByZXR1cm4gb3B0aW9ucy5nZXQgPyBvcHRpb25zLmdldChsb2NhbFZhbHVlKSA6IGxvY2FsVmFsdWU7XG4gICAgICB9LFxuICAgICAgc2V0KHZhbHVlKSB7XG4gICAgICAgIGNvbnN0IHJhd1Byb3BzID0gaS52bm9kZS5wcm9wcztcbiAgICAgICAgaWYgKCEocmF3UHJvcHMgJiYgLy8gY2hlY2sgaWYgcGFyZW50IGhhcyBwYXNzZWQgdi1tb2RlbFxuICAgICAgICAobmFtZSBpbiByYXdQcm9wcyB8fCBjYW1lbGl6ZWROYW1lIGluIHJhd1Byb3BzIHx8IGh5cGhlbmF0ZWROYW1lIGluIHJhd1Byb3BzKSAmJiAoYG9uVXBkYXRlOiR7bmFtZX1gIGluIHJhd1Byb3BzIHx8IGBvblVwZGF0ZToke2NhbWVsaXplZE5hbWV9YCBpbiByYXdQcm9wcyB8fCBgb25VcGRhdGU6JHtoeXBoZW5hdGVkTmFtZX1gIGluIHJhd1Byb3BzKSkgJiYgaGFzQ2hhbmdlZCh2YWx1ZSwgbG9jYWxWYWx1ZSkpIHtcbiAgICAgICAgICBsb2NhbFZhbHVlID0gdmFsdWU7XG4gICAgICAgICAgdHJpZ2dlcigpO1xuICAgICAgICB9XG4gICAgICAgIGkuZW1pdChgdXBkYXRlOiR7bmFtZX1gLCBvcHRpb25zLnNldCA/IG9wdGlvbnMuc2V0KHZhbHVlKSA6IHZhbHVlKTtcbiAgICAgIH1cbiAgICB9O1xuICB9KTtcbiAgY29uc3QgbW9kaWZpZXJLZXkgPSBuYW1lID09PSBcIm1vZGVsVmFsdWVcIiA/IFwibW9kZWxNb2RpZmllcnNcIiA6IGAke25hbWV9TW9kaWZpZXJzYDtcbiAgcmVzW1N5bWJvbC5pdGVyYXRvcl0gPSAoKSA9PiB7XG4gICAgbGV0IGkyID0gMDtcbiAgICByZXR1cm4ge1xuICAgICAgbmV4dCgpIHtcbiAgICAgICAgaWYgKGkyIDwgMikge1xuICAgICAgICAgIHJldHVybiB7IHZhbHVlOiBpMisrID8gcHJvcHNbbW9kaWZpZXJLZXldIHx8IHt9IDogcmVzLCBkb25lOiBmYWxzZSB9O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJldHVybiB7IGRvbmU6IHRydWUgfTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH07XG4gIH07XG4gIHJldHVybiByZXM7XG59XG5cbmZ1bmN0aW9uIGgodHlwZSwgcHJvcHNPckNoaWxkcmVuLCBjaGlsZHJlbikge1xuICBjb25zdCBsID0gYXJndW1lbnRzLmxlbmd0aDtcbiAgaWYgKGwgPT09IDIpIHtcbiAgICBpZiAoaXNPYmplY3QocHJvcHNPckNoaWxkcmVuKSAmJiAhaXNBcnJheShwcm9wc09yQ2hpbGRyZW4pKSB7XG4gICAgICBpZiAoaXNWTm9kZShwcm9wc09yQ2hpbGRyZW4pKSB7XG4gICAgICAgIHJldHVybiBjcmVhdGVWTm9kZSh0eXBlLCBudWxsLCBbcHJvcHNPckNoaWxkcmVuXSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gY3JlYXRlVk5vZGUodHlwZSwgcHJvcHNPckNoaWxkcmVuKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIGNyZWF0ZVZOb2RlKHR5cGUsIG51bGwsIHByb3BzT3JDaGlsZHJlbik7XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIGlmIChsID4gMykge1xuICAgICAgY2hpbGRyZW4gPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsIDIpO1xuICAgIH0gZWxzZSBpZiAobCA9PT0gMyAmJiBpc1ZOb2RlKGNoaWxkcmVuKSkge1xuICAgICAgY2hpbGRyZW4gPSBbY2hpbGRyZW5dO1xuICAgIH1cbiAgICByZXR1cm4gY3JlYXRlVk5vZGUodHlwZSwgcHJvcHNPckNoaWxkcmVuLCBjaGlsZHJlbik7XG4gIH1cbn1cblxuZnVuY3Rpb24gaW5pdEN1c3RvbUZvcm1hdHRlcigpIHtcbiAgaWYgKCEhIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpIHx8IHR5cGVvZiB3aW5kb3cgPT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgY29uc3QgdnVlU3R5bGUgPSB7IHN0eWxlOiBcImNvbG9yOiMzYmE3NzZcIiB9O1xuICBjb25zdCBudW1iZXJTdHlsZSA9IHsgc3R5bGU6IFwiY29sb3I6IzE2NzdmZlwiIH07XG4gIGNvbnN0IHN0cmluZ1N0eWxlID0geyBzdHlsZTogXCJjb2xvcjojZjUyMjJkXCIgfTtcbiAgY29uc3Qga2V5d29yZFN0eWxlID0geyBzdHlsZTogXCJjb2xvcjojZWIyZjk2XCIgfTtcbiAgY29uc3QgZm9ybWF0dGVyID0ge1xuICAgIGhlYWRlcihvYmopIHtcbiAgICAgIGlmICghaXNPYmplY3Qob2JqKSkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH1cbiAgICAgIGlmIChvYmouX19pc1Z1ZSkge1xuICAgICAgICByZXR1cm4gW1wiZGl2XCIsIHZ1ZVN0eWxlLCBgVnVlSW5zdGFuY2VgXTtcbiAgICAgIH0gZWxzZSBpZiAoaXNSZWYob2JqKSkge1xuICAgICAgICByZXR1cm4gW1xuICAgICAgICAgIFwiZGl2XCIsXG4gICAgICAgICAge30sXG4gICAgICAgICAgW1wic3BhblwiLCB2dWVTdHlsZSwgZ2VuUmVmRmxhZyhvYmopXSxcbiAgICAgICAgICBcIjxcIixcbiAgICAgICAgICBmb3JtYXRWYWx1ZShvYmoudmFsdWUpLFxuICAgICAgICAgIGA+YFxuICAgICAgICBdO1xuICAgICAgfSBlbHNlIGlmIChpc1JlYWN0aXZlKG9iaikpIHtcbiAgICAgICAgcmV0dXJuIFtcbiAgICAgICAgICBcImRpdlwiLFxuICAgICAgICAgIHt9LFxuICAgICAgICAgIFtcInNwYW5cIiwgdnVlU3R5bGUsIGlzU2hhbGxvdyhvYmopID8gXCJTaGFsbG93UmVhY3RpdmVcIiA6IFwiUmVhY3RpdmVcIl0sXG4gICAgICAgICAgXCI8XCIsXG4gICAgICAgICAgZm9ybWF0VmFsdWUob2JqKSxcbiAgICAgICAgICBgPiR7aXNSZWFkb25seShvYmopID8gYCAocmVhZG9ubHkpYCA6IGBgfWBcbiAgICAgICAgXTtcbiAgICAgIH0gZWxzZSBpZiAoaXNSZWFkb25seShvYmopKSB7XG4gICAgICAgIHJldHVybiBbXG4gICAgICAgICAgXCJkaXZcIixcbiAgICAgICAgICB7fSxcbiAgICAgICAgICBbXCJzcGFuXCIsIHZ1ZVN0eWxlLCBpc1NoYWxsb3cob2JqKSA/IFwiU2hhbGxvd1JlYWRvbmx5XCIgOiBcIlJlYWRvbmx5XCJdLFxuICAgICAgICAgIFwiPFwiLFxuICAgICAgICAgIGZvcm1hdFZhbHVlKG9iaiksXG4gICAgICAgICAgXCI+XCJcbiAgICAgICAgXTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBudWxsO1xuICAgIH0sXG4gICAgaGFzQm9keShvYmopIHtcbiAgICAgIHJldHVybiBvYmogJiYgb2JqLl9faXNWdWU7XG4gICAgfSxcbiAgICBib2R5KG9iaikge1xuICAgICAgaWYgKG9iaiAmJiBvYmouX19pc1Z1ZSkge1xuICAgICAgICByZXR1cm4gW1xuICAgICAgICAgIFwiZGl2XCIsXG4gICAgICAgICAge30sXG4gICAgICAgICAgLi4uZm9ybWF0SW5zdGFuY2Uob2JqLiQpXG4gICAgICAgIF07XG4gICAgICB9XG4gICAgfVxuICB9O1xuICBmdW5jdGlvbiBmb3JtYXRJbnN0YW5jZShpbnN0YW5jZSkge1xuICAgIGNvbnN0IGJsb2NrcyA9IFtdO1xuICAgIGlmIChpbnN0YW5jZS50eXBlLnByb3BzICYmIGluc3RhbmNlLnByb3BzKSB7XG4gICAgICBibG9ja3MucHVzaChjcmVhdGVJbnN0YW5jZUJsb2NrKFwicHJvcHNcIiwgdG9SYXcoaW5zdGFuY2UucHJvcHMpKSk7XG4gICAgfVxuICAgIGlmIChpbnN0YW5jZS5zZXR1cFN0YXRlICE9PSBFTVBUWV9PQkopIHtcbiAgICAgIGJsb2Nrcy5wdXNoKGNyZWF0ZUluc3RhbmNlQmxvY2soXCJzZXR1cFwiLCBpbnN0YW5jZS5zZXR1cFN0YXRlKSk7XG4gICAgfVxuICAgIGlmIChpbnN0YW5jZS5kYXRhICE9PSBFTVBUWV9PQkopIHtcbiAgICAgIGJsb2Nrcy5wdXNoKGNyZWF0ZUluc3RhbmNlQmxvY2soXCJkYXRhXCIsIHRvUmF3KGluc3RhbmNlLmRhdGEpKSk7XG4gICAgfVxuICAgIGNvbnN0IGNvbXB1dGVkID0gZXh0cmFjdEtleXMoaW5zdGFuY2UsIFwiY29tcHV0ZWRcIik7XG4gICAgaWYgKGNvbXB1dGVkKSB7XG4gICAgICBibG9ja3MucHVzaChjcmVhdGVJbnN0YW5jZUJsb2NrKFwiY29tcHV0ZWRcIiwgY29tcHV0ZWQpKTtcbiAgICB9XG4gICAgY29uc3QgaW5qZWN0ZWQgPSBleHRyYWN0S2V5cyhpbnN0YW5jZSwgXCJpbmplY3RcIik7XG4gICAgaWYgKGluamVjdGVkKSB7XG4gICAgICBibG9ja3MucHVzaChjcmVhdGVJbnN0YW5jZUJsb2NrKFwiaW5qZWN0ZWRcIiwgaW5qZWN0ZWQpKTtcbiAgICB9XG4gICAgYmxvY2tzLnB1c2goW1xuICAgICAgXCJkaXZcIixcbiAgICAgIHt9LFxuICAgICAgW1xuICAgICAgICBcInNwYW5cIixcbiAgICAgICAge1xuICAgICAgICAgIHN0eWxlOiBrZXl3b3JkU3R5bGUuc3R5bGUgKyBcIjtvcGFjaXR5OjAuNjZcIlxuICAgICAgICB9LFxuICAgICAgICBcIiQgKGludGVybmFsKTogXCJcbiAgICAgIF0sXG4gICAgICBbXCJvYmplY3RcIiwgeyBvYmplY3Q6IGluc3RhbmNlIH1dXG4gICAgXSk7XG4gICAgcmV0dXJuIGJsb2NrcztcbiAgfVxuICBmdW5jdGlvbiBjcmVhdGVJbnN0YW5jZUJsb2NrKHR5cGUsIHRhcmdldCkge1xuICAgIHRhcmdldCA9IGV4dGVuZCh7fSwgdGFyZ2V0KTtcbiAgICBpZiAoIU9iamVjdC5rZXlzKHRhcmdldCkubGVuZ3RoKSB7XG4gICAgICByZXR1cm4gW1wic3BhblwiLCB7fV07XG4gICAgfVxuICAgIHJldHVybiBbXG4gICAgICBcImRpdlwiLFxuICAgICAgeyBzdHlsZTogXCJsaW5lLWhlaWdodDoxLjI1ZW07bWFyZ2luLWJvdHRvbTowLjZlbVwiIH0sXG4gICAgICBbXG4gICAgICAgIFwiZGl2XCIsXG4gICAgICAgIHtcbiAgICAgICAgICBzdHlsZTogXCJjb2xvcjojNDc2NTgyXCJcbiAgICAgICAgfSxcbiAgICAgICAgdHlwZVxuICAgICAgXSxcbiAgICAgIFtcbiAgICAgICAgXCJkaXZcIixcbiAgICAgICAge1xuICAgICAgICAgIHN0eWxlOiBcInBhZGRpbmctbGVmdDoxLjI1ZW1cIlxuICAgICAgICB9LFxuICAgICAgICAuLi5PYmplY3Qua2V5cyh0YXJnZXQpLm1hcCgoa2V5KSA9PiB7XG4gICAgICAgICAgcmV0dXJuIFtcbiAgICAgICAgICAgIFwiZGl2XCIsXG4gICAgICAgICAgICB7fSxcbiAgICAgICAgICAgIFtcInNwYW5cIiwga2V5d29yZFN0eWxlLCBrZXkgKyBcIjogXCJdLFxuICAgICAgICAgICAgZm9ybWF0VmFsdWUodGFyZ2V0W2tleV0sIGZhbHNlKVxuICAgICAgICAgIF07XG4gICAgICAgIH0pXG4gICAgICBdXG4gICAgXTtcbiAgfVxuICBmdW5jdGlvbiBmb3JtYXRWYWx1ZSh2LCBhc1JhdyA9IHRydWUpIHtcbiAgICBpZiAodHlwZW9mIHYgPT09IFwibnVtYmVyXCIpIHtcbiAgICAgIHJldHVybiBbXCJzcGFuXCIsIG51bWJlclN0eWxlLCB2XTtcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiB2ID09PSBcInN0cmluZ1wiKSB7XG4gICAgICByZXR1cm4gW1wic3BhblwiLCBzdHJpbmdTdHlsZSwgSlNPTi5zdHJpbmdpZnkodildO1xuICAgIH0gZWxzZSBpZiAodHlwZW9mIHYgPT09IFwiYm9vbGVhblwiKSB7XG4gICAgICByZXR1cm4gW1wic3BhblwiLCBrZXl3b3JkU3R5bGUsIHZdO1xuICAgIH0gZWxzZSBpZiAoaXNPYmplY3QodikpIHtcbiAgICAgIHJldHVybiBbXCJvYmplY3RcIiwgeyBvYmplY3Q6IGFzUmF3ID8gdG9SYXcodikgOiB2IH1dO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gW1wic3BhblwiLCBzdHJpbmdTdHlsZSwgU3RyaW5nKHYpXTtcbiAgICB9XG4gIH1cbiAgZnVuY3Rpb24gZXh0cmFjdEtleXMoaW5zdGFuY2UsIHR5cGUpIHtcbiAgICBjb25zdCBDb21wID0gaW5zdGFuY2UudHlwZTtcbiAgICBpZiAoaXNGdW5jdGlvbihDb21wKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBleHRyYWN0ZWQgPSB7fTtcbiAgICBmb3IgKGNvbnN0IGtleSBpbiBpbnN0YW5jZS5jdHgpIHtcbiAgICAgIGlmIChpc0tleU9mVHlwZShDb21wLCBrZXksIHR5cGUpKSB7XG4gICAgICAgIGV4dHJhY3RlZFtrZXldID0gaW5zdGFuY2UuY3R4W2tleV07XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBleHRyYWN0ZWQ7XG4gIH1cbiAgZnVuY3Rpb24gaXNLZXlPZlR5cGUoQ29tcCwga2V5LCB0eXBlKSB7XG4gICAgY29uc3Qgb3B0cyA9IENvbXBbdHlwZV07XG4gICAgaWYgKGlzQXJyYXkob3B0cykgJiYgb3B0cy5pbmNsdWRlcyhrZXkpIHx8IGlzT2JqZWN0KG9wdHMpICYmIGtleSBpbiBvcHRzKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgaWYgKENvbXAuZXh0ZW5kcyAmJiBpc0tleU9mVHlwZShDb21wLmV4dGVuZHMsIGtleSwgdHlwZSkpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBpZiAoQ29tcC5taXhpbnMgJiYgQ29tcC5taXhpbnMuc29tZSgobSkgPT4gaXNLZXlPZlR5cGUobSwga2V5LCB0eXBlKSkpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgfVxuICBmdW5jdGlvbiBnZW5SZWZGbGFnKHYpIHtcbiAgICBpZiAoaXNTaGFsbG93KHYpKSB7XG4gICAgICByZXR1cm4gYFNoYWxsb3dSZWZgO1xuICAgIH1cbiAgICBpZiAodi5lZmZlY3QpIHtcbiAgICAgIHJldHVybiBgQ29tcHV0ZWRSZWZgO1xuICAgIH1cbiAgICByZXR1cm4gYFJlZmA7XG4gIH1cbiAgaWYgKHdpbmRvdy5kZXZ0b29sc0Zvcm1hdHRlcnMpIHtcbiAgICB3aW5kb3cuZGV2dG9vbHNGb3JtYXR0ZXJzLnB1c2goZm9ybWF0dGVyKTtcbiAgfSBlbHNlIHtcbiAgICB3aW5kb3cuZGV2dG9vbHNGb3JtYXR0ZXJzID0gW2Zvcm1hdHRlcl07XG4gIH1cbn1cblxuZnVuY3Rpb24gd2l0aE1lbW8obWVtbywgcmVuZGVyLCBjYWNoZSwgaW5kZXgpIHtcbiAgY29uc3QgY2FjaGVkID0gY2FjaGVbaW5kZXhdO1xuICBpZiAoY2FjaGVkICYmIGlzTWVtb1NhbWUoY2FjaGVkLCBtZW1vKSkge1xuICAgIHJldHVybiBjYWNoZWQ7XG4gIH1cbiAgY29uc3QgcmV0ID0gcmVuZGVyKCk7XG4gIHJldC5tZW1vID0gbWVtby5zbGljZSgpO1xuICByZXR1cm4gY2FjaGVbaW5kZXhdID0gcmV0O1xufVxuZnVuY3Rpb24gaXNNZW1vU2FtZShjYWNoZWQsIG1lbW8pIHtcbiAgY29uc3QgcHJldiA9IGNhY2hlZC5tZW1vO1xuICBpZiAocHJldi5sZW5ndGggIT0gbWVtby5sZW5ndGgpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBwcmV2Lmxlbmd0aDsgaSsrKSB7XG4gICAgaWYgKGhhc0NoYW5nZWQocHJldltpXSwgbWVtb1tpXSkpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH1cbiAgaWYgKGlzQmxvY2tUcmVlRW5hYmxlZCA+IDAgJiYgY3VycmVudEJsb2NrKSB7XG4gICAgY3VycmVudEJsb2NrLnB1c2goY2FjaGVkKTtcbiAgfVxuICByZXR1cm4gdHJ1ZTtcbn1cblxuY29uc3QgdmVyc2lvbiA9IFwiMy40LjIxXCI7XG5jb25zdCB3YXJuID0gISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSA/IHdhcm4kMSA6IE5PT1A7XG5jb25zdCBFcnJvclR5cGVTdHJpbmdzID0gRXJyb3JUeXBlU3RyaW5ncyQxIDtcbmNvbnN0IGRldnRvb2xzID0gISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSB8fCB0cnVlID8gZGV2dG9vbHMkMSA6IHZvaWQgMDtcbmNvbnN0IHNldERldnRvb2xzSG9vayA9ICEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgfHwgdHJ1ZSA/IHNldERldnRvb2xzSG9vayQxIDogTk9PUDtcbmNvbnN0IF9zc3JVdGlscyA9IHtcbiAgY3JlYXRlQ29tcG9uZW50SW5zdGFuY2UsXG4gIHNldHVwQ29tcG9uZW50LFxuICByZW5kZXJDb21wb25lbnRSb290LFxuICBzZXRDdXJyZW50UmVuZGVyaW5nSW5zdGFuY2UsXG4gIGlzVk5vZGU6IGlzVk5vZGUsXG4gIG5vcm1hbGl6ZVZOb2RlXG59O1xuY29uc3Qgc3NyVXRpbHMgPSBfc3NyVXRpbHMgO1xuY29uc3QgcmVzb2x2ZUZpbHRlciA9IG51bGw7XG5jb25zdCBjb21wYXRVdGlscyA9IG51bGw7XG5jb25zdCBEZXByZWNhdGlvblR5cGVzID0gbnVsbDtcblxuZXhwb3J0IHsgQmFzZVRyYW5zaXRpb24sIEJhc2VUcmFuc2l0aW9uUHJvcHNWYWxpZGF0b3JzLCBDb21tZW50LCBEZXByZWNhdGlvblR5cGVzLCBFcnJvckNvZGVzLCBFcnJvclR5cGVTdHJpbmdzLCBGcmFnbWVudCwgS2VlcEFsaXZlLCBTdGF0aWMsIFN1c3BlbnNlLCBUZWxlcG9ydCwgVGV4dCwgYXNzZXJ0TnVtYmVyLCBjYWxsV2l0aEFzeW5jRXJyb3JIYW5kbGluZywgY2FsbFdpdGhFcnJvckhhbmRsaW5nLCBjbG9uZVZOb2RlLCBjb21wYXRVdGlscywgY29tcHV0ZWQsIGNyZWF0ZUJsb2NrLCBjcmVhdGVDb21tZW50Vk5vZGUsIGNyZWF0ZUVsZW1lbnRCbG9jaywgY3JlYXRlQmFzZVZOb2RlIGFzIGNyZWF0ZUVsZW1lbnRWTm9kZSwgY3JlYXRlSHlkcmF0aW9uUmVuZGVyZXIsIGNyZWF0ZVByb3BzUmVzdFByb3h5LCBjcmVhdGVSZW5kZXJlciwgY3JlYXRlU2xvdHMsIGNyZWF0ZVN0YXRpY1ZOb2RlLCBjcmVhdGVUZXh0Vk5vZGUsIGNyZWF0ZVZOb2RlLCBkZWZpbmVBc3luY0NvbXBvbmVudCwgZGVmaW5lQ29tcG9uZW50LCBkZWZpbmVFbWl0cywgZGVmaW5lRXhwb3NlLCBkZWZpbmVNb2RlbCwgZGVmaW5lT3B0aW9ucywgZGVmaW5lUHJvcHMsIGRlZmluZVNsb3RzLCBkZXZ0b29scywgZ2V0Q3VycmVudEluc3RhbmNlLCBnZXRUcmFuc2l0aW9uUmF3Q2hpbGRyZW4sIGd1YXJkUmVhY3RpdmVQcm9wcywgaCwgaGFuZGxlRXJyb3IsIGhhc0luamVjdGlvbkNvbnRleHQsIGluaXRDdXN0b21Gb3JtYXR0ZXIsIGluamVjdCwgaXNNZW1vU2FtZSwgaXNSdW50aW1lT25seSwgaXNWTm9kZSwgbWVyZ2VEZWZhdWx0cywgbWVyZ2VNb2RlbHMsIG1lcmdlUHJvcHMsIG5leHRUaWNrLCBvbkFjdGl2YXRlZCwgb25CZWZvcmVNb3VudCwgb25CZWZvcmVVbm1vdW50LCBvbkJlZm9yZVVwZGF0ZSwgb25EZWFjdGl2YXRlZCwgb25FcnJvckNhcHR1cmVkLCBvbk1vdW50ZWQsIG9uUmVuZGVyVHJhY2tlZCwgb25SZW5kZXJUcmlnZ2VyZWQsIG9uU2VydmVyUHJlZmV0Y2gsIG9uVW5tb3VudGVkLCBvblVwZGF0ZWQsIG9wZW5CbG9jaywgcG9wU2NvcGVJZCwgcHJvdmlkZSwgcHVzaFNjb3BlSWQsIHF1ZXVlUG9zdEZsdXNoQ2IsIHJlZ2lzdGVyUnVudGltZUNvbXBpbGVyLCByZW5kZXJMaXN0LCByZW5kZXJTbG90LCByZXNvbHZlQ29tcG9uZW50LCByZXNvbHZlRGlyZWN0aXZlLCByZXNvbHZlRHluYW1pY0NvbXBvbmVudCwgcmVzb2x2ZUZpbHRlciwgcmVzb2x2ZVRyYW5zaXRpb25Ib29rcywgc2V0QmxvY2tUcmFja2luZywgc2V0RGV2dG9vbHNIb29rLCBzZXRUcmFuc2l0aW9uSG9va3MsIHNzckNvbnRleHRLZXksIHNzclV0aWxzLCB0b0hhbmRsZXJzLCB0cmFuc2Zvcm1WTm9kZUFyZ3MsIHVzZUF0dHJzLCB1c2VNb2RlbCwgdXNlU1NSQ29udGV4dCwgdXNlU2xvdHMsIHVzZVRyYW5zaXRpb25TdGF0ZSwgdmVyc2lvbiwgd2Fybiwgd2F0Y2gsIHdhdGNoRWZmZWN0LCB3YXRjaFBvc3RFZmZlY3QsIHdhdGNoU3luY0VmZmVjdCwgd2l0aEFzeW5jQ29udGV4dCwgd2l0aEN0eCwgd2l0aERlZmF1bHRzLCB3aXRoRGlyZWN0aXZlcywgd2l0aE1lbW8sIHdpdGhTY29wZUlkIH07XG4iLCIvKipcbiogQHZ1ZS9ydW50aW1lLWRvbSB2My40LjIxXG4qIChjKSAyMDE4LXByZXNlbnQgWXV4aSAoRXZhbikgWW91IGFuZCBWdWUgY29udHJpYnV0b3JzXG4qIEBsaWNlbnNlIE1JVFxuKiovXG5pbXBvcnQgeyBoLCBCYXNlVHJhbnNpdGlvbiwgQmFzZVRyYW5zaXRpb25Qcm9wc1ZhbGlkYXRvcnMsIGFzc2VydE51bWJlciwgZ2V0Q3VycmVudEluc3RhbmNlLCB3YXJuLCB3YXRjaFBvc3RFZmZlY3QsIG9uTW91bnRlZCwgb25Vbm1vdW50ZWQsIEZyYWdtZW50LCBTdGF0aWMsIGNhbWVsaXplLCBjYWxsV2l0aEFzeW5jRXJyb3JIYW5kbGluZywgZGVmaW5lQ29tcG9uZW50LCBuZXh0VGljaywgY3JlYXRlVk5vZGUsIHVzZVRyYW5zaXRpb25TdGF0ZSwgb25VcGRhdGVkLCB0b1JhdywgZ2V0VHJhbnNpdGlvblJhd0NoaWxkcmVuLCBzZXRUcmFuc2l0aW9uSG9va3MsIHJlc29sdmVUcmFuc2l0aW9uSG9va3MsIGlzUnVudGltZU9ubHksIGNyZWF0ZVJlbmRlcmVyLCBjcmVhdGVIeWRyYXRpb25SZW5kZXJlciB9IGZyb20gJ0B2dWUvcnVudGltZS1jb3JlJztcbmV4cG9ydCAqIGZyb20gJ0B2dWUvcnVudGltZS1jb3JlJztcbmltcG9ydCB7IGV4dGVuZCwgaXNPYmplY3QsIHRvTnVtYmVyLCBpc0FycmF5LCBpc1N0cmluZywgaHlwaGVuYXRlLCBjYXBpdGFsaXplLCBpc1NwZWNpYWxCb29sZWFuQXR0ciwgaW5jbHVkZUJvb2xlYW5BdHRyLCBpc09uLCBpc01vZGVsTGlzdGVuZXIsIGlzRnVuY3Rpb24sIGNhbWVsaXplIGFzIGNhbWVsaXplJDEsIEVNUFRZX09CSiwgbG9vc2VUb051bWJlciwgbG9vc2VJbmRleE9mLCBpc1NldCwgbG9vc2VFcXVhbCwgaW52b2tlQXJyYXlGbnMsIGlzSFRNTFRhZywgaXNTVkdUYWcsIGlzTWF0aE1MVGFnIH0gZnJvbSAnQHZ1ZS9zaGFyZWQnO1xuXG5jb25zdCBzdmdOUyA9IFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIjtcbmNvbnN0IG1hdGhtbE5TID0gXCJodHRwOi8vd3d3LnczLm9yZy8xOTk4L01hdGgvTWF0aE1MXCI7XG5jb25zdCBkb2MgPSB0eXBlb2YgZG9jdW1lbnQgIT09IFwidW5kZWZpbmVkXCIgPyBkb2N1bWVudCA6IG51bGw7XG5jb25zdCB0ZW1wbGF0ZUNvbnRhaW5lciA9IGRvYyAmJiAvKiBAX19QVVJFX18gKi8gZG9jLmNyZWF0ZUVsZW1lbnQoXCJ0ZW1wbGF0ZVwiKTtcbmNvbnN0IG5vZGVPcHMgPSB7XG4gIGluc2VydDogKGNoaWxkLCBwYXJlbnQsIGFuY2hvcikgPT4ge1xuICAgIHBhcmVudC5pbnNlcnRCZWZvcmUoY2hpbGQsIGFuY2hvciB8fCBudWxsKTtcbiAgfSxcbiAgcmVtb3ZlOiAoY2hpbGQpID0+IHtcbiAgICBjb25zdCBwYXJlbnQgPSBjaGlsZC5wYXJlbnROb2RlO1xuICAgIGlmIChwYXJlbnQpIHtcbiAgICAgIHBhcmVudC5yZW1vdmVDaGlsZChjaGlsZCk7XG4gICAgfVxuICB9LFxuICBjcmVhdGVFbGVtZW50OiAodGFnLCBuYW1lc3BhY2UsIGlzLCBwcm9wcykgPT4ge1xuICAgIGNvbnN0IGVsID0gbmFtZXNwYWNlID09PSBcInN2Z1wiID8gZG9jLmNyZWF0ZUVsZW1lbnROUyhzdmdOUywgdGFnKSA6IG5hbWVzcGFjZSA9PT0gXCJtYXRobWxcIiA/IGRvYy5jcmVhdGVFbGVtZW50TlMobWF0aG1sTlMsIHRhZykgOiBkb2MuY3JlYXRlRWxlbWVudCh0YWcsIGlzID8geyBpcyB9IDogdm9pZCAwKTtcbiAgICBpZiAodGFnID09PSBcInNlbGVjdFwiICYmIHByb3BzICYmIHByb3BzLm11bHRpcGxlICE9IG51bGwpIHtcbiAgICAgIGVsLnNldEF0dHJpYnV0ZShcIm11bHRpcGxlXCIsIHByb3BzLm11bHRpcGxlKTtcbiAgICB9XG4gICAgcmV0dXJuIGVsO1xuICB9LFxuICBjcmVhdGVUZXh0OiAodGV4dCkgPT4gZG9jLmNyZWF0ZVRleHROb2RlKHRleHQpLFxuICBjcmVhdGVDb21tZW50OiAodGV4dCkgPT4gZG9jLmNyZWF0ZUNvbW1lbnQodGV4dCksXG4gIHNldFRleHQ6IChub2RlLCB0ZXh0KSA9PiB7XG4gICAgbm9kZS5ub2RlVmFsdWUgPSB0ZXh0O1xuICB9LFxuICBzZXRFbGVtZW50VGV4dDogKGVsLCB0ZXh0KSA9PiB7XG4gICAgZWwudGV4dENvbnRlbnQgPSB0ZXh0O1xuICB9LFxuICBwYXJlbnROb2RlOiAobm9kZSkgPT4gbm9kZS5wYXJlbnROb2RlLFxuICBuZXh0U2libGluZzogKG5vZGUpID0+IG5vZGUubmV4dFNpYmxpbmcsXG4gIHF1ZXJ5U2VsZWN0b3I6IChzZWxlY3RvcikgPT4gZG9jLnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3IpLFxuICBzZXRTY29wZUlkKGVsLCBpZCkge1xuICAgIGVsLnNldEF0dHJpYnV0ZShpZCwgXCJcIik7XG4gIH0sXG4gIC8vIF9fVU5TQUZFX19cbiAgLy8gUmVhc29uOiBpbm5lckhUTUwuXG4gIC8vIFN0YXRpYyBjb250ZW50IGhlcmUgY2FuIG9ubHkgY29tZSBmcm9tIGNvbXBpbGVkIHRlbXBsYXRlcy5cbiAgLy8gQXMgbG9uZyBhcyB0aGUgdXNlciBvbmx5IHVzZXMgdHJ1c3RlZCB0ZW1wbGF0ZXMsIHRoaXMgaXMgc2FmZS5cbiAgaW5zZXJ0U3RhdGljQ29udGVudChjb250ZW50LCBwYXJlbnQsIGFuY2hvciwgbmFtZXNwYWNlLCBzdGFydCwgZW5kKSB7XG4gICAgY29uc3QgYmVmb3JlID0gYW5jaG9yID8gYW5jaG9yLnByZXZpb3VzU2libGluZyA6IHBhcmVudC5sYXN0Q2hpbGQ7XG4gICAgaWYgKHN0YXJ0ICYmIChzdGFydCA9PT0gZW5kIHx8IHN0YXJ0Lm5leHRTaWJsaW5nKSkge1xuICAgICAgd2hpbGUgKHRydWUpIHtcbiAgICAgICAgcGFyZW50Lmluc2VydEJlZm9yZShzdGFydC5jbG9uZU5vZGUodHJ1ZSksIGFuY2hvcik7XG4gICAgICAgIGlmIChzdGFydCA9PT0gZW5kIHx8ICEoc3RhcnQgPSBzdGFydC5uZXh0U2libGluZykpXG4gICAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHRlbXBsYXRlQ29udGFpbmVyLmlubmVySFRNTCA9IG5hbWVzcGFjZSA9PT0gXCJzdmdcIiA/IGA8c3ZnPiR7Y29udGVudH08L3N2Zz5gIDogbmFtZXNwYWNlID09PSBcIm1hdGhtbFwiID8gYDxtYXRoPiR7Y29udGVudH08L21hdGg+YCA6IGNvbnRlbnQ7XG4gICAgICBjb25zdCB0ZW1wbGF0ZSA9IHRlbXBsYXRlQ29udGFpbmVyLmNvbnRlbnQ7XG4gICAgICBpZiAobmFtZXNwYWNlID09PSBcInN2Z1wiIHx8IG5hbWVzcGFjZSA9PT0gXCJtYXRobWxcIikge1xuICAgICAgICBjb25zdCB3cmFwcGVyID0gdGVtcGxhdGUuZmlyc3RDaGlsZDtcbiAgICAgICAgd2hpbGUgKHdyYXBwZXIuZmlyc3RDaGlsZCkge1xuICAgICAgICAgIHRlbXBsYXRlLmFwcGVuZENoaWxkKHdyYXBwZXIuZmlyc3RDaGlsZCk7XG4gICAgICAgIH1cbiAgICAgICAgdGVtcGxhdGUucmVtb3ZlQ2hpbGQod3JhcHBlcik7XG4gICAgICB9XG4gICAgICBwYXJlbnQuaW5zZXJ0QmVmb3JlKHRlbXBsYXRlLCBhbmNob3IpO1xuICAgIH1cbiAgICByZXR1cm4gW1xuICAgICAgLy8gZmlyc3RcbiAgICAgIGJlZm9yZSA/IGJlZm9yZS5uZXh0U2libGluZyA6IHBhcmVudC5maXJzdENoaWxkLFxuICAgICAgLy8gbGFzdFxuICAgICAgYW5jaG9yID8gYW5jaG9yLnByZXZpb3VzU2libGluZyA6IHBhcmVudC5sYXN0Q2hpbGRcbiAgICBdO1xuICB9XG59O1xuXG5jb25zdCBUUkFOU0lUSU9OID0gXCJ0cmFuc2l0aW9uXCI7XG5jb25zdCBBTklNQVRJT04gPSBcImFuaW1hdGlvblwiO1xuY29uc3QgdnRjS2V5ID0gU3ltYm9sKFwiX3Z0Y1wiKTtcbmNvbnN0IFRyYW5zaXRpb24gPSAocHJvcHMsIHsgc2xvdHMgfSkgPT4gaChCYXNlVHJhbnNpdGlvbiwgcmVzb2x2ZVRyYW5zaXRpb25Qcm9wcyhwcm9wcyksIHNsb3RzKTtcblRyYW5zaXRpb24uZGlzcGxheU5hbWUgPSBcIlRyYW5zaXRpb25cIjtcbmNvbnN0IERPTVRyYW5zaXRpb25Qcm9wc1ZhbGlkYXRvcnMgPSB7XG4gIG5hbWU6IFN0cmluZyxcbiAgdHlwZTogU3RyaW5nLFxuICBjc3M6IHtcbiAgICB0eXBlOiBCb29sZWFuLFxuICAgIGRlZmF1bHQ6IHRydWVcbiAgfSxcbiAgZHVyYXRpb246IFtTdHJpbmcsIE51bWJlciwgT2JqZWN0XSxcbiAgZW50ZXJGcm9tQ2xhc3M6IFN0cmluZyxcbiAgZW50ZXJBY3RpdmVDbGFzczogU3RyaW5nLFxuICBlbnRlclRvQ2xhc3M6IFN0cmluZyxcbiAgYXBwZWFyRnJvbUNsYXNzOiBTdHJpbmcsXG4gIGFwcGVhckFjdGl2ZUNsYXNzOiBTdHJpbmcsXG4gIGFwcGVhclRvQ2xhc3M6IFN0cmluZyxcbiAgbGVhdmVGcm9tQ2xhc3M6IFN0cmluZyxcbiAgbGVhdmVBY3RpdmVDbGFzczogU3RyaW5nLFxuICBsZWF2ZVRvQ2xhc3M6IFN0cmluZ1xufTtcbmNvbnN0IFRyYW5zaXRpb25Qcm9wc1ZhbGlkYXRvcnMgPSBUcmFuc2l0aW9uLnByb3BzID0gLyogQF9fUFVSRV9fICovIGV4dGVuZChcbiAge30sXG4gIEJhc2VUcmFuc2l0aW9uUHJvcHNWYWxpZGF0b3JzLFxuICBET01UcmFuc2l0aW9uUHJvcHNWYWxpZGF0b3JzXG4pO1xuY29uc3QgY2FsbEhvb2sgPSAoaG9vaywgYXJncyA9IFtdKSA9PiB7XG4gIGlmIChpc0FycmF5KGhvb2spKSB7XG4gICAgaG9vay5mb3JFYWNoKChoMikgPT4gaDIoLi4uYXJncykpO1xuICB9IGVsc2UgaWYgKGhvb2spIHtcbiAgICBob29rKC4uLmFyZ3MpO1xuICB9XG59O1xuY29uc3QgaGFzRXhwbGljaXRDYWxsYmFjayA9IChob29rKSA9PiB7XG4gIHJldHVybiBob29rID8gaXNBcnJheShob29rKSA/IGhvb2suc29tZSgoaDIpID0+IGgyLmxlbmd0aCA+IDEpIDogaG9vay5sZW5ndGggPiAxIDogZmFsc2U7XG59O1xuZnVuY3Rpb24gcmVzb2x2ZVRyYW5zaXRpb25Qcm9wcyhyYXdQcm9wcykge1xuICBjb25zdCBiYXNlUHJvcHMgPSB7fTtcbiAgZm9yIChjb25zdCBrZXkgaW4gcmF3UHJvcHMpIHtcbiAgICBpZiAoIShrZXkgaW4gRE9NVHJhbnNpdGlvblByb3BzVmFsaWRhdG9ycykpIHtcbiAgICAgIGJhc2VQcm9wc1trZXldID0gcmF3UHJvcHNba2V5XTtcbiAgICB9XG4gIH1cbiAgaWYgKHJhd1Byb3BzLmNzcyA9PT0gZmFsc2UpIHtcbiAgICByZXR1cm4gYmFzZVByb3BzO1xuICB9XG4gIGNvbnN0IHtcbiAgICBuYW1lID0gXCJ2XCIsXG4gICAgdHlwZSxcbiAgICBkdXJhdGlvbixcbiAgICBlbnRlckZyb21DbGFzcyA9IGAke25hbWV9LWVudGVyLWZyb21gLFxuICAgIGVudGVyQWN0aXZlQ2xhc3MgPSBgJHtuYW1lfS1lbnRlci1hY3RpdmVgLFxuICAgIGVudGVyVG9DbGFzcyA9IGAke25hbWV9LWVudGVyLXRvYCxcbiAgICBhcHBlYXJGcm9tQ2xhc3MgPSBlbnRlckZyb21DbGFzcyxcbiAgICBhcHBlYXJBY3RpdmVDbGFzcyA9IGVudGVyQWN0aXZlQ2xhc3MsXG4gICAgYXBwZWFyVG9DbGFzcyA9IGVudGVyVG9DbGFzcyxcbiAgICBsZWF2ZUZyb21DbGFzcyA9IGAke25hbWV9LWxlYXZlLWZyb21gLFxuICAgIGxlYXZlQWN0aXZlQ2xhc3MgPSBgJHtuYW1lfS1sZWF2ZS1hY3RpdmVgLFxuICAgIGxlYXZlVG9DbGFzcyA9IGAke25hbWV9LWxlYXZlLXRvYFxuICB9ID0gcmF3UHJvcHM7XG4gIGNvbnN0IGR1cmF0aW9ucyA9IG5vcm1hbGl6ZUR1cmF0aW9uKGR1cmF0aW9uKTtcbiAgY29uc3QgZW50ZXJEdXJhdGlvbiA9IGR1cmF0aW9ucyAmJiBkdXJhdGlvbnNbMF07XG4gIGNvbnN0IGxlYXZlRHVyYXRpb24gPSBkdXJhdGlvbnMgJiYgZHVyYXRpb25zWzFdO1xuICBjb25zdCB7XG4gICAgb25CZWZvcmVFbnRlcixcbiAgICBvbkVudGVyLFxuICAgIG9uRW50ZXJDYW5jZWxsZWQsXG4gICAgb25MZWF2ZSxcbiAgICBvbkxlYXZlQ2FuY2VsbGVkLFxuICAgIG9uQmVmb3JlQXBwZWFyID0gb25CZWZvcmVFbnRlcixcbiAgICBvbkFwcGVhciA9IG9uRW50ZXIsXG4gICAgb25BcHBlYXJDYW5jZWxsZWQgPSBvbkVudGVyQ2FuY2VsbGVkXG4gIH0gPSBiYXNlUHJvcHM7XG4gIGNvbnN0IGZpbmlzaEVudGVyID0gKGVsLCBpc0FwcGVhciwgZG9uZSkgPT4ge1xuICAgIHJlbW92ZVRyYW5zaXRpb25DbGFzcyhlbCwgaXNBcHBlYXIgPyBhcHBlYXJUb0NsYXNzIDogZW50ZXJUb0NsYXNzKTtcbiAgICByZW1vdmVUcmFuc2l0aW9uQ2xhc3MoZWwsIGlzQXBwZWFyID8gYXBwZWFyQWN0aXZlQ2xhc3MgOiBlbnRlckFjdGl2ZUNsYXNzKTtcbiAgICBkb25lICYmIGRvbmUoKTtcbiAgfTtcbiAgY29uc3QgZmluaXNoTGVhdmUgPSAoZWwsIGRvbmUpID0+IHtcbiAgICBlbC5faXNMZWF2aW5nID0gZmFsc2U7XG4gICAgcmVtb3ZlVHJhbnNpdGlvbkNsYXNzKGVsLCBsZWF2ZUZyb21DbGFzcyk7XG4gICAgcmVtb3ZlVHJhbnNpdGlvbkNsYXNzKGVsLCBsZWF2ZVRvQ2xhc3MpO1xuICAgIHJlbW92ZVRyYW5zaXRpb25DbGFzcyhlbCwgbGVhdmVBY3RpdmVDbGFzcyk7XG4gICAgZG9uZSAmJiBkb25lKCk7XG4gIH07XG4gIGNvbnN0IG1ha2VFbnRlckhvb2sgPSAoaXNBcHBlYXIpID0+IHtcbiAgICByZXR1cm4gKGVsLCBkb25lKSA9PiB7XG4gICAgICBjb25zdCBob29rID0gaXNBcHBlYXIgPyBvbkFwcGVhciA6IG9uRW50ZXI7XG4gICAgICBjb25zdCByZXNvbHZlID0gKCkgPT4gZmluaXNoRW50ZXIoZWwsIGlzQXBwZWFyLCBkb25lKTtcbiAgICAgIGNhbGxIb29rKGhvb2ssIFtlbCwgcmVzb2x2ZV0pO1xuICAgICAgbmV4dEZyYW1lKCgpID0+IHtcbiAgICAgICAgcmVtb3ZlVHJhbnNpdGlvbkNsYXNzKGVsLCBpc0FwcGVhciA/IGFwcGVhckZyb21DbGFzcyA6IGVudGVyRnJvbUNsYXNzKTtcbiAgICAgICAgYWRkVHJhbnNpdGlvbkNsYXNzKGVsLCBpc0FwcGVhciA/IGFwcGVhclRvQ2xhc3MgOiBlbnRlclRvQ2xhc3MpO1xuICAgICAgICBpZiAoIWhhc0V4cGxpY2l0Q2FsbGJhY2soaG9vaykpIHtcbiAgICAgICAgICB3aGVuVHJhbnNpdGlvbkVuZHMoZWwsIHR5cGUsIGVudGVyRHVyYXRpb24sIHJlc29sdmUpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9O1xuICB9O1xuICByZXR1cm4gZXh0ZW5kKGJhc2VQcm9wcywge1xuICAgIG9uQmVmb3JlRW50ZXIoZWwpIHtcbiAgICAgIGNhbGxIb29rKG9uQmVmb3JlRW50ZXIsIFtlbF0pO1xuICAgICAgYWRkVHJhbnNpdGlvbkNsYXNzKGVsLCBlbnRlckZyb21DbGFzcyk7XG4gICAgICBhZGRUcmFuc2l0aW9uQ2xhc3MoZWwsIGVudGVyQWN0aXZlQ2xhc3MpO1xuICAgIH0sXG4gICAgb25CZWZvcmVBcHBlYXIoZWwpIHtcbiAgICAgIGNhbGxIb29rKG9uQmVmb3JlQXBwZWFyLCBbZWxdKTtcbiAgICAgIGFkZFRyYW5zaXRpb25DbGFzcyhlbCwgYXBwZWFyRnJvbUNsYXNzKTtcbiAgICAgIGFkZFRyYW5zaXRpb25DbGFzcyhlbCwgYXBwZWFyQWN0aXZlQ2xhc3MpO1xuICAgIH0sXG4gICAgb25FbnRlcjogbWFrZUVudGVySG9vayhmYWxzZSksXG4gICAgb25BcHBlYXI6IG1ha2VFbnRlckhvb2sodHJ1ZSksXG4gICAgb25MZWF2ZShlbCwgZG9uZSkge1xuICAgICAgZWwuX2lzTGVhdmluZyA9IHRydWU7XG4gICAgICBjb25zdCByZXNvbHZlID0gKCkgPT4gZmluaXNoTGVhdmUoZWwsIGRvbmUpO1xuICAgICAgYWRkVHJhbnNpdGlvbkNsYXNzKGVsLCBsZWF2ZUZyb21DbGFzcyk7XG4gICAgICBmb3JjZVJlZmxvdygpO1xuICAgICAgYWRkVHJhbnNpdGlvbkNsYXNzKGVsLCBsZWF2ZUFjdGl2ZUNsYXNzKTtcbiAgICAgIG5leHRGcmFtZSgoKSA9PiB7XG4gICAgICAgIGlmICghZWwuX2lzTGVhdmluZykge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICByZW1vdmVUcmFuc2l0aW9uQ2xhc3MoZWwsIGxlYXZlRnJvbUNsYXNzKTtcbiAgICAgICAgYWRkVHJhbnNpdGlvbkNsYXNzKGVsLCBsZWF2ZVRvQ2xhc3MpO1xuICAgICAgICBpZiAoIWhhc0V4cGxpY2l0Q2FsbGJhY2sob25MZWF2ZSkpIHtcbiAgICAgICAgICB3aGVuVHJhbnNpdGlvbkVuZHMoZWwsIHR5cGUsIGxlYXZlRHVyYXRpb24sIHJlc29sdmUpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIGNhbGxIb29rKG9uTGVhdmUsIFtlbCwgcmVzb2x2ZV0pO1xuICAgIH0sXG4gICAgb25FbnRlckNhbmNlbGxlZChlbCkge1xuICAgICAgZmluaXNoRW50ZXIoZWwsIGZhbHNlKTtcbiAgICAgIGNhbGxIb29rKG9uRW50ZXJDYW5jZWxsZWQsIFtlbF0pO1xuICAgIH0sXG4gICAgb25BcHBlYXJDYW5jZWxsZWQoZWwpIHtcbiAgICAgIGZpbmlzaEVudGVyKGVsLCB0cnVlKTtcbiAgICAgIGNhbGxIb29rKG9uQXBwZWFyQ2FuY2VsbGVkLCBbZWxdKTtcbiAgICB9LFxuICAgIG9uTGVhdmVDYW5jZWxsZWQoZWwpIHtcbiAgICAgIGZpbmlzaExlYXZlKGVsKTtcbiAgICAgIGNhbGxIb29rKG9uTGVhdmVDYW5jZWxsZWQsIFtlbF0pO1xuICAgIH1cbiAgfSk7XG59XG5mdW5jdGlvbiBub3JtYWxpemVEdXJhdGlvbihkdXJhdGlvbikge1xuICBpZiAoZHVyYXRpb24gPT0gbnVsbCkge1xuICAgIHJldHVybiBudWxsO1xuICB9IGVsc2UgaWYgKGlzT2JqZWN0KGR1cmF0aW9uKSkge1xuICAgIHJldHVybiBbTnVtYmVyT2YoZHVyYXRpb24uZW50ZXIpLCBOdW1iZXJPZihkdXJhdGlvbi5sZWF2ZSldO1xuICB9IGVsc2Uge1xuICAgIGNvbnN0IG4gPSBOdW1iZXJPZihkdXJhdGlvbik7XG4gICAgcmV0dXJuIFtuLCBuXTtcbiAgfVxufVxuZnVuY3Rpb24gTnVtYmVyT2YodmFsKSB7XG4gIGNvbnN0IHJlcyA9IHRvTnVtYmVyKHZhbCk7XG4gIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpKSB7XG4gICAgYXNzZXJ0TnVtYmVyKHJlcywgXCI8dHJhbnNpdGlvbj4gZXhwbGljaXQgZHVyYXRpb25cIik7XG4gIH1cbiAgcmV0dXJuIHJlcztcbn1cbmZ1bmN0aW9uIGFkZFRyYW5zaXRpb25DbGFzcyhlbCwgY2xzKSB7XG4gIGNscy5zcGxpdCgvXFxzKy8pLmZvckVhY2goKGMpID0+IGMgJiYgZWwuY2xhc3NMaXN0LmFkZChjKSk7XG4gIChlbFt2dGNLZXldIHx8IChlbFt2dGNLZXldID0gLyogQF9fUFVSRV9fICovIG5ldyBTZXQoKSkpLmFkZChjbHMpO1xufVxuZnVuY3Rpb24gcmVtb3ZlVHJhbnNpdGlvbkNsYXNzKGVsLCBjbHMpIHtcbiAgY2xzLnNwbGl0KC9cXHMrLykuZm9yRWFjaCgoYykgPT4gYyAmJiBlbC5jbGFzc0xpc3QucmVtb3ZlKGMpKTtcbiAgY29uc3QgX3Z0YyA9IGVsW3Z0Y0tleV07XG4gIGlmIChfdnRjKSB7XG4gICAgX3Z0Yy5kZWxldGUoY2xzKTtcbiAgICBpZiAoIV92dGMuc2l6ZSkge1xuICAgICAgZWxbdnRjS2V5XSA9IHZvaWQgMDtcbiAgICB9XG4gIH1cbn1cbmZ1bmN0aW9uIG5leHRGcmFtZShjYikge1xuICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4ge1xuICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZShjYik7XG4gIH0pO1xufVxubGV0IGVuZElkID0gMDtcbmZ1bmN0aW9uIHdoZW5UcmFuc2l0aW9uRW5kcyhlbCwgZXhwZWN0ZWRUeXBlLCBleHBsaWNpdFRpbWVvdXQsIHJlc29sdmUpIHtcbiAgY29uc3QgaWQgPSBlbC5fZW5kSWQgPSArK2VuZElkO1xuICBjb25zdCByZXNvbHZlSWZOb3RTdGFsZSA9ICgpID0+IHtcbiAgICBpZiAoaWQgPT09IGVsLl9lbmRJZCkge1xuICAgICAgcmVzb2x2ZSgpO1xuICAgIH1cbiAgfTtcbiAgaWYgKGV4cGxpY2l0VGltZW91dCkge1xuICAgIHJldHVybiBzZXRUaW1lb3V0KHJlc29sdmVJZk5vdFN0YWxlLCBleHBsaWNpdFRpbWVvdXQpO1xuICB9XG4gIGNvbnN0IHsgdHlwZSwgdGltZW91dCwgcHJvcENvdW50IH0gPSBnZXRUcmFuc2l0aW9uSW5mbyhlbCwgZXhwZWN0ZWRUeXBlKTtcbiAgaWYgKCF0eXBlKSB7XG4gICAgcmV0dXJuIHJlc29sdmUoKTtcbiAgfVxuICBjb25zdCBlbmRFdmVudCA9IHR5cGUgKyBcImVuZFwiO1xuICBsZXQgZW5kZWQgPSAwO1xuICBjb25zdCBlbmQgPSAoKSA9PiB7XG4gICAgZWwucmVtb3ZlRXZlbnRMaXN0ZW5lcihlbmRFdmVudCwgb25FbmQpO1xuICAgIHJlc29sdmVJZk5vdFN0YWxlKCk7XG4gIH07XG4gIGNvbnN0IG9uRW5kID0gKGUpID0+IHtcbiAgICBpZiAoZS50YXJnZXQgPT09IGVsICYmICsrZW5kZWQgPj0gcHJvcENvdW50KSB7XG4gICAgICBlbmQoKTtcbiAgICB9XG4gIH07XG4gIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgIGlmIChlbmRlZCA8IHByb3BDb3VudCkge1xuICAgICAgZW5kKCk7XG4gICAgfVxuICB9LCB0aW1lb3V0ICsgMSk7XG4gIGVsLmFkZEV2ZW50TGlzdGVuZXIoZW5kRXZlbnQsIG9uRW5kKTtcbn1cbmZ1bmN0aW9uIGdldFRyYW5zaXRpb25JbmZvKGVsLCBleHBlY3RlZFR5cGUpIHtcbiAgY29uc3Qgc3R5bGVzID0gd2luZG93LmdldENvbXB1dGVkU3R5bGUoZWwpO1xuICBjb25zdCBnZXRTdHlsZVByb3BlcnRpZXMgPSAoa2V5KSA9PiAoc3R5bGVzW2tleV0gfHwgXCJcIikuc3BsaXQoXCIsIFwiKTtcbiAgY29uc3QgdHJhbnNpdGlvbkRlbGF5cyA9IGdldFN0eWxlUHJvcGVydGllcyhgJHtUUkFOU0lUSU9OfURlbGF5YCk7XG4gIGNvbnN0IHRyYW5zaXRpb25EdXJhdGlvbnMgPSBnZXRTdHlsZVByb3BlcnRpZXMoYCR7VFJBTlNJVElPTn1EdXJhdGlvbmApO1xuICBjb25zdCB0cmFuc2l0aW9uVGltZW91dCA9IGdldFRpbWVvdXQodHJhbnNpdGlvbkRlbGF5cywgdHJhbnNpdGlvbkR1cmF0aW9ucyk7XG4gIGNvbnN0IGFuaW1hdGlvbkRlbGF5cyA9IGdldFN0eWxlUHJvcGVydGllcyhgJHtBTklNQVRJT059RGVsYXlgKTtcbiAgY29uc3QgYW5pbWF0aW9uRHVyYXRpb25zID0gZ2V0U3R5bGVQcm9wZXJ0aWVzKGAke0FOSU1BVElPTn1EdXJhdGlvbmApO1xuICBjb25zdCBhbmltYXRpb25UaW1lb3V0ID0gZ2V0VGltZW91dChhbmltYXRpb25EZWxheXMsIGFuaW1hdGlvbkR1cmF0aW9ucyk7XG4gIGxldCB0eXBlID0gbnVsbDtcbiAgbGV0IHRpbWVvdXQgPSAwO1xuICBsZXQgcHJvcENvdW50ID0gMDtcbiAgaWYgKGV4cGVjdGVkVHlwZSA9PT0gVFJBTlNJVElPTikge1xuICAgIGlmICh0cmFuc2l0aW9uVGltZW91dCA+IDApIHtcbiAgICAgIHR5cGUgPSBUUkFOU0lUSU9OO1xuICAgICAgdGltZW91dCA9IHRyYW5zaXRpb25UaW1lb3V0O1xuICAgICAgcHJvcENvdW50ID0gdHJhbnNpdGlvbkR1cmF0aW9ucy5sZW5ndGg7XG4gICAgfVxuICB9IGVsc2UgaWYgKGV4cGVjdGVkVHlwZSA9PT0gQU5JTUFUSU9OKSB7XG4gICAgaWYgKGFuaW1hdGlvblRpbWVvdXQgPiAwKSB7XG4gICAgICB0eXBlID0gQU5JTUFUSU9OO1xuICAgICAgdGltZW91dCA9IGFuaW1hdGlvblRpbWVvdXQ7XG4gICAgICBwcm9wQ291bnQgPSBhbmltYXRpb25EdXJhdGlvbnMubGVuZ3RoO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICB0aW1lb3V0ID0gTWF0aC5tYXgodHJhbnNpdGlvblRpbWVvdXQsIGFuaW1hdGlvblRpbWVvdXQpO1xuICAgIHR5cGUgPSB0aW1lb3V0ID4gMCA/IHRyYW5zaXRpb25UaW1lb3V0ID4gYW5pbWF0aW9uVGltZW91dCA/IFRSQU5TSVRJT04gOiBBTklNQVRJT04gOiBudWxsO1xuICAgIHByb3BDb3VudCA9IHR5cGUgPyB0eXBlID09PSBUUkFOU0lUSU9OID8gdHJhbnNpdGlvbkR1cmF0aW9ucy5sZW5ndGggOiBhbmltYXRpb25EdXJhdGlvbnMubGVuZ3RoIDogMDtcbiAgfVxuICBjb25zdCBoYXNUcmFuc2Zvcm0gPSB0eXBlID09PSBUUkFOU0lUSU9OICYmIC9cXGIodHJhbnNmb3JtfGFsbCkoLHwkKS8udGVzdChcbiAgICBnZXRTdHlsZVByb3BlcnRpZXMoYCR7VFJBTlNJVElPTn1Qcm9wZXJ0eWApLnRvU3RyaW5nKClcbiAgKTtcbiAgcmV0dXJuIHtcbiAgICB0eXBlLFxuICAgIHRpbWVvdXQsXG4gICAgcHJvcENvdW50LFxuICAgIGhhc1RyYW5zZm9ybVxuICB9O1xufVxuZnVuY3Rpb24gZ2V0VGltZW91dChkZWxheXMsIGR1cmF0aW9ucykge1xuICB3aGlsZSAoZGVsYXlzLmxlbmd0aCA8IGR1cmF0aW9ucy5sZW5ndGgpIHtcbiAgICBkZWxheXMgPSBkZWxheXMuY29uY2F0KGRlbGF5cyk7XG4gIH1cbiAgcmV0dXJuIE1hdGgubWF4KC4uLmR1cmF0aW9ucy5tYXAoKGQsIGkpID0+IHRvTXMoZCkgKyB0b01zKGRlbGF5c1tpXSkpKTtcbn1cbmZ1bmN0aW9uIHRvTXMocykge1xuICBpZiAocyA9PT0gXCJhdXRvXCIpXG4gICAgcmV0dXJuIDA7XG4gIHJldHVybiBOdW1iZXIocy5zbGljZSgwLCAtMSkucmVwbGFjZShcIixcIiwgXCIuXCIpKSAqIDFlMztcbn1cbmZ1bmN0aW9uIGZvcmNlUmVmbG93KCkge1xuICByZXR1cm4gZG9jdW1lbnQuYm9keS5vZmZzZXRIZWlnaHQ7XG59XG5cbmZ1bmN0aW9uIHBhdGNoQ2xhc3MoZWwsIHZhbHVlLCBpc1NWRykge1xuICBjb25zdCB0cmFuc2l0aW9uQ2xhc3NlcyA9IGVsW3Z0Y0tleV07XG4gIGlmICh0cmFuc2l0aW9uQ2xhc3Nlcykge1xuICAgIHZhbHVlID0gKHZhbHVlID8gW3ZhbHVlLCAuLi50cmFuc2l0aW9uQ2xhc3Nlc10gOiBbLi4udHJhbnNpdGlvbkNsYXNzZXNdKS5qb2luKFwiIFwiKTtcbiAgfVxuICBpZiAodmFsdWUgPT0gbnVsbCkge1xuICAgIGVsLnJlbW92ZUF0dHJpYnV0ZShcImNsYXNzXCIpO1xuICB9IGVsc2UgaWYgKGlzU1ZHKSB7XG4gICAgZWwuc2V0QXR0cmlidXRlKFwiY2xhc3NcIiwgdmFsdWUpO1xuICB9IGVsc2Uge1xuICAgIGVsLmNsYXNzTmFtZSA9IHZhbHVlO1xuICB9XG59XG5cbmNvbnN0IHZTaG93T3JpZ2luYWxEaXNwbGF5ID0gU3ltYm9sKFwiX3ZvZFwiKTtcbmNvbnN0IHZTaG93SGlkZGVuID0gU3ltYm9sKFwiX3ZzaFwiKTtcbmNvbnN0IHZTaG93ID0ge1xuICBiZWZvcmVNb3VudChlbCwgeyB2YWx1ZSB9LCB7IHRyYW5zaXRpb24gfSkge1xuICAgIGVsW3ZTaG93T3JpZ2luYWxEaXNwbGF5XSA9IGVsLnN0eWxlLmRpc3BsYXkgPT09IFwibm9uZVwiID8gXCJcIiA6IGVsLnN0eWxlLmRpc3BsYXk7XG4gICAgaWYgKHRyYW5zaXRpb24gJiYgdmFsdWUpIHtcbiAgICAgIHRyYW5zaXRpb24uYmVmb3JlRW50ZXIoZWwpO1xuICAgIH0gZWxzZSB7XG4gICAgICBzZXREaXNwbGF5KGVsLCB2YWx1ZSk7XG4gICAgfVxuICB9LFxuICBtb3VudGVkKGVsLCB7IHZhbHVlIH0sIHsgdHJhbnNpdGlvbiB9KSB7XG4gICAgaWYgKHRyYW5zaXRpb24gJiYgdmFsdWUpIHtcbiAgICAgIHRyYW5zaXRpb24uZW50ZXIoZWwpO1xuICAgIH1cbiAgfSxcbiAgdXBkYXRlZChlbCwgeyB2YWx1ZSwgb2xkVmFsdWUgfSwgeyB0cmFuc2l0aW9uIH0pIHtcbiAgICBpZiAoIXZhbHVlID09PSAhb2xkVmFsdWUpXG4gICAgICByZXR1cm47XG4gICAgaWYgKHRyYW5zaXRpb24pIHtcbiAgICAgIGlmICh2YWx1ZSkge1xuICAgICAgICB0cmFuc2l0aW9uLmJlZm9yZUVudGVyKGVsKTtcbiAgICAgICAgc2V0RGlzcGxheShlbCwgdHJ1ZSk7XG4gICAgICAgIHRyYW5zaXRpb24uZW50ZXIoZWwpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdHJhbnNpdGlvbi5sZWF2ZShlbCwgKCkgPT4ge1xuICAgICAgICAgIHNldERpc3BsYXkoZWwsIGZhbHNlKTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHNldERpc3BsYXkoZWwsIHZhbHVlKTtcbiAgICB9XG4gIH0sXG4gIGJlZm9yZVVubW91bnQoZWwsIHsgdmFsdWUgfSkge1xuICAgIHNldERpc3BsYXkoZWwsIHZhbHVlKTtcbiAgfVxufTtcbmlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpKSB7XG4gIHZTaG93Lm5hbWUgPSBcInNob3dcIjtcbn1cbmZ1bmN0aW9uIHNldERpc3BsYXkoZWwsIHZhbHVlKSB7XG4gIGVsLnN0eWxlLmRpc3BsYXkgPSB2YWx1ZSA/IGVsW3ZTaG93T3JpZ2luYWxEaXNwbGF5XSA6IFwibm9uZVwiO1xuICBlbFt2U2hvd0hpZGRlbl0gPSAhdmFsdWU7XG59XG5mdW5jdGlvbiBpbml0VlNob3dGb3JTU1IoKSB7XG4gIHZTaG93LmdldFNTUlByb3BzID0gKHsgdmFsdWUgfSkgPT4ge1xuICAgIGlmICghdmFsdWUpIHtcbiAgICAgIHJldHVybiB7IHN0eWxlOiB7IGRpc3BsYXk6IFwibm9uZVwiIH0gfTtcbiAgICB9XG4gIH07XG59XG5cbmNvbnN0IENTU19WQVJfVEVYVCA9IFN5bWJvbCghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpID8gXCJDU1NfVkFSX1RFWFRcIiA6IFwiXCIpO1xuZnVuY3Rpb24gdXNlQ3NzVmFycyhnZXR0ZXIpIHtcbiAgY29uc3QgaW5zdGFuY2UgPSBnZXRDdXJyZW50SW5zdGFuY2UoKTtcbiAgaWYgKCFpbnN0YW5jZSkge1xuICAgICEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgJiYgd2FybihgdXNlQ3NzVmFycyBpcyBjYWxsZWQgd2l0aG91dCBjdXJyZW50IGFjdGl2ZSBjb21wb25lbnQgaW5zdGFuY2UuYCk7XG4gICAgcmV0dXJuO1xuICB9XG4gIGNvbnN0IHVwZGF0ZVRlbGVwb3J0cyA9IGluc3RhbmNlLnV0ID0gKHZhcnMgPSBnZXR0ZXIoaW5zdGFuY2UucHJveHkpKSA9PiB7XG4gICAgQXJyYXkuZnJvbShcbiAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoYFtkYXRhLXYtb3duZXI9XCIke2luc3RhbmNlLnVpZH1cIl1gKVxuICAgICkuZm9yRWFjaCgobm9kZSkgPT4gc2V0VmFyc09uTm9kZShub2RlLCB2YXJzKSk7XG4gIH07XG4gIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpKSB7XG4gICAgaW5zdGFuY2UuZ2V0Q3NzVmFycyA9ICgpID0+IGdldHRlcihpbnN0YW5jZS5wcm94eSk7XG4gIH1cbiAgY29uc3Qgc2V0VmFycyA9ICgpID0+IHtcbiAgICBjb25zdCB2YXJzID0gZ2V0dGVyKGluc3RhbmNlLnByb3h5KTtcbiAgICBzZXRWYXJzT25WTm9kZShpbnN0YW5jZS5zdWJUcmVlLCB2YXJzKTtcbiAgICB1cGRhdGVUZWxlcG9ydHModmFycyk7XG4gIH07XG4gIHdhdGNoUG9zdEVmZmVjdChzZXRWYXJzKTtcbiAgb25Nb3VudGVkKCgpID0+IHtcbiAgICBjb25zdCBvYiA9IG5ldyBNdXRhdGlvbk9ic2VydmVyKHNldFZhcnMpO1xuICAgIG9iLm9ic2VydmUoaW5zdGFuY2Uuc3ViVHJlZS5lbC5wYXJlbnROb2RlLCB7IGNoaWxkTGlzdDogdHJ1ZSB9KTtcbiAgICBvblVubW91bnRlZCgoKSA9PiBvYi5kaXNjb25uZWN0KCkpO1xuICB9KTtcbn1cbmZ1bmN0aW9uIHNldFZhcnNPblZOb2RlKHZub2RlLCB2YXJzKSB7XG4gIGlmICh2bm9kZS5zaGFwZUZsYWcgJiAxMjgpIHtcbiAgICBjb25zdCBzdXNwZW5zZSA9IHZub2RlLnN1c3BlbnNlO1xuICAgIHZub2RlID0gc3VzcGVuc2UuYWN0aXZlQnJhbmNoO1xuICAgIGlmIChzdXNwZW5zZS5wZW5kaW5nQnJhbmNoICYmICFzdXNwZW5zZS5pc0h5ZHJhdGluZykge1xuICAgICAgc3VzcGVuc2UuZWZmZWN0cy5wdXNoKCgpID0+IHtcbiAgICAgICAgc2V0VmFyc09uVk5vZGUoc3VzcGVuc2UuYWN0aXZlQnJhbmNoLCB2YXJzKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuICB3aGlsZSAodm5vZGUuY29tcG9uZW50KSB7XG4gICAgdm5vZGUgPSB2bm9kZS5jb21wb25lbnQuc3ViVHJlZTtcbiAgfVxuICBpZiAodm5vZGUuc2hhcGVGbGFnICYgMSAmJiB2bm9kZS5lbCkge1xuICAgIHNldFZhcnNPbk5vZGUodm5vZGUuZWwsIHZhcnMpO1xuICB9IGVsc2UgaWYgKHZub2RlLnR5cGUgPT09IEZyYWdtZW50KSB7XG4gICAgdm5vZGUuY2hpbGRyZW4uZm9yRWFjaCgoYykgPT4gc2V0VmFyc09uVk5vZGUoYywgdmFycykpO1xuICB9IGVsc2UgaWYgKHZub2RlLnR5cGUgPT09IFN0YXRpYykge1xuICAgIGxldCB7IGVsLCBhbmNob3IgfSA9IHZub2RlO1xuICAgIHdoaWxlIChlbCkge1xuICAgICAgc2V0VmFyc09uTm9kZShlbCwgdmFycyk7XG4gICAgICBpZiAoZWwgPT09IGFuY2hvcilcbiAgICAgICAgYnJlYWs7XG4gICAgICBlbCA9IGVsLm5leHRTaWJsaW5nO1xuICAgIH1cbiAgfVxufVxuZnVuY3Rpb24gc2V0VmFyc09uTm9kZShlbCwgdmFycykge1xuICBpZiAoZWwubm9kZVR5cGUgPT09IDEpIHtcbiAgICBjb25zdCBzdHlsZSA9IGVsLnN0eWxlO1xuICAgIGxldCBjc3NUZXh0ID0gXCJcIjtcbiAgICBmb3IgKGNvbnN0IGtleSBpbiB2YXJzKSB7XG4gICAgICBzdHlsZS5zZXRQcm9wZXJ0eShgLS0ke2tleX1gLCB2YXJzW2tleV0pO1xuICAgICAgY3NzVGV4dCArPSBgLS0ke2tleX06ICR7dmFyc1trZXldfTtgO1xuICAgIH1cbiAgICBzdHlsZVtDU1NfVkFSX1RFWFRdID0gY3NzVGV4dDtcbiAgfVxufVxuXG5jb25zdCBkaXNwbGF5UkUgPSAvKF58OylcXHMqZGlzcGxheVxccyo6LztcbmZ1bmN0aW9uIHBhdGNoU3R5bGUoZWwsIHByZXYsIG5leHQpIHtcbiAgY29uc3Qgc3R5bGUgPSBlbC5zdHlsZTtcbiAgY29uc3QgaXNDc3NTdHJpbmcgPSBpc1N0cmluZyhuZXh0KTtcbiAgbGV0IGhhc0NvbnRyb2xsZWREaXNwbGF5ID0gZmFsc2U7XG4gIGlmIChuZXh0ICYmICFpc0Nzc1N0cmluZykge1xuICAgIGlmIChwcmV2KSB7XG4gICAgICBpZiAoIWlzU3RyaW5nKHByZXYpKSB7XG4gICAgICAgIGZvciAoY29uc3Qga2V5IGluIHByZXYpIHtcbiAgICAgICAgICBpZiAobmV4dFtrZXldID09IG51bGwpIHtcbiAgICAgICAgICAgIHNldFN0eWxlKHN0eWxlLCBrZXksIFwiXCIpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZm9yIChjb25zdCBwcmV2U3R5bGUgb2YgcHJldi5zcGxpdChcIjtcIikpIHtcbiAgICAgICAgICBjb25zdCBrZXkgPSBwcmV2U3R5bGUuc2xpY2UoMCwgcHJldlN0eWxlLmluZGV4T2YoXCI6XCIpKS50cmltKCk7XG4gICAgICAgICAgaWYgKG5leHRba2V5XSA9PSBudWxsKSB7XG4gICAgICAgICAgICBzZXRTdHlsZShzdHlsZSwga2V5LCBcIlwiKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgZm9yIChjb25zdCBrZXkgaW4gbmV4dCkge1xuICAgICAgaWYgKGtleSA9PT0gXCJkaXNwbGF5XCIpIHtcbiAgICAgICAgaGFzQ29udHJvbGxlZERpc3BsYXkgPSB0cnVlO1xuICAgICAgfVxuICAgICAgc2V0U3R5bGUoc3R5bGUsIGtleSwgbmV4dFtrZXldKTtcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgaWYgKGlzQ3NzU3RyaW5nKSB7XG4gICAgICBpZiAocHJldiAhPT0gbmV4dCkge1xuICAgICAgICBjb25zdCBjc3NWYXJUZXh0ID0gc3R5bGVbQ1NTX1ZBUl9URVhUXTtcbiAgICAgICAgaWYgKGNzc1ZhclRleHQpIHtcbiAgICAgICAgICBuZXh0ICs9IFwiO1wiICsgY3NzVmFyVGV4dDtcbiAgICAgICAgfVxuICAgICAgICBzdHlsZS5jc3NUZXh0ID0gbmV4dDtcbiAgICAgICAgaGFzQ29udHJvbGxlZERpc3BsYXkgPSBkaXNwbGF5UkUudGVzdChuZXh0KTtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKHByZXYpIHtcbiAgICAgIGVsLnJlbW92ZUF0dHJpYnV0ZShcInN0eWxlXCIpO1xuICAgIH1cbiAgfVxuICBpZiAodlNob3dPcmlnaW5hbERpc3BsYXkgaW4gZWwpIHtcbiAgICBlbFt2U2hvd09yaWdpbmFsRGlzcGxheV0gPSBoYXNDb250cm9sbGVkRGlzcGxheSA/IHN0eWxlLmRpc3BsYXkgOiBcIlwiO1xuICAgIGlmIChlbFt2U2hvd0hpZGRlbl0pIHtcbiAgICAgIHN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgICB9XG4gIH1cbn1cbmNvbnN0IHNlbWljb2xvblJFID0gL1teXFxcXF07XFxzKiQvO1xuY29uc3QgaW1wb3J0YW50UkUgPSAvXFxzKiFpbXBvcnRhbnQkLztcbmZ1bmN0aW9uIHNldFN0eWxlKHN0eWxlLCBuYW1lLCB2YWwpIHtcbiAgaWYgKGlzQXJyYXkodmFsKSkge1xuICAgIHZhbC5mb3JFYWNoKCh2KSA9PiBzZXRTdHlsZShzdHlsZSwgbmFtZSwgdikpO1xuICB9IGVsc2Uge1xuICAgIGlmICh2YWwgPT0gbnVsbClcbiAgICAgIHZhbCA9IFwiXCI7XG4gICAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikpIHtcbiAgICAgIGlmIChzZW1pY29sb25SRS50ZXN0KHZhbCkpIHtcbiAgICAgICAgd2FybihcbiAgICAgICAgICBgVW5leHBlY3RlZCBzZW1pY29sb24gYXQgdGhlIGVuZCBvZiAnJHtuYW1lfScgc3R5bGUgdmFsdWU6ICcke3ZhbH0nYFxuICAgICAgICApO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAobmFtZS5zdGFydHNXaXRoKFwiLS1cIikpIHtcbiAgICAgIHN0eWxlLnNldFByb3BlcnR5KG5hbWUsIHZhbCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IHByZWZpeGVkID0gYXV0b1ByZWZpeChzdHlsZSwgbmFtZSk7XG4gICAgICBpZiAoaW1wb3J0YW50UkUudGVzdCh2YWwpKSB7XG4gICAgICAgIHN0eWxlLnNldFByb3BlcnR5KFxuICAgICAgICAgIGh5cGhlbmF0ZShwcmVmaXhlZCksXG4gICAgICAgICAgdmFsLnJlcGxhY2UoaW1wb3J0YW50UkUsIFwiXCIpLFxuICAgICAgICAgIFwiaW1wb3J0YW50XCJcbiAgICAgICAgKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHN0eWxlW3ByZWZpeGVkXSA9IHZhbDtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cbmNvbnN0IHByZWZpeGVzID0gW1wiV2Via2l0XCIsIFwiTW96XCIsIFwibXNcIl07XG5jb25zdCBwcmVmaXhDYWNoZSA9IHt9O1xuZnVuY3Rpb24gYXV0b1ByZWZpeChzdHlsZSwgcmF3TmFtZSkge1xuICBjb25zdCBjYWNoZWQgPSBwcmVmaXhDYWNoZVtyYXdOYW1lXTtcbiAgaWYgKGNhY2hlZCkge1xuICAgIHJldHVybiBjYWNoZWQ7XG4gIH1cbiAgbGV0IG5hbWUgPSBjYW1lbGl6ZShyYXdOYW1lKTtcbiAgaWYgKG5hbWUgIT09IFwiZmlsdGVyXCIgJiYgbmFtZSBpbiBzdHlsZSkge1xuICAgIHJldHVybiBwcmVmaXhDYWNoZVtyYXdOYW1lXSA9IG5hbWU7XG4gIH1cbiAgbmFtZSA9IGNhcGl0YWxpemUobmFtZSk7XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgcHJlZml4ZXMubGVuZ3RoOyBpKyspIHtcbiAgICBjb25zdCBwcmVmaXhlZCA9IHByZWZpeGVzW2ldICsgbmFtZTtcbiAgICBpZiAocHJlZml4ZWQgaW4gc3R5bGUpIHtcbiAgICAgIHJldHVybiBwcmVmaXhDYWNoZVtyYXdOYW1lXSA9IHByZWZpeGVkO1xuICAgIH1cbiAgfVxuICByZXR1cm4gcmF3TmFtZTtcbn1cblxuY29uc3QgeGxpbmtOUyA9IFwiaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGlua1wiO1xuZnVuY3Rpb24gcGF0Y2hBdHRyKGVsLCBrZXksIHZhbHVlLCBpc1NWRywgaW5zdGFuY2UpIHtcbiAgaWYgKGlzU1ZHICYmIGtleS5zdGFydHNXaXRoKFwieGxpbms6XCIpKSB7XG4gICAgaWYgKHZhbHVlID09IG51bGwpIHtcbiAgICAgIGVsLnJlbW92ZUF0dHJpYnV0ZU5TKHhsaW5rTlMsIGtleS5zbGljZSg2LCBrZXkubGVuZ3RoKSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGVsLnNldEF0dHJpYnV0ZU5TKHhsaW5rTlMsIGtleSwgdmFsdWUpO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICBjb25zdCBpc0Jvb2xlYW4gPSBpc1NwZWNpYWxCb29sZWFuQXR0cihrZXkpO1xuICAgIGlmICh2YWx1ZSA9PSBudWxsIHx8IGlzQm9vbGVhbiAmJiAhaW5jbHVkZUJvb2xlYW5BdHRyKHZhbHVlKSkge1xuICAgICAgZWwucmVtb3ZlQXR0cmlidXRlKGtleSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGVsLnNldEF0dHJpYnV0ZShrZXksIGlzQm9vbGVhbiA/IFwiXCIgOiB2YWx1ZSk7XG4gICAgfVxuICB9XG59XG5cbmZ1bmN0aW9uIHBhdGNoRE9NUHJvcChlbCwga2V5LCB2YWx1ZSwgcHJldkNoaWxkcmVuLCBwYXJlbnRDb21wb25lbnQsIHBhcmVudFN1c3BlbnNlLCB1bm1vdW50Q2hpbGRyZW4pIHtcbiAgaWYgKGtleSA9PT0gXCJpbm5lckhUTUxcIiB8fCBrZXkgPT09IFwidGV4dENvbnRlbnRcIikge1xuICAgIGlmIChwcmV2Q2hpbGRyZW4pIHtcbiAgICAgIHVubW91bnRDaGlsZHJlbihwcmV2Q2hpbGRyZW4sIHBhcmVudENvbXBvbmVudCwgcGFyZW50U3VzcGVuc2UpO1xuICAgIH1cbiAgICBlbFtrZXldID0gdmFsdWUgPT0gbnVsbCA/IFwiXCIgOiB2YWx1ZTtcbiAgICByZXR1cm47XG4gIH1cbiAgY29uc3QgdGFnID0gZWwudGFnTmFtZTtcbiAgaWYgKGtleSA9PT0gXCJ2YWx1ZVwiICYmIHRhZyAhPT0gXCJQUk9HUkVTU1wiICYmIC8vIGN1c3RvbSBlbGVtZW50cyBtYXkgdXNlIF92YWx1ZSBpbnRlcm5hbGx5XG4gICF0YWcuaW5jbHVkZXMoXCItXCIpKSB7XG4gICAgY29uc3Qgb2xkVmFsdWUgPSB0YWcgPT09IFwiT1BUSU9OXCIgPyBlbC5nZXRBdHRyaWJ1dGUoXCJ2YWx1ZVwiKSB8fCBcIlwiIDogZWwudmFsdWU7XG4gICAgY29uc3QgbmV3VmFsdWUgPSB2YWx1ZSA9PSBudWxsID8gXCJcIiA6IHZhbHVlO1xuICAgIGlmIChvbGRWYWx1ZSAhPT0gbmV3VmFsdWUgfHwgIShcIl92YWx1ZVwiIGluIGVsKSkge1xuICAgICAgZWwudmFsdWUgPSBuZXdWYWx1ZTtcbiAgICB9XG4gICAgaWYgKHZhbHVlID09IG51bGwpIHtcbiAgICAgIGVsLnJlbW92ZUF0dHJpYnV0ZShrZXkpO1xuICAgIH1cbiAgICBlbC5fdmFsdWUgPSB2YWx1ZTtcbiAgICByZXR1cm47XG4gIH1cbiAgbGV0IG5lZWRSZW1vdmUgPSBmYWxzZTtcbiAgaWYgKHZhbHVlID09PSBcIlwiIHx8IHZhbHVlID09IG51bGwpIHtcbiAgICBjb25zdCB0eXBlID0gdHlwZW9mIGVsW2tleV07XG4gICAgaWYgKHR5cGUgPT09IFwiYm9vbGVhblwiKSB7XG4gICAgICB2YWx1ZSA9IGluY2x1ZGVCb29sZWFuQXR0cih2YWx1ZSk7XG4gICAgfSBlbHNlIGlmICh2YWx1ZSA9PSBudWxsICYmIHR5cGUgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgIHZhbHVlID0gXCJcIjtcbiAgICAgIG5lZWRSZW1vdmUgPSB0cnVlO1xuICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gXCJudW1iZXJcIikge1xuICAgICAgdmFsdWUgPSAwO1xuICAgICAgbmVlZFJlbW92ZSA9IHRydWU7XG4gICAgfVxuICB9XG4gIHRyeSB7XG4gICAgZWxba2V5XSA9IHZhbHVlO1xuICB9IGNhdGNoIChlKSB7XG4gICAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgJiYgIW5lZWRSZW1vdmUpIHtcbiAgICAgIHdhcm4oXG4gICAgICAgIGBGYWlsZWQgc2V0dGluZyBwcm9wIFwiJHtrZXl9XCIgb24gPCR7dGFnLnRvTG93ZXJDYXNlKCl9PjogdmFsdWUgJHt2YWx1ZX0gaXMgaW52YWxpZC5gLFxuICAgICAgICBlXG4gICAgICApO1xuICAgIH1cbiAgfVxuICBuZWVkUmVtb3ZlICYmIGVsLnJlbW92ZUF0dHJpYnV0ZShrZXkpO1xufVxuXG5mdW5jdGlvbiBhZGRFdmVudExpc3RlbmVyKGVsLCBldmVudCwgaGFuZGxlciwgb3B0aW9ucykge1xuICBlbC5hZGRFdmVudExpc3RlbmVyKGV2ZW50LCBoYW5kbGVyLCBvcHRpb25zKTtcbn1cbmZ1bmN0aW9uIHJlbW92ZUV2ZW50TGlzdGVuZXIoZWwsIGV2ZW50LCBoYW5kbGVyLCBvcHRpb25zKSB7XG4gIGVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoZXZlbnQsIGhhbmRsZXIsIG9wdGlvbnMpO1xufVxuY29uc3QgdmVpS2V5ID0gU3ltYm9sKFwiX3ZlaVwiKTtcbmZ1bmN0aW9uIHBhdGNoRXZlbnQoZWwsIHJhd05hbWUsIHByZXZWYWx1ZSwgbmV4dFZhbHVlLCBpbnN0YW5jZSA9IG51bGwpIHtcbiAgY29uc3QgaW52b2tlcnMgPSBlbFt2ZWlLZXldIHx8IChlbFt2ZWlLZXldID0ge30pO1xuICBjb25zdCBleGlzdGluZ0ludm9rZXIgPSBpbnZva2Vyc1tyYXdOYW1lXTtcbiAgaWYgKG5leHRWYWx1ZSAmJiBleGlzdGluZ0ludm9rZXIpIHtcbiAgICBleGlzdGluZ0ludm9rZXIudmFsdWUgPSBuZXh0VmFsdWU7XG4gIH0gZWxzZSB7XG4gICAgY29uc3QgW25hbWUsIG9wdGlvbnNdID0gcGFyc2VOYW1lKHJhd05hbWUpO1xuICAgIGlmIChuZXh0VmFsdWUpIHtcbiAgICAgIGNvbnN0IGludm9rZXIgPSBpbnZva2Vyc1tyYXdOYW1lXSA9IGNyZWF0ZUludm9rZXIobmV4dFZhbHVlLCBpbnN0YW5jZSk7XG4gICAgICBhZGRFdmVudExpc3RlbmVyKGVsLCBuYW1lLCBpbnZva2VyLCBvcHRpb25zKTtcbiAgICB9IGVsc2UgaWYgKGV4aXN0aW5nSW52b2tlcikge1xuICAgICAgcmVtb3ZlRXZlbnRMaXN0ZW5lcihlbCwgbmFtZSwgZXhpc3RpbmdJbnZva2VyLCBvcHRpb25zKTtcbiAgICAgIGludm9rZXJzW3Jhd05hbWVdID0gdm9pZCAwO1xuICAgIH1cbiAgfVxufVxuY29uc3Qgb3B0aW9uc01vZGlmaWVyUkUgPSAvKD86T25jZXxQYXNzaXZlfENhcHR1cmUpJC87XG5mdW5jdGlvbiBwYXJzZU5hbWUobmFtZSkge1xuICBsZXQgb3B0aW9ucztcbiAgaWYgKG9wdGlvbnNNb2RpZmllclJFLnRlc3QobmFtZSkpIHtcbiAgICBvcHRpb25zID0ge307XG4gICAgbGV0IG07XG4gICAgd2hpbGUgKG0gPSBuYW1lLm1hdGNoKG9wdGlvbnNNb2RpZmllclJFKSkge1xuICAgICAgbmFtZSA9IG5hbWUuc2xpY2UoMCwgbmFtZS5sZW5ndGggLSBtWzBdLmxlbmd0aCk7XG4gICAgICBvcHRpb25zW21bMF0udG9Mb3dlckNhc2UoKV0gPSB0cnVlO1xuICAgIH1cbiAgfVxuICBjb25zdCBldmVudCA9IG5hbWVbMl0gPT09IFwiOlwiID8gbmFtZS5zbGljZSgzKSA6IGh5cGhlbmF0ZShuYW1lLnNsaWNlKDIpKTtcbiAgcmV0dXJuIFtldmVudCwgb3B0aW9uc107XG59XG5sZXQgY2FjaGVkTm93ID0gMDtcbmNvbnN0IHAgPSAvKiBAX19QVVJFX18gKi8gUHJvbWlzZS5yZXNvbHZlKCk7XG5jb25zdCBnZXROb3cgPSAoKSA9PiBjYWNoZWROb3cgfHwgKHAudGhlbigoKSA9PiBjYWNoZWROb3cgPSAwKSwgY2FjaGVkTm93ID0gRGF0ZS5ub3coKSk7XG5mdW5jdGlvbiBjcmVhdGVJbnZva2VyKGluaXRpYWxWYWx1ZSwgaW5zdGFuY2UpIHtcbiAgY29uc3QgaW52b2tlciA9IChlKSA9PiB7XG4gICAgaWYgKCFlLl92dHMpIHtcbiAgICAgIGUuX3Z0cyA9IERhdGUubm93KCk7XG4gICAgfSBlbHNlIGlmIChlLl92dHMgPD0gaW52b2tlci5hdHRhY2hlZCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjYWxsV2l0aEFzeW5jRXJyb3JIYW5kbGluZyhcbiAgICAgIHBhdGNoU3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKGUsIGludm9rZXIudmFsdWUpLFxuICAgICAgaW5zdGFuY2UsXG4gICAgICA1LFxuICAgICAgW2VdXG4gICAgKTtcbiAgfTtcbiAgaW52b2tlci52YWx1ZSA9IGluaXRpYWxWYWx1ZTtcbiAgaW52b2tlci5hdHRhY2hlZCA9IGdldE5vdygpO1xuICByZXR1cm4gaW52b2tlcjtcbn1cbmZ1bmN0aW9uIHBhdGNoU3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKGUsIHZhbHVlKSB7XG4gIGlmIChpc0FycmF5KHZhbHVlKSkge1xuICAgIGNvbnN0IG9yaWdpbmFsU3RvcCA9IGUuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uO1xuICAgIGUuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uID0gKCkgPT4ge1xuICAgICAgb3JpZ2luYWxTdG9wLmNhbGwoZSk7XG4gICAgICBlLl9zdG9wcGVkID0gdHJ1ZTtcbiAgICB9O1xuICAgIHJldHVybiB2YWx1ZS5tYXAoKGZuKSA9PiAoZTIpID0+ICFlMi5fc3RvcHBlZCAmJiBmbiAmJiBmbihlMikpO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiB2YWx1ZTtcbiAgfVxufVxuXG5jb25zdCBpc05hdGl2ZU9uID0gKGtleSkgPT4ga2V5LmNoYXJDb2RlQXQoMCkgPT09IDExMSAmJiBrZXkuY2hhckNvZGVBdCgxKSA9PT0gMTEwICYmIC8vIGxvd2VyY2FzZSBsZXR0ZXJcbmtleS5jaGFyQ29kZUF0KDIpID4gOTYgJiYga2V5LmNoYXJDb2RlQXQoMikgPCAxMjM7XG5jb25zdCBwYXRjaFByb3AgPSAoZWwsIGtleSwgcHJldlZhbHVlLCBuZXh0VmFsdWUsIG5hbWVzcGFjZSwgcHJldkNoaWxkcmVuLCBwYXJlbnRDb21wb25lbnQsIHBhcmVudFN1c3BlbnNlLCB1bm1vdW50Q2hpbGRyZW4pID0+IHtcbiAgY29uc3QgaXNTVkcgPSBuYW1lc3BhY2UgPT09IFwic3ZnXCI7XG4gIGlmIChrZXkgPT09IFwiY2xhc3NcIikge1xuICAgIHBhdGNoQ2xhc3MoZWwsIG5leHRWYWx1ZSwgaXNTVkcpO1xuICB9IGVsc2UgaWYgKGtleSA9PT0gXCJzdHlsZVwiKSB7XG4gICAgcGF0Y2hTdHlsZShlbCwgcHJldlZhbHVlLCBuZXh0VmFsdWUpO1xuICB9IGVsc2UgaWYgKGlzT24oa2V5KSkge1xuICAgIGlmICghaXNNb2RlbExpc3RlbmVyKGtleSkpIHtcbiAgICAgIHBhdGNoRXZlbnQoZWwsIGtleSwgcHJldlZhbHVlLCBuZXh0VmFsdWUsIHBhcmVudENvbXBvbmVudCk7XG4gICAgfVxuICB9IGVsc2UgaWYgKGtleVswXSA9PT0gXCIuXCIgPyAoa2V5ID0ga2V5LnNsaWNlKDEpLCB0cnVlKSA6IGtleVswXSA9PT0gXCJeXCIgPyAoa2V5ID0ga2V5LnNsaWNlKDEpLCBmYWxzZSkgOiBzaG91bGRTZXRBc1Byb3AoZWwsIGtleSwgbmV4dFZhbHVlLCBpc1NWRykpIHtcbiAgICBwYXRjaERPTVByb3AoXG4gICAgICBlbCxcbiAgICAgIGtleSxcbiAgICAgIG5leHRWYWx1ZSxcbiAgICAgIHByZXZDaGlsZHJlbixcbiAgICAgIHBhcmVudENvbXBvbmVudCxcbiAgICAgIHBhcmVudFN1c3BlbnNlLFxuICAgICAgdW5tb3VudENoaWxkcmVuXG4gICAgKTtcbiAgfSBlbHNlIHtcbiAgICBpZiAoa2V5ID09PSBcInRydWUtdmFsdWVcIikge1xuICAgICAgZWwuX3RydWVWYWx1ZSA9IG5leHRWYWx1ZTtcbiAgICB9IGVsc2UgaWYgKGtleSA9PT0gXCJmYWxzZS12YWx1ZVwiKSB7XG4gICAgICBlbC5fZmFsc2VWYWx1ZSA9IG5leHRWYWx1ZTtcbiAgICB9XG4gICAgcGF0Y2hBdHRyKGVsLCBrZXksIG5leHRWYWx1ZSwgaXNTVkcpO1xuICB9XG59O1xuZnVuY3Rpb24gc2hvdWxkU2V0QXNQcm9wKGVsLCBrZXksIHZhbHVlLCBpc1NWRykge1xuICBpZiAoaXNTVkcpIHtcbiAgICBpZiAoa2V5ID09PSBcImlubmVySFRNTFwiIHx8IGtleSA9PT0gXCJ0ZXh0Q29udGVudFwiKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgaWYgKGtleSBpbiBlbCAmJiBpc05hdGl2ZU9uKGtleSkgJiYgaXNGdW5jdGlvbih2YWx1ZSkpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgaWYgKGtleSA9PT0gXCJzcGVsbGNoZWNrXCIgfHwga2V5ID09PSBcImRyYWdnYWJsZVwiIHx8IGtleSA9PT0gXCJ0cmFuc2xhdGVcIikge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICBpZiAoa2V5ID09PSBcImZvcm1cIikge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICBpZiAoa2V5ID09PSBcImxpc3RcIiAmJiBlbC50YWdOYW1lID09PSBcIklOUFVUXCIpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgaWYgKGtleSA9PT0gXCJ0eXBlXCIgJiYgZWwudGFnTmFtZSA9PT0gXCJURVhUQVJFQVwiKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIGlmIChrZXkgPT09IFwid2lkdGhcIiB8fCBrZXkgPT09IFwiaGVpZ2h0XCIpIHtcbiAgICBjb25zdCB0YWcgPSBlbC50YWdOYW1lO1xuICAgIGlmICh0YWcgPT09IFwiSU1HXCIgfHwgdGFnID09PSBcIlZJREVPXCIgfHwgdGFnID09PSBcIkNBTlZBU1wiIHx8IHRhZyA9PT0gXCJTT1VSQ0VcIikge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfVxuICBpZiAoaXNOYXRpdmVPbihrZXkpICYmIGlzU3RyaW5nKHZhbHVlKSkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICByZXR1cm4ga2V5IGluIGVsO1xufVxuXG4vKiEgI19fTk9fU0lERV9FRkZFQ1RTX18gKi9cbi8vIEBfX05PX1NJREVfRUZGRUNUU19fXG5mdW5jdGlvbiBkZWZpbmVDdXN0b21FbGVtZW50KG9wdGlvbnMsIGh5ZHJhdGUyKSB7XG4gIGNvbnN0IENvbXAgPSBkZWZpbmVDb21wb25lbnQob3B0aW9ucyk7XG4gIGNsYXNzIFZ1ZUN1c3RvbUVsZW1lbnQgZXh0ZW5kcyBWdWVFbGVtZW50IHtcbiAgICBjb25zdHJ1Y3Rvcihpbml0aWFsUHJvcHMpIHtcbiAgICAgIHN1cGVyKENvbXAsIGluaXRpYWxQcm9wcywgaHlkcmF0ZTIpO1xuICAgIH1cbiAgfVxuICBWdWVDdXN0b21FbGVtZW50LmRlZiA9IENvbXA7XG4gIHJldHVybiBWdWVDdXN0b21FbGVtZW50O1xufVxuLyohICNfX05PX1NJREVfRUZGRUNUU19fICovXG5jb25zdCBkZWZpbmVTU1JDdXN0b21FbGVtZW50ID0gLyogQF9fTk9fU0lERV9FRkZFQ1RTX18gKi8gKG9wdGlvbnMpID0+IHtcbiAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBkZWZpbmVDdXN0b21FbGVtZW50KG9wdGlvbnMsIGh5ZHJhdGUpO1xufTtcbmNvbnN0IEJhc2VDbGFzcyA9IHR5cGVvZiBIVE1MRWxlbWVudCAhPT0gXCJ1bmRlZmluZWRcIiA/IEhUTUxFbGVtZW50IDogY2xhc3Mge1xufTtcbmNsYXNzIFZ1ZUVsZW1lbnQgZXh0ZW5kcyBCYXNlQ2xhc3Mge1xuICBjb25zdHJ1Y3RvcihfZGVmLCBfcHJvcHMgPSB7fSwgaHlkcmF0ZTIpIHtcbiAgICBzdXBlcigpO1xuICAgIHRoaXMuX2RlZiA9IF9kZWY7XG4gICAgdGhpcy5fcHJvcHMgPSBfcHJvcHM7XG4gICAgLyoqXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgdGhpcy5faW5zdGFuY2UgPSBudWxsO1xuICAgIHRoaXMuX2Nvbm5lY3RlZCA9IGZhbHNlO1xuICAgIHRoaXMuX3Jlc29sdmVkID0gZmFsc2U7XG4gICAgdGhpcy5fbnVtYmVyUHJvcHMgPSBudWxsO1xuICAgIHRoaXMuX29iID0gbnVsbDtcbiAgICBpZiAodGhpcy5zaGFkb3dSb290ICYmIGh5ZHJhdGUyKSB7XG4gICAgICBoeWRyYXRlMih0aGlzLl9jcmVhdGVWTm9kZSgpLCB0aGlzLnNoYWRvd1Jvb3QpO1xuICAgIH0gZWxzZSB7XG4gICAgICBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSAmJiB0aGlzLnNoYWRvd1Jvb3QpIHtcbiAgICAgICAgd2FybihcbiAgICAgICAgICBgQ3VzdG9tIGVsZW1lbnQgaGFzIHByZS1yZW5kZXJlZCBkZWNsYXJhdGl2ZSBzaGFkb3cgcm9vdCBidXQgaXMgbm90IGRlZmluZWQgYXMgaHlkcmF0YWJsZS4gVXNlIFxcYGRlZmluZVNTUkN1c3RvbUVsZW1lbnRcXGAuYFxuICAgICAgICApO1xuICAgICAgfVxuICAgICAgdGhpcy5hdHRhY2hTaGFkb3coeyBtb2RlOiBcIm9wZW5cIiB9KTtcbiAgICAgIGlmICghdGhpcy5fZGVmLl9fYXN5bmNMb2FkZXIpIHtcbiAgICAgICAgdGhpcy5fcmVzb2x2ZVByb3BzKHRoaXMuX2RlZik7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIGNvbm5lY3RlZENhbGxiYWNrKCkge1xuICAgIHRoaXMuX2Nvbm5lY3RlZCA9IHRydWU7XG4gICAgaWYgKCF0aGlzLl9pbnN0YW5jZSkge1xuICAgICAgaWYgKHRoaXMuX3Jlc29sdmVkKSB7XG4gICAgICAgIHRoaXMuX3VwZGF0ZSgpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5fcmVzb2x2ZURlZigpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICBkaXNjb25uZWN0ZWRDYWxsYmFjaygpIHtcbiAgICB0aGlzLl9jb25uZWN0ZWQgPSBmYWxzZTtcbiAgICBpZiAodGhpcy5fb2IpIHtcbiAgICAgIHRoaXMuX29iLmRpc2Nvbm5lY3QoKTtcbiAgICAgIHRoaXMuX29iID0gbnVsbDtcbiAgICB9XG4gICAgbmV4dFRpY2soKCkgPT4ge1xuICAgICAgaWYgKCF0aGlzLl9jb25uZWN0ZWQpIHtcbiAgICAgICAgcmVuZGVyKG51bGwsIHRoaXMuc2hhZG93Um9vdCk7XG4gICAgICAgIHRoaXMuX2luc3RhbmNlID0gbnVsbDtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuICAvKipcbiAgICogcmVzb2x2ZSBpbm5lciBjb21wb25lbnQgZGVmaW5pdGlvbiAoaGFuZGxlIHBvc3NpYmxlIGFzeW5jIGNvbXBvbmVudClcbiAgICovXG4gIF9yZXNvbHZlRGVmKCkge1xuICAgIHRoaXMuX3Jlc29sdmVkID0gdHJ1ZTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuYXR0cmlidXRlcy5sZW5ndGg7IGkrKykge1xuICAgICAgdGhpcy5fc2V0QXR0cih0aGlzLmF0dHJpYnV0ZXNbaV0ubmFtZSk7XG4gICAgfVxuICAgIHRoaXMuX29iID0gbmV3IE11dGF0aW9uT2JzZXJ2ZXIoKG11dGF0aW9ucykgPT4ge1xuICAgICAgZm9yIChjb25zdCBtIG9mIG11dGF0aW9ucykge1xuICAgICAgICB0aGlzLl9zZXRBdHRyKG0uYXR0cmlidXRlTmFtZSk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgdGhpcy5fb2Iub2JzZXJ2ZSh0aGlzLCB7IGF0dHJpYnV0ZXM6IHRydWUgfSk7XG4gICAgY29uc3QgcmVzb2x2ZSA9IChkZWYsIGlzQXN5bmMgPSBmYWxzZSkgPT4ge1xuICAgICAgY29uc3QgeyBwcm9wcywgc3R5bGVzIH0gPSBkZWY7XG4gICAgICBsZXQgbnVtYmVyUHJvcHM7XG4gICAgICBpZiAocHJvcHMgJiYgIWlzQXJyYXkocHJvcHMpKSB7XG4gICAgICAgIGZvciAoY29uc3Qga2V5IGluIHByb3BzKSB7XG4gICAgICAgICAgY29uc3Qgb3B0ID0gcHJvcHNba2V5XTtcbiAgICAgICAgICBpZiAob3B0ID09PSBOdW1iZXIgfHwgb3B0ICYmIG9wdC50eXBlID09PSBOdW1iZXIpIHtcbiAgICAgICAgICAgIGlmIChrZXkgaW4gdGhpcy5fcHJvcHMpIHtcbiAgICAgICAgICAgICAgdGhpcy5fcHJvcHNba2V5XSA9IHRvTnVtYmVyKHRoaXMuX3Byb3BzW2tleV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgKG51bWJlclByb3BzIHx8IChudW1iZXJQcm9wcyA9IC8qIEBfX1BVUkVfXyAqLyBPYmplY3QuY3JlYXRlKG51bGwpKSlbY2FtZWxpemUkMShrZXkpXSA9IHRydWU7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICB0aGlzLl9udW1iZXJQcm9wcyA9IG51bWJlclByb3BzO1xuICAgICAgaWYgKGlzQXN5bmMpIHtcbiAgICAgICAgdGhpcy5fcmVzb2x2ZVByb3BzKGRlZik7XG4gICAgICB9XG4gICAgICB0aGlzLl9hcHBseVN0eWxlcyhzdHlsZXMpO1xuICAgICAgdGhpcy5fdXBkYXRlKCk7XG4gICAgfTtcbiAgICBjb25zdCBhc3luY0RlZiA9IHRoaXMuX2RlZi5fX2FzeW5jTG9hZGVyO1xuICAgIGlmIChhc3luY0RlZikge1xuICAgICAgYXN5bmNEZWYoKS50aGVuKChkZWYpID0+IHJlc29sdmUoZGVmLCB0cnVlKSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJlc29sdmUodGhpcy5fZGVmKTtcbiAgICB9XG4gIH1cbiAgX3Jlc29sdmVQcm9wcyhkZWYpIHtcbiAgICBjb25zdCB7IHByb3BzIH0gPSBkZWY7XG4gICAgY29uc3QgZGVjbGFyZWRQcm9wS2V5cyA9IGlzQXJyYXkocHJvcHMpID8gcHJvcHMgOiBPYmplY3Qua2V5cyhwcm9wcyB8fCB7fSk7XG4gICAgZm9yIChjb25zdCBrZXkgb2YgT2JqZWN0LmtleXModGhpcykpIHtcbiAgICAgIGlmIChrZXlbMF0gIT09IFwiX1wiICYmIGRlY2xhcmVkUHJvcEtleXMuaW5jbHVkZXMoa2V5KSkge1xuICAgICAgICB0aGlzLl9zZXRQcm9wKGtleSwgdGhpc1trZXldLCB0cnVlLCBmYWxzZSk7XG4gICAgICB9XG4gICAgfVxuICAgIGZvciAoY29uc3Qga2V5IG9mIGRlY2xhcmVkUHJvcEtleXMubWFwKGNhbWVsaXplJDEpKSB7XG4gICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywga2V5LCB7XG4gICAgICAgIGdldCgpIHtcbiAgICAgICAgICByZXR1cm4gdGhpcy5fZ2V0UHJvcChrZXkpO1xuICAgICAgICB9LFxuICAgICAgICBzZXQodmFsKSB7XG4gICAgICAgICAgdGhpcy5fc2V0UHJvcChrZXksIHZhbCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuICBfc2V0QXR0cihrZXkpIHtcbiAgICBsZXQgdmFsdWUgPSB0aGlzLmdldEF0dHJpYnV0ZShrZXkpO1xuICAgIGNvbnN0IGNhbWVsS2V5ID0gY2FtZWxpemUkMShrZXkpO1xuICAgIGlmICh0aGlzLl9udW1iZXJQcm9wcyAmJiB0aGlzLl9udW1iZXJQcm9wc1tjYW1lbEtleV0pIHtcbiAgICAgIHZhbHVlID0gdG9OdW1iZXIodmFsdWUpO1xuICAgIH1cbiAgICB0aGlzLl9zZXRQcm9wKGNhbWVsS2V5LCB2YWx1ZSwgZmFsc2UpO1xuICB9XG4gIC8qKlxuICAgKiBAaW50ZXJuYWxcbiAgICovXG4gIF9nZXRQcm9wKGtleSkge1xuICAgIHJldHVybiB0aGlzLl9wcm9wc1trZXldO1xuICB9XG4gIC8qKlxuICAgKiBAaW50ZXJuYWxcbiAgICovXG4gIF9zZXRQcm9wKGtleSwgdmFsLCBzaG91bGRSZWZsZWN0ID0gdHJ1ZSwgc2hvdWxkVXBkYXRlID0gdHJ1ZSkge1xuICAgIGlmICh2YWwgIT09IHRoaXMuX3Byb3BzW2tleV0pIHtcbiAgICAgIHRoaXMuX3Byb3BzW2tleV0gPSB2YWw7XG4gICAgICBpZiAoc2hvdWxkVXBkYXRlICYmIHRoaXMuX2luc3RhbmNlKSB7XG4gICAgICAgIHRoaXMuX3VwZGF0ZSgpO1xuICAgICAgfVxuICAgICAgaWYgKHNob3VsZFJlZmxlY3QpIHtcbiAgICAgICAgaWYgKHZhbCA9PT0gdHJ1ZSkge1xuICAgICAgICAgIHRoaXMuc2V0QXR0cmlidXRlKGh5cGhlbmF0ZShrZXkpLCBcIlwiKTtcbiAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgdmFsID09PSBcInN0cmluZ1wiIHx8IHR5cGVvZiB2YWwgPT09IFwibnVtYmVyXCIpIHtcbiAgICAgICAgICB0aGlzLnNldEF0dHJpYnV0ZShoeXBoZW5hdGUoa2V5KSwgdmFsICsgXCJcIik7XG4gICAgICAgIH0gZWxzZSBpZiAoIXZhbCkge1xuICAgICAgICAgIHRoaXMucmVtb3ZlQXR0cmlidXRlKGh5cGhlbmF0ZShrZXkpKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuICBfdXBkYXRlKCkge1xuICAgIHJlbmRlcih0aGlzLl9jcmVhdGVWTm9kZSgpLCB0aGlzLnNoYWRvd1Jvb3QpO1xuICB9XG4gIF9jcmVhdGVWTm9kZSgpIHtcbiAgICBjb25zdCB2bm9kZSA9IGNyZWF0ZVZOb2RlKHRoaXMuX2RlZiwgZXh0ZW5kKHt9LCB0aGlzLl9wcm9wcykpO1xuICAgIGlmICghdGhpcy5faW5zdGFuY2UpIHtcbiAgICAgIHZub2RlLmNlID0gKGluc3RhbmNlKSA9PiB7XG4gICAgICAgIHRoaXMuX2luc3RhbmNlID0gaW5zdGFuY2U7XG4gICAgICAgIGluc3RhbmNlLmlzQ0UgPSB0cnVlO1xuICAgICAgICBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSkge1xuICAgICAgICAgIGluc3RhbmNlLmNlUmVsb2FkID0gKG5ld1N0eWxlcykgPT4ge1xuICAgICAgICAgICAgaWYgKHRoaXMuX3N0eWxlcykge1xuICAgICAgICAgICAgICB0aGlzLl9zdHlsZXMuZm9yRWFjaCgocykgPT4gdGhpcy5zaGFkb3dSb290LnJlbW92ZUNoaWxkKHMpKTtcbiAgICAgICAgICAgICAgdGhpcy5fc3R5bGVzLmxlbmd0aCA9IDA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLl9hcHBseVN0eWxlcyhuZXdTdHlsZXMpO1xuICAgICAgICAgICAgdGhpcy5faW5zdGFuY2UgPSBudWxsO1xuICAgICAgICAgICAgdGhpcy5fdXBkYXRlKCk7XG4gICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBkaXNwYXRjaCA9IChldmVudCwgYXJncykgPT4ge1xuICAgICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChcbiAgICAgICAgICAgIG5ldyBDdXN0b21FdmVudChldmVudCwge1xuICAgICAgICAgICAgICBkZXRhaWw6IGFyZ3NcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgKTtcbiAgICAgICAgfTtcbiAgICAgICAgaW5zdGFuY2UuZW1pdCA9IChldmVudCwgLi4uYXJncykgPT4ge1xuICAgICAgICAgIGRpc3BhdGNoKGV2ZW50LCBhcmdzKTtcbiAgICAgICAgICBpZiAoaHlwaGVuYXRlKGV2ZW50KSAhPT0gZXZlbnQpIHtcbiAgICAgICAgICAgIGRpc3BhdGNoKGh5cGhlbmF0ZShldmVudCksIGFyZ3MpO1xuICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgbGV0IHBhcmVudCA9IHRoaXM7XG4gICAgICAgIHdoaWxlIChwYXJlbnQgPSBwYXJlbnQgJiYgKHBhcmVudC5wYXJlbnROb2RlIHx8IHBhcmVudC5ob3N0KSkge1xuICAgICAgICAgIGlmIChwYXJlbnQgaW5zdGFuY2VvZiBWdWVFbGVtZW50KSB7XG4gICAgICAgICAgICBpbnN0YW5jZS5wYXJlbnQgPSBwYXJlbnQuX2luc3RhbmNlO1xuICAgICAgICAgICAgaW5zdGFuY2UucHJvdmlkZXMgPSBwYXJlbnQuX2luc3RhbmNlLnByb3ZpZGVzO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9O1xuICAgIH1cbiAgICByZXR1cm4gdm5vZGU7XG4gIH1cbiAgX2FwcGx5U3R5bGVzKHN0eWxlcykge1xuICAgIGlmIChzdHlsZXMpIHtcbiAgICAgIHN0eWxlcy5mb3JFYWNoKChjc3MpID0+IHtcbiAgICAgICAgY29uc3QgcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzdHlsZVwiKTtcbiAgICAgICAgcy50ZXh0Q29udGVudCA9IGNzcztcbiAgICAgICAgdGhpcy5zaGFkb3dSb290LmFwcGVuZENoaWxkKHMpO1xuICAgICAgICBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSkge1xuICAgICAgICAgICh0aGlzLl9zdHlsZXMgfHwgKHRoaXMuX3N0eWxlcyA9IFtdKSkucHVzaChzKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICB9XG59XG5cbmZ1bmN0aW9uIHVzZUNzc01vZHVsZShuYW1lID0gXCIkc3R5bGVcIikge1xuICB7XG4gICAgY29uc3QgaW5zdGFuY2UgPSBnZXRDdXJyZW50SW5zdGFuY2UoKTtcbiAgICBpZiAoIWluc3RhbmNlKSB7XG4gICAgICAhIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpICYmIHdhcm4oYHVzZUNzc01vZHVsZSBtdXN0IGJlIGNhbGxlZCBpbnNpZGUgc2V0dXAoKWApO1xuICAgICAgcmV0dXJuIEVNUFRZX09CSjtcbiAgICB9XG4gICAgY29uc3QgbW9kdWxlcyA9IGluc3RhbmNlLnR5cGUuX19jc3NNb2R1bGVzO1xuICAgIGlmICghbW9kdWxlcykge1xuICAgICAgISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSAmJiB3YXJuKGBDdXJyZW50IGluc3RhbmNlIGRvZXMgbm90IGhhdmUgQ1NTIG1vZHVsZXMgaW5qZWN0ZWQuYCk7XG4gICAgICByZXR1cm4gRU1QVFlfT0JKO1xuICAgIH1cbiAgICBjb25zdCBtb2QgPSBtb2R1bGVzW25hbWVdO1xuICAgIGlmICghbW9kKSB7XG4gICAgICAhIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpICYmIHdhcm4oYEN1cnJlbnQgaW5zdGFuY2UgZG9lcyBub3QgaGF2ZSBDU1MgbW9kdWxlIG5hbWVkIFwiJHtuYW1lfVwiLmApO1xuICAgICAgcmV0dXJuIEVNUFRZX09CSjtcbiAgICB9XG4gICAgcmV0dXJuIG1vZDtcbiAgfVxufVxuXG5jb25zdCBwb3NpdGlvbk1hcCA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgV2Vha01hcCgpO1xuY29uc3QgbmV3UG9zaXRpb25NYXAgPSAvKiBAX19QVVJFX18gKi8gbmV3IFdlYWtNYXAoKTtcbmNvbnN0IG1vdmVDYktleSA9IFN5bWJvbChcIl9tb3ZlQ2JcIik7XG5jb25zdCBlbnRlckNiS2V5ID0gU3ltYm9sKFwiX2VudGVyQ2JcIik7XG5jb25zdCBUcmFuc2l0aW9uR3JvdXBJbXBsID0ge1xuICBuYW1lOiBcIlRyYW5zaXRpb25Hcm91cFwiLFxuICBwcm9wczogLyogQF9fUFVSRV9fICovIGV4dGVuZCh7fSwgVHJhbnNpdGlvblByb3BzVmFsaWRhdG9ycywge1xuICAgIHRhZzogU3RyaW5nLFxuICAgIG1vdmVDbGFzczogU3RyaW5nXG4gIH0pLFxuICBzZXR1cChwcm9wcywgeyBzbG90cyB9KSB7XG4gICAgY29uc3QgaW5zdGFuY2UgPSBnZXRDdXJyZW50SW5zdGFuY2UoKTtcbiAgICBjb25zdCBzdGF0ZSA9IHVzZVRyYW5zaXRpb25TdGF0ZSgpO1xuICAgIGxldCBwcmV2Q2hpbGRyZW47XG4gICAgbGV0IGNoaWxkcmVuO1xuICAgIG9uVXBkYXRlZCgoKSA9PiB7XG4gICAgICBpZiAoIXByZXZDaGlsZHJlbi5sZW5ndGgpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgY29uc3QgbW92ZUNsYXNzID0gcHJvcHMubW92ZUNsYXNzIHx8IGAke3Byb3BzLm5hbWUgfHwgXCJ2XCJ9LW1vdmVgO1xuICAgICAgaWYgKCFoYXNDU1NUcmFuc2Zvcm0oXG4gICAgICAgIHByZXZDaGlsZHJlblswXS5lbCxcbiAgICAgICAgaW5zdGFuY2Uudm5vZGUuZWwsXG4gICAgICAgIG1vdmVDbGFzc1xuICAgICAgKSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBwcmV2Q2hpbGRyZW4uZm9yRWFjaChjYWxsUGVuZGluZ0Nicyk7XG4gICAgICBwcmV2Q2hpbGRyZW4uZm9yRWFjaChyZWNvcmRQb3NpdGlvbik7XG4gICAgICBjb25zdCBtb3ZlZENoaWxkcmVuID0gcHJldkNoaWxkcmVuLmZpbHRlcihhcHBseVRyYW5zbGF0aW9uKTtcbiAgICAgIGZvcmNlUmVmbG93KCk7XG4gICAgICBtb3ZlZENoaWxkcmVuLmZvckVhY2goKGMpID0+IHtcbiAgICAgICAgY29uc3QgZWwgPSBjLmVsO1xuICAgICAgICBjb25zdCBzdHlsZSA9IGVsLnN0eWxlO1xuICAgICAgICBhZGRUcmFuc2l0aW9uQ2xhc3MoZWwsIG1vdmVDbGFzcyk7XG4gICAgICAgIHN0eWxlLnRyYW5zZm9ybSA9IHN0eWxlLndlYmtpdFRyYW5zZm9ybSA9IHN0eWxlLnRyYW5zaXRpb25EdXJhdGlvbiA9IFwiXCI7XG4gICAgICAgIGNvbnN0IGNiID0gZWxbbW92ZUNiS2V5XSA9IChlKSA9PiB7XG4gICAgICAgICAgaWYgKGUgJiYgZS50YXJnZXQgIT09IGVsKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmICghZSB8fCAvdHJhbnNmb3JtJC8udGVzdChlLnByb3BlcnR5TmFtZSkpIHtcbiAgICAgICAgICAgIGVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJ0cmFuc2l0aW9uZW5kXCIsIGNiKTtcbiAgICAgICAgICAgIGVsW21vdmVDYktleV0gPSBudWxsO1xuICAgICAgICAgICAgcmVtb3ZlVHJhbnNpdGlvbkNsYXNzKGVsLCBtb3ZlQ2xhc3MpO1xuICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgZWwuYWRkRXZlbnRMaXN0ZW5lcihcInRyYW5zaXRpb25lbmRcIiwgY2IpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIGNvbnN0IHJhd1Byb3BzID0gdG9SYXcocHJvcHMpO1xuICAgICAgY29uc3QgY3NzVHJhbnNpdGlvblByb3BzID0gcmVzb2x2ZVRyYW5zaXRpb25Qcm9wcyhyYXdQcm9wcyk7XG4gICAgICBsZXQgdGFnID0gcmF3UHJvcHMudGFnIHx8IEZyYWdtZW50O1xuICAgICAgcHJldkNoaWxkcmVuID0gY2hpbGRyZW47XG4gICAgICBjaGlsZHJlbiA9IHNsb3RzLmRlZmF1bHQgPyBnZXRUcmFuc2l0aW9uUmF3Q2hpbGRyZW4oc2xvdHMuZGVmYXVsdCgpKSA6IFtdO1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjaGlsZHJlbi5sZW5ndGg7IGkrKykge1xuICAgICAgICBjb25zdCBjaGlsZCA9IGNoaWxkcmVuW2ldO1xuICAgICAgICBpZiAoY2hpbGQua2V5ICE9IG51bGwpIHtcbiAgICAgICAgICBzZXRUcmFuc2l0aW9uSG9va3MoXG4gICAgICAgICAgICBjaGlsZCxcbiAgICAgICAgICAgIHJlc29sdmVUcmFuc2l0aW9uSG9va3MoY2hpbGQsIGNzc1RyYW5zaXRpb25Qcm9wcywgc3RhdGUsIGluc3RhbmNlKVxuICAgICAgICAgICk7XG4gICAgICAgIH0gZWxzZSBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSkge1xuICAgICAgICAgIHdhcm4oYDxUcmFuc2l0aW9uR3JvdXA+IGNoaWxkcmVuIG11c3QgYmUga2V5ZWQuYCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmIChwcmV2Q2hpbGRyZW4pIHtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwcmV2Q2hpbGRyZW4ubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICBjb25zdCBjaGlsZCA9IHByZXZDaGlsZHJlbltpXTtcbiAgICAgICAgICBzZXRUcmFuc2l0aW9uSG9va3MoXG4gICAgICAgICAgICBjaGlsZCxcbiAgICAgICAgICAgIHJlc29sdmVUcmFuc2l0aW9uSG9va3MoY2hpbGQsIGNzc1RyYW5zaXRpb25Qcm9wcywgc3RhdGUsIGluc3RhbmNlKVxuICAgICAgICAgICk7XG4gICAgICAgICAgcG9zaXRpb25NYXAuc2V0KGNoaWxkLCBjaGlsZC5lbC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiBjcmVhdGVWTm9kZSh0YWcsIG51bGwsIGNoaWxkcmVuKTtcbiAgICB9O1xuICB9XG59O1xuY29uc3QgcmVtb3ZlTW9kZSA9IChwcm9wcykgPT4gZGVsZXRlIHByb3BzLm1vZGU7XG4vKiBAX19QVVJFX18gKi8gcmVtb3ZlTW9kZShUcmFuc2l0aW9uR3JvdXBJbXBsLnByb3BzKTtcbmNvbnN0IFRyYW5zaXRpb25Hcm91cCA9IFRyYW5zaXRpb25Hcm91cEltcGw7XG5mdW5jdGlvbiBjYWxsUGVuZGluZ0NicyhjKSB7XG4gIGNvbnN0IGVsID0gYy5lbDtcbiAgaWYgKGVsW21vdmVDYktleV0pIHtcbiAgICBlbFttb3ZlQ2JLZXldKCk7XG4gIH1cbiAgaWYgKGVsW2VudGVyQ2JLZXldKSB7XG4gICAgZWxbZW50ZXJDYktleV0oKTtcbiAgfVxufVxuZnVuY3Rpb24gcmVjb3JkUG9zaXRpb24oYykge1xuICBuZXdQb3NpdGlvbk1hcC5zZXQoYywgYy5lbC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSk7XG59XG5mdW5jdGlvbiBhcHBseVRyYW5zbGF0aW9uKGMpIHtcbiAgY29uc3Qgb2xkUG9zID0gcG9zaXRpb25NYXAuZ2V0KGMpO1xuICBjb25zdCBuZXdQb3MgPSBuZXdQb3NpdGlvbk1hcC5nZXQoYyk7XG4gIGNvbnN0IGR4ID0gb2xkUG9zLmxlZnQgLSBuZXdQb3MubGVmdDtcbiAgY29uc3QgZHkgPSBvbGRQb3MudG9wIC0gbmV3UG9zLnRvcDtcbiAgaWYgKGR4IHx8IGR5KSB7XG4gICAgY29uc3QgcyA9IGMuZWwuc3R5bGU7XG4gICAgcy50cmFuc2Zvcm0gPSBzLndlYmtpdFRyYW5zZm9ybSA9IGB0cmFuc2xhdGUoJHtkeH1weCwke2R5fXB4KWA7XG4gICAgcy50cmFuc2l0aW9uRHVyYXRpb24gPSBcIjBzXCI7XG4gICAgcmV0dXJuIGM7XG4gIH1cbn1cbmZ1bmN0aW9uIGhhc0NTU1RyYW5zZm9ybShlbCwgcm9vdCwgbW92ZUNsYXNzKSB7XG4gIGNvbnN0IGNsb25lID0gZWwuY2xvbmVOb2RlKCk7XG4gIGNvbnN0IF92dGMgPSBlbFt2dGNLZXldO1xuICBpZiAoX3Z0Yykge1xuICAgIF92dGMuZm9yRWFjaCgoY2xzKSA9PiB7XG4gICAgICBjbHMuc3BsaXQoL1xccysvKS5mb3JFYWNoKChjKSA9PiBjICYmIGNsb25lLmNsYXNzTGlzdC5yZW1vdmUoYykpO1xuICAgIH0pO1xuICB9XG4gIG1vdmVDbGFzcy5zcGxpdCgvXFxzKy8pLmZvckVhY2goKGMpID0+IGMgJiYgY2xvbmUuY2xhc3NMaXN0LmFkZChjKSk7XG4gIGNsb25lLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgY29uc3QgY29udGFpbmVyID0gcm9vdC5ub2RlVHlwZSA9PT0gMSA/IHJvb3QgOiByb290LnBhcmVudE5vZGU7XG4gIGNvbnRhaW5lci5hcHBlbmRDaGlsZChjbG9uZSk7XG4gIGNvbnN0IHsgaGFzVHJhbnNmb3JtIH0gPSBnZXRUcmFuc2l0aW9uSW5mbyhjbG9uZSk7XG4gIGNvbnRhaW5lci5yZW1vdmVDaGlsZChjbG9uZSk7XG4gIHJldHVybiBoYXNUcmFuc2Zvcm07XG59XG5cbmNvbnN0IGdldE1vZGVsQXNzaWduZXIgPSAodm5vZGUpID0+IHtcbiAgY29uc3QgZm4gPSB2bm9kZS5wcm9wc1tcIm9uVXBkYXRlOm1vZGVsVmFsdWVcIl0gfHwgZmFsc2U7XG4gIHJldHVybiBpc0FycmF5KGZuKSA/ICh2YWx1ZSkgPT4gaW52b2tlQXJyYXlGbnMoZm4sIHZhbHVlKSA6IGZuO1xufTtcbmZ1bmN0aW9uIG9uQ29tcG9zaXRpb25TdGFydChlKSB7XG4gIGUudGFyZ2V0LmNvbXBvc2luZyA9IHRydWU7XG59XG5mdW5jdGlvbiBvbkNvbXBvc2l0aW9uRW5kKGUpIHtcbiAgY29uc3QgdGFyZ2V0ID0gZS50YXJnZXQ7XG4gIGlmICh0YXJnZXQuY29tcG9zaW5nKSB7XG4gICAgdGFyZ2V0LmNvbXBvc2luZyA9IGZhbHNlO1xuICAgIHRhcmdldC5kaXNwYXRjaEV2ZW50KG5ldyBFdmVudChcImlucHV0XCIpKTtcbiAgfVxufVxuY29uc3QgYXNzaWduS2V5ID0gU3ltYm9sKFwiX2Fzc2lnblwiKTtcbmNvbnN0IHZNb2RlbFRleHQgPSB7XG4gIGNyZWF0ZWQoZWwsIHsgbW9kaWZpZXJzOiB7IGxhenksIHRyaW0sIG51bWJlciB9IH0sIHZub2RlKSB7XG4gICAgZWxbYXNzaWduS2V5XSA9IGdldE1vZGVsQXNzaWduZXIodm5vZGUpO1xuICAgIGNvbnN0IGNhc3RUb051bWJlciA9IG51bWJlciB8fCB2bm9kZS5wcm9wcyAmJiB2bm9kZS5wcm9wcy50eXBlID09PSBcIm51bWJlclwiO1xuICAgIGFkZEV2ZW50TGlzdGVuZXIoZWwsIGxhenkgPyBcImNoYW5nZVwiIDogXCJpbnB1dFwiLCAoZSkgPT4ge1xuICAgICAgaWYgKGUudGFyZ2V0LmNvbXBvc2luZylcbiAgICAgICAgcmV0dXJuO1xuICAgICAgbGV0IGRvbVZhbHVlID0gZWwudmFsdWU7XG4gICAgICBpZiAodHJpbSkge1xuICAgICAgICBkb21WYWx1ZSA9IGRvbVZhbHVlLnRyaW0oKTtcbiAgICAgIH1cbiAgICAgIGlmIChjYXN0VG9OdW1iZXIpIHtcbiAgICAgICAgZG9tVmFsdWUgPSBsb29zZVRvTnVtYmVyKGRvbVZhbHVlKTtcbiAgICAgIH1cbiAgICAgIGVsW2Fzc2lnbktleV0oZG9tVmFsdWUpO1xuICAgIH0pO1xuICAgIGlmICh0cmltKSB7XG4gICAgICBhZGRFdmVudExpc3RlbmVyKGVsLCBcImNoYW5nZVwiLCAoKSA9PiB7XG4gICAgICAgIGVsLnZhbHVlID0gZWwudmFsdWUudHJpbSgpO1xuICAgICAgfSk7XG4gICAgfVxuICAgIGlmICghbGF6eSkge1xuICAgICAgYWRkRXZlbnRMaXN0ZW5lcihlbCwgXCJjb21wb3NpdGlvbnN0YXJ0XCIsIG9uQ29tcG9zaXRpb25TdGFydCk7XG4gICAgICBhZGRFdmVudExpc3RlbmVyKGVsLCBcImNvbXBvc2l0aW9uZW5kXCIsIG9uQ29tcG9zaXRpb25FbmQpO1xuICAgICAgYWRkRXZlbnRMaXN0ZW5lcihlbCwgXCJjaGFuZ2VcIiwgb25Db21wb3NpdGlvbkVuZCk7XG4gICAgfVxuICB9LFxuICAvLyBzZXQgdmFsdWUgb24gbW91bnRlZCBzbyBpdCdzIGFmdGVyIG1pbi9tYXggZm9yIHR5cGU9XCJyYW5nZVwiXG4gIG1vdW50ZWQoZWwsIHsgdmFsdWUgfSkge1xuICAgIGVsLnZhbHVlID0gdmFsdWUgPT0gbnVsbCA/IFwiXCIgOiB2YWx1ZTtcbiAgfSxcbiAgYmVmb3JlVXBkYXRlKGVsLCB7IHZhbHVlLCBtb2RpZmllcnM6IHsgbGF6eSwgdHJpbSwgbnVtYmVyIH0gfSwgdm5vZGUpIHtcbiAgICBlbFthc3NpZ25LZXldID0gZ2V0TW9kZWxBc3NpZ25lcih2bm9kZSk7XG4gICAgaWYgKGVsLmNvbXBvc2luZylcbiAgICAgIHJldHVybjtcbiAgICBjb25zdCBlbFZhbHVlID0gbnVtYmVyIHx8IGVsLnR5cGUgPT09IFwibnVtYmVyXCIgPyBsb29zZVRvTnVtYmVyKGVsLnZhbHVlKSA6IGVsLnZhbHVlO1xuICAgIGNvbnN0IG5ld1ZhbHVlID0gdmFsdWUgPT0gbnVsbCA/IFwiXCIgOiB2YWx1ZTtcbiAgICBpZiAoZWxWYWx1ZSA9PT0gbmV3VmFsdWUpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQgPT09IGVsICYmIGVsLnR5cGUgIT09IFwicmFuZ2VcIikge1xuICAgICAgaWYgKGxhenkpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgaWYgKHRyaW0gJiYgZWwudmFsdWUudHJpbSgpID09PSBuZXdWYWx1ZSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgfVxuICAgIGVsLnZhbHVlID0gbmV3VmFsdWU7XG4gIH1cbn07XG5jb25zdCB2TW9kZWxDaGVja2JveCA9IHtcbiAgLy8gIzQwOTYgYXJyYXkgY2hlY2tib3hlcyBuZWVkIHRvIGJlIGRlZXAgdHJhdmVyc2VkXG4gIGRlZXA6IHRydWUsXG4gIGNyZWF0ZWQoZWwsIF8sIHZub2RlKSB7XG4gICAgZWxbYXNzaWduS2V5XSA9IGdldE1vZGVsQXNzaWduZXIodm5vZGUpO1xuICAgIGFkZEV2ZW50TGlzdGVuZXIoZWwsIFwiY2hhbmdlXCIsICgpID0+IHtcbiAgICAgIGNvbnN0IG1vZGVsVmFsdWUgPSBlbC5fbW9kZWxWYWx1ZTtcbiAgICAgIGNvbnN0IGVsZW1lbnRWYWx1ZSA9IGdldFZhbHVlKGVsKTtcbiAgICAgIGNvbnN0IGNoZWNrZWQgPSBlbC5jaGVja2VkO1xuICAgICAgY29uc3QgYXNzaWduID0gZWxbYXNzaWduS2V5XTtcbiAgICAgIGlmIChpc0FycmF5KG1vZGVsVmFsdWUpKSB7XG4gICAgICAgIGNvbnN0IGluZGV4ID0gbG9vc2VJbmRleE9mKG1vZGVsVmFsdWUsIGVsZW1lbnRWYWx1ZSk7XG4gICAgICAgIGNvbnN0IGZvdW5kID0gaW5kZXggIT09IC0xO1xuICAgICAgICBpZiAoY2hlY2tlZCAmJiAhZm91bmQpIHtcbiAgICAgICAgICBhc3NpZ24obW9kZWxWYWx1ZS5jb25jYXQoZWxlbWVudFZhbHVlKSk7XG4gICAgICAgIH0gZWxzZSBpZiAoIWNoZWNrZWQgJiYgZm91bmQpIHtcbiAgICAgICAgICBjb25zdCBmaWx0ZXJlZCA9IFsuLi5tb2RlbFZhbHVlXTtcbiAgICAgICAgICBmaWx0ZXJlZC5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgICAgIGFzc2lnbihmaWx0ZXJlZCk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoaXNTZXQobW9kZWxWYWx1ZSkpIHtcbiAgICAgICAgY29uc3QgY2xvbmVkID0gbmV3IFNldChtb2RlbFZhbHVlKTtcbiAgICAgICAgaWYgKGNoZWNrZWQpIHtcbiAgICAgICAgICBjbG9uZWQuYWRkKGVsZW1lbnRWYWx1ZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY2xvbmVkLmRlbGV0ZShlbGVtZW50VmFsdWUpO1xuICAgICAgICB9XG4gICAgICAgIGFzc2lnbihjbG9uZWQpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgYXNzaWduKGdldENoZWNrYm94VmFsdWUoZWwsIGNoZWNrZWQpKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfSxcbiAgLy8gc2V0IGluaXRpYWwgY2hlY2tlZCBvbiBtb3VudCB0byB3YWl0IGZvciB0cnVlLXZhbHVlL2ZhbHNlLXZhbHVlXG4gIG1vdW50ZWQ6IHNldENoZWNrZWQsXG4gIGJlZm9yZVVwZGF0ZShlbCwgYmluZGluZywgdm5vZGUpIHtcbiAgICBlbFthc3NpZ25LZXldID0gZ2V0TW9kZWxBc3NpZ25lcih2bm9kZSk7XG4gICAgc2V0Q2hlY2tlZChlbCwgYmluZGluZywgdm5vZGUpO1xuICB9XG59O1xuZnVuY3Rpb24gc2V0Q2hlY2tlZChlbCwgeyB2YWx1ZSwgb2xkVmFsdWUgfSwgdm5vZGUpIHtcbiAgZWwuX21vZGVsVmFsdWUgPSB2YWx1ZTtcbiAgaWYgKGlzQXJyYXkodmFsdWUpKSB7XG4gICAgZWwuY2hlY2tlZCA9IGxvb3NlSW5kZXhPZih2YWx1ZSwgdm5vZGUucHJvcHMudmFsdWUpID4gLTE7XG4gIH0gZWxzZSBpZiAoaXNTZXQodmFsdWUpKSB7XG4gICAgZWwuY2hlY2tlZCA9IHZhbHVlLmhhcyh2bm9kZS5wcm9wcy52YWx1ZSk7XG4gIH0gZWxzZSBpZiAodmFsdWUgIT09IG9sZFZhbHVlKSB7XG4gICAgZWwuY2hlY2tlZCA9IGxvb3NlRXF1YWwodmFsdWUsIGdldENoZWNrYm94VmFsdWUoZWwsIHRydWUpKTtcbiAgfVxufVxuY29uc3Qgdk1vZGVsUmFkaW8gPSB7XG4gIGNyZWF0ZWQoZWwsIHsgdmFsdWUgfSwgdm5vZGUpIHtcbiAgICBlbC5jaGVja2VkID0gbG9vc2VFcXVhbCh2YWx1ZSwgdm5vZGUucHJvcHMudmFsdWUpO1xuICAgIGVsW2Fzc2lnbktleV0gPSBnZXRNb2RlbEFzc2lnbmVyKHZub2RlKTtcbiAgICBhZGRFdmVudExpc3RlbmVyKGVsLCBcImNoYW5nZVwiLCAoKSA9PiB7XG4gICAgICBlbFthc3NpZ25LZXldKGdldFZhbHVlKGVsKSk7XG4gICAgfSk7XG4gIH0sXG4gIGJlZm9yZVVwZGF0ZShlbCwgeyB2YWx1ZSwgb2xkVmFsdWUgfSwgdm5vZGUpIHtcbiAgICBlbFthc3NpZ25LZXldID0gZ2V0TW9kZWxBc3NpZ25lcih2bm9kZSk7XG4gICAgaWYgKHZhbHVlICE9PSBvbGRWYWx1ZSkge1xuICAgICAgZWwuY2hlY2tlZCA9IGxvb3NlRXF1YWwodmFsdWUsIHZub2RlLnByb3BzLnZhbHVlKTtcbiAgICB9XG4gIH1cbn07XG5jb25zdCB2TW9kZWxTZWxlY3QgPSB7XG4gIC8vIDxzZWxlY3QgbXVsdGlwbGU+IHZhbHVlIG5lZWQgdG8gYmUgZGVlcCB0cmF2ZXJzZWRcbiAgZGVlcDogdHJ1ZSxcbiAgY3JlYXRlZChlbCwgeyB2YWx1ZSwgbW9kaWZpZXJzOiB7IG51bWJlciB9IH0sIHZub2RlKSB7XG4gICAgY29uc3QgaXNTZXRNb2RlbCA9IGlzU2V0KHZhbHVlKTtcbiAgICBhZGRFdmVudExpc3RlbmVyKGVsLCBcImNoYW5nZVwiLCAoKSA9PiB7XG4gICAgICBjb25zdCBzZWxlY3RlZFZhbCA9IEFycmF5LnByb3RvdHlwZS5maWx0ZXIuY2FsbChlbC5vcHRpb25zLCAobykgPT4gby5zZWxlY3RlZCkubWFwKFxuICAgICAgICAobykgPT4gbnVtYmVyID8gbG9vc2VUb051bWJlcihnZXRWYWx1ZShvKSkgOiBnZXRWYWx1ZShvKVxuICAgICAgKTtcbiAgICAgIGVsW2Fzc2lnbktleV0oXG4gICAgICAgIGVsLm11bHRpcGxlID8gaXNTZXRNb2RlbCA/IG5ldyBTZXQoc2VsZWN0ZWRWYWwpIDogc2VsZWN0ZWRWYWwgOiBzZWxlY3RlZFZhbFswXVxuICAgICAgKTtcbiAgICAgIGVsLl9hc3NpZ25pbmcgPSB0cnVlO1xuICAgICAgbmV4dFRpY2soKCkgPT4ge1xuICAgICAgICBlbC5fYXNzaWduaW5nID0gZmFsc2U7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgICBlbFthc3NpZ25LZXldID0gZ2V0TW9kZWxBc3NpZ25lcih2bm9kZSk7XG4gIH0sXG4gIC8vIHNldCB2YWx1ZSBpbiBtb3VudGVkICYgdXBkYXRlZCBiZWNhdXNlIDxzZWxlY3Q+IHJlbGllcyBvbiBpdHMgY2hpbGRyZW5cbiAgLy8gPG9wdGlvbj5zLlxuICBtb3VudGVkKGVsLCB7IHZhbHVlLCBtb2RpZmllcnM6IHsgbnVtYmVyIH0gfSkge1xuICAgIHNldFNlbGVjdGVkKGVsLCB2YWx1ZSwgbnVtYmVyKTtcbiAgfSxcbiAgYmVmb3JlVXBkYXRlKGVsLCBfYmluZGluZywgdm5vZGUpIHtcbiAgICBlbFthc3NpZ25LZXldID0gZ2V0TW9kZWxBc3NpZ25lcih2bm9kZSk7XG4gIH0sXG4gIHVwZGF0ZWQoZWwsIHsgdmFsdWUsIG1vZGlmaWVyczogeyBudW1iZXIgfSB9KSB7XG4gICAgaWYgKCFlbC5fYXNzaWduaW5nKSB7XG4gICAgICBzZXRTZWxlY3RlZChlbCwgdmFsdWUsIG51bWJlcik7XG4gICAgfVxuICB9XG59O1xuZnVuY3Rpb24gc2V0U2VsZWN0ZWQoZWwsIHZhbHVlLCBudW1iZXIpIHtcbiAgY29uc3QgaXNNdWx0aXBsZSA9IGVsLm11bHRpcGxlO1xuICBjb25zdCBpc0FycmF5VmFsdWUgPSBpc0FycmF5KHZhbHVlKTtcbiAgaWYgKGlzTXVsdGlwbGUgJiYgIWlzQXJyYXlWYWx1ZSAmJiAhaXNTZXQodmFsdWUpKSB7XG4gICAgISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSAmJiB3YXJuKFxuICAgICAgYDxzZWxlY3QgbXVsdGlwbGUgdi1tb2RlbD4gZXhwZWN0cyBhbiBBcnJheSBvciBTZXQgdmFsdWUgZm9yIGl0cyBiaW5kaW5nLCBidXQgZ290ICR7T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHZhbHVlKS5zbGljZSg4LCAtMSl9LmBcbiAgICApO1xuICAgIHJldHVybjtcbiAgfVxuICBmb3IgKGxldCBpID0gMCwgbCA9IGVsLm9wdGlvbnMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgY29uc3Qgb3B0aW9uID0gZWwub3B0aW9uc1tpXTtcbiAgICBjb25zdCBvcHRpb25WYWx1ZSA9IGdldFZhbHVlKG9wdGlvbik7XG4gICAgaWYgKGlzTXVsdGlwbGUpIHtcbiAgICAgIGlmIChpc0FycmF5VmFsdWUpIHtcbiAgICAgICAgY29uc3Qgb3B0aW9uVHlwZSA9IHR5cGVvZiBvcHRpb25WYWx1ZTtcbiAgICAgICAgaWYgKG9wdGlvblR5cGUgPT09IFwic3RyaW5nXCIgfHwgb3B0aW9uVHlwZSA9PT0gXCJudW1iZXJcIikge1xuICAgICAgICAgIG9wdGlvbi5zZWxlY3RlZCA9IHZhbHVlLmluY2x1ZGVzKFxuICAgICAgICAgICAgbnVtYmVyID8gbG9vc2VUb051bWJlcihvcHRpb25WYWx1ZSkgOiBvcHRpb25WYWx1ZVxuICAgICAgICAgICk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgb3B0aW9uLnNlbGVjdGVkID0gbG9vc2VJbmRleE9mKHZhbHVlLCBvcHRpb25WYWx1ZSkgPiAtMTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgb3B0aW9uLnNlbGVjdGVkID0gdmFsdWUuaGFzKG9wdGlvblZhbHVlKTtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKGxvb3NlRXF1YWwoZ2V0VmFsdWUob3B0aW9uKSwgdmFsdWUpKSB7XG4gICAgICBpZiAoZWwuc2VsZWN0ZWRJbmRleCAhPT0gaSlcbiAgICAgICAgZWwuc2VsZWN0ZWRJbmRleCA9IGk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICB9XG4gIGlmICghaXNNdWx0aXBsZSAmJiBlbC5zZWxlY3RlZEluZGV4ICE9PSAtMSkge1xuICAgIGVsLnNlbGVjdGVkSW5kZXggPSAtMTtcbiAgfVxufVxuZnVuY3Rpb24gZ2V0VmFsdWUoZWwpIHtcbiAgcmV0dXJuIFwiX3ZhbHVlXCIgaW4gZWwgPyBlbC5fdmFsdWUgOiBlbC52YWx1ZTtcbn1cbmZ1bmN0aW9uIGdldENoZWNrYm94VmFsdWUoZWwsIGNoZWNrZWQpIHtcbiAgY29uc3Qga2V5ID0gY2hlY2tlZCA/IFwiX3RydWVWYWx1ZVwiIDogXCJfZmFsc2VWYWx1ZVwiO1xuICByZXR1cm4ga2V5IGluIGVsID8gZWxba2V5XSA6IGNoZWNrZWQ7XG59XG5jb25zdCB2TW9kZWxEeW5hbWljID0ge1xuICBjcmVhdGVkKGVsLCBiaW5kaW5nLCB2bm9kZSkge1xuICAgIGNhbGxNb2RlbEhvb2soZWwsIGJpbmRpbmcsIHZub2RlLCBudWxsLCBcImNyZWF0ZWRcIik7XG4gIH0sXG4gIG1vdW50ZWQoZWwsIGJpbmRpbmcsIHZub2RlKSB7XG4gICAgY2FsbE1vZGVsSG9vayhlbCwgYmluZGluZywgdm5vZGUsIG51bGwsIFwibW91bnRlZFwiKTtcbiAgfSxcbiAgYmVmb3JlVXBkYXRlKGVsLCBiaW5kaW5nLCB2bm9kZSwgcHJldlZOb2RlKSB7XG4gICAgY2FsbE1vZGVsSG9vayhlbCwgYmluZGluZywgdm5vZGUsIHByZXZWTm9kZSwgXCJiZWZvcmVVcGRhdGVcIik7XG4gIH0sXG4gIHVwZGF0ZWQoZWwsIGJpbmRpbmcsIHZub2RlLCBwcmV2Vk5vZGUpIHtcbiAgICBjYWxsTW9kZWxIb29rKGVsLCBiaW5kaW5nLCB2bm9kZSwgcHJldlZOb2RlLCBcInVwZGF0ZWRcIik7XG4gIH1cbn07XG5mdW5jdGlvbiByZXNvbHZlRHluYW1pY01vZGVsKHRhZ05hbWUsIHR5cGUpIHtcbiAgc3dpdGNoICh0YWdOYW1lKSB7XG4gICAgY2FzZSBcIlNFTEVDVFwiOlxuICAgICAgcmV0dXJuIHZNb2RlbFNlbGVjdDtcbiAgICBjYXNlIFwiVEVYVEFSRUFcIjpcbiAgICAgIHJldHVybiB2TW9kZWxUZXh0O1xuICAgIGRlZmF1bHQ6XG4gICAgICBzd2l0Y2ggKHR5cGUpIHtcbiAgICAgICAgY2FzZSBcImNoZWNrYm94XCI6XG4gICAgICAgICAgcmV0dXJuIHZNb2RlbENoZWNrYm94O1xuICAgICAgICBjYXNlIFwicmFkaW9cIjpcbiAgICAgICAgICByZXR1cm4gdk1vZGVsUmFkaW87XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgcmV0dXJuIHZNb2RlbFRleHQ7XG4gICAgICB9XG4gIH1cbn1cbmZ1bmN0aW9uIGNhbGxNb2RlbEhvb2soZWwsIGJpbmRpbmcsIHZub2RlLCBwcmV2Vk5vZGUsIGhvb2spIHtcbiAgY29uc3QgbW9kZWxUb1VzZSA9IHJlc29sdmVEeW5hbWljTW9kZWwoXG4gICAgZWwudGFnTmFtZSxcbiAgICB2bm9kZS5wcm9wcyAmJiB2bm9kZS5wcm9wcy50eXBlXG4gICk7XG4gIGNvbnN0IGZuID0gbW9kZWxUb1VzZVtob29rXTtcbiAgZm4gJiYgZm4oZWwsIGJpbmRpbmcsIHZub2RlLCBwcmV2Vk5vZGUpO1xufVxuZnVuY3Rpb24gaW5pdFZNb2RlbEZvclNTUigpIHtcbiAgdk1vZGVsVGV4dC5nZXRTU1JQcm9wcyA9ICh7IHZhbHVlIH0pID0+ICh7IHZhbHVlIH0pO1xuICB2TW9kZWxSYWRpby5nZXRTU1JQcm9wcyA9ICh7IHZhbHVlIH0sIHZub2RlKSA9PiB7XG4gICAgaWYgKHZub2RlLnByb3BzICYmIGxvb3NlRXF1YWwodm5vZGUucHJvcHMudmFsdWUsIHZhbHVlKSkge1xuICAgICAgcmV0dXJuIHsgY2hlY2tlZDogdHJ1ZSB9O1xuICAgIH1cbiAgfTtcbiAgdk1vZGVsQ2hlY2tib3guZ2V0U1NSUHJvcHMgPSAoeyB2YWx1ZSB9LCB2bm9kZSkgPT4ge1xuICAgIGlmIChpc0FycmF5KHZhbHVlKSkge1xuICAgICAgaWYgKHZub2RlLnByb3BzICYmIGxvb3NlSW5kZXhPZih2YWx1ZSwgdm5vZGUucHJvcHMudmFsdWUpID4gLTEpIHtcbiAgICAgICAgcmV0dXJuIHsgY2hlY2tlZDogdHJ1ZSB9O1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoaXNTZXQodmFsdWUpKSB7XG4gICAgICBpZiAodm5vZGUucHJvcHMgJiYgdmFsdWUuaGFzKHZub2RlLnByb3BzLnZhbHVlKSkge1xuICAgICAgICByZXR1cm4geyBjaGVja2VkOiB0cnVlIH07XG4gICAgICB9XG4gICAgfSBlbHNlIGlmICh2YWx1ZSkge1xuICAgICAgcmV0dXJuIHsgY2hlY2tlZDogdHJ1ZSB9O1xuICAgIH1cbiAgfTtcbiAgdk1vZGVsRHluYW1pYy5nZXRTU1JQcm9wcyA9IChiaW5kaW5nLCB2bm9kZSkgPT4ge1xuICAgIGlmICh0eXBlb2Ygdm5vZGUudHlwZSAhPT0gXCJzdHJpbmdcIikge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBtb2RlbFRvVXNlID0gcmVzb2x2ZUR5bmFtaWNNb2RlbChcbiAgICAgIC8vIHJlc29sdmVEeW5hbWljTW9kZWwgZXhwZWN0cyBhbiB1cHBlcmNhc2UgdGFnIG5hbWUsIGJ1dCB2bm9kZS50eXBlIGlzIGxvd2VyY2FzZVxuICAgICAgdm5vZGUudHlwZS50b1VwcGVyQ2FzZSgpLFxuICAgICAgdm5vZGUucHJvcHMgJiYgdm5vZGUucHJvcHMudHlwZVxuICAgICk7XG4gICAgaWYgKG1vZGVsVG9Vc2UuZ2V0U1NSUHJvcHMpIHtcbiAgICAgIHJldHVybiBtb2RlbFRvVXNlLmdldFNTUlByb3BzKGJpbmRpbmcsIHZub2RlKTtcbiAgICB9XG4gIH07XG59XG5cbmNvbnN0IHN5c3RlbU1vZGlmaWVycyA9IFtcImN0cmxcIiwgXCJzaGlmdFwiLCBcImFsdFwiLCBcIm1ldGFcIl07XG5jb25zdCBtb2RpZmllckd1YXJkcyA9IHtcbiAgc3RvcDogKGUpID0+IGUuc3RvcFByb3BhZ2F0aW9uKCksXG4gIHByZXZlbnQ6IChlKSA9PiBlLnByZXZlbnREZWZhdWx0KCksXG4gIHNlbGY6IChlKSA9PiBlLnRhcmdldCAhPT0gZS5jdXJyZW50VGFyZ2V0LFxuICBjdHJsOiAoZSkgPT4gIWUuY3RybEtleSxcbiAgc2hpZnQ6IChlKSA9PiAhZS5zaGlmdEtleSxcbiAgYWx0OiAoZSkgPT4gIWUuYWx0S2V5LFxuICBtZXRhOiAoZSkgPT4gIWUubWV0YUtleSxcbiAgbGVmdDogKGUpID0+IFwiYnV0dG9uXCIgaW4gZSAmJiBlLmJ1dHRvbiAhPT0gMCxcbiAgbWlkZGxlOiAoZSkgPT4gXCJidXR0b25cIiBpbiBlICYmIGUuYnV0dG9uICE9PSAxLFxuICByaWdodDogKGUpID0+IFwiYnV0dG9uXCIgaW4gZSAmJiBlLmJ1dHRvbiAhPT0gMixcbiAgZXhhY3Q6IChlLCBtb2RpZmllcnMpID0+IHN5c3RlbU1vZGlmaWVycy5zb21lKChtKSA9PiBlW2Ake219S2V5YF0gJiYgIW1vZGlmaWVycy5pbmNsdWRlcyhtKSlcbn07XG5jb25zdCB3aXRoTW9kaWZpZXJzID0gKGZuLCBtb2RpZmllcnMpID0+IHtcbiAgY29uc3QgY2FjaGUgPSBmbi5fd2l0aE1vZHMgfHwgKGZuLl93aXRoTW9kcyA9IHt9KTtcbiAgY29uc3QgY2FjaGVLZXkgPSBtb2RpZmllcnMuam9pbihcIi5cIik7XG4gIHJldHVybiBjYWNoZVtjYWNoZUtleV0gfHwgKGNhY2hlW2NhY2hlS2V5XSA9IChldmVudCwgLi4uYXJncykgPT4ge1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbW9kaWZpZXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBjb25zdCBndWFyZCA9IG1vZGlmaWVyR3VhcmRzW21vZGlmaWVyc1tpXV07XG4gICAgICBpZiAoZ3VhcmQgJiYgZ3VhcmQoZXZlbnQsIG1vZGlmaWVycykpXG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgcmV0dXJuIGZuKGV2ZW50LCAuLi5hcmdzKTtcbiAgfSk7XG59O1xuY29uc3Qga2V5TmFtZXMgPSB7XG4gIGVzYzogXCJlc2NhcGVcIixcbiAgc3BhY2U6IFwiIFwiLFxuICB1cDogXCJhcnJvdy11cFwiLFxuICBsZWZ0OiBcImFycm93LWxlZnRcIixcbiAgcmlnaHQ6IFwiYXJyb3ctcmlnaHRcIixcbiAgZG93bjogXCJhcnJvdy1kb3duXCIsXG4gIGRlbGV0ZTogXCJiYWNrc3BhY2VcIlxufTtcbmNvbnN0IHdpdGhLZXlzID0gKGZuLCBtb2RpZmllcnMpID0+IHtcbiAgY29uc3QgY2FjaGUgPSBmbi5fd2l0aEtleXMgfHwgKGZuLl93aXRoS2V5cyA9IHt9KTtcbiAgY29uc3QgY2FjaGVLZXkgPSBtb2RpZmllcnMuam9pbihcIi5cIik7XG4gIHJldHVybiBjYWNoZVtjYWNoZUtleV0gfHwgKGNhY2hlW2NhY2hlS2V5XSA9IChldmVudCkgPT4ge1xuICAgIGlmICghKFwia2V5XCIgaW4gZXZlbnQpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IGV2ZW50S2V5ID0gaHlwaGVuYXRlKGV2ZW50LmtleSk7XG4gICAgaWYgKG1vZGlmaWVycy5zb21lKChrKSA9PiBrID09PSBldmVudEtleSB8fCBrZXlOYW1lc1trXSA9PT0gZXZlbnRLZXkpKSB7XG4gICAgICByZXR1cm4gZm4oZXZlbnQpO1xuICAgIH1cbiAgfSk7XG59O1xuXG5jb25zdCByZW5kZXJlck9wdGlvbnMgPSAvKiBAX19QVVJFX18gKi8gZXh0ZW5kKHsgcGF0Y2hQcm9wIH0sIG5vZGVPcHMpO1xubGV0IHJlbmRlcmVyO1xubGV0IGVuYWJsZWRIeWRyYXRpb24gPSBmYWxzZTtcbmZ1bmN0aW9uIGVuc3VyZVJlbmRlcmVyKCkge1xuICByZXR1cm4gcmVuZGVyZXIgfHwgKHJlbmRlcmVyID0gY3JlYXRlUmVuZGVyZXIocmVuZGVyZXJPcHRpb25zKSk7XG59XG5mdW5jdGlvbiBlbnN1cmVIeWRyYXRpb25SZW5kZXJlcigpIHtcbiAgcmVuZGVyZXIgPSBlbmFibGVkSHlkcmF0aW9uID8gcmVuZGVyZXIgOiBjcmVhdGVIeWRyYXRpb25SZW5kZXJlcihyZW5kZXJlck9wdGlvbnMpO1xuICBlbmFibGVkSHlkcmF0aW9uID0gdHJ1ZTtcbiAgcmV0dXJuIHJlbmRlcmVyO1xufVxuY29uc3QgcmVuZGVyID0gKC4uLmFyZ3MpID0+IHtcbiAgZW5zdXJlUmVuZGVyZXIoKS5yZW5kZXIoLi4uYXJncyk7XG59O1xuY29uc3QgaHlkcmF0ZSA9ICguLi5hcmdzKSA9PiB7XG4gIGVuc3VyZUh5ZHJhdGlvblJlbmRlcmVyKCkuaHlkcmF0ZSguLi5hcmdzKTtcbn07XG5jb25zdCBjcmVhdGVBcHAgPSAoLi4uYXJncykgPT4ge1xuICBjb25zdCBhcHAgPSBlbnN1cmVSZW5kZXJlcigpLmNyZWF0ZUFwcCguLi5hcmdzKTtcbiAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikpIHtcbiAgICBpbmplY3ROYXRpdmVUYWdDaGVjayhhcHApO1xuICAgIGluamVjdENvbXBpbGVyT3B0aW9uc0NoZWNrKGFwcCk7XG4gIH1cbiAgY29uc3QgeyBtb3VudCB9ID0gYXBwO1xuICBhcHAubW91bnQgPSAoY29udGFpbmVyT3JTZWxlY3RvcikgPT4ge1xuICAgIGNvbnN0IGNvbnRhaW5lciA9IG5vcm1hbGl6ZUNvbnRhaW5lcihjb250YWluZXJPclNlbGVjdG9yKTtcbiAgICBpZiAoIWNvbnRhaW5lcilcbiAgICAgIHJldHVybjtcbiAgICBjb25zdCBjb21wb25lbnQgPSBhcHAuX2NvbXBvbmVudDtcbiAgICBpZiAoIWlzRnVuY3Rpb24oY29tcG9uZW50KSAmJiAhY29tcG9uZW50LnJlbmRlciAmJiAhY29tcG9uZW50LnRlbXBsYXRlKSB7XG4gICAgICBjb21wb25lbnQudGVtcGxhdGUgPSBjb250YWluZXIuaW5uZXJIVE1MO1xuICAgIH1cbiAgICBjb250YWluZXIuaW5uZXJIVE1MID0gXCJcIjtcbiAgICBjb25zdCBwcm94eSA9IG1vdW50KGNvbnRhaW5lciwgZmFsc2UsIHJlc29sdmVSb290TmFtZXNwYWNlKGNvbnRhaW5lcikpO1xuICAgIGlmIChjb250YWluZXIgaW5zdGFuY2VvZiBFbGVtZW50KSB7XG4gICAgICBjb250YWluZXIucmVtb3ZlQXR0cmlidXRlKFwidi1jbG9ha1wiKTtcbiAgICAgIGNvbnRhaW5lci5zZXRBdHRyaWJ1dGUoXCJkYXRhLXYtYXBwXCIsIFwiXCIpO1xuICAgIH1cbiAgICByZXR1cm4gcHJveHk7XG4gIH07XG4gIHJldHVybiBhcHA7XG59O1xuY29uc3QgY3JlYXRlU1NSQXBwID0gKC4uLmFyZ3MpID0+IHtcbiAgY29uc3QgYXBwID0gZW5zdXJlSHlkcmF0aW9uUmVuZGVyZXIoKS5jcmVhdGVBcHAoLi4uYXJncyk7XG4gIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpKSB7XG4gICAgaW5qZWN0TmF0aXZlVGFnQ2hlY2soYXBwKTtcbiAgICBpbmplY3RDb21waWxlck9wdGlvbnNDaGVjayhhcHApO1xuICB9XG4gIGNvbnN0IHsgbW91bnQgfSA9IGFwcDtcbiAgYXBwLm1vdW50ID0gKGNvbnRhaW5lck9yU2VsZWN0b3IpID0+IHtcbiAgICBjb25zdCBjb250YWluZXIgPSBub3JtYWxpemVDb250YWluZXIoY29udGFpbmVyT3JTZWxlY3Rvcik7XG4gICAgaWYgKGNvbnRhaW5lcikge1xuICAgICAgcmV0dXJuIG1vdW50KGNvbnRhaW5lciwgdHJ1ZSwgcmVzb2x2ZVJvb3ROYW1lc3BhY2UoY29udGFpbmVyKSk7XG4gICAgfVxuICB9O1xuICByZXR1cm4gYXBwO1xufTtcbmZ1bmN0aW9uIHJlc29sdmVSb290TmFtZXNwYWNlKGNvbnRhaW5lcikge1xuICBpZiAoY29udGFpbmVyIGluc3RhbmNlb2YgU1ZHRWxlbWVudCkge1xuICAgIHJldHVybiBcInN2Z1wiO1xuICB9XG4gIGlmICh0eXBlb2YgTWF0aE1MRWxlbWVudCA9PT0gXCJmdW5jdGlvblwiICYmIGNvbnRhaW5lciBpbnN0YW5jZW9mIE1hdGhNTEVsZW1lbnQpIHtcbiAgICByZXR1cm4gXCJtYXRobWxcIjtcbiAgfVxufVxuZnVuY3Rpb24gaW5qZWN0TmF0aXZlVGFnQ2hlY2soYXBwKSB7XG4gIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShhcHAuY29uZmlnLCBcImlzTmF0aXZlVGFnXCIsIHtcbiAgICB2YWx1ZTogKHRhZykgPT4gaXNIVE1MVGFnKHRhZykgfHwgaXNTVkdUYWcodGFnKSB8fCBpc01hdGhNTFRhZyh0YWcpLFxuICAgIHdyaXRhYmxlOiBmYWxzZVxuICB9KTtcbn1cbmZ1bmN0aW9uIGluamVjdENvbXBpbGVyT3B0aW9uc0NoZWNrKGFwcCkge1xuICBpZiAoaXNSdW50aW1lT25seSgpKSB7XG4gICAgY29uc3QgaXNDdXN0b21FbGVtZW50ID0gYXBwLmNvbmZpZy5pc0N1c3RvbUVsZW1lbnQ7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGFwcC5jb25maWcsIFwiaXNDdXN0b21FbGVtZW50XCIsIHtcbiAgICAgIGdldCgpIHtcbiAgICAgICAgcmV0dXJuIGlzQ3VzdG9tRWxlbWVudDtcbiAgICAgIH0sXG4gICAgICBzZXQoKSB7XG4gICAgICAgIHdhcm4oXG4gICAgICAgICAgYFRoZSBcXGBpc0N1c3RvbUVsZW1lbnRcXGAgY29uZmlnIG9wdGlvbiBpcyBkZXByZWNhdGVkLiBVc2UgXFxgY29tcGlsZXJPcHRpb25zLmlzQ3VzdG9tRWxlbWVudFxcYCBpbnN0ZWFkLmBcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICBjb25zdCBjb21waWxlck9wdGlvbnMgPSBhcHAuY29uZmlnLmNvbXBpbGVyT3B0aW9ucztcbiAgICBjb25zdCBtc2cgPSBgVGhlIFxcYGNvbXBpbGVyT3B0aW9uc1xcYCBjb25maWcgb3B0aW9uIGlzIG9ubHkgcmVzcGVjdGVkIHdoZW4gdXNpbmcgYSBidWlsZCBvZiBWdWUuanMgdGhhdCBpbmNsdWRlcyB0aGUgcnVudGltZSBjb21waWxlciAoYWthIFwiZnVsbCBidWlsZFwiKS4gU2luY2UgeW91IGFyZSB1c2luZyB0aGUgcnVudGltZS1vbmx5IGJ1aWxkLCBcXGBjb21waWxlck9wdGlvbnNcXGAgbXVzdCBiZSBwYXNzZWQgdG8gXFxgQHZ1ZS9jb21waWxlci1kb21cXGAgaW4gdGhlIGJ1aWxkIHNldHVwIGluc3RlYWQuXG4tIEZvciB2dWUtbG9hZGVyOiBwYXNzIGl0IHZpYSB2dWUtbG9hZGVyJ3MgXFxgY29tcGlsZXJPcHRpb25zXFxgIGxvYWRlciBvcHRpb24uXG4tIEZvciB2dWUtY2xpOiBzZWUgaHR0cHM6Ly9jbGkudnVlanMub3JnL2d1aWRlL3dlYnBhY2suaHRtbCNtb2RpZnlpbmctb3B0aW9ucy1vZi1hLWxvYWRlclxuLSBGb3Igdml0ZTogcGFzcyBpdCB2aWEgQHZpdGVqcy9wbHVnaW4tdnVlIG9wdGlvbnMuIFNlZSBodHRwczovL2dpdGh1Yi5jb20vdml0ZWpzL3ZpdGUtcGx1Z2luLXZ1ZS90cmVlL21haW4vcGFja2FnZXMvcGx1Z2luLXZ1ZSNleGFtcGxlLWZvci1wYXNzaW5nLW9wdGlvbnMtdG8tdnVlY29tcGlsZXItc2ZjYDtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoYXBwLmNvbmZpZywgXCJjb21waWxlck9wdGlvbnNcIiwge1xuICAgICAgZ2V0KCkge1xuICAgICAgICB3YXJuKG1zZyk7XG4gICAgICAgIHJldHVybiBjb21waWxlck9wdGlvbnM7XG4gICAgICB9LFxuICAgICAgc2V0KCkge1xuICAgICAgICB3YXJuKG1zZyk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cbn1cbmZ1bmN0aW9uIG5vcm1hbGl6ZUNvbnRhaW5lcihjb250YWluZXIpIHtcbiAgaWYgKGlzU3RyaW5nKGNvbnRhaW5lcikpIHtcbiAgICBjb25zdCByZXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGNvbnRhaW5lcik7XG4gICAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgJiYgIXJlcykge1xuICAgICAgd2FybihcbiAgICAgICAgYEZhaWxlZCB0byBtb3VudCBhcHA6IG1vdW50IHRhcmdldCBzZWxlY3RvciBcIiR7Y29udGFpbmVyfVwiIHJldHVybmVkIG51bGwuYFxuICAgICAgKTtcbiAgICB9XG4gICAgcmV0dXJuIHJlcztcbiAgfVxuICBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSAmJiB3aW5kb3cuU2hhZG93Um9vdCAmJiBjb250YWluZXIgaW5zdGFuY2VvZiB3aW5kb3cuU2hhZG93Um9vdCAmJiBjb250YWluZXIubW9kZSA9PT0gXCJjbG9zZWRcIikge1xuICAgIHdhcm4oXG4gICAgICBgbW91bnRpbmcgb24gYSBTaGFkb3dSb290IHdpdGggXFxge21vZGU6IFwiY2xvc2VkXCJ9XFxgIG1heSBsZWFkIHRvIHVucHJlZGljdGFibGUgYnVnc2BcbiAgICApO1xuICB9XG4gIHJldHVybiBjb250YWluZXI7XG59XG5sZXQgc3NyRGlyZWN0aXZlSW5pdGlhbGl6ZWQgPSBmYWxzZTtcbmNvbnN0IGluaXREaXJlY3RpdmVzRm9yU1NSID0gKCkgPT4ge1xuICBpZiAoIXNzckRpcmVjdGl2ZUluaXRpYWxpemVkKSB7XG4gICAgc3NyRGlyZWN0aXZlSW5pdGlhbGl6ZWQgPSB0cnVlO1xuICAgIGluaXRWTW9kZWxGb3JTU1IoKTtcbiAgICBpbml0VlNob3dGb3JTU1IoKTtcbiAgfVxufSA7XG5cbmV4cG9ydCB7IFRyYW5zaXRpb24sIFRyYW5zaXRpb25Hcm91cCwgVnVlRWxlbWVudCwgY3JlYXRlQXBwLCBjcmVhdGVTU1JBcHAsIGRlZmluZUN1c3RvbUVsZW1lbnQsIGRlZmluZVNTUkN1c3RvbUVsZW1lbnQsIGh5ZHJhdGUsIGluaXREaXJlY3RpdmVzRm9yU1NSLCByZW5kZXIsIHVzZUNzc01vZHVsZSwgdXNlQ3NzVmFycywgdk1vZGVsQ2hlY2tib3gsIHZNb2RlbER5bmFtaWMsIHZNb2RlbFJhZGlvLCB2TW9kZWxTZWxlY3QsIHZNb2RlbFRleHQsIHZTaG93LCB3aXRoS2V5cywgd2l0aE1vZGlmaWVycyB9O1xuIiwiZXhwb3J0IGNsYXNzIFVzZXIge1xyXG4gICAgY29uc3RydWN0b3IobWVzc2FnZXMsIGRvbWFpbl9vcmlnaW4pIHtcclxuICAgICAgICB0aGlzLmRvbWFpbl9vcmlnaW4gPSBkb21haW5fb3JpZ2luXHJcbiAgICAgICAgdGhpcy5tZXNzYWdlcyA9IG1lc3NhZ2VzO1xyXG4gICAgICAgIHRoaXMubG9naW5fZW1haWwgPSBcIlwiO1xyXG4gICAgICAgIHRoaXMubG9naW5fcGFzc3dvcmQgPSBcIlwiO1xyXG4gICAgICAgIHRoaXMudXNlciA9IHt9O1xyXG4gICAgICAgIHRoaXMucGFzc3dvcmRfYXV0aG9yaXNlZCA9IGZhbHNlXHJcbiAgICAgICAgdGhpcy5tZmFfYXV0aG9yaXNlZCA9IGZhbHNlXHJcbiAgICAgICAgdGhpcy5sb2dnZWRfaW4gPSBmYWxzZTtcclxuICAgICAgICB0aGlzLm1mYV9zZWNyZXRfY29uZmlybWVkID0gZmFsc2VcclxuICAgICAgICB0aGlzLm1mYV9xcl9jb2RlX2Jhc2U2NCA9IFtdXHJcbiAgICAgICAgdGhpcy5lbWFpbCA9IFwiXCJcclxuICAgICAgICB0aGlzLm5hbWUgPSBcIlwiXHJcbiAgICAgICAgdGhpcy5yb2xlX25hbWUgPSBcIlwiXHJcbiAgICAgICAgdGhpcy5tZmFfYXV0aGVudGljYXRvcl9jb2RlID0gXCJcIlxyXG4gICAgICAgIHRoaXMuc3RhdHVzID0gXCJcIjtcclxuICAgICAgICB0aGlzLmludmFsaWRfdG9rZW4gPSBmYWxzZTtcclxuICAgICAgICB0aGlzLnNlc3Npb25fand0ID0gXCJcIjtcclxuICAgIH1cclxuXHJcbiAgICBnZXRfbWZhX2p3dF9mcm9tX2xvY2FsX3N0b3JhZ2UoZW1haWwpIHtcclxuICAgICAgICByZXR1cm4gbG9jYWxTdG9yYWdlLmdldEl0ZW0oXCJtZmFfand0X1wiICsgZW1haWwpXHJcbiAgICB9XHJcblxyXG4gICAgZ2V0X2lwX2FkZHJlc3MoKSB7XHJcbiAgICAgICAgY29uc3QgdXJsID0gXCJodHRwczovL2FwaS5pcGlmeS5vcmc/Zm9ybWF0PWpzb25cIlxyXG4gICAgICAgIGZldGNoKHVybClcclxuICAgICAgICAgICAgLnRoZW4ocmVzcG9uc2UgPT4gcmVzcG9uc2UuanNvbigpKVxyXG4gICAgICAgICAgICAudGhlbihhcGlfcmVzdWx0ID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMuaXBfYWRkcmVzcyA9IGFwaV9yZXN1bHQuaXBcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLmNhdGNoKGVycm9yID0+IHtcclxuICAgICAgICAgICAgICAgIC8vIFVuYWJsZSB0byBnZXQgaXAgYWRkcmVzcyBmcm9tIGFwaSwgc2V0IGlwX2FkZHJlc3MgdG8gYmUgc2VsZiBcclxuICAgICAgICAgICAgICAgIHRoaXMuaXBfYWRkcmVzcyA9IFwiMTI3LjAuMC4xXCJcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yKVxyXG4gICAgICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBhcGlfcmVzZXRfcGFzc3dvcmRfcmVxdWVzdChlbWFpbCkge1xyXG5cclxuICAgICAgICB2YXIgcGF5bG9hZCA9IHt9XHJcbiAgICAgICAgcGF5bG9hZC5lbWFpbCA9IGVtYWlsXHJcbiAgICAgICAgY29uc3QgcmVxdWVzdE9wdGlvbnMgPSB7XHJcbiAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxyXG4gICAgICAgICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShwYXlsb2FkKVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgdmFyIG1lc3NhZ2UgPSBcIlwiXHJcbiAgICAgICAgY29uc3QgdXJsID0gdGhpcy5kb21haW5fb3JpZ2luICsgJy9hcGkvYWRtaW4vZW1haWxzL3Bhc3N3b3JkX3Jlc2V0X2VtYWlsJ1xyXG4gICAgICAgIGZldGNoKHVybCwgcmVxdWVzdE9wdGlvbnMpXHJcbiAgICAgICAgICAgIC50aGVuKHJlc3BvbnNlID0+IHJlc3BvbnNlLmpzb24oKSlcclxuICAgICAgICAgICAgLnRoZW4oYXBpX29iamVjdCA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm1lc3NhZ2VzLmFkZF9tZXNzYWdlKGFwaV9vYmplY3QubWVzc2FnZSwgXCJzdWNjZXNzXCIpXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5jYXRjaChlcnJvciA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvcilcclxuICAgICAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgYXBpX3Jlc2V0X3Bhc3N3b3JkKGlucHV0KSB7XHJcblxyXG4gICAgICAgIHZhciBwYXlsb2FkID0ge31cclxuICAgICAgICBwYXlsb2FkLm5ld19wYXNzd29yZCA9IGlucHV0XHJcbiAgICAgICAgY29uc3QgcmVxdWVzdE9wdGlvbnMgPSB7XHJcbiAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxyXG4gICAgICAgICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShwYXlsb2FkKVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgY29uc3QgdXJsID0gdGhpcy5kb21haW5fb3JpZ2luICsgJy9hZG1pbi9yZXNldF9wYXNzd29yZF9mb3Jnb3R0ZW4nXHJcbiAgICAgICAgZmV0Y2godXJsLCByZXF1ZXN0T3B0aW9ucylcclxuICAgICAgICAgICAgLnRoZW4ocmVzcG9uc2UgPT4gcmVzcG9uc2UuanNvbigpKVxyXG4gICAgICAgICAgICAudGhlbihhcGlfb2JqZWN0ID0+IHtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoYXBpX29iamVjdC5yYyA9PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5tZXNzYWdlcy5hZGRfbWVzc2FnZShhcGlfb2JqZWN0Lm1lc3NhZ2UsIFwic3VjY2Vzc1wiKVxyXG4gICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsb2NhdGlvbi5yZXBsYWNlKFwiL2xvZ2luXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgfSwgNTAwMCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLm1lc3NhZ2VzLmFkZF9tZXNzYWdlKGFwaV9vYmplY3QubWVzc2FnZSwgXCJkYW5nZXJcIilcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLmNhdGNoKGVycm9yID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yKVxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICB9XHJcblxyXG4gICAgY2hlY2tfbWZhX2F1dGhlbnRpY2F0b3JfY29kZShtZmFfYXV0aGVudGljYXRvcl9jb2RlKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgICAgICAgaWYgKHRoaXMucGFzc3dvcmRfYXV0aG9yaXNlZCkge1xyXG4gICAgICAgICAgICAgICAgbGV0IGRhdGEgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZW1haWw6IHRoaXMuZW1haWwsXHJcbiAgICAgICAgICAgICAgICAgICAgc2Vzc2lvbl9qd3Q6IHRoaXMuc2Vzc2lvbl9qd3QsXHJcbiAgICAgICAgICAgICAgICAgICAgbWZhX2F1dGhlbnRpY2F0b3JfY29kZTogbWZhX2F1dGhlbnRpY2F0b3JfY29kZSxcclxuICAgICAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAgICAgY29uc3QgcmVxdWVzdF9vcHRpb25zID0ge1xyXG4gICAgICAgICAgICAgICAgICAgIG1ldGhvZDogXCJQT1NUXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogYEJlYXJlciAke3RoaXMuc2Vzc2lvbl9qd3R9YCxcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KGRhdGEpLFxyXG4gICAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICAgICBjb25zdCB1cmwgPSB0aGlzLmRvbWFpbl9vcmlnaW4gKyBcIi9hcGkvYXV0aC9sb2dpbi9tZmFcIjtcclxuXHJcbiAgICAgICAgICAgICAgICBmZXRjaCh1cmwsIHJlcXVlc3Rfb3B0aW9ucylcclxuICAgICAgICAgICAgICAgICAgICAudGhlbigocmVzcG9uc2UpID0+IHJlc3BvbnNlLmpzb24oKSlcclxuICAgICAgICAgICAgICAgICAgICAudGhlbigoYXBpX29iamVjdCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oXCJtZmFfXCIgKyB0aGlzLmVtYWlsKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGFwaV9vYmplY3QubWZhX2p3dCAmJiBhcGlfb2JqZWN0LnJjID09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm1mYV9hdXRob3Jpc2VkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm1mYV9zZWNyZXRfY29uZmlybWVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmxvZ2dlZF9pbiA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJtZmFfXCIgKyB0aGlzLmVtYWlsLCBhcGlfb2JqZWN0Lm1mYV9qd3QpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUodHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubWZhX2F1dGhvcmlzZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmxvZ2dlZF9pbiA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKFwibWZhX1wiICsgdGhpcy5lbWFpbCwgXCJcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShmYWxzZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWplY3QoZXJyb3IpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAuY2F0Y2goKGVycm9yKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KGVycm9yKTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHJlc29sdmUoZmFsc2UpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0VXNlckZyb21BcGkoKSB7XHJcbiAgICAgICAgLypcclxuICAgICAgICAgICAgVGhpcyBydW5zIGEgY29udGludW91cyBjeWNsZSBvZiBjaGVja2luZyB0aGF0IGxvZ2dlZCBpbiB1c2VycyBhcmUgc3RpbGwgc3VwcG9zZWQgdG8gYmUgXHJcbiAgICAgICAgICAgIGxvZ2dlZCBpbiBcclxuICAgICAgICAgICAgSWYgdGhlIG1mYV9zZWNyZXQgb24gdGVoIGRiIGNoYW5nZXMsIHRoZW4gdGhleSB3aWxsIGJlIGxvZ2dlZCBvZmYgXHJcbiAgICAgICAgKi9cclxuICAgICAgICBpZiAodGhpcy5sb2dnZWRfaW4pIHtcclxuICAgICAgICAgICAgdmFyIGRhdGEgPSB7fVxyXG4gICAgICAgICAgICBkYXRhLnNlc3Npb25fand0ID0gdGhpcy5zZXNzaW9uX2p3dFxyXG4gICAgICAgICAgICBkYXRhLmlwX2FkZHJlc3MgPSB0aGlzLmlwX2FkZHJlc3NcclxuICAgICAgICAgICAgZGF0YS5tZmFfand0ID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oXCJtZmFfXCIgKyB0aGlzLmVtYWlsKVxyXG4gICAgICAgICAgICBjb25zdCByZXF1ZXN0T3B0aW9ucyA9IHtcclxuICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxyXG4gICAgICAgICAgICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoZGF0YSlcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgdmFyIG1lc3NhZ2UgPSBcIlwiXHJcbiAgICAgICAgICAgIGNvbnN0IHVybCA9IHRoaXMuZG9tYWluX29yaWdpbiArICcvYXBpX2dldF91c2VyJ1xyXG4gICAgICAgICAgICBmZXRjaCh1cmwsIHJlcXVlc3RPcHRpb25zKVxyXG4gICAgICAgICAgICAgICAgLnRoZW4ocmVzcG9uc2UgPT4gcmVzcG9uc2UuanNvbigpKVxyXG4gICAgICAgICAgICAgICAgLnRoZW4oYXBpX29iamVjdCA9PiB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmICghYXBpX29iamVjdC51c2VyLmxvZ2dlZF9pbikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBzaG93TWVzc2FnZSA9IHRydWVcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2dPdXQoc2hvd01lc3NhZ2UpXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIC5jYXRjaChlcnJvciA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyb3IpXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBkYXRhXHJcbiAgICB9XHJcblxyXG5cclxuICAgIGxvZ2luKCkge1xyXG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IG1mYV9qd3QgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShcIm1mYV9cIiArIHRoaXMubG9naW5fZW1haWwpO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgdXJsID0gdGhpcy5kb21haW5fb3JpZ2luICsgXCIvYXBpL2F1dGgvbG9naW5cIjtcclxuICAgICAgICAgICAgY29uc29sZS5sb2codXJsKTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IGRhdGEgPSB7XHJcbiAgICAgICAgICAgICAgICBlbWFpbDogdGhpcy5sb2dpbl9lbWFpbCxcclxuICAgICAgICAgICAgICAgIHBhc3N3b3JkOiB0aGlzLmxvZ2luX3Bhc3N3b3JkLFxyXG4gICAgICAgICAgICAgICAgbWZhX2p3dDogbWZhX2p3dCxcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIGlmICh0aGlzLmxvZ2dlZF9pbikge1xyXG4gICAgICAgICAgICAgICAgLy8gUHVzaCB1c2VyIHRvIGhvbWVwYWdlIGlmIGFscmVhZHkgbG9nZ2VkIGluXHJcbiAgICAgICAgICAgICAgICB0aGlzLnJvdXRlci5wdXNoKFwiL1wiKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHJlcXVlc3Rfb3B0aW9ucyA9IHtcclxuICAgICAgICAgICAgICAgICAgICBtZXRob2Q6IFwiUE9TVFwiLFxyXG4gICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShkYXRhKSxcclxuICAgICAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAgICAgZmV0Y2godXJsLCByZXF1ZXN0X29wdGlvbnMpXHJcbiAgICAgICAgICAgICAgICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiByZXNwb25zZS5qc29uKCkpXHJcbiAgICAgICAgICAgICAgICAgICAgLnRoZW4oKGFwaV9vYmplY3QpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXNzaW9uX2p3dCA9IGFwaV9vYmplY3Quc2Vzc2lvbl9qd3Q7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhcGlfb2JqZWN0LnJjID09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubWVzc2FnZXMuYWRkX21lc3NhZ2UoYXBpX29iamVjdC5tZXNzYWdlLCBcInN1Y2Nlc3NcIilcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB1c2VyID0gYXBpX29iamVjdC51c2VyO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHVzZXIubWZhX2F1dGhvcmlzZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmlkID0gdXNlci5pZDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJvbGVfbmFtZSA9IHVzZXIucm9sZV9uYW1lXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2dnZWRfaW4gPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubWZhX2F1dGhvcmlzZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubWZhX3NlY3JldF9jb25maXJtZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmxvZ2dlZF9pbiA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubWZhX2F1dGhvcmlzZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm1mYV9zZWNyZXRfY29uZmlybWVkID0gdXNlci5tZmFfc2VjcmV0X2NvbmZpcm1lZDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm1mYV9xcl9jb2RlX2Jhc2U2NCA9IGFwaV9vYmplY3QubWZhX3FyX2ltYWdlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh1c2VyLnBhc3N3b3JkX2F1dGhvcmlzZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBhc3N3b3JkX2F1dGhvcmlzZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZW1haWwgPSB1c2VyLmVtYWlsO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubmFtZSA9IHVzZXIubmFtZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNlc3Npb25fand0ID0gdXNlci5zZXNzaW9uX2p3dDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGFzc3dvcmRfYXV0aG9yaXNlZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubG9nZ2VkX2luID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lbWFpbCA9IFwiXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5uYW1lID0gXCJcIjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmlkID0gXCJcIjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmxvZ291dCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubWVzc2FnZXMuYWRkX21lc3NhZ2UoXCJMb2dpbiBmYWlsZWQuXCIsIFwiZGFuZ2VyXCIpXHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhdGlvbi5yZXBsYWNlKFwiL2xvZ2luXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIDUwMDApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYXRpb24ucmVwbGFjZShcIi9sb2dpblwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIDUwMDApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5tZXNzYWdlcy5hZGRfbWVzc2FnZShcIkxvZ2luIGZhaWxlZC5cIiwgXCJkYW5nZXJcIilcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAuY2F0Y2goKGVycm9yKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KGVycm9yKTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIkVuZCBvZiB1c2VyLmxvZ2luKClcIik7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgbG9nb3V0KCkge1xyXG4gICAgICAgIHRoaXMubG9nZ2VkX2luID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5zZXNzaW9uX2p3dCA9IFwiXCJcclxuICAgICAgICB0aGlzLnJvbGVfbmFtZSA9IFwiXCJcclxuICAgICAgICB0aGlzLmVtYWlsID0gXCJcIlxyXG4gICAgICAgIHRoaXMucGFzc3dvcmRfYXV0aG9yaXNlZCA9IGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIGdldF9zZWNyZXRfYW5kX2ltYWdlKHNlY3JldF9hbmRfaW1hZ2UpIHtcclxuXHJcbiAgICAgICAgLy8gdGhlIHNlY3JldF9hbmRfaW1hZ2UgaXMgc3RvcmVkIGluIHRoZSB2dWUgcGFnZSBhbmQgcGFzc2VkIGluXHJcblxyXG4gICAgICAgIGlmICh0aGlzLmxvZ2dlZF9pbikge1xyXG4gICAgICAgICAgICB2YXIgZGF0YSA9IHt9XHJcbiAgICAgICAgICAgIGRhdGEuc2Vzc2lvbl9qd3QgPSB0aGlzLnNlc3Npb25fand0XHJcbiAgICAgICAgICAgIGNvbnN0IHJlcXVlc3RPcHRpb25zID0ge1xyXG4gICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXHJcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShkYXRhKVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB2YXIgbWVzc2FnZSA9IFwiXCJcclxuICAgICAgICAgICAgY29uc3QgdXJsID0gdGhpcy5kb21haW5fb3JpZ2luICsgJy9hcGlfZ2V0X3NlY3JldF9hbmRfaW1hZ2UnXHJcbiAgICAgICAgICAgIGZldGNoKHVybCwgcmVxdWVzdE9wdGlvbnMpXHJcbiAgICAgICAgICAgICAgICAudGhlbihyZXNwb25zZSA9PiByZXNwb25zZS5qc29uKCkpXHJcbiAgICAgICAgICAgICAgICAudGhlbihhcGlfb2JqZWN0ID0+IHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGFwaV9vYmplY3QucmMgPT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm1lc3NhZ2VzLmFkZF9tZXNzYWdlKFwiVXMgeW91ciBhdXRoZW50aWNhdG9yIGFwcCAoZnJvbSBHb29nbGUgb3IgTWljcm9zb2Z0KSB0byBzY2FuIHRoZSBxci1jb2RlXCIsIFwic3VjY2Vzc1wiKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBzZWNyZXQgPSBhcGlfb2JqZWN0LnNlY3JldFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpbWFnZSA9IGFwaV9vYmplY3QuaW1hZ2VcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2VjcmV0X2FuZF9pbWFnZS5zZWNyZXQgPSBzZWNyZXRcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2VjcmV0X2FuZF9pbWFnZS5pbWFnZSA9IGltYWdlXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm1lc3NhZ2VzLmFkZF9tZXNzYWdlKFwiVGhlcmUgd2FzIGEgc2xpZ2h0IHByb2JsZW0sIGlmIHlvdSBjYW4ndCBwcm9jZWVkLCBwbGVhc2UgdHJ5IGFnYWluIGluIDUgbWludXRlc1wiLCBcImRhbmdlclwiKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWNyZXRfYW5kX2ltYWdlLnNlY3JldCA9IFwiRmFpbGVkIGluIHVzZXIuanNcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWNyZXRfYW5kX2ltYWdlLmltYWdlID0gXCJcIlxyXG5cclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAuY2F0Y2goZXJyb3IgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHNlY3JldF9hbmRfaW1hZ2Uuc2VjcmV0ID0gXCJcIlxyXG4gICAgICAgICAgICAgICAgICAgIHNlY3JldF9hbmRfaW1hZ2UuaW1hZ2UgPSBcIlwiXHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyb3IpXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBkYXRhXHJcbiAgICB9XHJcblxyXG4gICAgc2V0bG9jYWxTdG9yYWdlKCkge1xyXG4gICAgICAgIC8vIGNhbiB1c2UgdGhpcyB0byByZXRhaW4gbG9nZ2VkIG9uIHN0YXR1cyBhZnRlciByZWZyZXNoIFxyXG4gICAgICAgIC8vIHRvZG86IHJldGFpbiBsb2dnZWQgb24gc3RhdHVzIGFmdGVyIGEgcmVmcmVzaFxyXG4gICAgICAgIHNlc3Npb25TdG9yYWdlLnNldEl0ZW0oXCJ1c2VyXCIsIEpTT04uc3RyaW5naWZ5KHsgXCJsb2dnZWRfaW5cIjogdGhpcy5sb2dnZWRfaW4sIHJvbGVfbmFtZTogdGhpcy5yb2xlX25hbWUgfSkpO1xyXG4gICAgfVxyXG5cclxuICAgIGFwaV9yZXNldF9wYXNzd29yZChpbnB1dCwgdG9rZW4pIHtcclxuXHJcbiAgICAgICAgdmFyIHBheWxvYWQgPSB7fVxyXG4gICAgICAgIHBheWxvYWQuc2Vzc2lvbl9qd3QgPSB0aGlzLnNlc3Npb25fand0XHJcbiAgICAgICAgcGF5bG9hZC5pbnB1dCA9IGlucHV0XHJcbiAgICAgICAgY29uc3QgcmVxdWVzdE9wdGlvbnMgPSB7XHJcbiAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxyXG4gICAgICAgICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShwYXlsb2FkKVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgdmFyIG1lc3NhZ2UgPSBcIlwiXHJcbiAgICAgICAgY29uc3QgdXJsID0gdGhpcy5kb21haW5fb3JpZ2luICsgJy9hcGkvYWRtaW4vcmVzZXRfcGFzc3dvcmRfZm9yZ290dGVuLycgKyB0b2tlblxyXG4gICAgICAgIGZldGNoKHVybCwgcmVxdWVzdE9wdGlvbnMpXHJcbiAgICAgICAgICAgIC50aGVuKHJlc3BvbnNlID0+IHJlc3BvbnNlLmpzb24oKSlcclxuICAgICAgICAgICAgLnRoZW4oYXBpT2JqZWN0ID0+IHtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoYXBpT2JqZWN0LnJjID09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLm1lc3NhZ2VzLmFkZF9tZXNzYWdlKGFwaU9iamVjdC5tZXNzYWdlLCBcInN1Y2Nlc3NcIilcclxuICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbG9jYXRpb24ucmVwbGFjZShcIi9sb2dpblwiKVxyXG4gICAgICAgICAgICAgICAgICAgIH0sIDUwMDApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5tZXNzYWdlcy5hZGRfbWVzc2FnZShhcGlPYmplY3QubWVzc2FnZSwgXCJkYW5nZXJcIilcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLmNhdGNoKGVycm9yID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yKVxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICB9XHJcblxyXG4gICAgY2hlY2tfdG9rZW5fdmFsaWRpdHkoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMubG9nZ2VkX2luKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGFwaV9wYWNrYWdlID0geyBcInRva2VuXCI6IHRoaXMuc2Vzc2lvbl9qd3QgfTtcclxuICAgICAgICAgICAgY29uc3QgcG9zdCA9IHtcclxuICAgICAgICAgICAgICAgIG1ldGhvZDogXCJQT1NUXCIsXHJcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgXCJDb250ZW50LXR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uOyBjaGFyc2V0PVVURi04XCJcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShhcGlfcGFja2FnZSksXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIGNvbnN0IHVybCA9IHRoaXMuZG9tYWluX29yaWdpbiArICcvYXBpL2F1dGgvY2hlY2tfand0J1xyXG4gICAgICAgICAgICBmZXRjaCh1cmwsIHBvc3QpXHJcbiAgICAgICAgICAgICAgICAudGhlbigoZGF0YSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghZGF0YS5vaykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBFcnJvcihkYXRhLnN0YXR1cyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBkYXRhLmpzb24oKTtcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAudGhlbigocmVzcG9uc2UpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2Uuc3RhdHVzID09IFwiaW52YWxpZFwiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaW52YWxpZF90b2tlbiA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJUb2tlbiB2YWxpZCwgc3RpbGwgbG9nZ2VkIGluLlwiKVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAuY2F0Y2goKGVycm9yKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyb3IpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59IiwiZXhwb3J0IGNsYXNzIFVzZXJzIHtcclxuICBjb25zdHJ1Y3Rvcih1c2VyLCBtZXNzYWdlcywgZG9tYWluX29yaWdpbiwgcm9sZXMpIHtcclxuICAgIGNvbnNvbGUubG9nKFwiVXNlcnMgaGFzIGJlZW4gaW5zdGFudGlhdGVkLlwiKVxyXG4gICAgdGhpcy5tZXNzYWdlcyA9IG1lc3NhZ2VzO1xyXG4gICAgdGhpcy5yb2xlcyA9IHJvbGVzO1xyXG4gICAgdGhpcy51c2VyID0gdXNlcjtcclxuICAgIHRoaXMuZG9tYWluX29yaWdpbiA9IGRvbWFpbl9vcmlnaW47XHJcbiAgICB0aGlzLnVzZXJfbGlzdCA9IFtdO1xyXG4gICAgdGhpcy5uZXdfdXNlciA9IHt9O1xyXG4gICAgdGhpcy5uZXdfdXNlci5uYW1lID0gXCJcIjtcclxuICAgIHRoaXMubmV3X3VzZXIuZW1haWwgPSBcIlwiO1xyXG4gICAgdGhpcy5uZXdfdXNlci5yb2xlID0gXCJcIjtcclxuICAgIHRoaXMudXNlcl90b19kZWxldGUgPSBcIlwiO1xyXG4gICAgdGhpcy5zZWxlY3RlZF91c2VycyA9IFtdO1xyXG4gICAgdGhpcy5tb2RlbF9uYW1lID0gXCJVc2VyXCI7XHJcbiAgICB0aGlzLnJvbGVfdmFsaWQgPSBcIlwiO1xyXG4gICAgdGhpcy5lbWFpbF92YWxpZCA9IFwiXCI7XHJcbiAgICB0aGlzLm5hbWVfdmFsaWQgPSBcIlwiO1xyXG4gICAgdGhpcy5wYXNzd29yZF92YWxpZCA9IFwiXCI7XHJcbiAgfVxyXG4gIGFwaV9jcmVhdGVfdXNlcl9kYigpIHtcclxuICAgIGNvbnNvbGUubG9nKFwiaW5zaWRlIGFwaV9jcmVhdGVfdXNlcl9kYlwiKVxyXG5cclxuICAgIC8vIFRha2UgYSBjb3B5IHRoZW4gcmVzZXQgb2JqZWN0IGF0dHJpYnV0ZXNcclxuICAgIGxldCBuZXdfdXNlcl9jcmVkZW50aWFscyA9IHRoaXMubmV3X3VzZXJcclxuXHJcbiAgICAvLyBjb25zdCBrZXlzID0gT2JqZWN0LmtleXModGhpcy5uZXdfdXNlcilcclxuICAgIC8vIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCBrZXlzLmxlbmd0aDsgaW5kZXgrKykge1xyXG4gICAgLy8gICAgIHRoaXMubmV3X3VzZXJba2V5c1tpbmRleF1dID0gXCJcIlxyXG4gICAgLy8gfVxyXG5cclxuICAgIC8vIGdldCB0aGUgcm9sZSB0aGF0IHdlIG5lZWQgZm9yIGEgdXNlciBcclxuICAgIGNvbnN0IHJvbGUgPSB0aGlzLnJvbGVzLmdldF9yb2xlX2Zyb21fbmFtZSh0aGlzLm5ld191c2VyLnJvbGUpO1xyXG4gICAgLy8gYWRkIGEgZmFrZSBpZCBmaXJzdCBzbyB0aGUgcmVhY3Rpdml0eSBjYW4ga2VlcCB0cmFjayBvZiBpdFxyXG4gICAgbmV3X3VzZXJfY3JlZGVudGlhbHMuaWQgPSB0aGlzLmdlbmVyYXRlX3Rva2VuKClcclxuICAgIG5ld191c2VyX2NyZWRlbnRpYWxzLnJvbGVfaWQgPSByb2xlLmlkXHJcbiAgICAvLyBmaXJzdCB3ZSBoYXZlIHRvIGFkZCB0aGUgcG9ncmFtbWUgdG8gdGhlIGxvY2FsIGNvcHkgXHJcbiAgICB0aGlzLnNlbGVjdGVkX3VzZXJzLnB1c2gobmV3X3VzZXJfY3JlZGVudGlhbHMpXHJcblxyXG4gICAgLy8gY29uc3RydWN0IHRoZSBwYXlsb2FkIHRvIGdvIHdpdGggdGhlIGFwaVxyXG4gICAgY29uc3QgcGF5bG9hZCA9IHt9XHJcblxyXG4gICAgLy8gcHV0IHRoZSBwYWNrYWdlIGludG8gZGF0YSBhbmQgZGF0YSBpbnRvIHRoZSBwYXlsb2FkXHJcbiAgICBwYXlsb2FkLm5ld191c2VyX2NyZWRlbnRpYWxzID0gbmV3X3VzZXJfY3JlZGVudGlhbHNcclxuXHJcbiAgICBjb25zdCByZXF1ZXN0X29wdGlvbnMgPSB7XHJcbiAgICAgIG1ldGhvZDogJ1BPU1QnLFxyXG4gICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXHJcbiAgICAgICAgQXV0aG9yaXphdGlvbjogYEJlYXJlciAke3RoaXMudXNlci5zZXNzaW9uX2p3dH1gLFxyXG4gICAgICB9LFxyXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShwYXlsb2FkKVxyXG4gICAgfTtcclxuXHJcbiAgICBjb25zdCB1cmwgPSB0aGlzLmRvbWFpbl9vcmlnaW4gKyBcIi9hcGkvdXNlcnMvXCJcclxuICAgIGZldGNoKHVybCwgcmVxdWVzdF9vcHRpb25zKVxyXG4gICAgICAudGhlbihyZXNwb25zZSA9PiByZXNwb25zZS5qc29uKCkpXHJcbiAgICAgIC50aGVuKGRhdGEgPT4ge1xyXG5cclxuICAgICAgICBpZiAoZGF0YS5yYyA9PSAwKSB7XHJcbiAgICAgICAgICB0aGlzLm1lc3NhZ2VzLmFkZF9tZXNzYWdlKGRhdGEubWVzc2FnZSwgXCJzdWNjZXNzXCIpXHJcbiAgICAgICAgICAvLyBXZSBuZWVkIHRvIGdldCB0aGUgdGVtcG9yYXJpbHkgYWRkZWQgaWQgYW5kIHVwZGF0ZSB0aGUgaWQgIFxyXG4gICAgICAgICAgY29uc3QgY3JlYXRlZF9yZWNvcmQgPSBkYXRhLmNyZWF0ZWRfcmVjb3JkXHJcbiAgICAgICAgICBuZXdfdXNlcl9jcmVkZW50aWFscy5pZCA9IGNyZWF0ZWRfcmVjb3JkLmlkXHJcbiAgICAgICAgICB0aGlzLnVzZXJfbGlzdC5wdXNoKGNyZWF0ZWRfcmVjb3JkKVxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgIHRoaXMubWVzc2FnZXMuYWRkX21lc3NhZ2UoZGF0YS5tZXNzYWdlLCBcImRhbmdlclwiKVxyXG4gICAgICAgICAgdGhpcy5yZW1vdmVfbG9jYWxfc2VsZWN0ZWRfdXNlcihuZXdfdXNlcl9jcmVkZW50aWFscy5pZClcclxuICAgICAgICAgIC8vIFRoZSB1cGRhdGVzIGhhdmUgbm90IGJlZW4gYXBwbGllZCBzbyB3ZSBuZWVkIHRvIGdldCB0aGUgXHJcbiAgICAgICAgICAvLyBjb3JyZWN0IHZlcnNpb24gb2YgdGhlIHJlY29yZHMgZGlyZWN0bHkgZnJvbSB0aGUgZGJcclxuICAgICAgICB9XHJcbiAgICAgIH0pXHJcbiAgICAgIC5jYXRjaChlcnJvciA9PiB7XHJcbiAgICAgICAgY29uc29sZS5sb2coZXJyb3IpXHJcbiAgICAgIH0pO1xyXG4gICAgcmV0dXJuXHJcbiAgfVxyXG5cclxuICBhcGlfdXBkYXRlX3VzZXIgKHVzZXJfaWQsIG5hbWUsIGZvcm1fZW1haWwsIGNjX2VtYWlscywgb3JnX29iamVjdHMsIGlzX2RlbGV0ZWQpIHtcclxuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgIGNvbnN0IG9yZ19pZHMgPSBbXVxyXG4gICAgICBmb3IgKGxldCBvcmdfa2V5IGluIG9yZ19vYmplY3RzKSB7XHJcbiAgICAgICAgY29uc3Qgb3JnID0gb3JnX29iamVjdHNbb3JnX2tleV1cclxuICAgICAgICBvcmdfaWRzLnB1c2gob3JnLmlkKVxyXG4gICAgICB9XHJcbiAgICAgIGNvbnN0IHBheWxvYWQgPSB7XHJcbiAgICAgICAgb3JnX2lkczogb3JnX2lkcyxcclxuICAgICAgICBuYW1lOiBuYW1lLFxyXG4gICAgICAgIGNjX2VtYWlsczogY2NfZW1haWxzLFxyXG4gICAgICAgIGlzX2RlbGV0ZWQ6IGlzX2RlbGV0ZWQsXHJcbiAgICAgICAgZW1haWw6IGZvcm1fZW1haWxcclxuICAgICAgfVxyXG5cclxuICAgICAgY29uc3QgcmVxdWVzdF9vcHRpb25zID0ge1xyXG4gICAgICAgIG1ldGhvZDogJ1BVVCcsXHJcbiAgICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcclxuICAgICAgICAgIEF1dGhvcml6YXRpb246IGBCZWFyZXIgJHt0aGlzLnVzZXIuc2Vzc2lvbl9qd3R9YFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkocGF5bG9hZClcclxuICAgICAgfVxyXG5cclxuICAgICAgY29uc3QgdXJsID0gdGhpcy5kb21haW5fb3JpZ2luICsgYC9hcGkvdXNlcnMvJHt1c2VyX2lkfWBcclxuICAgICAgZmV0Y2godXJsLCByZXF1ZXN0X29wdGlvbnMpXHJcbiAgICAgICAgLnRoZW4ocmVzcG9uc2UgPT4gcmVzcG9uc2UuanNvbigpKVxyXG4gICAgICAgIC50aGVuKGFwaV9vYmplY3QgPT4ge1xyXG4gICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgaWYgKGFwaV9vYmplY3QucmMgPT0gMCkge1xyXG5cclxuICAgICAgICAgICAgICByZXNvbHZlKGFwaV9vYmplY3QubWVzc2FnZSlcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICByZWplY3QobmV3IEVycm9yKGFwaV9vYmplY3QubWVzc2FnZSkpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgIHJlamVjdChuZXcgRXJyb3IoJ0ZhaWxlZCB0byB1cGRhdGUgdXNlcicpKVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLmNhdGNoKGVycm9yID0+IHtcclxuICAgICAgICAgIHJlamVjdChuZXcgRXJyb3IoJ0ZhaWxlZCB0byB1cGRhdGUgdXNlcicpKVxyXG4gICAgICAgIH0pXHJcbiAgICB9KVxyXG4gIH1cclxuXHJcbiAgZGVsZXRlX3VzZXIodXNlcl9pZCkge1xyXG4gICAgY29uc29sZS5sb2coXCJpbnNpZGUgZGVsZXRlX3VzZXIgbWV0aG9kXCIpO1xyXG5cclxuICAgIGNvbnN0IHVzZXIgPSB0aGlzLmdldF9zZWxlY3RlZF91c2VyX2Zyb21faWQodXNlcl9pZClcclxuICAgIHVzZXIuaWQgPSBcIlwiXHJcblxyXG4gICAgY29uc3QgcGF5bG9hZCA9IHt9XHJcbiAgICBwYXlsb2FkLnNlc3Npb25fand0ID0gdGhpcy51c2VyLnNlc3Npb25fand0XHJcbiAgICBwYXlsb2FkLm1vZGVsX25hbWUgPSBcIlVzZXJcIlxyXG5cclxuICAgIGNvbnN0IGRhdGEgPSB7fVxyXG5cclxuICAgIGNvbnN0IGRlbGV0ZV9wYWNrYWdlID0ge31cclxuICAgIGRlbGV0ZV9wYWNrYWdlLmlkID0gdXNlcl9pZFxyXG5cclxuICAgIGRhdGEuZGVsZXRlX3BhY2thZ2UgPSBkZWxldGVfcGFja2FnZVxyXG5cclxuICAgIHBheWxvYWQuZGF0YSA9IGRhdGFcclxuICAgIGNvbnN0IHJlcXVlc3Rfb3B0aW9ucyA9IHtcclxuICAgICAgbWV0aG9kOiAnUE9TVCcsXHJcbiAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxyXG4gICAgICAgIC8vICdBdXRob3JpemF0aW9uJzogJ0JlYXJlciBteS10b2tlbicsXHJcbiAgICAgIH0sXHJcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHBheWxvYWQpXHJcbiAgICB9O1xyXG5cclxuICAgIGNvbnN0IHVybCA9IHRoaXMuZG9tYWluX29yaWdpbiArIFwiL2FwaV9kZWxldGVfcmVjb3JkX2RiXCJcclxuXHJcbiAgICBmZXRjaCh1cmwsIHJlcXVlc3Rfb3B0aW9ucylcclxuICAgICAgLnRoZW4ocmVzcG9uc2UgPT4gcmVzcG9uc2UuanNvbigpKVxyXG4gICAgICAudGhlbihkYXRhID0+IHtcclxuICAgICAgICBpZiAoZGF0YS5yYyA9PSAwKSB7XHJcbiAgICAgICAgICB0aGlzLm1lc3NhZ2VzLmFkZF9tZXNzYWdlKGRhdGEubWVzc2FnZSwgXCJzdWNjZXNzXCIpXHJcbiAgICAgICAgICAvLyBuZWVkIHRvIHJlbW92ZSB0aGUgdXNlciBmcm9tIHRoaXMudXNlcl9saXN0XHJcbiAgICAgICAgICBmb3IgKGxldCB1c2VyX2luZGV4IGluIHRoaXMudXNlcl9saXN0KSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnVzZXJfbGlzdFt1c2VyX2luZGV4XS5pZCA9PSB1c2VyX2lkKSB7XHJcbiAgICAgICAgICAgICAgdGhpcy51c2VyX2xpc3Quc3BsaWNlKHVzZXJfaW5kZXgsIDEpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcblxyXG4gICAgICAgICAgLy8gVGhlIHVwZGF0ZSB3YXMgcmVqZWN0ZWQgc28gd2UgbmVlZCB0byBnZXQgYSBmcmVzaCBjb3B5IG9mIHRoZSB1c2VyIGRhdGEgXHJcbiAgICAgICAgICB0aGlzLm1lc3NhZ2VzLmFkZF9tZXNzYWdlKGRhdGEubWVzc2FnZSwgXCJkYW5nZXJcIilcclxuICAgICAgICB9XHJcblxyXG4gICAgICB9KVxyXG4gICAgICAuY2F0Y2goZXJyb3IgPT4ge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKGVycm9yKVxyXG4gICAgICB9KTtcclxuICAgIHJldHVyblxyXG4gIH1cclxuXHJcbiAgZ2VuZXJhdGVfdG9rZW4odG9rZW5fbGVuZ3RoKSB7XHJcbiAgICAvLyBnZW5lcmF0ZSBhIHRva2VuIHRoYXQgaXMgcmFuZG9tXHJcbiAgICBpZiAoTnVtYmVyLmlzRmluaXRlKHRva2VuX2xlbmd0aCkpIHtcclxuICAgICAgdG9rZW5fbGVuZ3RoID0gdG9rZW5fbGVuZ3RoICogMTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAvLyBkZWZhdWx0IHRvIGEgbGVuZ3RoIG9mIDEyIGlmIG5vdCBwYXNzZWQgb3Igbm90IG51bWVyaWNcclxuICAgICAgdG9rZW5fbGVuZ3RoID0gMTI7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gZGVmaW5lIHRoZSB1bmFtYmlndW91cyBjaGFyYWN0ZXJzIG9uIHRoZSBrZXlib2FyZCBcclxuICAgIHZhciB0b2tlbl9jaGFycyA9IFwiYUFiQmNDZERlRWZGZ0doSGpKa0ttTW5OcFBxUXJSc1N0VHVVdlZ3V3hYeVl6WjIzNDU2Nzg5ISYtX1wiO1xyXG5cclxuICAgIC8vIGluaXRpYWxpc2UgdGhlIHRva2VuIHRvIG5vdGhpbmdcclxuICAgIHZhciB0b2tlbiA9IFwiwqMhMVd3XCJcclxuXHJcbiAgICAvLyBrZWVwIGFkZGluZyByYW5kb20gY2hhcmFjdGVycyB1bnRpbCBkb25lIFxyXG4gICAgZm9yICh2YXIgdG9rZW5faW5kZXggPSAwOyB0b2tlbl9pbmRleCA8IHRva2VuX2xlbmd0aDsgdG9rZW5faW5kZXgrKykge1xyXG4gICAgICB2YXIgY2hhcmFjdGVyX2luZGV4ID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogdG9rZW5fY2hhcnMubGVuZ3RoKVxyXG4gICAgICB0b2tlbiA9IHRva2VuICsgdG9rZW5fY2hhcnNbY2hhcmFjdGVyX2luZGV4XVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHRva2VuXHJcbiAgfVxyXG5cclxuICByZW1vdmVfbG9jYWxfc2VsZWN0ZWRfdXNlcihpZCkge1xyXG4gICAgLy8gVGhlIHVzZXIgd2FzIG5vdCBhZGRlZCBzbyB3ZSBuZWVkIHRvIHJlbW92ZSBpdCBmcm9tIHRoaXMgdGVtcG9yYXJ5IGxpc3RcclxuICAgIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCB0aGlzLnNlbGVjdGVkX3VzZXJzLmxlbmd0aDsgaW5kZXgrKykge1xyXG4gICAgICBjb25zdCB1c2VyID0gdGhpcy5zZWxlY3RlZF91c2Vyc1tpbmRleF1cclxuICAgICAgaWYgKHVzZXIuaWQgPT0gaWQpIHtcclxuICAgICAgICAvLyBUaGlzIGlzIHRoZSBlbnRyeSB0aGF0IG5lZWRzIGRlbGV0aW5nIHNvIGRvIGl0XHJcbiAgICAgICAgdGhpcy5zZWxlY3RlZF91c2Vycy5zcGxpY2UoaW5kZXgsIDEpXHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcbiAgcG9wdWxhdGVfdXNlcl9saXN0KCkge1xyXG4gICAgY29uc3QgcmVxdWVzdE9wdGlvbnMgPSB7XHJcbiAgICAgIG1ldGhvZDogXCJHRVRcIixcclxuICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgIFwiQ29udGVudC10eXBlXCI6IFwiYXBwbGljYXRpb24vanNvbjsgY2hhcnNldD1VVEYtOFwiLFxyXG4gICAgICAgIEF1dGhvcml6YXRpb246IGBCZWFyZXIgJHt0aGlzLnVzZXIuc2Vzc2lvbl9qd3R9YCxcclxuICAgICAgfSxcclxuICAgIH07XHJcbiAgICBjb25zdCB1cmwgPSB0aGlzLmRvbWFpbl9vcmlnaW4gKyAnL2FwaS91c2Vycy8nIFxyXG4gICAgZmV0Y2godXJsLCByZXF1ZXN0T3B0aW9ucylcclxuICAgICAgLnRoZW4oKGRhdGEpID0+IHtcclxuICAgICAgICBpZiAoIWRhdGEub2spIHtcclxuICAgICAgICAgIHRocm93IEVycm9yKGRhdGEuc3RhdHVzKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGRhdGEuanNvbigpO1xyXG4gICAgICB9KVxyXG4gICAgICAudGhlbigocmVzcG9uc2UpID0+IHtcclxuICAgICAgICB0aGlzLnVzZXJfbGlzdCA9IHJlc3BvbnNlO1xyXG4gICAgICB9KVxyXG4gICAgICAuY2F0Y2goKGVycm9yKSA9PiB7XHJcbiAgICAgICAgY29uc29sZS5sb2coZXJyb3IpO1xyXG4gICAgICB9KTtcclxuICB9O1xyXG5cclxuICBnZXRfc2VsZWN0ZWRfdXNlcl9mcm9tX2lkKGlkKSB7XHJcblxyXG4gICAgZm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IHRoaXMuc2VsZWN0ZWRfdXNlcnMubGVuZ3RoOyBpbmRleCsrKSB7XHJcbiAgICAgIGNvbnN0IHNlbGVjdGVkX3VzZXIgPSB0aGlzLnNlbGVjdGVkX3VzZXJzW2luZGV4XVxyXG4gICAgICBpZiAoc2VsZWN0ZWRfdXNlci5pZCA9PSBpZCkge1xyXG4gICAgICAgIHJldHVybiBzZWxlY3RlZF91c2VyXHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4ge31cclxuXHJcbiAgfVxyXG5cclxuICBjaGVja19uYW1lX3ZhbGlkKG5hbWUpIHtcclxuICAgIHRoaXMubmFtZV92YWxpZCA9IFwiXCI7XHJcbiAgICBsZXQgdmFsaWQgPSB0cnVlO1xyXG4gICAgdmFyIHJlZ2V4ID0gL15bYS16QS1aXFxzLV0rJC87XHJcbiAgICBjb25zdCBmdWxsbmFtZV92YWxpZCA9IHJlZ2V4LnRlc3QobmFtZSk7XHJcbiAgICByZWdleCA9IC9eW2EtekEtWlxcc10rJC87XHJcbiAgICBjb25zdCBmaXJzdG5hbWVfdmFsaWQgPSByZWdleC50ZXN0KG5hbWUpO1xyXG4gICAgaWYgKCEoZnVsbG5hbWVfdmFsaWQpICYmICEoZmlyc3RuYW1lX3ZhbGlkKSkge1xyXG4gICAgICB2YWxpZCA9IGZhbHNlO1xyXG4gICAgfVxyXG4gICAgaWYgKHZhbGlkKSB7XHJcbiAgICAgIHRoaXMubmFtZV92YWxpZCA9IFwiaXMtdmFsaWRcIjtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMubmFtZV92YWxpZCA9IFwiaXMtaW52YWxpZFwiXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBjaGVja19lbWFpbF92YWxpZChlbWFpbCkge1xyXG4gICAgdGhpcy5lbWFpbF92YWxpZCA9IFwiXCI7XHJcbiAgICBjb25zdCByZWdleCA9IC9eW1xcdy1cXC5dK0AoW1xcdy1dK1xcLikrW1xcdy1dezIsNH0kLztcclxuICAgIGNvbnN0IHZhbGlkID0gcmVnZXgudGVzdChlbWFpbCk7XHJcbiAgICBpZiAodmFsaWQpIHtcclxuICAgICAgdGhpcy5lbWFpbF92YWxpZCA9IFwiaXMtdmFsaWRcIjtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuZW1haWxfdmFsaWQgPSBcImlzLWludmFsaWRcIjtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGNoZWNrX3JvbGVfdmFsaWQoKSB7XHJcbiAgICB0aGlzLnJvbGVfdmFsaWQgPSBcImlzLXZhbGlkXCI7XHJcbiAgfVxyXG5cclxuICBjaGVja19wYXNzd29yZF92YWxpZChwYXNzd29yZCkge1xyXG4gICAgdGhpcy5wYXNzd29yZF92YWxpZCA9IFwiXCI7XHJcbiAgICBjb25zdCB2YWxpZCA9IHRoaXMuaXNfc3Ryb25nX2Vub3VnaChwYXNzd29yZCk7XHJcbiAgICBpZiAodmFsaWQpIHtcclxuICAgICAgdGhpcy5wYXNzd29yZF92YWxpZCA9IFwiaXMtdmFsaWRcIjtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMucGFzc3dvcmRfdmFsaWQgPSBcImlzLWludmFsaWRcIjtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGlzX3N0cm9uZ19lbm91Z2gocGFzc3dvcmQpIHtcclxuICAgIGxldCBzdHJvbmdfZW5vdWdoID0gdHJ1ZTtcclxuXHJcbiAgICAvLyBBdCBsZWFzdCA4IGNoYXJhY3RlcnMgbG9uZ1xyXG4gICAgaWYgKHBhc3N3b3JkLmxlbmd0aCA8IDgpIHtcclxuICAgICAgc3Ryb25nX2Vub3VnaCA9IGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIGlmIChwYXNzd29yZC5sZW5ndGggPiA2NCkge1xyXG4gICAgICBzdHJvbmdfZW5vdWdoID0gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gQ291bnQgdGhlIG9jY3VycmVlbmNlcyBvZiBlYWNoIGNoYXJhY3RlclxyXG4gICAgbGV0IGNoYXJhY3Rlcl9kaWN0aW9uYXJ5ID0ge307XHJcbiAgICBmb3IgKGxldCBjaGFyYWN0ZXIgb2YgcGFzc3dvcmQpIHtcclxuICAgICAgdHJ5IHtcclxuICAgICAgICBjaGFyYWN0ZXJfZGljdGlvbmFyeVtjaGFyYWN0ZXJdID0gY2hhcmFjdGVyX2RpY3Rpb25hcnlbY2hhcmFjdGVyXSArIDE7XHJcbiAgICAgIH0gY2F0Y2gge1xyXG4gICAgICAgIGNoYXJhY3Rlcl9kaWN0aW9uYXJ5W2NoYXJhY3Rlcl0gPSAxO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gSWYgYW55IGNoYXJhY3RlciBtYWtlcyB1cCBtb3JlIHRoYW4gaGFsZlxyXG4gICAgZm9yIChsZXQgY2hhcmFjdGVyIGluIGNoYXJhY3Rlcl9kaWN0aW9uYXJ5KSB7XHJcbiAgICAgIGxldCBjb3VudCA9IGNoYXJhY3Rlcl9kaWN0aW9uYXJ5W2NoYXJhY3Rlcl07XHJcbiAgICAgIGlmIChjb3VudCAvIHBhc3N3b3JkLmxlbmd0aCA+IDAuNSkge1xyXG4gICAgICAgIHN0cm9uZ19lbm91Z2ggPSBmYWxzZTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIElmIHRoZXJlIGFyZW4ndCBhdCBsZWFzdCAzIGRpZmZlcmVudCBjaGFyYWN0ZXJzXHJcbiAgICBpZiAoT2JqZWN0LmtleXMoY2hhcmFjdGVyX2RpY3Rpb25hcnkpLmxlbmd0aCA8IDMpIHtcclxuICAgICAgc3Ryb25nX2Vub3VnaCA9IGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIENoZWNrIGlmIGl0IGlzIGluIHRoZSBsaXN0IG9mIGJhZCBwYXNzd29yZHNcclxuXHJcbiAgICBsZXQgbGV0dGVycyA9IFtcclxuICAgICAgXCJhXCIsXHJcbiAgICAgIFwiYlwiLFxyXG4gICAgICBcImNcIixcclxuICAgICAgXCJkXCIsXHJcbiAgICAgIFwiZVwiLFxyXG4gICAgICBcImZcIixcclxuICAgICAgXCJnXCIsXHJcbiAgICAgIFwiaFwiLFxyXG4gICAgICBcImlcIixcclxuICAgICAgXCJqXCIsXHJcbiAgICAgIFwia1wiLFxyXG4gICAgICBcImxcIixcclxuICAgICAgXCJtXCIsXHJcbiAgICAgIFwiblwiLFxyXG4gICAgICBcIm9cIixcclxuICAgICAgXCJwXCIsXHJcbiAgICAgIFwicVwiLFxyXG4gICAgICBcInJcIixcclxuICAgICAgXCJzXCIsXHJcbiAgICAgIFwidFwiLFxyXG4gICAgICBcInVcIixcclxuICAgICAgXCJ2XCIsXHJcbiAgICAgIFwid1wiLFxyXG4gICAgICBcInhcIixcclxuICAgICAgXCJ5XCIsXHJcbiAgICAgIFwielwiLFxyXG4gICAgXTtcclxuXHJcbiAgICAvLyBDaGVjayBpdCBoYXMgYXQgbGVhc3Qgb25lIHVwcGVyY2FzZSBjaGFyYWN0ZXJcclxuICAgIGxldCBoYXNfdXBwZXJfY2FzZSA9IGZhbHNlO1xyXG4gICAgZm9yIChsZXQgY2hhcmFjdGVyIG9mIHBhc3N3b3JkKSB7XHJcbiAgICAgIGlmICghbGV0dGVycy5pbmNsdWRlcyhjaGFyYWN0ZXIudG9Mb3dlckNhc2UoKSkpIHtcclxuICAgICAgICBjb250aW51ZTtcclxuICAgICAgfVxyXG4gICAgICBpZiAoY2hhcmFjdGVyID09PSBjaGFyYWN0ZXIudG9VcHBlckNhc2UoKSkge1xyXG4gICAgICAgIGhhc191cHBlcl9jYXNlID0gdHJ1ZTtcclxuICAgICAgICBicmVhaztcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgaWYgKCFoYXNfdXBwZXJfY2FzZSkge1xyXG4gICAgICBzdHJvbmdfZW5vdWdoID0gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gQ2hlY2sgaXQgaGFzIGF0IGxlYXN0IG9uZSBsb3dlcmNhc2UgY2hhcmFjdGVyXHJcbiAgICBsZXQgaGFzX2xvd2VyX2Nhc2UgPSBmYWxzZTtcclxuICAgIGZvciAobGV0IGNoYXJhY3RlciBvZiBwYXNzd29yZCkge1xyXG4gICAgICBpZiAoIWxldHRlcnMuaW5jbHVkZXMoY2hhcmFjdGVyLnRvTG93ZXJDYXNlKCkpKSB7XHJcbiAgICAgICAgY29udGludWU7XHJcbiAgICAgIH1cclxuICAgICAgaWYgKGNoYXJhY3RlciA9PT0gY2hhcmFjdGVyLnRvTG93ZXJDYXNlKCkpIHtcclxuICAgICAgICBoYXNfbG93ZXJfY2FzZSA9IHRydWU7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIGlmICghaGFzX2xvd2VyX2Nhc2UpIHtcclxuICAgICAgc3Ryb25nX2Vub3VnaCA9IGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIENoZWNrIGl0IGhhcyBhdCBsZWFzdCBvbmUgaW50ZWdlclxyXG4gICAgbGV0IGhhc19pbnRlZ2VyID0gZmFsc2U7XHJcbiAgICBmb3IgKGxldCBjaGFyYWN0ZXIgb2YgcGFzc3dvcmQpIHtcclxuICAgICAgdHJ5IHtcclxuICAgICAgICBjaGFyYWN0ZXIgPSBwYXJzZUludChjaGFyYWN0ZXIpO1xyXG4gICAgICAgIGhhc19pbnRlZ2VyID0gdHJ1ZTtcclxuICAgICAgICBicmVhaztcclxuICAgICAgfSBjYXRjaCB7IH1cclxuICAgIH1cclxuICAgIGlmICghaGFzX2ludGVnZXIpIHtcclxuICAgICAgc3Ryb25nX2Vub3VnaCA9IGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIEFhMXBjaDVndGhkZncgc2hvdWxkIHBhc3NcclxuICAgIC8vIEFhMS0tLS0tIHNob3VsZCBmYWlsIGFzIHRvbyBtYW55IHJlcGVhdHNcclxuICAgIC8vIEFhLWFjYnlwZ2h0LSBzaG91bGQgZmFpbCBhcyBubyBkaWdpdFxyXG4gICAgLy8gYWExaGxycGR2dyBzaG91bGQgZmFpbCBhcyBubyB1cHBlcmNhc2VcclxuICAgIC8vIEFHMVBIRFJGVlNJTldQIHNob3VsZCBmYWlsIGFzIG5vIGxvd2VyY2FzZVxyXG4gICAgLy8gQWExaGxycCBzaG91bGQgZmFpbCBhcyB0b28gc2hvcnQgYWExaGxycGR2d1xyXG5cclxuICAgIHJldHVybiBzdHJvbmdfZW5vdWdoO1xyXG4gIH1cclxuXHJcbn0iLCJleHBvcnQgY2xhc3MgTWVzc2FnZXMge1xyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coXCJNZXNzYWdlcyBoYXMgYmVlbiBpbnN0YW50aWF0ZWQuXCIpXHJcbiAgICAgICAgdGhpcy5tZXNzYWdlX2FycmF5ID0gW11cclxuICAgICAgICAvLyB0aGlzLmN1cnJlbnRfbWVzc2FnZSA9IHt9O1xyXG4gICAgfVxyXG5cclxuICAgIGFkZF9tZXNzYWdlKG1lc3NhZ2UsIHR5cGUpIHtcclxuICAgICAgICBsZXQgbWVzc2FnZV9kaWN0ID0ge307XHJcbiAgICAgICAgbWVzc2FnZV9kaWN0Lm1lc3NhZ2UgPSBtZXNzYWdlO1xyXG4gICAgICAgIG1lc3NhZ2VfZGljdC50eXBlID0gdHlwZTtcclxuICAgICAgICB0aGlzLm1lc3NhZ2VfYXJyYXkucHVzaChtZXNzYWdlX2RpY3QpO1xyXG4gICAgICAgIHJldHVybiB0aGlzLm1lc3NhZ2VfYXJyYXk7XHJcbiAgICB9XHJcbn0iLCJleHBvcnQgY2xhc3MgRGlhbG9ndWVfR3VpZGUge1xyXG4gICAgY29uc3RydWN0b3IodXNlciwgbWVzc2FnZXMsIGRvbWFpbl9vcmlnaW4pIHtcclxuICAgICAgICB0aGlzLnVzZXIgPSB1c2VyO1xyXG4gICAgICAgIHRoaXMubWVzc2FnZXMgPSBtZXNzYWdlcztcclxuICAgICAgICB0aGlzLmRvbWFpbl9vcmlnaW4gPSBkb21haW5fb3JpZ2luO1xyXG4gICAgICAgIHRoaXMubmV3X2RpYWxvZ3VlID0ge307XHJcbiAgICAgICAgdGhpcy5uZXdfcG9pbnQgPSBcIlwiO1xyXG4gICAgICAgIHRoaXMubmV3X3F1ZXN0aW9uID0ge307XHJcbiAgICAgICAgdGhpcy5uZXdfcXVlc3Rpb24udGV4dCA9IFwiXCI7XHJcbiAgICAgICAgdGhpcy5uZXdfcXVlc3Rpb24udGltZV9hbGxvdHRlZCA9IDA7XHJcbiAgICAgICAgdGhpcy5uZXdfcXVlc3Rpb24ucG9pbnRzID0gW107XHJcbiAgICAgICAgdGhpcy5uZXdfZGlhbG9ndWUudGl0bGUgPSBcIlwiO1xyXG4gICAgICAgIHRoaXMubmV3X2RpYWxvZ3VlLmRlc2NyaXB0aW9uID0gXCJcIjtcclxuICAgICAgICB0aGlzLm5ld19kaWFsb2d1ZS5xdWVzdGlvbl9zZXQgPSBbXTtcclxuICAgICAgICB0aGlzLmRpYWxvZ3VlX3RvX2VkaXQgPSB7fTtcclxuICAgICAgICB0aGlzLmRpYWxvZ3VlX3RvX2VkaXQudGl0bGUgPSBcIlwiO1xyXG4gICAgICAgIHRoaXMuZGlhbG9ndWVfdG9fZWRpdC5kZXNjcmlwdGlvbiA9IFwiXCI7XHJcbiAgICAgICAgdGhpcy5kaWFsb2d1ZV90b19lZGl0LnF1ZXN0aW9uX3NldCA9IFtdO1xyXG4gICAgICAgIHRoaXMuZGlhbG9ndWVfZ3VpZGVfdGl0bGUgPSBcIlwiO1xyXG4gICAgICAgIHRoaXMucXVlc3Rpb25fc2V0ID0gW107XHJcbiAgICAgICAgdGhpcy5kaWFsb2d1ZV9ndWlkZXMgPSBbXTtcclxuICAgICAgICB0aGlzLmRpYWxvZ3VlX3NlbGVjdF9vcHRpb25zID0gW11cclxuICAgIH1cclxuXHJcbiAgICByZW1vdmVfcG9pbnQoaW5kZXgpIHtcclxuICAgICAgICB0aGlzLm5ld19xdWVzdGlvbi5wb2ludHMuc3BsaWNlKGluZGV4LCAxKTtcclxuICAgIH1cclxuXHJcbiAgICBhZGRfcG9pbnQoKSB7XHJcbiAgICAgICAgdGhpcy5uZXdfcXVlc3Rpb24ucG9pbnRzLnB1c2godGhpcy5uZXdfcG9pbnQpO1xyXG4gICAgICAgIHRoaXMubmV3X3BvaW50ID0gXCJcIjtcclxuICAgIH1cclxuXHJcbiAgICBhZGRfcXVlc3Rpb24oKSB7XHJcbiAgICAgICAgaWYgKHRoaXMubmV3X3F1ZXN0aW9uLnRleHQgJiYgdGhpcy5uZXdfcXVlc3Rpb24udGltZV9hbGxvdHRlZCA+IDAgJiYgdGhpcy5uZXdfcXVlc3Rpb24ucG9pbnRzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgdGhpcy5uZXdfZGlhbG9ndWUucXVlc3Rpb25fc2V0LnB1c2godGhpcy5uZXdfcXVlc3Rpb24pO1xyXG4gICAgICAgICAgICB0aGlzLm5ld19xdWVzdGlvbiA9IHt9O1xyXG4gICAgICAgICAgICB0aGlzLm5ld19xdWVzdGlvbi50ZXh0ID0gXCJcIjtcclxuICAgICAgICAgICAgdGhpcy5uZXdfcXVlc3Rpb24udGltZV9hbGxvdHRlZCA9IDA7XHJcbiAgICAgICAgICAgIHRoaXMubmV3X3F1ZXN0aW9uLnBvaW50cyA9IFtdO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBhcGlfY3JlYXRlX2RpYWxvZ3VlX2d1aWRlKCkge1xyXG4gICAgICAgIGNvbnN0IHBheWxvYWQgPSB0aGlzLm5ld19kaWFsb2d1ZTtcclxuICAgICAgICBjb25zb2xlLmxvZyhwYXlsb2FkKVxyXG4gICAgICAgIGNvbnN0IHJlcXVlc3Rfb3B0aW9ucyA9IHtcclxuICAgICAgICAgICAgbWV0aG9kOiBcIlBPU1RcIixcclxuICAgICAgICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgICAgICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXHJcbiAgICAgICAgICAgICAgICBBdXRob3JpemF0aW9uOiBgQmVhcmVyICR7dGhpcy51c2VyLnNlc3Npb25fand0fWAsXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHBheWxvYWQpLFxyXG4gICAgICAgIH07XHJcbiAgICAgICAgY29uc3QgdXJsID0gdGhpcy5kb21haW5fb3JpZ2luICsgXCIvYXBpL2RpYWxvZ3VlL1wiO1xyXG4gICAgICAgIHRoaXMud2FpdGluZ19mb3JfcmVzcG9uc2UgPSB0cnVlO1xyXG4gICAgICAgIGZldGNoKHVybCwgcmVxdWVzdF9vcHRpb25zKVxyXG4gICAgICAgICAgICAudGhlbigocmVzcG9uc2UpID0+IHJlc3BvbnNlLmpzb24oKSlcclxuICAgICAgICAgICAgLnRoZW4oKGFwaV9vYmplY3QpID0+IHtcclxuICAgICAgICAgICAgICAgIGlmIChhcGlfb2JqZWN0LnJjID09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLm1lc3NhZ2VzLmFkZF9tZXNzYWdlKGFwaV9vYmplY3QubWVzc2FnZSwgXCJzdWNjZXNzXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMud2FpdGluZ19mb3JfcmVzcG9uc2UgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5tZXNzYWdlcy5hZGRfbWVzc2FnZShhcGlfb2JqZWN0Lm1lc3NhZ2UsIFwiZGFuZ2VyXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMud2FpdGluZ19mb3JfcmVzcG9uc2UgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLmNhdGNoKChlcnJvcikgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyb3IpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgYXBpX2RlbGV0ZV9ndWlkZShkaWFsb2d1ZV9pZCkge1xyXG4gICAgICAgIGNvbnN0IHJlcXVlc3Rfb3B0aW9ucyA9IHtcclxuICAgICAgICAgICAgbWV0aG9kOiBcIkRFTEVURVwiLFxyXG4gICAgICAgICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgICAgICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcclxuICAgICAgICAgICAgICAgIEF1dGhvcml6YXRpb246IGBCZWFyZXIgJHt0aGlzLnVzZXIuc2Vzc2lvbl9qd3R9YCxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICB9O1xyXG4gICAgICAgIGNvbnN0IHVybCA9IHRoaXMuZG9tYWluX29yaWdpbiArIFwiL2FwaS9kaWFsb2d1ZS9cIiArIGRpYWxvZ3VlX2lkO1xyXG4gICAgICAgIGZldGNoKHVybCwgcmVxdWVzdF9vcHRpb25zKVxyXG4gICAgICAgICAgICAudGhlbigocmVzcG9uc2UpID0+IHJlc3BvbnNlLmpzb24oKSlcclxuICAgICAgICAgICAgLnRoZW4oKGFwaV9vYmplY3QpID0+IHtcclxuICAgICAgICAgICAgICAgIGlmIChhcGlfb2JqZWN0LnJjID09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLm1lc3NhZ2VzLmFkZF9tZXNzYWdlKGFwaV9vYmplY3QubWVzc2FnZSwgXCJzdWNjZXNzXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHRoaXMuZGlhbG9ndWVfZ3VpZGVzKVxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLm1lc3NhZ2VzLmFkZF9tZXNzYWdlKGFwaV9vYmplY3QubWVzc2FnZSwgXCJkYW5nZXJcIik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuIHRydWVcclxuICAgIH1cclxuXHJcbiAgICBhcGlfdXBkYXRlX2RpYWxvZ3VlX2d1aWRlKGd1aWRlKSB7XHJcbiAgICAgICAgY29uc3QgcGF5bG9hZCA9IHtcclxuICAgICAgICAgICAgZGlhbG9ndWVfZ3VpZGVfdGl0bGU6IGd1aWRlLnRpdGxlLFxyXG4gICAgICAgICAgICBxdWVzdGlvbl9zZXQ6IGd1aWRlLnF1ZXN0aW9uX3NldCxcclxuICAgICAgICB9O1xyXG4gICAgICAgIGNvbnNvbGUubG9nKHBheWxvYWQpXHJcbiAgICAgICAgY29uc3QgcmVxdWVzdF9vcHRpb25zID0ge1xyXG4gICAgICAgICAgICBtZXRob2Q6IFwiUFVUXCIsXHJcbiAgICAgICAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICAgICAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxyXG4gICAgICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogYEJlYXJlciAke3RoaXMudXNlci5zZXNzaW9uX2p3dH1gLFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShwYXlsb2FkKSxcclxuICAgICAgICB9O1xyXG4gICAgICAgIGNvbnN0IHVybCA9IHRoaXMuZG9tYWluX29yaWdpbiArIGAvYXBpL2RpYWxvZ3VlLyR7Z3VpZGUuaWR9YDtcclxuICAgICAgICB0aGlzLndhaXRpbmdfZm9yX3Jlc3BvbnNlID0gdHJ1ZTtcclxuICAgICAgICBmZXRjaCh1cmwsIHJlcXVlc3Rfb3B0aW9ucylcclxuICAgICAgICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiByZXNwb25zZS5qc29uKCkpXHJcbiAgICAgICAgICAgIC50aGVuKChhcGlfb2JqZWN0KSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAoYXBpX29iamVjdC5yYyA9PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5tZXNzYWdlcy5hZGRfbWVzc2FnZShhcGlfb2JqZWN0Lm1lc3NhZ2UsIFwic3VjY2Vzc1wiKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLndhaXRpbmdfZm9yX3Jlc3BvbnNlID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMubWVzc2FnZXMuYWRkX21lc3NhZ2UoYXBpX29iamVjdC5tZXNzYWdlLCBcImRhbmdlclwiKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLndhaXRpbmdfZm9yX3Jlc3BvbnNlID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIGdldF9kaWFsb2d1ZV9ndWlkZXNfZnJvbV9hcGkoKSB7XHJcbiAgICAgICAgLy8gZ3JhYnMgYWxsIGRpYWxvZ3VlcyBmcm9tIGJhY2tlbmQgYW5kIHNldHMgYXMgY2xhc3MgdmFyaWFibGVcclxuICAgICAgICBjb25zdCB1cmwgPSBgJHt0aGlzLmRvbWFpbl9vcmlnaW59L2FwaS92aWRlb19jYWxsL2RpYWxvZ3Vlc2A7XHJcblxyXG4gICAgICAgIGNvbnN0IHJlcXVlc3RPcHRpb25zID0ge1xyXG4gICAgICAgICAgICBtZXRob2Q6IFwiR0VUXCIsXHJcbiAgICAgICAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICAgICAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxyXG4gICAgICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogYEJlYXJlciAke3RoaXMudXNlci5zZXNzaW9uX2p3dH1gLFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGZldGNoKHVybCwgcmVxdWVzdE9wdGlvbnMpXHJcbiAgICAgICAgICAgIC50aGVuKHJlc3BvbnNlID0+IHJlc3BvbnNlLmpzb24oKSlcclxuICAgICAgICAgICAgLnRoZW4ocmVzcG9uc2VfcGFja2FnZSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2VfcGFja2FnZS5yYyA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGlhbG9ndWVfZ3VpZGVzID0gcmVzcG9uc2VfcGFja2FnZS5ndWlkZXM7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZCB0byBmZXRjaCBndWlkZXM6JywgcmVzcG9uc2VfcGFja2FnZS5tc2cpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAuY2F0Y2goZXJyb3IgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignQVBJIEVycm9yOicsIGVycm9yKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2VuZXJhdGVfc2VsZWN0X29wdGlvbnMoKSB7XHJcbiAgICAgICAgLy8gY3JlYXRlcyBsaXN0IG9mIGRpYWxvZ3VlIG5hbWVzIGZvciBzZWxlY3QgY29tcG9uZW50XHJcbiAgICAgICAgZm9yIChsZXQgZGlhbG9ndWVfaW5kZXg9MDsgZGlhbG9ndWVfaW5kZXg8IHRoaXMuZGlhbG9ndWVfZ3VpZGVzLmxlbmd0aDsgZGlhbG9ndWVfaW5kZXgrKykge1xyXG4gICAgICAgICAgICB0aGlzLmRpYWxvZ3VlX3NlbGVjdF9vcHRpb25zLnB1c2godGhpcy5kaWFsb2d1ZV9ndWlkZXNbZGlhbG9ndWVfaW5kZXhdLnRpdGxlKVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIFxyXG4gICAgcmVtb3ZlX3F1ZXN0aW9uKGluZGV4KSB7XHJcbiAgICAgICAgdGhpcy5xdWVzdGlvbl9zZXQuc3BsaWNlKGluZGV4LCAxKVxyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIGxvYWRfZGlhbG9ndWUoc2VsZWN0ZWRfZGlhbG9ndWUpIHtcclxuICAgICAgICAvLyB0YWtlcyB0aGUgc2VsZWN0ZWQgZGlhbG9ndWUgYW5kIG1ha2VzIHJlYWR5IGZvciBkaWFsb2d1ZSB0byBiZWdpblxyXG4gICAgIFxyXG4gICAgICAgIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCB0aGlzLmRpYWxvZ3VlX2d1aWRlcy5sZW5ndGg7IGluZGV4ICsrKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmRpYWxvZ3VlX2d1aWRlc1tpbmRleF0udGl0bGUgPT09IHNlbGVjdGVkX2RpYWxvZ3VlKSB7XHJcbiAgICAgICAgICAgIHRoaXMubG9hZGVkX2RpYWxvZ3VlX2RpY3Q9IHRoaXMuZGlhbG9ndWVfZ3VpZGVzW2luZGV4XVxyXG4gICAgICAgICAgICBicmVha1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsIjx0ZW1wbGF0ZT5cclxuICAgIDxkaXYgY2xhc3M9XCJ0b2FzdCB0b2FzdC1lbmRcIj5cclxuICAgICAgICA8dWw+XHJcbiAgICAgICAgICAgIDxsaSB2LWZvcj1cIihtZXNzYWdlLCBpbmRleCkgaW4gdGhpcy5tZXNzYWdlcy5tZXNzYWdlX2FycmF5XCIgOmtleT1cImluZGV4XCJcclxuICAgICAgICAgICAgICAgIGNsYXNzPVwiZmxleCBpdGVtcy1jZW50ZXIgdy1mdWxsIG1heC13LW1kIHAtNCBtYi00IHRleHQtZ3JheS01MDAgYmctd2hpdGUgcm91bmRlZC1sZyBzaGFkb3cgZGFyazp0ZXh0LWdyYXktNDAwIGRhcms6YmctZ3JheS04MDBcIlxyXG4gICAgICAgICAgICAgICAgcm9sZT1cImFsZXJ0XCI+XHJcbiAgICAgICAgICAgICAgICA8ZGl2IDpjbGFzcz1cIntcclxuICAgICAgICAgICAgICAgICd0b2FzdC1zdWNjZXNzJzogbWVzc2FnZS50eXBlID09PSAnc3VjY2VzcycsXHJcbiAgICAgICAgICAgICAgICAndG9hc3QtZXJyb3InOiBtZXNzYWdlLnR5cGUgPT09ICdlcnJvcicsXHJcbiAgICAgICAgICAgICAgICAndG9hc3Qtd2FybmluZyc6IG1lc3NhZ2UudHlwZSA9PT0gJ2RhbmdlcicsXHJcbiAgICAgICAgICAgICAgICAndG9hc3QtaW5mbyc6IG1lc3NhZ2UudHlwZSA9PT0gJ2luZm8nXHJcbiAgICAgICAgICAgIH1cIiBjbGFzcz1cImlubGluZS1mbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciBmbGV4LXNocmluay0wIHctOCBoLTggcm91bmRlZC1sZ1wiPlxyXG4gICAgICAgICAgICAgICAgICAgIDwhLS0gSWNvbiBTVkcgZm9yIGVhY2ggdHlwZSwgeW91IG1pZ2h0IHdhbnQgdG8gYWRqdXN0IHRoZXNlIHBlciB0eXBlIC0tPlxyXG4gICAgICAgICAgICAgICAgICAgIDxzdmcgY2xhc3M9XCJ3LTUgaC01XCIgYXJpYS1oaWRkZW49XCJ0cnVlXCIgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiIGZpbGw9XCJjdXJyZW50Q29sb3JcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2aWV3Qm94PVwiMCAwIDIwIDIwXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwhLS0gWW91IGNhbiBtb2RpZnkgdGhpcyBwYXRoIG9yIHVzZSBkaWZmZXJlbnQgU1ZHcyBiYXNlZCBvbiBtZXNzYWdlLnR5cGUgLS0+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxwYXRoIHYtaWY9XCJtZXNzYWdlLnR5cGUgPT09ICdzdWNjZXNzJ1wiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkPVwiTTEwIC41YTkuNSA5LjUgMCAxIDAgOS41IDkuNUE5LjUxIDkuNTEgMCAwIDAgMTAgLjVabTMuNzA3IDguMjA3LTQgNGExIDEgMCAwIDEtMS40MTQgMGwtMi0yYTEgMSAwIDAgMSAxLjQxNC0xLjQxNEw5IDEwLjU4NmwzLjI5My0zLjI5M2ExIDEgMCAwIDEgMS40MTQgMS40MTRaXCIgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPHBhdGggdi1pZj1cIm1lc3NhZ2UudHlwZSA9PT0gJ2RhbmdlcidcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZD1cIk0xMCAuNWE5LjUgOS41IDAgMSAwIDkuNSA5LjVBOS41MSA5LjUxIDAgMCAwIDEwIC41Wm0zLjcwNyAxMS43OTNhMSAxIDAgMSAxLTEuNDE0IDEuNDE0TDEwIDExLjQxNGwtMi4yOTMgMi4yOTNhMSAxIDAgMCAxLTEuNDE0LTEuNDE0TDguNTg2IDEwIDYuMjkzIDcuNzA3YTEgMSAwIDAgMSAxLjQxNC0xLjQxNEwxMCA4LjU4NmwyLjI5My0yLjI5M2ExIDEgMCAwIDEgMS40MTQgMS40MTRMMTEuNDE0IDEwbDIuMjkzIDIuMjkzWlwiIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxwYXRoIHYtaWY9XCJtZXNzYWdlLnR5cGUgPT09ICdlcnJvcidcIiBkPVwibTEgMSA2IDZtMCAwIDYgNk03IDdsNi02TTcgN2wtNiA2XCIgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPHBhdGggdi1pZj1cIm1lc3NhZ2UudHlwZSA9PT0gJ2luZm8nXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGQ9XCJNMTAgLjVhOS41IDkuNSAwIDEgMCA5LjUgOS41QTkuNTEgOS41MSAwIDAgMCAxMCAuNVptMy43MDcgOC4yMDctNCA0YTEgMSAwIDAgMS0xLjQxNCAwbC0yLTJhMSAxIDAgMCAxIDEuNDE0LTEuNDE0TDkgMTAuNTg2bDMuMjkzLTMuMjkzYTEgMSAwIDAgMSAxLjQxNCAxLjQxNFpcIiAvPlxyXG4gICAgICAgICAgICAgICAgICAgIDwvc3ZnPlxyXG4gICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwic3Itb25seVwiPkljb248L3NwYW4+XHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJtbC0zIG1yLTIgdGV4dC1zbSBmb250LW5vcm1hbFwiPnt7IG1lc3NhZ2UubWVzc2FnZSB9fTwvZGl2PlxyXG4gICAgICAgICAgICAgICAgPGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgY2xhc3M9XCJtbC1hdXRvIC1teC0xLjUgLW15LTEuNSBidG4gYnRuLXNtXCIgQGNsaWNrPVwidGhpcy5kZWxldGVfbWVzc2FnZShpbmRleClcIj5cclxuICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cInNyLW9ubHlcIj5DbG9zZTwvc3Bhbj5cclxuICAgICAgICAgICAgICAgICAgICA8c3ZnIGNsYXNzPVwidy0zIGgtM1wiIGFyaWEtaGlkZGVuPVwidHJ1ZVwiIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiBmaWxsPVwibm9uZVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZpZXdCb3g9XCIwIDAgMTQgMTRcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPHBhdGggc3Ryb2tlPVwiY3VycmVudENvbG9yXCIgc3Ryb2tlLWxpbmVjYXA9XCJyb3VuZFwiIHN0cm9rZS1saW5lam9pbj1cInJvdW5kXCIgc3Ryb2tlLXdpZHRoPVwiMlwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkPVwibTEgMSA2IDZtMCAwIDYgNk03IDdsNi02TTcgN2wtNiA2XCIgLz5cclxuICAgICAgICAgICAgICAgICAgICA8L3N2Zz5cclxuICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxyXG4gICAgICAgICAgICA8L2xpPlxyXG4gICAgICAgIDwvdWw+XHJcbiAgICA8L2Rpdj5cclxuPC90ZW1wbGF0ZT5cclxuXHJcbjxzY3JpcHQ+XHJcbmV4cG9ydCBkZWZhdWx0IHtcclxuICAgIHByb3BzOiBbXHJcbiAgICAgICAgXCJtZXNzYWdlc1wiXHJcbiAgICBdLFxyXG4gICAgbWV0aG9kczoge1xyXG4gICAgICAgIGRlbGV0ZV9tZXNzYWdlKGluZGV4KSB7XHJcbiAgICAgICAgICAgIHRoaXMubWVzc2FnZXMubWVzc2FnZV9hcnJheS5zcGxpY2UoaW5kZXgsIDEpO1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcbn1cclxuPC9zY3JpcHQ+IiwiZXhwb3J0IGRlZmF1bHQgXCJfX1ZJVEVfQVNTRVRfXzUyMTU3NjZhX19cIiIsIjx0ZW1wbGF0ZT5cclxuICA8bmF2IGNsYXNzPVwiYmctd2hpdGUgYm9yZGVyLWdyYXktMjAwIGRhcms6YmctZ3JheS05MDAgZGFyazpib3JkZXItZ3JheS03MDBcIj5cclxuICAgIDxkaXYgY2xhc3M9XCJtYXgtdy1zY3JlZW4teGwgZmxleCBmbGV4LXdyYXAgaXRlbXMtY2VudGVyIGp1c3RpZnktYmV0d2VlbiBteC1hdXRvIHAtNFwiPlxyXG4gICAgICA8cm91dGVyLWxpbmsgY2xhc3M9XCJuYXZiYXItYnJhbmRcIiB0bz1cIi9cIj5cclxuICAgICAgICA8aW1nIHNyYz1cIi4uL2Fzc2V0cy9kdF9zcXVhZF9sb2dvLnBuZ1wiIGFsdD1cIkxvZ29cIiBzdHlsZT1cIndpZHRoOjc1cHg7XCI+XHJcbiAgICAgIDwvcm91dGVyLWxpbms+XHJcbiAgICAgIDxidXR0b24gZGF0YS1jb2xsYXBzZS10b2dnbGU9XCJuYXZiYXItZHJvcGRvd25cIiB0eXBlPVwiYnV0dG9uXCJcclxuICAgICAgICBjbGFzcz1cIm5hdi1kcm9wZG93blwiXHJcbiAgICAgICAgYXJpYS1jb250cm9scz1cIm5hdmJhci1kcm9wZG93blwiIGFyaWEtZXhwYW5kZWQ9XCJmYWxzZVwiPlxyXG4gICAgICAgIDxzdmcgY2xhc3M9XCJ3LTUgaC01XCIgYXJpYS1oaWRkZW49XCJ0cnVlXCIgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiIGZpbGw9XCJub25lXCIgdmlld0JveD1cIjAgMCAxNyAxNFwiPlxyXG4gICAgICAgICAgPHBhdGggc3Ryb2tlPVwiY3VycmVudENvbG9yXCIgc3Ryb2tlLWxpbmVjYXA9XCJyb3VuZFwiIHN0cm9rZS1saW5lam9pbj1cInJvdW5kXCIgc3Ryb2tlLXdpZHRoPVwiMlwiXHJcbiAgICAgICAgICAgIGQ9XCJNMSAxaDE1TTEgN2gxNU0xIDEzaDE1XCIgLz5cclxuICAgICAgICA8L3N2Zz5cclxuICAgICAgPC9idXR0b24+XHJcbiAgICAgIDxkaXYgY2xhc3M9XCJoaWRkZW4gdy1mdWxsIG1kOmJsb2NrIG1kOnctYXV0b1wiIGlkPVwibmF2YmFyLWRyb3Bkb3duXCI+XHJcbiAgICAgICAgPHVsXHJcbiAgICAgICAgICBjbGFzcz1cIm5hdi1saXN0XCI+XHJcbiAgICAgICAgICA8bGk+XHJcbiAgICAgICAgICAgIDxSb3V0ZXJMaW5rIHRvPVwiL1wiIGNsYXNzPVwibmF2LWxpbmtcIj5Ib21lPC9Sb3V0ZXJMaW5rPlxyXG4gICAgICAgICAgPC9saT5cclxuICAgICAgICAgIDxsaT5cclxuICAgICAgICAgICAgPFJvdXRlckxpbmsgdG89XCIvdHJhbnNjcmlwdF9zZWFyY2hcIiBjbGFzcz1cIm5hdi1saW5rXCI+U2VhcmNoIENoYXRzPC9Sb3V0ZXJMaW5rPlxyXG4gICAgICAgICAgPC9saT5cclxuICAgICAgICAgIDxsaT5cclxuICAgICAgICAgICAgPFJvdXRlckxpbmsgdG89XCIvY3J1ZFwiIGNsYXNzPVwibmF2LWxpbmtcIlxyXG4gICAgICAgICAgICA+TWFuYWdlIFVzZXJzPC9Sb3V0ZXJMaW5rXHJcbiAgICAgICAgICA+XHJcbiAgICAgICAgICA8L2xpPlxyXG4gICAgICAgICAgPGxpPlxyXG4gICAgICAgICAgICA8Um91dGVyTGluayB0bz1cIi9kaWFsb2d1ZVwiIGNsYXNzPVwibmF2LWxpbmtcIlxyXG4gICAgICAgICAgICA+TWFuYWdlIERpYWxvZ3VlczwvUm91dGVyTGlua1xyXG4gICAgICAgICAgPlxyXG4gICAgICAgICAgPC9saT5cclxuICAgICAgICA8L3VsPlxyXG4gICAgICA8L2Rpdj5cclxuICAgIDwvZGl2PlxyXG4gIDwvbmF2PlxyXG5cclxuPC90ZW1wbGF0ZT5cclxuXHJcbjxzY3JpcHQ+XHJcbmV4cG9ydCBkZWZhdWx0IHtcclxuICBwcm9wczogW1xyXG4gICAgXCJ1c2VyXCIsXHJcbiAgICBcIm1lc3NhZ2VzXCJcclxuICBdLFxyXG4gIGRhdGEoKSB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBpc05hdmJhckNvbGxhcHNlZDogdHJ1ZSxcclxuICAgICAgaXNEcm9wZG93bk9wZW46IGZhbHNlLFxyXG4gICAgfTtcclxuICB9LFxyXG4gIG1ldGhvZHM6IHtcclxuICAgIHRvZ2dsZU5hdmJhckNvbGxhcHNlKCkge1xyXG4gICAgICB0aGlzLmlzTmF2YmFyQ29sbGFwc2VkID0gIXRoaXMuaXNOYXZiYXJDb2xsYXBzZWQ7XHJcbiAgICB9LFxyXG4gICAgdG9nZ2xlRHJvcGRvd24oKSB7XHJcbiAgICAgIHRoaXMuaXNEcm9wZG93bk9wZW4gPSAhdGhpcy5pc0Ryb3Bkb3duT3BlbjtcclxuICAgIH0sXHJcbiAgfVxyXG59XHJcbjwvc2NyaXB0PlxyXG5cclxuPHN0eWxlPlxyXG4ubmF2LWxpbms6aG92ZXIge1xyXG4gIGNvbG9yOiBsaWdodGdyZXk7XHJcbn1cclxuPC9zdHlsZT4iLCJcclxuY2xhc3MgUm9sZXMge1xyXG4gICAgLy8gY2xhc3MgbWV0aG9kc1xyXG4gICAgY29uc3RydWN0b3IoZG9tYWluX29yaWdpbiwgdXNlcikge1xyXG4gICAgICAgIHRoaXMub2JqZWN0TmFtZSA9IFwiUm9sZXNcIlxyXG4gICAgICAgIHRoaXMubW9kZWxfbmFtZSA9IFwiUm9sZVwiXHJcbiAgICAgICAgdGhpcy5kb21haW5fb3JpZ2luID0gZG9tYWluX29yaWdpblxyXG4gICAgICAgIHRoaXMudXNlciA9IHVzZXJcclxuXHJcbiAgICAgICAgdGhpcy5yb2xlcyA9IFtdXHJcblxyXG4gICAgICAgIHRoaXMudGVzdCA9IFwiaGV5IHRoZXJlIGZyb20gUm9sZXNcIlxyXG5cclxuICAgICAgICB0aGlzLmNvdW50ZXIgPSAwXHJcblxyXG4gICAgfVxyXG5cclxuICAgIGdldF9yb2xlc19mcm9tX2FwaSgpIHtcclxuICAgICAgICBjb25zdCB1cmwgPSB0aGlzLmRvbWFpbl9vcmlnaW4gKyBcIi9hcGkvdXNlcnMvcm9sZXNcIlxyXG5cclxuICAgICAgICBjb25zdCByZXF1ZXN0T3B0aW9ucyA9IHtcclxuICAgICAgICAgICAgbWV0aG9kOiBcIkdFVFwiLFxyXG4gICAgICAgICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXHJcbiAgICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogYEJlYXJlciAke3RoaXMudXNlci5zZXNzaW9uX2p3dH1gLFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgZmV0Y2godXJsLCByZXF1ZXN0T3B0aW9ucylcclxuICAgICAgICAgICAgLnRoZW4ocmVzcG9uc2UgPT4gcmVzcG9uc2UuanNvbigpKVxyXG4gICAgICAgICAgICAudGhlbihyZXNwb25zZV9wYWNrYWdlID0+IHtcclxuICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZV9wYWNrYWdlLnJjPT0wKXtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnJvbGVzID0gcmVzcG9uc2VfcGFja2FnZS5yZWNvcmRzXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5jYXRjaChlcnJvciA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvcilcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHJldHVyblxyXG5cclxuICAgIH1cclxuXHJcbiAgICBnZXRfcm9sZXMoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucm9sZXNcclxuICAgIH1cclxuXHJcblxyXG4gICAgZ2V0X3JvbGVfZnJvbV9pZChpZCkge1xyXG5cclxuICAgICAgICBmb3IgKGxldCByb2xlX2luZGV4ID0gMDsgcm9sZV9pbmRleCA8IHRoaXMucm9sZXMubGVuZ3RoOyByb2xlX2luZGV4KyspIHtcclxuICAgICAgICAgICAgY29uc3Qgcm9sZSA9IHRoaXMucm9sZXNbcm9sZV9pbmRleF1cclxuICAgICAgICAgICAgaWYgKHJvbGUuaWQgPT0gaWQpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiByb2xlXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiB7fVxyXG4gICAgfVxyXG5cclxuICAgIGdldF9yb2xlX2Zyb21fbmFtZShuYW1lKSB7XHJcblxyXG4gICAgICAgIGZvciAobGV0IHJvbGVfaW5kZXggPSAwOyByb2xlX2luZGV4IDwgdGhpcy5yb2xlcy5sZW5ndGg7IHJvbGVfaW5kZXgrKykge1xyXG4gICAgICAgICAgICBjb25zdCByb2xlID0gdGhpcy5yb2xlc1tyb2xlX2luZGV4XVxyXG4gICAgICAgICAgICBpZiAocm9sZS5uYW1lID09IG5hbWUpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiByb2xlXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiB7fVxyXG4gICAgfVxyXG5cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgUm9sZXMiLCI8c2NyaXB0IHNldHVwPlxyXG48L3NjcmlwdD5cclxuXHJcbjx0ZW1wbGF0ZT5cclxuICAgIDxkaXYgY2xhc3M9XCJtaW4tdy1mdWxsIG1pbi1oLWZ1bGwgZmxleCBmbGV4LWNvbCBqdXN0aWZ5LWJldHdlZW5cIj5cclxuICAgICAgICA8TmF2YmFyIDp1c2VyPVwidXNlclwiIDptZXNzYWdlcz1cIm1lc3NhZ2VzXCIgOnJvbGVzPVwicm9sZXNcIiB2LWlmPVwiKHRoaXMudXNlci5sb2dnZWRfaW4pXCIgLz5cclxuICAgICAgICA8Um91dGVyVmlldyA6dXNlcnM9XCJ1c2Vyc1wiIDp1c2VyPVwidXNlclwiIDpyb2xlcz1cInJvbGVzXCIgOm1lc3NhZ2VzPVwibWVzc2FnZXNcIiA6ZGlhbG9ndWVfZ3VpZGU9XCJkaWFsb2d1ZV9ndWlkZVwiLz5cclxuICAgICAgICA8IS0tIFRoZXNlIGJyZWFrcyBzdG9wIHRoZSBib3R0b20gb2YgdGhlIHBhZ2UgY29udGVudCBmcm9tIGRpc2FwZWFyaW5nIGJlaGluZCB0aGUgZml4ZWQgZm9vdGVyIC0tPlxyXG4gICAgICAgIDxkaXY+PGJyPiA8YnI+IDxicj4gPC9kaXY+XHJcbiAgICAgICAgPGZvb3RlciBjbGFzcz1cImZpeGVkIGJvdHRvbS0wIHctZnVsbCBiZy1ncmF5LTkwMCB0ZXh0LXdoaXRlIHB5LTFcIiBzdHlsZT1cInotaW5kZXg6IDk5OTk7XCI+XHJcbiAgICAgICAgICAgIDxNZXNzYWdlRGlzcGxheSB2LWJpbmQ6bWVzc2FnZXM9XCJtZXNzYWdlc1wiIC8+XHJcbiAgICAgICAgICAgIDxociBjbGFzcz1cIm14LTQgbXktMVwiPlxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZmxleCBqdXN0aWZ5LWJldHdlZW5cIj5cclxuICAgICAgICAgICAgICAgIDxwIGNsYXNzPVwibXgtMyBteS0xXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgRm9yIHN1cHBvcnQsIHBsZWFzZSBlbWFpbCB1cyBhdDogc3VwcG9ydEB0aGViaWd0ZWFtLmNvLnVrXHJcbiAgICAgICAgICAgICAgICAgICAgPCEtLSBJUCBBZGRyZXNzOiB7eyB0aGlzLnVzZXIuaXBfYWRkcmVzcyB9fSAtLT5cclxuICAgICAgICAgICAgICAgIDwvcD5cclxuICAgICAgICAgICAgICAgIDxwIGNsYXNzPVwibXgtMyBteS0xXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgPGkgY2xhc3NOYW1lPVwiaWNvbiBiaS1jLWNpcmNsZSBtcy0wIHBzLTBcIiBzdHlsZT1cImZvbnQtc2l6ZTogMS4wcmVtO1wiPjwvaT4gMjAyMyAtIGR0LXNxdWFkIEx0ZCZuYnNwXHJcbiAgICAgICAgICAgICAgICA8L3A+XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICA8aHIgY2xhc3M9XCJteC00IG15LTFcIj5cclxuICAgICAgICA8L2Zvb3Rlcj5cclxuICAgIDwvZGl2PlxyXG48L3RlbXBsYXRlPlxyXG5cclxuPHNjcmlwdD5cclxuaW1wb3J0IHsgcmVhY3RpdmUgfSBmcm9tIFwidnVlXCI7XHJcbmltcG9ydCB7IFVzZXIgfSBmcm9tIFwiLi9qcy9Vc2VyXCI7XHJcbmltcG9ydCB7IFVzZXJzIH0gZnJvbSBcIi4vanMvVXNlcnNcIjtcclxuaW1wb3J0IHsgTWVzc2FnZXMgfSBmcm9tIFwiLi9qcy9NZXNzYWdlc1wiO1xyXG5pbXBvcnQgeyBEaWFsb2d1ZV9HdWlkZSB9IGZyb20gXCIuL2pzL0RpYWxvZ3VlR3VpZGVcIlxyXG5pbXBvcnQgTWVzc2FnZURpc3BsYXkgZnJvbSBcIi4vY29tcG9uZW50cy9NZXNzYWdlRGlzcGxheS52dWVcIjtcclxuaW1wb3J0IE5hdmJhciBmcm9tIFwiLi9jb21wb25lbnRzL05hdmJhci52dWVcIjtcclxuaW1wb3J0IFJvbGVzIGZyb20gXCIuL2pzL1JvbGVzXCI7XHJcblxyXG4vLyBpbXBvcnQgeyB1c2VSb3V0ZSB9IGZyb20gJ3Z1ZS1yb3V0ZXInO1xyXG5leHBvcnQgZGVmYXVsdCB7XHJcbiAgICBkYXRhKCkge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHVzZXJzOiB7fSxcclxuICAgICAgICAgICAgdXNlcjoge30sXHJcbiAgICAgICAgICAgIG1lc3NhZ2VzOiB7fSxcclxuICAgICAgICAgICAgcm9sZXM6IHt9LFxyXG4gICAgICAgICAgICBkaWFsb2d1ZV9ndWlkZToge30sXHJcbiAgICAgICAgICAgIC8vIG5lZWRzVnVlUmVmcmVzaDogeyBcImRhdGFcIjogZmFsc2UsIFwia2VlcExvb3BpbmdcIjogZmFsc2UgfSxcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG4gICAgY3JlYXRlZCgpIHtcclxuICAgICAgICBsZXQgZG9tYWluX29yaWdpbiA9IHdpbmRvdy5sb2NhdGlvbi5vcmlnaW5cclxuICAgICAgICBpZiAoZG9tYWluX29yaWdpbi5zbGljZSgtNSkgPT0gXCI6NTE3M1wiKSB7XHJcbiAgICAgICAgICAgIGRvbWFpbl9vcmlnaW4gPSBkb21haW5fb3JpZ2luLnJlcGxhY2UoXCI6NTE3M1wiLCBcIjo1MDAwXCIpXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IG1lc3NhZ2VzID0gcmVhY3RpdmUobmV3IE1lc3NhZ2VzKCkpO1xyXG4gICAgICAgIGNvbnN0IHVzZXIgPSByZWFjdGl2ZShuZXcgVXNlcihtZXNzYWdlcywgZG9tYWluX29yaWdpbikpO1xyXG4gICAgICAgIGNvbnN0IHJvbGVzID0gcmVhY3RpdmUobmV3IFJvbGVzKGRvbWFpbl9vcmlnaW4sIHVzZXIpKTtcclxuICAgICAgICBjb25zdCB1c2VycyA9IHJlYWN0aXZlKG5ldyBVc2Vycyh1c2VyLCBtZXNzYWdlcywgZG9tYWluX29yaWdpbiwgcm9sZXMpKTtcclxuICAgICAgICBjb25zdCBkaWFsb2d1ZV9ndWlkZSA9IHJlYWN0aXZlKG5ldyBEaWFsb2d1ZV9HdWlkZSh1c2VyLCBtZXNzYWdlcywgZG9tYWluX29yaWdpbikpO1xyXG4gICAgICAgIHRoaXMudXNlciA9IHVzZXI7XHJcbiAgICAgICAgdGhpcy5yb2xlcyA9IHJvbGVzO1xyXG4gICAgICAgIHRoaXMudXNlcnMgPSB1c2VycztcclxuICAgICAgICB0aGlzLm1lc3NhZ2VzID0gbWVzc2FnZXM7XHJcbiAgICAgICAgdGhpcy5kaWFsb2d1ZV9ndWlkZSA9IGRpYWxvZ3VlX2d1aWRlO1xyXG4gICAgICAgIHRoaXMuY2hlY2tfaW52YWxpZF90b2tlbigpO1xyXG4gICAgICAgIHRoaXMuY2hlY2tfdG9rZW5fdmFsaWRpdHkoKTtcclxuICAgICAgICAvLyB0aGlzLm5lZWRzVnVlUmVmcmVzaC5rZWVwTG9vcGluZyA9IHRydWU7XHJcbiAgICAgICAgLy8gdGhpcy5jaGVja19sb2dnZWRfaW4oKTtcclxuICAgICAgICAvLyB0aGlzLnZ1ZVJlZnJlc2goKVxyXG4gICAgfSxcclxuICAgIGNvbXBvbmVudHM6IHtcclxuICAgICAgICBNZXNzYWdlRGlzcGxheSxcclxuICAgICAgICBOYXZiYXJcclxuICAgIH0sXHJcbiAgICBtZXRob2RzOiB7XHJcbiAgICAgICAgY2hlY2tfaW52YWxpZF90b2tlbigpIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMudXNlci5pbnZhbGlkX3Rva2VuID09IHRydWUpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMudXNlci5sb2dvdXQoKVxyXG4gICAgICAgICAgICAgICAgdGhpcy5tZXNzYWdlcy5hZGRfbWVzc2FnZShcIlNlc3Npb24gZXhwaXJlZCwgcGxlYXNlIGxvZ2luLlwiLCBcImRhbmdlclwiKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsgbmFtZTogXCJsb2dpblwiIH0pO1xyXG4gICAgICAgICAgICAgICAgdGhpcy51c2VyLmxvZ2dlZF9pbiA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgdGhpcy51c2VyLmludmFsaWRfdG9rZW4gPSBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBzZXRUaW1lb3V0KHRoaXMuY2hlY2tfaW52YWxpZF90b2tlbiwgMjAwMClcclxuICAgICAgICB9LFxyXG4gICAgICAgIGNoZWNrX3Rva2VuX3ZhbGlkaXR5KCkge1xyXG4gICAgICAgICAgICBpZiAodGhpcy51c2VyLmxvZ2dlZF9pbiA9PSB0cnVlKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnVzZXIuY2hlY2tfdG9rZW5fdmFsaWRpdHkoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBzZXRUaW1lb3V0KHRoaXMuY2hlY2tfdG9rZW5fdmFsaWRpdHksIDMwMDAwKVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgdnVlX3JlZnJlc2goKSB7XHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm5lZWRzX3Z1ZV9yZWZyZXNoLmRhdGEgPSB0aGlzLnVzZXIuaXBfYWRkcmVzc1xyXG4gICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG5cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKHRoaXMubmVlZHNfdnVlX3JlZnJlc2gua2VlcF9sb29waW5nKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBteV90aW1lb3V0ID0gc2V0VGltZW91dCh0aGlzLnZ1ZV9yZWZyZXNoLCA1MDApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICBjaGVja19sb2dnZWRfaW4oKSB7XHJcbiAgICAgICAgICAgIC8vIHRoaXMudXNlcnMuY3VycmVudF91c2VyID0gdGhpcy51c2VyLmNoZWNrX2xvZ2dlZF9pbigpO1xyXG4gICAgICAgICAgICBpZiAoISh0aGlzLnVzZXIubG9nZ2VkX2luKSAmJiAhKHRoaXMuJHJvdXRlci5uYW1lID09IFwicGFzc3dvcmRyZXNldFwiKSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goXCJsb2dpblwiKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHNldFRpbWVvdXQodGhpcy5jaGVja19sb2dnZWRfaW4sIDUwMDApO1xyXG4gICAgICAgIH0sXHJcbiAgICB9XHJcbn1cclxuPC9zY3JpcHQ+XHJcblxyXG48c3R5bGUgc2NvcGVkPjwvc3R5bGU+XHJcbiIsIi8qIVxuICAqIHZ1ZS1yb3V0ZXIgdjQuMy4wXG4gICogKGMpIDIwMjQgRWR1YXJkbyBTYW4gTWFydGluIE1vcm90ZVxuICAqIEBsaWNlbnNlIE1JVFxuICAqL1xuaW1wb3J0IHsgZ2V0Q3VycmVudEluc3RhbmNlLCBpbmplY3QsIG9uVW5tb3VudGVkLCBvbkRlYWN0aXZhdGVkLCBvbkFjdGl2YXRlZCwgY29tcHV0ZWQsIHVucmVmLCB3YXRjaEVmZmVjdCwgZGVmaW5lQ29tcG9uZW50LCByZWFjdGl2ZSwgaCwgcHJvdmlkZSwgcmVmLCB3YXRjaCwgc2hhbGxvd1JlZiwgc2hhbGxvd1JlYWN0aXZlLCBuZXh0VGljayB9IGZyb20gJ3Z1ZSc7XG5pbXBvcnQgeyBzZXR1cERldnRvb2xzUGx1Z2luIH0gZnJvbSAnQHZ1ZS9kZXZ0b29scy1hcGknO1xuXG5jb25zdCBpc0Jyb3dzZXIgPSB0eXBlb2YgZG9jdW1lbnQgIT09ICd1bmRlZmluZWQnO1xuXG5mdW5jdGlvbiBpc0VTTW9kdWxlKG9iaikge1xuICAgIHJldHVybiBvYmouX19lc01vZHVsZSB8fCBvYmpbU3ltYm9sLnRvU3RyaW5nVGFnXSA9PT0gJ01vZHVsZSc7XG59XG5jb25zdCBhc3NpZ24gPSBPYmplY3QuYXNzaWduO1xuZnVuY3Rpb24gYXBwbHlUb1BhcmFtcyhmbiwgcGFyYW1zKSB7XG4gICAgY29uc3QgbmV3UGFyYW1zID0ge307XG4gICAgZm9yIChjb25zdCBrZXkgaW4gcGFyYW1zKSB7XG4gICAgICAgIGNvbnN0IHZhbHVlID0gcGFyYW1zW2tleV07XG4gICAgICAgIG5ld1BhcmFtc1trZXldID0gaXNBcnJheSh2YWx1ZSlcbiAgICAgICAgICAgID8gdmFsdWUubWFwKGZuKVxuICAgICAgICAgICAgOiBmbih2YWx1ZSk7XG4gICAgfVxuICAgIHJldHVybiBuZXdQYXJhbXM7XG59XG5jb25zdCBub29wID0gKCkgPT4geyB9O1xuLyoqXG4gKiBUeXBlc2FmZSBhbHRlcm5hdGl2ZSB0byBBcnJheS5pc0FycmF5XG4gKiBodHRwczovL2dpdGh1Yi5jb20vbWljcm9zb2Z0L1R5cGVTY3JpcHQvcHVsbC80ODIyOFxuICovXG5jb25zdCBpc0FycmF5ID0gQXJyYXkuaXNBcnJheTtcblxuZnVuY3Rpb24gd2Fybihtc2cpIHtcbiAgICAvLyBhdm9pZCB1c2luZyAuLi5hcmdzIGFzIGl0IGJyZWFrcyBpbiBvbGRlciBFZGdlIGJ1aWxkc1xuICAgIGNvbnN0IGFyZ3MgPSBBcnJheS5mcm9tKGFyZ3VtZW50cykuc2xpY2UoMSk7XG4gICAgY29uc29sZS53YXJuLmFwcGx5KGNvbnNvbGUsIFsnW1Z1ZSBSb3V0ZXIgd2Fybl06ICcgKyBtc2ddLmNvbmNhdChhcmdzKSk7XG59XG5cbi8qKlxuICogRW5jb2RpbmcgUnVsZXMg4pCjID0gU3BhY2UgUGF0aDog4pCjIFwiIDwgPiAjID8geyB9IFF1ZXJ5OiDikKMgXCIgPCA+ICMgJiA9IEhhc2g6IOKQoyBcIlxuICogPCA+IGBcbiAqXG4gKiBPbiB0b3Agb2YgdGhhdCwgdGhlIFJGQzM5ODYgKGh0dHBzOi8vdG9vbHMuaWV0Zi5vcmcvaHRtbC9yZmMzOTg2I3NlY3Rpb24tMi4yKVxuICogZGVmaW5lcyBzb21lIGV4dHJhIGNoYXJhY3RlcnMgdG8gYmUgZW5jb2RlZC4gTW9zdCBicm93c2VycyBkbyBub3QgZW5jb2RlIHRoZW1cbiAqIGluIGVuY29kZVVSSSBodHRwczovL2dpdGh1Yi5jb20vd2hhdHdnL3VybC9pc3N1ZXMvMzY5LCBzbyBpdCBtYXkgYmUgc2FmZXIgdG9cbiAqIGFsc28gZW5jb2RlIGAhJygpKmAuIExlYXZpbmcgdW4tZW5jb2RlZCBvbmx5IEFTQ0lJIGFscGhhbnVtZXJpYyhgYS16QS1aMC05YClcbiAqIHBsdXMgYC0uX35gLiBUaGlzIGV4dHJhIHNhZmV0eSBzaG91bGQgYmUgYXBwbGllZCB0byBxdWVyeSBieSBwYXRjaGluZyB0aGVcbiAqIHN0cmluZyByZXR1cm5lZCBieSBlbmNvZGVVUklDb21wb25lbnQgZW5jb2RlVVJJIGFsc28gZW5jb2RlcyBgW1xcXV5gLiBgXFxgXG4gKiBzaG91bGQgYmUgZW5jb2RlZCB0byBhdm9pZCBhbWJpZ3VpdHkuIEJyb3dzZXJzIChJRSwgRkYsIEMpIHRyYW5zZm9ybSBhIGBcXGBcbiAqIGludG8gYSBgL2AgaWYgZGlyZWN0bHkgdHlwZWQgaW4uIFRoZSBfYmFja3RpY2tfIChgYGBgYCkgc2hvdWxkIGFsc28gYmVcbiAqIGVuY29kZWQgZXZlcnl3aGVyZSBiZWNhdXNlIHNvbWUgYnJvd3NlcnMgbGlrZSBGRiBlbmNvZGUgaXQgd2hlbiBkaXJlY3RseVxuICogd3JpdHRlbiB3aGlsZSBvdGhlcnMgZG9uJ3QuIFNhZmFyaSBhbmQgSUUgZG9uJ3QgZW5jb2RlIGBgXCI8Pnt9YGBgIGluIGhhc2guXG4gKi9cbi8vIGNvbnN0IEVYVFJBX1JFU0VSVkVEX1JFID0gL1shJygpKl0vZ1xuLy8gY29uc3QgZW5jb2RlUmVzZXJ2ZWRSZXBsYWNlciA9IChjOiBzdHJpbmcpID0+ICclJyArIGMuY2hhckNvZGVBdCgwKS50b1N0cmluZygxNilcbmNvbnN0IEhBU0hfUkUgPSAvIy9nOyAvLyAlMjNcbmNvbnN0IEFNUEVSU0FORF9SRSA9IC8mL2c7IC8vICUyNlxuY29uc3QgU0xBU0hfUkUgPSAvXFwvL2c7IC8vICUyRlxuY29uc3QgRVFVQUxfUkUgPSAvPS9nOyAvLyAlM0RcbmNvbnN0IElNX1JFID0gL1xcPy9nOyAvLyAlM0ZcbmNvbnN0IFBMVVNfUkUgPSAvXFwrL2c7IC8vICUyQlxuLyoqXG4gKiBOT1RFOiBJdCdzIG5vdCBjbGVhciB0byBtZSBpZiB3ZSBzaG91bGQgZW5jb2RlIHRoZSArIHN5bWJvbCBpbiBxdWVyaWVzLCBpdFxuICogc2VlbXMgdG8gYmUgbGVzcyBmbGV4aWJsZSB0aGFuIG5vdCBkb2luZyBzbyBhbmQgSSBjYW4ndCBmaW5kIG91dCB0aGUgbGVnYWN5XG4gKiBzeXN0ZW1zIHJlcXVpcmluZyB0aGlzIGZvciByZWd1bGFyIHJlcXVlc3RzIGxpa2UgdGV4dC9odG1sLiBJbiB0aGUgc3RhbmRhcmQsXG4gKiB0aGUgZW5jb2Rpbmcgb2YgdGhlIHBsdXMgY2hhcmFjdGVyIGlzIG9ubHkgbWVudGlvbmVkIGZvclxuICogYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkXG4gKiAoaHR0cHM6Ly91cmwuc3BlYy53aGF0d2cub3JnLyN1cmxlbmNvZGVkLXBhcnNpbmcpIGFuZCBtb3N0IGJyb3dzZXJzIHNlZW1zIGxvXG4gKiBsZWF2ZSB0aGUgcGx1cyBjaGFyYWN0ZXIgYXMgaXMgaW4gcXVlcmllcy4gVG8gYmUgbW9yZSBmbGV4aWJsZSwgd2UgYWxsb3cgdGhlXG4gKiBwbHVzIGNoYXJhY3RlciBvbiB0aGUgcXVlcnksIGJ1dCBpdCBjYW4gYWxzbyBiZSBtYW51YWxseSBlbmNvZGVkIGJ5IHRoZSB1c2VyLlxuICpcbiAqIFJlc291cmNlczpcbiAqIC0gaHR0cHM6Ly91cmwuc3BlYy53aGF0d2cub3JnLyN1cmxlbmNvZGVkLXBhcnNpbmdcbiAqIC0gaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvMTYzNDI3MS91cmwtZW5jb2RpbmctdGhlLXNwYWNlLWNoYXJhY3Rlci1vci0yMFxuICovXG5jb25zdCBFTkNfQlJBQ0tFVF9PUEVOX1JFID0gLyU1Qi9nOyAvLyBbXG5jb25zdCBFTkNfQlJBQ0tFVF9DTE9TRV9SRSA9IC8lNUQvZzsgLy8gXVxuY29uc3QgRU5DX0NBUkVUX1JFID0gLyU1RS9nOyAvLyBeXG5jb25zdCBFTkNfQkFDS1RJQ0tfUkUgPSAvJTYwL2c7IC8vIGBcbmNvbnN0IEVOQ19DVVJMWV9PUEVOX1JFID0gLyU3Qi9nOyAvLyB7XG5jb25zdCBFTkNfUElQRV9SRSA9IC8lN0MvZzsgLy8gfFxuY29uc3QgRU5DX0NVUkxZX0NMT1NFX1JFID0gLyU3RC9nOyAvLyB9XG5jb25zdCBFTkNfU1BBQ0VfUkUgPSAvJTIwL2c7IC8vIH1cbi8qKlxuICogRW5jb2RlIGNoYXJhY3RlcnMgdGhhdCBuZWVkIHRvIGJlIGVuY29kZWQgb24gdGhlIHBhdGgsIHNlYXJjaCBhbmQgaGFzaFxuICogc2VjdGlvbnMgb2YgdGhlIFVSTC5cbiAqXG4gKiBAaW50ZXJuYWxcbiAqIEBwYXJhbSB0ZXh0IC0gc3RyaW5nIHRvIGVuY29kZVxuICogQHJldHVybnMgZW5jb2RlZCBzdHJpbmdcbiAqL1xuZnVuY3Rpb24gY29tbW9uRW5jb2RlKHRleHQpIHtcbiAgICByZXR1cm4gZW5jb2RlVVJJKCcnICsgdGV4dClcbiAgICAgICAgLnJlcGxhY2UoRU5DX1BJUEVfUkUsICd8JylcbiAgICAgICAgLnJlcGxhY2UoRU5DX0JSQUNLRVRfT1BFTl9SRSwgJ1snKVxuICAgICAgICAucmVwbGFjZShFTkNfQlJBQ0tFVF9DTE9TRV9SRSwgJ10nKTtcbn1cbi8qKlxuICogRW5jb2RlIGNoYXJhY3RlcnMgdGhhdCBuZWVkIHRvIGJlIGVuY29kZWQgb24gdGhlIGhhc2ggc2VjdGlvbiBvZiB0aGUgVVJMLlxuICpcbiAqIEBwYXJhbSB0ZXh0IC0gc3RyaW5nIHRvIGVuY29kZVxuICogQHJldHVybnMgZW5jb2RlZCBzdHJpbmdcbiAqL1xuZnVuY3Rpb24gZW5jb2RlSGFzaCh0ZXh0KSB7XG4gICAgcmV0dXJuIGNvbW1vbkVuY29kZSh0ZXh0KVxuICAgICAgICAucmVwbGFjZShFTkNfQ1VSTFlfT1BFTl9SRSwgJ3snKVxuICAgICAgICAucmVwbGFjZShFTkNfQ1VSTFlfQ0xPU0VfUkUsICd9JylcbiAgICAgICAgLnJlcGxhY2UoRU5DX0NBUkVUX1JFLCAnXicpO1xufVxuLyoqXG4gKiBFbmNvZGUgY2hhcmFjdGVycyB0aGF0IG5lZWQgdG8gYmUgZW5jb2RlZCBxdWVyeSB2YWx1ZXMgb24gdGhlIHF1ZXJ5XG4gKiBzZWN0aW9uIG9mIHRoZSBVUkwuXG4gKlxuICogQHBhcmFtIHRleHQgLSBzdHJpbmcgdG8gZW5jb2RlXG4gKiBAcmV0dXJucyBlbmNvZGVkIHN0cmluZ1xuICovXG5mdW5jdGlvbiBlbmNvZGVRdWVyeVZhbHVlKHRleHQpIHtcbiAgICByZXR1cm4gKGNvbW1vbkVuY29kZSh0ZXh0KVxuICAgICAgICAvLyBFbmNvZGUgdGhlIHNwYWNlIGFzICssIGVuY29kZSB0aGUgKyB0byBkaWZmZXJlbnRpYXRlIGl0IGZyb20gdGhlIHNwYWNlXG4gICAgICAgIC5yZXBsYWNlKFBMVVNfUkUsICclMkInKVxuICAgICAgICAucmVwbGFjZShFTkNfU1BBQ0VfUkUsICcrJylcbiAgICAgICAgLnJlcGxhY2UoSEFTSF9SRSwgJyUyMycpXG4gICAgICAgIC5yZXBsYWNlKEFNUEVSU0FORF9SRSwgJyUyNicpXG4gICAgICAgIC5yZXBsYWNlKEVOQ19CQUNLVElDS19SRSwgJ2AnKVxuICAgICAgICAucmVwbGFjZShFTkNfQ1VSTFlfT1BFTl9SRSwgJ3snKVxuICAgICAgICAucmVwbGFjZShFTkNfQ1VSTFlfQ0xPU0VfUkUsICd9JylcbiAgICAgICAgLnJlcGxhY2UoRU5DX0NBUkVUX1JFLCAnXicpKTtcbn1cbi8qKlxuICogTGlrZSBgZW5jb2RlUXVlcnlWYWx1ZWAgYnV0IGFsc28gZW5jb2RlcyB0aGUgYD1gIGNoYXJhY3Rlci5cbiAqXG4gKiBAcGFyYW0gdGV4dCAtIHN0cmluZyB0byBlbmNvZGVcbiAqL1xuZnVuY3Rpb24gZW5jb2RlUXVlcnlLZXkodGV4dCkge1xuICAgIHJldHVybiBlbmNvZGVRdWVyeVZhbHVlKHRleHQpLnJlcGxhY2UoRVFVQUxfUkUsICclM0QnKTtcbn1cbi8qKlxuICogRW5jb2RlIGNoYXJhY3RlcnMgdGhhdCBuZWVkIHRvIGJlIGVuY29kZWQgb24gdGhlIHBhdGggc2VjdGlvbiBvZiB0aGUgVVJMLlxuICpcbiAqIEBwYXJhbSB0ZXh0IC0gc3RyaW5nIHRvIGVuY29kZVxuICogQHJldHVybnMgZW5jb2RlZCBzdHJpbmdcbiAqL1xuZnVuY3Rpb24gZW5jb2RlUGF0aCh0ZXh0KSB7XG4gICAgcmV0dXJuIGNvbW1vbkVuY29kZSh0ZXh0KS5yZXBsYWNlKEhBU0hfUkUsICclMjMnKS5yZXBsYWNlKElNX1JFLCAnJTNGJyk7XG59XG4vKipcbiAqIEVuY29kZSBjaGFyYWN0ZXJzIHRoYXQgbmVlZCB0byBiZSBlbmNvZGVkIG9uIHRoZSBwYXRoIHNlY3Rpb24gb2YgdGhlIFVSTCBhcyBhXG4gKiBwYXJhbS4gVGhpcyBmdW5jdGlvbiBlbmNvZGVzIGV2ZXJ5dGhpbmcge0BsaW5rIGVuY29kZVBhdGh9IGRvZXMgcGx1cyB0aGVcbiAqIHNsYXNoIChgL2ApIGNoYXJhY3Rlci4gSWYgYHRleHRgIGlzIGBudWxsYCBvciBgdW5kZWZpbmVkYCwgcmV0dXJucyBhbiBlbXB0eVxuICogc3RyaW5nIGluc3RlYWQuXG4gKlxuICogQHBhcmFtIHRleHQgLSBzdHJpbmcgdG8gZW5jb2RlXG4gKiBAcmV0dXJucyBlbmNvZGVkIHN0cmluZ1xuICovXG5mdW5jdGlvbiBlbmNvZGVQYXJhbSh0ZXh0KSB7XG4gICAgcmV0dXJuIHRleHQgPT0gbnVsbCA/ICcnIDogZW5jb2RlUGF0aCh0ZXh0KS5yZXBsYWNlKFNMQVNIX1JFLCAnJTJGJyk7XG59XG4vKipcbiAqIERlY29kZSB0ZXh0IHVzaW5nIGBkZWNvZGVVUklDb21wb25lbnRgLiBSZXR1cm5zIHRoZSBvcmlnaW5hbCB0ZXh0IGlmIGl0XG4gKiBmYWlscy5cbiAqXG4gKiBAcGFyYW0gdGV4dCAtIHN0cmluZyB0byBkZWNvZGVcbiAqIEByZXR1cm5zIGRlY29kZWQgc3RyaW5nXG4gKi9cbmZ1bmN0aW9uIGRlY29kZSh0ZXh0KSB7XG4gICAgdHJ5IHtcbiAgICAgICAgcmV0dXJuIGRlY29kZVVSSUNvbXBvbmVudCgnJyArIHRleHQpO1xuICAgIH1cbiAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJiB3YXJuKGBFcnJvciBkZWNvZGluZyBcIiR7dGV4dH1cIi4gVXNpbmcgb3JpZ2luYWwgdmFsdWVgKTtcbiAgICB9XG4gICAgcmV0dXJuICcnICsgdGV4dDtcbn1cblxuY29uc3QgVFJBSUxJTkdfU0xBU0hfUkUgPSAvXFwvJC87XG5jb25zdCByZW1vdmVUcmFpbGluZ1NsYXNoID0gKHBhdGgpID0+IHBhdGgucmVwbGFjZShUUkFJTElOR19TTEFTSF9SRSwgJycpO1xuLyoqXG4gKiBUcmFuc2Zvcm1zIGEgVVJJIGludG8gYSBub3JtYWxpemVkIGhpc3RvcnkgbG9jYXRpb25cbiAqXG4gKiBAcGFyYW0gcGFyc2VRdWVyeVxuICogQHBhcmFtIGxvY2F0aW9uIC0gVVJJIHRvIG5vcm1hbGl6ZVxuICogQHBhcmFtIGN1cnJlbnRMb2NhdGlvbiAtIGN1cnJlbnQgYWJzb2x1dGUgbG9jYXRpb24uIEFsbG93cyByZXNvbHZpbmcgcmVsYXRpdmVcbiAqIHBhdGhzLiBNdXN0IHN0YXJ0IHdpdGggYC9gLiBEZWZhdWx0cyB0byBgL2BcbiAqIEByZXR1cm5zIGEgbm9ybWFsaXplZCBoaXN0b3J5IGxvY2F0aW9uXG4gKi9cbmZ1bmN0aW9uIHBhcnNlVVJMKHBhcnNlUXVlcnksIGxvY2F0aW9uLCBjdXJyZW50TG9jYXRpb24gPSAnLycpIHtcbiAgICBsZXQgcGF0aCwgcXVlcnkgPSB7fSwgc2VhcmNoU3RyaW5nID0gJycsIGhhc2ggPSAnJztcbiAgICAvLyBDb3VsZCB1c2UgVVJMIGFuZCBVUkxTZWFyY2hQYXJhbXMgYnV0IElFIDExIGRvZXNuJ3Qgc3VwcG9ydCBpdFxuICAgIC8vIFRPRE86IG1vdmUgdG8gbmV3IFVSTCgpXG4gICAgY29uc3QgaGFzaFBvcyA9IGxvY2F0aW9uLmluZGV4T2YoJyMnKTtcbiAgICBsZXQgc2VhcmNoUG9zID0gbG9jYXRpb24uaW5kZXhPZignPycpO1xuICAgIC8vIHRoZSBoYXNoIGFwcGVhcnMgYmVmb3JlIHRoZSBzZWFyY2gsIHNvIGl0J3Mgbm90IHBhcnQgb2YgdGhlIHNlYXJjaCBzdHJpbmdcbiAgICBpZiAoaGFzaFBvcyA8IHNlYXJjaFBvcyAmJiBoYXNoUG9zID49IDApIHtcbiAgICAgICAgc2VhcmNoUG9zID0gLTE7XG4gICAgfVxuICAgIGlmIChzZWFyY2hQb3MgPiAtMSkge1xuICAgICAgICBwYXRoID0gbG9jYXRpb24uc2xpY2UoMCwgc2VhcmNoUG9zKTtcbiAgICAgICAgc2VhcmNoU3RyaW5nID0gbG9jYXRpb24uc2xpY2Uoc2VhcmNoUG9zICsgMSwgaGFzaFBvcyA+IC0xID8gaGFzaFBvcyA6IGxvY2F0aW9uLmxlbmd0aCk7XG4gICAgICAgIHF1ZXJ5ID0gcGFyc2VRdWVyeShzZWFyY2hTdHJpbmcpO1xuICAgIH1cbiAgICBpZiAoaGFzaFBvcyA+IC0xKSB7XG4gICAgICAgIHBhdGggPSBwYXRoIHx8IGxvY2F0aW9uLnNsaWNlKDAsIGhhc2hQb3MpO1xuICAgICAgICAvLyBrZWVwIHRoZSAjIGNoYXJhY3RlclxuICAgICAgICBoYXNoID0gbG9jYXRpb24uc2xpY2UoaGFzaFBvcywgbG9jYXRpb24ubGVuZ3RoKTtcbiAgICB9XG4gICAgLy8gbm8gc2VhcmNoIGFuZCBubyBxdWVyeVxuICAgIHBhdGggPSByZXNvbHZlUmVsYXRpdmVQYXRoKHBhdGggIT0gbnVsbCA/IHBhdGggOiBsb2NhdGlvbiwgY3VycmVudExvY2F0aW9uKTtcbiAgICAvLyBlbXB0eSBwYXRoIG1lYW5zIGEgcmVsYXRpdmUgcXVlcnkgb3IgaGFzaCBgP2Zvbz1mYCwgYCN0aGluZ2BcbiAgICByZXR1cm4ge1xuICAgICAgICBmdWxsUGF0aDogcGF0aCArIChzZWFyY2hTdHJpbmcgJiYgJz8nKSArIHNlYXJjaFN0cmluZyArIGhhc2gsXG4gICAgICAgIHBhdGgsXG4gICAgICAgIHF1ZXJ5LFxuICAgICAgICBoYXNoOiBkZWNvZGUoaGFzaCksXG4gICAgfTtcbn1cbi8qKlxuICogU3RyaW5naWZpZXMgYSBVUkwgb2JqZWN0XG4gKlxuICogQHBhcmFtIHN0cmluZ2lmeVF1ZXJ5XG4gKiBAcGFyYW0gbG9jYXRpb25cbiAqL1xuZnVuY3Rpb24gc3RyaW5naWZ5VVJMKHN0cmluZ2lmeVF1ZXJ5LCBsb2NhdGlvbikge1xuICAgIGNvbnN0IHF1ZXJ5ID0gbG9jYXRpb24ucXVlcnkgPyBzdHJpbmdpZnlRdWVyeShsb2NhdGlvbi5xdWVyeSkgOiAnJztcbiAgICByZXR1cm4gbG9jYXRpb24ucGF0aCArIChxdWVyeSAmJiAnPycpICsgcXVlcnkgKyAobG9jYXRpb24uaGFzaCB8fCAnJyk7XG59XG4vKipcbiAqIFN0cmlwcyBvZmYgdGhlIGJhc2UgZnJvbSB0aGUgYmVnaW5uaW5nIG9mIGEgbG9jYXRpb24ucGF0aG5hbWUgaW4gYSBub24tY2FzZS1zZW5zaXRpdmUgd2F5LlxuICpcbiAqIEBwYXJhbSBwYXRobmFtZSAtIGxvY2F0aW9uLnBhdGhuYW1lXG4gKiBAcGFyYW0gYmFzZSAtIGJhc2UgdG8gc3RyaXAgb2ZmXG4gKi9cbmZ1bmN0aW9uIHN0cmlwQmFzZShwYXRobmFtZSwgYmFzZSkge1xuICAgIC8vIG5vIGJhc2Ugb3IgYmFzZSBpcyBub3QgZm91bmQgYXQgdGhlIGJlZ2lubmluZ1xuICAgIGlmICghYmFzZSB8fCAhcGF0aG5hbWUudG9Mb3dlckNhc2UoKS5zdGFydHNXaXRoKGJhc2UudG9Mb3dlckNhc2UoKSkpXG4gICAgICAgIHJldHVybiBwYXRobmFtZTtcbiAgICByZXR1cm4gcGF0aG5hbWUuc2xpY2UoYmFzZS5sZW5ndGgpIHx8ICcvJztcbn1cbi8qKlxuICogQ2hlY2tzIGlmIHR3byBSb3V0ZUxvY2F0aW9uIGFyZSBlcXVhbC4gVGhpcyBtZWFucyB0aGF0IGJvdGggbG9jYXRpb25zIGFyZVxuICogcG9pbnRpbmcgdG93YXJkcyB0aGUgc2FtZSB7QGxpbmsgUm91dGVSZWNvcmR9IGFuZCB0aGF0IGFsbCBgcGFyYW1zYCwgYHF1ZXJ5YFxuICogcGFyYW1ldGVycyBhbmQgYGhhc2hgIGFyZSB0aGUgc2FtZVxuICpcbiAqIEBwYXJhbSBzdHJpbmdpZnlRdWVyeSAtIEEgZnVuY3Rpb24gdGhhdCB0YWtlcyBhIHF1ZXJ5IG9iamVjdCBvZiB0eXBlIExvY2F0aW9uUXVlcnlSYXcgYW5kIHJldHVybnMgYSBzdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgaXQuXG4gKiBAcGFyYW0gYSAtIGZpcnN0IHtAbGluayBSb3V0ZUxvY2F0aW9ufVxuICogQHBhcmFtIGIgLSBzZWNvbmQge0BsaW5rIFJvdXRlTG9jYXRpb259XG4gKi9cbmZ1bmN0aW9uIGlzU2FtZVJvdXRlTG9jYXRpb24oc3RyaW5naWZ5UXVlcnksIGEsIGIpIHtcbiAgICBjb25zdCBhTGFzdEluZGV4ID0gYS5tYXRjaGVkLmxlbmd0aCAtIDE7XG4gICAgY29uc3QgYkxhc3RJbmRleCA9IGIubWF0Y2hlZC5sZW5ndGggLSAxO1xuICAgIHJldHVybiAoYUxhc3RJbmRleCA+IC0xICYmXG4gICAgICAgIGFMYXN0SW5kZXggPT09IGJMYXN0SW5kZXggJiZcbiAgICAgICAgaXNTYW1lUm91dGVSZWNvcmQoYS5tYXRjaGVkW2FMYXN0SW5kZXhdLCBiLm1hdGNoZWRbYkxhc3RJbmRleF0pICYmXG4gICAgICAgIGlzU2FtZVJvdXRlTG9jYXRpb25QYXJhbXMoYS5wYXJhbXMsIGIucGFyYW1zKSAmJlxuICAgICAgICBzdHJpbmdpZnlRdWVyeShhLnF1ZXJ5KSA9PT0gc3RyaW5naWZ5UXVlcnkoYi5xdWVyeSkgJiZcbiAgICAgICAgYS5oYXNoID09PSBiLmhhc2gpO1xufVxuLyoqXG4gKiBDaGVjayBpZiB0d28gYFJvdXRlUmVjb3Jkc2AgYXJlIGVxdWFsLiBUYWtlcyBpbnRvIGFjY291bnQgYWxpYXNlczogdGhleSBhcmVcbiAqIGNvbnNpZGVyZWQgZXF1YWwgdG8gdGhlIGBSb3V0ZVJlY29yZGAgdGhleSBhcmUgYWxpYXNpbmcuXG4gKlxuICogQHBhcmFtIGEgLSBmaXJzdCB7QGxpbmsgUm91dGVSZWNvcmR9XG4gKiBAcGFyYW0gYiAtIHNlY29uZCB7QGxpbmsgUm91dGVSZWNvcmR9XG4gKi9cbmZ1bmN0aW9uIGlzU2FtZVJvdXRlUmVjb3JkKGEsIGIpIHtcbiAgICAvLyBzaW5jZSB0aGUgb3JpZ2luYWwgcmVjb3JkIGhhcyBhbiB1bmRlZmluZWQgdmFsdWUgZm9yIGFsaWFzT2ZcbiAgICAvLyBidXQgYWxsIGFsaWFzZXMgcG9pbnQgdG8gdGhlIG9yaWdpbmFsIHJlY29yZCwgdGhpcyB3aWxsIGFsd2F5cyBjb21wYXJlXG4gICAgLy8gdGhlIG9yaWdpbmFsIHJlY29yZFxuICAgIHJldHVybiAoYS5hbGlhc09mIHx8IGEpID09PSAoYi5hbGlhc09mIHx8IGIpO1xufVxuZnVuY3Rpb24gaXNTYW1lUm91dGVMb2NhdGlvblBhcmFtcyhhLCBiKSB7XG4gICAgaWYgKE9iamVjdC5rZXlzKGEpLmxlbmd0aCAhPT0gT2JqZWN0LmtleXMoYikubGVuZ3RoKVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgZm9yIChjb25zdCBrZXkgaW4gYSkge1xuICAgICAgICBpZiAoIWlzU2FtZVJvdXRlTG9jYXRpb25QYXJhbXNWYWx1ZShhW2tleV0sIGJba2V5XSkpXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xufVxuZnVuY3Rpb24gaXNTYW1lUm91dGVMb2NhdGlvblBhcmFtc1ZhbHVlKGEsIGIpIHtcbiAgICByZXR1cm4gaXNBcnJheShhKVxuICAgICAgICA/IGlzRXF1aXZhbGVudEFycmF5KGEsIGIpXG4gICAgICAgIDogaXNBcnJheShiKVxuICAgICAgICAgICAgPyBpc0VxdWl2YWxlbnRBcnJheShiLCBhKVxuICAgICAgICAgICAgOiBhID09PSBiO1xufVxuLyoqXG4gKiBDaGVjayBpZiB0d28gYXJyYXlzIGFyZSB0aGUgc2FtZSBvciBpZiBhbiBhcnJheSB3aXRoIG9uZSBzaW5nbGUgZW50cnkgaXMgdGhlXG4gKiBzYW1lIGFzIGFub3RoZXIgcHJpbWl0aXZlIHZhbHVlLiBVc2VkIHRvIGNoZWNrIHF1ZXJ5IGFuZCBwYXJhbWV0ZXJzXG4gKlxuICogQHBhcmFtIGEgLSBhcnJheSBvZiB2YWx1ZXNcbiAqIEBwYXJhbSBiIC0gYXJyYXkgb2YgdmFsdWVzIG9yIGEgc2luZ2xlIHZhbHVlXG4gKi9cbmZ1bmN0aW9uIGlzRXF1aXZhbGVudEFycmF5KGEsIGIpIHtcbiAgICByZXR1cm4gaXNBcnJheShiKVxuICAgICAgICA/IGEubGVuZ3RoID09PSBiLmxlbmd0aCAmJiBhLmV2ZXJ5KCh2YWx1ZSwgaSkgPT4gdmFsdWUgPT09IGJbaV0pXG4gICAgICAgIDogYS5sZW5ndGggPT09IDEgJiYgYVswXSA9PT0gYjtcbn1cbi8qKlxuICogUmVzb2x2ZXMgYSByZWxhdGl2ZSBwYXRoIHRoYXQgc3RhcnRzIHdpdGggYC5gLlxuICpcbiAqIEBwYXJhbSB0byAtIHBhdGggbG9jYXRpb24gd2UgYXJlIHJlc29sdmluZ1xuICogQHBhcmFtIGZyb20gLSBjdXJyZW50TG9jYXRpb24ucGF0aCwgc2hvdWxkIHN0YXJ0IHdpdGggYC9gXG4gKi9cbmZ1bmN0aW9uIHJlc29sdmVSZWxhdGl2ZVBhdGgodG8sIGZyb20pIHtcbiAgICBpZiAodG8uc3RhcnRzV2l0aCgnLycpKVxuICAgICAgICByZXR1cm4gdG87XG4gICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJiAhZnJvbS5zdGFydHNXaXRoKCcvJykpIHtcbiAgICAgICAgd2FybihgQ2Fubm90IHJlc29sdmUgYSByZWxhdGl2ZSBsb2NhdGlvbiB3aXRob3V0IGFuIGFic29sdXRlIHBhdGguIFRyeWluZyB0byByZXNvbHZlIFwiJHt0b31cIiBmcm9tIFwiJHtmcm9tfVwiLiBJdCBzaG91bGQgbG9vayBsaWtlIFwiLyR7ZnJvbX1cIi5gKTtcbiAgICAgICAgcmV0dXJuIHRvO1xuICAgIH1cbiAgICBpZiAoIXRvKVxuICAgICAgICByZXR1cm4gZnJvbTtcbiAgICBjb25zdCBmcm9tU2VnbWVudHMgPSBmcm9tLnNwbGl0KCcvJyk7XG4gICAgY29uc3QgdG9TZWdtZW50cyA9IHRvLnNwbGl0KCcvJyk7XG4gICAgY29uc3QgbGFzdFRvU2VnbWVudCA9IHRvU2VnbWVudHNbdG9TZWdtZW50cy5sZW5ndGggLSAxXTtcbiAgICAvLyBtYWtlIC4gYW5kIC4vIHRoZSBzYW1lICguLi8gPT09IC4uLCAuLi8uLi8gPT09IC4uLy4uKVxuICAgIC8vIHRoaXMgaXMgdGhlIHNhbWUgYmVoYXZpb3IgYXMgbmV3IFVSTCgpXG4gICAgaWYgKGxhc3RUb1NlZ21lbnQgPT09ICcuLicgfHwgbGFzdFRvU2VnbWVudCA9PT0gJy4nKSB7XG4gICAgICAgIHRvU2VnbWVudHMucHVzaCgnJyk7XG4gICAgfVxuICAgIGxldCBwb3NpdGlvbiA9IGZyb21TZWdtZW50cy5sZW5ndGggLSAxO1xuICAgIGxldCB0b1Bvc2l0aW9uO1xuICAgIGxldCBzZWdtZW50O1xuICAgIGZvciAodG9Qb3NpdGlvbiA9IDA7IHRvUG9zaXRpb24gPCB0b1NlZ21lbnRzLmxlbmd0aDsgdG9Qb3NpdGlvbisrKSB7XG4gICAgICAgIHNlZ21lbnQgPSB0b1NlZ21lbnRzW3RvUG9zaXRpb25dO1xuICAgICAgICAvLyB3ZSBzdGF5IG9uIHRoZSBzYW1lIHBvc2l0aW9uXG4gICAgICAgIGlmIChzZWdtZW50ID09PSAnLicpXG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgLy8gZ28gdXAgaW4gdGhlIGZyb20gYXJyYXlcbiAgICAgICAgaWYgKHNlZ21lbnQgPT09ICcuLicpIHtcbiAgICAgICAgICAgIC8vIHdlIGNhbid0IGdvIGJlbG93IHplcm8sIGJ1dCB3ZSBzdGlsbCBuZWVkIHRvIGluY3JlbWVudCB0b1Bvc2l0aW9uXG4gICAgICAgICAgICBpZiAocG9zaXRpb24gPiAxKVxuICAgICAgICAgICAgICAgIHBvc2l0aW9uLS07XG4gICAgICAgICAgICAvLyBjb250aW51ZVxuICAgICAgICB9XG4gICAgICAgIC8vIHdlIHJlYWNoZWQgYSBub24tcmVsYXRpdmUgcGF0aCwgd2Ugc3RvcCBoZXJlXG4gICAgICAgIGVsc2VcbiAgICAgICAgICAgIGJyZWFrO1xuICAgIH1cbiAgICByZXR1cm4gKGZyb21TZWdtZW50cy5zbGljZSgwLCBwb3NpdGlvbikuam9pbignLycpICtcbiAgICAgICAgJy8nICtcbiAgICAgICAgdG9TZWdtZW50cy5zbGljZSh0b1Bvc2l0aW9uKS5qb2luKCcvJykpO1xufVxuXG52YXIgTmF2aWdhdGlvblR5cGU7XG4oZnVuY3Rpb24gKE5hdmlnYXRpb25UeXBlKSB7XG4gICAgTmF2aWdhdGlvblR5cGVbXCJwb3BcIl0gPSBcInBvcFwiO1xuICAgIE5hdmlnYXRpb25UeXBlW1wicHVzaFwiXSA9IFwicHVzaFwiO1xufSkoTmF2aWdhdGlvblR5cGUgfHwgKE5hdmlnYXRpb25UeXBlID0ge30pKTtcbnZhciBOYXZpZ2F0aW9uRGlyZWN0aW9uO1xuKGZ1bmN0aW9uIChOYXZpZ2F0aW9uRGlyZWN0aW9uKSB7XG4gICAgTmF2aWdhdGlvbkRpcmVjdGlvbltcImJhY2tcIl0gPSBcImJhY2tcIjtcbiAgICBOYXZpZ2F0aW9uRGlyZWN0aW9uW1wiZm9yd2FyZFwiXSA9IFwiZm9yd2FyZFwiO1xuICAgIE5hdmlnYXRpb25EaXJlY3Rpb25bXCJ1bmtub3duXCJdID0gXCJcIjtcbn0pKE5hdmlnYXRpb25EaXJlY3Rpb24gfHwgKE5hdmlnYXRpb25EaXJlY3Rpb24gPSB7fSkpO1xuLyoqXG4gKiBTdGFydGluZyBsb2NhdGlvbiBmb3IgSGlzdG9yaWVzXG4gKi9cbmNvbnN0IFNUQVJUID0gJyc7XG4vLyBHZW5lcmljIHV0aWxzXG4vKipcbiAqIE5vcm1hbGl6ZXMgYSBiYXNlIGJ5IHJlbW92aW5nIGFueSB0cmFpbGluZyBzbGFzaCBhbmQgcmVhZGluZyB0aGUgYmFzZSB0YWcgaWZcbiAqIHByZXNlbnQuXG4gKlxuICogQHBhcmFtIGJhc2UgLSBiYXNlIHRvIG5vcm1hbGl6ZVxuICovXG5mdW5jdGlvbiBub3JtYWxpemVCYXNlKGJhc2UpIHtcbiAgICBpZiAoIWJhc2UpIHtcbiAgICAgICAgaWYgKGlzQnJvd3Nlcikge1xuICAgICAgICAgICAgLy8gcmVzcGVjdCA8YmFzZT4gdGFnXG4gICAgICAgICAgICBjb25zdCBiYXNlRWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdiYXNlJyk7XG4gICAgICAgICAgICBiYXNlID0gKGJhc2VFbCAmJiBiYXNlRWwuZ2V0QXR0cmlidXRlKCdocmVmJykpIHx8ICcvJztcbiAgICAgICAgICAgIC8vIHN0cmlwIGZ1bGwgVVJMIG9yaWdpblxuICAgICAgICAgICAgYmFzZSA9IGJhc2UucmVwbGFjZSgvXlxcdys6XFwvXFwvW15cXC9dKy8sICcnKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGJhc2UgPSAnLyc7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLy8gZW5zdXJlIGxlYWRpbmcgc2xhc2ggd2hlbiBpdCB3YXMgcmVtb3ZlZCBieSB0aGUgcmVnZXggYWJvdmUgYXZvaWQgbGVhZGluZ1xuICAgIC8vIHNsYXNoIHdpdGggaGFzaCBiZWNhdXNlIHRoZSBmaWxlIGNvdWxkIGJlIHJlYWQgZnJvbSB0aGUgZGlzayBsaWtlIGZpbGU6Ly9cbiAgICAvLyBhbmQgdGhlIGxlYWRpbmcgc2xhc2ggd291bGQgY2F1c2UgcHJvYmxlbXNcbiAgICBpZiAoYmFzZVswXSAhPT0gJy8nICYmIGJhc2VbMF0gIT09ICcjJylcbiAgICAgICAgYmFzZSA9ICcvJyArIGJhc2U7XG4gICAgLy8gcmVtb3ZlIHRoZSB0cmFpbGluZyBzbGFzaCBzbyBhbGwgb3RoZXIgbWV0aG9kIGNhbiBqdXN0IGRvIGBiYXNlICsgZnVsbFBhdGhgXG4gICAgLy8gdG8gYnVpbGQgYW4gaHJlZlxuICAgIHJldHVybiByZW1vdmVUcmFpbGluZ1NsYXNoKGJhc2UpO1xufVxuLy8gcmVtb3ZlIGFueSBjaGFyYWN0ZXIgYmVmb3JlIHRoZSBoYXNoXG5jb25zdCBCRUZPUkVfSEFTSF9SRSA9IC9eW14jXSsjLztcbmZ1bmN0aW9uIGNyZWF0ZUhyZWYoYmFzZSwgbG9jYXRpb24pIHtcbiAgICByZXR1cm4gYmFzZS5yZXBsYWNlKEJFRk9SRV9IQVNIX1JFLCAnIycpICsgbG9jYXRpb247XG59XG5cbmZ1bmN0aW9uIGdldEVsZW1lbnRQb3NpdGlvbihlbCwgb2Zmc2V0KSB7XG4gICAgY29uc3QgZG9jUmVjdCA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICBjb25zdCBlbFJlY3QgPSBlbC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICByZXR1cm4ge1xuICAgICAgICBiZWhhdmlvcjogb2Zmc2V0LmJlaGF2aW9yLFxuICAgICAgICBsZWZ0OiBlbFJlY3QubGVmdCAtIGRvY1JlY3QubGVmdCAtIChvZmZzZXQubGVmdCB8fCAwKSxcbiAgICAgICAgdG9wOiBlbFJlY3QudG9wIC0gZG9jUmVjdC50b3AgLSAob2Zmc2V0LnRvcCB8fCAwKSxcbiAgICB9O1xufVxuY29uc3QgY29tcHV0ZVNjcm9sbFBvc2l0aW9uID0gKCkgPT4gKHtcbiAgICBsZWZ0OiB3aW5kb3cuc2Nyb2xsWCxcbiAgICB0b3A6IHdpbmRvdy5zY3JvbGxZLFxufSk7XG5mdW5jdGlvbiBzY3JvbGxUb1Bvc2l0aW9uKHBvc2l0aW9uKSB7XG4gICAgbGV0IHNjcm9sbFRvT3B0aW9ucztcbiAgICBpZiAoJ2VsJyBpbiBwb3NpdGlvbikge1xuICAgICAgICBjb25zdCBwb3NpdGlvbkVsID0gcG9zaXRpb24uZWw7XG4gICAgICAgIGNvbnN0IGlzSWRTZWxlY3RvciA9IHR5cGVvZiBwb3NpdGlvbkVsID09PSAnc3RyaW5nJyAmJiBwb3NpdGlvbkVsLnN0YXJ0c1dpdGgoJyMnKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIGBpZGBzIGNhbiBhY2NlcHQgcHJldHR5IG11Y2ggYW55IGNoYXJhY3RlcnMsIGluY2x1ZGluZyBDU1MgY29tYmluYXRvcnNcbiAgICAgICAgICogbGlrZSBgPmAgb3IgYH5gLiBJdCdzIHN0aWxsIHBvc3NpYmxlIHRvIHJldHJpZXZlIGVsZW1lbnRzIHVzaW5nXG4gICAgICAgICAqIGBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnficpYCBidXQgaXQgbmVlZHMgdG8gYmUgZXNjYXBlZCB3aGVuIHVzaW5nXG4gICAgICAgICAqIGBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjXFxcXH4nKWAgZm9yIGl0IHRvIGJlIHZhbGlkLiBUaGUgb25seVxuICAgICAgICAgKiByZXF1aXJlbWVudHMgZm9yIGBpZGBzIGFyZSB0aGVtIHRvIGJlIHVuaXF1ZSBvbiB0aGUgcGFnZSBhbmQgdG8gbm90IGJlXG4gICAgICAgICAqIGVtcHR5IChgaWQ9XCJcImApLiBCZWNhdXNlIG9mIHRoYXQsIHdoZW4gcGFzc2luZyBhbiBpZCBzZWxlY3RvciwgaXQgc2hvdWxkXG4gICAgICAgICAqIGJlIHByb3Blcmx5IGVzY2FwZWQgZm9yIGl0IHRvIHdvcmsgd2l0aCBgcXVlcnlTZWxlY3RvcmAuIFdlIGNvdWxkIGNoZWNrXG4gICAgICAgICAqIGZvciB0aGUgaWQgc2VsZWN0b3IgdG8gYmUgc2ltcGxlIChubyBDU1MgY29tYmluYXRvcnMgYCsgPn5gKSBidXQgdGhhdFxuICAgICAgICAgKiB3b3VsZCBtYWtlIHRoaW5ncyBpbmNvbnNpc3RlbnQgc2luY2UgdGhleSBhcmUgdmFsaWQgY2hhcmFjdGVycyBmb3IgYW5cbiAgICAgICAgICogYGlkYCBidXQgd291bGQgbmVlZCB0byBiZSBlc2NhcGVkIHdoZW4gdXNpbmcgYHF1ZXJ5U2VsZWN0b3JgLCBicmVha2luZ1xuICAgICAgICAgKiB0aGVpciB1c2FnZSBhbmQgZW5kaW5nIHVwIGluIG5vIHNlbGVjdG9yIHJldHVybmVkLiBTZWxlY3RvcnMgbmVlZCB0byBiZVxuICAgICAgICAgKiBlc2NhcGVkOlxuICAgICAgICAgKlxuICAgICAgICAgKiAtIGAjMS10aGluZ2AgYmVjb21lcyBgI1xcMzEgLXRoaW5nYFxuICAgICAgICAgKiAtIGAjd2l0aH5zeW1ib2xzYCBiZWNvbWVzIGAjd2l0aFxcXFx+c3ltYm9sc2BcbiAgICAgICAgICpcbiAgICAgICAgICogLSBNb3JlIGluZm9ybWF0aW9uIGFib3V0ICB0aGUgdG9waWMgY2FuIGJlIGZvdW5kIGF0XG4gICAgICAgICAqICAgaHR0cHM6Ly9tYXRoaWFzYnluZW5zLmJlL25vdGVzL2h0bWw1LWlkLWNsYXNzLlxuICAgICAgICAgKiAtIFByYWN0aWNhbCBleGFtcGxlOiBodHRwczovL21hdGhpYXNieW5lbnMuYmUvZGVtby9odG1sNS1pZFxuICAgICAgICAgKi9cbiAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJiB0eXBlb2YgcG9zaXRpb24uZWwgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICBpZiAoIWlzSWRTZWxlY3RvciB8fCAhZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQocG9zaXRpb24uZWwuc2xpY2UoMSkpKSB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZm91bmRFbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocG9zaXRpb24uZWwpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoaXNJZFNlbGVjdG9yICYmIGZvdW5kRWwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHdhcm4oYFRoZSBzZWxlY3RvciBcIiR7cG9zaXRpb24uZWx9XCIgc2hvdWxkIGJlIHBhc3NlZCBhcyBcImVsOiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcke3Bvc2l0aW9uLmVsfScpXCIgYmVjYXVzZSBpdCBzdGFydHMgd2l0aCBcIiNcIi5gKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHJldHVybiB0byBhdm9pZCBvdGhlciB3YXJuaW5nc1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgd2FybihgVGhlIHNlbGVjdG9yIFwiJHtwb3NpdGlvbi5lbH1cIiBpcyBpbnZhbGlkLiBJZiB5b3UgYXJlIHVzaW5nIGFuIGlkIHNlbGVjdG9yLCBtYWtlIHN1cmUgdG8gZXNjYXBlIGl0LiBZb3UgY2FuIGZpbmQgbW9yZSBpbmZvcm1hdGlvbiBhYm91dCBlc2NhcGluZyBjaGFyYWN0ZXJzIGluIHNlbGVjdG9ycyBhdCBodHRwczovL21hdGhpYXNieW5lbnMuYmUvbm90ZXMvY3NzLWVzY2FwZXMgb3IgdXNlIENTUy5lc2NhcGUgKGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9DU1MvZXNjYXBlKS5gKTtcbiAgICAgICAgICAgICAgICAgICAgLy8gcmV0dXJuIHRvIGF2b2lkIG90aGVyIHdhcm5pbmdzXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZWwgPSB0eXBlb2YgcG9zaXRpb25FbCA9PT0gJ3N0cmluZydcbiAgICAgICAgICAgID8gaXNJZFNlbGVjdG9yXG4gICAgICAgICAgICAgICAgPyBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChwb3NpdGlvbkVsLnNsaWNlKDEpKVxuICAgICAgICAgICAgICAgIDogZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwb3NpdGlvbkVsKVxuICAgICAgICAgICAgOiBwb3NpdGlvbkVsO1xuICAgICAgICBpZiAoIWVsKSB7XG4gICAgICAgICAgICAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiZcbiAgICAgICAgICAgICAgICB3YXJuKGBDb3VsZG4ndCBmaW5kIGVsZW1lbnQgdXNpbmcgc2VsZWN0b3IgXCIke3Bvc2l0aW9uLmVsfVwiIHJldHVybmVkIGJ5IHNjcm9sbEJlaGF2aW9yLmApO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHNjcm9sbFRvT3B0aW9ucyA9IGdldEVsZW1lbnRQb3NpdGlvbihlbCwgcG9zaXRpb24pO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgc2Nyb2xsVG9PcHRpb25zID0gcG9zaXRpb247XG4gICAgfVxuICAgIGlmICgnc2Nyb2xsQmVoYXZpb3InIGluIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zdHlsZSlcbiAgICAgICAgd2luZG93LnNjcm9sbFRvKHNjcm9sbFRvT3B0aW9ucyk7XG4gICAgZWxzZSB7XG4gICAgICAgIHdpbmRvdy5zY3JvbGxUbyhzY3JvbGxUb09wdGlvbnMubGVmdCAhPSBudWxsID8gc2Nyb2xsVG9PcHRpb25zLmxlZnQgOiB3aW5kb3cuc2Nyb2xsWCwgc2Nyb2xsVG9PcHRpb25zLnRvcCAhPSBudWxsID8gc2Nyb2xsVG9PcHRpb25zLnRvcCA6IHdpbmRvdy5zY3JvbGxZKTtcbiAgICB9XG59XG5mdW5jdGlvbiBnZXRTY3JvbGxLZXkocGF0aCwgZGVsdGEpIHtcbiAgICBjb25zdCBwb3NpdGlvbiA9IGhpc3Rvcnkuc3RhdGUgPyBoaXN0b3J5LnN0YXRlLnBvc2l0aW9uIC0gZGVsdGEgOiAtMTtcbiAgICByZXR1cm4gcG9zaXRpb24gKyBwYXRoO1xufVxuY29uc3Qgc2Nyb2xsUG9zaXRpb25zID0gbmV3IE1hcCgpO1xuZnVuY3Rpb24gc2F2ZVNjcm9sbFBvc2l0aW9uKGtleSwgc2Nyb2xsUG9zaXRpb24pIHtcbiAgICBzY3JvbGxQb3NpdGlvbnMuc2V0KGtleSwgc2Nyb2xsUG9zaXRpb24pO1xufVxuZnVuY3Rpb24gZ2V0U2F2ZWRTY3JvbGxQb3NpdGlvbihrZXkpIHtcbiAgICBjb25zdCBzY3JvbGwgPSBzY3JvbGxQb3NpdGlvbnMuZ2V0KGtleSk7XG4gICAgLy8gY29uc3VtZSBpdCBzbyBpdCdzIG5vdCB1c2VkIGFnYWluXG4gICAgc2Nyb2xsUG9zaXRpb25zLmRlbGV0ZShrZXkpO1xuICAgIHJldHVybiBzY3JvbGw7XG59XG4vLyBUT0RPOiBSRkMgYWJvdXQgaG93IHRvIHNhdmUgc2Nyb2xsIHBvc2l0aW9uXG4vKipcbiAqIFNjcm9sbEJlaGF2aW9yIGluc3RhbmNlIHVzZWQgYnkgdGhlIHJvdXRlciB0byBjb21wdXRlIGFuZCByZXN0b3JlIHRoZSBzY3JvbGxcbiAqIHBvc2l0aW9uIHdoZW4gbmF2aWdhdGluZy5cbiAqL1xuLy8gZXhwb3J0IGludGVyZmFjZSBTY3JvbGxIYW5kbGVyPFNjcm9sbFBvc2l0aW9uRW50cnkgZXh0ZW5kcyBIaXN0b3J5U3RhdGVWYWx1ZSwgU2Nyb2xsUG9zaXRpb24gZXh0ZW5kcyBTY3JvbGxQb3NpdGlvbkVudHJ5PiB7XG4vLyAgIC8vIHJldHVybnMgYSBzY3JvbGwgcG9zaXRpb24gdGhhdCBjYW4gYmUgc2F2ZWQgaW4gaGlzdG9yeVxuLy8gICBjb21wdXRlKCk6IFNjcm9sbFBvc2l0aW9uRW50cnlcbi8vICAgLy8gY2FuIHRha2UgYW4gZXh0ZW5kZWQgU2Nyb2xsUG9zaXRpb25FbnRyeVxuLy8gICBzY3JvbGwocG9zaXRpb246IFNjcm9sbFBvc2l0aW9uKTogdm9pZFxuLy8gfVxuLy8gZXhwb3J0IGNvbnN0IHNjcm9sbEhhbmRsZXI6IFNjcm9sbEhhbmRsZXI8U2Nyb2xsUG9zaXRpb24+ID0ge1xuLy8gICBjb21wdXRlOiBjb21wdXRlU2Nyb2xsLFxuLy8gICBzY3JvbGw6IHNjcm9sbFRvUG9zaXRpb24sXG4vLyB9XG5cbmxldCBjcmVhdGVCYXNlTG9jYXRpb24gPSAoKSA9PiBsb2NhdGlvbi5wcm90b2NvbCArICcvLycgKyBsb2NhdGlvbi5ob3N0O1xuLyoqXG4gKiBDcmVhdGVzIGEgbm9ybWFsaXplZCBoaXN0b3J5IGxvY2F0aW9uIGZyb20gYSB3aW5kb3cubG9jYXRpb24gb2JqZWN0XG4gKiBAcGFyYW0gYmFzZSAtIFRoZSBiYXNlIHBhdGhcbiAqIEBwYXJhbSBsb2NhdGlvbiAtIFRoZSB3aW5kb3cubG9jYXRpb24gb2JqZWN0XG4gKi9cbmZ1bmN0aW9uIGNyZWF0ZUN1cnJlbnRMb2NhdGlvbihiYXNlLCBsb2NhdGlvbikge1xuICAgIGNvbnN0IHsgcGF0aG5hbWUsIHNlYXJjaCwgaGFzaCB9ID0gbG9jYXRpb247XG4gICAgLy8gYWxsb3dzIGhhc2ggYmFzZXMgbGlrZSAjLCAvIywgIy8sICMhLCAjIS8sIC8jIS8sIG9yIGV2ZW4gL2ZvbGRlciNlbmRcbiAgICBjb25zdCBoYXNoUG9zID0gYmFzZS5pbmRleE9mKCcjJyk7XG4gICAgaWYgKGhhc2hQb3MgPiAtMSkge1xuICAgICAgICBsZXQgc2xpY2VQb3MgPSBoYXNoLmluY2x1ZGVzKGJhc2Uuc2xpY2UoaGFzaFBvcykpXG4gICAgICAgICAgICA/IGJhc2Uuc2xpY2UoaGFzaFBvcykubGVuZ3RoXG4gICAgICAgICAgICA6IDE7XG4gICAgICAgIGxldCBwYXRoRnJvbUhhc2ggPSBoYXNoLnNsaWNlKHNsaWNlUG9zKTtcbiAgICAgICAgLy8gcHJlcGVuZCB0aGUgc3RhcnRpbmcgc2xhc2ggdG8gaGFzaCBzbyB0aGUgdXJsIHN0YXJ0cyB3aXRoIC8jXG4gICAgICAgIGlmIChwYXRoRnJvbUhhc2hbMF0gIT09ICcvJylcbiAgICAgICAgICAgIHBhdGhGcm9tSGFzaCA9ICcvJyArIHBhdGhGcm9tSGFzaDtcbiAgICAgICAgcmV0dXJuIHN0cmlwQmFzZShwYXRoRnJvbUhhc2gsICcnKTtcbiAgICB9XG4gICAgY29uc3QgcGF0aCA9IHN0cmlwQmFzZShwYXRobmFtZSwgYmFzZSk7XG4gICAgcmV0dXJuIHBhdGggKyBzZWFyY2ggKyBoYXNoO1xufVxuZnVuY3Rpb24gdXNlSGlzdG9yeUxpc3RlbmVycyhiYXNlLCBoaXN0b3J5U3RhdGUsIGN1cnJlbnRMb2NhdGlvbiwgcmVwbGFjZSkge1xuICAgIGxldCBsaXN0ZW5lcnMgPSBbXTtcbiAgICBsZXQgdGVhcmRvd25zID0gW107XG4gICAgLy8gVE9ETzogc2hvdWxkIGl0IGJlIGEgc3RhY2s/IGEgRGljdC4gQ2hlY2sgaWYgdGhlIHBvcHN0YXRlIGxpc3RlbmVyXG4gICAgLy8gY2FuIHRyaWdnZXIgdHdpY2VcbiAgICBsZXQgcGF1c2VTdGF0ZSA9IG51bGw7XG4gICAgY29uc3QgcG9wU3RhdGVIYW5kbGVyID0gKHsgc3RhdGUsIH0pID0+IHtcbiAgICAgICAgY29uc3QgdG8gPSBjcmVhdGVDdXJyZW50TG9jYXRpb24oYmFzZSwgbG9jYXRpb24pO1xuICAgICAgICBjb25zdCBmcm9tID0gY3VycmVudExvY2F0aW9uLnZhbHVlO1xuICAgICAgICBjb25zdCBmcm9tU3RhdGUgPSBoaXN0b3J5U3RhdGUudmFsdWU7XG4gICAgICAgIGxldCBkZWx0YSA9IDA7XG4gICAgICAgIGlmIChzdGF0ZSkge1xuICAgICAgICAgICAgY3VycmVudExvY2F0aW9uLnZhbHVlID0gdG87XG4gICAgICAgICAgICBoaXN0b3J5U3RhdGUudmFsdWUgPSBzdGF0ZTtcbiAgICAgICAgICAgIC8vIGlnbm9yZSB0aGUgcG9wc3RhdGUgYW5kIHJlc2V0IHRoZSBwYXVzZVN0YXRlXG4gICAgICAgICAgICBpZiAocGF1c2VTdGF0ZSAmJiBwYXVzZVN0YXRlID09PSBmcm9tKSB7XG4gICAgICAgICAgICAgICAgcGF1c2VTdGF0ZSA9IG51bGw7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZGVsdGEgPSBmcm9tU3RhdGUgPyBzdGF0ZS5wb3NpdGlvbiAtIGZyb21TdGF0ZS5wb3NpdGlvbiA6IDA7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXBsYWNlKHRvKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBIZXJlIHdlIGNvdWxkIGFsc28gcmV2ZXJ0IHRoZSBuYXZpZ2F0aW9uIGJ5IGNhbGxpbmcgaGlzdG9yeS5nbygtZGVsdGEpXG4gICAgICAgIC8vIHRoaXMgbGlzdGVuZXIgd2lsbCBoYXZlIHRvIGJlIGFkYXB0ZWQgdG8gbm90IHRyaWdnZXIgYWdhaW4gYW5kIHRvIHdhaXQgZm9yIHRoZSB1cmxcbiAgICAgICAgLy8gdG8gYmUgdXBkYXRlZCBiZWZvcmUgdHJpZ2dlcmluZyB0aGUgbGlzdGVuZXJzLiBTb21lIGtpbmQgb2YgdmFsaWRhdGlvbiBmdW5jdGlvbiB3b3VsZCBhbHNvXG4gICAgICAgIC8vIG5lZWQgdG8gYmUgcGFzc2VkIHRvIHRoZSBsaXN0ZW5lcnMgc28gdGhlIG5hdmlnYXRpb24gY2FuIGJlIGFjY2VwdGVkXG4gICAgICAgIC8vIGNhbGwgYWxsIGxpc3RlbmVyc1xuICAgICAgICBsaXN0ZW5lcnMuZm9yRWFjaChsaXN0ZW5lciA9PiB7XG4gICAgICAgICAgICBsaXN0ZW5lcihjdXJyZW50TG9jYXRpb24udmFsdWUsIGZyb20sIHtcbiAgICAgICAgICAgICAgICBkZWx0YSxcbiAgICAgICAgICAgICAgICB0eXBlOiBOYXZpZ2F0aW9uVHlwZS5wb3AsXG4gICAgICAgICAgICAgICAgZGlyZWN0aW9uOiBkZWx0YVxuICAgICAgICAgICAgICAgICAgICA/IGRlbHRhID4gMFxuICAgICAgICAgICAgICAgICAgICAgICAgPyBOYXZpZ2F0aW9uRGlyZWN0aW9uLmZvcndhcmRcbiAgICAgICAgICAgICAgICAgICAgICAgIDogTmF2aWdhdGlvbkRpcmVjdGlvbi5iYWNrXG4gICAgICAgICAgICAgICAgICAgIDogTmF2aWdhdGlvbkRpcmVjdGlvbi51bmtub3duLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgZnVuY3Rpb24gcGF1c2VMaXN0ZW5lcnMoKSB7XG4gICAgICAgIHBhdXNlU3RhdGUgPSBjdXJyZW50TG9jYXRpb24udmFsdWU7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGxpc3RlbihjYWxsYmFjaykge1xuICAgICAgICAvLyBzZXQgdXAgdGhlIGxpc3RlbmVyIGFuZCBwcmVwYXJlIHRlYXJkb3duIGNhbGxiYWNrc1xuICAgICAgICBsaXN0ZW5lcnMucHVzaChjYWxsYmFjayk7XG4gICAgICAgIGNvbnN0IHRlYXJkb3duID0gKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgaW5kZXggPSBsaXN0ZW5lcnMuaW5kZXhPZihjYWxsYmFjayk7XG4gICAgICAgICAgICBpZiAoaW5kZXggPiAtMSlcbiAgICAgICAgICAgICAgICBsaXN0ZW5lcnMuc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgICAgfTtcbiAgICAgICAgdGVhcmRvd25zLnB1c2godGVhcmRvd24pO1xuICAgICAgICByZXR1cm4gdGVhcmRvd247XG4gICAgfVxuICAgIGZ1bmN0aW9uIGJlZm9yZVVubG9hZExpc3RlbmVyKCkge1xuICAgICAgICBjb25zdCB7IGhpc3RvcnkgfSA9IHdpbmRvdztcbiAgICAgICAgaWYgKCFoaXN0b3J5LnN0YXRlKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICBoaXN0b3J5LnJlcGxhY2VTdGF0ZShhc3NpZ24oe30sIGhpc3Rvcnkuc3RhdGUsIHsgc2Nyb2xsOiBjb21wdXRlU2Nyb2xsUG9zaXRpb24oKSB9KSwgJycpO1xuICAgIH1cbiAgICBmdW5jdGlvbiBkZXN0cm95KCkge1xuICAgICAgICBmb3IgKGNvbnN0IHRlYXJkb3duIG9mIHRlYXJkb3ducylcbiAgICAgICAgICAgIHRlYXJkb3duKCk7XG4gICAgICAgIHRlYXJkb3ducyA9IFtdO1xuICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcigncG9wc3RhdGUnLCBwb3BTdGF0ZUhhbmRsZXIpO1xuICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcignYmVmb3JldW5sb2FkJywgYmVmb3JlVW5sb2FkTGlzdGVuZXIpO1xuICAgIH1cbiAgICAvLyBzZXQgdXAgdGhlIGxpc3RlbmVycyBhbmQgcHJlcGFyZSB0ZWFyZG93biBjYWxsYmFja3NcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncG9wc3RhdGUnLCBwb3BTdGF0ZUhhbmRsZXIpO1xuICAgIC8vIFRPRE86IGNvdWxkIHdlIHVzZSAncGFnZWhpZGUnIG9yICd2aXNpYmlsaXR5Y2hhbmdlJyBpbnN0ZWFkP1xuICAgIC8vIGh0dHBzOi8vZGV2ZWxvcGVyLmNocm9tZS5jb20vYmxvZy9wYWdlLWxpZmVjeWNsZS1hcGkvXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2JlZm9yZXVubG9hZCcsIGJlZm9yZVVubG9hZExpc3RlbmVyLCB7XG4gICAgICAgIHBhc3NpdmU6IHRydWUsXG4gICAgfSk7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgcGF1c2VMaXN0ZW5lcnMsXG4gICAgICAgIGxpc3RlbixcbiAgICAgICAgZGVzdHJveSxcbiAgICB9O1xufVxuLyoqXG4gKiBDcmVhdGVzIGEgc3RhdGUgb2JqZWN0XG4gKi9cbmZ1bmN0aW9uIGJ1aWxkU3RhdGUoYmFjaywgY3VycmVudCwgZm9yd2FyZCwgcmVwbGFjZWQgPSBmYWxzZSwgY29tcHV0ZVNjcm9sbCA9IGZhbHNlKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgYmFjayxcbiAgICAgICAgY3VycmVudCxcbiAgICAgICAgZm9yd2FyZCxcbiAgICAgICAgcmVwbGFjZWQsXG4gICAgICAgIHBvc2l0aW9uOiB3aW5kb3cuaGlzdG9yeS5sZW5ndGgsXG4gICAgICAgIHNjcm9sbDogY29tcHV0ZVNjcm9sbCA/IGNvbXB1dGVTY3JvbGxQb3NpdGlvbigpIDogbnVsbCxcbiAgICB9O1xufVxuZnVuY3Rpb24gdXNlSGlzdG9yeVN0YXRlTmF2aWdhdGlvbihiYXNlKSB7XG4gICAgY29uc3QgeyBoaXN0b3J5LCBsb2NhdGlvbiB9ID0gd2luZG93O1xuICAgIC8vIHByaXZhdGUgdmFyaWFibGVzXG4gICAgY29uc3QgY3VycmVudExvY2F0aW9uID0ge1xuICAgICAgICB2YWx1ZTogY3JlYXRlQ3VycmVudExvY2F0aW9uKGJhc2UsIGxvY2F0aW9uKSxcbiAgICB9O1xuICAgIGNvbnN0IGhpc3RvcnlTdGF0ZSA9IHsgdmFsdWU6IGhpc3Rvcnkuc3RhdGUgfTtcbiAgICAvLyBidWlsZCBjdXJyZW50IGhpc3RvcnkgZW50cnkgYXMgdGhpcyBpcyBhIGZyZXNoIG5hdmlnYXRpb25cbiAgICBpZiAoIWhpc3RvcnlTdGF0ZS52YWx1ZSkge1xuICAgICAgICBjaGFuZ2VMb2NhdGlvbihjdXJyZW50TG9jYXRpb24udmFsdWUsIHtcbiAgICAgICAgICAgIGJhY2s6IG51bGwsXG4gICAgICAgICAgICBjdXJyZW50OiBjdXJyZW50TG9jYXRpb24udmFsdWUsXG4gICAgICAgICAgICBmb3J3YXJkOiBudWxsLFxuICAgICAgICAgICAgLy8gdGhlIGxlbmd0aCBpcyBvZmYgYnkgb25lLCB3ZSBuZWVkIHRvIGRlY3JlYXNlIGl0XG4gICAgICAgICAgICBwb3NpdGlvbjogaGlzdG9yeS5sZW5ndGggLSAxLFxuICAgICAgICAgICAgcmVwbGFjZWQ6IHRydWUsXG4gICAgICAgICAgICAvLyBkb24ndCBhZGQgYSBzY3JvbGwgYXMgdGhlIHVzZXIgbWF5IGhhdmUgYW4gYW5jaG9yLCBhbmQgd2Ugd2FudFxuICAgICAgICAgICAgLy8gc2Nyb2xsQmVoYXZpb3IgdG8gYmUgdHJpZ2dlcmVkIHdpdGhvdXQgYSBzYXZlZCBwb3NpdGlvblxuICAgICAgICAgICAgc2Nyb2xsOiBudWxsLFxuICAgICAgICB9LCB0cnVlKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gY2hhbmdlTG9jYXRpb24odG8sIHN0YXRlLCByZXBsYWNlKSB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBpZiBhIGJhc2UgdGFnIGlzIHByb3ZpZGVkLCBhbmQgd2UgYXJlIG9uIGEgbm9ybWFsIGRvbWFpbiwgd2UgaGF2ZSB0b1xuICAgICAgICAgKiByZXNwZWN0IHRoZSBwcm92aWRlZCBgYmFzZWAgYXR0cmlidXRlIGJlY2F1c2UgcHVzaFN0YXRlKCkgd2lsbCB1c2UgaXQgYW5kXG4gICAgICAgICAqIHBvdGVudGlhbGx5IGVyYXNlIGFueXRoaW5nIGJlZm9yZSB0aGUgYCNgIGxpa2UgYXRcbiAgICAgICAgICogaHR0cHM6Ly9naXRodWIuY29tL3Z1ZWpzL3JvdXRlci9pc3N1ZXMvNjg1IHdoZXJlIGEgYmFzZSBvZlxuICAgICAgICAgKiBgL2ZvbGRlci8jYCBidXQgYSBiYXNlIG9mIGAvYCB3b3VsZCBlcmFzZSB0aGUgYC9mb2xkZXIvYCBzZWN0aW9uLiBJZlxuICAgICAgICAgKiB0aGVyZSBpcyBubyBob3N0LCB0aGUgYDxiYXNlPmAgdGFnIG1ha2VzIG5vIHNlbnNlIGFuZCBpZiB0aGVyZSBpc24ndCBhXG4gICAgICAgICAqIGJhc2UgdGFnIHdlIGNhbiBqdXN0IHVzZSBldmVyeXRoaW5nIGFmdGVyIHRoZSBgI2AuXG4gICAgICAgICAqL1xuICAgICAgICBjb25zdCBoYXNoSW5kZXggPSBiYXNlLmluZGV4T2YoJyMnKTtcbiAgICAgICAgY29uc3QgdXJsID0gaGFzaEluZGV4ID4gLTFcbiAgICAgICAgICAgID8gKGxvY2F0aW9uLmhvc3QgJiYgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignYmFzZScpXG4gICAgICAgICAgICAgICAgPyBiYXNlXG4gICAgICAgICAgICAgICAgOiBiYXNlLnNsaWNlKGhhc2hJbmRleCkpICsgdG9cbiAgICAgICAgICAgIDogY3JlYXRlQmFzZUxvY2F0aW9uKCkgKyBiYXNlICsgdG87XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyBCUk9XU0VSIFFVSVJLXG4gICAgICAgICAgICAvLyBOT1RFOiBTYWZhcmkgdGhyb3dzIGEgU2VjdXJpdHlFcnJvciB3aGVuIGNhbGxpbmcgdGhpcyBmdW5jdGlvbiAxMDAgdGltZXMgaW4gMzAgc2Vjb25kc1xuICAgICAgICAgICAgaGlzdG9yeVtyZXBsYWNlID8gJ3JlcGxhY2VTdGF0ZScgOiAncHVzaFN0YXRlJ10oc3RhdGUsICcnLCB1cmwpO1xuICAgICAgICAgICAgaGlzdG9yeVN0YXRlLnZhbHVlID0gc3RhdGU7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSkge1xuICAgICAgICAgICAgICAgIHdhcm4oJ0Vycm9yIHdpdGggcHVzaC9yZXBsYWNlIFN0YXRlJywgZXJyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIEZvcmNlIHRoZSBuYXZpZ2F0aW9uLCB0aGlzIGFsc28gcmVzZXRzIHRoZSBjYWxsIGNvdW50XG4gICAgICAgICAgICBsb2NhdGlvbltyZXBsYWNlID8gJ3JlcGxhY2UnIDogJ2Fzc2lnbiddKHVybCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZnVuY3Rpb24gcmVwbGFjZSh0bywgZGF0YSkge1xuICAgICAgICBjb25zdCBzdGF0ZSA9IGFzc2lnbih7fSwgaGlzdG9yeS5zdGF0ZSwgYnVpbGRTdGF0ZShoaXN0b3J5U3RhdGUudmFsdWUuYmFjaywgXG4gICAgICAgIC8vIGtlZXAgYmFjayBhbmQgZm9yd2FyZCBlbnRyaWVzIGJ1dCBvdmVycmlkZSBjdXJyZW50IHBvc2l0aW9uXG4gICAgICAgIHRvLCBoaXN0b3J5U3RhdGUudmFsdWUuZm9yd2FyZCwgdHJ1ZSksIGRhdGEsIHsgcG9zaXRpb246IGhpc3RvcnlTdGF0ZS52YWx1ZS5wb3NpdGlvbiB9KTtcbiAgICAgICAgY2hhbmdlTG9jYXRpb24odG8sIHN0YXRlLCB0cnVlKTtcbiAgICAgICAgY3VycmVudExvY2F0aW9uLnZhbHVlID0gdG87XG4gICAgfVxuICAgIGZ1bmN0aW9uIHB1c2godG8sIGRhdGEpIHtcbiAgICAgICAgLy8gQWRkIHRvIGN1cnJlbnQgZW50cnkgdGhlIGluZm9ybWF0aW9uIG9mIHdoZXJlIHdlIGFyZSBnb2luZ1xuICAgICAgICAvLyBhcyB3ZWxsIGFzIHNhdmluZyB0aGUgY3VycmVudCBwb3NpdGlvblxuICAgICAgICBjb25zdCBjdXJyZW50U3RhdGUgPSBhc3NpZ24oe30sIFxuICAgICAgICAvLyB1c2UgY3VycmVudCBoaXN0b3J5IHN0YXRlIHRvIGdyYWNlZnVsbHkgaGFuZGxlIGEgd3JvbmcgY2FsbCB0b1xuICAgICAgICAvLyBoaXN0b3J5LnJlcGxhY2VTdGF0ZVxuICAgICAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vdnVlanMvcm91dGVyL2lzc3Vlcy8zNjZcbiAgICAgICAgaGlzdG9yeVN0YXRlLnZhbHVlLCBoaXN0b3J5LnN0YXRlLCB7XG4gICAgICAgICAgICBmb3J3YXJkOiB0byxcbiAgICAgICAgICAgIHNjcm9sbDogY29tcHV0ZVNjcm9sbFBvc2l0aW9uKCksXG4gICAgICAgIH0pO1xuICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmICFoaXN0b3J5LnN0YXRlKSB7XG4gICAgICAgICAgICB3YXJuKGBoaXN0b3J5LnN0YXRlIHNlZW1zIHRvIGhhdmUgYmVlbiBtYW51YWxseSByZXBsYWNlZCB3aXRob3V0IHByZXNlcnZpbmcgdGhlIG5lY2Vzc2FyeSB2YWx1ZXMuIE1ha2Ugc3VyZSB0byBwcmVzZXJ2ZSBleGlzdGluZyBoaXN0b3J5IHN0YXRlIGlmIHlvdSBhcmUgbWFudWFsbHkgY2FsbGluZyBoaXN0b3J5LnJlcGxhY2VTdGF0ZTpcXG5cXG5gICtcbiAgICAgICAgICAgICAgICBgaGlzdG9yeS5yZXBsYWNlU3RhdGUoaGlzdG9yeS5zdGF0ZSwgJycsIHVybClcXG5cXG5gICtcbiAgICAgICAgICAgICAgICBgWW91IGNhbiBmaW5kIG1vcmUgaW5mb3JtYXRpb24gYXQgaHR0cHM6Ly9uZXh0LnJvdXRlci52dWVqcy5vcmcvZ3VpZGUvbWlncmF0aW9uLyN1c2FnZS1vZi1oaXN0b3J5LXN0YXRlLmApO1xuICAgICAgICB9XG4gICAgICAgIGNoYW5nZUxvY2F0aW9uKGN1cnJlbnRTdGF0ZS5jdXJyZW50LCBjdXJyZW50U3RhdGUsIHRydWUpO1xuICAgICAgICBjb25zdCBzdGF0ZSA9IGFzc2lnbih7fSwgYnVpbGRTdGF0ZShjdXJyZW50TG9jYXRpb24udmFsdWUsIHRvLCBudWxsKSwgeyBwb3NpdGlvbjogY3VycmVudFN0YXRlLnBvc2l0aW9uICsgMSB9LCBkYXRhKTtcbiAgICAgICAgY2hhbmdlTG9jYXRpb24odG8sIHN0YXRlLCBmYWxzZSk7XG4gICAgICAgIGN1cnJlbnRMb2NhdGlvbi52YWx1ZSA9IHRvO1xuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgICBsb2NhdGlvbjogY3VycmVudExvY2F0aW9uLFxuICAgICAgICBzdGF0ZTogaGlzdG9yeVN0YXRlLFxuICAgICAgICBwdXNoLFxuICAgICAgICByZXBsYWNlLFxuICAgIH07XG59XG4vKipcbiAqIENyZWF0ZXMgYW4gSFRNTDUgaGlzdG9yeS4gTW9zdCBjb21tb24gaGlzdG9yeSBmb3Igc2luZ2xlIHBhZ2UgYXBwbGljYXRpb25zLlxuICpcbiAqIEBwYXJhbSBiYXNlIC1cbiAqL1xuZnVuY3Rpb24gY3JlYXRlV2ViSGlzdG9yeShiYXNlKSB7XG4gICAgYmFzZSA9IG5vcm1hbGl6ZUJhc2UoYmFzZSk7XG4gICAgY29uc3QgaGlzdG9yeU5hdmlnYXRpb24gPSB1c2VIaXN0b3J5U3RhdGVOYXZpZ2F0aW9uKGJhc2UpO1xuICAgIGNvbnN0IGhpc3RvcnlMaXN0ZW5lcnMgPSB1c2VIaXN0b3J5TGlzdGVuZXJzKGJhc2UsIGhpc3RvcnlOYXZpZ2F0aW9uLnN0YXRlLCBoaXN0b3J5TmF2aWdhdGlvbi5sb2NhdGlvbiwgaGlzdG9yeU5hdmlnYXRpb24ucmVwbGFjZSk7XG4gICAgZnVuY3Rpb24gZ28oZGVsdGEsIHRyaWdnZXJMaXN0ZW5lcnMgPSB0cnVlKSB7XG4gICAgICAgIGlmICghdHJpZ2dlckxpc3RlbmVycylcbiAgICAgICAgICAgIGhpc3RvcnlMaXN0ZW5lcnMucGF1c2VMaXN0ZW5lcnMoKTtcbiAgICAgICAgaGlzdG9yeS5nbyhkZWx0YSk7XG4gICAgfVxuICAgIGNvbnN0IHJvdXRlckhpc3RvcnkgPSBhc3NpZ24oe1xuICAgICAgICAvLyBpdCdzIG92ZXJyaWRkZW4gcmlnaHQgYWZ0ZXJcbiAgICAgICAgbG9jYXRpb246ICcnLFxuICAgICAgICBiYXNlLFxuICAgICAgICBnbyxcbiAgICAgICAgY3JlYXRlSHJlZjogY3JlYXRlSHJlZi5iaW5kKG51bGwsIGJhc2UpLFxuICAgIH0sIGhpc3RvcnlOYXZpZ2F0aW9uLCBoaXN0b3J5TGlzdGVuZXJzKTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkocm91dGVySGlzdG9yeSwgJ2xvY2F0aW9uJywge1xuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBnZXQ6ICgpID0+IGhpc3RvcnlOYXZpZ2F0aW9uLmxvY2F0aW9uLnZhbHVlLFxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShyb3V0ZXJIaXN0b3J5LCAnc3RhdGUnLCB7XG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGdldDogKCkgPT4gaGlzdG9yeU5hdmlnYXRpb24uc3RhdGUudmFsdWUsXG4gICAgfSk7XG4gICAgcmV0dXJuIHJvdXRlckhpc3Rvcnk7XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhbiBpbi1tZW1vcnkgYmFzZWQgaGlzdG9yeS4gVGhlIG1haW4gcHVycG9zZSBvZiB0aGlzIGhpc3RvcnkgaXMgdG8gaGFuZGxlIFNTUi4gSXQgc3RhcnRzIGluIGEgc3BlY2lhbCBsb2NhdGlvbiB0aGF0IGlzIG5vd2hlcmUuXG4gKiBJdCdzIHVwIHRvIHRoZSB1c2VyIHRvIHJlcGxhY2UgdGhhdCBsb2NhdGlvbiB3aXRoIHRoZSBzdGFydGVyIGxvY2F0aW9uIGJ5IGVpdGhlciBjYWxsaW5nIGByb3V0ZXIucHVzaGAgb3IgYHJvdXRlci5yZXBsYWNlYC5cbiAqXG4gKiBAcGFyYW0gYmFzZSAtIEJhc2UgYXBwbGllZCB0byBhbGwgdXJscywgZGVmYXVsdHMgdG8gJy8nXG4gKiBAcmV0dXJucyBhIGhpc3Rvcnkgb2JqZWN0IHRoYXQgY2FuIGJlIHBhc3NlZCB0byB0aGUgcm91dGVyIGNvbnN0cnVjdG9yXG4gKi9cbmZ1bmN0aW9uIGNyZWF0ZU1lbW9yeUhpc3RvcnkoYmFzZSA9ICcnKSB7XG4gICAgbGV0IGxpc3RlbmVycyA9IFtdO1xuICAgIGxldCBxdWV1ZSA9IFtTVEFSVF07XG4gICAgbGV0IHBvc2l0aW9uID0gMDtcbiAgICBiYXNlID0gbm9ybWFsaXplQmFzZShiYXNlKTtcbiAgICBmdW5jdGlvbiBzZXRMb2NhdGlvbihsb2NhdGlvbikge1xuICAgICAgICBwb3NpdGlvbisrO1xuICAgICAgICBpZiAocG9zaXRpb24gIT09IHF1ZXVlLmxlbmd0aCkge1xuICAgICAgICAgICAgLy8gd2UgYXJlIGluIHRoZSBtaWRkbGUsIHdlIHJlbW92ZSBldmVyeXRoaW5nIGZyb20gaGVyZSBpbiB0aGUgcXVldWVcbiAgICAgICAgICAgIHF1ZXVlLnNwbGljZShwb3NpdGlvbik7XG4gICAgICAgIH1cbiAgICAgICAgcXVldWUucHVzaChsb2NhdGlvbik7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHRyaWdnZXJMaXN0ZW5lcnModG8sIGZyb20sIHsgZGlyZWN0aW9uLCBkZWx0YSB9KSB7XG4gICAgICAgIGNvbnN0IGluZm8gPSB7XG4gICAgICAgICAgICBkaXJlY3Rpb24sXG4gICAgICAgICAgICBkZWx0YSxcbiAgICAgICAgICAgIHR5cGU6IE5hdmlnYXRpb25UeXBlLnBvcCxcbiAgICAgICAgfTtcbiAgICAgICAgZm9yIChjb25zdCBjYWxsYmFjayBvZiBsaXN0ZW5lcnMpIHtcbiAgICAgICAgICAgIGNhbGxiYWNrKHRvLCBmcm9tLCBpbmZvKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBjb25zdCByb3V0ZXJIaXN0b3J5ID0ge1xuICAgICAgICAvLyByZXdyaXR0ZW4gYnkgT2JqZWN0LmRlZmluZVByb3BlcnR5XG4gICAgICAgIGxvY2F0aW9uOiBTVEFSVCxcbiAgICAgICAgLy8gVE9ETzogc2hvdWxkIGJlIGtlcHQgaW4gcXVldWVcbiAgICAgICAgc3RhdGU6IHt9LFxuICAgICAgICBiYXNlLFxuICAgICAgICBjcmVhdGVIcmVmOiBjcmVhdGVIcmVmLmJpbmQobnVsbCwgYmFzZSksXG4gICAgICAgIHJlcGxhY2UodG8pIHtcbiAgICAgICAgICAgIC8vIHJlbW92ZSBjdXJyZW50IGVudHJ5IGFuZCBkZWNyZW1lbnQgcG9zaXRpb25cbiAgICAgICAgICAgIHF1ZXVlLnNwbGljZShwb3NpdGlvbi0tLCAxKTtcbiAgICAgICAgICAgIHNldExvY2F0aW9uKHRvKTtcbiAgICAgICAgfSxcbiAgICAgICAgcHVzaCh0bywgZGF0YSkge1xuICAgICAgICAgICAgc2V0TG9jYXRpb24odG8pO1xuICAgICAgICB9LFxuICAgICAgICBsaXN0ZW4oY2FsbGJhY2spIHtcbiAgICAgICAgICAgIGxpc3RlbmVycy5wdXNoKGNhbGxiYWNrKTtcbiAgICAgICAgICAgIHJldHVybiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgaW5kZXggPSBsaXN0ZW5lcnMuaW5kZXhPZihjYWxsYmFjayk7XG4gICAgICAgICAgICAgICAgaWYgKGluZGV4ID4gLTEpXG4gICAgICAgICAgICAgICAgICAgIGxpc3RlbmVycy5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfSxcbiAgICAgICAgZGVzdHJveSgpIHtcbiAgICAgICAgICAgIGxpc3RlbmVycyA9IFtdO1xuICAgICAgICAgICAgcXVldWUgPSBbU1RBUlRdO1xuICAgICAgICAgICAgcG9zaXRpb24gPSAwO1xuICAgICAgICB9LFxuICAgICAgICBnbyhkZWx0YSwgc2hvdWxkVHJpZ2dlciA9IHRydWUpIHtcbiAgICAgICAgICAgIGNvbnN0IGZyb20gPSB0aGlzLmxvY2F0aW9uO1xuICAgICAgICAgICAgY29uc3QgZGlyZWN0aW9uID0gXG4gICAgICAgICAgICAvLyB3ZSBhcmUgY29uc2lkZXJpbmcgZGVsdGEgPT09IDAgZ29pbmcgZm9yd2FyZCwgYnV0IGluIGFic3RyYWN0IG1vZGVcbiAgICAgICAgICAgIC8vIHVzaW5nIDAgZm9yIHRoZSBkZWx0YSBkb2Vzbid0IG1ha2Ugc2Vuc2UgbGlrZSBpdCBkb2VzIGluIGh0bWw1IHdoZXJlXG4gICAgICAgICAgICAvLyBpdCByZWxvYWRzIHRoZSBwYWdlXG4gICAgICAgICAgICBkZWx0YSA8IDAgPyBOYXZpZ2F0aW9uRGlyZWN0aW9uLmJhY2sgOiBOYXZpZ2F0aW9uRGlyZWN0aW9uLmZvcndhcmQ7XG4gICAgICAgICAgICBwb3NpdGlvbiA9IE1hdGgubWF4KDAsIE1hdGgubWluKHBvc2l0aW9uICsgZGVsdGEsIHF1ZXVlLmxlbmd0aCAtIDEpKTtcbiAgICAgICAgICAgIGlmIChzaG91bGRUcmlnZ2VyKSB7XG4gICAgICAgICAgICAgICAgdHJpZ2dlckxpc3RlbmVycyh0aGlzLmxvY2F0aW9uLCBmcm9tLCB7XG4gICAgICAgICAgICAgICAgICAgIGRpcmVjdGlvbixcbiAgICAgICAgICAgICAgICAgICAgZGVsdGEsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgfTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkocm91dGVySGlzdG9yeSwgJ2xvY2F0aW9uJywge1xuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBnZXQ6ICgpID0+IHF1ZXVlW3Bvc2l0aW9uXSxcbiAgICB9KTtcbiAgICByZXR1cm4gcm91dGVySGlzdG9yeTtcbn1cblxuLyoqXG4gKiBDcmVhdGVzIGEgaGFzaCBoaXN0b3J5LiBVc2VmdWwgZm9yIHdlYiBhcHBsaWNhdGlvbnMgd2l0aCBubyBob3N0IChlLmcuIGBmaWxlOi8vYCkgb3Igd2hlbiBjb25maWd1cmluZyBhIHNlcnZlciB0b1xuICogaGFuZGxlIGFueSBVUkwgaXMgbm90IHBvc3NpYmxlLlxuICpcbiAqIEBwYXJhbSBiYXNlIC0gb3B0aW9uYWwgYmFzZSB0byBwcm92aWRlLiBEZWZhdWx0cyB0byBgbG9jYXRpb24ucGF0aG5hbWUgKyBsb2NhdGlvbi5zZWFyY2hgIElmIHRoZXJlIGlzIGEgYDxiYXNlPmAgdGFnXG4gKiBpbiB0aGUgYGhlYWRgLCBpdHMgdmFsdWUgd2lsbCBiZSBpZ25vcmVkIGluIGZhdm9yIG9mIHRoaXMgcGFyYW1ldGVyICoqYnV0IG5vdGUgaXQgYWZmZWN0cyBhbGwgdGhlIGhpc3RvcnkucHVzaFN0YXRlKClcbiAqIGNhbGxzKiosIG1lYW5pbmcgdGhhdCBpZiB5b3UgdXNlIGEgYDxiYXNlPmAgdGFnLCBpdCdzIGBocmVmYCB2YWx1ZSAqKmhhcyB0byBtYXRjaCB0aGlzIHBhcmFtZXRlcioqIChpZ25vcmluZyBhbnl0aGluZ1xuICogYWZ0ZXIgdGhlIGAjYCkuXG4gKlxuICogQGV4YW1wbGVcbiAqIGBgYGpzXG4gKiAvLyBhdCBodHRwczovL2V4YW1wbGUuY29tL2ZvbGRlclxuICogY3JlYXRlV2ViSGFzaEhpc3RvcnkoKSAvLyBnaXZlcyBhIHVybCBvZiBgaHR0cHM6Ly9leGFtcGxlLmNvbS9mb2xkZXIjYFxuICogY3JlYXRlV2ViSGFzaEhpc3RvcnkoJy9mb2xkZXIvJykgLy8gZ2l2ZXMgYSB1cmwgb2YgYGh0dHBzOi8vZXhhbXBsZS5jb20vZm9sZGVyLyNgXG4gKiAvLyBpZiB0aGUgYCNgIGlzIHByb3ZpZGVkIGluIHRoZSBiYXNlLCBpdCB3b24ndCBiZSBhZGRlZCBieSBgY3JlYXRlV2ViSGFzaEhpc3RvcnlgXG4gKiBjcmVhdGVXZWJIYXNoSGlzdG9yeSgnL2ZvbGRlci8jL2FwcC8nKSAvLyBnaXZlcyBhIHVybCBvZiBgaHR0cHM6Ly9leGFtcGxlLmNvbS9mb2xkZXIvIy9hcHAvYFxuICogLy8geW91IHNob3VsZCBhdm9pZCBkb2luZyB0aGlzIGJlY2F1c2UgaXQgY2hhbmdlcyB0aGUgb3JpZ2luYWwgdXJsIGFuZCBicmVha3MgY29weWluZyB1cmxzXG4gKiBjcmVhdGVXZWJIYXNoSGlzdG9yeSgnL290aGVyLWZvbGRlci8nKSAvLyBnaXZlcyBhIHVybCBvZiBgaHR0cHM6Ly9leGFtcGxlLmNvbS9vdGhlci1mb2xkZXIvI2BcbiAqXG4gKiAvLyBhdCBmaWxlOi8vL3Vzci9ldGMvZm9sZGVyL2luZGV4Lmh0bWxcbiAqIC8vIGZvciBsb2NhdGlvbnMgd2l0aCBubyBgaG9zdGAsIHRoZSBiYXNlIGlzIGlnbm9yZWRcbiAqIGNyZWF0ZVdlYkhhc2hIaXN0b3J5KCcvaUFtSWdub3JlZCcpIC8vIGdpdmVzIGEgdXJsIG9mIGBmaWxlOi8vL3Vzci9ldGMvZm9sZGVyL2luZGV4Lmh0bWwjYFxuICogYGBgXG4gKi9cbmZ1bmN0aW9uIGNyZWF0ZVdlYkhhc2hIaXN0b3J5KGJhc2UpIHtcbiAgICAvLyBNYWtlIHN1cmUgdGhpcyBpbXBsZW1lbnRhdGlvbiBpcyBmaW5lIGluIHRlcm1zIG9mIGVuY29kaW5nLCBzcGVjaWFsbHkgZm9yIElFMTFcbiAgICAvLyBmb3IgYGZpbGU6Ly9gLCBkaXJlY3RseSB1c2UgdGhlIHBhdGhuYW1lIGFuZCBpZ25vcmUgdGhlIGJhc2VcbiAgICAvLyBsb2NhdGlvbi5wYXRobmFtZSBjb250YWlucyBhbiBpbml0aWFsIGAvYCBldmVuIGF0IHRoZSByb290OiBgaHR0cHM6Ly9leGFtcGxlLmNvbWBcbiAgICBiYXNlID0gbG9jYXRpb24uaG9zdCA/IGJhc2UgfHwgbG9jYXRpb24ucGF0aG5hbWUgKyBsb2NhdGlvbi5zZWFyY2ggOiAnJztcbiAgICAvLyBhbGxvdyB0aGUgdXNlciB0byBwcm92aWRlIGEgYCNgIGluIHRoZSBtaWRkbGU6IGAvYmFzZS8jL2FwcGBcbiAgICBpZiAoIWJhc2UuaW5jbHVkZXMoJyMnKSlcbiAgICAgICAgYmFzZSArPSAnIyc7XG4gICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJiAhYmFzZS5lbmRzV2l0aCgnIy8nKSAmJiAhYmFzZS5lbmRzV2l0aCgnIycpKSB7XG4gICAgICAgIHdhcm4oYEEgaGFzaCBiYXNlIG11c3QgZW5kIHdpdGggYSBcIiNcIjpcXG5cIiR7YmFzZX1cIiBzaG91bGQgYmUgXCIke2Jhc2UucmVwbGFjZSgvIy4qJC8sICcjJyl9XCIuYCk7XG4gICAgfVxuICAgIHJldHVybiBjcmVhdGVXZWJIaXN0b3J5KGJhc2UpO1xufVxuXG5mdW5jdGlvbiBpc1JvdXRlTG9jYXRpb24ocm91dGUpIHtcbiAgICByZXR1cm4gdHlwZW9mIHJvdXRlID09PSAnc3RyaW5nJyB8fCAocm91dGUgJiYgdHlwZW9mIHJvdXRlID09PSAnb2JqZWN0Jyk7XG59XG5mdW5jdGlvbiBpc1JvdXRlTmFtZShuYW1lKSB7XG4gICAgcmV0dXJuIHR5cGVvZiBuYW1lID09PSAnc3RyaW5nJyB8fCB0eXBlb2YgbmFtZSA9PT0gJ3N5bWJvbCc7XG59XG5cbi8qKlxuICogSW5pdGlhbCByb3V0ZSBsb2NhdGlvbiB3aGVyZSB0aGUgcm91dGVyIGlzLiBDYW4gYmUgdXNlZCBpbiBuYXZpZ2F0aW9uIGd1YXJkc1xuICogdG8gZGlmZmVyZW50aWF0ZSB0aGUgaW5pdGlhbCBuYXZpZ2F0aW9uLlxuICpcbiAqIEBleGFtcGxlXG4gKiBgYGBqc1xuICogaW1wb3J0IHsgU1RBUlRfTE9DQVRJT04gfSBmcm9tICd2dWUtcm91dGVyJ1xuICpcbiAqIHJvdXRlci5iZWZvcmVFYWNoKCh0bywgZnJvbSkgPT4ge1xuICogICBpZiAoZnJvbSA9PT0gU1RBUlRfTE9DQVRJT04pIHtcbiAqICAgICAvLyBpbml0aWFsIG5hdmlnYXRpb25cbiAqICAgfVxuICogfSlcbiAqIGBgYFxuICovXG5jb25zdCBTVEFSVF9MT0NBVElPTl9OT1JNQUxJWkVEID0ge1xuICAgIHBhdGg6ICcvJyxcbiAgICBuYW1lOiB1bmRlZmluZWQsXG4gICAgcGFyYW1zOiB7fSxcbiAgICBxdWVyeToge30sXG4gICAgaGFzaDogJycsXG4gICAgZnVsbFBhdGg6ICcvJyxcbiAgICBtYXRjaGVkOiBbXSxcbiAgICBtZXRhOiB7fSxcbiAgICByZWRpcmVjdGVkRnJvbTogdW5kZWZpbmVkLFxufTtcblxuY29uc3QgTmF2aWdhdGlvbkZhaWx1cmVTeW1ib2wgPSBTeW1ib2woKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpID8gJ25hdmlnYXRpb24gZmFpbHVyZScgOiAnJyk7XG4vKipcbiAqIEVudW1lcmF0aW9uIHdpdGggYWxsIHBvc3NpYmxlIHR5cGVzIGZvciBuYXZpZ2F0aW9uIGZhaWx1cmVzLiBDYW4gYmUgcGFzc2VkIHRvXG4gKiB7QGxpbmsgaXNOYXZpZ2F0aW9uRmFpbHVyZX0gdG8gY2hlY2sgZm9yIHNwZWNpZmljIGZhaWx1cmVzLlxuICovXG52YXIgTmF2aWdhdGlvbkZhaWx1cmVUeXBlO1xuKGZ1bmN0aW9uIChOYXZpZ2F0aW9uRmFpbHVyZVR5cGUpIHtcbiAgICAvKipcbiAgICAgKiBBbiBhYm9ydGVkIG5hdmlnYXRpb24gaXMgYSBuYXZpZ2F0aW9uIHRoYXQgZmFpbGVkIGJlY2F1c2UgYSBuYXZpZ2F0aW9uXG4gICAgICogZ3VhcmQgcmV0dXJuZWQgYGZhbHNlYCBvciBjYWxsZWQgYG5leHQoZmFsc2UpYFxuICAgICAqL1xuICAgIE5hdmlnYXRpb25GYWlsdXJlVHlwZVtOYXZpZ2F0aW9uRmFpbHVyZVR5cGVbXCJhYm9ydGVkXCJdID0gNF0gPSBcImFib3J0ZWRcIjtcbiAgICAvKipcbiAgICAgKiBBIGNhbmNlbGxlZCBuYXZpZ2F0aW9uIGlzIGEgbmF2aWdhdGlvbiB0aGF0IGZhaWxlZCBiZWNhdXNlIGEgbW9yZSByZWNlbnRcbiAgICAgKiBuYXZpZ2F0aW9uIGZpbmlzaGVkIHN0YXJ0ZWQgKG5vdCBuZWNlc3NhcmlseSBmaW5pc2hlZCkuXG4gICAgICovXG4gICAgTmF2aWdhdGlvbkZhaWx1cmVUeXBlW05hdmlnYXRpb25GYWlsdXJlVHlwZVtcImNhbmNlbGxlZFwiXSA9IDhdID0gXCJjYW5jZWxsZWRcIjtcbiAgICAvKipcbiAgICAgKiBBIGR1cGxpY2F0ZWQgbmF2aWdhdGlvbiBpcyBhIG5hdmlnYXRpb24gdGhhdCBmYWlsZWQgYmVjYXVzZSBpdCB3YXNcbiAgICAgKiBpbml0aWF0ZWQgd2hpbGUgYWxyZWFkeSBiZWluZyBhdCB0aGUgZXhhY3Qgc2FtZSBsb2NhdGlvbi5cbiAgICAgKi9cbiAgICBOYXZpZ2F0aW9uRmFpbHVyZVR5cGVbTmF2aWdhdGlvbkZhaWx1cmVUeXBlW1wiZHVwbGljYXRlZFwiXSA9IDE2XSA9IFwiZHVwbGljYXRlZFwiO1xufSkoTmF2aWdhdGlvbkZhaWx1cmVUeXBlIHx8IChOYXZpZ2F0aW9uRmFpbHVyZVR5cGUgPSB7fSkpO1xuLy8gREVWIG9ubHkgZGVidWcgbWVzc2FnZXNcbmNvbnN0IEVycm9yVHlwZU1lc3NhZ2VzID0ge1xuICAgIFsxIC8qIEVycm9yVHlwZXMuTUFUQ0hFUl9OT1RfRk9VTkQgKi9dKHsgbG9jYXRpb24sIGN1cnJlbnRMb2NhdGlvbiB9KSB7XG4gICAgICAgIHJldHVybiBgTm8gbWF0Y2ggZm9yXFxuICR7SlNPTi5zdHJpbmdpZnkobG9jYXRpb24pfSR7Y3VycmVudExvY2F0aW9uXG4gICAgICAgICAgICA/ICdcXG53aGlsZSBiZWluZyBhdFxcbicgKyBKU09OLnN0cmluZ2lmeShjdXJyZW50TG9jYXRpb24pXG4gICAgICAgICAgICA6ICcnfWA7XG4gICAgfSxcbiAgICBbMiAvKiBFcnJvclR5cGVzLk5BVklHQVRJT05fR1VBUkRfUkVESVJFQ1QgKi9dKHsgZnJvbSwgdG8sIH0pIHtcbiAgICAgICAgcmV0dXJuIGBSZWRpcmVjdGVkIGZyb20gXCIke2Zyb20uZnVsbFBhdGh9XCIgdG8gXCIke3N0cmluZ2lmeVJvdXRlKHRvKX1cIiB2aWEgYSBuYXZpZ2F0aW9uIGd1YXJkLmA7XG4gICAgfSxcbiAgICBbNCAvKiBFcnJvclR5cGVzLk5BVklHQVRJT05fQUJPUlRFRCAqL10oeyBmcm9tLCB0byB9KSB7XG4gICAgICAgIHJldHVybiBgTmF2aWdhdGlvbiBhYm9ydGVkIGZyb20gXCIke2Zyb20uZnVsbFBhdGh9XCIgdG8gXCIke3RvLmZ1bGxQYXRofVwiIHZpYSBhIG5hdmlnYXRpb24gZ3VhcmQuYDtcbiAgICB9LFxuICAgIFs4IC8qIEVycm9yVHlwZXMuTkFWSUdBVElPTl9DQU5DRUxMRUQgKi9dKHsgZnJvbSwgdG8gfSkge1xuICAgICAgICByZXR1cm4gYE5hdmlnYXRpb24gY2FuY2VsbGVkIGZyb20gXCIke2Zyb20uZnVsbFBhdGh9XCIgdG8gXCIke3RvLmZ1bGxQYXRofVwiIHdpdGggYSBuZXcgbmF2aWdhdGlvbi5gO1xuICAgIH0sXG4gICAgWzE2IC8qIEVycm9yVHlwZXMuTkFWSUdBVElPTl9EVVBMSUNBVEVEICovXSh7IGZyb20sIHRvIH0pIHtcbiAgICAgICAgcmV0dXJuIGBBdm9pZGVkIHJlZHVuZGFudCBuYXZpZ2F0aW9uIHRvIGN1cnJlbnQgbG9jYXRpb246IFwiJHtmcm9tLmZ1bGxQYXRofVwiLmA7XG4gICAgfSxcbn07XG4vKipcbiAqIENyZWF0ZXMgYSB0eXBlZCBOYXZpZ2F0aW9uRmFpbHVyZSBvYmplY3QuXG4gKiBAaW50ZXJuYWxcbiAqIEBwYXJhbSB0eXBlIC0gTmF2aWdhdGlvbkZhaWx1cmVUeXBlXG4gKiBAcGFyYW0gcGFyYW1zIC0geyBmcm9tLCB0byB9XG4gKi9cbmZ1bmN0aW9uIGNyZWF0ZVJvdXRlckVycm9yKHR5cGUsIHBhcmFtcykge1xuICAgIC8vIGtlZXAgZnVsbCBlcnJvciBtZXNzYWdlcyBpbiBjanMgdmVyc2lvbnNcbiAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHx8ICF0cnVlKSB7XG4gICAgICAgIHJldHVybiBhc3NpZ24obmV3IEVycm9yKEVycm9yVHlwZU1lc3NhZ2VzW3R5cGVdKHBhcmFtcykpLCB7XG4gICAgICAgICAgICB0eXBlLFxuICAgICAgICAgICAgW05hdmlnYXRpb25GYWlsdXJlU3ltYm9sXTogdHJ1ZSxcbiAgICAgICAgfSwgcGFyYW1zKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHJldHVybiBhc3NpZ24obmV3IEVycm9yKCksIHtcbiAgICAgICAgICAgIHR5cGUsXG4gICAgICAgICAgICBbTmF2aWdhdGlvbkZhaWx1cmVTeW1ib2xdOiB0cnVlLFxuICAgICAgICB9LCBwYXJhbXMpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGlzTmF2aWdhdGlvbkZhaWx1cmUoZXJyb3IsIHR5cGUpIHtcbiAgICByZXR1cm4gKGVycm9yIGluc3RhbmNlb2YgRXJyb3IgJiZcbiAgICAgICAgTmF2aWdhdGlvbkZhaWx1cmVTeW1ib2wgaW4gZXJyb3IgJiZcbiAgICAgICAgKHR5cGUgPT0gbnVsbCB8fCAhIShlcnJvci50eXBlICYgdHlwZSkpKTtcbn1cbmNvbnN0IHByb3BlcnRpZXNUb0xvZyA9IFsncGFyYW1zJywgJ3F1ZXJ5JywgJ2hhc2gnXTtcbmZ1bmN0aW9uIHN0cmluZ2lmeVJvdXRlKHRvKSB7XG4gICAgaWYgKHR5cGVvZiB0byA9PT0gJ3N0cmluZycpXG4gICAgICAgIHJldHVybiB0bztcbiAgICBpZiAodG8ucGF0aCAhPSBudWxsKVxuICAgICAgICByZXR1cm4gdG8ucGF0aDtcbiAgICBjb25zdCBsb2NhdGlvbiA9IHt9O1xuICAgIGZvciAoY29uc3Qga2V5IG9mIHByb3BlcnRpZXNUb0xvZykge1xuICAgICAgICBpZiAoa2V5IGluIHRvKVxuICAgICAgICAgICAgbG9jYXRpb25ba2V5XSA9IHRvW2tleV07XG4gICAgfVxuICAgIHJldHVybiBKU09OLnN0cmluZ2lmeShsb2NhdGlvbiwgbnVsbCwgMik7XG59XG5cbi8vIGRlZmF1bHQgcGF0dGVybiBmb3IgYSBwYXJhbTogbm9uLWdyZWVkeSBldmVyeXRoaW5nIGJ1dCAvXG5jb25zdCBCQVNFX1BBUkFNX1BBVFRFUk4gPSAnW14vXSs/JztcbmNvbnN0IEJBU0VfUEFUSF9QQVJTRVJfT1BUSU9OUyA9IHtcbiAgICBzZW5zaXRpdmU6IGZhbHNlLFxuICAgIHN0cmljdDogZmFsc2UsXG4gICAgc3RhcnQ6IHRydWUsXG4gICAgZW5kOiB0cnVlLFxufTtcbi8vIFNwZWNpYWwgUmVnZXggY2hhcmFjdGVycyB0aGF0IG11c3QgYmUgZXNjYXBlZCBpbiBzdGF0aWMgdG9rZW5zXG5jb25zdCBSRUdFWF9DSEFSU19SRSA9IC9bLisqP14ke30oKVtcXF0vXFxcXF0vZztcbi8qKlxuICogQ3JlYXRlcyBhIHBhdGggcGFyc2VyIGZyb20gYW4gYXJyYXkgb2YgU2VnbWVudHMgKGEgc2VnbWVudCBpcyBhbiBhcnJheSBvZiBUb2tlbnMpXG4gKlxuICogQHBhcmFtIHNlZ21lbnRzIC0gYXJyYXkgb2Ygc2VnbWVudHMgcmV0dXJuZWQgYnkgdG9rZW5pemVQYXRoXG4gKiBAcGFyYW0gZXh0cmFPcHRpb25zIC0gb3B0aW9uYWwgb3B0aW9ucyBmb3IgdGhlIHJlZ2V4cFxuICogQHJldHVybnMgYSBQYXRoUGFyc2VyXG4gKi9cbmZ1bmN0aW9uIHRva2Vuc1RvUGFyc2VyKHNlZ21lbnRzLCBleHRyYU9wdGlvbnMpIHtcbiAgICBjb25zdCBvcHRpb25zID0gYXNzaWduKHt9LCBCQVNFX1BBVEhfUEFSU0VSX09QVElPTlMsIGV4dHJhT3B0aW9ucyk7XG4gICAgLy8gdGhlIGFtb3VudCBvZiBzY29yZXMgaXMgdGhlIHNhbWUgYXMgdGhlIGxlbmd0aCBvZiBzZWdtZW50cyBleGNlcHQgZm9yIHRoZSByb290IHNlZ21lbnQgXCIvXCJcbiAgICBjb25zdCBzY29yZSA9IFtdO1xuICAgIC8vIHRoZSByZWdleHAgYXMgYSBzdHJpbmdcbiAgICBsZXQgcGF0dGVybiA9IG9wdGlvbnMuc3RhcnQgPyAnXicgOiAnJztcbiAgICAvLyBleHRyYWN0ZWQga2V5c1xuICAgIGNvbnN0IGtleXMgPSBbXTtcbiAgICBmb3IgKGNvbnN0IHNlZ21lbnQgb2Ygc2VnbWVudHMpIHtcbiAgICAgICAgLy8gdGhlIHJvb3Qgc2VnbWVudCBuZWVkcyBzcGVjaWFsIHRyZWF0bWVudFxuICAgICAgICBjb25zdCBzZWdtZW50U2NvcmVzID0gc2VnbWVudC5sZW5ndGggPyBbXSA6IFs5MCAvKiBQYXRoU2NvcmUuUm9vdCAqL107XG4gICAgICAgIC8vIGFsbG93IHRyYWlsaW5nIHNsYXNoXG4gICAgICAgIGlmIChvcHRpb25zLnN0cmljdCAmJiAhc2VnbWVudC5sZW5ndGgpXG4gICAgICAgICAgICBwYXR0ZXJuICs9ICcvJztcbiAgICAgICAgZm9yIChsZXQgdG9rZW5JbmRleCA9IDA7IHRva2VuSW5kZXggPCBzZWdtZW50Lmxlbmd0aDsgdG9rZW5JbmRleCsrKSB7XG4gICAgICAgICAgICBjb25zdCB0b2tlbiA9IHNlZ21lbnRbdG9rZW5JbmRleF07XG4gICAgICAgICAgICAvLyByZXNldHMgdGhlIHNjb3JlIGlmIHdlIGFyZSBpbnNpZGUgYSBzdWItc2VnbWVudCAvOmEtb3RoZXItOmJcbiAgICAgICAgICAgIGxldCBzdWJTZWdtZW50U2NvcmUgPSA0MCAvKiBQYXRoU2NvcmUuU2VnbWVudCAqLyArXG4gICAgICAgICAgICAgICAgKG9wdGlvbnMuc2Vuc2l0aXZlID8gMC4yNSAvKiBQYXRoU2NvcmUuQm9udXNDYXNlU2Vuc2l0aXZlICovIDogMCk7XG4gICAgICAgICAgICBpZiAodG9rZW4udHlwZSA9PT0gMCAvKiBUb2tlblR5cGUuU3RhdGljICovKSB7XG4gICAgICAgICAgICAgICAgLy8gcHJlcGVuZCB0aGUgc2xhc2ggaWYgd2UgYXJlIHN0YXJ0aW5nIGEgbmV3IHNlZ21lbnRcbiAgICAgICAgICAgICAgICBpZiAoIXRva2VuSW5kZXgpXG4gICAgICAgICAgICAgICAgICAgIHBhdHRlcm4gKz0gJy8nO1xuICAgICAgICAgICAgICAgIHBhdHRlcm4gKz0gdG9rZW4udmFsdWUucmVwbGFjZShSRUdFWF9DSEFSU19SRSwgJ1xcXFwkJicpO1xuICAgICAgICAgICAgICAgIHN1YlNlZ21lbnRTY29yZSArPSA0MCAvKiBQYXRoU2NvcmUuU3RhdGljICovO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAodG9rZW4udHlwZSA9PT0gMSAvKiBUb2tlblR5cGUuUGFyYW0gKi8pIHtcbiAgICAgICAgICAgICAgICBjb25zdCB7IHZhbHVlLCByZXBlYXRhYmxlLCBvcHRpb25hbCwgcmVnZXhwIH0gPSB0b2tlbjtcbiAgICAgICAgICAgICAgICBrZXlzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiB2YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgcmVwZWF0YWJsZSxcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9uYWwsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgY29uc3QgcmUgPSByZWdleHAgPyByZWdleHAgOiBCQVNFX1BBUkFNX1BBVFRFUk47XG4gICAgICAgICAgICAgICAgLy8gdGhlIHVzZXIgcHJvdmlkZWQgYSBjdXN0b20gcmVnZXhwIC86aWQoXFxcXGQrKVxuICAgICAgICAgICAgICAgIGlmIChyZSAhPT0gQkFTRV9QQVJBTV9QQVRURVJOKSB7XG4gICAgICAgICAgICAgICAgICAgIHN1YlNlZ21lbnRTY29yZSArPSAxMCAvKiBQYXRoU2NvcmUuQm9udXNDdXN0b21SZWdFeHAgKi87XG4gICAgICAgICAgICAgICAgICAgIC8vIG1ha2Ugc3VyZSB0aGUgcmVnZXhwIGlzIHZhbGlkIGJlZm9yZSB1c2luZyBpdFxuICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbmV3IFJlZ0V4cChgKCR7cmV9KWApO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgSW52YWxpZCBjdXN0b20gUmVnRXhwIGZvciBwYXJhbSBcIiR7dmFsdWV9XCIgKCR7cmV9KTogYCArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXJyLm1lc3NhZ2UpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIHdoZW4gd2UgcmVwZWF0IHdlIG11c3QgdGFrZSBjYXJlIG9mIHRoZSByZXBlYXRpbmcgbGVhZGluZyBzbGFzaFxuICAgICAgICAgICAgICAgIGxldCBzdWJQYXR0ZXJuID0gcmVwZWF0YWJsZSA/IGAoKD86JHtyZX0pKD86Lyg/OiR7cmV9KSkqKWAgOiBgKCR7cmV9KWA7XG4gICAgICAgICAgICAgICAgLy8gcHJlcGVuZCB0aGUgc2xhc2ggaWYgd2UgYXJlIHN0YXJ0aW5nIGEgbmV3IHNlZ21lbnRcbiAgICAgICAgICAgICAgICBpZiAoIXRva2VuSW5kZXgpXG4gICAgICAgICAgICAgICAgICAgIHN1YlBhdHRlcm4gPVxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gYXZvaWQgYW4gb3B0aW9uYWwgLyBpZiB0aGVyZSBhcmUgbW9yZSBzZWdtZW50cyBlLmcuIC86cD8tc3RhdGljXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBvciAvOnA/LTpwMlxuICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9uYWwgJiYgc2VnbWVudC5sZW5ndGggPCAyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBgKD86LyR7c3ViUGF0dGVybn0pYFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogJy8nICsgc3ViUGF0dGVybjtcbiAgICAgICAgICAgICAgICBpZiAob3B0aW9uYWwpXG4gICAgICAgICAgICAgICAgICAgIHN1YlBhdHRlcm4gKz0gJz8nO1xuICAgICAgICAgICAgICAgIHBhdHRlcm4gKz0gc3ViUGF0dGVybjtcbiAgICAgICAgICAgICAgICBzdWJTZWdtZW50U2NvcmUgKz0gMjAgLyogUGF0aFNjb3JlLkR5bmFtaWMgKi87XG4gICAgICAgICAgICAgICAgaWYgKG9wdGlvbmFsKVxuICAgICAgICAgICAgICAgICAgICBzdWJTZWdtZW50U2NvcmUgKz0gLTggLyogUGF0aFNjb3JlLkJvbnVzT3B0aW9uYWwgKi87XG4gICAgICAgICAgICAgICAgaWYgKHJlcGVhdGFibGUpXG4gICAgICAgICAgICAgICAgICAgIHN1YlNlZ21lbnRTY29yZSArPSAtMjAgLyogUGF0aFNjb3JlLkJvbnVzUmVwZWF0YWJsZSAqLztcbiAgICAgICAgICAgICAgICBpZiAocmUgPT09ICcuKicpXG4gICAgICAgICAgICAgICAgICAgIHN1YlNlZ21lbnRTY29yZSArPSAtNTAgLyogUGF0aFNjb3JlLkJvbnVzV2lsZGNhcmQgKi87XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzZWdtZW50U2NvcmVzLnB1c2goc3ViU2VnbWVudFNjb3JlKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBhbiBlbXB0eSBhcnJheSBsaWtlIC9ob21lLyAtPiBbW3tob21lfV0sIFtdXVxuICAgICAgICAvLyBpZiAoIXNlZ21lbnQubGVuZ3RoKSBwYXR0ZXJuICs9ICcvJ1xuICAgICAgICBzY29yZS5wdXNoKHNlZ21lbnRTY29yZXMpO1xuICAgIH1cbiAgICAvLyBvbmx5IGFwcGx5IHRoZSBzdHJpY3QgYm9udXMgdG8gdGhlIGxhc3Qgc2NvcmVcbiAgICBpZiAob3B0aW9ucy5zdHJpY3QgJiYgb3B0aW9ucy5lbmQpIHtcbiAgICAgICAgY29uc3QgaSA9IHNjb3JlLmxlbmd0aCAtIDE7XG4gICAgICAgIHNjb3JlW2ldW3Njb3JlW2ldLmxlbmd0aCAtIDFdICs9IDAuNzAwMDAwMDAwMDAwMDAwMSAvKiBQYXRoU2NvcmUuQm9udXNTdHJpY3QgKi87XG4gICAgfVxuICAgIC8vIFRPRE86IGRldiBvbmx5IHdhcm4gZG91YmxlIHRyYWlsaW5nIHNsYXNoXG4gICAgaWYgKCFvcHRpb25zLnN0cmljdClcbiAgICAgICAgcGF0dGVybiArPSAnLz8nO1xuICAgIGlmIChvcHRpb25zLmVuZClcbiAgICAgICAgcGF0dGVybiArPSAnJCc7XG4gICAgLy8gYWxsb3cgcGF0aHMgbGlrZSAvZHluYW1pYyB0byBvbmx5IG1hdGNoIGR5bmFtaWMgb3IgZHluYW1pYy8uLi4gYnV0IG5vdCBkeW5hbWljX3NvbWV0aGluZ19lbHNlXG4gICAgZWxzZSBpZiAob3B0aW9ucy5zdHJpY3QpXG4gICAgICAgIHBhdHRlcm4gKz0gJyg/Oi98JCknO1xuICAgIGNvbnN0IHJlID0gbmV3IFJlZ0V4cChwYXR0ZXJuLCBvcHRpb25zLnNlbnNpdGl2ZSA/ICcnIDogJ2knKTtcbiAgICBmdW5jdGlvbiBwYXJzZShwYXRoKSB7XG4gICAgICAgIGNvbnN0IG1hdGNoID0gcGF0aC5tYXRjaChyZSk7XG4gICAgICAgIGNvbnN0IHBhcmFtcyA9IHt9O1xuICAgICAgICBpZiAoIW1hdGNoKVxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIGZvciAobGV0IGkgPSAxOyBpIDwgbWF0Y2gubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gbWF0Y2hbaV0gfHwgJyc7XG4gICAgICAgICAgICBjb25zdCBrZXkgPSBrZXlzW2kgLSAxXTtcbiAgICAgICAgICAgIHBhcmFtc1trZXkubmFtZV0gPSB2YWx1ZSAmJiBrZXkucmVwZWF0YWJsZSA/IHZhbHVlLnNwbGl0KCcvJykgOiB2YWx1ZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcGFyYW1zO1xuICAgIH1cbiAgICBmdW5jdGlvbiBzdHJpbmdpZnkocGFyYW1zKSB7XG4gICAgICAgIGxldCBwYXRoID0gJyc7XG4gICAgICAgIC8vIGZvciBvcHRpb25hbCBwYXJhbWV0ZXJzIHRvIGFsbG93IHRvIGJlIGVtcHR5XG4gICAgICAgIGxldCBhdm9pZER1cGxpY2F0ZWRTbGFzaCA9IGZhbHNlO1xuICAgICAgICBmb3IgKGNvbnN0IHNlZ21lbnQgb2Ygc2VnbWVudHMpIHtcbiAgICAgICAgICAgIGlmICghYXZvaWREdXBsaWNhdGVkU2xhc2ggfHwgIXBhdGguZW5kc1dpdGgoJy8nKSlcbiAgICAgICAgICAgICAgICBwYXRoICs9ICcvJztcbiAgICAgICAgICAgIGF2b2lkRHVwbGljYXRlZFNsYXNoID0gZmFsc2U7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IHRva2VuIG9mIHNlZ21lbnQpIHtcbiAgICAgICAgICAgICAgICBpZiAodG9rZW4udHlwZSA9PT0gMCAvKiBUb2tlblR5cGUuU3RhdGljICovKSB7XG4gICAgICAgICAgICAgICAgICAgIHBhdGggKz0gdG9rZW4udmFsdWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKHRva2VuLnR5cGUgPT09IDEgLyogVG9rZW5UeXBlLlBhcmFtICovKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHsgdmFsdWUsIHJlcGVhdGFibGUsIG9wdGlvbmFsIH0gPSB0b2tlbjtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcGFyYW0gPSB2YWx1ZSBpbiBwYXJhbXMgPyBwYXJhbXNbdmFsdWVdIDogJyc7XG4gICAgICAgICAgICAgICAgICAgIGlmIChpc0FycmF5KHBhcmFtKSAmJiAhcmVwZWF0YWJsZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBQcm92aWRlZCBwYXJhbSBcIiR7dmFsdWV9XCIgaXMgYW4gYXJyYXkgYnV0IGl0IGlzIG5vdCByZXBlYXRhYmxlICgqIG9yICsgbW9kaWZpZXJzKWApO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHRleHQgPSBpc0FycmF5KHBhcmFtKVxuICAgICAgICAgICAgICAgICAgICAgICAgPyBwYXJhbS5qb2luKCcvJylcbiAgICAgICAgICAgICAgICAgICAgICAgIDogcGFyYW07XG4gICAgICAgICAgICAgICAgICAgIGlmICghdGV4dCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9wdGlvbmFsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaWYgd2UgaGF2ZSBtb3JlIHRoYW4gb25lIG9wdGlvbmFsIHBhcmFtIGxpa2UgLzphPy1zdGF0aWMgd2UgZG9uJ3QgbmVlZCB0byBjYXJlIGFib3V0IHRoZSBvcHRpb25hbCBwYXJhbVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzZWdtZW50Lmxlbmd0aCA8IDIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gcmVtb3ZlIHRoZSBsYXN0IHNsYXNoIGFzIHdlIGNvdWxkIGJlIGF0IHRoZSBlbmRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBhdGguZW5kc1dpdGgoJy8nKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhdGggPSBwYXRoLnNsaWNlKDAsIC0xKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZG8gbm90IGFwcGVuZCBhIHNsYXNoIG9uIHRoZSBuZXh0IGl0ZXJhdGlvblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdm9pZER1cGxpY2F0ZWRTbGFzaCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgTWlzc2luZyByZXF1aXJlZCBwYXJhbSBcIiR7dmFsdWV9XCJgKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBwYXRoICs9IHRleHQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIGF2b2lkIGVtcHR5IHBhdGggd2hlbiB3ZSBoYXZlIG11bHRpcGxlIG9wdGlvbmFsIHBhcmFtc1xuICAgICAgICByZXR1cm4gcGF0aCB8fCAnLyc7XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICAgIHJlLFxuICAgICAgICBzY29yZSxcbiAgICAgICAga2V5cyxcbiAgICAgICAgcGFyc2UsXG4gICAgICAgIHN0cmluZ2lmeSxcbiAgICB9O1xufVxuLyoqXG4gKiBDb21wYXJlcyBhbiBhcnJheSBvZiBudW1iZXJzIGFzIHVzZWQgaW4gUGF0aFBhcnNlci5zY29yZSBhbmQgcmV0dXJucyBhXG4gKiBudW1iZXIuIFRoaXMgZnVuY3Rpb24gY2FuIGJlIHVzZWQgdG8gYHNvcnRgIGFuIGFycmF5XG4gKlxuICogQHBhcmFtIGEgLSBmaXJzdCBhcnJheSBvZiBudW1iZXJzXG4gKiBAcGFyYW0gYiAtIHNlY29uZCBhcnJheSBvZiBudW1iZXJzXG4gKiBAcmV0dXJucyAwIGlmIGJvdGggYXJlIGVxdWFsLCA8IDAgaWYgYSBzaG91bGQgYmUgc29ydGVkIGZpcnN0LCA+IDAgaWYgYlxuICogc2hvdWxkIGJlIHNvcnRlZCBmaXJzdFxuICovXG5mdW5jdGlvbiBjb21wYXJlU2NvcmVBcnJheShhLCBiKSB7XG4gICAgbGV0IGkgPSAwO1xuICAgIHdoaWxlIChpIDwgYS5sZW5ndGggJiYgaSA8IGIubGVuZ3RoKSB7XG4gICAgICAgIGNvbnN0IGRpZmYgPSBiW2ldIC0gYVtpXTtcbiAgICAgICAgLy8gb25seSBrZWVwIGdvaW5nIGlmIGRpZmYgPT09IDBcbiAgICAgICAgaWYgKGRpZmYpXG4gICAgICAgICAgICByZXR1cm4gZGlmZjtcbiAgICAgICAgaSsrO1xuICAgIH1cbiAgICAvLyBpZiB0aGUgbGFzdCBzdWJzZWdtZW50IHdhcyBTdGF0aWMsIHRoZSBzaG9ydGVyIHNlZ21lbnRzIHNob3VsZCBiZSBzb3J0ZWQgZmlyc3RcbiAgICAvLyBvdGhlcndpc2Ugc29ydCB0aGUgbG9uZ2VzdCBzZWdtZW50IGZpcnN0XG4gICAgaWYgKGEubGVuZ3RoIDwgYi5sZW5ndGgpIHtcbiAgICAgICAgcmV0dXJuIGEubGVuZ3RoID09PSAxICYmIGFbMF0gPT09IDQwIC8qIFBhdGhTY29yZS5TdGF0aWMgKi8gKyA0MCAvKiBQYXRoU2NvcmUuU2VnbWVudCAqL1xuICAgICAgICAgICAgPyAtMVxuICAgICAgICAgICAgOiAxO1xuICAgIH1cbiAgICBlbHNlIGlmIChhLmxlbmd0aCA+IGIubGVuZ3RoKSB7XG4gICAgICAgIHJldHVybiBiLmxlbmd0aCA9PT0gMSAmJiBiWzBdID09PSA0MCAvKiBQYXRoU2NvcmUuU3RhdGljICovICsgNDAgLyogUGF0aFNjb3JlLlNlZ21lbnQgKi9cbiAgICAgICAgICAgID8gMVxuICAgICAgICAgICAgOiAtMTtcbiAgICB9XG4gICAgcmV0dXJuIDA7XG59XG4vKipcbiAqIENvbXBhcmUgZnVuY3Rpb24gdGhhdCBjYW4gYmUgdXNlZCB3aXRoIGBzb3J0YCB0byBzb3J0IGFuIGFycmF5IG9mIFBhdGhQYXJzZXJcbiAqXG4gKiBAcGFyYW0gYSAtIGZpcnN0IFBhdGhQYXJzZXJcbiAqIEBwYXJhbSBiIC0gc2Vjb25kIFBhdGhQYXJzZXJcbiAqIEByZXR1cm5zIDAgaWYgYm90aCBhcmUgZXF1YWwsIDwgMCBpZiBhIHNob3VsZCBiZSBzb3J0ZWQgZmlyc3QsID4gMCBpZiBiXG4gKi9cbmZ1bmN0aW9uIGNvbXBhcmVQYXRoUGFyc2VyU2NvcmUoYSwgYikge1xuICAgIGxldCBpID0gMDtcbiAgICBjb25zdCBhU2NvcmUgPSBhLnNjb3JlO1xuICAgIGNvbnN0IGJTY29yZSA9IGIuc2NvcmU7XG4gICAgd2hpbGUgKGkgPCBhU2NvcmUubGVuZ3RoICYmIGkgPCBiU2NvcmUubGVuZ3RoKSB7XG4gICAgICAgIGNvbnN0IGNvbXAgPSBjb21wYXJlU2NvcmVBcnJheShhU2NvcmVbaV0sIGJTY29yZVtpXSk7XG4gICAgICAgIC8vIGRvIG5vdCByZXR1cm4gaWYgYm90aCBhcmUgZXF1YWxcbiAgICAgICAgaWYgKGNvbXApXG4gICAgICAgICAgICByZXR1cm4gY29tcDtcbiAgICAgICAgaSsrO1xuICAgIH1cbiAgICBpZiAoTWF0aC5hYnMoYlNjb3JlLmxlbmd0aCAtIGFTY29yZS5sZW5ndGgpID09PSAxKSB7XG4gICAgICAgIGlmIChpc0xhc3RTY29yZU5lZ2F0aXZlKGFTY29yZSkpXG4gICAgICAgICAgICByZXR1cm4gMTtcbiAgICAgICAgaWYgKGlzTGFzdFNjb3JlTmVnYXRpdmUoYlNjb3JlKSlcbiAgICAgICAgICAgIHJldHVybiAtMTtcbiAgICB9XG4gICAgLy8gaWYgYSBhbmQgYiBzaGFyZSB0aGUgc2FtZSBzY29yZSBlbnRyaWVzIGJ1dCBiIGhhcyBtb3JlLCBzb3J0IGIgZmlyc3RcbiAgICByZXR1cm4gYlNjb3JlLmxlbmd0aCAtIGFTY29yZS5sZW5ndGg7XG4gICAgLy8gdGhpcyBpcyB0aGUgdGVybmFyeSB2ZXJzaW9uXG4gICAgLy8gcmV0dXJuIGFTY29yZS5sZW5ndGggPCBiU2NvcmUubGVuZ3RoXG4gICAgLy8gICA/IDFcbiAgICAvLyAgIDogYVNjb3JlLmxlbmd0aCA+IGJTY29yZS5sZW5ndGhcbiAgICAvLyAgID8gLTFcbiAgICAvLyAgIDogMFxufVxuLyoqXG4gKiBUaGlzIGFsbG93cyBkZXRlY3Rpbmcgc3BsYXRzIGF0IHRoZSBlbmQgb2YgYSBwYXRoOiAvaG9tZS86aWQoLiopKlxuICpcbiAqIEBwYXJhbSBzY29yZSAtIHNjb3JlIHRvIGNoZWNrXG4gKiBAcmV0dXJucyB0cnVlIGlmIHRoZSBsYXN0IGVudHJ5IGlzIG5lZ2F0aXZlXG4gKi9cbmZ1bmN0aW9uIGlzTGFzdFNjb3JlTmVnYXRpdmUoc2NvcmUpIHtcbiAgICBjb25zdCBsYXN0ID0gc2NvcmVbc2NvcmUubGVuZ3RoIC0gMV07XG4gICAgcmV0dXJuIHNjb3JlLmxlbmd0aCA+IDAgJiYgbGFzdFtsYXN0Lmxlbmd0aCAtIDFdIDwgMDtcbn1cblxuY29uc3QgUk9PVF9UT0tFTiA9IHtcbiAgICB0eXBlOiAwIC8qIFRva2VuVHlwZS5TdGF0aWMgKi8sXG4gICAgdmFsdWU6ICcnLFxufTtcbmNvbnN0IFZBTElEX1BBUkFNX1JFID0gL1thLXpBLVowLTlfXS87XG4vLyBBZnRlciBzb21lIHByb2ZpbGluZywgdGhlIGNhY2hlIHNlZW1zIHRvIGJlIHVubmVjZXNzYXJ5IGJlY2F1c2UgdG9rZW5pemVQYXRoXG4vLyAodGhlIHNsb3dlc3QgcGFydCBvZiBhZGRpbmcgYSByb3V0ZSkgaXMgdmVyeSBmYXN0XG4vLyBjb25zdCB0b2tlbkNhY2hlID0gbmV3IE1hcDxzdHJpbmcsIFRva2VuW11bXT4oKVxuZnVuY3Rpb24gdG9rZW5pemVQYXRoKHBhdGgpIHtcbiAgICBpZiAoIXBhdGgpXG4gICAgICAgIHJldHVybiBbW11dO1xuICAgIGlmIChwYXRoID09PSAnLycpXG4gICAgICAgIHJldHVybiBbW1JPT1RfVE9LRU5dXTtcbiAgICBpZiAoIXBhdGguc3RhcnRzV2l0aCgnLycpKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcigocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJylcbiAgICAgICAgICAgID8gYFJvdXRlIHBhdGhzIHNob3VsZCBzdGFydCB3aXRoIGEgXCIvXCI6IFwiJHtwYXRofVwiIHNob3VsZCBiZSBcIi8ke3BhdGh9XCIuYFxuICAgICAgICAgICAgOiBgSW52YWxpZCBwYXRoIFwiJHtwYXRofVwiYCk7XG4gICAgfVxuICAgIC8vIGlmICh0b2tlbkNhY2hlLmhhcyhwYXRoKSkgcmV0dXJuIHRva2VuQ2FjaGUuZ2V0KHBhdGgpIVxuICAgIGZ1bmN0aW9uIGNyYXNoKG1lc3NhZ2UpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBFUlIgKCR7c3RhdGV9KS9cIiR7YnVmZmVyfVwiOiAke21lc3NhZ2V9YCk7XG4gICAgfVxuICAgIGxldCBzdGF0ZSA9IDAgLyogVG9rZW5pemVyU3RhdGUuU3RhdGljICovO1xuICAgIGxldCBwcmV2aW91c1N0YXRlID0gc3RhdGU7XG4gICAgY29uc3QgdG9rZW5zID0gW107XG4gICAgLy8gdGhlIHNlZ21lbnQgd2lsbCBhbHdheXMgYmUgdmFsaWQgYmVjYXVzZSB3ZSBnZXQgaW50byB0aGUgaW5pdGlhbCBzdGF0ZVxuICAgIC8vIHdpdGggdGhlIGxlYWRpbmcgL1xuICAgIGxldCBzZWdtZW50O1xuICAgIGZ1bmN0aW9uIGZpbmFsaXplU2VnbWVudCgpIHtcbiAgICAgICAgaWYgKHNlZ21lbnQpXG4gICAgICAgICAgICB0b2tlbnMucHVzaChzZWdtZW50KTtcbiAgICAgICAgc2VnbWVudCA9IFtdO1xuICAgIH1cbiAgICAvLyBpbmRleCBvbiB0aGUgcGF0aFxuICAgIGxldCBpID0gMDtcbiAgICAvLyBjaGFyIGF0IGluZGV4XG4gICAgbGV0IGNoYXI7XG4gICAgLy8gYnVmZmVyIG9mIHRoZSB2YWx1ZSByZWFkXG4gICAgbGV0IGJ1ZmZlciA9ICcnO1xuICAgIC8vIGN1c3RvbSByZWdleHAgZm9yIGEgcGFyYW1cbiAgICBsZXQgY3VzdG9tUmUgPSAnJztcbiAgICBmdW5jdGlvbiBjb25zdW1lQnVmZmVyKCkge1xuICAgICAgICBpZiAoIWJ1ZmZlcilcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgaWYgKHN0YXRlID09PSAwIC8qIFRva2VuaXplclN0YXRlLlN0YXRpYyAqLykge1xuICAgICAgICAgICAgc2VnbWVudC5wdXNoKHtcbiAgICAgICAgICAgICAgICB0eXBlOiAwIC8qIFRva2VuVHlwZS5TdGF0aWMgKi8sXG4gICAgICAgICAgICAgICAgdmFsdWU6IGJ1ZmZlcixcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHN0YXRlID09PSAxIC8qIFRva2VuaXplclN0YXRlLlBhcmFtICovIHx8XG4gICAgICAgICAgICBzdGF0ZSA9PT0gMiAvKiBUb2tlbml6ZXJTdGF0ZS5QYXJhbVJlZ0V4cCAqLyB8fFxuICAgICAgICAgICAgc3RhdGUgPT09IDMgLyogVG9rZW5pemVyU3RhdGUuUGFyYW1SZWdFeHBFbmQgKi8pIHtcbiAgICAgICAgICAgIGlmIChzZWdtZW50Lmxlbmd0aCA+IDEgJiYgKGNoYXIgPT09ICcqJyB8fCBjaGFyID09PSAnKycpKVxuICAgICAgICAgICAgICAgIGNyYXNoKGBBIHJlcGVhdGFibGUgcGFyYW0gKCR7YnVmZmVyfSkgbXVzdCBiZSBhbG9uZSBpbiBpdHMgc2VnbWVudC4gZWc6ICcvOmlkcysuYCk7XG4gICAgICAgICAgICBzZWdtZW50LnB1c2goe1xuICAgICAgICAgICAgICAgIHR5cGU6IDEgLyogVG9rZW5UeXBlLlBhcmFtICovLFxuICAgICAgICAgICAgICAgIHZhbHVlOiBidWZmZXIsXG4gICAgICAgICAgICAgICAgcmVnZXhwOiBjdXN0b21SZSxcbiAgICAgICAgICAgICAgICByZXBlYXRhYmxlOiBjaGFyID09PSAnKicgfHwgY2hhciA9PT0gJysnLFxuICAgICAgICAgICAgICAgIG9wdGlvbmFsOiBjaGFyID09PSAnKicgfHwgY2hhciA9PT0gJz8nLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBjcmFzaCgnSW52YWxpZCBzdGF0ZSB0byBjb25zdW1lIGJ1ZmZlcicpO1xuICAgICAgICB9XG4gICAgICAgIGJ1ZmZlciA9ICcnO1xuICAgIH1cbiAgICBmdW5jdGlvbiBhZGRDaGFyVG9CdWZmZXIoKSB7XG4gICAgICAgIGJ1ZmZlciArPSBjaGFyO1xuICAgIH1cbiAgICB3aGlsZSAoaSA8IHBhdGgubGVuZ3RoKSB7XG4gICAgICAgIGNoYXIgPSBwYXRoW2krK107XG4gICAgICAgIGlmIChjaGFyID09PSAnXFxcXCcgJiYgc3RhdGUgIT09IDIgLyogVG9rZW5pemVyU3RhdGUuUGFyYW1SZWdFeHAgKi8pIHtcbiAgICAgICAgICAgIHByZXZpb3VzU3RhdGUgPSBzdGF0ZTtcbiAgICAgICAgICAgIHN0YXRlID0gNCAvKiBUb2tlbml6ZXJTdGF0ZS5Fc2NhcGVOZXh0ICovO1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgc3dpdGNoIChzdGF0ZSkge1xuICAgICAgICAgICAgY2FzZSAwIC8qIFRva2VuaXplclN0YXRlLlN0YXRpYyAqLzpcbiAgICAgICAgICAgICAgICBpZiAoY2hhciA9PT0gJy8nKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChidWZmZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN1bWVCdWZmZXIoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBmaW5hbGl6ZVNlZ21lbnQoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoY2hhciA9PT0gJzonKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN1bWVCdWZmZXIoKTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdGUgPSAxIC8qIFRva2VuaXplclN0YXRlLlBhcmFtICovO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgYWRkQ2hhclRvQnVmZmVyKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSA0IC8qIFRva2VuaXplclN0YXRlLkVzY2FwZU5leHQgKi86XG4gICAgICAgICAgICAgICAgYWRkQ2hhclRvQnVmZmVyKCk7XG4gICAgICAgICAgICAgICAgc3RhdGUgPSBwcmV2aW91c1N0YXRlO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAxIC8qIFRva2VuaXplclN0YXRlLlBhcmFtICovOlxuICAgICAgICAgICAgICAgIGlmIChjaGFyID09PSAnKCcpIHtcbiAgICAgICAgICAgICAgICAgICAgc3RhdGUgPSAyIC8qIFRva2VuaXplclN0YXRlLlBhcmFtUmVnRXhwICovO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChWQUxJRF9QQVJBTV9SRS50ZXN0KGNoYXIpKSB7XG4gICAgICAgICAgICAgICAgICAgIGFkZENoYXJUb0J1ZmZlcigpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3VtZUJ1ZmZlcigpO1xuICAgICAgICAgICAgICAgICAgICBzdGF0ZSA9IDAgLyogVG9rZW5pemVyU3RhdGUuU3RhdGljICovO1xuICAgICAgICAgICAgICAgICAgICAvLyBnbyBiYWNrIG9uZSBjaGFyYWN0ZXIgaWYgd2Ugd2VyZSBub3QgbW9kaWZ5aW5nXG4gICAgICAgICAgICAgICAgICAgIGlmIChjaGFyICE9PSAnKicgJiYgY2hhciAhPT0gJz8nICYmIGNoYXIgIT09ICcrJylcbiAgICAgICAgICAgICAgICAgICAgICAgIGktLTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIDIgLyogVG9rZW5pemVyU3RhdGUuUGFyYW1SZWdFeHAgKi86XG4gICAgICAgICAgICAgICAgLy8gVE9ETzogaXMgaXQgd29ydGggaGFuZGxpbmcgbmVzdGVkIHJlZ2V4cD8gbGlrZSA6cCg/OnByZWZpeF8oW14vXSspX3N1ZmZpeClcbiAgICAgICAgICAgICAgICAvLyBpdCBhbHJlYWR5IHdvcmtzIGJ5IGVzY2FwaW5nIHRoZSBjbG9zaW5nIClcbiAgICAgICAgICAgICAgICAvLyBodHRwczovL3BhdGhzLmVzbS5kZXYvP3A9QUFNZUpiaUF3UUVjREtiQW9BQWtQNjBQRzJSNlFBdmdOYUE2QUZBQ00yQUJ1UUJCI1xuICAgICAgICAgICAgICAgIC8vIGlzIHRoaXMgcmVhbGx5IHNvbWV0aGluZyBwZW9wbGUgbmVlZCBzaW5jZSB5b3UgY2FuIGFsc28gd3JpdGVcbiAgICAgICAgICAgICAgICAvLyAvcHJlZml4XzpwKClfc3VmZml4XG4gICAgICAgICAgICAgICAgaWYgKGNoYXIgPT09ICcpJykge1xuICAgICAgICAgICAgICAgICAgICAvLyBoYW5kbGUgdGhlIGVzY2FwZWQgKVxuICAgICAgICAgICAgICAgICAgICBpZiAoY3VzdG9tUmVbY3VzdG9tUmUubGVuZ3RoIC0gMV0gPT0gJ1xcXFwnKVxuICAgICAgICAgICAgICAgICAgICAgICAgY3VzdG9tUmUgPSBjdXN0b21SZS5zbGljZSgwLCAtMSkgKyBjaGFyO1xuICAgICAgICAgICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZSA9IDMgLyogVG9rZW5pemVyU3RhdGUuUGFyYW1SZWdFeHBFbmQgKi87XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBjdXN0b21SZSArPSBjaGFyO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgMyAvKiBUb2tlbml6ZXJTdGF0ZS5QYXJhbVJlZ0V4cEVuZCAqLzpcbiAgICAgICAgICAgICAgICAvLyBzYW1lIGFzIGZpbmFsaXppbmcgYSBwYXJhbVxuICAgICAgICAgICAgICAgIGNvbnN1bWVCdWZmZXIoKTtcbiAgICAgICAgICAgICAgICBzdGF0ZSA9IDAgLyogVG9rZW5pemVyU3RhdGUuU3RhdGljICovO1xuICAgICAgICAgICAgICAgIC8vIGdvIGJhY2sgb25lIGNoYXJhY3RlciBpZiB3ZSB3ZXJlIG5vdCBtb2RpZnlpbmdcbiAgICAgICAgICAgICAgICBpZiAoY2hhciAhPT0gJyonICYmIGNoYXIgIT09ICc/JyAmJiBjaGFyICE9PSAnKycpXG4gICAgICAgICAgICAgICAgICAgIGktLTtcbiAgICAgICAgICAgICAgICBjdXN0b21SZSA9ICcnO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICBjcmFzaCgnVW5rbm93biBzdGF0ZScpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgfVxuICAgIGlmIChzdGF0ZSA9PT0gMiAvKiBUb2tlbml6ZXJTdGF0ZS5QYXJhbVJlZ0V4cCAqLylcbiAgICAgICAgY3Jhc2goYFVuZmluaXNoZWQgY3VzdG9tIFJlZ0V4cCBmb3IgcGFyYW0gXCIke2J1ZmZlcn1cImApO1xuICAgIGNvbnN1bWVCdWZmZXIoKTtcbiAgICBmaW5hbGl6ZVNlZ21lbnQoKTtcbiAgICAvLyB0b2tlbkNhY2hlLnNldChwYXRoLCB0b2tlbnMpXG4gICAgcmV0dXJuIHRva2Vucztcbn1cblxuZnVuY3Rpb24gY3JlYXRlUm91dGVSZWNvcmRNYXRjaGVyKHJlY29yZCwgcGFyZW50LCBvcHRpb25zKSB7XG4gICAgY29uc3QgcGFyc2VyID0gdG9rZW5zVG9QYXJzZXIodG9rZW5pemVQYXRoKHJlY29yZC5wYXRoKSwgb3B0aW9ucyk7XG4gICAgLy8gd2FybiBhZ2FpbnN0IHBhcmFtcyB3aXRoIHRoZSBzYW1lIG5hbWVcbiAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpKSB7XG4gICAgICAgIGNvbnN0IGV4aXN0aW5nS2V5cyA9IG5ldyBTZXQoKTtcbiAgICAgICAgZm9yIChjb25zdCBrZXkgb2YgcGFyc2VyLmtleXMpIHtcbiAgICAgICAgICAgIGlmIChleGlzdGluZ0tleXMuaGFzKGtleS5uYW1lKSlcbiAgICAgICAgICAgICAgICB3YXJuKGBGb3VuZCBkdXBsaWNhdGVkIHBhcmFtcyB3aXRoIG5hbWUgXCIke2tleS5uYW1lfVwiIGZvciBwYXRoIFwiJHtyZWNvcmQucGF0aH1cIi4gT25seSB0aGUgbGFzdCBvbmUgd2lsbCBiZSBhdmFpbGFibGUgb24gXCIkcm91dGUucGFyYW1zXCIuYCk7XG4gICAgICAgICAgICBleGlzdGluZ0tleXMuYWRkKGtleS5uYW1lKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBjb25zdCBtYXRjaGVyID0gYXNzaWduKHBhcnNlciwge1xuICAgICAgICByZWNvcmQsXG4gICAgICAgIHBhcmVudCxcbiAgICAgICAgLy8gdGhlc2UgbmVlZHMgdG8gYmUgcG9wdWxhdGVkIGJ5IHRoZSBwYXJlbnRcbiAgICAgICAgY2hpbGRyZW46IFtdLFxuICAgICAgICBhbGlhczogW10sXG4gICAgfSk7XG4gICAgaWYgKHBhcmVudCkge1xuICAgICAgICAvLyBib3RoIGFyZSBhbGlhc2VzIG9yIGJvdGggYXJlIG5vdCBhbGlhc2VzXG4gICAgICAgIC8vIHdlIGRvbid0IHdhbnQgdG8gbWl4IHRoZW0gYmVjYXVzZSB0aGUgb3JkZXIgaXMgdXNlZCB3aGVuXG4gICAgICAgIC8vIHBhc3Npbmcgb3JpZ2luYWxSZWNvcmQgaW4gTWF0Y2hlci5hZGRSb3V0ZVxuICAgICAgICBpZiAoIW1hdGNoZXIucmVjb3JkLmFsaWFzT2YgPT09ICFwYXJlbnQucmVjb3JkLmFsaWFzT2YpXG4gICAgICAgICAgICBwYXJlbnQuY2hpbGRyZW4ucHVzaChtYXRjaGVyKTtcbiAgICB9XG4gICAgcmV0dXJuIG1hdGNoZXI7XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhIFJvdXRlciBNYXRjaGVyLlxuICpcbiAqIEBpbnRlcm5hbFxuICogQHBhcmFtIHJvdXRlcyAtIGFycmF5IG9mIGluaXRpYWwgcm91dGVzXG4gKiBAcGFyYW0gZ2xvYmFsT3B0aW9ucyAtIGdsb2JhbCByb3V0ZSBvcHRpb25zXG4gKi9cbmZ1bmN0aW9uIGNyZWF0ZVJvdXRlck1hdGNoZXIocm91dGVzLCBnbG9iYWxPcHRpb25zKSB7XG4gICAgLy8gbm9ybWFsaXplZCBvcmRlcmVkIGFycmF5IG9mIG1hdGNoZXJzXG4gICAgY29uc3QgbWF0Y2hlcnMgPSBbXTtcbiAgICBjb25zdCBtYXRjaGVyTWFwID0gbmV3IE1hcCgpO1xuICAgIGdsb2JhbE9wdGlvbnMgPSBtZXJnZU9wdGlvbnMoeyBzdHJpY3Q6IGZhbHNlLCBlbmQ6IHRydWUsIHNlbnNpdGl2ZTogZmFsc2UgfSwgZ2xvYmFsT3B0aW9ucyk7XG4gICAgZnVuY3Rpb24gZ2V0UmVjb3JkTWF0Y2hlcihuYW1lKSB7XG4gICAgICAgIHJldHVybiBtYXRjaGVyTWFwLmdldChuYW1lKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gYWRkUm91dGUocmVjb3JkLCBwYXJlbnQsIG9yaWdpbmFsUmVjb3JkKSB7XG4gICAgICAgIC8vIHVzZWQgbGF0ZXIgb24gdG8gcmVtb3ZlIGJ5IG5hbWVcbiAgICAgICAgY29uc3QgaXNSb290QWRkID0gIW9yaWdpbmFsUmVjb3JkO1xuICAgICAgICBjb25zdCBtYWluTm9ybWFsaXplZFJlY29yZCA9IG5vcm1hbGl6ZVJvdXRlUmVjb3JkKHJlY29yZCk7XG4gICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpIHtcbiAgICAgICAgICAgIGNoZWNrQ2hpbGRNaXNzaW5nTmFtZVdpdGhFbXB0eVBhdGgobWFpbk5vcm1hbGl6ZWRSZWNvcmQsIHBhcmVudCk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gd2UgbWlnaHQgYmUgdGhlIGNoaWxkIG9mIGFuIGFsaWFzXG4gICAgICAgIG1haW5Ob3JtYWxpemVkUmVjb3JkLmFsaWFzT2YgPSBvcmlnaW5hbFJlY29yZCAmJiBvcmlnaW5hbFJlY29yZC5yZWNvcmQ7XG4gICAgICAgIGNvbnN0IG9wdGlvbnMgPSBtZXJnZU9wdGlvbnMoZ2xvYmFsT3B0aW9ucywgcmVjb3JkKTtcbiAgICAgICAgLy8gZ2VuZXJhdGUgYW4gYXJyYXkgb2YgcmVjb3JkcyB0byBjb3JyZWN0bHkgaGFuZGxlIGFsaWFzZXNcbiAgICAgICAgY29uc3Qgbm9ybWFsaXplZFJlY29yZHMgPSBbXG4gICAgICAgICAgICBtYWluTm9ybWFsaXplZFJlY29yZCxcbiAgICAgICAgXTtcbiAgICAgICAgaWYgKCdhbGlhcycgaW4gcmVjb3JkKSB7XG4gICAgICAgICAgICBjb25zdCBhbGlhc2VzID0gdHlwZW9mIHJlY29yZC5hbGlhcyA9PT0gJ3N0cmluZycgPyBbcmVjb3JkLmFsaWFzXSA6IHJlY29yZC5hbGlhcztcbiAgICAgICAgICAgIGZvciAoY29uc3QgYWxpYXMgb2YgYWxpYXNlcykge1xuICAgICAgICAgICAgICAgIG5vcm1hbGl6ZWRSZWNvcmRzLnB1c2goYXNzaWduKHt9LCBtYWluTm9ybWFsaXplZFJlY29yZCwge1xuICAgICAgICAgICAgICAgICAgICAvLyB0aGlzIGFsbG93cyB1cyB0byBob2xkIGEgY29weSBvZiB0aGUgYGNvbXBvbmVudHNgIG9wdGlvblxuICAgICAgICAgICAgICAgICAgICAvLyBzbyB0aGF0IGFzeW5jIGNvbXBvbmVudHMgY2FjaGUgaXMgaG9sZCBvbiB0aGUgb3JpZ2luYWwgcmVjb3JkXG4gICAgICAgICAgICAgICAgICAgIGNvbXBvbmVudHM6IG9yaWdpbmFsUmVjb3JkXG4gICAgICAgICAgICAgICAgICAgICAgICA/IG9yaWdpbmFsUmVjb3JkLnJlY29yZC5jb21wb25lbnRzXG4gICAgICAgICAgICAgICAgICAgICAgICA6IG1haW5Ob3JtYWxpemVkUmVjb3JkLmNvbXBvbmVudHMsXG4gICAgICAgICAgICAgICAgICAgIHBhdGg6IGFsaWFzLFxuICAgICAgICAgICAgICAgICAgICAvLyB3ZSBtaWdodCBiZSB0aGUgY2hpbGQgb2YgYW4gYWxpYXNcbiAgICAgICAgICAgICAgICAgICAgYWxpYXNPZjogb3JpZ2luYWxSZWNvcmRcbiAgICAgICAgICAgICAgICAgICAgICAgID8gb3JpZ2luYWxSZWNvcmQucmVjb3JkXG4gICAgICAgICAgICAgICAgICAgICAgICA6IG1haW5Ob3JtYWxpemVkUmVjb3JkLFxuICAgICAgICAgICAgICAgICAgICAvLyB0aGUgYWxpYXNlcyBhcmUgYWx3YXlzIG9mIHRoZSBzYW1lIGtpbmQgYXMgdGhlIG9yaWdpbmFsIHNpbmNlIHRoZXlcbiAgICAgICAgICAgICAgICAgICAgLy8gYXJlIGRlZmluZWQgb24gdGhlIHNhbWUgcmVjb3JkXG4gICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGxldCBtYXRjaGVyO1xuICAgICAgICBsZXQgb3JpZ2luYWxNYXRjaGVyO1xuICAgICAgICBmb3IgKGNvbnN0IG5vcm1hbGl6ZWRSZWNvcmQgb2Ygbm9ybWFsaXplZFJlY29yZHMpIHtcbiAgICAgICAgICAgIGNvbnN0IHsgcGF0aCB9ID0gbm9ybWFsaXplZFJlY29yZDtcbiAgICAgICAgICAgIC8vIEJ1aWxkIHVwIHRoZSBwYXRoIGZvciBuZXN0ZWQgcm91dGVzIGlmIHRoZSBjaGlsZCBpc24ndCBhbiBhYnNvbHV0ZVxuICAgICAgICAgICAgLy8gcm91dGUuIE9ubHkgYWRkIHRoZSAvIGRlbGltaXRlciBpZiB0aGUgY2hpbGQgcGF0aCBpc24ndCBlbXB0eSBhbmQgaWYgdGhlXG4gICAgICAgICAgICAvLyBwYXJlbnQgcGF0aCBkb2Vzbid0IGhhdmUgYSB0cmFpbGluZyBzbGFzaFxuICAgICAgICAgICAgaWYgKHBhcmVudCAmJiBwYXRoWzBdICE9PSAnLycpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBwYXJlbnRQYXRoID0gcGFyZW50LnJlY29yZC5wYXRoO1xuICAgICAgICAgICAgICAgIGNvbnN0IGNvbm5lY3RpbmdTbGFzaCA9IHBhcmVudFBhdGhbcGFyZW50UGF0aC5sZW5ndGggLSAxXSA9PT0gJy8nID8gJycgOiAnLyc7XG4gICAgICAgICAgICAgICAgbm9ybWFsaXplZFJlY29yZC5wYXRoID1cbiAgICAgICAgICAgICAgICAgICAgcGFyZW50LnJlY29yZC5wYXRoICsgKHBhdGggJiYgY29ubmVjdGluZ1NsYXNoICsgcGF0aCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmIG5vcm1hbGl6ZWRSZWNvcmQucGF0aCA9PT0gJyonKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdDYXRjaCBhbGwgcm91dGVzIChcIipcIikgbXVzdCBub3cgYmUgZGVmaW5lZCB1c2luZyBhIHBhcmFtIHdpdGggYSBjdXN0b20gcmVnZXhwLlxcbicgK1xuICAgICAgICAgICAgICAgICAgICAnU2VlIG1vcmUgYXQgaHR0cHM6Ly9uZXh0LnJvdXRlci52dWVqcy5vcmcvZ3VpZGUvbWlncmF0aW9uLyNyZW1vdmVkLXN0YXItb3ItY2F0Y2gtYWxsLXJvdXRlcy4nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIGNyZWF0ZSB0aGUgb2JqZWN0IGJlZm9yZWhhbmQsIHNvIGl0IGNhbiBiZSBwYXNzZWQgdG8gY2hpbGRyZW5cbiAgICAgICAgICAgIG1hdGNoZXIgPSBjcmVhdGVSb3V0ZVJlY29yZE1hdGNoZXIobm9ybWFsaXplZFJlY29yZCwgcGFyZW50LCBvcHRpb25zKTtcbiAgICAgICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiYgcGFyZW50ICYmIHBhdGhbMF0gPT09ICcvJylcbiAgICAgICAgICAgICAgICBjaGVja01pc3NpbmdQYXJhbXNJbkFic29sdXRlUGF0aChtYXRjaGVyLCBwYXJlbnQpO1xuICAgICAgICAgICAgLy8gaWYgd2UgYXJlIGFuIGFsaWFzIHdlIG11c3QgdGVsbCB0aGUgb3JpZ2luYWwgcmVjb3JkIHRoYXQgd2UgZXhpc3QsXG4gICAgICAgICAgICAvLyBzbyB3ZSBjYW4gYmUgcmVtb3ZlZFxuICAgICAgICAgICAgaWYgKG9yaWdpbmFsUmVjb3JkKSB7XG4gICAgICAgICAgICAgICAgb3JpZ2luYWxSZWNvcmQuYWxpYXMucHVzaChtYXRjaGVyKTtcbiAgICAgICAgICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpKSB7XG4gICAgICAgICAgICAgICAgICAgIGNoZWNrU2FtZVBhcmFtcyhvcmlnaW5hbFJlY29yZCwgbWF0Y2hlcik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gb3RoZXJ3aXNlLCB0aGUgZmlyc3QgcmVjb3JkIGlzIHRoZSBvcmlnaW5hbCBhbmQgb3RoZXJzIGFyZSBhbGlhc2VzXG4gICAgICAgICAgICAgICAgb3JpZ2luYWxNYXRjaGVyID0gb3JpZ2luYWxNYXRjaGVyIHx8IG1hdGNoZXI7XG4gICAgICAgICAgICAgICAgaWYgKG9yaWdpbmFsTWF0Y2hlciAhPT0gbWF0Y2hlcilcbiAgICAgICAgICAgICAgICAgICAgb3JpZ2luYWxNYXRjaGVyLmFsaWFzLnB1c2gobWF0Y2hlcik7XG4gICAgICAgICAgICAgICAgLy8gcmVtb3ZlIHRoZSByb3V0ZSBpZiBuYW1lZCBhbmQgb25seSBmb3IgdGhlIHRvcCByZWNvcmQgKGF2b2lkIGluIG5lc3RlZCBjYWxscylcbiAgICAgICAgICAgICAgICAvLyB0aGlzIHdvcmtzIGJlY2F1c2UgdGhlIG9yaWdpbmFsIHJlY29yZCBpcyB0aGUgZmlyc3Qgb25lXG4gICAgICAgICAgICAgICAgaWYgKGlzUm9vdEFkZCAmJiByZWNvcmQubmFtZSAmJiAhaXNBbGlhc1JlY29yZChtYXRjaGVyKSlcbiAgICAgICAgICAgICAgICAgICAgcmVtb3ZlUm91dGUocmVjb3JkLm5hbWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKG1haW5Ob3JtYWxpemVkUmVjb3JkLmNoaWxkcmVuKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgY2hpbGRyZW4gPSBtYWluTm9ybWFsaXplZFJlY29yZC5jaGlsZHJlbjtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNoaWxkcmVuLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIGFkZFJvdXRlKGNoaWxkcmVuW2ldLCBtYXRjaGVyLCBvcmlnaW5hbFJlY29yZCAmJiBvcmlnaW5hbFJlY29yZC5jaGlsZHJlbltpXSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gaWYgdGhlcmUgd2FzIG5vIG9yaWdpbmFsIHJlY29yZCwgdGhlbiB0aGUgZmlyc3Qgb25lIHdhcyBub3QgYW4gYWxpYXMgYW5kIGFsbFxuICAgICAgICAgICAgLy8gb3RoZXIgYWxpYXNlcyAoaWYgYW55KSBuZWVkIHRvIHJlZmVyZW5jZSB0aGlzIHJlY29yZCB3aGVuIGFkZGluZyBjaGlsZHJlblxuICAgICAgICAgICAgb3JpZ2luYWxSZWNvcmQgPSBvcmlnaW5hbFJlY29yZCB8fCBtYXRjaGVyO1xuICAgICAgICAgICAgLy8gVE9ETzogYWRkIG5vcm1hbGl6ZWQgcmVjb3JkcyBmb3IgbW9yZSBmbGV4aWJpbGl0eVxuICAgICAgICAgICAgLy8gaWYgKHBhcmVudCAmJiBpc0FsaWFzUmVjb3JkKG9yaWdpbmFsUmVjb3JkKSkge1xuICAgICAgICAgICAgLy8gICBwYXJlbnQuY2hpbGRyZW4ucHVzaChvcmlnaW5hbFJlY29yZClcbiAgICAgICAgICAgIC8vIH1cbiAgICAgICAgICAgIC8vIEF2b2lkIGFkZGluZyBhIHJlY29yZCB0aGF0IGRvZXNuJ3QgZGlzcGxheSBhbnl0aGluZy4gVGhpcyBhbGxvd3MgcGFzc2luZyB0aHJvdWdoIHJlY29yZHMgd2l0aG91dCBhIGNvbXBvbmVudCB0b1xuICAgICAgICAgICAgLy8gbm90IGJlIHJlYWNoZWQgYW5kIHBhc3MgdGhyb3VnaCB0aGUgY2F0Y2ggYWxsIHJvdXRlXG4gICAgICAgICAgICBpZiAoKG1hdGNoZXIucmVjb3JkLmNvbXBvbmVudHMgJiZcbiAgICAgICAgICAgICAgICBPYmplY3Qua2V5cyhtYXRjaGVyLnJlY29yZC5jb21wb25lbnRzKS5sZW5ndGgpIHx8XG4gICAgICAgICAgICAgICAgbWF0Y2hlci5yZWNvcmQubmFtZSB8fFxuICAgICAgICAgICAgICAgIG1hdGNoZXIucmVjb3JkLnJlZGlyZWN0KSB7XG4gICAgICAgICAgICAgICAgaW5zZXJ0TWF0Y2hlcihtYXRjaGVyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb3JpZ2luYWxNYXRjaGVyXG4gICAgICAgICAgICA/ICgpID0+IHtcbiAgICAgICAgICAgICAgICAvLyBzaW5jZSBvdGhlciBtYXRjaGVycyBhcmUgYWxpYXNlcywgdGhleSBzaG91bGQgYmUgcmVtb3ZlZCBieSB0aGUgb3JpZ2luYWwgbWF0Y2hlclxuICAgICAgICAgICAgICAgIHJlbW92ZVJvdXRlKG9yaWdpbmFsTWF0Y2hlcik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICA6IG5vb3A7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHJlbW92ZVJvdXRlKG1hdGNoZXJSZWYpIHtcbiAgICAgICAgaWYgKGlzUm91dGVOYW1lKG1hdGNoZXJSZWYpKSB7XG4gICAgICAgICAgICBjb25zdCBtYXRjaGVyID0gbWF0Y2hlck1hcC5nZXQobWF0Y2hlclJlZik7XG4gICAgICAgICAgICBpZiAobWF0Y2hlcikge1xuICAgICAgICAgICAgICAgIG1hdGNoZXJNYXAuZGVsZXRlKG1hdGNoZXJSZWYpO1xuICAgICAgICAgICAgICAgIG1hdGNoZXJzLnNwbGljZShtYXRjaGVycy5pbmRleE9mKG1hdGNoZXIpLCAxKTtcbiAgICAgICAgICAgICAgICBtYXRjaGVyLmNoaWxkcmVuLmZvckVhY2gocmVtb3ZlUm91dGUpO1xuICAgICAgICAgICAgICAgIG1hdGNoZXIuYWxpYXMuZm9yRWFjaChyZW1vdmVSb3V0ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBjb25zdCBpbmRleCA9IG1hdGNoZXJzLmluZGV4T2YobWF0Y2hlclJlZik7XG4gICAgICAgICAgICBpZiAoaW5kZXggPiAtMSkge1xuICAgICAgICAgICAgICAgIG1hdGNoZXJzLnNwbGljZShpbmRleCwgMSk7XG4gICAgICAgICAgICAgICAgaWYgKG1hdGNoZXJSZWYucmVjb3JkLm5hbWUpXG4gICAgICAgICAgICAgICAgICAgIG1hdGNoZXJNYXAuZGVsZXRlKG1hdGNoZXJSZWYucmVjb3JkLm5hbWUpO1xuICAgICAgICAgICAgICAgIG1hdGNoZXJSZWYuY2hpbGRyZW4uZm9yRWFjaChyZW1vdmVSb3V0ZSk7XG4gICAgICAgICAgICAgICAgbWF0Y2hlclJlZi5hbGlhcy5mb3JFYWNoKHJlbW92ZVJvdXRlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBmdW5jdGlvbiBnZXRSb3V0ZXMoKSB7XG4gICAgICAgIHJldHVybiBtYXRjaGVycztcbiAgICB9XG4gICAgZnVuY3Rpb24gaW5zZXJ0TWF0Y2hlcihtYXRjaGVyKSB7XG4gICAgICAgIGxldCBpID0gMDtcbiAgICAgICAgd2hpbGUgKGkgPCBtYXRjaGVycy5sZW5ndGggJiZcbiAgICAgICAgICAgIGNvbXBhcmVQYXRoUGFyc2VyU2NvcmUobWF0Y2hlciwgbWF0Y2hlcnNbaV0pID49IDAgJiZcbiAgICAgICAgICAgIC8vIEFkZGluZyBjaGlsZHJlbiB3aXRoIGVtcHR5IHBhdGggc2hvdWxkIHN0aWxsIGFwcGVhciBiZWZvcmUgdGhlIHBhcmVudFxuICAgICAgICAgICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL3Z1ZWpzL3JvdXRlci9pc3N1ZXMvMTEyNFxuICAgICAgICAgICAgKG1hdGNoZXIucmVjb3JkLnBhdGggIT09IG1hdGNoZXJzW2ldLnJlY29yZC5wYXRoIHx8XG4gICAgICAgICAgICAgICAgIWlzUmVjb3JkQ2hpbGRPZihtYXRjaGVyLCBtYXRjaGVyc1tpXSkpKVxuICAgICAgICAgICAgaSsrO1xuICAgICAgICBtYXRjaGVycy5zcGxpY2UoaSwgMCwgbWF0Y2hlcik7XG4gICAgICAgIC8vIG9ubHkgYWRkIHRoZSBvcmlnaW5hbCByZWNvcmQgdG8gdGhlIG5hbWUgbWFwXG4gICAgICAgIGlmIChtYXRjaGVyLnJlY29yZC5uYW1lICYmICFpc0FsaWFzUmVjb3JkKG1hdGNoZXIpKVxuICAgICAgICAgICAgbWF0Y2hlck1hcC5zZXQobWF0Y2hlci5yZWNvcmQubmFtZSwgbWF0Y2hlcik7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHJlc29sdmUobG9jYXRpb24sIGN1cnJlbnRMb2NhdGlvbikge1xuICAgICAgICBsZXQgbWF0Y2hlcjtcbiAgICAgICAgbGV0IHBhcmFtcyA9IHt9O1xuICAgICAgICBsZXQgcGF0aDtcbiAgICAgICAgbGV0IG5hbWU7XG4gICAgICAgIGlmICgnbmFtZScgaW4gbG9jYXRpb24gJiYgbG9jYXRpb24ubmFtZSkge1xuICAgICAgICAgICAgbWF0Y2hlciA9IG1hdGNoZXJNYXAuZ2V0KGxvY2F0aW9uLm5hbWUpO1xuICAgICAgICAgICAgaWYgKCFtYXRjaGVyKVxuICAgICAgICAgICAgICAgIHRocm93IGNyZWF0ZVJvdXRlckVycm9yKDEgLyogRXJyb3JUeXBlcy5NQVRDSEVSX05PVF9GT1VORCAqLywge1xuICAgICAgICAgICAgICAgICAgICBsb2NhdGlvbixcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIC8vIHdhcm4gaWYgdGhlIHVzZXIgaXMgcGFzc2luZyBpbnZhbGlkIHBhcmFtcyBzbyB0aGV5IGNhbiBkZWJ1ZyBpdCBiZXR0ZXIgd2hlbiB0aGV5IGdldCByZW1vdmVkXG4gICAgICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgaW52YWxpZFBhcmFtcyA9IE9iamVjdC5rZXlzKGxvY2F0aW9uLnBhcmFtcyB8fCB7fSkuZmlsdGVyKHBhcmFtTmFtZSA9PiAhbWF0Y2hlci5rZXlzLmZpbmQoayA9PiBrLm5hbWUgPT09IHBhcmFtTmFtZSkpO1xuICAgICAgICAgICAgICAgIGlmIChpbnZhbGlkUGFyYW1zLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICB3YXJuKGBEaXNjYXJkZWQgaW52YWxpZCBwYXJhbShzKSBcIiR7aW52YWxpZFBhcmFtcy5qb2luKCdcIiwgXCInKX1cIiB3aGVuIG5hdmlnYXRpbmcuIFNlZSBodHRwczovL2dpdGh1Yi5jb20vdnVlanMvcm91dGVyL2Jsb2IvbWFpbi9wYWNrYWdlcy9yb3V0ZXIvQ0hBTkdFTE9HLm1kIzQxNC0yMDIyLTA4LTIyIGZvciBtb3JlIGRldGFpbHMuYCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbmFtZSA9IG1hdGNoZXIucmVjb3JkLm5hbWU7XG4gICAgICAgICAgICBwYXJhbXMgPSBhc3NpZ24oXG4gICAgICAgICAgICAvLyBwYXJhbXNGcm9tTG9jYXRpb24gaXMgYSBuZXcgb2JqZWN0XG4gICAgICAgICAgICBwYXJhbXNGcm9tTG9jYXRpb24oY3VycmVudExvY2F0aW9uLnBhcmFtcywgXG4gICAgICAgICAgICAvLyBvbmx5IGtlZXAgcGFyYW1zIHRoYXQgZXhpc3QgaW4gdGhlIHJlc29sdmVkIGxvY2F0aW9uXG4gICAgICAgICAgICAvLyBvbmx5IGtlZXAgb3B0aW9uYWwgcGFyYW1zIGNvbWluZyBmcm9tIGEgcGFyZW50IHJlY29yZFxuICAgICAgICAgICAgbWF0Y2hlci5rZXlzXG4gICAgICAgICAgICAgICAgLmZpbHRlcihrID0+ICFrLm9wdGlvbmFsKVxuICAgICAgICAgICAgICAgIC5jb25jYXQobWF0Y2hlci5wYXJlbnQgPyBtYXRjaGVyLnBhcmVudC5rZXlzLmZpbHRlcihrID0+IGsub3B0aW9uYWwpIDogW10pXG4gICAgICAgICAgICAgICAgLm1hcChrID0+IGsubmFtZSkpLCBcbiAgICAgICAgICAgIC8vIGRpc2NhcmQgYW55IGV4aXN0aW5nIHBhcmFtcyBpbiB0aGUgY3VycmVudCBsb2NhdGlvbiB0aGF0IGRvIG5vdCBleGlzdCBoZXJlXG4gICAgICAgICAgICAvLyAjMTQ5NyB0aGlzIGVuc3VyZXMgYmV0dGVyIGFjdGl2ZS9leGFjdCBtYXRjaGluZ1xuICAgICAgICAgICAgbG9jYXRpb24ucGFyYW1zICYmXG4gICAgICAgICAgICAgICAgcGFyYW1zRnJvbUxvY2F0aW9uKGxvY2F0aW9uLnBhcmFtcywgbWF0Y2hlci5rZXlzLm1hcChrID0+IGsubmFtZSkpKTtcbiAgICAgICAgICAgIC8vIHRocm93cyBpZiBjYW5ub3QgYmUgc3RyaW5naWZpZWRcbiAgICAgICAgICAgIHBhdGggPSBtYXRjaGVyLnN0cmluZ2lmeShwYXJhbXMpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGxvY2F0aW9uLnBhdGggIT0gbnVsbCkge1xuICAgICAgICAgICAgLy8gbm8gbmVlZCB0byByZXNvbHZlIHRoZSBwYXRoIHdpdGggdGhlIG1hdGNoZXIgYXMgaXQgd2FzIHByb3ZpZGVkXG4gICAgICAgICAgICAvLyB0aGlzIGFsc28gYWxsb3dzIHRoZSB1c2VyIHRvIGNvbnRyb2wgdGhlIGVuY29kaW5nXG4gICAgICAgICAgICBwYXRoID0gbG9jYXRpb24ucGF0aDtcbiAgICAgICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiYgIXBhdGguc3RhcnRzV2l0aCgnLycpKSB7XG4gICAgICAgICAgICAgICAgd2FybihgVGhlIE1hdGNoZXIgY2Fubm90IHJlc29sdmUgcmVsYXRpdmUgcGF0aHMgYnV0IHJlY2VpdmVkIFwiJHtwYXRofVwiLiBVbmxlc3MgeW91IGRpcmVjdGx5IGNhbGxlZCBcXGBtYXRjaGVyLnJlc29sdmUoXCIke3BhdGh9XCIpXFxgLCB0aGlzIGlzIHByb2JhYmx5IGEgYnVnIGluIHZ1ZS1yb3V0ZXIuIFBsZWFzZSBvcGVuIGFuIGlzc3VlIGF0IGh0dHBzOi8vZ2l0aHViLmNvbS92dWVqcy9yb3V0ZXIvaXNzdWVzL25ldy9jaG9vc2UuYCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBtYXRjaGVyID0gbWF0Y2hlcnMuZmluZChtID0+IG0ucmUudGVzdChwYXRoKSk7XG4gICAgICAgICAgICAvLyBtYXRjaGVyIHNob3VsZCBoYXZlIGEgdmFsdWUgYWZ0ZXIgdGhlIGxvb3BcbiAgICAgICAgICAgIGlmIChtYXRjaGVyKSB7XG4gICAgICAgICAgICAgICAgLy8gd2Uga25vdyB0aGUgbWF0Y2hlciB3b3JrcyBiZWNhdXNlIHdlIHRlc3RlZCB0aGUgcmVnZXhwXG4gICAgICAgICAgICAgICAgcGFyYW1zID0gbWF0Y2hlci5wYXJzZShwYXRoKTtcbiAgICAgICAgICAgICAgICBuYW1lID0gbWF0Y2hlci5yZWNvcmQubmFtZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIGxvY2F0aW9uIGlzIGEgcmVsYXRpdmUgcGF0aFxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgLy8gbWF0Y2ggYnkgbmFtZSBvciBwYXRoIG9mIGN1cnJlbnQgcm91dGVcbiAgICAgICAgICAgIG1hdGNoZXIgPSBjdXJyZW50TG9jYXRpb24ubmFtZVxuICAgICAgICAgICAgICAgID8gbWF0Y2hlck1hcC5nZXQoY3VycmVudExvY2F0aW9uLm5hbWUpXG4gICAgICAgICAgICAgICAgOiBtYXRjaGVycy5maW5kKG0gPT4gbS5yZS50ZXN0KGN1cnJlbnRMb2NhdGlvbi5wYXRoKSk7XG4gICAgICAgICAgICBpZiAoIW1hdGNoZXIpXG4gICAgICAgICAgICAgICAgdGhyb3cgY3JlYXRlUm91dGVyRXJyb3IoMSAvKiBFcnJvclR5cGVzLk1BVENIRVJfTk9UX0ZPVU5EICovLCB7XG4gICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uLFxuICAgICAgICAgICAgICAgICAgICBjdXJyZW50TG9jYXRpb24sXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBuYW1lID0gbWF0Y2hlci5yZWNvcmQubmFtZTtcbiAgICAgICAgICAgIC8vIHNpbmNlIHdlIGFyZSBuYXZpZ2F0aW5nIHRvIHRoZSBzYW1lIGxvY2F0aW9uLCB3ZSBkb24ndCBuZWVkIHRvIHBpY2sgdGhlXG4gICAgICAgICAgICAvLyBwYXJhbXMgbGlrZSB3aGVuIGBuYW1lYCBpcyBwcm92aWRlZFxuICAgICAgICAgICAgcGFyYW1zID0gYXNzaWduKHt9LCBjdXJyZW50TG9jYXRpb24ucGFyYW1zLCBsb2NhdGlvbi5wYXJhbXMpO1xuICAgICAgICAgICAgcGF0aCA9IG1hdGNoZXIuc3RyaW5naWZ5KHBhcmFtcyk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgbWF0Y2hlZCA9IFtdO1xuICAgICAgICBsZXQgcGFyZW50TWF0Y2hlciA9IG1hdGNoZXI7XG4gICAgICAgIHdoaWxlIChwYXJlbnRNYXRjaGVyKSB7XG4gICAgICAgICAgICAvLyByZXZlcnNlZCBvcmRlciBzbyBwYXJlbnRzIGFyZSBhdCB0aGUgYmVnaW5uaW5nXG4gICAgICAgICAgICBtYXRjaGVkLnVuc2hpZnQocGFyZW50TWF0Y2hlci5yZWNvcmQpO1xuICAgICAgICAgICAgcGFyZW50TWF0Y2hlciA9IHBhcmVudE1hdGNoZXIucGFyZW50O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBuYW1lLFxuICAgICAgICAgICAgcGF0aCxcbiAgICAgICAgICAgIHBhcmFtcyxcbiAgICAgICAgICAgIG1hdGNoZWQsXG4gICAgICAgICAgICBtZXRhOiBtZXJnZU1ldGFGaWVsZHMobWF0Y2hlZCksXG4gICAgICAgIH07XG4gICAgfVxuICAgIC8vIGFkZCBpbml0aWFsIHJvdXRlc1xuICAgIHJvdXRlcy5mb3JFYWNoKHJvdXRlID0+IGFkZFJvdXRlKHJvdXRlKSk7XG4gICAgcmV0dXJuIHsgYWRkUm91dGUsIHJlc29sdmUsIHJlbW92ZVJvdXRlLCBnZXRSb3V0ZXMsIGdldFJlY29yZE1hdGNoZXIgfTtcbn1cbmZ1bmN0aW9uIHBhcmFtc0Zyb21Mb2NhdGlvbihwYXJhbXMsIGtleXMpIHtcbiAgICBjb25zdCBuZXdQYXJhbXMgPSB7fTtcbiAgICBmb3IgKGNvbnN0IGtleSBvZiBrZXlzKSB7XG4gICAgICAgIGlmIChrZXkgaW4gcGFyYW1zKVxuICAgICAgICAgICAgbmV3UGFyYW1zW2tleV0gPSBwYXJhbXNba2V5XTtcbiAgICB9XG4gICAgcmV0dXJuIG5ld1BhcmFtcztcbn1cbi8qKlxuICogTm9ybWFsaXplcyBhIFJvdXRlUmVjb3JkUmF3LiBDcmVhdGVzIGEgY29weVxuICpcbiAqIEBwYXJhbSByZWNvcmRcbiAqIEByZXR1cm5zIHRoZSBub3JtYWxpemVkIHZlcnNpb25cbiAqL1xuZnVuY3Rpb24gbm9ybWFsaXplUm91dGVSZWNvcmQocmVjb3JkKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgcGF0aDogcmVjb3JkLnBhdGgsXG4gICAgICAgIHJlZGlyZWN0OiByZWNvcmQucmVkaXJlY3QsXG4gICAgICAgIG5hbWU6IHJlY29yZC5uYW1lLFxuICAgICAgICBtZXRhOiByZWNvcmQubWV0YSB8fCB7fSxcbiAgICAgICAgYWxpYXNPZjogdW5kZWZpbmVkLFxuICAgICAgICBiZWZvcmVFbnRlcjogcmVjb3JkLmJlZm9yZUVudGVyLFxuICAgICAgICBwcm9wczogbm9ybWFsaXplUmVjb3JkUHJvcHMocmVjb3JkKSxcbiAgICAgICAgY2hpbGRyZW46IHJlY29yZC5jaGlsZHJlbiB8fCBbXSxcbiAgICAgICAgaW5zdGFuY2VzOiB7fSxcbiAgICAgICAgbGVhdmVHdWFyZHM6IG5ldyBTZXQoKSxcbiAgICAgICAgdXBkYXRlR3VhcmRzOiBuZXcgU2V0KCksXG4gICAgICAgIGVudGVyQ2FsbGJhY2tzOiB7fSxcbiAgICAgICAgY29tcG9uZW50czogJ2NvbXBvbmVudHMnIGluIHJlY29yZFxuICAgICAgICAgICAgPyByZWNvcmQuY29tcG9uZW50cyB8fCBudWxsXG4gICAgICAgICAgICA6IHJlY29yZC5jb21wb25lbnQgJiYgeyBkZWZhdWx0OiByZWNvcmQuY29tcG9uZW50IH0sXG4gICAgfTtcbn1cbi8qKlxuICogTm9ybWFsaXplIHRoZSBvcHRpb25hbCBgcHJvcHNgIGluIGEgcmVjb3JkIHRvIGFsd2F5cyBiZSBhbiBvYmplY3Qgc2ltaWxhciB0b1xuICogY29tcG9uZW50cy4gQWxzbyBhY2NlcHQgYSBib29sZWFuIGZvciBjb21wb25lbnRzLlxuICogQHBhcmFtIHJlY29yZFxuICovXG5mdW5jdGlvbiBub3JtYWxpemVSZWNvcmRQcm9wcyhyZWNvcmQpIHtcbiAgICBjb25zdCBwcm9wc09iamVjdCA9IHt9O1xuICAgIC8vIHByb3BzIGRvZXMgbm90IGV4aXN0IG9uIHJlZGlyZWN0IHJlY29yZHMsIGJ1dCB3ZSBjYW4gc2V0IGZhbHNlIGRpcmVjdGx5XG4gICAgY29uc3QgcHJvcHMgPSByZWNvcmQucHJvcHMgfHwgZmFsc2U7XG4gICAgaWYgKCdjb21wb25lbnQnIGluIHJlY29yZCkge1xuICAgICAgICBwcm9wc09iamVjdC5kZWZhdWx0ID0gcHJvcHM7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICAvLyBOT1RFOiB3ZSBjb3VsZCBhbHNvIGFsbG93IGEgZnVuY3Rpb24gdG8gYmUgYXBwbGllZCB0byBldmVyeSBjb21wb25lbnQuXG4gICAgICAgIC8vIFdvdWxkIG5lZWQgdXNlciBmZWVkYmFjayBmb3IgdXNlIGNhc2VzXG4gICAgICAgIGZvciAoY29uc3QgbmFtZSBpbiByZWNvcmQuY29tcG9uZW50cylcbiAgICAgICAgICAgIHByb3BzT2JqZWN0W25hbWVdID0gdHlwZW9mIHByb3BzID09PSAnb2JqZWN0JyA/IHByb3BzW25hbWVdIDogcHJvcHM7XG4gICAgfVxuICAgIHJldHVybiBwcm9wc09iamVjdDtcbn1cbi8qKlxuICogQ2hlY2tzIGlmIGEgcmVjb3JkIG9yIGFueSBvZiBpdHMgcGFyZW50IGlzIGFuIGFsaWFzXG4gKiBAcGFyYW0gcmVjb3JkXG4gKi9cbmZ1bmN0aW9uIGlzQWxpYXNSZWNvcmQocmVjb3JkKSB7XG4gICAgd2hpbGUgKHJlY29yZCkge1xuICAgICAgICBpZiAocmVjb3JkLnJlY29yZC5hbGlhc09mKVxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIHJlY29yZCA9IHJlY29yZC5wYXJlbnQ7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbn1cbi8qKlxuICogTWVyZ2UgbWV0YSBmaWVsZHMgb2YgYW4gYXJyYXkgb2YgcmVjb3Jkc1xuICpcbiAqIEBwYXJhbSBtYXRjaGVkIC0gYXJyYXkgb2YgbWF0Y2hlZCByZWNvcmRzXG4gKi9cbmZ1bmN0aW9uIG1lcmdlTWV0YUZpZWxkcyhtYXRjaGVkKSB7XG4gICAgcmV0dXJuIG1hdGNoZWQucmVkdWNlKChtZXRhLCByZWNvcmQpID0+IGFzc2lnbihtZXRhLCByZWNvcmQubWV0YSksIHt9KTtcbn1cbmZ1bmN0aW9uIG1lcmdlT3B0aW9ucyhkZWZhdWx0cywgcGFydGlhbE9wdGlvbnMpIHtcbiAgICBjb25zdCBvcHRpb25zID0ge307XG4gICAgZm9yIChjb25zdCBrZXkgaW4gZGVmYXVsdHMpIHtcbiAgICAgICAgb3B0aW9uc1trZXldID0ga2V5IGluIHBhcnRpYWxPcHRpb25zID8gcGFydGlhbE9wdGlvbnNba2V5XSA6IGRlZmF1bHRzW2tleV07XG4gICAgfVxuICAgIHJldHVybiBvcHRpb25zO1xufVxuZnVuY3Rpb24gaXNTYW1lUGFyYW0oYSwgYikge1xuICAgIHJldHVybiAoYS5uYW1lID09PSBiLm5hbWUgJiZcbiAgICAgICAgYS5vcHRpb25hbCA9PT0gYi5vcHRpb25hbCAmJlxuICAgICAgICBhLnJlcGVhdGFibGUgPT09IGIucmVwZWF0YWJsZSk7XG59XG4vKipcbiAqIENoZWNrIGlmIGEgcGF0aCBhbmQgaXRzIGFsaWFzIGhhdmUgdGhlIHNhbWUgcmVxdWlyZWQgcGFyYW1zXG4gKlxuICogQHBhcmFtIGEgLSBvcmlnaW5hbCByZWNvcmRcbiAqIEBwYXJhbSBiIC0gYWxpYXMgcmVjb3JkXG4gKi9cbmZ1bmN0aW9uIGNoZWNrU2FtZVBhcmFtcyhhLCBiKSB7XG4gICAgZm9yIChjb25zdCBrZXkgb2YgYS5rZXlzKSB7XG4gICAgICAgIGlmICgha2V5Lm9wdGlvbmFsICYmICFiLmtleXMuZmluZChpc1NhbWVQYXJhbS5iaW5kKG51bGwsIGtleSkpKVxuICAgICAgICAgICAgcmV0dXJuIHdhcm4oYEFsaWFzIFwiJHtiLnJlY29yZC5wYXRofVwiIGFuZCB0aGUgb3JpZ2luYWwgcmVjb3JkOiBcIiR7YS5yZWNvcmQucGF0aH1cIiBtdXN0IGhhdmUgdGhlIGV4YWN0IHNhbWUgcGFyYW0gbmFtZWQgXCIke2tleS5uYW1lfVwiYCk7XG4gICAgfVxuICAgIGZvciAoY29uc3Qga2V5IG9mIGIua2V5cykge1xuICAgICAgICBpZiAoIWtleS5vcHRpb25hbCAmJiAhYS5rZXlzLmZpbmQoaXNTYW1lUGFyYW0uYmluZChudWxsLCBrZXkpKSlcbiAgICAgICAgICAgIHJldHVybiB3YXJuKGBBbGlhcyBcIiR7Yi5yZWNvcmQucGF0aH1cIiBhbmQgdGhlIG9yaWdpbmFsIHJlY29yZDogXCIke2EucmVjb3JkLnBhdGh9XCIgbXVzdCBoYXZlIHRoZSBleGFjdCBzYW1lIHBhcmFtIG5hbWVkIFwiJHtrZXkubmFtZX1cImApO1xuICAgIH1cbn1cbi8qKlxuICogQSByb3V0ZSB3aXRoIGEgbmFtZSBhbmQgYSBjaGlsZCB3aXRoIGFuIGVtcHR5IHBhdGggd2l0aG91dCBhIG5hbWUgc2hvdWxkIHdhcm4gd2hlbiBhZGRpbmcgdGhlIHJvdXRlXG4gKlxuICogQHBhcmFtIG1haW5Ob3JtYWxpemVkUmVjb3JkIC0gUm91dGVSZWNvcmROb3JtYWxpemVkXG4gKiBAcGFyYW0gcGFyZW50IC0gUm91dGVSZWNvcmRNYXRjaGVyXG4gKi9cbmZ1bmN0aW9uIGNoZWNrQ2hpbGRNaXNzaW5nTmFtZVdpdGhFbXB0eVBhdGgobWFpbk5vcm1hbGl6ZWRSZWNvcmQsIHBhcmVudCkge1xuICAgIGlmIChwYXJlbnQgJiZcbiAgICAgICAgcGFyZW50LnJlY29yZC5uYW1lICYmXG4gICAgICAgICFtYWluTm9ybWFsaXplZFJlY29yZC5uYW1lICYmXG4gICAgICAgICFtYWluTm9ybWFsaXplZFJlY29yZC5wYXRoKSB7XG4gICAgICAgIHdhcm4oYFRoZSByb3V0ZSBuYW1lZCBcIiR7U3RyaW5nKHBhcmVudC5yZWNvcmQubmFtZSl9XCIgaGFzIGEgY2hpbGQgd2l0aG91dCBhIG5hbWUgYW5kIGFuIGVtcHR5IHBhdGguIFVzaW5nIHRoYXQgbmFtZSB3b24ndCByZW5kZXIgdGhlIGVtcHR5IHBhdGggY2hpbGQgc28geW91IHByb2JhYmx5IHdhbnQgdG8gbW92ZSB0aGUgbmFtZSB0byB0aGUgY2hpbGQgaW5zdGVhZC4gSWYgdGhpcyBpcyBpbnRlbnRpb25hbCwgYWRkIGEgbmFtZSB0byB0aGUgY2hpbGQgcm91dGUgdG8gcmVtb3ZlIHRoZSB3YXJuaW5nLmApO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGNoZWNrTWlzc2luZ1BhcmFtc0luQWJzb2x1dGVQYXRoKHJlY29yZCwgcGFyZW50KSB7XG4gICAgZm9yIChjb25zdCBrZXkgb2YgcGFyZW50LmtleXMpIHtcbiAgICAgICAgaWYgKCFyZWNvcmQua2V5cy5maW5kKGlzU2FtZVBhcmFtLmJpbmQobnVsbCwga2V5KSkpXG4gICAgICAgICAgICByZXR1cm4gd2FybihgQWJzb2x1dGUgcGF0aCBcIiR7cmVjb3JkLnJlY29yZC5wYXRofVwiIG11c3QgaGF2ZSB0aGUgZXhhY3Qgc2FtZSBwYXJhbSBuYW1lZCBcIiR7a2V5Lm5hbWV9XCIgYXMgaXRzIHBhcmVudCBcIiR7cGFyZW50LnJlY29yZC5wYXRofVwiLmApO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGlzUmVjb3JkQ2hpbGRPZihyZWNvcmQsIHBhcmVudCkge1xuICAgIHJldHVybiBwYXJlbnQuY2hpbGRyZW4uc29tZShjaGlsZCA9PiBjaGlsZCA9PT0gcmVjb3JkIHx8IGlzUmVjb3JkQ2hpbGRPZihyZWNvcmQsIGNoaWxkKSk7XG59XG5cbi8qKlxuICogVHJhbnNmb3JtcyBhIHF1ZXJ5U3RyaW5nIGludG8gYSB7QGxpbmsgTG9jYXRpb25RdWVyeX0gb2JqZWN0LiBBY2NlcHQgYm90aCwgYVxuICogdmVyc2lvbiB3aXRoIHRoZSBsZWFkaW5nIGA/YCBhbmQgd2l0aG91dCBTaG91bGQgd29yayBhcyBVUkxTZWFyY2hQYXJhbXNcblxuICogQGludGVybmFsXG4gKlxuICogQHBhcmFtIHNlYXJjaCAtIHNlYXJjaCBzdHJpbmcgdG8gcGFyc2VcbiAqIEByZXR1cm5zIGEgcXVlcnkgb2JqZWN0XG4gKi9cbmZ1bmN0aW9uIHBhcnNlUXVlcnkoc2VhcmNoKSB7XG4gICAgY29uc3QgcXVlcnkgPSB7fTtcbiAgICAvLyBhdm9pZCBjcmVhdGluZyBhbiBvYmplY3Qgd2l0aCBhbiBlbXB0eSBrZXkgYW5kIGVtcHR5IHZhbHVlXG4gICAgLy8gYmVjYXVzZSBvZiBzcGxpdCgnJicpXG4gICAgaWYgKHNlYXJjaCA9PT0gJycgfHwgc2VhcmNoID09PSAnPycpXG4gICAgICAgIHJldHVybiBxdWVyeTtcbiAgICBjb25zdCBoYXNMZWFkaW5nSU0gPSBzZWFyY2hbMF0gPT09ICc/JztcbiAgICBjb25zdCBzZWFyY2hQYXJhbXMgPSAoaGFzTGVhZGluZ0lNID8gc2VhcmNoLnNsaWNlKDEpIDogc2VhcmNoKS5zcGxpdCgnJicpO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc2VhcmNoUGFyYW1zLmxlbmd0aDsgKytpKSB7XG4gICAgICAgIC8vIHByZSBkZWNvZGUgdGhlICsgaW50byBzcGFjZVxuICAgICAgICBjb25zdCBzZWFyY2hQYXJhbSA9IHNlYXJjaFBhcmFtc1tpXS5yZXBsYWNlKFBMVVNfUkUsICcgJyk7XG4gICAgICAgIC8vIGFsbG93IHRoZSA9IGNoYXJhY3RlclxuICAgICAgICBjb25zdCBlcVBvcyA9IHNlYXJjaFBhcmFtLmluZGV4T2YoJz0nKTtcbiAgICAgICAgY29uc3Qga2V5ID0gZGVjb2RlKGVxUG9zIDwgMCA/IHNlYXJjaFBhcmFtIDogc2VhcmNoUGFyYW0uc2xpY2UoMCwgZXFQb3MpKTtcbiAgICAgICAgY29uc3QgdmFsdWUgPSBlcVBvcyA8IDAgPyBudWxsIDogZGVjb2RlKHNlYXJjaFBhcmFtLnNsaWNlKGVxUG9zICsgMSkpO1xuICAgICAgICBpZiAoa2V5IGluIHF1ZXJ5KSB7XG4gICAgICAgICAgICAvLyBhbiBleHRyYSB2YXJpYWJsZSBmb3IgdHMgdHlwZXNcbiAgICAgICAgICAgIGxldCBjdXJyZW50VmFsdWUgPSBxdWVyeVtrZXldO1xuICAgICAgICAgICAgaWYgKCFpc0FycmF5KGN1cnJlbnRWYWx1ZSkpIHtcbiAgICAgICAgICAgICAgICBjdXJyZW50VmFsdWUgPSBxdWVyeVtrZXldID0gW2N1cnJlbnRWYWx1ZV07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjdXJyZW50VmFsdWUucHVzaCh2YWx1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBxdWVyeVtrZXldID0gdmFsdWU7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHF1ZXJ5O1xufVxuLyoqXG4gKiBTdHJpbmdpZmllcyBhIHtAbGluayBMb2NhdGlvblF1ZXJ5UmF3fSBvYmplY3QuIExpa2UgYFVSTFNlYXJjaFBhcmFtc2AsIGl0XG4gKiBkb2Vzbid0IHByZXBlbmQgYSBgP2BcbiAqXG4gKiBAaW50ZXJuYWxcbiAqXG4gKiBAcGFyYW0gcXVlcnkgLSBxdWVyeSBvYmplY3QgdG8gc3RyaW5naWZ5XG4gKiBAcmV0dXJucyBzdHJpbmcgdmVyc2lvbiBvZiB0aGUgcXVlcnkgd2l0aG91dCB0aGUgbGVhZGluZyBgP2BcbiAqL1xuZnVuY3Rpb24gc3RyaW5naWZ5UXVlcnkocXVlcnkpIHtcbiAgICBsZXQgc2VhcmNoID0gJyc7XG4gICAgZm9yIChsZXQga2V5IGluIHF1ZXJ5KSB7XG4gICAgICAgIGNvbnN0IHZhbHVlID0gcXVlcnlba2V5XTtcbiAgICAgICAga2V5ID0gZW5jb2RlUXVlcnlLZXkoa2V5KTtcbiAgICAgICAgaWYgKHZhbHVlID09IG51bGwpIHtcbiAgICAgICAgICAgIC8vIG9ubHkgbnVsbCBhZGRzIHRoZSB2YWx1ZVxuICAgICAgICAgICAgaWYgKHZhbHVlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBzZWFyY2ggKz0gKHNlYXJjaC5sZW5ndGggPyAnJicgOiAnJykgKyBrZXk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICAvLyBrZWVwIG51bGwgdmFsdWVzXG4gICAgICAgIGNvbnN0IHZhbHVlcyA9IGlzQXJyYXkodmFsdWUpXG4gICAgICAgICAgICA/IHZhbHVlLm1hcCh2ID0+IHYgJiYgZW5jb2RlUXVlcnlWYWx1ZSh2KSlcbiAgICAgICAgICAgIDogW3ZhbHVlICYmIGVuY29kZVF1ZXJ5VmFsdWUodmFsdWUpXTtcbiAgICAgICAgdmFsdWVzLmZvckVhY2godmFsdWUgPT4ge1xuICAgICAgICAgICAgLy8gc2tpcCB1bmRlZmluZWQgdmFsdWVzIGluIGFycmF5cyBhcyBpZiB0aGV5IHdlcmUgbm90IHByZXNlbnRcbiAgICAgICAgICAgIC8vIHNtYWxsZXIgY29kZSB0aGFuIHVzaW5nIGZpbHRlclxuICAgICAgICAgICAgaWYgKHZhbHVlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAvLyBvbmx5IGFwcGVuZCAmIHdpdGggbm9uLWVtcHR5IHNlYXJjaFxuICAgICAgICAgICAgICAgIHNlYXJjaCArPSAoc2VhcmNoLmxlbmd0aCA/ICcmJyA6ICcnKSArIGtleTtcbiAgICAgICAgICAgICAgICBpZiAodmFsdWUgIT0gbnVsbClcbiAgICAgICAgICAgICAgICAgICAgc2VhcmNoICs9ICc9JyArIHZhbHVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgcmV0dXJuIHNlYXJjaDtcbn1cbi8qKlxuICogVHJhbnNmb3JtcyBhIHtAbGluayBMb2NhdGlvblF1ZXJ5UmF3fSBpbnRvIGEge0BsaW5rIExvY2F0aW9uUXVlcnl9IGJ5IGNhc3RpbmdcbiAqIG51bWJlcnMgaW50byBzdHJpbmdzLCByZW1vdmluZyBrZXlzIHdpdGggYW4gdW5kZWZpbmVkIHZhbHVlIGFuZCByZXBsYWNpbmdcbiAqIHVuZGVmaW5lZCB3aXRoIG51bGwgaW4gYXJyYXlzXG4gKlxuICogQHBhcmFtIHF1ZXJ5IC0gcXVlcnkgb2JqZWN0IHRvIG5vcm1hbGl6ZVxuICogQHJldHVybnMgYSBub3JtYWxpemVkIHF1ZXJ5IG9iamVjdFxuICovXG5mdW5jdGlvbiBub3JtYWxpemVRdWVyeShxdWVyeSkge1xuICAgIGNvbnN0IG5vcm1hbGl6ZWRRdWVyeSA9IHt9O1xuICAgIGZvciAoY29uc3Qga2V5IGluIHF1ZXJ5KSB7XG4gICAgICAgIGNvbnN0IHZhbHVlID0gcXVlcnlba2V5XTtcbiAgICAgICAgaWYgKHZhbHVlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIG5vcm1hbGl6ZWRRdWVyeVtrZXldID0gaXNBcnJheSh2YWx1ZSlcbiAgICAgICAgICAgICAgICA/IHZhbHVlLm1hcCh2ID0+ICh2ID09IG51bGwgPyBudWxsIDogJycgKyB2KSlcbiAgICAgICAgICAgICAgICA6IHZhbHVlID09IG51bGxcbiAgICAgICAgICAgICAgICAgICAgPyB2YWx1ZVxuICAgICAgICAgICAgICAgICAgICA6ICcnICsgdmFsdWU7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG5vcm1hbGl6ZWRRdWVyeTtcbn1cblxuLyoqXG4gKiBSb3V0ZVJlY29yZCBiZWluZyByZW5kZXJlZCBieSB0aGUgY2xvc2VzdCBhbmNlc3RvciBSb3V0ZXIgVmlldy4gVXNlZCBmb3JcbiAqIGBvbkJlZm9yZVJvdXRlVXBkYXRlYCBhbmQgYG9uQmVmb3JlUm91dGVMZWF2ZWAuIHJ2bG0gc3RhbmRzIGZvciBSb3V0ZXIgVmlld1xuICogTG9jYXRpb24gTWF0Y2hlZFxuICpcbiAqIEBpbnRlcm5hbFxuICovXG5jb25zdCBtYXRjaGVkUm91dGVLZXkgPSBTeW1ib2woKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpID8gJ3JvdXRlciB2aWV3IGxvY2F0aW9uIG1hdGNoZWQnIDogJycpO1xuLyoqXG4gKiBBbGxvd3Mgb3ZlcnJpZGluZyB0aGUgcm91dGVyIHZpZXcgZGVwdGggdG8gY29udHJvbCB3aGljaCBjb21wb25lbnQgaW5cbiAqIGBtYXRjaGVkYCBpcyByZW5kZXJlZC4gcnZkIHN0YW5kcyBmb3IgUm91dGVyIFZpZXcgRGVwdGhcbiAqXG4gKiBAaW50ZXJuYWxcbiAqL1xuY29uc3Qgdmlld0RlcHRoS2V5ID0gU3ltYm9sKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSA/ICdyb3V0ZXIgdmlldyBkZXB0aCcgOiAnJyk7XG4vKipcbiAqIEFsbG93cyBvdmVycmlkaW5nIHRoZSByb3V0ZXIgaW5zdGFuY2UgcmV0dXJuZWQgYnkgYHVzZVJvdXRlcmAgaW4gdGVzdHMuIHJcbiAqIHN0YW5kcyBmb3Igcm91dGVyXG4gKlxuICogQGludGVybmFsXG4gKi9cbmNvbnN0IHJvdXRlcktleSA9IFN5bWJvbCgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgPyAncm91dGVyJyA6ICcnKTtcbi8qKlxuICogQWxsb3dzIG92ZXJyaWRpbmcgdGhlIGN1cnJlbnQgcm91dGUgcmV0dXJuZWQgYnkgYHVzZVJvdXRlYCBpbiB0ZXN0cy4gcmxcbiAqIHN0YW5kcyBmb3Igcm91dGUgbG9jYXRpb25cbiAqXG4gKiBAaW50ZXJuYWxcbiAqL1xuY29uc3Qgcm91dGVMb2NhdGlvbktleSA9IFN5bWJvbCgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgPyAncm91dGUgbG9jYXRpb24nIDogJycpO1xuLyoqXG4gKiBBbGxvd3Mgb3ZlcnJpZGluZyB0aGUgY3VycmVudCByb3V0ZSB1c2VkIGJ5IHJvdXRlci12aWV3LiBJbnRlcm5hbGx5IHRoaXMgaXNcbiAqIHVzZWQgd2hlbiB0aGUgYHJvdXRlYCBwcm9wIGlzIHBhc3NlZC5cbiAqXG4gKiBAaW50ZXJuYWxcbiAqL1xuY29uc3Qgcm91dGVyVmlld0xvY2F0aW9uS2V5ID0gU3ltYm9sKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSA/ICdyb3V0ZXIgdmlldyBsb2NhdGlvbicgOiAnJyk7XG5cbi8qKlxuICogQ3JlYXRlIGEgbGlzdCBvZiBjYWxsYmFja3MgdGhhdCBjYW4gYmUgcmVzZXQuIFVzZWQgdG8gY3JlYXRlIGJlZm9yZSBhbmQgYWZ0ZXIgbmF2aWdhdGlvbiBndWFyZHMgbGlzdFxuICovXG5mdW5jdGlvbiB1c2VDYWxsYmFja3MoKSB7XG4gICAgbGV0IGhhbmRsZXJzID0gW107XG4gICAgZnVuY3Rpb24gYWRkKGhhbmRsZXIpIHtcbiAgICAgICAgaGFuZGxlcnMucHVzaChoYW5kbGVyKTtcbiAgICAgICAgcmV0dXJuICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGkgPSBoYW5kbGVycy5pbmRleE9mKGhhbmRsZXIpO1xuICAgICAgICAgICAgaWYgKGkgPiAtMSlcbiAgICAgICAgICAgICAgICBoYW5kbGVycy5zcGxpY2UoaSwgMSk7XG4gICAgICAgIH07XG4gICAgfVxuICAgIGZ1bmN0aW9uIHJlc2V0KCkge1xuICAgICAgICBoYW5kbGVycyA9IFtdO1xuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgICBhZGQsXG4gICAgICAgIGxpc3Q6ICgpID0+IGhhbmRsZXJzLnNsaWNlKCksXG4gICAgICAgIHJlc2V0LFxuICAgIH07XG59XG5cbmZ1bmN0aW9uIHJlZ2lzdGVyR3VhcmQocmVjb3JkLCBuYW1lLCBndWFyZCkge1xuICAgIGNvbnN0IHJlbW92ZUZyb21MaXN0ID0gKCkgPT4ge1xuICAgICAgICByZWNvcmRbbmFtZV0uZGVsZXRlKGd1YXJkKTtcbiAgICB9O1xuICAgIG9uVW5tb3VudGVkKHJlbW92ZUZyb21MaXN0KTtcbiAgICBvbkRlYWN0aXZhdGVkKHJlbW92ZUZyb21MaXN0KTtcbiAgICBvbkFjdGl2YXRlZCgoKSA9PiB7XG4gICAgICAgIHJlY29yZFtuYW1lXS5hZGQoZ3VhcmQpO1xuICAgIH0pO1xuICAgIHJlY29yZFtuYW1lXS5hZGQoZ3VhcmQpO1xufVxuLyoqXG4gKiBBZGQgYSBuYXZpZ2F0aW9uIGd1YXJkIHRoYXQgdHJpZ2dlcnMgd2hlbmV2ZXIgdGhlIGNvbXBvbmVudCBmb3IgdGhlIGN1cnJlbnRcbiAqIGxvY2F0aW9uIGlzIGFib3V0IHRvIGJlIGxlZnQuIFNpbWlsYXIgdG8ge0BsaW5rIGJlZm9yZVJvdXRlTGVhdmV9IGJ1dCBjYW4gYmVcbiAqIHVzZWQgaW4gYW55IGNvbXBvbmVudC4gVGhlIGd1YXJkIGlzIHJlbW92ZWQgd2hlbiB0aGUgY29tcG9uZW50IGlzIHVubW91bnRlZC5cbiAqXG4gKiBAcGFyYW0gbGVhdmVHdWFyZCAtIHtAbGluayBOYXZpZ2F0aW9uR3VhcmR9XG4gKi9cbmZ1bmN0aW9uIG9uQmVmb3JlUm91dGVMZWF2ZShsZWF2ZUd1YXJkKSB7XG4gICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJiAhZ2V0Q3VycmVudEluc3RhbmNlKCkpIHtcbiAgICAgICAgd2FybignZ2V0Q3VycmVudEluc3RhbmNlKCkgcmV0dXJuZWQgbnVsbC4gb25CZWZvcmVSb3V0ZUxlYXZlKCkgbXVzdCBiZSBjYWxsZWQgYXQgdGhlIHRvcCBvZiBhIHNldHVwIGZ1bmN0aW9uJyk7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgYWN0aXZlUmVjb3JkID0gaW5qZWN0KG1hdGNoZWRSb3V0ZUtleSwgXG4gICAgLy8gdG8gYXZvaWQgd2FybmluZ1xuICAgIHt9KS52YWx1ZTtcbiAgICBpZiAoIWFjdGl2ZVJlY29yZCkge1xuICAgICAgICAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiZcbiAgICAgICAgICAgIHdhcm4oJ05vIGFjdGl2ZSByb3V0ZSByZWNvcmQgd2FzIGZvdW5kIHdoZW4gY2FsbGluZyBgb25CZWZvcmVSb3V0ZUxlYXZlKClgLiBNYWtlIHN1cmUgeW91IGNhbGwgdGhpcyBmdW5jdGlvbiBpbnNpZGUgYSBjb21wb25lbnQgY2hpbGQgb2YgPHJvdXRlci12aWV3Pi4gTWF5YmUgeW91IGNhbGxlZCBpdCBpbnNpZGUgb2YgQXBwLnZ1ZT8nKTtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICByZWdpc3Rlckd1YXJkKGFjdGl2ZVJlY29yZCwgJ2xlYXZlR3VhcmRzJywgbGVhdmVHdWFyZCk7XG59XG4vKipcbiAqIEFkZCBhIG5hdmlnYXRpb24gZ3VhcmQgdGhhdCB0cmlnZ2VycyB3aGVuZXZlciB0aGUgY3VycmVudCBsb2NhdGlvbiBpcyBhYm91dFxuICogdG8gYmUgdXBkYXRlZC4gU2ltaWxhciB0byB7QGxpbmsgYmVmb3JlUm91dGVVcGRhdGV9IGJ1dCBjYW4gYmUgdXNlZCBpbiBhbnlcbiAqIGNvbXBvbmVudC4gVGhlIGd1YXJkIGlzIHJlbW92ZWQgd2hlbiB0aGUgY29tcG9uZW50IGlzIHVubW91bnRlZC5cbiAqXG4gKiBAcGFyYW0gdXBkYXRlR3VhcmQgLSB7QGxpbmsgTmF2aWdhdGlvbkd1YXJkfVxuICovXG5mdW5jdGlvbiBvbkJlZm9yZVJvdXRlVXBkYXRlKHVwZGF0ZUd1YXJkKSB7XG4gICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJiAhZ2V0Q3VycmVudEluc3RhbmNlKCkpIHtcbiAgICAgICAgd2FybignZ2V0Q3VycmVudEluc3RhbmNlKCkgcmV0dXJuZWQgbnVsbC4gb25CZWZvcmVSb3V0ZVVwZGF0ZSgpIG11c3QgYmUgY2FsbGVkIGF0IHRoZSB0b3Agb2YgYSBzZXR1cCBmdW5jdGlvbicpO1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IGFjdGl2ZVJlY29yZCA9IGluamVjdChtYXRjaGVkUm91dGVLZXksIFxuICAgIC8vIHRvIGF2b2lkIHdhcm5pbmdcbiAgICB7fSkudmFsdWU7XG4gICAgaWYgKCFhY3RpdmVSZWNvcmQpIHtcbiAgICAgICAgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmXG4gICAgICAgICAgICB3YXJuKCdObyBhY3RpdmUgcm91dGUgcmVjb3JkIHdhcyBmb3VuZCB3aGVuIGNhbGxpbmcgYG9uQmVmb3JlUm91dGVVcGRhdGUoKWAuIE1ha2Ugc3VyZSB5b3UgY2FsbCB0aGlzIGZ1bmN0aW9uIGluc2lkZSBhIGNvbXBvbmVudCBjaGlsZCBvZiA8cm91dGVyLXZpZXc+LiBNYXliZSB5b3UgY2FsbGVkIGl0IGluc2lkZSBvZiBBcHAudnVlPycpO1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIHJlZ2lzdGVyR3VhcmQoYWN0aXZlUmVjb3JkLCAndXBkYXRlR3VhcmRzJywgdXBkYXRlR3VhcmQpO1xufVxuZnVuY3Rpb24gZ3VhcmRUb1Byb21pc2VGbihndWFyZCwgdG8sIGZyb20sIHJlY29yZCwgbmFtZSwgcnVuV2l0aENvbnRleHQgPSBmbiA9PiBmbigpKSB7XG4gICAgLy8ga2VlcCBhIHJlZmVyZW5jZSB0byB0aGUgZW50ZXJDYWxsYmFja0FycmF5IHRvIHByZXZlbnQgcHVzaGluZyBjYWxsYmFja3MgaWYgYSBuZXcgbmF2aWdhdGlvbiB0b29rIHBsYWNlXG4gICAgY29uc3QgZW50ZXJDYWxsYmFja0FycmF5ID0gcmVjb3JkICYmXG4gICAgICAgIC8vIG5hbWUgaXMgZGVmaW5lZCBpZiByZWNvcmQgaXMgYmVjYXVzZSBvZiB0aGUgZnVuY3Rpb24gb3ZlcmxvYWRcbiAgICAgICAgKHJlY29yZC5lbnRlckNhbGxiYWNrc1tuYW1lXSA9IHJlY29yZC5lbnRlckNhbGxiYWNrc1tuYW1lXSB8fCBbXSk7XG4gICAgcmV0dXJuICgpID0+IG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgY29uc3QgbmV4dCA9ICh2YWxpZCkgPT4ge1xuICAgICAgICAgICAgaWYgKHZhbGlkID09PSBmYWxzZSkge1xuICAgICAgICAgICAgICAgIHJlamVjdChjcmVhdGVSb3V0ZXJFcnJvcig0IC8qIEVycm9yVHlwZXMuTkFWSUdBVElPTl9BQk9SVEVEICovLCB7XG4gICAgICAgICAgICAgICAgICAgIGZyb20sXG4gICAgICAgICAgICAgICAgICAgIHRvLFxuICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHZhbGlkIGluc3RhbmNlb2YgRXJyb3IpIHtcbiAgICAgICAgICAgICAgICByZWplY3QodmFsaWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoaXNSb3V0ZUxvY2F0aW9uKHZhbGlkKSkge1xuICAgICAgICAgICAgICAgIHJlamVjdChjcmVhdGVSb3V0ZXJFcnJvcigyIC8qIEVycm9yVHlwZXMuTkFWSUdBVElPTl9HVUFSRF9SRURJUkVDVCAqLywge1xuICAgICAgICAgICAgICAgICAgICBmcm9tOiB0byxcbiAgICAgICAgICAgICAgICAgICAgdG86IHZhbGlkLFxuICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGlmIChlbnRlckNhbGxiYWNrQXJyYXkgJiZcbiAgICAgICAgICAgICAgICAgICAgLy8gc2luY2UgZW50ZXJDYWxsYmFja0FycmF5IGlzIHRydXRoeSwgYm90aCByZWNvcmQgYW5kIG5hbWUgYWxzbyBhcmVcbiAgICAgICAgICAgICAgICAgICAgcmVjb3JkLmVudGVyQ2FsbGJhY2tzW25hbWVdID09PSBlbnRlckNhbGxiYWNrQXJyYXkgJiZcbiAgICAgICAgICAgICAgICAgICAgdHlwZW9mIHZhbGlkID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgICAgIGVudGVyQ2FsbGJhY2tBcnJheS5wdXNoKHZhbGlkKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICAvLyB3cmFwcGluZyB3aXRoIFByb21pc2UucmVzb2x2ZSBhbGxvd3MgaXQgdG8gd29yayB3aXRoIGJvdGggYXN5bmMgYW5kIHN5bmMgZ3VhcmRzXG4gICAgICAgIGNvbnN0IGd1YXJkUmV0dXJuID0gcnVuV2l0aENvbnRleHQoKCkgPT4gZ3VhcmQuY2FsbChyZWNvcmQgJiYgcmVjb3JkLmluc3RhbmNlc1tuYW1lXSwgdG8sIGZyb20sIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSA/IGNhbk9ubHlCZUNhbGxlZE9uY2UobmV4dCwgdG8sIGZyb20pIDogbmV4dCkpO1xuICAgICAgICBsZXQgZ3VhcmRDYWxsID0gUHJvbWlzZS5yZXNvbHZlKGd1YXJkUmV0dXJuKTtcbiAgICAgICAgaWYgKGd1YXJkLmxlbmd0aCA8IDMpXG4gICAgICAgICAgICBndWFyZENhbGwgPSBndWFyZENhbGwudGhlbihuZXh0KTtcbiAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJiBndWFyZC5sZW5ndGggPiAyKSB7XG4gICAgICAgICAgICBjb25zdCBtZXNzYWdlID0gYFRoZSBcIm5leHRcIiBjYWxsYmFjayB3YXMgbmV2ZXIgY2FsbGVkIGluc2lkZSBvZiAke2d1YXJkLm5hbWUgPyAnXCInICsgZ3VhcmQubmFtZSArICdcIicgOiAnJ306XFxuJHtndWFyZC50b1N0cmluZygpfVxcbi4gSWYgeW91IGFyZSByZXR1cm5pbmcgYSB2YWx1ZSBpbnN0ZWFkIG9mIGNhbGxpbmcgXCJuZXh0XCIsIG1ha2Ugc3VyZSB0byByZW1vdmUgdGhlIFwibmV4dFwiIHBhcmFtZXRlciBmcm9tIHlvdXIgZnVuY3Rpb24uYDtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgZ3VhcmRSZXR1cm4gPT09ICdvYmplY3QnICYmICd0aGVuJyBpbiBndWFyZFJldHVybikge1xuICAgICAgICAgICAgICAgIGd1YXJkQ2FsbCA9IGd1YXJkQ2FsbC50aGVuKHJlc29sdmVkVmFsdWUgPT4ge1xuICAgICAgICAgICAgICAgICAgICAvLyBAdHMtZXhwZWN0LWVycm9yOiBfY2FsbGVkIGlzIGFkZGVkIGF0IGNhbk9ubHlCZUNhbGxlZE9uY2VcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFuZXh0Ll9jYWxsZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHdhcm4obWVzc2FnZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IEVycm9yKCdJbnZhbGlkIG5hdmlnYXRpb24gZ3VhcmQnKSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc29sdmVkVmFsdWU7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChndWFyZFJldHVybiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvcjogX2NhbGxlZCBpcyBhZGRlZCBhdCBjYW5Pbmx5QmVDYWxsZWRPbmNlXG4gICAgICAgICAgICAgICAgaWYgKCFuZXh0Ll9jYWxsZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgd2FybihtZXNzYWdlKTtcbiAgICAgICAgICAgICAgICAgICAgcmVqZWN0KG5ldyBFcnJvcignSW52YWxpZCBuYXZpZ2F0aW9uIGd1YXJkJykpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGd1YXJkQ2FsbC5jYXRjaChlcnIgPT4gcmVqZWN0KGVycikpO1xuICAgIH0pO1xufVxuZnVuY3Rpb24gY2FuT25seUJlQ2FsbGVkT25jZShuZXh0LCB0bywgZnJvbSkge1xuICAgIGxldCBjYWxsZWQgPSAwO1xuICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmIChjYWxsZWQrKyA9PT0gMSlcbiAgICAgICAgICAgIHdhcm4oYFRoZSBcIm5leHRcIiBjYWxsYmFjayB3YXMgY2FsbGVkIG1vcmUgdGhhbiBvbmNlIGluIG9uZSBuYXZpZ2F0aW9uIGd1YXJkIHdoZW4gZ29pbmcgZnJvbSBcIiR7ZnJvbS5mdWxsUGF0aH1cIiB0byBcIiR7dG8uZnVsbFBhdGh9XCIuIEl0IHNob3VsZCBiZSBjYWxsZWQgZXhhY3RseSBvbmUgdGltZSBpbiBlYWNoIG5hdmlnYXRpb24gZ3VhcmQuIFRoaXMgd2lsbCBmYWlsIGluIHByb2R1Y3Rpb24uYCk7XG4gICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3I6IHdlIHB1dCBpdCBpbiB0aGUgb3JpZ2luYWwgb25lIGJlY2F1c2UgaXQncyBlYXNpZXIgdG8gY2hlY2tcbiAgICAgICAgbmV4dC5fY2FsbGVkID0gdHJ1ZTtcbiAgICAgICAgaWYgKGNhbGxlZCA9PT0gMSlcbiAgICAgICAgICAgIG5leHQuYXBwbHkobnVsbCwgYXJndW1lbnRzKTtcbiAgICB9O1xufVxuZnVuY3Rpb24gZXh0cmFjdENvbXBvbmVudHNHdWFyZHMobWF0Y2hlZCwgZ3VhcmRUeXBlLCB0bywgZnJvbSwgcnVuV2l0aENvbnRleHQgPSBmbiA9PiBmbigpKSB7XG4gICAgY29uc3QgZ3VhcmRzID0gW107XG4gICAgZm9yIChjb25zdCByZWNvcmQgb2YgbWF0Y2hlZCkge1xuICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmICFyZWNvcmQuY29tcG9uZW50cyAmJiAhcmVjb3JkLmNoaWxkcmVuLmxlbmd0aCkge1xuICAgICAgICAgICAgd2FybihgUmVjb3JkIHdpdGggcGF0aCBcIiR7cmVjb3JkLnBhdGh9XCIgaXMgZWl0aGVyIG1pc3NpbmcgYSBcImNvbXBvbmVudChzKVwiYCArXG4gICAgICAgICAgICAgICAgYCBvciBcImNoaWxkcmVuXCIgcHJvcGVydHkuYCk7XG4gICAgICAgIH1cbiAgICAgICAgZm9yIChjb25zdCBuYW1lIGluIHJlY29yZC5jb21wb25lbnRzKSB7XG4gICAgICAgICAgICBsZXQgcmF3Q29tcG9uZW50ID0gcmVjb3JkLmNvbXBvbmVudHNbbmFtZV07XG4gICAgICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFyYXdDb21wb25lbnQgfHxcbiAgICAgICAgICAgICAgICAgICAgKHR5cGVvZiByYXdDb21wb25lbnQgIT09ICdvYmplY3QnICYmXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlb2YgcmF3Q29tcG9uZW50ICE9PSAnZnVuY3Rpb24nKSkge1xuICAgICAgICAgICAgICAgICAgICB3YXJuKGBDb21wb25lbnQgXCIke25hbWV9XCIgaW4gcmVjb3JkIHdpdGggcGF0aCBcIiR7cmVjb3JkLnBhdGh9XCIgaXMgbm90YCArXG4gICAgICAgICAgICAgICAgICAgICAgICBgIGEgdmFsaWQgY29tcG9uZW50LiBSZWNlaXZlZCBcIiR7U3RyaW5nKHJhd0NvbXBvbmVudCl9XCIuYCk7XG4gICAgICAgICAgICAgICAgICAgIC8vIHRocm93IHRvIGVuc3VyZSB3ZSBzdG9wIGhlcmUgYnV0IHdhcm4gdG8gZW5zdXJlIHRoZSBtZXNzYWdlIGlzbid0XG4gICAgICAgICAgICAgICAgICAgIC8vIG1pc3NlZCBieSB0aGUgdXNlclxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgcm91dGUgY29tcG9uZW50Jyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKCd0aGVuJyBpbiByYXdDb21wb25lbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gd2FybiBpZiB1c2VyIHdyb3RlIGltcG9ydCgnL2NvbXBvbmVudC52dWUnKSBpbnN0ZWFkIG9mICgpID0+XG4gICAgICAgICAgICAgICAgICAgIC8vIGltcG9ydCgnLi9jb21wb25lbnQudnVlJylcbiAgICAgICAgICAgICAgICAgICAgd2FybihgQ29tcG9uZW50IFwiJHtuYW1lfVwiIGluIHJlY29yZCB3aXRoIHBhdGggXCIke3JlY29yZC5wYXRofVwiIGlzIGEgYCArXG4gICAgICAgICAgICAgICAgICAgICAgICBgUHJvbWlzZSBpbnN0ZWFkIG9mIGEgZnVuY3Rpb24gdGhhdCByZXR1cm5zIGEgUHJvbWlzZS4gRGlkIHlvdSBgICtcbiAgICAgICAgICAgICAgICAgICAgICAgIGB3cml0ZSBcImltcG9ydCgnLi9NeVBhZ2UudnVlJylcIiBpbnN0ZWFkIG9mIGAgK1xuICAgICAgICAgICAgICAgICAgICAgICAgYFwiKCkgPT4gaW1wb3J0KCcuL015UGFnZS52dWUnKVwiID8gVGhpcyB3aWxsIGJyZWFrIGluIGAgK1xuICAgICAgICAgICAgICAgICAgICAgICAgYHByb2R1Y3Rpb24gaWYgbm90IGZpeGVkLmApO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBwcm9taXNlID0gcmF3Q29tcG9uZW50O1xuICAgICAgICAgICAgICAgICAgICByYXdDb21wb25lbnQgPSAoKSA9PiBwcm9taXNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChyYXdDb21wb25lbnQuX19hc3luY0xvYWRlciAmJlxuICAgICAgICAgICAgICAgICAgICAvLyB3YXJuIG9ubHkgb25jZSBwZXIgY29tcG9uZW50XG4gICAgICAgICAgICAgICAgICAgICFyYXdDb21wb25lbnQuX193YXJuZWREZWZpbmVBc3luYykge1xuICAgICAgICAgICAgICAgICAgICByYXdDb21wb25lbnQuX193YXJuZWREZWZpbmVBc3luYyA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIHdhcm4oYENvbXBvbmVudCBcIiR7bmFtZX1cIiBpbiByZWNvcmQgd2l0aCBwYXRoIFwiJHtyZWNvcmQucGF0aH1cIiBpcyBkZWZpbmVkIGAgK1xuICAgICAgICAgICAgICAgICAgICAgICAgYHVzaW5nIFwiZGVmaW5lQXN5bmNDb21wb25lbnQoKVwiLiBgICtcbiAgICAgICAgICAgICAgICAgICAgICAgIGBXcml0ZSBcIigpID0+IGltcG9ydCgnLi9NeVBhZ2UudnVlJylcIiBpbnN0ZWFkIG9mIGAgK1xuICAgICAgICAgICAgICAgICAgICAgICAgYFwiZGVmaW5lQXN5bmNDb21wb25lbnQoKCkgPT4gaW1wb3J0KCcuL015UGFnZS52dWUnKSlcIi5gKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBza2lwIHVwZGF0ZSBhbmQgbGVhdmUgZ3VhcmRzIGlmIHRoZSByb3V0ZSBjb21wb25lbnQgaXMgbm90IG1vdW50ZWRcbiAgICAgICAgICAgIGlmIChndWFyZFR5cGUgIT09ICdiZWZvcmVSb3V0ZUVudGVyJyAmJiAhcmVjb3JkLmluc3RhbmNlc1tuYW1lXSlcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIGlmIChpc1JvdXRlQ29tcG9uZW50KHJhd0NvbXBvbmVudCkpIHtcbiAgICAgICAgICAgICAgICAvLyBfX3ZjY09wdHMgaXMgYWRkZWQgYnkgdnVlLWNsYXNzLWNvbXBvbmVudCBhbmQgY29udGFpbiB0aGUgcmVndWxhciBvcHRpb25zXG4gICAgICAgICAgICAgICAgY29uc3Qgb3B0aW9ucyA9IHJhd0NvbXBvbmVudC5fX3ZjY09wdHMgfHwgcmF3Q29tcG9uZW50O1xuICAgICAgICAgICAgICAgIGNvbnN0IGd1YXJkID0gb3B0aW9uc1tndWFyZFR5cGVdO1xuICAgICAgICAgICAgICAgIGd1YXJkICYmXG4gICAgICAgICAgICAgICAgICAgIGd1YXJkcy5wdXNoKGd1YXJkVG9Qcm9taXNlRm4oZ3VhcmQsIHRvLCBmcm9tLCByZWNvcmQsIG5hbWUsIHJ1bldpdGhDb250ZXh0KSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBzdGFydCByZXF1ZXN0aW5nIHRoZSBjaHVuayBhbHJlYWR5XG4gICAgICAgICAgICAgICAgbGV0IGNvbXBvbmVudFByb21pc2UgPSByYXdDb21wb25lbnQoKTtcbiAgICAgICAgICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmICEoJ2NhdGNoJyBpbiBjb21wb25lbnRQcm9taXNlKSkge1xuICAgICAgICAgICAgICAgICAgICB3YXJuKGBDb21wb25lbnQgXCIke25hbWV9XCIgaW4gcmVjb3JkIHdpdGggcGF0aCBcIiR7cmVjb3JkLnBhdGh9XCIgaXMgYSBmdW5jdGlvbiB0aGF0IGRvZXMgbm90IHJldHVybiBhIFByb21pc2UuIElmIHlvdSB3ZXJlIHBhc3NpbmcgYSBmdW5jdGlvbmFsIGNvbXBvbmVudCwgbWFrZSBzdXJlIHRvIGFkZCBhIFwiZGlzcGxheU5hbWVcIiB0byB0aGUgY29tcG9uZW50LiBUaGlzIHdpbGwgYnJlYWsgaW4gcHJvZHVjdGlvbiBpZiBub3QgZml4ZWQuYCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbXBvbmVudFByb21pc2UgPSBQcm9taXNlLnJlc29sdmUoY29tcG9uZW50UHJvbWlzZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGd1YXJkcy5wdXNoKCgpID0+IGNvbXBvbmVudFByb21pc2UudGhlbihyZXNvbHZlZCA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghcmVzb2x2ZWQpXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IEVycm9yKGBDb3VsZG4ndCByZXNvbHZlIGNvbXBvbmVudCBcIiR7bmFtZX1cIiBhdCBcIiR7cmVjb3JkLnBhdGh9XCJgKSk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlc29sdmVkQ29tcG9uZW50ID0gaXNFU01vZHVsZShyZXNvbHZlZClcbiAgICAgICAgICAgICAgICAgICAgICAgID8gcmVzb2x2ZWQuZGVmYXVsdFxuICAgICAgICAgICAgICAgICAgICAgICAgOiByZXNvbHZlZDtcbiAgICAgICAgICAgICAgICAgICAgLy8gcmVwbGFjZSB0aGUgZnVuY3Rpb24gd2l0aCB0aGUgcmVzb2x2ZWQgY29tcG9uZW50XG4gICAgICAgICAgICAgICAgICAgIC8vIGNhbm5vdCBiZSBudWxsIG9yIHVuZGVmaW5lZCBiZWNhdXNlIHdlIHdlbnQgaW50byB0aGUgZm9yIGxvb3BcbiAgICAgICAgICAgICAgICAgICAgcmVjb3JkLmNvbXBvbmVudHNbbmFtZV0gPSByZXNvbHZlZENvbXBvbmVudDtcbiAgICAgICAgICAgICAgICAgICAgLy8gX192Y2NPcHRzIGlzIGFkZGVkIGJ5IHZ1ZS1jbGFzcy1jb21wb25lbnQgYW5kIGNvbnRhaW4gdGhlIHJlZ3VsYXIgb3B0aW9uc1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBvcHRpb25zID0gcmVzb2x2ZWRDb21wb25lbnQuX192Y2NPcHRzIHx8IHJlc29sdmVkQ29tcG9uZW50O1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBndWFyZCA9IG9wdGlvbnNbZ3VhcmRUeXBlXTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChndWFyZCAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgZ3VhcmRUb1Byb21pc2VGbihndWFyZCwgdG8sIGZyb20sIHJlY29yZCwgbmFtZSwgcnVuV2l0aENvbnRleHQpKCkpO1xuICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZ3VhcmRzO1xufVxuLyoqXG4gKiBBbGxvd3MgZGlmZmVyZW50aWF0aW5nIGxhenkgY29tcG9uZW50cyBmcm9tIGZ1bmN0aW9uYWwgY29tcG9uZW50cyBhbmQgdnVlLWNsYXNzLWNvbXBvbmVudFxuICogQGludGVybmFsXG4gKlxuICogQHBhcmFtIGNvbXBvbmVudFxuICovXG5mdW5jdGlvbiBpc1JvdXRlQ29tcG9uZW50KGNvbXBvbmVudCkge1xuICAgIHJldHVybiAodHlwZW9mIGNvbXBvbmVudCA9PT0gJ29iamVjdCcgfHxcbiAgICAgICAgJ2Rpc3BsYXlOYW1lJyBpbiBjb21wb25lbnQgfHxcbiAgICAgICAgJ3Byb3BzJyBpbiBjb21wb25lbnQgfHxcbiAgICAgICAgJ19fdmNjT3B0cycgaW4gY29tcG9uZW50KTtcbn1cbi8qKlxuICogRW5zdXJlcyBhIHJvdXRlIGlzIGxvYWRlZCwgc28gaXQgY2FuIGJlIHBhc3NlZCBhcyBvIHByb3AgdG8gYDxSb3V0ZXJWaWV3PmAuXG4gKlxuICogQHBhcmFtIHJvdXRlIC0gcmVzb2x2ZWQgcm91dGUgdG8gbG9hZFxuICovXG5mdW5jdGlvbiBsb2FkUm91dGVMb2NhdGlvbihyb3V0ZSkge1xuICAgIHJldHVybiByb3V0ZS5tYXRjaGVkLmV2ZXJ5KHJlY29yZCA9PiByZWNvcmQucmVkaXJlY3QpXG4gICAgICAgID8gUHJvbWlzZS5yZWplY3QobmV3IEVycm9yKCdDYW5ub3QgbG9hZCBhIHJvdXRlIHRoYXQgcmVkaXJlY3RzLicpKVxuICAgICAgICA6IFByb21pc2UuYWxsKHJvdXRlLm1hdGNoZWQubWFwKHJlY29yZCA9PiByZWNvcmQuY29tcG9uZW50cyAmJlxuICAgICAgICAgICAgUHJvbWlzZS5hbGwoT2JqZWN0LmtleXMocmVjb3JkLmNvbXBvbmVudHMpLnJlZHVjZSgocHJvbWlzZXMsIG5hbWUpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCByYXdDb21wb25lbnQgPSByZWNvcmQuY29tcG9uZW50c1tuYW1lXTtcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHJhd0NvbXBvbmVudCA9PT0gJ2Z1bmN0aW9uJyAmJlxuICAgICAgICAgICAgICAgICAgICAhKCdkaXNwbGF5TmFtZScgaW4gcmF3Q29tcG9uZW50KSkge1xuICAgICAgICAgICAgICAgICAgICBwcm9taXNlcy5wdXNoKHJhd0NvbXBvbmVudCgpLnRoZW4ocmVzb2x2ZWQgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFyZXNvbHZlZClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IEVycm9yKGBDb3VsZG4ndCByZXNvbHZlIGNvbXBvbmVudCBcIiR7bmFtZX1cIiBhdCBcIiR7cmVjb3JkLnBhdGh9XCIuIEVuc3VyZSB5b3UgcGFzc2VkIGEgZnVuY3Rpb24gdGhhdCByZXR1cm5zIGEgcHJvbWlzZS5gKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCByZXNvbHZlZENvbXBvbmVudCA9IGlzRVNNb2R1bGUocmVzb2x2ZWQpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPyByZXNvbHZlZC5kZWZhdWx0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgOiByZXNvbHZlZDtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHJlcGxhY2UgdGhlIGZ1bmN0aW9uIHdpdGggdGhlIHJlc29sdmVkIGNvbXBvbmVudFxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gY2Fubm90IGJlIG51bGwgb3IgdW5kZWZpbmVkIGJlY2F1c2Ugd2Ugd2VudCBpbnRvIHRoZSBmb3IgbG9vcFxuICAgICAgICAgICAgICAgICAgICAgICAgcmVjb3JkLmNvbXBvbmVudHNbbmFtZV0gPSByZXNvbHZlZENvbXBvbmVudDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gcHJvbWlzZXM7XG4gICAgICAgICAgICB9LCBbXSkpKSkudGhlbigoKSA9PiByb3V0ZSk7XG59XG5cbi8vIFRPRE86IHdlIGNvdWxkIGFsbG93IGN1cnJlbnRSb3V0ZSBhcyBhIHByb3AgdG8gZXhwb3NlIGBpc0FjdGl2ZWAgYW5kXG4vLyBgaXNFeGFjdEFjdGl2ZWAgYmVoYXZpb3Igc2hvdWxkIGdvIHRocm91Z2ggYW4gUkZDXG5mdW5jdGlvbiB1c2VMaW5rKHByb3BzKSB7XG4gICAgY29uc3Qgcm91dGVyID0gaW5qZWN0KHJvdXRlcktleSk7XG4gICAgY29uc3QgY3VycmVudFJvdXRlID0gaW5qZWN0KHJvdXRlTG9jYXRpb25LZXkpO1xuICAgIGNvbnN0IHJvdXRlID0gY29tcHV0ZWQoKCkgPT4gcm91dGVyLnJlc29sdmUodW5yZWYocHJvcHMudG8pKSk7XG4gICAgY29uc3QgYWN0aXZlUmVjb3JkSW5kZXggPSBjb21wdXRlZCgoKSA9PiB7XG4gICAgICAgIGNvbnN0IHsgbWF0Y2hlZCB9ID0gcm91dGUudmFsdWU7XG4gICAgICAgIGNvbnN0IHsgbGVuZ3RoIH0gPSBtYXRjaGVkO1xuICAgICAgICBjb25zdCByb3V0ZU1hdGNoZWQgPSBtYXRjaGVkW2xlbmd0aCAtIDFdO1xuICAgICAgICBjb25zdCBjdXJyZW50TWF0Y2hlZCA9IGN1cnJlbnRSb3V0ZS5tYXRjaGVkO1xuICAgICAgICBpZiAoIXJvdXRlTWF0Y2hlZCB8fCAhY3VycmVudE1hdGNoZWQubGVuZ3RoKVxuICAgICAgICAgICAgcmV0dXJuIC0xO1xuICAgICAgICBjb25zdCBpbmRleCA9IGN1cnJlbnRNYXRjaGVkLmZpbmRJbmRleChpc1NhbWVSb3V0ZVJlY29yZC5iaW5kKG51bGwsIHJvdXRlTWF0Y2hlZCkpO1xuICAgICAgICBpZiAoaW5kZXggPiAtMSlcbiAgICAgICAgICAgIHJldHVybiBpbmRleDtcbiAgICAgICAgLy8gcG9zc2libGUgcGFyZW50IHJlY29yZFxuICAgICAgICBjb25zdCBwYXJlbnRSZWNvcmRQYXRoID0gZ2V0T3JpZ2luYWxQYXRoKG1hdGNoZWRbbGVuZ3RoIC0gMl0pO1xuICAgICAgICByZXR1cm4gKFxuICAgICAgICAvLyB3ZSBhcmUgZGVhbGluZyB3aXRoIG5lc3RlZCByb3V0ZXNcbiAgICAgICAgbGVuZ3RoID4gMSAmJlxuICAgICAgICAgICAgLy8gaWYgdGhlIHBhcmVudCBhbmQgbWF0Y2hlZCByb3V0ZSBoYXZlIHRoZSBzYW1lIHBhdGgsIHRoaXMgbGluayBpc1xuICAgICAgICAgICAgLy8gcmVmZXJyaW5nIHRvIHRoZSBlbXB0eSBjaGlsZC4gT3Igd2UgY3VycmVudGx5IGFyZSBvbiBhIGRpZmZlcmVudFxuICAgICAgICAgICAgLy8gY2hpbGQgb2YgdGhlIHNhbWUgcGFyZW50XG4gICAgICAgICAgICBnZXRPcmlnaW5hbFBhdGgocm91dGVNYXRjaGVkKSA9PT0gcGFyZW50UmVjb3JkUGF0aCAmJlxuICAgICAgICAgICAgLy8gYXZvaWQgY29tcGFyaW5nIHRoZSBjaGlsZCB3aXRoIGl0cyBwYXJlbnRcbiAgICAgICAgICAgIGN1cnJlbnRNYXRjaGVkW2N1cnJlbnRNYXRjaGVkLmxlbmd0aCAtIDFdLnBhdGggIT09IHBhcmVudFJlY29yZFBhdGhcbiAgICAgICAgICAgID8gY3VycmVudE1hdGNoZWQuZmluZEluZGV4KGlzU2FtZVJvdXRlUmVjb3JkLmJpbmQobnVsbCwgbWF0Y2hlZFtsZW5ndGggLSAyXSkpXG4gICAgICAgICAgICA6IGluZGV4KTtcbiAgICB9KTtcbiAgICBjb25zdCBpc0FjdGl2ZSA9IGNvbXB1dGVkKCgpID0+IGFjdGl2ZVJlY29yZEluZGV4LnZhbHVlID4gLTEgJiZcbiAgICAgICAgaW5jbHVkZXNQYXJhbXMoY3VycmVudFJvdXRlLnBhcmFtcywgcm91dGUudmFsdWUucGFyYW1zKSk7XG4gICAgY29uc3QgaXNFeGFjdEFjdGl2ZSA9IGNvbXB1dGVkKCgpID0+IGFjdGl2ZVJlY29yZEluZGV4LnZhbHVlID4gLTEgJiZcbiAgICAgICAgYWN0aXZlUmVjb3JkSW5kZXgudmFsdWUgPT09IGN1cnJlbnRSb3V0ZS5tYXRjaGVkLmxlbmd0aCAtIDEgJiZcbiAgICAgICAgaXNTYW1lUm91dGVMb2NhdGlvblBhcmFtcyhjdXJyZW50Um91dGUucGFyYW1zLCByb3V0ZS52YWx1ZS5wYXJhbXMpKTtcbiAgICBmdW5jdGlvbiBuYXZpZ2F0ZShlID0ge30pIHtcbiAgICAgICAgaWYgKGd1YXJkRXZlbnQoZSkpIHtcbiAgICAgICAgICAgIHJldHVybiByb3V0ZXJbdW5yZWYocHJvcHMucmVwbGFjZSkgPyAncmVwbGFjZScgOiAncHVzaCddKHVucmVmKHByb3BzLnRvKVxuICAgICAgICAgICAgLy8gYXZvaWQgdW5jYXVnaHQgZXJyb3JzIGFyZSB0aGV5IGFyZSBsb2dnZWQgYW55d2F5XG4gICAgICAgICAgICApLmNhdGNoKG5vb3ApO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9XG4gICAgLy8gZGV2dG9vbHMgb25seVxuICAgIGlmICgoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHx8IF9fVlVFX1BST0RfREVWVE9PTFNfXykgJiYgaXNCcm93c2VyKSB7XG4gICAgICAgIGNvbnN0IGluc3RhbmNlID0gZ2V0Q3VycmVudEluc3RhbmNlKCk7XG4gICAgICAgIGlmIChpbnN0YW5jZSkge1xuICAgICAgICAgICAgY29uc3QgbGlua0NvbnRleHREZXZ0b29scyA9IHtcbiAgICAgICAgICAgICAgICByb3V0ZTogcm91dGUudmFsdWUsXG4gICAgICAgICAgICAgICAgaXNBY3RpdmU6IGlzQWN0aXZlLnZhbHVlLFxuICAgICAgICAgICAgICAgIGlzRXhhY3RBY3RpdmU6IGlzRXhhY3RBY3RpdmUudmFsdWUsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvcjogdGhpcyBpcyBpbnRlcm5hbFxuICAgICAgICAgICAgaW5zdGFuY2UuX192cmxfZGV2dG9vbHMgPSBpbnN0YW5jZS5fX3ZybF9kZXZ0b29scyB8fCBbXTtcbiAgICAgICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3I6IHRoaXMgaXMgaW50ZXJuYWxcbiAgICAgICAgICAgIGluc3RhbmNlLl9fdnJsX2RldnRvb2xzLnB1c2gobGlua0NvbnRleHREZXZ0b29scyk7XG4gICAgICAgICAgICB3YXRjaEVmZmVjdCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgbGlua0NvbnRleHREZXZ0b29scy5yb3V0ZSA9IHJvdXRlLnZhbHVlO1xuICAgICAgICAgICAgICAgIGxpbmtDb250ZXh0RGV2dG9vbHMuaXNBY3RpdmUgPSBpc0FjdGl2ZS52YWx1ZTtcbiAgICAgICAgICAgICAgICBsaW5rQ29udGV4dERldnRvb2xzLmlzRXhhY3RBY3RpdmUgPSBpc0V4YWN0QWN0aXZlLnZhbHVlO1xuICAgICAgICAgICAgfSwgeyBmbHVzaDogJ3Bvc3QnIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIE5PVEU6IHVwZGF0ZSB7QGxpbmsgX1JvdXRlckxpbmtJfSdzIGAkc2xvdHNgIHR5cGUgd2hlbiB1cGRhdGluZyB0aGlzXG4gICAgICovXG4gICAgcmV0dXJuIHtcbiAgICAgICAgcm91dGUsXG4gICAgICAgIGhyZWY6IGNvbXB1dGVkKCgpID0+IHJvdXRlLnZhbHVlLmhyZWYpLFxuICAgICAgICBpc0FjdGl2ZSxcbiAgICAgICAgaXNFeGFjdEFjdGl2ZSxcbiAgICAgICAgbmF2aWdhdGUsXG4gICAgfTtcbn1cbmNvbnN0IFJvdXRlckxpbmtJbXBsID0gLyojX19QVVJFX18qLyBkZWZpbmVDb21wb25lbnQoe1xuICAgIG5hbWU6ICdSb3V0ZXJMaW5rJyxcbiAgICBjb21wYXRDb25maWc6IHsgTU9ERTogMyB9LFxuICAgIHByb3BzOiB7XG4gICAgICAgIHRvOiB7XG4gICAgICAgICAgICB0eXBlOiBbU3RyaW5nLCBPYmplY3RdLFxuICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWUsXG4gICAgICAgIH0sXG4gICAgICAgIHJlcGxhY2U6IEJvb2xlYW4sXG4gICAgICAgIGFjdGl2ZUNsYXNzOiBTdHJpbmcsXG4gICAgICAgIC8vIGluYWN0aXZlQ2xhc3M6IFN0cmluZyxcbiAgICAgICAgZXhhY3RBY3RpdmVDbGFzczogU3RyaW5nLFxuICAgICAgICBjdXN0b206IEJvb2xlYW4sXG4gICAgICAgIGFyaWFDdXJyZW50VmFsdWU6IHtcbiAgICAgICAgICAgIHR5cGU6IFN0cmluZyxcbiAgICAgICAgICAgIGRlZmF1bHQ6ICdwYWdlJyxcbiAgICAgICAgfSxcbiAgICB9LFxuICAgIHVzZUxpbmssXG4gICAgc2V0dXAocHJvcHMsIHsgc2xvdHMgfSkge1xuICAgICAgICBjb25zdCBsaW5rID0gcmVhY3RpdmUodXNlTGluayhwcm9wcykpO1xuICAgICAgICBjb25zdCB7IG9wdGlvbnMgfSA9IGluamVjdChyb3V0ZXJLZXkpO1xuICAgICAgICBjb25zdCBlbENsYXNzID0gY29tcHV0ZWQoKCkgPT4gKHtcbiAgICAgICAgICAgIFtnZXRMaW5rQ2xhc3MocHJvcHMuYWN0aXZlQ2xhc3MsIG9wdGlvbnMubGlua0FjdGl2ZUNsYXNzLCAncm91dGVyLWxpbmstYWN0aXZlJyldOiBsaW5rLmlzQWN0aXZlLFxuICAgICAgICAgICAgLy8gW2dldExpbmtDbGFzcyhcbiAgICAgICAgICAgIC8vICAgcHJvcHMuaW5hY3RpdmVDbGFzcyxcbiAgICAgICAgICAgIC8vICAgb3B0aW9ucy5saW5rSW5hY3RpdmVDbGFzcyxcbiAgICAgICAgICAgIC8vICAgJ3JvdXRlci1saW5rLWluYWN0aXZlJ1xuICAgICAgICAgICAgLy8gKV06ICFsaW5rLmlzRXhhY3RBY3RpdmUsXG4gICAgICAgICAgICBbZ2V0TGlua0NsYXNzKHByb3BzLmV4YWN0QWN0aXZlQ2xhc3MsIG9wdGlvbnMubGlua0V4YWN0QWN0aXZlQ2xhc3MsICdyb3V0ZXItbGluay1leGFjdC1hY3RpdmUnKV06IGxpbmsuaXNFeGFjdEFjdGl2ZSxcbiAgICAgICAgfSkpO1xuICAgICAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgY2hpbGRyZW4gPSBzbG90cy5kZWZhdWx0ICYmIHNsb3RzLmRlZmF1bHQobGluayk7XG4gICAgICAgICAgICByZXR1cm4gcHJvcHMuY3VzdG9tXG4gICAgICAgICAgICAgICAgPyBjaGlsZHJlblxuICAgICAgICAgICAgICAgIDogaCgnYScsIHtcbiAgICAgICAgICAgICAgICAgICAgJ2FyaWEtY3VycmVudCc6IGxpbmsuaXNFeGFjdEFjdGl2ZVxuICAgICAgICAgICAgICAgICAgICAgICAgPyBwcm9wcy5hcmlhQ3VycmVudFZhbHVlXG4gICAgICAgICAgICAgICAgICAgICAgICA6IG51bGwsXG4gICAgICAgICAgICAgICAgICAgIGhyZWY6IGxpbmsuaHJlZixcbiAgICAgICAgICAgICAgICAgICAgLy8gdGhpcyB3b3VsZCBvdmVycmlkZSB1c2VyIGFkZGVkIGF0dHJzIGJ1dCBWdWUgd2lsbCBzdGlsbCBhZGRcbiAgICAgICAgICAgICAgICAgICAgLy8gdGhlIGxpc3RlbmVyLCBzbyB3ZSBlbmQgdXAgdHJpZ2dlcmluZyBib3RoXG4gICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s6IGxpbmsubmF2aWdhdGUsXG4gICAgICAgICAgICAgICAgICAgIGNsYXNzOiBlbENsYXNzLnZhbHVlLFxuICAgICAgICAgICAgICAgIH0sIGNoaWxkcmVuKTtcbiAgICAgICAgfTtcbiAgICB9LFxufSk7XG4vLyBleHBvcnQgdGhlIHB1YmxpYyB0eXBlIGZvciBoL3RzeCBpbmZlcmVuY2Vcbi8vIGFsc28gdG8gYXZvaWQgaW5saW5lIGltcG9ydCgpIGluIGdlbmVyYXRlZCBkLnRzIGZpbGVzXG4vKipcbiAqIENvbXBvbmVudCB0byByZW5kZXIgYSBsaW5rIHRoYXQgdHJpZ2dlcnMgYSBuYXZpZ2F0aW9uIG9uIGNsaWNrLlxuICovXG5jb25zdCBSb3V0ZXJMaW5rID0gUm91dGVyTGlua0ltcGw7XG5mdW5jdGlvbiBndWFyZEV2ZW50KGUpIHtcbiAgICAvLyBkb24ndCByZWRpcmVjdCB3aXRoIGNvbnRyb2wga2V5c1xuICAgIGlmIChlLm1ldGFLZXkgfHwgZS5hbHRLZXkgfHwgZS5jdHJsS2V5IHx8IGUuc2hpZnRLZXkpXG4gICAgICAgIHJldHVybjtcbiAgICAvLyBkb24ndCByZWRpcmVjdCB3aGVuIHByZXZlbnREZWZhdWx0IGNhbGxlZFxuICAgIGlmIChlLmRlZmF1bHRQcmV2ZW50ZWQpXG4gICAgICAgIHJldHVybjtcbiAgICAvLyBkb24ndCByZWRpcmVjdCBvbiByaWdodCBjbGlja1xuICAgIGlmIChlLmJ1dHRvbiAhPT0gdW5kZWZpbmVkICYmIGUuYnV0dG9uICE9PSAwKVxuICAgICAgICByZXR1cm47XG4gICAgLy8gZG9uJ3QgcmVkaXJlY3QgaWYgYHRhcmdldD1cIl9ibGFua1wiYFxuICAgIC8vIEB0cy1leHBlY3QtZXJyb3IgZ2V0QXR0cmlidXRlIGRvZXMgZXhpc3RcbiAgICBpZiAoZS5jdXJyZW50VGFyZ2V0ICYmIGUuY3VycmVudFRhcmdldC5nZXRBdHRyaWJ1dGUpIHtcbiAgICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvciBnZXRBdHRyaWJ1dGUgZXhpc3RzXG4gICAgICAgIGNvbnN0IHRhcmdldCA9IGUuY3VycmVudFRhcmdldC5nZXRBdHRyaWJ1dGUoJ3RhcmdldCcpO1xuICAgICAgICBpZiAoL1xcYl9ibGFua1xcYi9pLnRlc3QodGFyZ2V0KSlcbiAgICAgICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgLy8gdGhpcyBtYXkgYmUgYSBXZWV4IGV2ZW50IHdoaWNoIGRvZXNuJ3QgaGF2ZSB0aGlzIG1ldGhvZFxuICAgIGlmIChlLnByZXZlbnREZWZhdWx0KVxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgcmV0dXJuIHRydWU7XG59XG5mdW5jdGlvbiBpbmNsdWRlc1BhcmFtcyhvdXRlciwgaW5uZXIpIHtcbiAgICBmb3IgKGNvbnN0IGtleSBpbiBpbm5lcikge1xuICAgICAgICBjb25zdCBpbm5lclZhbHVlID0gaW5uZXJba2V5XTtcbiAgICAgICAgY29uc3Qgb3V0ZXJWYWx1ZSA9IG91dGVyW2tleV07XG4gICAgICAgIGlmICh0eXBlb2YgaW5uZXJWYWx1ZSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgIGlmIChpbm5lclZhbHVlICE9PSBvdXRlclZhbHVlKVxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGlmICghaXNBcnJheShvdXRlclZhbHVlKSB8fFxuICAgICAgICAgICAgICAgIG91dGVyVmFsdWUubGVuZ3RoICE9PSBpbm5lclZhbHVlLmxlbmd0aCB8fFxuICAgICAgICAgICAgICAgIGlubmVyVmFsdWUuc29tZSgodmFsdWUsIGkpID0+IHZhbHVlICE9PSBvdXRlclZhbHVlW2ldKSlcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHRydWU7XG59XG4vKipcbiAqIEdldCB0aGUgb3JpZ2luYWwgcGF0aCB2YWx1ZSBvZiBhIHJlY29yZCBieSBmb2xsb3dpbmcgaXRzIGFsaWFzT2ZcbiAqIEBwYXJhbSByZWNvcmRcbiAqL1xuZnVuY3Rpb24gZ2V0T3JpZ2luYWxQYXRoKHJlY29yZCkge1xuICAgIHJldHVybiByZWNvcmQgPyAocmVjb3JkLmFsaWFzT2YgPyByZWNvcmQuYWxpYXNPZi5wYXRoIDogcmVjb3JkLnBhdGgpIDogJyc7XG59XG4vKipcbiAqIFV0aWxpdHkgY2xhc3MgdG8gZ2V0IHRoZSBhY3RpdmUgY2xhc3MgYmFzZWQgb24gZGVmYXVsdHMuXG4gKiBAcGFyYW0gcHJvcENsYXNzXG4gKiBAcGFyYW0gZ2xvYmFsQ2xhc3NcbiAqIEBwYXJhbSBkZWZhdWx0Q2xhc3NcbiAqL1xuY29uc3QgZ2V0TGlua0NsYXNzID0gKHByb3BDbGFzcywgZ2xvYmFsQ2xhc3MsIGRlZmF1bHRDbGFzcykgPT4gcHJvcENsYXNzICE9IG51bGxcbiAgICA/IHByb3BDbGFzc1xuICAgIDogZ2xvYmFsQ2xhc3MgIT0gbnVsbFxuICAgICAgICA/IGdsb2JhbENsYXNzXG4gICAgICAgIDogZGVmYXVsdENsYXNzO1xuXG5jb25zdCBSb3V0ZXJWaWV3SW1wbCA9IC8qI19fUFVSRV9fKi8gZGVmaW5lQ29tcG9uZW50KHtcbiAgICBuYW1lOiAnUm91dGVyVmlldycsXG4gICAgLy8gIzY3NCB3ZSBtYW51YWxseSBpbmhlcml0IHRoZW1cbiAgICBpbmhlcml0QXR0cnM6IGZhbHNlLFxuICAgIHByb3BzOiB7XG4gICAgICAgIG5hbWU6IHtcbiAgICAgICAgICAgIHR5cGU6IFN0cmluZyxcbiAgICAgICAgICAgIGRlZmF1bHQ6ICdkZWZhdWx0JyxcbiAgICAgICAgfSxcbiAgICAgICAgcm91dGU6IE9iamVjdCxcbiAgICB9LFxuICAgIC8vIEJldHRlciBjb21wYXQgZm9yIEB2dWUvY29tcGF0IHVzZXJzXG4gICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL3Z1ZWpzL3JvdXRlci9pc3N1ZXMvMTMxNVxuICAgIGNvbXBhdENvbmZpZzogeyBNT0RFOiAzIH0sXG4gICAgc2V0dXAocHJvcHMsIHsgYXR0cnMsIHNsb3RzIH0pIHtcbiAgICAgICAgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmIHdhcm5EZXByZWNhdGVkVXNhZ2UoKTtcbiAgICAgICAgY29uc3QgaW5qZWN0ZWRSb3V0ZSA9IGluamVjdChyb3V0ZXJWaWV3TG9jYXRpb25LZXkpO1xuICAgICAgICBjb25zdCByb3V0ZVRvRGlzcGxheSA9IGNvbXB1dGVkKCgpID0+IHByb3BzLnJvdXRlIHx8IGluamVjdGVkUm91dGUudmFsdWUpO1xuICAgICAgICBjb25zdCBpbmplY3RlZERlcHRoID0gaW5qZWN0KHZpZXdEZXB0aEtleSwgMCk7XG4gICAgICAgIC8vIFRoZSBkZXB0aCBjaGFuZ2VzIGJhc2VkIG9uIGVtcHR5IGNvbXBvbmVudHMgb3B0aW9uLCB3aGljaCBhbGxvd3MgcGFzc3Rocm91Z2ggcm91dGVzIGUuZy4gcm91dGVzIHdpdGggY2hpbGRyZW5cbiAgICAgICAgLy8gdGhhdCBhcmUgdXNlZCB0byByZXVzZSB0aGUgYHBhdGhgIHByb3BlcnR5XG4gICAgICAgIGNvbnN0IGRlcHRoID0gY29tcHV0ZWQoKCkgPT4ge1xuICAgICAgICAgICAgbGV0IGluaXRpYWxEZXB0aCA9IHVucmVmKGluamVjdGVkRGVwdGgpO1xuICAgICAgICAgICAgY29uc3QgeyBtYXRjaGVkIH0gPSByb3V0ZVRvRGlzcGxheS52YWx1ZTtcbiAgICAgICAgICAgIGxldCBtYXRjaGVkUm91dGU7XG4gICAgICAgICAgICB3aGlsZSAoKG1hdGNoZWRSb3V0ZSA9IG1hdGNoZWRbaW5pdGlhbERlcHRoXSkgJiZcbiAgICAgICAgICAgICAgICAhbWF0Y2hlZFJvdXRlLmNvbXBvbmVudHMpIHtcbiAgICAgICAgICAgICAgICBpbml0aWFsRGVwdGgrKztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBpbml0aWFsRGVwdGg7XG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCBtYXRjaGVkUm91dGVSZWYgPSBjb21wdXRlZCgoKSA9PiByb3V0ZVRvRGlzcGxheS52YWx1ZS5tYXRjaGVkW2RlcHRoLnZhbHVlXSk7XG4gICAgICAgIHByb3ZpZGUodmlld0RlcHRoS2V5LCBjb21wdXRlZCgoKSA9PiBkZXB0aC52YWx1ZSArIDEpKTtcbiAgICAgICAgcHJvdmlkZShtYXRjaGVkUm91dGVLZXksIG1hdGNoZWRSb3V0ZVJlZik7XG4gICAgICAgIHByb3ZpZGUocm91dGVyVmlld0xvY2F0aW9uS2V5LCByb3V0ZVRvRGlzcGxheSk7XG4gICAgICAgIGNvbnN0IHZpZXdSZWYgPSByZWYoKTtcbiAgICAgICAgLy8gd2F0Y2ggYXQgdGhlIHNhbWUgdGltZSB0aGUgY29tcG9uZW50IGluc3RhbmNlLCB0aGUgcm91dGUgcmVjb3JkIHdlIGFyZVxuICAgICAgICAvLyByZW5kZXJpbmcsIGFuZCB0aGUgbmFtZVxuICAgICAgICB3YXRjaCgoKSA9PiBbdmlld1JlZi52YWx1ZSwgbWF0Y2hlZFJvdXRlUmVmLnZhbHVlLCBwcm9wcy5uYW1lXSwgKFtpbnN0YW5jZSwgdG8sIG5hbWVdLCBbb2xkSW5zdGFuY2UsIGZyb20sIG9sZE5hbWVdKSA9PiB7XG4gICAgICAgICAgICAvLyBjb3B5IHJldXNlZCBpbnN0YW5jZXNcbiAgICAgICAgICAgIGlmICh0bykge1xuICAgICAgICAgICAgICAgIC8vIHRoaXMgd2lsbCB1cGRhdGUgdGhlIGluc3RhbmNlIGZvciBuZXcgaW5zdGFuY2VzIGFzIHdlbGwgYXMgcmV1c2VkXG4gICAgICAgICAgICAgICAgLy8gaW5zdGFuY2VzIHdoZW4gbmF2aWdhdGluZyB0byBhIG5ldyByb3V0ZVxuICAgICAgICAgICAgICAgIHRvLmluc3RhbmNlc1tuYW1lXSA9IGluc3RhbmNlO1xuICAgICAgICAgICAgICAgIC8vIHRoZSBjb21wb25lbnQgaW5zdGFuY2UgaXMgcmV1c2VkIGZvciBhIGRpZmZlcmVudCByb3V0ZSBvciBuYW1lLCBzb1xuICAgICAgICAgICAgICAgIC8vIHdlIGNvcHkgYW55IHNhdmVkIHVwZGF0ZSBvciBsZWF2ZSBndWFyZHMuIFdpdGggYXN5bmMgc2V0dXAsIHRoZVxuICAgICAgICAgICAgICAgIC8vIG1vdW50aW5nIGNvbXBvbmVudCB3aWxsIG1vdW50IGJlZm9yZSB0aGUgbWF0Y2hlZFJvdXRlIGNoYW5nZXMsXG4gICAgICAgICAgICAgICAgLy8gbWFraW5nIGluc3RhbmNlID09PSBvbGRJbnN0YW5jZSwgc28gd2UgY2hlY2sgaWYgZ3VhcmRzIGhhdmUgYmVlblxuICAgICAgICAgICAgICAgIC8vIGFkZGVkIGJlZm9yZS4gVGhpcyB3b3JrcyBiZWNhdXNlIHdlIHJlbW92ZSBndWFyZHMgd2hlblxuICAgICAgICAgICAgICAgIC8vIHVubW91bnRpbmcvZGVhY3RpdmF0aW5nIGNvbXBvbmVudHNcbiAgICAgICAgICAgICAgICBpZiAoZnJvbSAmJiBmcm9tICE9PSB0byAmJiBpbnN0YW5jZSAmJiBpbnN0YW5jZSA9PT0gb2xkSW5zdGFuY2UpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCF0by5sZWF2ZUd1YXJkcy5zaXplKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0by5sZWF2ZUd1YXJkcyA9IGZyb20ubGVhdmVHdWFyZHM7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKCF0by51cGRhdGVHdWFyZHMuc2l6ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdG8udXBkYXRlR3VhcmRzID0gZnJvbS51cGRhdGVHdWFyZHM7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyB0cmlnZ2VyIGJlZm9yZVJvdXRlRW50ZXIgbmV4dCBjYWxsYmFja3NcbiAgICAgICAgICAgIGlmIChpbnN0YW5jZSAmJlxuICAgICAgICAgICAgICAgIHRvICYmXG4gICAgICAgICAgICAgICAgLy8gaWYgdGhlcmUgaXMgbm8gaW5zdGFuY2UgYnV0IHRvIGFuZCBmcm9tIGFyZSB0aGUgc2FtZSB0aGlzIG1pZ2h0IGJlXG4gICAgICAgICAgICAgICAgLy8gdGhlIGZpcnN0IHZpc2l0XG4gICAgICAgICAgICAgICAgKCFmcm9tIHx8ICFpc1NhbWVSb3V0ZVJlY29yZCh0bywgZnJvbSkgfHwgIW9sZEluc3RhbmNlKSkge1xuICAgICAgICAgICAgICAgICh0by5lbnRlckNhbGxiYWNrc1tuYW1lXSB8fCBbXSkuZm9yRWFjaChjYWxsYmFjayA9PiBjYWxsYmFjayhpbnN0YW5jZSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LCB7IGZsdXNoOiAncG9zdCcgfSk7XG4gICAgICAgIHJldHVybiAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCByb3V0ZSA9IHJvdXRlVG9EaXNwbGF5LnZhbHVlO1xuICAgICAgICAgICAgLy8gd2UgbmVlZCB0aGUgdmFsdWUgYXQgdGhlIHRpbWUgd2UgcmVuZGVyIGJlY2F1c2Ugd2hlbiB3ZSB1bm1vdW50LCB3ZVxuICAgICAgICAgICAgLy8gbmF2aWdhdGVkIHRvIGEgZGlmZmVyZW50IGxvY2F0aW9uIHNvIHRoZSB2YWx1ZSBpcyBkaWZmZXJlbnRcbiAgICAgICAgICAgIGNvbnN0IGN1cnJlbnROYW1lID0gcHJvcHMubmFtZTtcbiAgICAgICAgICAgIGNvbnN0IG1hdGNoZWRSb3V0ZSA9IG1hdGNoZWRSb3V0ZVJlZi52YWx1ZTtcbiAgICAgICAgICAgIGNvbnN0IFZpZXdDb21wb25lbnQgPSBtYXRjaGVkUm91dGUgJiYgbWF0Y2hlZFJvdXRlLmNvbXBvbmVudHNbY3VycmVudE5hbWVdO1xuICAgICAgICAgICAgaWYgKCFWaWV3Q29tcG9uZW50KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5vcm1hbGl6ZVNsb3Qoc2xvdHMuZGVmYXVsdCwgeyBDb21wb25lbnQ6IFZpZXdDb21wb25lbnQsIHJvdXRlIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gcHJvcHMgZnJvbSByb3V0ZSBjb25maWd1cmF0aW9uXG4gICAgICAgICAgICBjb25zdCByb3V0ZVByb3BzT3B0aW9uID0gbWF0Y2hlZFJvdXRlLnByb3BzW2N1cnJlbnROYW1lXTtcbiAgICAgICAgICAgIGNvbnN0IHJvdXRlUHJvcHMgPSByb3V0ZVByb3BzT3B0aW9uXG4gICAgICAgICAgICAgICAgPyByb3V0ZVByb3BzT3B0aW9uID09PSB0cnVlXG4gICAgICAgICAgICAgICAgICAgID8gcm91dGUucGFyYW1zXG4gICAgICAgICAgICAgICAgICAgIDogdHlwZW9mIHJvdXRlUHJvcHNPcHRpb24gPT09ICdmdW5jdGlvbidcbiAgICAgICAgICAgICAgICAgICAgICAgID8gcm91dGVQcm9wc09wdGlvbihyb3V0ZSlcbiAgICAgICAgICAgICAgICAgICAgICAgIDogcm91dGVQcm9wc09wdGlvblxuICAgICAgICAgICAgICAgIDogbnVsbDtcbiAgICAgICAgICAgIGNvbnN0IG9uVm5vZGVVbm1vdW50ZWQgPSB2bm9kZSA9PiB7XG4gICAgICAgICAgICAgICAgLy8gcmVtb3ZlIHRoZSBpbnN0YW5jZSByZWZlcmVuY2UgdG8gcHJldmVudCBsZWFrXG4gICAgICAgICAgICAgICAgaWYgKHZub2RlLmNvbXBvbmVudC5pc1VubW91bnRlZCkge1xuICAgICAgICAgICAgICAgICAgICBtYXRjaGVkUm91dGUuaW5zdGFuY2VzW2N1cnJlbnROYW1lXSA9IG51bGw7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGNvbnN0IGNvbXBvbmVudCA9IGgoVmlld0NvbXBvbmVudCwgYXNzaWduKHt9LCByb3V0ZVByb3BzLCBhdHRycywge1xuICAgICAgICAgICAgICAgIG9uVm5vZGVVbm1vdW50ZWQsXG4gICAgICAgICAgICAgICAgcmVmOiB2aWV3UmVmLFxuICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgaWYgKCgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgfHwgX19WVUVfUFJPRF9ERVZUT09MU19fKSAmJlxuICAgICAgICAgICAgICAgIGlzQnJvd3NlciAmJlxuICAgICAgICAgICAgICAgIGNvbXBvbmVudC5yZWYpIHtcbiAgICAgICAgICAgICAgICAvLyBUT0RPOiBjYW4gZGlzcGxheSBpZiBpdCdzIGFuIGFsaWFzLCBpdHMgcHJvcHNcbiAgICAgICAgICAgICAgICBjb25zdCBpbmZvID0ge1xuICAgICAgICAgICAgICAgICAgICBkZXB0aDogZGVwdGgudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IG1hdGNoZWRSb3V0ZS5uYW1lLFxuICAgICAgICAgICAgICAgICAgICBwYXRoOiBtYXRjaGVkUm91dGUucGF0aCxcbiAgICAgICAgICAgICAgICAgICAgbWV0YTogbWF0Y2hlZFJvdXRlLm1ldGEsXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBjb25zdCBpbnRlcm5hbEluc3RhbmNlcyA9IGlzQXJyYXkoY29tcG9uZW50LnJlZilcbiAgICAgICAgICAgICAgICAgICAgPyBjb21wb25lbnQucmVmLm1hcChyID0+IHIuaSlcbiAgICAgICAgICAgICAgICAgICAgOiBbY29tcG9uZW50LnJlZi5pXTtcbiAgICAgICAgICAgICAgICBpbnRlcm5hbEluc3RhbmNlcy5mb3JFYWNoKGluc3RhbmNlID0+IHtcbiAgICAgICAgICAgICAgICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvclxuICAgICAgICAgICAgICAgICAgICBpbnN0YW5jZS5fX3Zydl9kZXZ0b29scyA9IGluZm87XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgLy8gcGFzcyB0aGUgdm5vZGUgdG8gdGhlIHNsb3QgYXMgYSBwcm9wLlxuICAgICAgICAgICAgLy8gaCBhbmQgPGNvbXBvbmVudCA6aXM9XCIuLi5cIj4gYm90aCBhY2NlcHQgdm5vZGVzXG4gICAgICAgICAgICBub3JtYWxpemVTbG90KHNsb3RzLmRlZmF1bHQsIHsgQ29tcG9uZW50OiBjb21wb25lbnQsIHJvdXRlIH0pIHx8XG4gICAgICAgICAgICAgICAgY29tcG9uZW50KTtcbiAgICAgICAgfTtcbiAgICB9LFxufSk7XG5mdW5jdGlvbiBub3JtYWxpemVTbG90KHNsb3QsIGRhdGEpIHtcbiAgICBpZiAoIXNsb3QpXG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIGNvbnN0IHNsb3RDb250ZW50ID0gc2xvdChkYXRhKTtcbiAgICByZXR1cm4gc2xvdENvbnRlbnQubGVuZ3RoID09PSAxID8gc2xvdENvbnRlbnRbMF0gOiBzbG90Q29udGVudDtcbn1cbi8vIGV4cG9ydCB0aGUgcHVibGljIHR5cGUgZm9yIGgvdHN4IGluZmVyZW5jZVxuLy8gYWxzbyB0byBhdm9pZCBpbmxpbmUgaW1wb3J0KCkgaW4gZ2VuZXJhdGVkIGQudHMgZmlsZXNcbi8qKlxuICogQ29tcG9uZW50IHRvIGRpc3BsYXkgdGhlIGN1cnJlbnQgcm91dGUgdGhlIHVzZXIgaXMgYXQuXG4gKi9cbmNvbnN0IFJvdXRlclZpZXcgPSBSb3V0ZXJWaWV3SW1wbDtcbi8vIHdhcm4gYWdhaW5zdCBkZXByZWNhdGVkIHVzYWdlIHdpdGggPHRyYW5zaXRpb24+ICYgPGtlZXAtYWxpdmU+XG4vLyBkdWUgdG8gZnVuY3Rpb25hbCBjb21wb25lbnQgYmVpbmcgbm8gbG9uZ2VyIGVhZ2VyIGluIFZ1ZSAzXG5mdW5jdGlvbiB3YXJuRGVwcmVjYXRlZFVzYWdlKCkge1xuICAgIGNvbnN0IGluc3RhbmNlID0gZ2V0Q3VycmVudEluc3RhbmNlKCk7XG4gICAgY29uc3QgcGFyZW50TmFtZSA9IGluc3RhbmNlLnBhcmVudCAmJiBpbnN0YW5jZS5wYXJlbnQudHlwZS5uYW1lO1xuICAgIGNvbnN0IHBhcmVudFN1YlRyZWVUeXBlID0gaW5zdGFuY2UucGFyZW50ICYmIGluc3RhbmNlLnBhcmVudC5zdWJUcmVlICYmIGluc3RhbmNlLnBhcmVudC5zdWJUcmVlLnR5cGU7XG4gICAgaWYgKHBhcmVudE5hbWUgJiZcbiAgICAgICAgKHBhcmVudE5hbWUgPT09ICdLZWVwQWxpdmUnIHx8IHBhcmVudE5hbWUuaW5jbHVkZXMoJ1RyYW5zaXRpb24nKSkgJiZcbiAgICAgICAgdHlwZW9mIHBhcmVudFN1YlRyZWVUeXBlID09PSAnb2JqZWN0JyAmJlxuICAgICAgICBwYXJlbnRTdWJUcmVlVHlwZS5uYW1lID09PSAnUm91dGVyVmlldycpIHtcbiAgICAgICAgY29uc3QgY29tcCA9IHBhcmVudE5hbWUgPT09ICdLZWVwQWxpdmUnID8gJ2tlZXAtYWxpdmUnIDogJ3RyYW5zaXRpb24nO1xuICAgICAgICB3YXJuKGA8cm91dGVyLXZpZXc+IGNhbiBubyBsb25nZXIgYmUgdXNlZCBkaXJlY3RseSBpbnNpZGUgPHRyYW5zaXRpb24+IG9yIDxrZWVwLWFsaXZlPi5cXG5gICtcbiAgICAgICAgICAgIGBVc2Ugc2xvdCBwcm9wcyBpbnN0ZWFkOlxcblxcbmAgK1xuICAgICAgICAgICAgYDxyb3V0ZXItdmlldyB2LXNsb3Q9XCJ7IENvbXBvbmVudCB9XCI+XFxuYCArXG4gICAgICAgICAgICBgICA8JHtjb21wfT5cXG5gICtcbiAgICAgICAgICAgIGAgICAgPGNvbXBvbmVudCA6aXM9XCJDb21wb25lbnRcIiAvPlxcbmAgK1xuICAgICAgICAgICAgYCAgPC8ke2NvbXB9PlxcbmAgK1xuICAgICAgICAgICAgYDwvcm91dGVyLXZpZXc+YCk7XG4gICAgfVxufVxuXG4vKipcbiAqIENvcGllcyBhIHJvdXRlIGxvY2F0aW9uIGFuZCByZW1vdmVzIGFueSBwcm9ibGVtYXRpYyBwcm9wZXJ0aWVzIHRoYXQgY2Fubm90IGJlIHNob3duIGluIGRldnRvb2xzIChlLmcuIFZ1ZSBpbnN0YW5jZXMpLlxuICpcbiAqIEBwYXJhbSByb3V0ZUxvY2F0aW9uIC0gcm91dGVMb2NhdGlvbiB0byBmb3JtYXRcbiAqIEBwYXJhbSB0b29sdGlwIC0gb3B0aW9uYWwgdG9vbHRpcFxuICogQHJldHVybnMgYSBjb3B5IG9mIHRoZSByb3V0ZUxvY2F0aW9uXG4gKi9cbmZ1bmN0aW9uIGZvcm1hdFJvdXRlTG9jYXRpb24ocm91dGVMb2NhdGlvbiwgdG9vbHRpcCkge1xuICAgIGNvbnN0IGNvcHkgPSBhc3NpZ24oe30sIHJvdXRlTG9jYXRpb24sIHtcbiAgICAgICAgLy8gcmVtb3ZlIHZhcmlhYmxlcyB0aGF0IGNhbiBjb250YWluIHZ1ZSBpbnN0YW5jZXNcbiAgICAgICAgbWF0Y2hlZDogcm91dGVMb2NhdGlvbi5tYXRjaGVkLm1hcChtYXRjaGVkID0+IG9taXQobWF0Y2hlZCwgWydpbnN0YW5jZXMnLCAnY2hpbGRyZW4nLCAnYWxpYXNPZiddKSksXG4gICAgfSk7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgX2N1c3RvbToge1xuICAgICAgICAgICAgdHlwZTogbnVsbCxcbiAgICAgICAgICAgIHJlYWRPbmx5OiB0cnVlLFxuICAgICAgICAgICAgZGlzcGxheTogcm91dGVMb2NhdGlvbi5mdWxsUGF0aCxcbiAgICAgICAgICAgIHRvb2x0aXAsXG4gICAgICAgICAgICB2YWx1ZTogY29weSxcbiAgICAgICAgfSxcbiAgICB9O1xufVxuZnVuY3Rpb24gZm9ybWF0RGlzcGxheShkaXNwbGF5KSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgX2N1c3RvbToge1xuICAgICAgICAgICAgZGlzcGxheSxcbiAgICAgICAgfSxcbiAgICB9O1xufVxuLy8gdG8gc3VwcG9ydCBtdWx0aXBsZSByb3V0ZXIgaW5zdGFuY2VzXG5sZXQgcm91dGVySWQgPSAwO1xuZnVuY3Rpb24gYWRkRGV2dG9vbHMoYXBwLCByb3V0ZXIsIG1hdGNoZXIpIHtcbiAgICAvLyBUYWtlIG92ZXIgcm91dGVyLmJlZm9yZUVhY2ggYW5kIGFmdGVyRWFjaFxuICAgIC8vIG1ha2Ugc3VyZSB3ZSBhcmUgbm90IHJlZ2lzdGVyaW5nIHRoZSBkZXZ0b29sIHR3aWNlXG4gICAgaWYgKHJvdXRlci5fX2hhc0RldnRvb2xzKVxuICAgICAgICByZXR1cm47XG4gICAgcm91dGVyLl9faGFzRGV2dG9vbHMgPSB0cnVlO1xuICAgIC8vIGluY3JlbWVudCB0byBzdXBwb3J0IG11bHRpcGxlIHJvdXRlciBpbnN0YW5jZXNcbiAgICBjb25zdCBpZCA9IHJvdXRlcklkKys7XG4gICAgc2V0dXBEZXZ0b29sc1BsdWdpbih7XG4gICAgICAgIGlkOiAnb3JnLnZ1ZWpzLnJvdXRlcicgKyAoaWQgPyAnLicgKyBpZCA6ICcnKSxcbiAgICAgICAgbGFiZWw6ICdWdWUgUm91dGVyJyxcbiAgICAgICAgcGFja2FnZU5hbWU6ICd2dWUtcm91dGVyJyxcbiAgICAgICAgaG9tZXBhZ2U6ICdodHRwczovL3JvdXRlci52dWVqcy5vcmcnLFxuICAgICAgICBsb2dvOiAnaHR0cHM6Ly9yb3V0ZXIudnVlanMub3JnL2xvZ28ucG5nJyxcbiAgICAgICAgY29tcG9uZW50U3RhdGVUeXBlczogWydSb3V0aW5nJ10sXG4gICAgICAgIGFwcCxcbiAgICB9LCBhcGkgPT4ge1xuICAgICAgICBpZiAodHlwZW9mIGFwaS5ub3cgIT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIGNvbnNvbGUud2FybignW1Z1ZSBSb3V0ZXJdOiBZb3Ugc2VlbSB0byBiZSB1c2luZyBhbiBvdXRkYXRlZCB2ZXJzaW9uIG9mIFZ1ZSBEZXZ0b29scy4gQXJlIHlvdSBzdGlsbCB1c2luZyB0aGUgQmV0YSByZWxlYXNlIGluc3RlYWQgb2YgdGhlIHN0YWJsZSBvbmU/IFlvdSBjYW4gZmluZCB0aGUgbGlua3MgYXQgaHR0cHM6Ly9kZXZ0b29scy52dWVqcy5vcmcvZ3VpZGUvaW5zdGFsbGF0aW9uLmh0bWwuJyk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gZGlzcGxheSBzdGF0ZSBhZGRlZCBieSB0aGUgcm91dGVyXG4gICAgICAgIGFwaS5vbi5pbnNwZWN0Q29tcG9uZW50KChwYXlsb2FkLCBjdHgpID0+IHtcbiAgICAgICAgICAgIGlmIChwYXlsb2FkLmluc3RhbmNlRGF0YSkge1xuICAgICAgICAgICAgICAgIHBheWxvYWQuaW5zdGFuY2VEYXRhLnN0YXRlLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiAnUm91dGluZycsXG4gICAgICAgICAgICAgICAgICAgIGtleTogJyRyb3V0ZScsXG4gICAgICAgICAgICAgICAgICAgIGVkaXRhYmxlOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGZvcm1hdFJvdXRlTG9jYXRpb24ocm91dGVyLmN1cnJlbnRSb3V0ZS52YWx1ZSwgJ0N1cnJlbnQgUm91dGUnKSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIC8vIG1hcmsgcm91dGVyLWxpbmsgYXMgYWN0aXZlIGFuZCBkaXNwbGF5IHRhZ3Mgb24gcm91dGVyIHZpZXdzXG4gICAgICAgIGFwaS5vbi52aXNpdENvbXBvbmVudFRyZWUoKHsgdHJlZU5vZGU6IG5vZGUsIGNvbXBvbmVudEluc3RhbmNlIH0pID0+IHtcbiAgICAgICAgICAgIGlmIChjb21wb25lbnRJbnN0YW5jZS5fX3Zydl9kZXZ0b29scykge1xuICAgICAgICAgICAgICAgIGNvbnN0IGluZm8gPSBjb21wb25lbnRJbnN0YW5jZS5fX3Zydl9kZXZ0b29scztcbiAgICAgICAgICAgICAgICBub2RlLnRhZ3MucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgIGxhYmVsOiAoaW5mby5uYW1lID8gYCR7aW5mby5uYW1lLnRvU3RyaW5nKCl9OiBgIDogJycpICsgaW5mby5wYXRoLFxuICAgICAgICAgICAgICAgICAgICB0ZXh0Q29sb3I6IDAsXG4gICAgICAgICAgICAgICAgICAgIHRvb2x0aXA6ICdUaGlzIGNvbXBvbmVudCBpcyByZW5kZXJlZCBieSAmbHQ7cm91dGVyLXZpZXcmZ3Q7JyxcbiAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yOiBQSU5LXzUwMCxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIGlmIG11bHRpcGxlIHVzZUxpbmsgYXJlIHVzZWRcbiAgICAgICAgICAgIGlmIChpc0FycmF5KGNvbXBvbmVudEluc3RhbmNlLl9fdnJsX2RldnRvb2xzKSkge1xuICAgICAgICAgICAgICAgIGNvbXBvbmVudEluc3RhbmNlLl9fZGV2dG9vbHNBcGkgPSBhcGk7XG4gICAgICAgICAgICAgICAgY29tcG9uZW50SW5zdGFuY2UuX192cmxfZGV2dG9vbHMuZm9yRWFjaChkZXZ0b29sc0RhdGEgPT4ge1xuICAgICAgICAgICAgICAgICAgICBsZXQgYmFja2dyb3VuZENvbG9yID0gT1JBTkdFXzQwMDtcbiAgICAgICAgICAgICAgICAgICAgbGV0IHRvb2x0aXAgPSAnJztcbiAgICAgICAgICAgICAgICAgICAgaWYgKGRldnRvb2xzRGF0YS5pc0V4YWN0QWN0aXZlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3IgPSBMSU1FXzUwMDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvb2x0aXAgPSAnVGhpcyBpcyBleGFjdGx5IGFjdGl2ZSc7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoZGV2dG9vbHNEYXRhLmlzQWN0aXZlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3IgPSBCTFVFXzYwMDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvb2x0aXAgPSAnVGhpcyBsaW5rIGlzIGFjdGl2ZSc7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgbm9kZS50YWdzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw6IGRldnRvb2xzRGF0YS5yb3V0ZS5wYXRoLFxuICAgICAgICAgICAgICAgICAgICAgICAgdGV4dENvbG9yOiAwLFxuICAgICAgICAgICAgICAgICAgICAgICAgdG9vbHRpcCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmRDb2xvcixcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICB3YXRjaChyb3V0ZXIuY3VycmVudFJvdXRlLCAoKSA9PiB7XG4gICAgICAgICAgICAvLyByZWZyZXNoIGFjdGl2ZSBzdGF0ZVxuICAgICAgICAgICAgcmVmcmVzaFJvdXRlc1ZpZXcoKTtcbiAgICAgICAgICAgIGFwaS5ub3RpZnlDb21wb25lbnRVcGRhdGUoKTtcbiAgICAgICAgICAgIGFwaS5zZW5kSW5zcGVjdG9yVHJlZShyb3V0ZXJJbnNwZWN0b3JJZCk7XG4gICAgICAgICAgICBhcGkuc2VuZEluc3BlY3RvclN0YXRlKHJvdXRlckluc3BlY3RvcklkKTtcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IG5hdmlnYXRpb25zTGF5ZXJJZCA9ICdyb3V0ZXI6bmF2aWdhdGlvbnM6JyArIGlkO1xuICAgICAgICBhcGkuYWRkVGltZWxpbmVMYXllcih7XG4gICAgICAgICAgICBpZDogbmF2aWdhdGlvbnNMYXllcklkLFxuICAgICAgICAgICAgbGFiZWw6IGBSb3V0ZXIke2lkID8gJyAnICsgaWQgOiAnJ30gTmF2aWdhdGlvbnNgLFxuICAgICAgICAgICAgY29sb3I6IDB4NDBhOGM0LFxuICAgICAgICB9KTtcbiAgICAgICAgLy8gY29uc3QgZXJyb3JzTGF5ZXJJZCA9ICdyb3V0ZXI6ZXJyb3JzJ1xuICAgICAgICAvLyBhcGkuYWRkVGltZWxpbmVMYXllcih7XG4gICAgICAgIC8vICAgaWQ6IGVycm9yc0xheWVySWQsXG4gICAgICAgIC8vICAgbGFiZWw6ICdSb3V0ZXIgRXJyb3JzJyxcbiAgICAgICAgLy8gICBjb2xvcjogMHhlYTU0NTUsXG4gICAgICAgIC8vIH0pXG4gICAgICAgIHJvdXRlci5vbkVycm9yKChlcnJvciwgdG8pID0+IHtcbiAgICAgICAgICAgIGFwaS5hZGRUaW1lbGluZUV2ZW50KHtcbiAgICAgICAgICAgICAgICBsYXllcklkOiBuYXZpZ2F0aW9uc0xheWVySWQsXG4gICAgICAgICAgICAgICAgZXZlbnQ6IHtcbiAgICAgICAgICAgICAgICAgICAgdGl0bGU6ICdFcnJvciBkdXJpbmcgTmF2aWdhdGlvbicsXG4gICAgICAgICAgICAgICAgICAgIHN1YnRpdGxlOiB0by5mdWxsUGF0aCxcbiAgICAgICAgICAgICAgICAgICAgbG9nVHlwZTogJ2Vycm9yJyxcbiAgICAgICAgICAgICAgICAgICAgdGltZTogYXBpLm5vdygpLFxuICAgICAgICAgICAgICAgICAgICBkYXRhOiB7IGVycm9yIH0sXG4gICAgICAgICAgICAgICAgICAgIGdyb3VwSWQ6IHRvLm1ldGEuX19uYXZpZ2F0aW9uSWQsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICAgICAgLy8gYXR0YWNoZWQgdG8gYG1ldGFgIGFuZCB1c2VkIHRvIGdyb3VwIGV2ZW50c1xuICAgICAgICBsZXQgbmF2aWdhdGlvbklkID0gMDtcbiAgICAgICAgcm91dGVyLmJlZm9yZUVhY2goKHRvLCBmcm9tKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBkYXRhID0ge1xuICAgICAgICAgICAgICAgIGd1YXJkOiBmb3JtYXREaXNwbGF5KCdiZWZvcmVFYWNoJyksXG4gICAgICAgICAgICAgICAgZnJvbTogZm9ybWF0Um91dGVMb2NhdGlvbihmcm9tLCAnQ3VycmVudCBMb2NhdGlvbiBkdXJpbmcgdGhpcyBuYXZpZ2F0aW9uJyksXG4gICAgICAgICAgICAgICAgdG86IGZvcm1hdFJvdXRlTG9jYXRpb24odG8sICdUYXJnZXQgbG9jYXRpb24nKSxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICAvLyBVc2VkIHRvIGdyb3VwIG5hdmlnYXRpb25zIHRvZ2V0aGVyLCBoaWRlIGZyb20gZGV2dG9vbHNcbiAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0by5tZXRhLCAnX19uYXZpZ2F0aW9uSWQnLCB7XG4gICAgICAgICAgICAgICAgdmFsdWU6IG5hdmlnYXRpb25JZCsrLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBhcGkuYWRkVGltZWxpbmVFdmVudCh7XG4gICAgICAgICAgICAgICAgbGF5ZXJJZDogbmF2aWdhdGlvbnNMYXllcklkLFxuICAgICAgICAgICAgICAgIGV2ZW50OiB7XG4gICAgICAgICAgICAgICAgICAgIHRpbWU6IGFwaS5ub3coKSxcbiAgICAgICAgICAgICAgICAgICAgdGl0bGU6ICdTdGFydCBvZiBuYXZpZ2F0aW9uJyxcbiAgICAgICAgICAgICAgICAgICAgc3VidGl0bGU6IHRvLmZ1bGxQYXRoLFxuICAgICAgICAgICAgICAgICAgICBkYXRhLFxuICAgICAgICAgICAgICAgICAgICBncm91cElkOiB0by5tZXRhLl9fbmF2aWdhdGlvbklkLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJvdXRlci5hZnRlckVhY2goKHRvLCBmcm9tLCBmYWlsdXJlKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBkYXRhID0ge1xuICAgICAgICAgICAgICAgIGd1YXJkOiBmb3JtYXREaXNwbGF5KCdhZnRlckVhY2gnKSxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBpZiAoZmFpbHVyZSkge1xuICAgICAgICAgICAgICAgIGRhdGEuZmFpbHVyZSA9IHtcbiAgICAgICAgICAgICAgICAgICAgX2N1c3RvbToge1xuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogRXJyb3IsXG4gICAgICAgICAgICAgICAgICAgICAgICByZWFkT25seTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGRpc3BsYXk6IGZhaWx1cmUgPyBmYWlsdXJlLm1lc3NhZ2UgOiAnJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvb2x0aXA6ICdOYXZpZ2F0aW9uIEZhaWx1cmUnLFxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGZhaWx1cmUsXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBkYXRhLnN0YXR1cyA9IGZvcm1hdERpc3BsYXkoJ+KdjCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgZGF0YS5zdGF0dXMgPSBmb3JtYXREaXNwbGF5KCfinIUnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIHdlIHNldCBoZXJlIHRvIGhhdmUgdGhlIHJpZ2h0IG9yZGVyXG4gICAgICAgICAgICBkYXRhLmZyb20gPSBmb3JtYXRSb3V0ZUxvY2F0aW9uKGZyb20sICdDdXJyZW50IExvY2F0aW9uIGR1cmluZyB0aGlzIG5hdmlnYXRpb24nKTtcbiAgICAgICAgICAgIGRhdGEudG8gPSBmb3JtYXRSb3V0ZUxvY2F0aW9uKHRvLCAnVGFyZ2V0IGxvY2F0aW9uJyk7XG4gICAgICAgICAgICBhcGkuYWRkVGltZWxpbmVFdmVudCh7XG4gICAgICAgICAgICAgICAgbGF5ZXJJZDogbmF2aWdhdGlvbnNMYXllcklkLFxuICAgICAgICAgICAgICAgIGV2ZW50OiB7XG4gICAgICAgICAgICAgICAgICAgIHRpdGxlOiAnRW5kIG9mIG5hdmlnYXRpb24nLFxuICAgICAgICAgICAgICAgICAgICBzdWJ0aXRsZTogdG8uZnVsbFBhdGgsXG4gICAgICAgICAgICAgICAgICAgIHRpbWU6IGFwaS5ub3coKSxcbiAgICAgICAgICAgICAgICAgICAgZGF0YSxcbiAgICAgICAgICAgICAgICAgICAgbG9nVHlwZTogZmFpbHVyZSA/ICd3YXJuaW5nJyA6ICdkZWZhdWx0JyxcbiAgICAgICAgICAgICAgICAgICAgZ3JvdXBJZDogdG8ubWV0YS5fX25hdmlnYXRpb25JZCxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgICAgICAvKipcbiAgICAgICAgICogSW5zcGVjdG9yIG9mIEV4aXN0aW5nIHJvdXRlc1xuICAgICAgICAgKi9cbiAgICAgICAgY29uc3Qgcm91dGVySW5zcGVjdG9ySWQgPSAncm91dGVyLWluc3BlY3RvcjonICsgaWQ7XG4gICAgICAgIGFwaS5hZGRJbnNwZWN0b3Ioe1xuICAgICAgICAgICAgaWQ6IHJvdXRlckluc3BlY3RvcklkLFxuICAgICAgICAgICAgbGFiZWw6ICdSb3V0ZXMnICsgKGlkID8gJyAnICsgaWQgOiAnJyksXG4gICAgICAgICAgICBpY29uOiAnYm9vaycsXG4gICAgICAgICAgICB0cmVlRmlsdGVyUGxhY2Vob2xkZXI6ICdTZWFyY2ggcm91dGVzJyxcbiAgICAgICAgfSk7XG4gICAgICAgIGZ1bmN0aW9uIHJlZnJlc2hSb3V0ZXNWaWV3KCkge1xuICAgICAgICAgICAgLy8gdGhlIHJvdXRlcyB2aWV3IGlzbid0IGFjdGl2ZVxuICAgICAgICAgICAgaWYgKCFhY3RpdmVSb3V0ZXNQYXlsb2FkKVxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIGNvbnN0IHBheWxvYWQgPSBhY3RpdmVSb3V0ZXNQYXlsb2FkO1xuICAgICAgICAgICAgLy8gY2hpbGRyZW4gcm91dGVzIHdpbGwgYXBwZWFyIGFzIG5lc3RlZFxuICAgICAgICAgICAgbGV0IHJvdXRlcyA9IG1hdGNoZXIuZ2V0Um91dGVzKCkuZmlsdGVyKHJvdXRlID0+ICFyb3V0ZS5wYXJlbnQgfHxcbiAgICAgICAgICAgICAgICAvLyB0aGVzZSByb3V0ZXMgaGF2ZSBhIHBhcmVudCB3aXRoIG5vIGNvbXBvbmVudCB3aGljaCB3aWxsIG5vdCBhcHBlYXIgaW4gdGhlIHZpZXdcbiAgICAgICAgICAgICAgICAvLyB0aGVyZWZvcmUgd2Ugc3RpbGwgbmVlZCB0byBpbmNsdWRlIHRoZW1cbiAgICAgICAgICAgICAgICAhcm91dGUucGFyZW50LnJlY29yZC5jb21wb25lbnRzKTtcbiAgICAgICAgICAgIC8vIHJlc2V0IG1hdGNoIHN0YXRlIHRvIGZhbHNlXG4gICAgICAgICAgICByb3V0ZXMuZm9yRWFjaChyZXNldE1hdGNoU3RhdGVPblJvdXRlUmVjb3JkKTtcbiAgICAgICAgICAgIC8vIGFwcGx5IGEgbWF0Y2ggc3RhdGUgaWYgdGhlcmUgaXMgYSBwYXlsb2FkXG4gICAgICAgICAgICBpZiAocGF5bG9hZC5maWx0ZXIpIHtcbiAgICAgICAgICAgICAgICByb3V0ZXMgPSByb3V0ZXMuZmlsdGVyKHJvdXRlID0+IFxuICAgICAgICAgICAgICAgIC8vIHNhdmUgbWF0Y2hlcyBzdGF0ZSBiYXNlZCBvbiB0aGUgcGF5bG9hZFxuICAgICAgICAgICAgICAgIGlzUm91dGVNYXRjaGluZyhyb3V0ZSwgcGF5bG9hZC5maWx0ZXIudG9Mb3dlckNhc2UoKSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gbWFyayBhY3RpdmUgcm91dGVzXG4gICAgICAgICAgICByb3V0ZXMuZm9yRWFjaChyb3V0ZSA9PiBtYXJrUm91dGVSZWNvcmRBY3RpdmUocm91dGUsIHJvdXRlci5jdXJyZW50Um91dGUudmFsdWUpKTtcbiAgICAgICAgICAgIHBheWxvYWQucm9vdE5vZGVzID0gcm91dGVzLm1hcChmb3JtYXRSb3V0ZVJlY29yZEZvckluc3BlY3Rvcik7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IGFjdGl2ZVJvdXRlc1BheWxvYWQ7XG4gICAgICAgIGFwaS5vbi5nZXRJbnNwZWN0b3JUcmVlKHBheWxvYWQgPT4ge1xuICAgICAgICAgICAgYWN0aXZlUm91dGVzUGF5bG9hZCA9IHBheWxvYWQ7XG4gICAgICAgICAgICBpZiAocGF5bG9hZC5hcHAgPT09IGFwcCAmJiBwYXlsb2FkLmluc3BlY3RvcklkID09PSByb3V0ZXJJbnNwZWN0b3JJZCkge1xuICAgICAgICAgICAgICAgIHJlZnJlc2hSb3V0ZXNWaWV3KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICAvKipcbiAgICAgICAgICogRGlzcGxheSBpbmZvcm1hdGlvbiBhYm91dCB0aGUgY3VycmVudGx5IHNlbGVjdGVkIHJvdXRlIHJlY29yZFxuICAgICAgICAgKi9cbiAgICAgICAgYXBpLm9uLmdldEluc3BlY3RvclN0YXRlKHBheWxvYWQgPT4ge1xuICAgICAgICAgICAgaWYgKHBheWxvYWQuYXBwID09PSBhcHAgJiYgcGF5bG9hZC5pbnNwZWN0b3JJZCA9PT0gcm91dGVySW5zcGVjdG9ySWQpIHtcbiAgICAgICAgICAgICAgICBjb25zdCByb3V0ZXMgPSBtYXRjaGVyLmdldFJvdXRlcygpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHJvdXRlID0gcm91dGVzLmZpbmQocm91dGUgPT4gcm91dGUucmVjb3JkLl9fdmRfaWQgPT09IHBheWxvYWQubm9kZUlkKTtcbiAgICAgICAgICAgICAgICBpZiAocm91dGUpIHtcbiAgICAgICAgICAgICAgICAgICAgcGF5bG9hZC5zdGF0ZSA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnM6IGZvcm1hdFJvdXRlUmVjb3JkTWF0Y2hlckZvclN0YXRlSW5zcGVjdG9yKHJvdXRlKSxcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBhcGkuc2VuZEluc3BlY3RvclRyZWUocm91dGVySW5zcGVjdG9ySWQpO1xuICAgICAgICBhcGkuc2VuZEluc3BlY3RvclN0YXRlKHJvdXRlckluc3BlY3RvcklkKTtcbiAgICB9KTtcbn1cbmZ1bmN0aW9uIG1vZGlmaWVyRm9yS2V5KGtleSkge1xuICAgIGlmIChrZXkub3B0aW9uYWwpIHtcbiAgICAgICAgcmV0dXJuIGtleS5yZXBlYXRhYmxlID8gJyonIDogJz8nO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgcmV0dXJuIGtleS5yZXBlYXRhYmxlID8gJysnIDogJyc7XG4gICAgfVxufVxuZnVuY3Rpb24gZm9ybWF0Um91dGVSZWNvcmRNYXRjaGVyRm9yU3RhdGVJbnNwZWN0b3Iocm91dGUpIHtcbiAgICBjb25zdCB7IHJlY29yZCB9ID0gcm91dGU7XG4gICAgY29uc3QgZmllbGRzID0gW1xuICAgICAgICB7IGVkaXRhYmxlOiBmYWxzZSwga2V5OiAncGF0aCcsIHZhbHVlOiByZWNvcmQucGF0aCB9LFxuICAgIF07XG4gICAgaWYgKHJlY29yZC5uYW1lICE9IG51bGwpIHtcbiAgICAgICAgZmllbGRzLnB1c2goe1xuICAgICAgICAgICAgZWRpdGFibGU6IGZhbHNlLFxuICAgICAgICAgICAga2V5OiAnbmFtZScsXG4gICAgICAgICAgICB2YWx1ZTogcmVjb3JkLm5hbWUsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBmaWVsZHMucHVzaCh7IGVkaXRhYmxlOiBmYWxzZSwga2V5OiAncmVnZXhwJywgdmFsdWU6IHJvdXRlLnJlIH0pO1xuICAgIGlmIChyb3V0ZS5rZXlzLmxlbmd0aCkge1xuICAgICAgICBmaWVsZHMucHVzaCh7XG4gICAgICAgICAgICBlZGl0YWJsZTogZmFsc2UsXG4gICAgICAgICAgICBrZXk6ICdrZXlzJyxcbiAgICAgICAgICAgIHZhbHVlOiB7XG4gICAgICAgICAgICAgICAgX2N1c3RvbToge1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiBudWxsLFxuICAgICAgICAgICAgICAgICAgICByZWFkT25seTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgZGlzcGxheTogcm91dGUua2V5c1xuICAgICAgICAgICAgICAgICAgICAgICAgLm1hcChrZXkgPT4gYCR7a2V5Lm5hbWV9JHttb2RpZmllckZvcktleShrZXkpfWApXG4gICAgICAgICAgICAgICAgICAgICAgICAuam9pbignICcpLFxuICAgICAgICAgICAgICAgICAgICB0b29sdGlwOiAnUGFyYW0ga2V5cycsXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiByb3V0ZS5rZXlzLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9LFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgaWYgKHJlY29yZC5yZWRpcmVjdCAhPSBudWxsKSB7XG4gICAgICAgIGZpZWxkcy5wdXNoKHtcbiAgICAgICAgICAgIGVkaXRhYmxlOiBmYWxzZSxcbiAgICAgICAgICAgIGtleTogJ3JlZGlyZWN0JyxcbiAgICAgICAgICAgIHZhbHVlOiByZWNvcmQucmVkaXJlY3QsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBpZiAocm91dGUuYWxpYXMubGVuZ3RoKSB7XG4gICAgICAgIGZpZWxkcy5wdXNoKHtcbiAgICAgICAgICAgIGVkaXRhYmxlOiBmYWxzZSxcbiAgICAgICAgICAgIGtleTogJ2FsaWFzZXMnLFxuICAgICAgICAgICAgdmFsdWU6IHJvdXRlLmFsaWFzLm1hcChhbGlhcyA9PiBhbGlhcy5yZWNvcmQucGF0aCksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBpZiAoT2JqZWN0LmtleXMocm91dGUucmVjb3JkLm1ldGEpLmxlbmd0aCkge1xuICAgICAgICBmaWVsZHMucHVzaCh7XG4gICAgICAgICAgICBlZGl0YWJsZTogZmFsc2UsXG4gICAgICAgICAgICBrZXk6ICdtZXRhJyxcbiAgICAgICAgICAgIHZhbHVlOiByb3V0ZS5yZWNvcmQubWV0YSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGZpZWxkcy5wdXNoKHtcbiAgICAgICAga2V5OiAnc2NvcmUnLFxuICAgICAgICBlZGl0YWJsZTogZmFsc2UsXG4gICAgICAgIHZhbHVlOiB7XG4gICAgICAgICAgICBfY3VzdG9tOiB7XG4gICAgICAgICAgICAgICAgdHlwZTogbnVsbCxcbiAgICAgICAgICAgICAgICByZWFkT25seTogdHJ1ZSxcbiAgICAgICAgICAgICAgICBkaXNwbGF5OiByb3V0ZS5zY29yZS5tYXAoc2NvcmUgPT4gc2NvcmUuam9pbignLCAnKSkuam9pbignIHwgJyksXG4gICAgICAgICAgICAgICAgdG9vbHRpcDogJ1Njb3JlIHVzZWQgdG8gc29ydCByb3V0ZXMnLFxuICAgICAgICAgICAgICAgIHZhbHVlOiByb3V0ZS5zY29yZSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgfSk7XG4gICAgcmV0dXJuIGZpZWxkcztcbn1cbi8qKlxuICogRXh0cmFjdGVkIGZyb20gdGFpbHdpbmQgcGFsZXR0ZVxuICovXG5jb25zdCBQSU5LXzUwMCA9IDB4ZWM0ODk5O1xuY29uc3QgQkxVRV82MDAgPSAweDI1NjNlYjtcbmNvbnN0IExJTUVfNTAwID0gMHg4NGNjMTY7XG5jb25zdCBDWUFOXzQwMCA9IDB4MjJkM2VlO1xuY29uc3QgT1JBTkdFXzQwMCA9IDB4ZmI5MjNjO1xuLy8gY29uc3QgR1JBWV8xMDAgPSAweGY0ZjRmNVxuY29uc3QgREFSSyA9IDB4NjY2NjY2O1xuZnVuY3Rpb24gZm9ybWF0Um91dGVSZWNvcmRGb3JJbnNwZWN0b3Iocm91dGUpIHtcbiAgICBjb25zdCB0YWdzID0gW107XG4gICAgY29uc3QgeyByZWNvcmQgfSA9IHJvdXRlO1xuICAgIGlmIChyZWNvcmQubmFtZSAhPSBudWxsKSB7XG4gICAgICAgIHRhZ3MucHVzaCh7XG4gICAgICAgICAgICBsYWJlbDogU3RyaW5nKHJlY29yZC5uYW1lKSxcbiAgICAgICAgICAgIHRleHRDb2xvcjogMCxcbiAgICAgICAgICAgIGJhY2tncm91bmRDb2xvcjogQ1lBTl80MDAsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBpZiAocmVjb3JkLmFsaWFzT2YpIHtcbiAgICAgICAgdGFncy5wdXNoKHtcbiAgICAgICAgICAgIGxhYmVsOiAnYWxpYXMnLFxuICAgICAgICAgICAgdGV4dENvbG9yOiAwLFxuICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yOiBPUkFOR0VfNDAwLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgaWYgKHJvdXRlLl9fdmRfbWF0Y2gpIHtcbiAgICAgICAgdGFncy5wdXNoKHtcbiAgICAgICAgICAgIGxhYmVsOiAnbWF0Y2hlcycsXG4gICAgICAgICAgICB0ZXh0Q29sb3I6IDAsXG4gICAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6IFBJTktfNTAwLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgaWYgKHJvdXRlLl9fdmRfZXhhY3RBY3RpdmUpIHtcbiAgICAgICAgdGFncy5wdXNoKHtcbiAgICAgICAgICAgIGxhYmVsOiAnZXhhY3QnLFxuICAgICAgICAgICAgdGV4dENvbG9yOiAwLFxuICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yOiBMSU1FXzUwMCxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGlmIChyb3V0ZS5fX3ZkX2FjdGl2ZSkge1xuICAgICAgICB0YWdzLnB1c2goe1xuICAgICAgICAgICAgbGFiZWw6ICdhY3RpdmUnLFxuICAgICAgICAgICAgdGV4dENvbG9yOiAwLFxuICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yOiBCTFVFXzYwMCxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGlmIChyZWNvcmQucmVkaXJlY3QpIHtcbiAgICAgICAgdGFncy5wdXNoKHtcbiAgICAgICAgICAgIGxhYmVsOiB0eXBlb2YgcmVjb3JkLnJlZGlyZWN0ID09PSAnc3RyaW5nJ1xuICAgICAgICAgICAgICAgID8gYHJlZGlyZWN0OiAke3JlY29yZC5yZWRpcmVjdH1gXG4gICAgICAgICAgICAgICAgOiAncmVkaXJlY3RzJyxcbiAgICAgICAgICAgIHRleHRDb2xvcjogMHhmZmZmZmYsXG4gICAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6IERBUkssXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvLyBhZGQgYW4gaWQgdG8gYmUgYWJsZSB0byBzZWxlY3QgaXQuIFVzaW5nIHRoZSBgcGF0aGAgaXMgbm90IHBvc3NpYmxlIGJlY2F1c2VcbiAgICAvLyBlbXB0eSBwYXRoIGNoaWxkcmVuIHdvdWxkIGNvbGxpZGUgd2l0aCB0aGVpciBwYXJlbnRzXG4gICAgbGV0IGlkID0gcmVjb3JkLl9fdmRfaWQ7XG4gICAgaWYgKGlkID09IG51bGwpIHtcbiAgICAgICAgaWQgPSBTdHJpbmcocm91dGVSZWNvcmRJZCsrKTtcbiAgICAgICAgcmVjb3JkLl9fdmRfaWQgPSBpZDtcbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgICAgaWQsXG4gICAgICAgIGxhYmVsOiByZWNvcmQucGF0aCxcbiAgICAgICAgdGFncyxcbiAgICAgICAgY2hpbGRyZW46IHJvdXRlLmNoaWxkcmVuLm1hcChmb3JtYXRSb3V0ZVJlY29yZEZvckluc3BlY3RvciksXG4gICAgfTtcbn1cbi8vICBpbmNyZW1lbnRhbCBpZCBmb3Igcm91dGUgcmVjb3JkcyBhbmQgaW5zcGVjdG9yIHN0YXRlXG5sZXQgcm91dGVSZWNvcmRJZCA9IDA7XG5jb25zdCBFWFRSQUNUX1JFR0VYUF9SRSA9IC9eXFwvKC4qKVxcLyhbYS16XSopJC87XG5mdW5jdGlvbiBtYXJrUm91dGVSZWNvcmRBY3RpdmUocm91dGUsIGN1cnJlbnRSb3V0ZSkge1xuICAgIC8vIG5vIHJvdXRlIHdpbGwgYmUgYWN0aXZlIGlmIG1hdGNoZWQgaXMgZW1wdHlcbiAgICAvLyByZXNldCB0aGUgbWF0Y2hpbmcgc3RhdGVcbiAgICBjb25zdCBpc0V4YWN0QWN0aXZlID0gY3VycmVudFJvdXRlLm1hdGNoZWQubGVuZ3RoICYmXG4gICAgICAgIGlzU2FtZVJvdXRlUmVjb3JkKGN1cnJlbnRSb3V0ZS5tYXRjaGVkW2N1cnJlbnRSb3V0ZS5tYXRjaGVkLmxlbmd0aCAtIDFdLCByb3V0ZS5yZWNvcmQpO1xuICAgIHJvdXRlLl9fdmRfZXhhY3RBY3RpdmUgPSByb3V0ZS5fX3ZkX2FjdGl2ZSA9IGlzRXhhY3RBY3RpdmU7XG4gICAgaWYgKCFpc0V4YWN0QWN0aXZlKSB7XG4gICAgICAgIHJvdXRlLl9fdmRfYWN0aXZlID0gY3VycmVudFJvdXRlLm1hdGNoZWQuc29tZShtYXRjaCA9PiBpc1NhbWVSb3V0ZVJlY29yZChtYXRjaCwgcm91dGUucmVjb3JkKSk7XG4gICAgfVxuICAgIHJvdXRlLmNoaWxkcmVuLmZvckVhY2goY2hpbGRSb3V0ZSA9PiBtYXJrUm91dGVSZWNvcmRBY3RpdmUoY2hpbGRSb3V0ZSwgY3VycmVudFJvdXRlKSk7XG59XG5mdW5jdGlvbiByZXNldE1hdGNoU3RhdGVPblJvdXRlUmVjb3JkKHJvdXRlKSB7XG4gICAgcm91dGUuX192ZF9tYXRjaCA9IGZhbHNlO1xuICAgIHJvdXRlLmNoaWxkcmVuLmZvckVhY2gocmVzZXRNYXRjaFN0YXRlT25Sb3V0ZVJlY29yZCk7XG59XG5mdW5jdGlvbiBpc1JvdXRlTWF0Y2hpbmcocm91dGUsIGZpbHRlcikge1xuICAgIGNvbnN0IGZvdW5kID0gU3RyaW5nKHJvdXRlLnJlKS5tYXRjaChFWFRSQUNUX1JFR0VYUF9SRSk7XG4gICAgcm91dGUuX192ZF9tYXRjaCA9IGZhbHNlO1xuICAgIGlmICghZm91bmQgfHwgZm91bmQubGVuZ3RoIDwgMykge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIC8vIHVzZSBhIHJlZ2V4cCB3aXRob3V0ICQgYXQgdGhlIGVuZCB0byBtYXRjaCBuZXN0ZWQgcm91dGVzIGJldHRlclxuICAgIGNvbnN0IG5vbkVuZGluZ1JFID0gbmV3IFJlZ0V4cChmb3VuZFsxXS5yZXBsYWNlKC9cXCQkLywgJycpLCBmb3VuZFsyXSk7XG4gICAgaWYgKG5vbkVuZGluZ1JFLnRlc3QoZmlsdGVyKSkge1xuICAgICAgICAvLyBtYXJrIGNoaWxkcmVuIGFzIG1hdGNoZXNcbiAgICAgICAgcm91dGUuY2hpbGRyZW4uZm9yRWFjaChjaGlsZCA9PiBpc1JvdXRlTWF0Y2hpbmcoY2hpbGQsIGZpbHRlcikpO1xuICAgICAgICAvLyBleGNlcHRpb24gY2FzZTogYC9gXG4gICAgICAgIGlmIChyb3V0ZS5yZWNvcmQucGF0aCAhPT0gJy8nIHx8IGZpbHRlciA9PT0gJy8nKSB7XG4gICAgICAgICAgICByb3V0ZS5fX3ZkX21hdGNoID0gcm91dGUucmUudGVzdChmaWx0ZXIpO1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgLy8gaGlkZSB0aGUgLyByb3V0ZVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGNvbnN0IHBhdGggPSByb3V0ZS5yZWNvcmQucGF0aC50b0xvd2VyQ2FzZSgpO1xuICAgIGNvbnN0IGRlY29kZWRQYXRoID0gZGVjb2RlKHBhdGgpO1xuICAgIC8vIGFsc28gYWxsb3cgcGFydGlhbCBtYXRjaGluZyBvbiB0aGUgcGF0aFxuICAgIGlmICghZmlsdGVyLnN0YXJ0c1dpdGgoJy8nKSAmJlxuICAgICAgICAoZGVjb2RlZFBhdGguaW5jbHVkZXMoZmlsdGVyKSB8fCBwYXRoLmluY2x1ZGVzKGZpbHRlcikpKVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICBpZiAoZGVjb2RlZFBhdGguc3RhcnRzV2l0aChmaWx0ZXIpIHx8IHBhdGguc3RhcnRzV2l0aChmaWx0ZXIpKVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICBpZiAocm91dGUucmVjb3JkLm5hbWUgJiYgU3RyaW5nKHJvdXRlLnJlY29yZC5uYW1lKS5pbmNsdWRlcyhmaWx0ZXIpKVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICByZXR1cm4gcm91dGUuY2hpbGRyZW4uc29tZShjaGlsZCA9PiBpc1JvdXRlTWF0Y2hpbmcoY2hpbGQsIGZpbHRlcikpO1xufVxuZnVuY3Rpb24gb21pdChvYmosIGtleXMpIHtcbiAgICBjb25zdCByZXQgPSB7fTtcbiAgICBmb3IgKGNvbnN0IGtleSBpbiBvYmopIHtcbiAgICAgICAgaWYgKCFrZXlzLmluY2x1ZGVzKGtleSkpIHtcbiAgICAgICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3JcbiAgICAgICAgICAgIHJldFtrZXldID0gb2JqW2tleV07XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHJldDtcbn1cblxuLyoqXG4gKiBDcmVhdGVzIGEgUm91dGVyIGluc3RhbmNlIHRoYXQgY2FuIGJlIHVzZWQgYnkgYSBWdWUgYXBwLlxuICpcbiAqIEBwYXJhbSBvcHRpb25zIC0ge0BsaW5rIFJvdXRlck9wdGlvbnN9XG4gKi9cbmZ1bmN0aW9uIGNyZWF0ZVJvdXRlcihvcHRpb25zKSB7XG4gICAgY29uc3QgbWF0Y2hlciA9IGNyZWF0ZVJvdXRlck1hdGNoZXIob3B0aW9ucy5yb3V0ZXMsIG9wdGlvbnMpO1xuICAgIGNvbnN0IHBhcnNlUXVlcnkkMSA9IG9wdGlvbnMucGFyc2VRdWVyeSB8fCBwYXJzZVF1ZXJ5O1xuICAgIGNvbnN0IHN0cmluZ2lmeVF1ZXJ5JDEgPSBvcHRpb25zLnN0cmluZ2lmeVF1ZXJ5IHx8IHN0cmluZ2lmeVF1ZXJ5O1xuICAgIGNvbnN0IHJvdXRlckhpc3RvcnkgPSBvcHRpb25zLmhpc3Rvcnk7XG4gICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJiAhcm91dGVySGlzdG9yeSlcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdQcm92aWRlIHRoZSBcImhpc3RvcnlcIiBvcHRpb24gd2hlbiBjYWxsaW5nIFwiY3JlYXRlUm91dGVyKClcIjonICtcbiAgICAgICAgICAgICcgaHR0cHM6Ly9uZXh0LnJvdXRlci52dWVqcy5vcmcvYXBpLyNoaXN0b3J5LicpO1xuICAgIGNvbnN0IGJlZm9yZUd1YXJkcyA9IHVzZUNhbGxiYWNrcygpO1xuICAgIGNvbnN0IGJlZm9yZVJlc29sdmVHdWFyZHMgPSB1c2VDYWxsYmFja3MoKTtcbiAgICBjb25zdCBhZnRlckd1YXJkcyA9IHVzZUNhbGxiYWNrcygpO1xuICAgIGNvbnN0IGN1cnJlbnRSb3V0ZSA9IHNoYWxsb3dSZWYoU1RBUlRfTE9DQVRJT05fTk9STUFMSVpFRCk7XG4gICAgbGV0IHBlbmRpbmdMb2NhdGlvbiA9IFNUQVJUX0xPQ0FUSU9OX05PUk1BTElaRUQ7XG4gICAgLy8gbGVhdmUgdGhlIHNjcm9sbFJlc3RvcmF0aW9uIGlmIG5vIHNjcm9sbEJlaGF2aW9yIGlzIHByb3ZpZGVkXG4gICAgaWYgKGlzQnJvd3NlciAmJiBvcHRpb25zLnNjcm9sbEJlaGF2aW9yICYmICdzY3JvbGxSZXN0b3JhdGlvbicgaW4gaGlzdG9yeSkge1xuICAgICAgICBoaXN0b3J5LnNjcm9sbFJlc3RvcmF0aW9uID0gJ21hbnVhbCc7XG4gICAgfVxuICAgIGNvbnN0IG5vcm1hbGl6ZVBhcmFtcyA9IGFwcGx5VG9QYXJhbXMuYmluZChudWxsLCBwYXJhbVZhbHVlID0+ICcnICsgcGFyYW1WYWx1ZSk7XG4gICAgY29uc3QgZW5jb2RlUGFyYW1zID0gYXBwbHlUb1BhcmFtcy5iaW5kKG51bGwsIGVuY29kZVBhcmFtKTtcbiAgICBjb25zdCBkZWNvZGVQYXJhbXMgPSBcbiAgICAvLyBAdHMtZXhwZWN0LWVycm9yOiBpbnRlbnRpb25hbGx5IGF2b2lkIHRoZSB0eXBlIGNoZWNrXG4gICAgYXBwbHlUb1BhcmFtcy5iaW5kKG51bGwsIGRlY29kZSk7XG4gICAgZnVuY3Rpb24gYWRkUm91dGUocGFyZW50T3JSb3V0ZSwgcm91dGUpIHtcbiAgICAgICAgbGV0IHBhcmVudDtcbiAgICAgICAgbGV0IHJlY29yZDtcbiAgICAgICAgaWYgKGlzUm91dGVOYW1lKHBhcmVudE9yUm91dGUpKSB7XG4gICAgICAgICAgICBwYXJlbnQgPSBtYXRjaGVyLmdldFJlY29yZE1hdGNoZXIocGFyZW50T3JSb3V0ZSk7XG4gICAgICAgICAgICByZWNvcmQgPSByb3V0ZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJlY29yZCA9IHBhcmVudE9yUm91dGU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG1hdGNoZXIuYWRkUm91dGUocmVjb3JkLCBwYXJlbnQpO1xuICAgIH1cbiAgICBmdW5jdGlvbiByZW1vdmVSb3V0ZShuYW1lKSB7XG4gICAgICAgIGNvbnN0IHJlY29yZE1hdGNoZXIgPSBtYXRjaGVyLmdldFJlY29yZE1hdGNoZXIobmFtZSk7XG4gICAgICAgIGlmIChyZWNvcmRNYXRjaGVyKSB7XG4gICAgICAgICAgICBtYXRjaGVyLnJlbW92ZVJvdXRlKHJlY29yZE1hdGNoZXIpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSkge1xuICAgICAgICAgICAgd2FybihgQ2Fubm90IHJlbW92ZSBub24tZXhpc3RlbnQgcm91dGUgXCIke1N0cmluZyhuYW1lKX1cImApO1xuICAgICAgICB9XG4gICAgfVxuICAgIGZ1bmN0aW9uIGdldFJvdXRlcygpIHtcbiAgICAgICAgcmV0dXJuIG1hdGNoZXIuZ2V0Um91dGVzKCkubWFwKHJvdXRlTWF0Y2hlciA9PiByb3V0ZU1hdGNoZXIucmVjb3JkKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gaGFzUm91dGUobmFtZSkge1xuICAgICAgICByZXR1cm4gISFtYXRjaGVyLmdldFJlY29yZE1hdGNoZXIobmFtZSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHJlc29sdmUocmF3TG9jYXRpb24sIGN1cnJlbnRMb2NhdGlvbikge1xuICAgICAgICAvLyBjb25zdCBvYmplY3RMb2NhdGlvbiA9IHJvdXRlckxvY2F0aW9uQXNPYmplY3QocmF3TG9jYXRpb24pXG4gICAgICAgIC8vIHdlIGNyZWF0ZSBhIGNvcHkgdG8gbW9kaWZ5IGl0IGxhdGVyXG4gICAgICAgIGN1cnJlbnRMb2NhdGlvbiA9IGFzc2lnbih7fSwgY3VycmVudExvY2F0aW9uIHx8IGN1cnJlbnRSb3V0ZS52YWx1ZSk7XG4gICAgICAgIGlmICh0eXBlb2YgcmF3TG9jYXRpb24gPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICBjb25zdCBsb2NhdGlvbk5vcm1hbGl6ZWQgPSBwYXJzZVVSTChwYXJzZVF1ZXJ5JDEsIHJhd0xvY2F0aW9uLCBjdXJyZW50TG9jYXRpb24ucGF0aCk7XG4gICAgICAgICAgICBjb25zdCBtYXRjaGVkUm91dGUgPSBtYXRjaGVyLnJlc29sdmUoeyBwYXRoOiBsb2NhdGlvbk5vcm1hbGl6ZWQucGF0aCB9LCBjdXJyZW50TG9jYXRpb24pO1xuICAgICAgICAgICAgY29uc3QgaHJlZiA9IHJvdXRlckhpc3RvcnkuY3JlYXRlSHJlZihsb2NhdGlvbk5vcm1hbGl6ZWQuZnVsbFBhdGgpO1xuICAgICAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSkge1xuICAgICAgICAgICAgICAgIGlmIChocmVmLnN0YXJ0c1dpdGgoJy8vJykpXG4gICAgICAgICAgICAgICAgICAgIHdhcm4oYExvY2F0aW9uIFwiJHtyYXdMb2NhdGlvbn1cIiByZXNvbHZlZCB0byBcIiR7aHJlZn1cIi4gQSByZXNvbHZlZCBsb2NhdGlvbiBjYW5ub3Qgc3RhcnQgd2l0aCBtdWx0aXBsZSBzbGFzaGVzLmApO1xuICAgICAgICAgICAgICAgIGVsc2UgaWYgKCFtYXRjaGVkUm91dGUubWF0Y2hlZC5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgd2FybihgTm8gbWF0Y2ggZm91bmQgZm9yIGxvY2F0aW9uIHdpdGggcGF0aCBcIiR7cmF3TG9jYXRpb259XCJgKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBsb2NhdGlvbk5vcm1hbGl6ZWQgaXMgYWx3YXlzIGEgbmV3IG9iamVjdFxuICAgICAgICAgICAgcmV0dXJuIGFzc2lnbihsb2NhdGlvbk5vcm1hbGl6ZWQsIG1hdGNoZWRSb3V0ZSwge1xuICAgICAgICAgICAgICAgIHBhcmFtczogZGVjb2RlUGFyYW1zKG1hdGNoZWRSb3V0ZS5wYXJhbXMpLFxuICAgICAgICAgICAgICAgIGhhc2g6IGRlY29kZShsb2NhdGlvbk5vcm1hbGl6ZWQuaGFzaCksXG4gICAgICAgICAgICAgICAgcmVkaXJlY3RlZEZyb206IHVuZGVmaW5lZCxcbiAgICAgICAgICAgICAgICBocmVmLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IG1hdGNoZXJMb2NhdGlvbjtcbiAgICAgICAgLy8gcGF0aCBjb3VsZCBiZSByZWxhdGl2ZSBpbiBvYmplY3QgYXMgd2VsbFxuICAgICAgICBpZiAocmF3TG9jYXRpb24ucGF0aCAhPSBudWxsKSB7XG4gICAgICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmXG4gICAgICAgICAgICAgICAgJ3BhcmFtcycgaW4gcmF3TG9jYXRpb24gJiZcbiAgICAgICAgICAgICAgICAhKCduYW1lJyBpbiByYXdMb2NhdGlvbikgJiZcbiAgICAgICAgICAgICAgICAvLyBAdHMtZXhwZWN0LWVycm9yOiB0aGUgdHlwZSBpcyBuZXZlclxuICAgICAgICAgICAgICAgIE9iamVjdC5rZXlzKHJhd0xvY2F0aW9uLnBhcmFtcykubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgd2FybihgUGF0aCBcIiR7cmF3TG9jYXRpb24ucGF0aH1cIiB3YXMgcGFzc2VkIHdpdGggcGFyYW1zIGJ1dCB0aGV5IHdpbGwgYmUgaWdub3JlZC4gVXNlIGEgbmFtZWQgcm91dGUgYWxvbmdzaWRlIHBhcmFtcyBpbnN0ZWFkLmApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbWF0Y2hlckxvY2F0aW9uID0gYXNzaWduKHt9LCByYXdMb2NhdGlvbiwge1xuICAgICAgICAgICAgICAgIHBhdGg6IHBhcnNlVVJMKHBhcnNlUXVlcnkkMSwgcmF3TG9jYXRpb24ucGF0aCwgY3VycmVudExvY2F0aW9uLnBhdGgpLnBhdGgsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIC8vIHJlbW92ZSBhbnkgbnVsbGlzaCBwYXJhbVxuICAgICAgICAgICAgY29uc3QgdGFyZ2V0UGFyYW1zID0gYXNzaWduKHt9LCByYXdMb2NhdGlvbi5wYXJhbXMpO1xuICAgICAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gdGFyZ2V0UGFyYW1zKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRhcmdldFBhcmFtc1trZXldID09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgZGVsZXRlIHRhcmdldFBhcmFtc1trZXldO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIHBhc3MgZW5jb2RlZCB2YWx1ZXMgdG8gdGhlIG1hdGNoZXIsIHNvIGl0IGNhbiBwcm9kdWNlIGVuY29kZWQgcGF0aCBhbmQgZnVsbFBhdGhcbiAgICAgICAgICAgIG1hdGNoZXJMb2NhdGlvbiA9IGFzc2lnbih7fSwgcmF3TG9jYXRpb24sIHtcbiAgICAgICAgICAgICAgICBwYXJhbXM6IGVuY29kZVBhcmFtcyh0YXJnZXRQYXJhbXMpLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAvLyBjdXJyZW50IGxvY2F0aW9uIHBhcmFtcyBhcmUgZGVjb2RlZCwgd2UgbmVlZCB0byBlbmNvZGUgdGhlbSBpbiBjYXNlIHRoZVxuICAgICAgICAgICAgLy8gbWF0Y2hlciBtZXJnZXMgdGhlIHBhcmFtc1xuICAgICAgICAgICAgY3VycmVudExvY2F0aW9uLnBhcmFtcyA9IGVuY29kZVBhcmFtcyhjdXJyZW50TG9jYXRpb24ucGFyYW1zKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBtYXRjaGVkUm91dGUgPSBtYXRjaGVyLnJlc29sdmUobWF0Y2hlckxvY2F0aW9uLCBjdXJyZW50TG9jYXRpb24pO1xuICAgICAgICBjb25zdCBoYXNoID0gcmF3TG9jYXRpb24uaGFzaCB8fCAnJztcbiAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJiBoYXNoICYmICFoYXNoLnN0YXJ0c1dpdGgoJyMnKSkge1xuICAgICAgICAgICAgd2FybihgQSBcXGBoYXNoXFxgIHNob3VsZCBhbHdheXMgc3RhcnQgd2l0aCB0aGUgY2hhcmFjdGVyIFwiI1wiLiBSZXBsYWNlIFwiJHtoYXNofVwiIHdpdGggXCIjJHtoYXNofVwiLmApO1xuICAgICAgICB9XG4gICAgICAgIC8vIHRoZSBtYXRjaGVyIG1pZ2h0IGhhdmUgbWVyZ2VkIGN1cnJlbnQgbG9jYXRpb24gcGFyYW1zLCBzb1xuICAgICAgICAvLyB3ZSBuZWVkIHRvIHJ1biB0aGUgZGVjb2RpbmcgYWdhaW5cbiAgICAgICAgbWF0Y2hlZFJvdXRlLnBhcmFtcyA9IG5vcm1hbGl6ZVBhcmFtcyhkZWNvZGVQYXJhbXMobWF0Y2hlZFJvdXRlLnBhcmFtcykpO1xuICAgICAgICBjb25zdCBmdWxsUGF0aCA9IHN0cmluZ2lmeVVSTChzdHJpbmdpZnlRdWVyeSQxLCBhc3NpZ24oe30sIHJhd0xvY2F0aW9uLCB7XG4gICAgICAgICAgICBoYXNoOiBlbmNvZGVIYXNoKGhhc2gpLFxuICAgICAgICAgICAgcGF0aDogbWF0Y2hlZFJvdXRlLnBhdGgsXG4gICAgICAgIH0pKTtcbiAgICAgICAgY29uc3QgaHJlZiA9IHJvdXRlckhpc3RvcnkuY3JlYXRlSHJlZihmdWxsUGF0aCk7XG4gICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpIHtcbiAgICAgICAgICAgIGlmIChocmVmLnN0YXJ0c1dpdGgoJy8vJykpIHtcbiAgICAgICAgICAgICAgICB3YXJuKGBMb2NhdGlvbiBcIiR7cmF3TG9jYXRpb259XCIgcmVzb2x2ZWQgdG8gXCIke2hyZWZ9XCIuIEEgcmVzb2x2ZWQgbG9jYXRpb24gY2Fubm90IHN0YXJ0IHdpdGggbXVsdGlwbGUgc2xhc2hlcy5gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKCFtYXRjaGVkUm91dGUubWF0Y2hlZC5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICB3YXJuKGBObyBtYXRjaCBmb3VuZCBmb3IgbG9jYXRpb24gd2l0aCBwYXRoIFwiJHtyYXdMb2NhdGlvbi5wYXRoICE9IG51bGwgPyByYXdMb2NhdGlvbi5wYXRoIDogcmF3TG9jYXRpb259XCJgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gYXNzaWduKHtcbiAgICAgICAgICAgIGZ1bGxQYXRoLFxuICAgICAgICAgICAgLy8ga2VlcCB0aGUgaGFzaCBlbmNvZGVkIHNvIGZ1bGxQYXRoIGlzIGVmZmVjdGl2ZWx5IHBhdGggKyBlbmNvZGVkUXVlcnkgK1xuICAgICAgICAgICAgLy8gaGFzaFxuICAgICAgICAgICAgaGFzaCxcbiAgICAgICAgICAgIHF1ZXJ5OiBcbiAgICAgICAgICAgIC8vIGlmIHRoZSB1c2VyIGlzIHVzaW5nIGEgY3VzdG9tIHF1ZXJ5IGxpYiBsaWtlIHFzLCB3ZSBtaWdodCBoYXZlXG4gICAgICAgICAgICAvLyBuZXN0ZWQgb2JqZWN0cywgc28gd2Uga2VlcCB0aGUgcXVlcnkgYXMgaXMsIG1lYW5pbmcgaXQgY2FuIGNvbnRhaW5cbiAgICAgICAgICAgIC8vIG51bWJlcnMgYXQgYCRyb3V0ZS5xdWVyeWAsIGJ1dCBhdCB0aGUgcG9pbnQsIHRoZSB1c2VyIHdpbGwgaGF2ZSB0b1xuICAgICAgICAgICAgLy8gdXNlIHRoZWlyIG93biB0eXBlIGFueXdheS5cbiAgICAgICAgICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS92dWVqcy9yb3V0ZXIvaXNzdWVzLzMyOCNpc3N1ZWNvbW1lbnQtNjQ5NDgxNTY3XG4gICAgICAgICAgICBzdHJpbmdpZnlRdWVyeSQxID09PSBzdHJpbmdpZnlRdWVyeVxuICAgICAgICAgICAgICAgID8gbm9ybWFsaXplUXVlcnkocmF3TG9jYXRpb24ucXVlcnkpXG4gICAgICAgICAgICAgICAgOiAocmF3TG9jYXRpb24ucXVlcnkgfHwge30pLFxuICAgICAgICB9LCBtYXRjaGVkUm91dGUsIHtcbiAgICAgICAgICAgIHJlZGlyZWN0ZWRGcm9tOiB1bmRlZmluZWQsXG4gICAgICAgICAgICBocmVmLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgZnVuY3Rpb24gbG9jYXRpb25Bc09iamVjdCh0bykge1xuICAgICAgICByZXR1cm4gdHlwZW9mIHRvID09PSAnc3RyaW5nJ1xuICAgICAgICAgICAgPyBwYXJzZVVSTChwYXJzZVF1ZXJ5JDEsIHRvLCBjdXJyZW50Um91dGUudmFsdWUucGF0aClcbiAgICAgICAgICAgIDogYXNzaWduKHt9LCB0byk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGNoZWNrQ2FuY2VsZWROYXZpZ2F0aW9uKHRvLCBmcm9tKSB7XG4gICAgICAgIGlmIChwZW5kaW5nTG9jYXRpb24gIT09IHRvKSB7XG4gICAgICAgICAgICByZXR1cm4gY3JlYXRlUm91dGVyRXJyb3IoOCAvKiBFcnJvclR5cGVzLk5BVklHQVRJT05fQ0FOQ0VMTEVEICovLCB7XG4gICAgICAgICAgICAgICAgZnJvbSxcbiAgICAgICAgICAgICAgICB0byxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIGZ1bmN0aW9uIHB1c2godG8pIHtcbiAgICAgICAgcmV0dXJuIHB1c2hXaXRoUmVkaXJlY3QodG8pO1xuICAgIH1cbiAgICBmdW5jdGlvbiByZXBsYWNlKHRvKSB7XG4gICAgICAgIHJldHVybiBwdXNoKGFzc2lnbihsb2NhdGlvbkFzT2JqZWN0KHRvKSwgeyByZXBsYWNlOiB0cnVlIH0pKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gaGFuZGxlUmVkaXJlY3RSZWNvcmQodG8pIHtcbiAgICAgICAgY29uc3QgbGFzdE1hdGNoZWQgPSB0by5tYXRjaGVkW3RvLm1hdGNoZWQubGVuZ3RoIC0gMV07XG4gICAgICAgIGlmIChsYXN0TWF0Y2hlZCAmJiBsYXN0TWF0Y2hlZC5yZWRpcmVjdCkge1xuICAgICAgICAgICAgY29uc3QgeyByZWRpcmVjdCB9ID0gbGFzdE1hdGNoZWQ7XG4gICAgICAgICAgICBsZXQgbmV3VGFyZ2V0TG9jYXRpb24gPSB0eXBlb2YgcmVkaXJlY3QgPT09ICdmdW5jdGlvbicgPyByZWRpcmVjdCh0bykgOiByZWRpcmVjdDtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgbmV3VGFyZ2V0TG9jYXRpb24gPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgbmV3VGFyZ2V0TG9jYXRpb24gPVxuICAgICAgICAgICAgICAgICAgICBuZXdUYXJnZXRMb2NhdGlvbi5pbmNsdWRlcygnPycpIHx8IG5ld1RhcmdldExvY2F0aW9uLmluY2x1ZGVzKCcjJylcbiAgICAgICAgICAgICAgICAgICAgICAgID8gKG5ld1RhcmdldExvY2F0aW9uID0gbG9jYXRpb25Bc09iamVjdChuZXdUYXJnZXRMb2NhdGlvbikpXG4gICAgICAgICAgICAgICAgICAgICAgICA6IC8vIGZvcmNlIGVtcHR5IHBhcmFtc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsgcGF0aDogbmV3VGFyZ2V0TG9jYXRpb24gfTtcbiAgICAgICAgICAgICAgICAvLyBAdHMtZXhwZWN0LWVycm9yOiBmb3JjZSBlbXB0eSBwYXJhbXMgd2hlbiBhIHN0cmluZyBpcyBwYXNzZWQgdG8gbGV0XG4gICAgICAgICAgICAgICAgLy8gdGhlIHJvdXRlciBwYXJzZSB0aGVtIGFnYWluXG4gICAgICAgICAgICAgICAgbmV3VGFyZ2V0TG9jYXRpb24ucGFyYW1zID0ge307XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmXG4gICAgICAgICAgICAgICAgbmV3VGFyZ2V0TG9jYXRpb24ucGF0aCA9PSBudWxsICYmXG4gICAgICAgICAgICAgICAgISgnbmFtZScgaW4gbmV3VGFyZ2V0TG9jYXRpb24pKSB7XG4gICAgICAgICAgICAgICAgd2FybihgSW52YWxpZCByZWRpcmVjdCBmb3VuZDpcXG4ke0pTT04uc3RyaW5naWZ5KG5ld1RhcmdldExvY2F0aW9uLCBudWxsLCAyKX1cXG4gd2hlbiBuYXZpZ2F0aW5nIHRvIFwiJHt0by5mdWxsUGF0aH1cIi4gQSByZWRpcmVjdCBtdXN0IGNvbnRhaW4gYSBuYW1lIG9yIHBhdGguIFRoaXMgd2lsbCBicmVhayBpbiBwcm9kdWN0aW9uLmApO1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCByZWRpcmVjdCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGFzc2lnbih7XG4gICAgICAgICAgICAgICAgcXVlcnk6IHRvLnF1ZXJ5LFxuICAgICAgICAgICAgICAgIGhhc2g6IHRvLmhhc2gsXG4gICAgICAgICAgICAgICAgLy8gYXZvaWQgdHJhbnNmZXJyaW5nIHBhcmFtcyBpZiB0aGUgcmVkaXJlY3QgaGFzIGEgcGF0aFxuICAgICAgICAgICAgICAgIHBhcmFtczogbmV3VGFyZ2V0TG9jYXRpb24ucGF0aCAhPSBudWxsID8ge30gOiB0by5wYXJhbXMsXG4gICAgICAgICAgICB9LCBuZXdUYXJnZXRMb2NhdGlvbik7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZnVuY3Rpb24gcHVzaFdpdGhSZWRpcmVjdCh0bywgcmVkaXJlY3RlZEZyb20pIHtcbiAgICAgICAgY29uc3QgdGFyZ2V0TG9jYXRpb24gPSAocGVuZGluZ0xvY2F0aW9uID0gcmVzb2x2ZSh0bykpO1xuICAgICAgICBjb25zdCBmcm9tID0gY3VycmVudFJvdXRlLnZhbHVlO1xuICAgICAgICBjb25zdCBkYXRhID0gdG8uc3RhdGU7XG4gICAgICAgIGNvbnN0IGZvcmNlID0gdG8uZm9yY2U7XG4gICAgICAgIC8vIHRvIGNvdWxkIGJlIGEgc3RyaW5nIHdoZXJlIGByZXBsYWNlYCBpcyBhIGZ1bmN0aW9uXG4gICAgICAgIGNvbnN0IHJlcGxhY2UgPSB0by5yZXBsYWNlID09PSB0cnVlO1xuICAgICAgICBjb25zdCBzaG91bGRSZWRpcmVjdCA9IGhhbmRsZVJlZGlyZWN0UmVjb3JkKHRhcmdldExvY2F0aW9uKTtcbiAgICAgICAgaWYgKHNob3VsZFJlZGlyZWN0KVxuICAgICAgICAgICAgcmV0dXJuIHB1c2hXaXRoUmVkaXJlY3QoYXNzaWduKGxvY2F0aW9uQXNPYmplY3Qoc2hvdWxkUmVkaXJlY3QpLCB7XG4gICAgICAgICAgICAgICAgc3RhdGU6IHR5cGVvZiBzaG91bGRSZWRpcmVjdCA9PT0gJ29iamVjdCdcbiAgICAgICAgICAgICAgICAgICAgPyBhc3NpZ24oe30sIGRhdGEsIHNob3VsZFJlZGlyZWN0LnN0YXRlKVxuICAgICAgICAgICAgICAgICAgICA6IGRhdGEsXG4gICAgICAgICAgICAgICAgZm9yY2UsXG4gICAgICAgICAgICAgICAgcmVwbGFjZSxcbiAgICAgICAgICAgIH0pLCBcbiAgICAgICAgICAgIC8vIGtlZXAgb3JpZ2luYWwgcmVkaXJlY3RlZEZyb20gaWYgaXQgZXhpc3RzXG4gICAgICAgICAgICByZWRpcmVjdGVkRnJvbSB8fCB0YXJnZXRMb2NhdGlvbik7XG4gICAgICAgIC8vIGlmIGl0IHdhcyBhIHJlZGlyZWN0IHdlIGFscmVhZHkgY2FsbGVkIGBwdXNoV2l0aFJlZGlyZWN0YCBhYm92ZVxuICAgICAgICBjb25zdCB0b0xvY2F0aW9uID0gdGFyZ2V0TG9jYXRpb247XG4gICAgICAgIHRvTG9jYXRpb24ucmVkaXJlY3RlZEZyb20gPSByZWRpcmVjdGVkRnJvbTtcbiAgICAgICAgbGV0IGZhaWx1cmU7XG4gICAgICAgIGlmICghZm9yY2UgJiYgaXNTYW1lUm91dGVMb2NhdGlvbihzdHJpbmdpZnlRdWVyeSQxLCBmcm9tLCB0YXJnZXRMb2NhdGlvbikpIHtcbiAgICAgICAgICAgIGZhaWx1cmUgPSBjcmVhdGVSb3V0ZXJFcnJvcigxNiAvKiBFcnJvclR5cGVzLk5BVklHQVRJT05fRFVQTElDQVRFRCAqLywgeyB0bzogdG9Mb2NhdGlvbiwgZnJvbSB9KTtcbiAgICAgICAgICAgIC8vIHRyaWdnZXIgc2Nyb2xsIHRvIGFsbG93IHNjcm9sbGluZyB0byB0aGUgc2FtZSBhbmNob3JcbiAgICAgICAgICAgIGhhbmRsZVNjcm9sbChmcm9tLCBmcm9tLCBcbiAgICAgICAgICAgIC8vIHRoaXMgaXMgYSBwdXNoLCB0aGUgb25seSB3YXkgZm9yIGl0IHRvIGJlIHRyaWdnZXJlZCBmcm9tIGFcbiAgICAgICAgICAgIC8vIGhpc3RvcnkubGlzdGVuIGlzIHdpdGggYSByZWRpcmVjdCwgd2hpY2ggbWFrZXMgaXQgYmVjb21lIGEgcHVzaFxuICAgICAgICAgICAgdHJ1ZSwgXG4gICAgICAgICAgICAvLyBUaGlzIGNhbm5vdCBiZSB0aGUgZmlyc3QgbmF2aWdhdGlvbiBiZWNhdXNlIHRoZSBpbml0aWFsIGxvY2F0aW9uXG4gICAgICAgICAgICAvLyBjYW5ub3QgYmUgbWFudWFsbHkgbmF2aWdhdGVkIHRvXG4gICAgICAgICAgICBmYWxzZSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIChmYWlsdXJlID8gUHJvbWlzZS5yZXNvbHZlKGZhaWx1cmUpIDogbmF2aWdhdGUodG9Mb2NhdGlvbiwgZnJvbSkpXG4gICAgICAgICAgICAuY2F0Y2goKGVycm9yKSA9PiBpc05hdmlnYXRpb25GYWlsdXJlKGVycm9yKVxuICAgICAgICAgICAgPyAvLyBuYXZpZ2F0aW9uIHJlZGlyZWN0cyBzdGlsbCBtYXJrIHRoZSByb3V0ZXIgYXMgcmVhZHlcbiAgICAgICAgICAgICAgICBpc05hdmlnYXRpb25GYWlsdXJlKGVycm9yLCAyIC8qIEVycm9yVHlwZXMuTkFWSUdBVElPTl9HVUFSRF9SRURJUkVDVCAqLylcbiAgICAgICAgICAgICAgICAgICAgPyBlcnJvclxuICAgICAgICAgICAgICAgICAgICA6IG1hcmtBc1JlYWR5KGVycm9yKSAvLyBhbHNvIHJldHVybnMgdGhlIGVycm9yXG4gICAgICAgICAgICA6IC8vIHJlamVjdCBhbnkgdW5rbm93biBlcnJvclxuICAgICAgICAgICAgICAgIHRyaWdnZXJFcnJvcihlcnJvciwgdG9Mb2NhdGlvbiwgZnJvbSkpXG4gICAgICAgICAgICAudGhlbigoZmFpbHVyZSkgPT4ge1xuICAgICAgICAgICAgaWYgKGZhaWx1cmUpIHtcbiAgICAgICAgICAgICAgICBpZiAoaXNOYXZpZ2F0aW9uRmFpbHVyZShmYWlsdXJlLCAyIC8qIEVycm9yVHlwZXMuTkFWSUdBVElPTl9HVUFSRF9SRURJUkVDVCAqLykpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gd2UgYXJlIHJlZGlyZWN0aW5nIHRvIHRoZSBzYW1lIGxvY2F0aW9uIHdlIHdlcmUgYWxyZWFkeSBhdFxuICAgICAgICAgICAgICAgICAgICAgICAgaXNTYW1lUm91dGVMb2NhdGlvbihzdHJpbmdpZnlRdWVyeSQxLCByZXNvbHZlKGZhaWx1cmUudG8pLCB0b0xvY2F0aW9uKSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gYW5kIHdlIGhhdmUgZG9uZSBpdCBhIGNvdXBsZSBvZiB0aW1lc1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVkaXJlY3RlZEZyb20gJiZcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3I6IGFkZGVkIG9ubHkgaW4gZGV2XG4gICAgICAgICAgICAgICAgICAgICAgICAocmVkaXJlY3RlZEZyb20uX2NvdW50ID0gcmVkaXJlY3RlZEZyb20uX2NvdW50XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPyAvLyBAdHMtZXhwZWN0LWVycm9yXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlZGlyZWN0ZWRGcm9tLl9jb3VudCArIDFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IDEpID4gMzApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHdhcm4oYERldGVjdGVkIGEgcG9zc2libHkgaW5maW5pdGUgcmVkaXJlY3Rpb24gaW4gYSBuYXZpZ2F0aW9uIGd1YXJkIHdoZW4gZ29pbmcgZnJvbSBcIiR7ZnJvbS5mdWxsUGF0aH1cIiB0byBcIiR7dG9Mb2NhdGlvbi5mdWxsUGF0aH1cIi4gQWJvcnRpbmcgdG8gYXZvaWQgYSBTdGFjayBPdmVyZmxvdy5cXG4gQXJlIHlvdSBhbHdheXMgcmV0dXJuaW5nIGEgbmV3IGxvY2F0aW9uIHdpdGhpbiBhIG5hdmlnYXRpb24gZ3VhcmQ/IFRoYXQgd291bGQgbGVhZCB0byB0aGlzIGVycm9yLiBPbmx5IHJldHVybiB3aGVuIHJlZGlyZWN0aW5nIG9yIGFib3J0aW5nLCB0aGF0IHNob3VsZCBmaXggdGhpcy4gVGhpcyBtaWdodCBicmVhayBpbiBwcm9kdWN0aW9uIGlmIG5vdCBmaXhlZC5gKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChuZXcgRXJyb3IoJ0luZmluaXRlIHJlZGlyZWN0IGluIG5hdmlnYXRpb24gZ3VhcmQnKSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHB1c2hXaXRoUmVkaXJlY3QoXG4gICAgICAgICAgICAgICAgICAgIC8vIGtlZXAgb3B0aW9uc1xuICAgICAgICAgICAgICAgICAgICBhc3NpZ24oe1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gcHJlc2VydmUgYW4gZXhpc3RpbmcgcmVwbGFjZW1lbnQgYnV0IGFsbG93IHRoZSByZWRpcmVjdCB0byBvdmVycmlkZSBpdFxuICAgICAgICAgICAgICAgICAgICAgICAgcmVwbGFjZSxcbiAgICAgICAgICAgICAgICAgICAgfSwgbG9jYXRpb25Bc09iamVjdChmYWlsdXJlLnRvKSwge1xuICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGU6IHR5cGVvZiBmYWlsdXJlLnRvID09PSAnb2JqZWN0J1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gYXNzaWduKHt9LCBkYXRhLCBmYWlsdXJlLnRvLnN0YXRlKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogZGF0YSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvcmNlLFxuICAgICAgICAgICAgICAgICAgICB9KSwgXG4gICAgICAgICAgICAgICAgICAgIC8vIHByZXNlcnZlIHRoZSBvcmlnaW5hbCByZWRpcmVjdGVkRnJvbSBpZiBhbnlcbiAgICAgICAgICAgICAgICAgICAgcmVkaXJlY3RlZEZyb20gfHwgdG9Mb2NhdGlvbik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gaWYgd2UgZmFpbCB3ZSBkb24ndCBmaW5hbGl6ZSB0aGUgbmF2aWdhdGlvblxuICAgICAgICAgICAgICAgIGZhaWx1cmUgPSBmaW5hbGl6ZU5hdmlnYXRpb24odG9Mb2NhdGlvbiwgZnJvbSwgdHJ1ZSwgcmVwbGFjZSwgZGF0YSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0cmlnZ2VyQWZ0ZXJFYWNoKHRvTG9jYXRpb24sIGZyb20sIGZhaWx1cmUpO1xuICAgICAgICAgICAgcmV0dXJuIGZhaWx1cmU7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBIZWxwZXIgdG8gcmVqZWN0IGFuZCBza2lwIGFsbCBuYXZpZ2F0aW9uIGd1YXJkcyBpZiBhIG5ldyBuYXZpZ2F0aW9uIGhhcHBlbmVkXG4gICAgICogQHBhcmFtIHRvXG4gICAgICogQHBhcmFtIGZyb21cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBjaGVja0NhbmNlbGVkTmF2aWdhdGlvbkFuZFJlamVjdCh0bywgZnJvbSkge1xuICAgICAgICBjb25zdCBlcnJvciA9IGNoZWNrQ2FuY2VsZWROYXZpZ2F0aW9uKHRvLCBmcm9tKTtcbiAgICAgICAgcmV0dXJuIGVycm9yID8gUHJvbWlzZS5yZWplY3QoZXJyb3IpIDogUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHJ1bldpdGhDb250ZXh0KGZuKSB7XG4gICAgICAgIGNvbnN0IGFwcCA9IGluc3RhbGxlZEFwcHMudmFsdWVzKCkubmV4dCgpLnZhbHVlO1xuICAgICAgICAvLyBzdXBwb3J0IFZ1ZSA8IDMuM1xuICAgICAgICByZXR1cm4gYXBwICYmIHR5cGVvZiBhcHAucnVuV2l0aENvbnRleHQgPT09ICdmdW5jdGlvbidcbiAgICAgICAgICAgID8gYXBwLnJ1bldpdGhDb250ZXh0KGZuKVxuICAgICAgICAgICAgOiBmbigpO1xuICAgIH1cbiAgICAvLyBUT0RPOiByZWZhY3RvciB0aGUgd2hvbGUgYmVmb3JlIGd1YXJkcyBieSBpbnRlcm5hbGx5IHVzaW5nIHJvdXRlci5iZWZvcmVFYWNoXG4gICAgZnVuY3Rpb24gbmF2aWdhdGUodG8sIGZyb20pIHtcbiAgICAgICAgbGV0IGd1YXJkcztcbiAgICAgICAgY29uc3QgW2xlYXZpbmdSZWNvcmRzLCB1cGRhdGluZ1JlY29yZHMsIGVudGVyaW5nUmVjb3Jkc10gPSBleHRyYWN0Q2hhbmdpbmdSZWNvcmRzKHRvLCBmcm9tKTtcbiAgICAgICAgLy8gYWxsIGNvbXBvbmVudHMgaGVyZSBoYXZlIGJlZW4gcmVzb2x2ZWQgb25jZSBiZWNhdXNlIHdlIGFyZSBsZWF2aW5nXG4gICAgICAgIGd1YXJkcyA9IGV4dHJhY3RDb21wb25lbnRzR3VhcmRzKGxlYXZpbmdSZWNvcmRzLnJldmVyc2UoKSwgJ2JlZm9yZVJvdXRlTGVhdmUnLCB0bywgZnJvbSk7XG4gICAgICAgIC8vIGxlYXZpbmdSZWNvcmRzIGlzIGFscmVhZHkgcmV2ZXJzZWRcbiAgICAgICAgZm9yIChjb25zdCByZWNvcmQgb2YgbGVhdmluZ1JlY29yZHMpIHtcbiAgICAgICAgICAgIHJlY29yZC5sZWF2ZUd1YXJkcy5mb3JFYWNoKGd1YXJkID0+IHtcbiAgICAgICAgICAgICAgICBndWFyZHMucHVzaChndWFyZFRvUHJvbWlzZUZuKGd1YXJkLCB0bywgZnJvbSkpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgY2FuY2VsZWROYXZpZ2F0aW9uQ2hlY2sgPSBjaGVja0NhbmNlbGVkTmF2aWdhdGlvbkFuZFJlamVjdC5iaW5kKG51bGwsIHRvLCBmcm9tKTtcbiAgICAgICAgZ3VhcmRzLnB1c2goY2FuY2VsZWROYXZpZ2F0aW9uQ2hlY2spO1xuICAgICAgICAvLyBydW4gdGhlIHF1ZXVlIG9mIHBlciByb3V0ZSBiZWZvcmVSb3V0ZUxlYXZlIGd1YXJkc1xuICAgICAgICByZXR1cm4gKHJ1bkd1YXJkUXVldWUoZ3VhcmRzKVxuICAgICAgICAgICAgLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgLy8gY2hlY2sgZ2xvYmFsIGd1YXJkcyBiZWZvcmVFYWNoXG4gICAgICAgICAgICBndWFyZHMgPSBbXTtcbiAgICAgICAgICAgIGZvciAoY29uc3QgZ3VhcmQgb2YgYmVmb3JlR3VhcmRzLmxpc3QoKSkge1xuICAgICAgICAgICAgICAgIGd1YXJkcy5wdXNoKGd1YXJkVG9Qcm9taXNlRm4oZ3VhcmQsIHRvLCBmcm9tKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBndWFyZHMucHVzaChjYW5jZWxlZE5hdmlnYXRpb25DaGVjayk7XG4gICAgICAgICAgICByZXR1cm4gcnVuR3VhcmRRdWV1ZShndWFyZHMpO1xuICAgICAgICB9KVxuICAgICAgICAgICAgLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgLy8gY2hlY2sgaW4gY29tcG9uZW50cyBiZWZvcmVSb3V0ZVVwZGF0ZVxuICAgICAgICAgICAgZ3VhcmRzID0gZXh0cmFjdENvbXBvbmVudHNHdWFyZHModXBkYXRpbmdSZWNvcmRzLCAnYmVmb3JlUm91dGVVcGRhdGUnLCB0bywgZnJvbSk7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IHJlY29yZCBvZiB1cGRhdGluZ1JlY29yZHMpIHtcbiAgICAgICAgICAgICAgICByZWNvcmQudXBkYXRlR3VhcmRzLmZvckVhY2goZ3VhcmQgPT4ge1xuICAgICAgICAgICAgICAgICAgICBndWFyZHMucHVzaChndWFyZFRvUHJvbWlzZUZuKGd1YXJkLCB0bywgZnJvbSkpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZ3VhcmRzLnB1c2goY2FuY2VsZWROYXZpZ2F0aW9uQ2hlY2spO1xuICAgICAgICAgICAgLy8gcnVuIHRoZSBxdWV1ZSBvZiBwZXIgcm91dGUgYmVmb3JlRW50ZXIgZ3VhcmRzXG4gICAgICAgICAgICByZXR1cm4gcnVuR3VhcmRRdWV1ZShndWFyZHMpO1xuICAgICAgICB9KVxuICAgICAgICAgICAgLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgLy8gY2hlY2sgdGhlIHJvdXRlIGJlZm9yZUVudGVyXG4gICAgICAgICAgICBndWFyZHMgPSBbXTtcbiAgICAgICAgICAgIGZvciAoY29uc3QgcmVjb3JkIG9mIGVudGVyaW5nUmVjb3Jkcykge1xuICAgICAgICAgICAgICAgIC8vIGRvIG5vdCB0cmlnZ2VyIGJlZm9yZUVudGVyIG9uIHJldXNlZCB2aWV3c1xuICAgICAgICAgICAgICAgIGlmIChyZWNvcmQuYmVmb3JlRW50ZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGlzQXJyYXkocmVjb3JkLmJlZm9yZUVudGVyKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBiZWZvcmVFbnRlciBvZiByZWNvcmQuYmVmb3JlRW50ZXIpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZ3VhcmRzLnB1c2goZ3VhcmRUb1Byb21pc2VGbihiZWZvcmVFbnRlciwgdG8sIGZyb20pKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGd1YXJkcy5wdXNoKGd1YXJkVG9Qcm9taXNlRm4ocmVjb3JkLmJlZm9yZUVudGVyLCB0bywgZnJvbSkpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZ3VhcmRzLnB1c2goY2FuY2VsZWROYXZpZ2F0aW9uQ2hlY2spO1xuICAgICAgICAgICAgLy8gcnVuIHRoZSBxdWV1ZSBvZiBwZXIgcm91dGUgYmVmb3JlRW50ZXIgZ3VhcmRzXG4gICAgICAgICAgICByZXR1cm4gcnVuR3VhcmRRdWV1ZShndWFyZHMpO1xuICAgICAgICB9KVxuICAgICAgICAgICAgLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgLy8gTk9URTogYXQgdGhpcyBwb2ludCB0by5tYXRjaGVkIGlzIG5vcm1hbGl6ZWQgYW5kIGRvZXMgbm90IGNvbnRhaW4gYW55ICgpID0+IFByb21pc2U8Q29tcG9uZW50PlxuICAgICAgICAgICAgLy8gY2xlYXIgZXhpc3RpbmcgZW50ZXJDYWxsYmFja3MsIHRoZXNlIGFyZSBhZGRlZCBieSBleHRyYWN0Q29tcG9uZW50c0d1YXJkc1xuICAgICAgICAgICAgdG8ubWF0Y2hlZC5mb3JFYWNoKHJlY29yZCA9PiAocmVjb3JkLmVudGVyQ2FsbGJhY2tzID0ge30pKTtcbiAgICAgICAgICAgIC8vIGNoZWNrIGluLWNvbXBvbmVudCBiZWZvcmVSb3V0ZUVudGVyXG4gICAgICAgICAgICBndWFyZHMgPSBleHRyYWN0Q29tcG9uZW50c0d1YXJkcyhlbnRlcmluZ1JlY29yZHMsICdiZWZvcmVSb3V0ZUVudGVyJywgdG8sIGZyb20sIHJ1bldpdGhDb250ZXh0KTtcbiAgICAgICAgICAgIGd1YXJkcy5wdXNoKGNhbmNlbGVkTmF2aWdhdGlvbkNoZWNrKTtcbiAgICAgICAgICAgIC8vIHJ1biB0aGUgcXVldWUgb2YgcGVyIHJvdXRlIGJlZm9yZUVudGVyIGd1YXJkc1xuICAgICAgICAgICAgcmV0dXJuIHJ1bkd1YXJkUXVldWUoZ3VhcmRzKTtcbiAgICAgICAgfSlcbiAgICAgICAgICAgIC50aGVuKCgpID0+IHtcbiAgICAgICAgICAgIC8vIGNoZWNrIGdsb2JhbCBndWFyZHMgYmVmb3JlUmVzb2x2ZVxuICAgICAgICAgICAgZ3VhcmRzID0gW107XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGd1YXJkIG9mIGJlZm9yZVJlc29sdmVHdWFyZHMubGlzdCgpKSB7XG4gICAgICAgICAgICAgICAgZ3VhcmRzLnB1c2goZ3VhcmRUb1Byb21pc2VGbihndWFyZCwgdG8sIGZyb20pKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGd1YXJkcy5wdXNoKGNhbmNlbGVkTmF2aWdhdGlvbkNoZWNrKTtcbiAgICAgICAgICAgIHJldHVybiBydW5HdWFyZFF1ZXVlKGd1YXJkcyk7XG4gICAgICAgIH0pXG4gICAgICAgICAgICAvLyBjYXRjaCBhbnkgbmF2aWdhdGlvbiBjYW5jZWxlZFxuICAgICAgICAgICAgLmNhdGNoKGVyciA9PiBpc05hdmlnYXRpb25GYWlsdXJlKGVyciwgOCAvKiBFcnJvclR5cGVzLk5BVklHQVRJT05fQ0FOQ0VMTEVEICovKVxuICAgICAgICAgICAgPyBlcnJcbiAgICAgICAgICAgIDogUHJvbWlzZS5yZWplY3QoZXJyKSkpO1xuICAgIH1cbiAgICBmdW5jdGlvbiB0cmlnZ2VyQWZ0ZXJFYWNoKHRvLCBmcm9tLCBmYWlsdXJlKSB7XG4gICAgICAgIC8vIG5hdmlnYXRpb24gaXMgY29uZmlybWVkLCBjYWxsIGFmdGVyR3VhcmRzXG4gICAgICAgIC8vIFRPRE86IHdyYXAgd2l0aCBlcnJvciBoYW5kbGVyc1xuICAgICAgICBhZnRlckd1YXJkc1xuICAgICAgICAgICAgLmxpc3QoKVxuICAgICAgICAgICAgLmZvckVhY2goZ3VhcmQgPT4gcnVuV2l0aENvbnRleHQoKCkgPT4gZ3VhcmQodG8sIGZyb20sIGZhaWx1cmUpKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIC0gQ2xlYW5zIHVwIGFueSBuYXZpZ2F0aW9uIGd1YXJkc1xuICAgICAqIC0gQ2hhbmdlcyB0aGUgdXJsIGlmIG5lY2Vzc2FyeVxuICAgICAqIC0gQ2FsbHMgdGhlIHNjcm9sbEJlaGF2aW9yXG4gICAgICovXG4gICAgZnVuY3Rpb24gZmluYWxpemVOYXZpZ2F0aW9uKHRvTG9jYXRpb24sIGZyb20sIGlzUHVzaCwgcmVwbGFjZSwgZGF0YSkge1xuICAgICAgICAvLyBhIG1vcmUgcmVjZW50IG5hdmlnYXRpb24gdG9vayBwbGFjZVxuICAgICAgICBjb25zdCBlcnJvciA9IGNoZWNrQ2FuY2VsZWROYXZpZ2F0aW9uKHRvTG9jYXRpb24sIGZyb20pO1xuICAgICAgICBpZiAoZXJyb3IpXG4gICAgICAgICAgICByZXR1cm4gZXJyb3I7XG4gICAgICAgIC8vIG9ubHkgY29uc2lkZXIgYXMgcHVzaCBpZiBpdCdzIG5vdCB0aGUgZmlyc3QgbmF2aWdhdGlvblxuICAgICAgICBjb25zdCBpc0ZpcnN0TmF2aWdhdGlvbiA9IGZyb20gPT09IFNUQVJUX0xPQ0FUSU9OX05PUk1BTElaRUQ7XG4gICAgICAgIGNvbnN0IHN0YXRlID0gIWlzQnJvd3NlciA/IHt9IDogaGlzdG9yeS5zdGF0ZTtcbiAgICAgICAgLy8gY2hhbmdlIFVSTCBvbmx5IGlmIHRoZSB1c2VyIGRpZCBhIHB1c2gvcmVwbGFjZSBhbmQgaWYgaXQncyBub3QgdGhlIGluaXRpYWwgbmF2aWdhdGlvbiBiZWNhdXNlXG4gICAgICAgIC8vIGl0J3MganVzdCByZWZsZWN0aW5nIHRoZSB1cmxcbiAgICAgICAgaWYgKGlzUHVzaCkge1xuICAgICAgICAgICAgLy8gb24gdGhlIGluaXRpYWwgbmF2aWdhdGlvbiwgd2Ugd2FudCB0byByZXVzZSB0aGUgc2Nyb2xsIHBvc2l0aW9uIGZyb21cbiAgICAgICAgICAgIC8vIGhpc3Rvcnkgc3RhdGUgaWYgaXQgZXhpc3RzXG4gICAgICAgICAgICBpZiAocmVwbGFjZSB8fCBpc0ZpcnN0TmF2aWdhdGlvbilcbiAgICAgICAgICAgICAgICByb3V0ZXJIaXN0b3J5LnJlcGxhY2UodG9Mb2NhdGlvbi5mdWxsUGF0aCwgYXNzaWduKHtcbiAgICAgICAgICAgICAgICAgICAgc2Nyb2xsOiBpc0ZpcnN0TmF2aWdhdGlvbiAmJiBzdGF0ZSAmJiBzdGF0ZS5zY3JvbGwsXG4gICAgICAgICAgICAgICAgfSwgZGF0YSkpO1xuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgIHJvdXRlckhpc3RvcnkucHVzaCh0b0xvY2F0aW9uLmZ1bGxQYXRoLCBkYXRhKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBhY2NlcHQgY3VycmVudCBuYXZpZ2F0aW9uXG4gICAgICAgIGN1cnJlbnRSb3V0ZS52YWx1ZSA9IHRvTG9jYXRpb247XG4gICAgICAgIGhhbmRsZVNjcm9sbCh0b0xvY2F0aW9uLCBmcm9tLCBpc1B1c2gsIGlzRmlyc3ROYXZpZ2F0aW9uKTtcbiAgICAgICAgbWFya0FzUmVhZHkoKTtcbiAgICB9XG4gICAgbGV0IHJlbW92ZUhpc3RvcnlMaXN0ZW5lcjtcbiAgICAvLyBhdHRhY2ggbGlzdGVuZXIgdG8gaGlzdG9yeSB0byB0cmlnZ2VyIG5hdmlnYXRpb25zXG4gICAgZnVuY3Rpb24gc2V0dXBMaXN0ZW5lcnMoKSB7XG4gICAgICAgIC8vIGF2b2lkIHNldHRpbmcgdXAgbGlzdGVuZXJzIHR3aWNlIGR1ZSB0byBhbiBpbnZhbGlkIGZpcnN0IG5hdmlnYXRpb25cbiAgICAgICAgaWYgKHJlbW92ZUhpc3RvcnlMaXN0ZW5lcilcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgcmVtb3ZlSGlzdG9yeUxpc3RlbmVyID0gcm91dGVySGlzdG9yeS5saXN0ZW4oKHRvLCBfZnJvbSwgaW5mbykgPT4ge1xuICAgICAgICAgICAgaWYgKCFyb3V0ZXIubGlzdGVuaW5nKVxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIC8vIGNhbm5vdCBiZSBhIHJlZGlyZWN0IHJvdXRlIGJlY2F1c2UgaXQgd2FzIGluIGhpc3RvcnlcbiAgICAgICAgICAgIGNvbnN0IHRvTG9jYXRpb24gPSByZXNvbHZlKHRvKTtcbiAgICAgICAgICAgIC8vIGR1ZSB0byBkeW5hbWljIHJvdXRpbmcsIGFuZCB0byBoYXNoIGhpc3Rvcnkgd2l0aCBtYW51YWwgbmF2aWdhdGlvblxuICAgICAgICAgICAgLy8gKG1hbnVhbGx5IGNoYW5naW5nIHRoZSB1cmwgb3IgY2FsbGluZyBoaXN0b3J5Lmhhc2ggPSAnIy9zb21ld2hlcmUnKSxcbiAgICAgICAgICAgIC8vIHRoZXJlIGNvdWxkIGJlIGEgcmVkaXJlY3QgcmVjb3JkIGluIGhpc3RvcnlcbiAgICAgICAgICAgIGNvbnN0IHNob3VsZFJlZGlyZWN0ID0gaGFuZGxlUmVkaXJlY3RSZWNvcmQodG9Mb2NhdGlvbik7XG4gICAgICAgICAgICBpZiAoc2hvdWxkUmVkaXJlY3QpIHtcbiAgICAgICAgICAgICAgICBwdXNoV2l0aFJlZGlyZWN0KGFzc2lnbihzaG91bGRSZWRpcmVjdCwgeyByZXBsYWNlOiB0cnVlIH0pLCB0b0xvY2F0aW9uKS5jYXRjaChub29wKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBwZW5kaW5nTG9jYXRpb24gPSB0b0xvY2F0aW9uO1xuICAgICAgICAgICAgY29uc3QgZnJvbSA9IGN1cnJlbnRSb3V0ZS52YWx1ZTtcbiAgICAgICAgICAgIC8vIFRPRE86IHNob3VsZCBiZSBtb3ZlZCB0byB3ZWIgaGlzdG9yeT9cbiAgICAgICAgICAgIGlmIChpc0Jyb3dzZXIpIHtcbiAgICAgICAgICAgICAgICBzYXZlU2Nyb2xsUG9zaXRpb24oZ2V0U2Nyb2xsS2V5KGZyb20uZnVsbFBhdGgsIGluZm8uZGVsdGEpLCBjb21wdXRlU2Nyb2xsUG9zaXRpb24oKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBuYXZpZ2F0ZSh0b0xvY2F0aW9uLCBmcm9tKVxuICAgICAgICAgICAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoaXNOYXZpZ2F0aW9uRmFpbHVyZShlcnJvciwgNCAvKiBFcnJvclR5cGVzLk5BVklHQVRJT05fQUJPUlRFRCAqLyB8IDggLyogRXJyb3JUeXBlcy5OQVZJR0FUSU9OX0NBTkNFTExFRCAqLykpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGVycm9yO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoaXNOYXZpZ2F0aW9uRmFpbHVyZShlcnJvciwgMiAvKiBFcnJvclR5cGVzLk5BVklHQVRJT05fR1VBUkRfUkVESVJFQ1QgKi8pKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIEhlcmUgd2UgY291bGQgY2FsbCBpZiAoaW5mby5kZWx0YSkgcm91dGVySGlzdG9yeS5nbygtaW5mby5kZWx0YSxcbiAgICAgICAgICAgICAgICAgICAgLy8gZmFsc2UpIGJ1dCB0aGlzIGlzIGJ1ZyBwcm9uZSBhcyB3ZSBoYXZlIG5vIHdheSB0byB3YWl0IHRoZVxuICAgICAgICAgICAgICAgICAgICAvLyBuYXZpZ2F0aW9uIHRvIGJlIGZpbmlzaGVkIGJlZm9yZSBjYWxsaW5nIHB1c2hXaXRoUmVkaXJlY3QuIFVzaW5nXG4gICAgICAgICAgICAgICAgICAgIC8vIGEgc2V0VGltZW91dCBvZiAxNm1zIHNlZW1zIHRvIHdvcmsgYnV0IHRoZXJlIGlzIG5vIGd1YXJhbnRlZSBmb3JcbiAgICAgICAgICAgICAgICAgICAgLy8gaXQgdG8gd29yayBvbiBldmVyeSBicm93c2VyLiBTbyBpbnN0ZWFkIHdlIGRvIG5vdCByZXN0b3JlIHRoZVxuICAgICAgICAgICAgICAgICAgICAvLyBoaXN0b3J5IGVudHJ5IGFuZCB0cmlnZ2VyIGEgbmV3IG5hdmlnYXRpb24gYXMgcmVxdWVzdGVkIGJ5IHRoZVxuICAgICAgICAgICAgICAgICAgICAvLyBuYXZpZ2F0aW9uIGd1YXJkLlxuICAgICAgICAgICAgICAgICAgICAvLyB0aGUgZXJyb3IgaXMgYWxyZWFkeSBoYW5kbGVkIGJ5IHJvdXRlci5wdXNoIHdlIGp1c3Qgd2FudCB0byBhdm9pZFxuICAgICAgICAgICAgICAgICAgICAvLyBsb2dnaW5nIHRoZSBlcnJvclxuICAgICAgICAgICAgICAgICAgICBwdXNoV2l0aFJlZGlyZWN0KGVycm9yLnRvLCB0b0xvY2F0aW9uXG4gICAgICAgICAgICAgICAgICAgIC8vIGF2b2lkIGFuIHVuY2F1Z2h0IHJlamVjdGlvbiwgbGV0IHB1c2ggY2FsbCB0cmlnZ2VyRXJyb3JcbiAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oZmFpbHVyZSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBtYW51YWwgY2hhbmdlIGluIGhhc2ggaGlzdG9yeSAjOTE2IGVuZGluZyB1cCBpbiB0aGUgVVJMIG5vdFxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gY2hhbmdpbmcsIGJ1dCBpdCB3YXMgY2hhbmdlZCBieSB0aGUgbWFudWFsIHVybCBjaGFuZ2UsIHNvIHdlXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBuZWVkIHRvIG1hbnVhbGx5IGNoYW5nZSBpdCBvdXJzZWx2ZXNcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpc05hdmlnYXRpb25GYWlsdXJlKGZhaWx1cmUsIDQgLyogRXJyb3JUeXBlcy5OQVZJR0FUSU9OX0FCT1JURUQgKi8gfFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDE2IC8qIEVycm9yVHlwZXMuTkFWSUdBVElPTl9EVVBMSUNBVEVEICovKSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICFpbmZvLmRlbHRhICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5mby50eXBlID09PSBOYXZpZ2F0aW9uVHlwZS5wb3ApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByb3V0ZXJIaXN0b3J5LmdvKC0xLCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAuY2F0Y2gobm9vcCk7XG4gICAgICAgICAgICAgICAgICAgIC8vIGF2b2lkIHRoZSB0aGVuIGJyYW5jaFxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gZG8gbm90IHJlc3RvcmUgaGlzdG9yeSBvbiB1bmtub3duIGRpcmVjdGlvblxuICAgICAgICAgICAgICAgIGlmIChpbmZvLmRlbHRhKSB7XG4gICAgICAgICAgICAgICAgICAgIHJvdXRlckhpc3RvcnkuZ28oLWluZm8uZGVsdGEsIGZhbHNlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gdW5yZWNvZ25pemVkIGVycm9yLCB0cmFuc2ZlciB0byB0aGUgZ2xvYmFsIGhhbmRsZXJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJpZ2dlckVycm9yKGVycm9yLCB0b0xvY2F0aW9uLCBmcm9tKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgLnRoZW4oKGZhaWx1cmUpID0+IHtcbiAgICAgICAgICAgICAgICBmYWlsdXJlID1cbiAgICAgICAgICAgICAgICAgICAgZmFpbHVyZSB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgZmluYWxpemVOYXZpZ2F0aW9uKFxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gYWZ0ZXIgbmF2aWdhdGlvbiwgYWxsIG1hdGNoZWQgY29tcG9uZW50cyBhcmUgcmVzb2x2ZWRcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvTG9jYXRpb24sIGZyb20sIGZhbHNlKTtcbiAgICAgICAgICAgICAgICAvLyByZXZlcnQgdGhlIG5hdmlnYXRpb25cbiAgICAgICAgICAgICAgICBpZiAoZmFpbHVyZSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoaW5mby5kZWx0YSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gYSBuZXcgbmF2aWdhdGlvbiBoYXMgYmVlbiB0cmlnZ2VyZWQsIHNvIHdlIGRvIG5vdCB3YW50IHRvIHJldmVydCwgdGhhdCB3aWxsIGNoYW5nZSB0aGUgY3VycmVudCBoaXN0b3J5XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBlbnRyeSB3aGlsZSBhIGRpZmZlcmVudCByb3V0ZSBpcyBkaXNwbGF5ZWRcbiAgICAgICAgICAgICAgICAgICAgICAgICFpc05hdmlnYXRpb25GYWlsdXJlKGZhaWx1cmUsIDggLyogRXJyb3JUeXBlcy5OQVZJR0FUSU9OX0NBTkNFTExFRCAqLykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJvdXRlckhpc3RvcnkuZ28oLWluZm8uZGVsdGEsIGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChpbmZvLnR5cGUgPT09IE5hdmlnYXRpb25UeXBlLnBvcCAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgaXNOYXZpZ2F0aW9uRmFpbHVyZShmYWlsdXJlLCA0IC8qIEVycm9yVHlwZXMuTkFWSUdBVElPTl9BQk9SVEVEICovIHwgMTYgLyogRXJyb3JUeXBlcy5OQVZJR0FUSU9OX0RVUExJQ0FURUQgKi8pKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBtYW51YWwgY2hhbmdlIGluIGhhc2ggaGlzdG9yeSAjOTE2XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBpdCdzIGxpa2UgYSBwdXNoIGJ1dCBsYWNrcyB0aGUgaW5mb3JtYXRpb24gb2YgdGhlIGRpcmVjdGlvblxuICAgICAgICAgICAgICAgICAgICAgICAgcm91dGVySGlzdG9yeS5nbygtMSwgZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRyaWdnZXJBZnRlckVhY2godG9Mb2NhdGlvbiwgZnJvbSwgZmFpbHVyZSk7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIC8vIGF2b2lkIHdhcm5pbmdzIGluIHRoZSBjb25zb2xlIGFib3V0IHVuY2F1Z2h0IHJlamVjdGlvbnMsIHRoZXkgYXJlIGxvZ2dlZCBieSB0cmlnZ2VyRXJyb3JzXG4gICAgICAgICAgICAgICAgLmNhdGNoKG5vb3ApO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgLy8gSW5pdGlhbGl6YXRpb24gYW5kIEVycm9yc1xuICAgIGxldCByZWFkeUhhbmRsZXJzID0gdXNlQ2FsbGJhY2tzKCk7XG4gICAgbGV0IGVycm9yTGlzdGVuZXJzID0gdXNlQ2FsbGJhY2tzKCk7XG4gICAgbGV0IHJlYWR5O1xuICAgIC8qKlxuICAgICAqIFRyaWdnZXIgZXJyb3JMaXN0ZW5lcnMgYWRkZWQgdmlhIG9uRXJyb3IgYW5kIHRocm93cyB0aGUgZXJyb3IgYXMgd2VsbFxuICAgICAqXG4gICAgICogQHBhcmFtIGVycm9yIC0gZXJyb3IgdG8gdGhyb3dcbiAgICAgKiBAcGFyYW0gdG8gLSBsb2NhdGlvbiB3ZSB3ZXJlIG5hdmlnYXRpbmcgdG8gd2hlbiB0aGUgZXJyb3IgaGFwcGVuZWRcbiAgICAgKiBAcGFyYW0gZnJvbSAtIGxvY2F0aW9uIHdlIHdlcmUgbmF2aWdhdGluZyBmcm9tIHdoZW4gdGhlIGVycm9yIGhhcHBlbmVkXG4gICAgICogQHJldHVybnMgdGhlIGVycm9yIGFzIGEgcmVqZWN0ZWQgcHJvbWlzZVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIHRyaWdnZXJFcnJvcihlcnJvciwgdG8sIGZyb20pIHtcbiAgICAgICAgbWFya0FzUmVhZHkoZXJyb3IpO1xuICAgICAgICBjb25zdCBsaXN0ID0gZXJyb3JMaXN0ZW5lcnMubGlzdCgpO1xuICAgICAgICBpZiAobGlzdC5sZW5ndGgpIHtcbiAgICAgICAgICAgIGxpc3QuZm9yRWFjaChoYW5kbGVyID0+IGhhbmRsZXIoZXJyb3IsIHRvLCBmcm9tKSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpKSB7XG4gICAgICAgICAgICAgICAgd2FybigndW5jYXVnaHQgZXJyb3IgZHVyaW5nIHJvdXRlIG5hdmlnYXRpb246Jyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKGVycm9yKTtcbiAgICAgICAgfVxuICAgICAgICAvLyByZWplY3QgdGhlIGVycm9yIG5vIG1hdHRlciB0aGVyZSB3ZXJlIGVycm9yIGxpc3RlbmVycyBvciBub3RcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGVycm9yKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gaXNSZWFkeSgpIHtcbiAgICAgICAgaWYgKHJlYWR5ICYmIGN1cnJlbnRSb3V0ZS52YWx1ZSAhPT0gU1RBUlRfTE9DQVRJT05fTk9STUFMSVpFRClcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgICAgIHJlYWR5SGFuZGxlcnMuYWRkKFtyZXNvbHZlLCByZWplY3RdKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIG1hcmtBc1JlYWR5KGVycikge1xuICAgICAgICBpZiAoIXJlYWR5KSB7XG4gICAgICAgICAgICAvLyBzdGlsbCBub3QgcmVhZHkgaWYgYW4gZXJyb3IgaGFwcGVuZWRcbiAgICAgICAgICAgIHJlYWR5ID0gIWVycjtcbiAgICAgICAgICAgIHNldHVwTGlzdGVuZXJzKCk7XG4gICAgICAgICAgICByZWFkeUhhbmRsZXJzXG4gICAgICAgICAgICAgICAgLmxpc3QoKVxuICAgICAgICAgICAgICAgIC5mb3JFYWNoKChbcmVzb2x2ZSwgcmVqZWN0XSkgPT4gKGVyciA/IHJlamVjdChlcnIpIDogcmVzb2x2ZSgpKSk7XG4gICAgICAgICAgICByZWFkeUhhbmRsZXJzLnJlc2V0KCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGVycjtcbiAgICB9XG4gICAgLy8gU2Nyb2xsIGJlaGF2aW9yXG4gICAgZnVuY3Rpb24gaGFuZGxlU2Nyb2xsKHRvLCBmcm9tLCBpc1B1c2gsIGlzRmlyc3ROYXZpZ2F0aW9uKSB7XG4gICAgICAgIGNvbnN0IHsgc2Nyb2xsQmVoYXZpb3IgfSA9IG9wdGlvbnM7XG4gICAgICAgIGlmICghaXNCcm93c2VyIHx8ICFzY3JvbGxCZWhhdmlvcilcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICAgICAgY29uc3Qgc2Nyb2xsUG9zaXRpb24gPSAoIWlzUHVzaCAmJiBnZXRTYXZlZFNjcm9sbFBvc2l0aW9uKGdldFNjcm9sbEtleSh0by5mdWxsUGF0aCwgMCkpKSB8fFxuICAgICAgICAgICAgKChpc0ZpcnN0TmF2aWdhdGlvbiB8fCAhaXNQdXNoKSAmJlxuICAgICAgICAgICAgICAgIGhpc3Rvcnkuc3RhdGUgJiZcbiAgICAgICAgICAgICAgICBoaXN0b3J5LnN0YXRlLnNjcm9sbCkgfHxcbiAgICAgICAgICAgIG51bGw7XG4gICAgICAgIHJldHVybiBuZXh0VGljaygpXG4gICAgICAgICAgICAudGhlbigoKSA9PiBzY3JvbGxCZWhhdmlvcih0bywgZnJvbSwgc2Nyb2xsUG9zaXRpb24pKVxuICAgICAgICAgICAgLnRoZW4ocG9zaXRpb24gPT4gcG9zaXRpb24gJiYgc2Nyb2xsVG9Qb3NpdGlvbihwb3NpdGlvbikpXG4gICAgICAgICAgICAuY2F0Y2goZXJyID0+IHRyaWdnZXJFcnJvcihlcnIsIHRvLCBmcm9tKSk7XG4gICAgfVxuICAgIGNvbnN0IGdvID0gKGRlbHRhKSA9PiByb3V0ZXJIaXN0b3J5LmdvKGRlbHRhKTtcbiAgICBsZXQgc3RhcnRlZDtcbiAgICBjb25zdCBpbnN0YWxsZWRBcHBzID0gbmV3IFNldCgpO1xuICAgIGNvbnN0IHJvdXRlciA9IHtcbiAgICAgICAgY3VycmVudFJvdXRlLFxuICAgICAgICBsaXN0ZW5pbmc6IHRydWUsXG4gICAgICAgIGFkZFJvdXRlLFxuICAgICAgICByZW1vdmVSb3V0ZSxcbiAgICAgICAgaGFzUm91dGUsXG4gICAgICAgIGdldFJvdXRlcyxcbiAgICAgICAgcmVzb2x2ZSxcbiAgICAgICAgb3B0aW9ucyxcbiAgICAgICAgcHVzaCxcbiAgICAgICAgcmVwbGFjZSxcbiAgICAgICAgZ28sXG4gICAgICAgIGJhY2s6ICgpID0+IGdvKC0xKSxcbiAgICAgICAgZm9yd2FyZDogKCkgPT4gZ28oMSksXG4gICAgICAgIGJlZm9yZUVhY2g6IGJlZm9yZUd1YXJkcy5hZGQsXG4gICAgICAgIGJlZm9yZVJlc29sdmU6IGJlZm9yZVJlc29sdmVHdWFyZHMuYWRkLFxuICAgICAgICBhZnRlckVhY2g6IGFmdGVyR3VhcmRzLmFkZCxcbiAgICAgICAgb25FcnJvcjogZXJyb3JMaXN0ZW5lcnMuYWRkLFxuICAgICAgICBpc1JlYWR5LFxuICAgICAgICBpbnN0YWxsKGFwcCkge1xuICAgICAgICAgICAgY29uc3Qgcm91dGVyID0gdGhpcztcbiAgICAgICAgICAgIGFwcC5jb21wb25lbnQoJ1JvdXRlckxpbmsnLCBSb3V0ZXJMaW5rKTtcbiAgICAgICAgICAgIGFwcC5jb21wb25lbnQoJ1JvdXRlclZpZXcnLCBSb3V0ZXJWaWV3KTtcbiAgICAgICAgICAgIGFwcC5jb25maWcuZ2xvYmFsUHJvcGVydGllcy4kcm91dGVyID0gcm91dGVyO1xuICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGFwcC5jb25maWcuZ2xvYmFsUHJvcGVydGllcywgJyRyb3V0ZScsIHtcbiAgICAgICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgICAgIGdldDogKCkgPT4gdW5yZWYoY3VycmVudFJvdXRlKSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgLy8gdGhpcyBpbml0aWFsIG5hdmlnYXRpb24gaXMgb25seSBuZWNlc3Nhcnkgb24gY2xpZW50LCBvbiBzZXJ2ZXIgaXQgZG9lc24ndFxuICAgICAgICAgICAgLy8gbWFrZSBzZW5zZSBiZWNhdXNlIGl0IHdpbGwgY3JlYXRlIGFuIGV4dHJhIHVubmVjZXNzYXJ5IG5hdmlnYXRpb24gYW5kIGNvdWxkXG4gICAgICAgICAgICAvLyBsZWFkIHRvIHByb2JsZW1zXG4gICAgICAgICAgICBpZiAoaXNCcm93c2VyICYmXG4gICAgICAgICAgICAgICAgLy8gdXNlZCBmb3IgdGhlIGluaXRpYWwgbmF2aWdhdGlvbiBjbGllbnQgc2lkZSB0byBhdm9pZCBwdXNoaW5nXG4gICAgICAgICAgICAgICAgLy8gbXVsdGlwbGUgdGltZXMgd2hlbiB0aGUgcm91dGVyIGlzIHVzZWQgaW4gbXVsdGlwbGUgYXBwc1xuICAgICAgICAgICAgICAgICFzdGFydGVkICYmXG4gICAgICAgICAgICAgICAgY3VycmVudFJvdXRlLnZhbHVlID09PSBTVEFSVF9MT0NBVElPTl9OT1JNQUxJWkVEKSB7XG4gICAgICAgICAgICAgICAgLy8gc2VlIGFib3ZlXG4gICAgICAgICAgICAgICAgc3RhcnRlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgcHVzaChyb3V0ZXJIaXN0b3J5LmxvY2F0aW9uKS5jYXRjaChlcnIgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpKVxuICAgICAgICAgICAgICAgICAgICAgICAgd2FybignVW5leHBlY3RlZCBlcnJvciB3aGVuIHN0YXJ0aW5nIHRoZSByb3V0ZXI6JywgZXJyKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHJlYWN0aXZlUm91dGUgPSB7fTtcbiAgICAgICAgICAgIGZvciAoY29uc3Qga2V5IGluIFNUQVJUX0xPQ0FUSU9OX05PUk1BTElaRUQpIHtcbiAgICAgICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkocmVhY3RpdmVSb3V0ZSwga2V5LCB7XG4gICAgICAgICAgICAgICAgICAgIGdldDogKCkgPT4gY3VycmVudFJvdXRlLnZhbHVlW2tleV0sXG4gICAgICAgICAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBhcHAucHJvdmlkZShyb3V0ZXJLZXksIHJvdXRlcik7XG4gICAgICAgICAgICBhcHAucHJvdmlkZShyb3V0ZUxvY2F0aW9uS2V5LCBzaGFsbG93UmVhY3RpdmUocmVhY3RpdmVSb3V0ZSkpO1xuICAgICAgICAgICAgYXBwLnByb3ZpZGUocm91dGVyVmlld0xvY2F0aW9uS2V5LCBjdXJyZW50Um91dGUpO1xuICAgICAgICAgICAgY29uc3QgdW5tb3VudEFwcCA9IGFwcC51bm1vdW50O1xuICAgICAgICAgICAgaW5zdGFsbGVkQXBwcy5hZGQoYXBwKTtcbiAgICAgICAgICAgIGFwcC51bm1vdW50ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIGluc3RhbGxlZEFwcHMuZGVsZXRlKGFwcCk7XG4gICAgICAgICAgICAgICAgLy8gdGhlIHJvdXRlciBpcyBub3QgYXR0YWNoZWQgdG8gYW4gYXBwIGFueW1vcmVcbiAgICAgICAgICAgICAgICBpZiAoaW5zdGFsbGVkQXBwcy5zaXplIDwgMSkge1xuICAgICAgICAgICAgICAgICAgICAvLyBpbnZhbGlkYXRlIHRoZSBjdXJyZW50IG5hdmlnYXRpb25cbiAgICAgICAgICAgICAgICAgICAgcGVuZGluZ0xvY2F0aW9uID0gU1RBUlRfTE9DQVRJT05fTk9STUFMSVpFRDtcbiAgICAgICAgICAgICAgICAgICAgcmVtb3ZlSGlzdG9yeUxpc3RlbmVyICYmIHJlbW92ZUhpc3RvcnlMaXN0ZW5lcigpO1xuICAgICAgICAgICAgICAgICAgICByZW1vdmVIaXN0b3J5TGlzdGVuZXIgPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICBjdXJyZW50Um91dGUudmFsdWUgPSBTVEFSVF9MT0NBVElPTl9OT1JNQUxJWkVEO1xuICAgICAgICAgICAgICAgICAgICBzdGFydGVkID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIHJlYWR5ID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHVubW91bnRBcHAoKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICAvLyBUT0RPOiB0aGlzIHByb2JhYmx5IG5lZWRzIHRvIGJlIHVwZGF0ZWQgc28gaXQgY2FuIGJlIHVzZWQgYnkgdnVlLXRlcm11aVxuICAgICAgICAgICAgaWYgKCgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgfHwgX19WVUVfUFJPRF9ERVZUT09MU19fKSAmJiBpc0Jyb3dzZXIpIHtcbiAgICAgICAgICAgICAgICBhZGREZXZ0b29scyhhcHAsIHJvdXRlciwgbWF0Y2hlcik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgfTtcbiAgICAvLyBUT0RPOiB0eXBlIHRoaXMgYXMgTmF2aWdhdGlvbkd1YXJkUmV0dXJuIG9yIHNpbWlsYXIgaW5zdGVhZCBvZiBhbnlcbiAgICBmdW5jdGlvbiBydW5HdWFyZFF1ZXVlKGd1YXJkcykge1xuICAgICAgICByZXR1cm4gZ3VhcmRzLnJlZHVjZSgocHJvbWlzZSwgZ3VhcmQpID0+IHByb21pc2UudGhlbigoKSA9PiBydW5XaXRoQ29udGV4dChndWFyZCkpLCBQcm9taXNlLnJlc29sdmUoKSk7XG4gICAgfVxuICAgIHJldHVybiByb3V0ZXI7XG59XG5mdW5jdGlvbiBleHRyYWN0Q2hhbmdpbmdSZWNvcmRzKHRvLCBmcm9tKSB7XG4gICAgY29uc3QgbGVhdmluZ1JlY29yZHMgPSBbXTtcbiAgICBjb25zdCB1cGRhdGluZ1JlY29yZHMgPSBbXTtcbiAgICBjb25zdCBlbnRlcmluZ1JlY29yZHMgPSBbXTtcbiAgICBjb25zdCBsZW4gPSBNYXRoLm1heChmcm9tLm1hdGNoZWQubGVuZ3RoLCB0by5tYXRjaGVkLmxlbmd0aCk7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsZW47IGkrKykge1xuICAgICAgICBjb25zdCByZWNvcmRGcm9tID0gZnJvbS5tYXRjaGVkW2ldO1xuICAgICAgICBpZiAocmVjb3JkRnJvbSkge1xuICAgICAgICAgICAgaWYgKHRvLm1hdGNoZWQuZmluZChyZWNvcmQgPT4gaXNTYW1lUm91dGVSZWNvcmQocmVjb3JkLCByZWNvcmRGcm9tKSkpXG4gICAgICAgICAgICAgICAgdXBkYXRpbmdSZWNvcmRzLnB1c2gocmVjb3JkRnJvbSk7XG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgbGVhdmluZ1JlY29yZHMucHVzaChyZWNvcmRGcm9tKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCByZWNvcmRUbyA9IHRvLm1hdGNoZWRbaV07XG4gICAgICAgIGlmIChyZWNvcmRUbykge1xuICAgICAgICAgICAgLy8gdGhlIHR5cGUgZG9lc24ndCBtYXR0ZXIgYmVjYXVzZSB3ZSBhcmUgY29tcGFyaW5nIHBlciByZWZlcmVuY2VcbiAgICAgICAgICAgIGlmICghZnJvbS5tYXRjaGVkLmZpbmQocmVjb3JkID0+IGlzU2FtZVJvdXRlUmVjb3JkKHJlY29yZCwgcmVjb3JkVG8pKSkge1xuICAgICAgICAgICAgICAgIGVudGVyaW5nUmVjb3Jkcy5wdXNoKHJlY29yZFRvKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gW2xlYXZpbmdSZWNvcmRzLCB1cGRhdGluZ1JlY29yZHMsIGVudGVyaW5nUmVjb3Jkc107XG59XG5cbi8qKlxuICogUmV0dXJucyB0aGUgcm91dGVyIGluc3RhbmNlLiBFcXVpdmFsZW50IHRvIHVzaW5nIGAkcm91dGVyYCBpbnNpZGVcbiAqIHRlbXBsYXRlcy5cbiAqL1xuZnVuY3Rpb24gdXNlUm91dGVyKCkge1xuICAgIHJldHVybiBpbmplY3Qocm91dGVyS2V5KTtcbn1cbi8qKlxuICogUmV0dXJucyB0aGUgY3VycmVudCByb3V0ZSBsb2NhdGlvbi4gRXF1aXZhbGVudCB0byB1c2luZyBgJHJvdXRlYCBpbnNpZGVcbiAqIHRlbXBsYXRlcy5cbiAqL1xuZnVuY3Rpb24gdXNlUm91dGUoKSB7XG4gICAgcmV0dXJuIGluamVjdChyb3V0ZUxvY2F0aW9uS2V5KTtcbn1cblxuZXhwb3J0IHsgTmF2aWdhdGlvbkZhaWx1cmVUeXBlLCBSb3V0ZXJMaW5rLCBSb3V0ZXJWaWV3LCBTVEFSVF9MT0NBVElPTl9OT1JNQUxJWkVEIGFzIFNUQVJUX0xPQ0FUSU9OLCBjcmVhdGVNZW1vcnlIaXN0b3J5LCBjcmVhdGVSb3V0ZXIsIGNyZWF0ZVJvdXRlck1hdGNoZXIsIGNyZWF0ZVdlYkhhc2hIaXN0b3J5LCBjcmVhdGVXZWJIaXN0b3J5LCBpc05hdmlnYXRpb25GYWlsdXJlLCBsb2FkUm91dGVMb2NhdGlvbiwgbWF0Y2hlZFJvdXRlS2V5LCBvbkJlZm9yZVJvdXRlTGVhdmUsIG9uQmVmb3JlUm91dGVVcGRhdGUsIHBhcnNlUXVlcnksIHJvdXRlTG9jYXRpb25LZXksIHJvdXRlcktleSwgcm91dGVyVmlld0xvY2F0aW9uS2V5LCBzdHJpbmdpZnlRdWVyeSwgdXNlTGluaywgdXNlUm91dGUsIHVzZVJvdXRlciwgdmlld0RlcHRoS2V5IH07XG4iLCI8dGVtcGxhdGU+XHJcbjxkaXYgY2xhc3M9XCJmbGV4IGZsZXgtY29sIGl0ZW1zLWNlbnRlciBiZy13aGl0ZSBzaGFkb3ctbWQgcm91bmRlZC1sZyBvdmVyZmxvdy1oaWRkZW4gcC02XCI+XHJcbiAgPGgxIGNsYXNzPVwidGV4dC00eGwgZm9udC1ib2xkIG1iLTRcIj5BZGQgVXNlcnM8L2gxPlxyXG4gIDxmb3JtIGNsYXNzPVwidy0xLzJcIj5cclxuICAgIDwhLS0gTmFtZSBpbnB1dCAtLT5cclxuICAgIDxkaXYgY2xhc3M9XCJyZWxhdGl2ZSBtYi00XCI+XHJcbiAgICAgIDxpbnB1dCB0eXBlPVwidGV4dFwiIGlkPVwibmFtZVwiIFxyXG4gICAgICAgICAgICAgY2xhc3M9XCJmb3JtLWlucHV0IG10LTEgYmxvY2sgdy1mdWxsIHJvdW5kZWQtbWQgYm9yZGVyLWdyYXktMzAwIHNoYWRvdy1zbSBmb2N1czpib3JkZXItaW5kaWdvLTMwMCBmb2N1czpyaW5nIGZvY3VzOnJpbmctaW5kaWdvLTIwMCBmb2N1czpyaW5nLW9wYWNpdHktNTBcIiBcclxuICAgICAgICAgICAgIDpjbGFzcz1cInRoaXMudXNlcnMubmFtZV92YWxpZFwiIFxyXG4gICAgICAgICAgICAgdi1tb2RlbD1cInRoaXMudXNlcnMubmV3X3VzZXIubmFtZVwiIFxyXG4gICAgICAgICAgICAgQGNoYW5nZT1cInRoaXMudXNlcnMuY2hlY2tfbmFtZV92YWxpZCh0aGlzLnVzZXJzLm5ld191c2VyLm5hbWUpXCIgLz5cclxuICAgICAgPGxhYmVsIGZvcj1cIm5hbWVcIiBjbGFzcz1cImFic29sdXRlIHRvcC0wIGxlZnQtMCBweC0xIC1tdC1weCB0ZXh0LWdyYXktNzAwIGJnLXdoaXRlXCI+TmFtZTwvbGFiZWw+XHJcbiAgICA8L2Rpdj5cclxuXHJcbiAgICA8IS0tIEVtYWlsIGlucHV0IC0tPlxyXG4gICAgPGRpdiBjbGFzcz1cInJlbGF0aXZlIG1iLTRcIj5cclxuICAgICAgPGlucHV0IHR5cGU9XCJ0ZXh0XCIgaWQ9XCJlbWFpbFwiIFxyXG4gICAgICAgICAgICAgY2xhc3M9XCJmb3JtLWlucHV0IG10LTEgYmxvY2sgdy1mdWxsIHJvdW5kZWQtbWQgYm9yZGVyLWdyYXktMzAwIHNoYWRvdy1zbSBmb2N1czpib3JkZXItaW5kaWdvLTMwMCBmb2N1czpyaW5nIGZvY3VzOnJpbmctaW5kaWdvLTIwMCBmb2N1czpyaW5nLW9wYWNpdHktNTBcIiBcclxuICAgICAgICAgICAgIDpjbGFzcz1cInRoaXMudXNlcnMuZW1haWxfdmFsaWRcIiBcclxuICAgICAgICAgICAgIHYtbW9kZWw9XCJ0aGlzLnVzZXJzLm5ld191c2VyLmVtYWlsXCIgXHJcbiAgICAgICAgICAgICBAY2hhbmdlPVwidGhpcy51c2Vycy5jaGVja19lbWFpbF92YWxpZCh0aGlzLnVzZXJzLm5ld191c2VyLmVtYWlsKVwiIC8+XHJcbiAgICAgIDxsYWJlbCBmb3I9XCJlbWFpbFwiIGNsYXNzPVwiYWJzb2x1dGUgdG9wLTAgbGVmdC0wIHB4LTEgLW10LXB4IHRleHQtZ3JheS03MDAgYmctd2hpdGVcIj5FbWFpbCBhZGRyZXNzPC9sYWJlbD5cclxuICAgIDwvZGl2PlxyXG5cclxuICAgIDwhLS0gUm9sZSBpbnB1dCAtLT5cclxuICAgIDxkaXYgY2xhc3M9XCJtYi00XCI+XHJcbiAgICAgIDxzZWxlY3QgY2xhc3M9XCJmb3JtLXNlbGVjdCBtdC0xIGJsb2NrIHctZnVsbCByb3VuZGVkLW1kIGJvcmRlci1ncmF5LTMwMCBzaGFkb3ctc20gZm9jdXM6Ym9yZGVyLWluZGlnby0zMDAgZm9jdXM6cmluZyBmb2N1czpyaW5nLWluZGlnby0yMDAgZm9jdXM6cmluZy1vcGFjaXR5LTUwXCIgXHJcbiAgICAgICAgICAgICAgOmNsYXNzPVwidGhpcy5yb2xlX3ZhbGlkXCIgXHJcbiAgICAgICAgICAgICAgQGNoYW5nZT1cInRoaXMudXNlcnMuY2hlY2tfcm9sZV92YWxpZCgpXCIgXHJcbiAgICAgICAgICAgICAgYXJpYS1sYWJlbD1cIlJvbGVcIiBcclxuICAgICAgICAgICAgICB2LW1vZGVsPVwidGhpcy51c2Vycy5uZXdfdXNlci5yb2xlXCI+XHJcbiAgICAgICAgPG9wdGlvbiB2YWx1ZT1cIlwiIGRpc2FibGVkPlNlbGVjdCB0aGUgcm9sZTwvb3B0aW9uPlxyXG4gICAgICAgIDxvcHRpb24gdmFsdWU9XCJ1c2VyXCI+VXNlcjwvb3B0aW9uPlxyXG4gICAgICAgIDxvcHRpb24gdmFsdWU9XCJzdXBwb3J0XCI+U3VwcG9ydDwvb3B0aW9uPlxyXG4gICAgICAgIDxvcHRpb24gdmFsdWU9XCJobyB1c2VyXCI+aG8gdXNlcjwvb3B0aW9uPlxyXG4gICAgICA8L3NlbGVjdD5cclxuICAgIDwvZGl2PlxyXG5cclxuICAgIDwhLS0gU3VibWl0IGJ1dHRvbiAtLT5cclxuICAgIDxidXR0b24gdHlwZT1cImJ1dHRvblwiIGNsYXNzPVwidy1mdWxsIGJnLWJsdWUtNTAwIHRleHQtd2hpdGUgZm9udC1ib2xkIHB5LTIgcHgtNCByb3VuZGVkIGhvdmVyOmJnLWJsdWUtNzAwIG1iLTRcIiBcclxuICAgICAgICAgICAgQGNsaWNrPVwidGhpcy5hZGRfdXNlcigpOyB0aGlzLnVzZXJzLnBvcHVsYXRlX3VzZXJfbGlzdCgpO1wiPlxyXG4gICAgICBDcmVhdGUgdXNlclxyXG4gICAgPC9idXR0b24+XHJcbiAgPC9mb3JtPlxyXG48L2Rpdj5cclxuXHJcbjxkaXYgY2xhc3M9XCJtdC04XCI+XHJcbiAgPGRpdiBjbGFzcz1cImZsZXggZmxleC13cmFwXCI+XHJcbiAgICA8ZGl2IGNsYXNzPVwidy1mdWxsXCI+XHJcbiAgICAgIDx0YWJsZSBjbGFzcz1cIm1pbi13LWZ1bGwgZGl2aWRlLXkgZGl2aWRlLWdyYXktMjAwIHRhYmxlLWF1dG9cIj5cclxuICAgICAgICA8dGhlYWQgY2xhc3M9XCJiZy1ncmF5LTgwMCB0ZXh0LXdoaXRlXCI+XHJcbiAgICAgICAgICA8dHI+XHJcbiAgICAgICAgICAgIDx0aCBzY29wZT1cImNvbFwiIGNsYXNzPVwicHgtNiBweS0zIHRleHQtbGVmdCB0ZXh0LXhzIGZvbnQtbWVkaXVtIHVwcGVyY2FzZSB0cmFja2luZy13aWRlclwiPklkICM8L3RoPlxyXG4gICAgICAgICAgICA8dGggc2NvcGU9XCJjb2xcIiBjbGFzcz1cInB4LTYgcHktMyB0ZXh0LWxlZnQgdGV4dC14cyBmb250LW1lZGl1bSB1cHBlcmNhc2UgdHJhY2tpbmctd2lkZXJcIj5OYW1lPC90aD5cclxuICAgICAgICAgICAgPHRoIHNjb3BlPVwiY29sXCIgY2xhc3M9XCJweC02IHB5LTMgdGV4dC1sZWZ0IHRleHQteHMgZm9udC1tZWRpdW0gdXBwZXJjYXNlIHRyYWNraW5nLXdpZGVyXCI+RW1haWw8L3RoPlxyXG4gICAgICAgICAgICA8dGggc2NvcGU9XCJjb2xcIiBjbGFzcz1cInB4LTYgcHktMyB0ZXh0LWxlZnQgdGV4dC14cyBmb250LW1lZGl1bSB1cHBlcmNhc2UgdHJhY2tpbmctd2lkZXJcIj5BY3Rpb25zPC90aD5cclxuICAgICAgICAgIDwvdHI+XHJcbiAgICAgICAgPC90aGVhZD5cclxuICAgICAgICA8dGJvZHkgY2xhc3M9XCJiZy13aGl0ZSBkaXZpZGUteSBkaXZpZGUtZ3JheS0yMDBcIj5cclxuICAgICAgICAgIDx0ciB2LWZvcj1cInVzZXIgaW4gdXNlcnMudXNlcl9saXN0XCIgOmtleT1cInVzZXIuaWRcIj5cclxuICAgICAgICAgICAgPHRkIGNsYXNzPVwicHgtNiBweS00IHdoaXRlc3BhY2Utbm93cmFwXCI+e3sgdXNlci5pZCB9fTwvdGQ+XHJcbiAgICAgICAgICAgIDx0ZCBjbGFzcz1cInB4LTYgcHktNCB3aGl0ZXNwYWNlLW5vd3JhcFwiPnt7IHVzZXIubmFtZSB9fTwvdGQ+XHJcbiAgICAgICAgICAgIDx0ZCBjbGFzcz1cInB4LTYgcHktNCB3aGl0ZXNwYWNlLW5vd3JhcFwiPnt7IHVzZXIuZW1haWwgfX08L3RkPlxyXG4gICAgICAgICAgICA8dGQgY2xhc3M9XCJweC02IHB5LTQgd2hpdGVzcGFjZS1ub3dyYXBcIj5cclxuICAgICAgICAgICAgICA8YnV0dG9uIHR5cGU9XCJidXR0b25cIiBjbGFzcz1cInRleHQtc20gYmctZ3JlZW4tNTAwIGhvdmVyOmJnLWdyZWVuLTcwMCB0ZXh0LXdoaXRlIHB5LTEgcHgtMiByb3VuZGVkXCI+XHJcbiAgICAgICAgICAgICAgICA8aSBjbGFzcz1cImJpIGJpLXBlbmNpbC1zcXVhcmVcIj48L2k+IHwgRWRpdFxyXG4gICAgICAgICAgICAgIDwvYnV0dG9uPlxyXG4gICAgICAgICAgICAgIDxidXR0b24gdHlwZT1cImJ1dHRvblwiIGNsYXNzPVwidGV4dC1zbSBiZy1yZWQtNTAwIGhvdmVyOmJnLXJlZC03MDAgdGV4dC13aGl0ZSBweS0xIHB4LTIgcm91bmRlZFwiIHYtb246Y2xpY2s9XCJ0aGlzLnVzZXJzLmRlbGV0ZV91c2VyKHVzZXIuaWQpXCI+XHJcbiAgICAgICAgICAgICAgICA8aSBjbGFzcz1cImJpIGJpLXRyYXNoXCI+PC9pPiB8IERlbGV0ZVxyXG4gICAgICAgICAgICAgIDwvYnV0dG9uPlxyXG4gICAgICAgICAgICAgICAgPGJ1dHRvblxyXG4gICAgICAgICAgICAgICAgICB0eXBlPVwiYnV0dG9uXCJcclxuICAgICAgICAgICAgICAgICAgY2xhc3M9XCJidG4gYnRuLXByaW1hcnlcIlxyXG4gICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICA8aSBjbGFzcz1cImJpIGJpLXVubG9ja1wiPjwvaT5cclxuICAgICAgICAgICAgICAgICAgfCBVbmxvY2s8L2J1dHRvbj5cclxuICAgICAgICAgICAgICAgIDxidXR0b25cclxuICAgICAgICAgICAgICAgICAgdHlwZT1cImJ1dHRvblwiXHJcbiAgICAgICAgICAgICAgICAgIGNsYXNzPVwiYnRuIGJ0bi13YXJuaW5nXCJcclxuICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgPGkgY2xhc3M9XCJiaSBiaS1zaGllbGQtbG9ja1wiPjwvaT5cclxuICAgICAgICAgICAgICAgICAgfCBSZXNldCBNRkE8L2J1dHRvbj5cclxuICAgICAgICAgICAgICA8L3RkPlxyXG4gICAgICAgICAgICA8L3RyPlxyXG4gICAgICAgICAgPC90Ym9keT5cclxuICAgICAgICA8L3RhYmxlPlxyXG4gICAgICA8L2Rpdj5cclxuICAgIDwvZGl2PlxyXG4gIDwvZGl2PlxyXG48L3RlbXBsYXRlPlxyXG5cclxuPHNjcmlwdD5cclxuZXhwb3J0IGRlZmF1bHQge1xyXG4gIGRhdGEoKSB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBuZWVkc1Z1ZVJlZnJlc2g6IHsgXCJkYXRhXCI6IGZhbHNlLCBcImtlZXBMb29waW5nXCI6IGZhbHNlIH0sXHJcbiAgICB9O1xyXG4gIH0sXHJcbiAgbWV0aG9kczoge1xyXG4gICAgYWRkX3VzZXIoKSB7XHJcbiAgICAgIHRoaXMudXNlcnMuYXBpX2NyZWF0ZV91c2VyX2RiKCk7XHJcbiAgICB9LFxyXG4gICAgdnVlUmVmcmVzaCgpIHtcclxuICAgICAgaWYgKFxyXG4gICAgICAgICEoXHJcbiAgICAgICAgICBbXCJzdXBlciB1c2VyXCIsIFwiaG8gdXNlclwiLCBcInN1cHBvcnRcIl0uaW5jbHVkZXModGhpcy51c2VyLnJvbGVfbmFtZSkgJiZcclxuICAgICAgICAgIHRoaXMudXNlci5sb2dnZWRfaW5cclxuICAgICAgICApXHJcbiAgICAgICkge1xyXG4gICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKFwibG9naW5cIik7XHJcbiAgICAgIH1cclxuICAgICAgaWYgKHRoaXMubmVlZHNWdWVSZWZyZXNoLmtlZXBMb29waW5nKSB7XHJcbiAgICAgICAgY29uc3QgbXlUaW1lb3V0ID0gc2V0VGltZW91dCh0aGlzLnZ1ZVJlZnJlc2gsIDUwMCk7XHJcbiAgICAgIH1cclxuICAgIH0sXHJcbiAgfSxcclxuICBwcm9wczogW1widXNlcnNcIiwgXCJ1c2VyXCIsIFwicm9sZXNcIl0sXHJcbiAgY3JlYXRlZCgpIHtcclxuICAgIHRoaXMubmVlZHNWdWVSZWZyZXNoLmtlZXBMb29waW5nID0gdHJ1ZTtcclxuICAgIHRoaXMudnVlUmVmcmVzaCgpO1xyXG4gICAgdGhpcy51c2Vycy5wb3B1bGF0ZV91c2VyX2xpc3QoKTtcclxuICAgIHRoaXMucm9sZXMuZ2V0X3JvbGVzX2Zyb21fYXBpKCk7XHJcbiAgfSxcclxuICBiZWZvcmVVbm1vdW50KCkge1xyXG4gICAgICAgIHRoaXMubmVlZHNWdWVSZWZyZXNoLmtlZXBMb29waW5nID0gZmFsc2VcclxuICB9LFxyXG59O1xyXG48L3NjcmlwdD5cclxuXHJcbjxzdHlsZT5cclxuLmNvbnRhaW5lciB7XHJcbiAgcGFkZGluZzogMnJlbSAwcmVtO1xyXG59XHJcblxyXG50ZCB7XHJcbiAgdmVydGljYWwtYWxpZ246IG1pZGRsZTtcclxufVxyXG5cclxudGgge1xyXG4gIHZlcnRpY2FsLWFsaWduOiBtaWRkbGU7XHJcbn1cclxuPC9zdHlsZT4iLCI8dGVtcGxhdGU+XHJcbiAgPG1haW4+XHJcbiAgICA8ZGl2IGNsYXNzPVwibWFpbkNvbnRhaW5lclwiPlxyXG4gICAgICA8ZGl2IGNsYXNzPVwic2VjdGlvbkNvbnRhaW5lclwiPlxyXG4gICAgICA8L2Rpdj5cclxuICAgIDwvZGl2PlxyXG5cclxuICA8L21haW4+XHJcbjwvdGVtcGxhdGU+XHJcblxyXG48c2NyaXB0PlxyXG5cclxuXHJcbmV4cG9ydCBkZWZhdWx0IHtcclxuICBkYXRhKCkge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgbmVlZHNWdWVSZWZyZXNoOiB7IFwiZGF0YVwiOiBmYWxzZSwgXCJrZWVwTG9vcGluZ1wiOiBmYWxzZSB9LFxyXG4gICAgfVxyXG4gIH0sXHJcbiAgcHJvcHM6IFtcclxuICAgIFwidXNlclwiLFxyXG4gICAgXCJ1c2Vyc1wiLFxyXG4gICAgXCJtZXNzYWdlc1wiLFxyXG4gICAgXCJkaWFsb2d1ZV9ndWlkZVwiXHJcbiAgXSxcclxuICBtZXRob2RzOiB7XHJcbiAgICAvLyB2dWVfcmVmcmVzaF9ob21lKCkge1xyXG4gICAgLy8gICBpZiAoIXRoaXMudXNlci5sb2dnZWRfaW4pIHtcclxuICAgIC8vICAgICB0aGlzLiRyb3V0ZXIucHVzaChcImxvZ2luXCIpO1xyXG4gICAgLy8gICB9XHJcblxyXG4gICAgLy8gICBpZiAodGhpcy5uZWVkc1Z1ZVJlZnJlc2gua2VlcExvb3BpbmcpIHtcclxuICAgIC8vICAgICBjb25zdCBteVRpbWVvdXQgPSBzZXRUaW1lb3V0KHRoaXMudnVlX3JlZnJlc2hfaG9tZSwgNTAwKTtcclxuICAgIC8vICAgfVxyXG4gICAgLy8gfSxcclxuICB9LFxyXG4gIGNyZWF0ZWQoKSB7XHJcbiAgICB0aGlzLm5lZWRzVnVlUmVmcmVzaC5rZWVwTG9vcGluZyA9IHRydWU7XHJcbiAgICAvLyB0aGlzLnZ1ZV9yZWZyZXNoX2hvbWUoKTtcclxuICB9LFxyXG4gIGJlZm9yZVVubW91bnQoKSB7XHJcbiAgICB0aGlzLm5lZWRzVnVlUmVmcmVzaC5rZWVwTG9vcGluZyA9IGZhbHNlO1xyXG4gIH0sXHJcbn07XHJcbjwvc2NyaXB0PiIsIjx0ZW1wbGF0ZT5cclxuICAgIDxkaXYgY2xhc3M9XCJjYXJkLWJvZHkgbXgtMyBteS0wXCIgdi1pZj1cInVzZXIucGFzc3dvcmRfYXV0aG9yaXNlZCAmJiAhdXNlci5tZmFfYXV0aG9yaXNlZFwiPlxyXG4gICAgICAgIDxkaXYgY2xhc3M9XCJyb3cganVzdGlmeS1jb250ZW50LWNlbnRlclwiPlxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY29sLWxnLTYgY29sLW1kLThcIj5cclxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjYXJkIGJvcmRlci1kYXJrIHRleHQtY2VudGVyXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNhcmQtaGVhZGVyIGJvcmRlci1kYXJrXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJyb3cganVzdGlmeS1jb250ZW50LWJldHdlZW5cIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjb2wtOFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzPVwiY2FyZC10ZXh0XCI+U2V0IHVwIE11bHRpLUZhY3RvciBBdXRoZW50aWNhdGlvbjwvcD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNvbC00XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGEgY2xhc3M9XCJidG4gYnRuLXN1Y2Nlc3MgYnRuLXNtXCIgdGFyZ2V0PVwiX2JsYW5rXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaHJlZj1cImh0dHBzOi8vdmltZW8uY29tLzc5OTExMzkyNy81NzAzOWRkNWQ1XCIgcm9sZT1cImJ1dHRvblwiPjJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWluLiBleHBsYWluZXIgdmlkZW88L2E+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjYXJkLWJvZHkgdy1mdWxsXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJyb3cganVzdGlmeS1jb250ZW50LWNlbnRlciB3LWZ1bGxcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbWcgOnNyYz1cInVzZXIucXJfY29kZV9pbWFnZVwiIGFsdD1cIlFSIENvZGVcIiBzdHlsZT1cIndpZHRoOiAyNTBweDtcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYtaWY9XCIhdGhpcy51c2VyLm1mYV9zZWNyZXRfY29uZmlybWVkXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzcz1cImNhcmQtdGV4dFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEl0J3Mgbm93IGEgcmVxdWlyZW1lbnQgdGhhdCBhbGwgc3lzdGVtcyB1c2VkIHdpdGhpbiB5b3VyIG9yZ2FuaXNhdGlvbiBtdXN0IGJlIHNlY3VyZWRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aXRoIFwiTXVsdGkgRmFjdG9yXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXV0aGVudGljYXRpb25cIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9wPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3M9XCJjYXJkLXRleHRcIiB2LWlmPVwidGhpcy51c2VyLm1mYV9zZWNyZXRfY29uZmlybWVkXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSWYgeW91IGFyZSB1bmFibGUgdG8gZmluZCB5b3VyIGFjY291bnQgb24geW91ciBhdXRoZW50aWNhdG9yXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXBwLCBwbGVhc2UgZW1haWwgc3VwcG9ydCBhdCBzdXBwb3J0QHJlYWRpbmVzcy10cmFja2VyLmNvLnVrXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdG8gZ2V0IHlvdXIgTXVsdGkgRmFjdG9yIEF1dGhlbnRpY2F0aW9uIHJlc2V0LlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9wPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3M9XCJjYXJkLXRleHRcIiB2LWlmPVwiIXRoaXMudXNlci5tZmFfc2VjcmV0X2NvbmZpcm1lZFwiPlNjYW4gdGhpcyBRUiBDb2RlIHdpdGggdGhlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTWljcm9zb2Z0IG9yIEdvb2dsZSBBdXRoZW50aWNhdG9yIGFuZFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVudGVyIHRoZSA2IGRpZ2l0IE1GQSBBdXRoZW50aWNhdG9yIENvZGUgZm9yIHRoZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzdHJvbmc+V2hpdGUgRW5zaWduIFBvcnRhbDwvc3Ryb25nPiBpbiB0aGUgZmllbGQgYmVsb3dcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvcD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJtdC0yXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImlucHV0LWdyb3VwXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwiXCI+NiBEaWdpdCBDb2RlPC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgY2xhc3M9XCJpbnB1dCBpbnB1dC1wcmltYXJ5XCIgdHlwZT1cInRleHRcIiBpZD1cIm1mYV9hdXRoZW50aWNhdG9yX2NvZGVcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXV0b2NvbXBsZXRlPVwib2ZmXCIgbmFtZT1cIm1mYV9hdXRoZW50aWNhdG9yX2NvZGVcIiB2LW1vZGVsPVwibWZhQXV0aGVudGljYXRvckNvZGVcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCJcIiBAa2V5dXAuZW50ZXI9XCJjaGVja01mYUNvZGUoKVwiIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgY2xhc3M9XCJidG4gYnRuLXByaW1hcnkgbXktM1wiIEBjbGljaz1cImNoZWNrTWZhQ29kZSgpXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIENoZWNrIGF1dGhlbnRpY2F0b3IgY29kZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICA8L2Rpdj5cclxuPC90ZW1wbGF0ZT5cclxuXHJcbjxzY3JpcHQ+XHJcblxyXG5leHBvcnQgZGVmYXVsdCB7XHJcbiAgICBwcm9wczoge1xyXG4gICAgICAgIHVzZXI6IHtcclxuICAgICAgICAgICAgdHlwZTogT2JqZWN0XHJcbiAgICAgICAgfSxcclxuICAgICAgICBtZXNzYWdlczoge1xyXG4gICAgICAgICAgICB0eXBlOiBPYmplY3RcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG4gICAgZGF0YSgpIHtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBtZmFBdXRoZW50aWNhdG9yQ29kZTogXCJcIixcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG4gICAgbWV0aG9kczoge1xyXG4gICAgICAgIHJlbmRlclFSQ29kZSgpIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coXCJyZW5kZXJpbmcgdXNlciBxciBjb2RlXCIpXHJcbiAgICAgICAgICAgIHRoaXMudXNlci5xcl9jb2RlX2ltYWdlID0gXCJkYXRhOmltYWdlL3BuZztiYXNlNjQsXCIgKyB0aGlzLnVzZXIubWZhX3FyX2NvZGVfYmFzZTY0XHJcbiAgICAgICAgfSxcclxuICAgICAgICBhc3luYyBjaGVja01mYUNvZGUoKSB7XHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBwdXNoVG9Ib21lID0gYXdhaXQgdGhpcy51c2VyLmNoZWNrX21mYV9hdXRoZW50aWNhdG9yX2NvZGUodGhpcy5tZmFBdXRoZW50aWNhdG9yQ29kZSlcclxuICAgICAgICAgICAgICAgIGlmIChwdXNoVG9Ib21lKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5tZXNzYWdlcy5hZGRfbWVzc2FnZShcIk1GQSBjb25maXJtZWQsIHlvdSBhcmUgbm93IGxvZ2dlZCBpbi5cIiwgXCJzdWNjZXNzXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMudXNlci5yb2xlX25hbWUgPT0gXCJjbGllbnQgdXNlclwiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKFwiL3F1ZXN0aW9ubmFpcmVcIilcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMudXNlci5yb2xlX25hbWUgPT0gXCJjb3BvcmF0ZSB1c2VyXCIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goXCIvbWFuYWdlX2pvYnNcIilcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaChcIi9pbmRleFwiKVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5tZXNzYWdlcy5hZGRfbWVzc2FnZSgnVGhlIGNvZGUgZGlkIG5vdCBhdXRoZW50aWNhdGUgY29ycmVjdGx5LiBJdCBtYXkgaGF2ZSBqdXN0IG1pc3NlZCB0aGUgdGltZSBleHBpcnksIGdldCBhIG5ldyBjb2RlIGFuZCB0cnkgYWdhaW4nLCBcImRhbmdlclwiKVxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMubWZhQXV0aGVudGljYXRvckNvZGUgPSBcIlwiXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgaW4gTUZBIGF1dGhlbnRpY2F0aW9uXCIsIGVycm9yKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICB9XHJcbiAgICB9LFxyXG59XHJcbjwvc2NyaXB0PlxyXG5cclxuPHN0eWxlIGxhbmc9XCJzY3NzXCIgc2NvcGVkPjwvc3R5bGU+IiwiPHRlbXBsYXRlPlxyXG4gIDxkaXYgY2xhc3M9XCJtYWluQ29udGFpbmVyIGZsZXgganVzdGlmeS1jZW50ZXIgaXRlbXMtY2VudGVyIG1pbi1oLXNjcmVlblwiPlxyXG4gICAgICA8ZGl2IGNsYXNzPVwicm93IHctZnVsbFwiPlxyXG4gICAgICAgICAgPGRpdiBjbGFzcz1cImNvbC1tZC0yIGNvbC1sZy0zIGNvbC14bC00XCI+XHJcbiAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJjb2wtbWQtOCBjb2wtbGctNiBjb2wteGwtNFwiPlxyXG4gICAgICAgICAgICAgIDxkaXY+XHJcbiAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjYXJkIHB4LTBcIj5cclxuICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJ0ZXh0LWNlbnRlclwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxpbWcgY2xhc3M9XCJjYXJkLWltZy10b3AgbS00IG10LTEwXCIgc3JjPVwiLi4vYXNzZXRzL2R0X3NxdWFkX2xvZ28ucG5nXCIgYWx0PVwiTG9nb1wiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPVwid2lkdGg6OTBweDtcIj5cclxuICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNhcmQtYm9keSBtLTMgcGItMSBtYi0wXCIgdi1pZj1cIiF0aGlzLnVzZXIucGFzc3dvcmRfYXV0aG9yaXNlZFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJyb3cgbXktMlwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgY2xhc3M9XCJpbnB1dCBpbnB1dC1wcmltYXJ5IGZsZXggaXRlbXMtY2VudGVyIGdhcC0yXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3ZnIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiB2aWV3Qm94PVwiMCAwIDE2IDE2XCIgZmlsbD1cImN1cnJlbnRDb2xvclwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3M9XCJ3LTQgaC00IG9wYWNpdHktNzBcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cGF0aFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkPVwiTTIuNSAzQTEuNSAxLjUgMCAwIDAgMSA0LjV2Ljc5M2MuMDI2LjAwOS4wNTEuMDIuMDc2LjAzMkw3LjY3NCA4LjUxYy4yMDYuMS40NDYuMS42NTIgMGw2LjU5OC0zLjE4NUEuNzU1Ljc1NSAwIDAgMSAxNSA1LjI5M1Y0LjVBMS41IDEuNSAwIDAgMCAxMy41IDNoLTExWlwiIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHBhdGhcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZD1cIk0xNSA2Ljk1NCA4Ljk3OCA5Ljg2YTIuMjUgMi4yNSAwIDAgMS0xLjk1NiAwTDEgNi45NTRWMTEuNUExLjUgMS41IDAgMCAwIDIuNSAxM2gxMWExLjUgMS41IDAgMCAwIDEuNS0xLjVWNi45NTRaXCIgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvc3ZnPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IGNsYXNzPVwiZ3Jvd1wiIHR5cGU9XCJlbWFpbFwiIGlkPVwiZW1haWxcIiBuYW1lPVwiZW1haWxcIiBwbGFjZWhvbGRlcj1cIkVtYWlsXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2LW1vZGVsPVwidXNlci5sb2dpbl9lbWFpbFwiIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvbGFiZWw+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImZsZXggZmxleC1jb2wgaXRlbXMtc3RhcnQgc3BhY2UteS0yIG10LTUgcmVsYXRpdmVcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzPVwiaW5wdXQgaW5wdXQtcHJpbWFyeSB3LWZ1bGwgZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTIgcHItMTAgcmVsYXRpdmVcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzdmcgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiIHZpZXdCb3g9XCIwIDAgMTYgMTZcIiBmaWxsPVwiY3VycmVudENvbG9yXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzcz1cInctNCBoLTQgb3BhY2l0eS03MFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwYXRoIGZpbGwtcnVsZT1cImV2ZW5vZGRcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkPVwiTTE0IDZhNCA0IDAgMCAxLTQuODk5IDMuODk5bC0xLjk1NSAxLjk1NWEuNS41IDAgMCAxLS4zNTMuMTQ2SDV2MS41YS41LjUgMCAwIDEtLjUuNWgtMmEuNS41IDAgMCAxLS41LS41di0yLjI5M2EuNS41IDAgMCAxIC4xNDYtLjM1M2wzLjk1NS0zLjk1NUE0IDQgMCAxIDEgMTQgNlptLTQtMmEuNzUuNzUgMCAwIDAgMCAxLjUuNS41IDAgMCAxIC41LjUuNzUuNzUgMCAwIDAgMS41IDAgMiAyIDAgMCAwLTItMlpcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGlwLXJ1bGU9XCJldmVub2RkXCIgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvc3ZnPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IDp0eXBlPVwicGFzc3dvcmRfdmlzaWJsZSA/ICd0ZXh0JyA6ICdwYXNzd29yZCdcIiBuYW1lPVwicGFzc3dvcmRcIiBpZD1cInBhc3N3b3JkXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2LW1vZGVsPVwidGhpcy51c2VyLmxvZ2luX3Bhc3N3b3JkXCIgY2xhc3M9XCJncm93IHByLTEwXCIgcGxhY2Vob2xkZXI9XCJQYXNzd29yZFwiIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvbGFiZWw+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjdXJzb3ItcG9pbnRlciBhYnNvbHV0ZSBpbnNldC15LTAgcmlnaHQtMCBmbGV4IGl0ZW1zLWNlbnRlciBwci0zXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEBjbGljaz1cInBhc3N3b3JkX3Zpc2libGUgPSAhcGFzc3dvcmRfdmlzaWJsZVwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGkgOmNsYXNzPVwicGFzc3dvcmRfdmlzaWJsZSA/ICdwaSBwaS1leWUnIDogJ3BpIHBpLWV5ZS1zbGFzaCdcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzPVwidGV4dC14bCB0ZXh0LWdyYXktNTAwXCI+PC9pPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwicm93IGZsZXggZmxleC1yb3cgaXRlbXMtY2VudGVyIHNwYWNlLXgtNSBtdC00XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjb2wtMTIgZmxleCBqdXN0aWZ5LWNlbnRlciBpdGVtcy1jZW50ZXIgbWwtNlwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImZvcm0tY2hlY2sgbXItM1wiPlxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT1cImNoZWNrYm94XCIgY2hlY2tlZD1cImNoZWNrZWRcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzcz1cImNoZWNrYm94IGNoZWNrYm94LWxnIGJvcmRlci1zdWNjZXNzIGNoZWNrYm94LXN1Y2Nlc3Mgcm91bmRlZC1tZFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkPVwiZGF0YV91c2FnZV9jaGVja2VkXCIgdmFsdWU9XCJkYXRhX3VzYWdlX2NoZWNrZWRcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2LW1vZGVsPVwiZGF0YV91c2FnZV9jaGVja2VkXCIgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3M9XCJ0ZXh0LWxlZnQgdGV4dC1sZyBtYi0wXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGZvcj1cImRhdGFfdXNhZ2VfY2hlY2tlZFwiIGNsYXNzPVwiaW5saW5lLWJsb2NrXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzbWFsbD5IYXBweSB3aXRoIDxhPkRhdGEgVXNhZ2U8L2E+Pzwvc21hbGw+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvcD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJyb3cgZmxleCBmbGV4LXJvdyBpdGVtcy1jZW50ZXIgc3BhY2UteC01IG10LTRcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImZsZXgtZ3Jvd1wiPlxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gQGNsaWNrPVwidGhpcy5sb2dpbkFQSSgpXCIgOmRpc2FibGVkPVwiZGlzYWJsZWRcIiA6Y2xhc3M9XCJ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgJ3ctZnVsbCBib3JkZXIgYm9yZGVyLXByaW1hcnkgdGV4dC1wcmltYXJ5IGJnLXRyYW5zcGFyZW50IGhvdmVyOmJnLXByaW1hcnkgaG92ZXI6dGV4dC13aGl0ZSBmb250LW1lZGl1bSByb3VuZGVkLW1kIHAtMiB0cmFuc2l0aW9uIGR1cmF0aW9uLTUwMCc6ICFkaXNhYmxlZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAndy1mdWxsIGJvcmRlciBib3JkZXItbmV1dHJhbCB0ZXh0LW5ldXRyYWwgYmctdHJhbnNwYXJlbnQgaG92ZXI6YmctbmV1dHJhbCBob3Zlcjp0ZXh0LXdoaXRlIGZvbnQtbWVkaXVtIHJvdW5kZWQtbWQgcC0yIHRyYW5zaXRpb24gZHVyYXRpb24tNTAwJzogZGlzYWJsZWRcclxuICAgICAgICAgICAgICAgICAgICAgIH1cIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBMb2dpblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImZsZXggZmxleC1yb3cgaXRlbXMtY2VudGVyIG10LTVcIj5cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjb2wtNiBkLWdyaWQgZ2FwLTEgdy1mdWxsIHNwYWNlLXgtNSBtci0yXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3M9XCIgd2hpdGVzcGFjZS1ub3dyYXAgYm9yZGVyIGJvcmRlci1zZWNvbmRhcnkgdGV4dC1zZWNvbmRhcnkgYmctdHJhbnNwYXJlbnQgaG92ZXI6Ymctc2Vjb25kYXJ5IGhvdmVyOnRleHQtd2hpdGUgZm9udC1tZWRpdW0gcm91bmRlZC1tZCBwLTJcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDpkaXNhYmxlZD0nKHRoaXMudXNlci5sb2dpbl9lbWFpbC5sZW5ndGggPT0gMCknXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQGNsaWNrPVwidGhpcy51c2VyLmFwaV9yZXNldF9wYXNzd29yZF9yZXF1ZXN0KHRoaXMudXNlci5sb2dpbl9lbWFpbClcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBQYXNzd29yZCBSZXNldFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNvbC02IGQtZ3JpZCBnYXAtMSB3LWZ1bGxcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b25cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzcz1cIndoaXRlc3BhY2Utbm93cmFwICBib3JkZXIgYm9yZGVyLXN1Y2Nlc3MgdGV4dC1zdWNjZXNzIGJnLXRyYW5zcGFyZW50IGhvdmVyOmJnLXN1Y2Nlc3MgaG92ZXI6dGV4dC13aGl0ZSBmb250LW1lZGl1bSByb3VuZGVkLW1kIHAtMlwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQGNsaWNrPVwidGhpcy4kcm91dGVyLnB1c2goJy9yZWdpc3RlcicpXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUmVnaXN0ZXJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgPCEtLSBtZmEgc3R1ZmYgaGVyZSAtLT5cclxuICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjYXJkLWJvZHkgbXgtMCBteS0wXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICB2LWlmPVwidGhpcy51c2VyLnBhc3N3b3JkX2F1dGhvcmlzZWQgJiYgIXRoaXMudXNlci5tZmFfYXV0aG9yaXNlZFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInctZnVsbFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPE11bHRpRmFjdG9yQXV0aCB2LWlmPVwidXNlci5wYXNzd29yZF9hdXRob3Jpc2VkICYmICF1c2VyLm1mYV9hdXRob3Jpc2VkXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWY9XCJtdWx0aUZhY3RvckF1dGhDb21wb25lbnRcIiA6dXNlcj1cInVzZXJcIiA6bWVzc2FnZXM9XCJtZXNzYWdlc1wiIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY2FyZC1ib2R5IG0tMyB0ZXh0LWNlbnRlclwiIHYtaWY9XCIoIXRoaXMudXNlci5wYXNzd29yZF9hdXRob3Jpc2VkKVwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxocj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICA8aDQgY2xhc3M9XCJ0ZXh0LWNlbnRlciBtdC01XCI+PHN0cm9uZz5EYXRhIFVzYWdlPC9zdHJvbmc+PC9oND5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzcz1cInNtYWxsIFwiPkJ5IHNpZ25pbmcgaW4sIHlvdSBjb25maXJtIHRoYXQgeW91IGFyZSBoYXBweSB3aXRoIG91ciBkYXRhIHVzYWdlIHBvbGljeS5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICA8L3A+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3M9XCJzbWFsbCBcIj48c3Ryb25nPiBZb3UgbXVzdCBrZWVwIHlvdXIgcGFzc3dvcmQgc2VjcmV0IGFuZCBub3Qgc2hhcmUgaXQgd2l0aCBhbnlvbmVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2U8L3N0cm9uZz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICA8L3A+XHJcbiAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICA8L2Rpdj5cclxuICAgICAgPC9kaXY+XHJcbiAgPC9kaXY+XHJcbjwvdGVtcGxhdGU+XHJcblxyXG48c2NyaXB0PlxyXG5pbXBvcnQgTXVsdGlGYWN0b3JBdXRoIGZyb20gJ0AvY29tcG9uZW50cy9NdWx0aUZhY3RvckF1dGgudnVlJztcclxuXHJcbmV4cG9ydCBkZWZhdWx0IHtcclxuICBkYXRhKCkge1xyXG4gICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgbmVlZHNWdWVSZWZyZXNoOiB7IGRhdGE6IGZhbHNlLCBrZWVwTG9vcGluZzogZmFsc2UgfSxcclxuICAgICAgICAgIG1mYV9xcl9pbWFnZV9yZW5kZXJlZDogZmFsc2UsXHJcbiAgICAgICAgICBwYXNzd29yZF92aXNpYmxlOiBmYWxzZSxcclxuICAgICAgICAgIGRhdGFfdXNhZ2VfY2hlY2tlZDogW10sXHJcbiAgICAgIH07XHJcbiAgfSxcclxuICBjb21wb25lbnRzOiB7XHJcbiAgICAgIE11bHRpRmFjdG9yQXV0aCxcclxuICB9LFxyXG4gIG1ldGhvZHM6IHtcclxuICAgICAgYXN5bmMgbG9naW5BUEkoKSB7XHJcbiAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgIGF3YWl0IHRoaXMudXNlci5sb2dpbigpOyAvLyBVc2UgdGhlIGFjdGlvbiBwcm92aWRlZCBieSBtYXBBY3Rpb25zXHJcbiAgICAgICAgICAgICAgaWYgKHRoaXMudXNlci5tZmFfYXV0aG9yaXNlZCkge1xyXG4gICAgICAgICAgICAgICAgICBpZiAodGhpcy51c2VyLnJvbGVfbmFtZSA9PSBcImNsaWVudCB1c2VyXCIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKFwiL3F1ZXN0aW9ubmFpcmVcIilcclxuICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLnVzZXIucm9sZV9uYW1lID09IFwiY29wb3JhdGUgdXNlclwiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaChcIi9tYW5hZ2Vfam9ic1wiKVxyXG4gICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goXCIvaW5kZXhcIilcclxuICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy51c2VyLnBhc3N3b3JkX2F1dGhvcmlzZWQpIHtcclxuICAgICAgICAgICAgICAgICAgdGhpcy4kcmVmcy5tdWx0aUZhY3RvckF1dGhDb21wb25lbnQucmVuZGVyUVJDb2RlKClcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgdGhpcy51c2VyLmxvZ2luX2VtYWlsID0gXCJcIlxyXG4gICAgICAgICAgICAgIHRoaXMudXNlci5sb2dpbl9wYXNzd29yZCA9IFwiXCJcclxuICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgdGhpcy51c2VyLmxvZ2luX2VtYWlsID0gXCJcIlxyXG4gICAgICAgICAgICAgIHRoaXMudXNlci5sb2dpbl9wYXNzd29yZCA9IFwiXCJcclxuICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiTG9naW4gZmFpbGVkOlwiLCBlcnJvcik7XHJcbiAgICAgICAgICB9XHJcbiAgICAgIH0sXHJcbiAgICAgIHZ1ZV9yZWZyZXNoX2xvZ2luKCkge1xyXG4gICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICB0aGlzLm5lZWRzVnVlUmVmcmVzaC5kYXRhID0gXCJcIjtcclxuICAgICAgICAgICAgICB0aGlzLm5lZWRzVnVlUmVmcmVzaC5kYXRhID1cclxuICAgICAgICAgICAgICAgICAgdGhpcy5uZWVkc1Z1ZVJlZnJlc2guZGF0YSArIFwiIFwiICsgdGhpcy51c2VyLm1mYV9hdXRob3Jpc2VkO1xyXG4gICAgICAgICAgICAgIHRoaXMubmVlZHNWdWVSZWZyZXNoLmRhdGEgPVxyXG4gICAgICAgICAgICAgICAgICB0aGlzLm5lZWRzVnVlUmVmcmVzaC5kYXRhICsgXCIgXCIgKyB0aGlzLnVzZXIucGFzc3dvcmRfYXV0aG9yaXNlZDtcclxuICAgICAgICAgICAgICB0aGlzLm5lZWRzVnVlUmVmcmVzaC5kYXRhID1cclxuICAgICAgICAgICAgICAgICAgdGhpcy5uZWVkc1Z1ZVJlZnJlc2guZGF0YSArIFwiIFwiICsgdGhpcy51c2VyLm1mYV9xcl9pbWFnZV9yZW5kZXJlZDtcclxuICAgICAgICAgICAgICB0aGlzLm5lZWRzVnVlUmVmcmVzaC5kYXRhID1cclxuICAgICAgICAgICAgICAgICAgdGhpcy5uZWVkc1Z1ZVJlZnJlc2guZGF0YSArIFwiIFwiICsgdGhpcy51c2VyLm1mYV9hdXRob3Jpc2VkO1xyXG4gICAgICAgICAgICAgIHRoaXMubmVlZHNWdWVSZWZyZXNoLmRhdGEgPVxyXG4gICAgICAgICAgICAgICAgICB0aGlzLm5lZWRzVnVlUmVmcmVzaC5kYXRhICsgXCIgXCIgKyB0aGlzLnVzZXIubWZhX3NlY3JldF9jb25maXJtZWQ7XHJcbiAgICAgICAgICAgICAgdGhpcy5uZWVkc1Z1ZVJlZnJlc2guZGF0YSA9XHJcbiAgICAgICAgICAgICAgICAgIHRoaXMubmVlZHNWdWVSZWZyZXNoLmRhdGEgKyBcIiBcIiArIHRoaXMudXNlci5sb2dnZWRfaW47XHJcbiAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yKTtcclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICBpZiAodGhpcy5uZWVkc1Z1ZVJlZnJlc2gua2VlcExvb3BpbmcpIHtcclxuICAgICAgICAgICAgICBjb25zdCBteVRpbWVvdXQgPSBzZXRUaW1lb3V0KHRoaXMudnVlX3JlZnJlc2hfbG9naW4sIDUwMCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgIH0sXHJcbiAgICAgIHJlbmRlcl9xcl9jb2RlKCkge1xyXG4gICAgICAgICAgLy8gaHR0cHM6Ly9jb2RlcGVuLmlvL3JlYmVsY2hyaXMvcGVuL1pFV1JvTWdcclxuICAgICAgICAgIGNvbnN0IGhlaWdodCA9IHRoaXMudXNlci5tZmFfcXJfaW1hZ2UubGVuZ3RoO1xyXG4gICAgICAgICAgY29uc3Qgd2lkdGggPSB0aGlzLnVzZXIubWZhX3FyX2ltYWdlWzBdLmxlbmd0aDtcclxuXHJcbiAgICAgICAgICB2YXIgY2FudmFzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJxcl9jb2RlX2NhbnZhc1wiKTtcclxuXHJcbiAgICAgICAgICAvLyByZXNpemUgdGhlIGNhbnZhc1xyXG4gICAgICAgICAgY2FudmFzLndpZHRoID0gd2lkdGg7XHJcbiAgICAgICAgICBjYW52YXMuaGVpZ2h0ID0gaGVpZ2h0O1xyXG5cclxuICAgICAgICAgIC8vIGdldCBhbiBhcnJheSBvZiB0aGUgY2FudmFzIGRhdGFcclxuICAgICAgICAgIHZhciBjdHggPSBjYW52YXMuZ2V0Q29udGV4dChcIjJkXCIpO1xyXG5cclxuICAgICAgICAgIC8vIGRyYXcgbmV3bHkgbW9kaWZpZWQgcGl4ZWxzIGJhY2sgb250byB0aGUgY2FudmFzXHJcbiAgICAgICAgICBjdHguZmlsbFJlY3QoMCwgMCwgd2lkdGgsIGhlaWdodCk7XHJcbiAgICAgICAgICB2YXIgbXlfaW1hZ2VfZGF0YSA9IGN0eC5nZXRJbWFnZURhdGEoMCwgMCwgd2lkdGgsIGhlaWdodCk7XHJcbiAgICAgICAgICAvLyBwcmVwYXJlIGRhdGFcclxuICAgICAgICAgIGNvbnN0IGRhdGEgPSBteV9pbWFnZV9kYXRhLmRhdGE7XHJcblxyXG4gICAgICAgICAgZm9yICh2YXIgcm93X2luZGV4ID0gMDsgcm93X2luZGV4IDwgaGVpZ2h0OyByb3dfaW5kZXgrKykge1xyXG4gICAgICAgICAgICAgIGZvciAodmFyIGNvbF9pbmRleCA9IDA7IGNvbF9pbmRleCA8IHdpZHRoOyBjb2xfaW5kZXgrKykge1xyXG4gICAgICAgICAgICAgICAgICBjb25zdCB2YWx1ZSA9IHRoaXMudXNlci5tZmFfcXJfaW1hZ2Vbcm93X2luZGV4XVtjb2xfaW5kZXhdO1xyXG4gICAgICAgICAgICAgICAgICBpZiAoIVswLCAyNTVdLmluY2x1ZGVzKHZhbHVlKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2codmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgIGNvbnN0IGRhdGFfaW5kZXggPSByb3dfaW5kZXggKiB3aWR0aCAqIDQgKyBjb2xfaW5kZXggKiA0O1xyXG4gICAgICAgICAgICAgICAgICBjb25zdCBtZXNzYWdlID0gYERhdGEgbGVuZ3RoIGlzOiAke2RhdGEubGVuZ3RofS4gV2UgYXJlIG9uIGRhdGFfaW5kZXg6ICR7ZGF0YV9pbmRleH0gUm93OiAke3Jvd19pbmRleH0sIENvbDogJHtjb2xfaW5kZXh9IGlzIHNldCB0byB2YWx1ZTogJHt2YWx1ZX1gO1xyXG5cclxuICAgICAgICAgICAgICAgICAgZGF0YVtkYXRhX2luZGV4XSA9IHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICBkYXRhW2RhdGFfaW5kZXggKyAxXSA9IHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICBkYXRhW2RhdGFfaW5kZXggKyAyXSA9IHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICBkYXRhW2RhdGFfaW5kZXggKyAzXSA9IDI1NTtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgY3R4LnB1dEltYWdlRGF0YShteV9pbWFnZV9kYXRhLCAwLCAwKTtcclxuXHJcbiAgICAgICAgICB0aGlzLm1mYV9xcl9pbWFnZV9yZW5kZXJlZCA9IHRydWU7XHJcbiAgICAgIH0sXHJcbiAgfSxcclxuICBwcm9wczogW1widXNlcnNcIiwgXCJ1c2VyXCIsIFwicm9sZXNcIiwgXCJtZXNzYWdlc1wiXSxcclxuICBjcmVhdGVkKCkge1xyXG4gICAgICB0aGlzLm5lZWRzVnVlUmVmcmVzaC5rZWVwTG9vcGluZyA9IHRydWU7XHJcbiAgICAgIHRoaXMudnVlX3JlZnJlc2hfbG9naW4oKTtcclxuICAgICAgLy8gdGhpcy5jaGVja19sb2dnZWRfaW4oKTtcclxuICB9LFxyXG4gIGJlZm9yZVVubW91bnQoKSB7XHJcbiAgICAgIC8vIHdlIGFyZSBsZWF2aW5nIHRoZSBwYWdlIHNvIGRvbid0IG5lZWQgdG8ga2VlcCByZWZlcnNoaW5nIHRoZSBsb2NhbCBsaXN0XHJcbiAgICAgIHRoaXMubmVlZHNWdWVSZWZyZXNoLmtlZXBMb29waW5nID0gZmFsc2U7XHJcbiAgICAgIC8vIG5lZWQgdG8gc2NyYXAgY2hlY2tfbG9nZ2VkX2luMiBhcyB3ZWxsXHJcbiAgICAgIGNsZWFyVGltZW91dCh0aGlzLmxvZ2luX3RpbWVvdXQpXHJcbiAgfSxcclxuICBjb21wdXRlZDoge1xyXG4gICAgICBkaXNhYmxlZCgpIHtcclxuICAgICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgICAgKHRoaXMuZGF0YV91c2FnZV9jaGVja2VkLmxlbmd0aCA9PSAwKSB8fFxyXG4gICAgICAgICAgICAgICh0aGlzLnVzZXIubG9naW5fZW1haWwubGVuZ3RoID09IDApIHx8XHJcbiAgICAgICAgICAgICAgKHRoaXMudXNlci5sb2dpbl9wYXNzd29yZC5sZW5ndGggPT0gMClcclxuICAgICAgICAgICk7XHJcbiAgICAgIH0sXHJcbiAgfSxcclxufTtcclxuPC9zY3JpcHQ+XHJcblxyXG48c3R5bGUgc2NvcGVkPlxyXG4vKiBBc3N1bWluZyAuZm9ybS1jaGVjayBpcyB1bmlxdWUgdG8geW91ciBjb21wb25lbnQgKi9cclxuPC9zdHlsZT4iLCI8dGVtcGxhdGU+XHJcblxyXG4gICAgPGRpdiBjbGFzcz1cIm1pbi12aC0xMDAgZC1mbGV4IGFsaWduLWl0ZW1zLWNlbnRlclwiPlxyXG4gICAgICAgIDxkaXYgY2xhc3M9XCJyb3cgdy0xMDBcIj5cclxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNvbC1tZC0yIGNvbC1sZy0zIGNvbC14bC00XCI+XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY29sLW1kLTggY29sLWxnLTYgY29sLXhsLTRcIj5cclxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjYXJkIG15LTIgcHgtMFwiPlxyXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjYXJkLWJvZHlcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPGgzIGNsYXNzPVwiY2FyZC10aXRsZVwiPlBhc3N3b3JkIFNldCAvIFJlc2V0PC9oMz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiB2LWlmPVwidGhpcy5pbnB1dC5wYXNzd29yZF9yZXNldF90b2tlbiA+IDBcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzPVwiY2FyZC10ZXh0XCI+VGhlIGxpbmsgeW91IGhhdmUgY2xpY2tlZCBvbiBpcyBvbmx5IHZhbGlkIGZvciBhIHNob3J0IHdoaWxlLiBJZiBpdCBoYXNcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aW1lZCBvdXQsIHlvdSB3aWxsIGdldCBhIHJlamVjdGlvbiBtZXNzYWdlIGFuZCB5b3Ugd2lsbCBuZWVkIHRvIHNlbmQgYW5vdGhlciByZXF1ZXN0IGF0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFpbiBsb2dpbiBwYWdlIDwvcD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzPVwiY2FyZC10ZXh0XCI+WW91IGFyZSBhYm91dCB0byBzZXQgLyByZXNldCB5b3VyIHBhc3N3b3JkLjwvcD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3M9XCJjYXJkLXRleHRcIj5BIHBhc3N3b3JkIGNvbXBsZXhpdHkgYWxnb3JpdGhtIGlzIGluIHBsYWNlIHNvIGNob29zZSBjYXJlZnVsbHkgYWNjb3JkaW5nXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0byB0aGVzZSBydWxlcy4gWW91ciBwYXNzd29yZCBtdXN0OjwvcD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPHVsPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxpPmJlIGJldHdlZW4gOCBhbmQgNjQgY2hhcmFjdGVycyBsb25nPC9saT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsaT5jb250YWluIGFuIHVwcGVyY2FzZSBjaGFyYWN0ZXI8L2xpPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxpPmNvbnRhaW4gYSBsb3dlcmNhc2UgY2hhcmFjdGVyPC9saT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsaT5jb250YWluIGEgbnVtZXJpY2FsIGNoYXJhY3RlcjwvbGk+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGk+bm90IGhhdmUgbW9yZSB0aGFuIGhhbGYgdGhlIGNoYXJhY3RlcnMgYXMgdGhlIHNhbWUgY2hhcmFjdGVyPC9saT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsaT5ub3QgYmUgb25lIG9mIHRoZSBwYXNzd29yZHMgdGhhdCBhcmUga25vd24gdG8gYmUgaW5zZWN1cmUgKFwicGFzc3dvcmQxMjNcIiBmb3IgZXhhbXBsZSk8L2xpPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L3VsPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8cD5JZiB5b3VyIHBhc3N3b3JkIGZhaWxzIGFueSBvZiB0aGVzZSB0ZXN0cywgdGhlcmUgd2lsbCBiZSBhIHJlamVjdGlvbiBtZXNzYWdlLjwvcD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3M9XCJjYXJkLXRleHRcIj5XZSByZWNvbW1lbmQgdXNpbmcgYSBwYXNzd29yZCBtYW5hZ2VyIHRvIGNob29zZSBzZWN1cmUgcGFzc3dvcmRzIGFuZCBoZWxwXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB5b3VcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVzZSB0aGVtIGluIGEgY29udmVuaWVudCB3YXkuPC9wPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzcz1cImNhcmQtdGV4dFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGZvcj1cInBhc3N3b3JkXCIgaWQ9XCJwYXNzd29yZFwiIGNsYXNzPVwiZm9ybS1sYWJlbFwiPkVudGVyIG5ldyBwYXNzd29yZDwvbGFiZWw+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgY2xhc3M9XCJmb3JtLWNvbnRyb2xcIiA6Y2xhc3M9XCJ0aGlzLnVzZXJzLnBhc3N3b3JkX3ZhbGlkXCIgdHlwZT1cInBhc3N3b3JkXCIgbmFtZT1cInBhc3N3b3JkXCIgdi1tb2RlbD1cImlucHV0LnBhc3N3b3JkXzFcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPVwiUGFzc3dvcmRcIiBAY2hhbmdlPVwidGhpcy51c2Vycy5jaGVja19wYXNzd29yZF92YWxpZCh0aGlzLmlucHV0LnBhc3N3b3JkXzEpXCIvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJ2YWxpZC1mZWVkYmFja1wiPlN0cm9uZyBlbm91Z2g8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC9wPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzcz1cImNhcmQtdGV4dFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGZvcj1cInBhc3N3b3JkXCIgaWQ9XCJwYXNzd29yZFwiIGNsYXNzPVwiZm9ybS1sYWJlbFwiPkNvbmZpcm0gbmV3IHBhc3N3b3JkPC9sYWJlbD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCBjbGFzcz1cImZvcm0tY29udHJvbFwiIHR5cGU9XCJwYXNzd29yZFwiIG5hbWU9XCJwYXNzd29yZFwiIHYtbW9kZWw9XCJpbnB1dC5wYXNzd29yZF8yXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj1cIlBhc3N3b3JkXCIgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC9wPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZC1ncmlkIGdhcC0xXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIHR5cGU9XCJidXR0b25cIiBjbGFzcz1cImJ0biBidG4tc3VjY2VzcyBidG4tbGcgbXktMVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQGNsaWNrPVwidGhpcy51c2VyLmFwaV9yZXNldF9wYXNzd29yZCh0aGlzLmlucHV0KVwiPlNldCAvIFJlc2V0IFlvdXIgUGFzc3dvcmQ8L2J1dHRvbj5cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZC1ncmlkIGdhcC0xXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxyb3V0ZXItbGluayBjbGFzcz1cImJ0biBidG4tcHJpbWFyeVwiIHRvPVwiL1wiPkhlbHAgJiBJbmZvPC9yb3V0ZXItbGluaz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+ICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY29sLW1kLTIgY29sLWxnLTMgY29sLXhsLTRcIj5cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICA8L2Rpdj5cclxuXHJcbjwvdGVtcGxhdGU+XHJcblxyXG48c2NyaXB0PlxyXG5leHBvcnQgZGVmYXVsdCB7XHJcbiAgICBuYW1lOiAnUGFzc3dvcmRSZXNldFZpZXcnLFxyXG4gICAgZGF0YSgpIHtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBpbnB1dDoge1xyXG4gICAgICAgICAgICAgICAgcGFzc3dvcmRfcmVzZXRfdG9rZW46IHRoaXMuJHJvdXRlLnF1ZXJ5LnBhc3N3b3JkX3Jlc2V0X3Rva2VuLFxyXG4gICAgICAgICAgICAgICAgcGFzc3dvcmRfMTogXCJcIixcclxuICAgICAgICAgICAgICAgIHBhc3N3b3JkXzI6IFwiXCIsXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9LFxyXG4gICAgbWV0aG9kczoge1xyXG5cclxuICAgIH0sXHJcbiAgICBwcm9wczogW1widXNlclwiLCAndXNlcnMnXSxcclxufVxyXG48L3NjcmlwdD5cclxuXHJcbjxzdHlsZSBzY29wZWQ+XHJcblxyXG48L3N0eWxlPiIsIjx0ZW1wbGF0ZT5cclxuICAgIDxkaXYgY2xhc3M9XCJtYWluQ29udGFpbmVyXCI+XHJcbiAgICAgICAgPGRpdiB2LWlmPVwiY3JlYXRlX21vZGFsX29wZW4gfHwgZWRpdF9tb2RhbF9vcGVuXCJcclxuICAgICAgICAgICAgY2xhc3M9XCJmaXhlZCBpbnNldC0wIGJnLWJsYWNrIGJnLW9wYWNpdHktNTAgYmFja2Ryb3AtYmx1ci1zbSB6LTQwXCIgQGNsaWNrPVwiY2xvc2VfbW9kYWxcIj48L2Rpdj5cclxuICAgICAgICA8ZGl2IGNsYXNzPVwic2VjdGlvbkNvbnRhaW5lclwiPlxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwidHdvLWNvbHVtbnNcIj5cclxuICAgICAgICAgICAgICAgIDxoMSBjbGFzcz1cInRpdGxlLW1lZGl1bVwiPk1hbmFnZSBEaWFsb2d1ZXM8L2gxPlxyXG4gICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz1cImJ0biBidG4tcHJpbWFyeSBtYi00XCIgQGNsaWNrPVwib3Blbl9tb2RhbCgnY3JlYXRlJylcIj5DcmVhdGU8L2J1dHRvbj5cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgIDwhLS0gQnV0dG9uIHRvIG9wZW4gbW9kYWwgLS0+XHJcblxyXG4gICAgICAgICAgICA8IS0tIENyZWF0ZSBEaWFsb2d1ZSBNb2RhbCBEaWFsb2cgLS0+XHJcbiAgICAgICAgICAgIDxkaWFsb2cgaWQ9XCJteV9tb2RhbF8xXCIgY2xhc3M9XCJtb2RhbFwiIDpvcGVuPVwiY3JlYXRlX21vZGFsX29wZW5cIj5cclxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJtb2RhbC1ib3hcIj5cclxuICAgICAgICAgICAgICAgICAgICA8aDMgY2xhc3M9XCJmb250LWJvbGQgdGV4dC1sZ1wiPkNyZWF0ZSBOZXcgRGlhbG9ndWU8L2gzPlxyXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJzcGFjZS15LTRcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPCEtLSBUaXRsZSBpbnB1dCAtLT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBmb3I9XCJ0aXRsZVwiPlRpdGxlPC9sYWJlbD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPVwidGV4dFwiIGlkPVwidGl0bGVcIiBjbGFzcz1cImlucHV0IGlucHV0LXByaW1hcnlcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYtbW9kZWw9XCJkaWFsb2d1ZV9ndWlkZS5uZXdfZGlhbG9ndWUudGl0bGVcIiAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwhLS0gRGVzY3JpcHRpb24gaW5wdXQgLS0+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgZm9yPVwiZGVzY3JpcHRpb25cIj5EZXNjcmlwdGlvbjwvbGFiZWw+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT1cInRleHRcIiBpZD1cImRlc2NyaXB0aW9uXCIgY2xhc3M9XCJpbnB1dCBpbnB1dC1wcmltYXJ5XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2LW1vZGVsPVwiZGlhbG9ndWVfZ3VpZGUubmV3X2RpYWxvZ3VlLmRlc2NyaXB0aW9uXCIgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8IS0tIFF1ZXN0aW9uIExpc3QgLS0+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgdi1pZj1cImRpYWxvZ3VlX2d1aWRlLm5ld19kaWFsb2d1ZS5xdWVzdGlvbl9zZXQubGVuZ3RoID4gMFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGZvcj1cInJvbGVcIiBjbGFzcz1cInRpdGxlLXNtYWxsXCI+UXVlc3Rpb25zPC9sYWJlbD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx1bD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGkgdi1mb3I9XCIocXVlc3Rpb24sIGluZGV4KSBpbiBkaWFsb2d1ZV9ndWlkZS5uZXdfZGlhbG9ndWUucXVlc3Rpb25fc2V0XCIgOmtleT1cImluZGV4XCIgY2xhc3M9XCJ0d28tY29sdW1uc1wiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cD57eyBxdWVzdGlvbi50ZXh0IH19PC9wPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPVwiYnRuIGJ0bi1zZWNvbmRhcnkgYnRuLXNtXCIgQGNsaWNrPVwicmVtb3ZlX3F1ZXN0aW9uKGluZGV4KVwiPkRlbGV0ZTwvYnV0dG9uPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvbGk+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3VsPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwhLS0gUXVlc3Rpb24gaW5wdXQgLS0+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDEgY2xhc3M9XCJ0aXRsZS1zbWFsbFwiPk5ldyBxdWVzdGlvbjwvaDE+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbD5RdWVzdGlvbiBUZXh0PC9sYWJlbD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT1cInRleHRcIiB2LW1vZGVsPVwiZGlhbG9ndWVfZ3VpZGUubmV3X3F1ZXN0aW9uLnRleHRcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzcz1cImlucHV0IGlucHV0LXByaW1hcnkgdy1mdWxsXCIgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDEgY2xhc3M9XCJ0aXRsZS1zbWFsbFwiPlBvaW50czwvaDE+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGZvcm0gQHN1Ym1pdC5wcmV2ZW50PVwiZGlhbG9ndWVfZ3VpZGUuYWRkX3BvaW50XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJ0d28tY29sdW1uc1wiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9XCJ0ZXh0XCIgdi1tb2RlbD1cImRpYWxvZ3VlX2d1aWRlLm5ld19wb2ludFwiIHBsYWNlaG9sZGVyPVwiQWRkIGEgbmV3IHBvaW50XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzcz1cImlucHV0IGlucHV0LXByaW1hcnkgdy1mdWxsXCIgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIHR5cGU9XCJzdWJtaXRcIiBjbGFzcz1cImJ0biBidG4tcHJpbWFyeVwiPkFkZCBQb2ludDwvYnV0dG9uPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Zvcm0+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInNraWxscy1saXN0IG10LTRcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiB2LWZvcj1cIihwb2ludCwgaW5kZXgpIGluIGRpYWxvZ3VlX2d1aWRlLm5ld19xdWVzdGlvbi5wb2ludHNcIiA6a2V5PVwiaW5kZXhcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3M9XCJmbGV4IGp1c3RpZnktYmV0d2VlbiBpdGVtcy1jZW50ZXIgbWItMlwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4+e3sgcG9pbnQgfX08L3NwYW4+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIEBjbGljaz1cImRpYWxvZ3VlX2d1aWRlLnJlbW92ZV9wb2ludChpbmRleClcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzPVwiYnRuIGJ0bi1zZWNvbmRhcnkgYnRuLXNtXCI+UmVtb3ZlPC9idXR0b24+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbD5UaW1lIEFsbG90dGVkIChpbiBzZWNvbmRzKTwvbGFiZWw+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9XCJudW1iZXJcIiB2LW1vZGVsPVwiZGlhbG9ndWVfZ3VpZGUubmV3X3F1ZXN0aW9uLnRpbWVfYWxsb3R0ZWRcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzcz1cImlucHV0IGlucHV0LXByaW1hcnkgdy1mdWxsXCIgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgQGNsaWNrPVwiZGlhbG9ndWVfZ3VpZGUuYWRkX3F1ZXN0aW9uKClcIiBjbGFzcz1cImJ0biBidG4tcHJpbWFyeVwiPkFkZCBOZXdcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFF1ZXN0aW9uPC9idXR0b24+XHJcblxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPCEtLSBTdWJtaXQgYnV0dG9uIC0tPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwibW9kYWwtYWN0aW9uXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIHR5cGU9XCJzdWJtaXRcIiBjbGFzcz1cImJ0biBidG4tcHJpbWFyeVwiIEBjbGljaz1cImFkZF9kaWFsb2d1ZSgpOyBjbG9zZV9tb2RhbCgpO1wiPkNyZWF0ZSBkaWFsb2d1ZTwvYnV0dG9uPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgPCEtLSBDbG9zZSBidXR0b24gLS0+XHJcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cIm1vZGFsLWFjdGlvblwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIHR5cGU9XCJidXR0b25cIiBjbGFzcz1cImJ0biBidG4tc2Vjb25kYXJ5XCIgQGNsaWNrPVwiY2xvc2VfbW9kYWxcIj5DbG9zZTwvYnV0dG9uPlxyXG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgIDwvZGlhbG9nPlxyXG5cclxuICAgICAgICAgICAgPCEtLSBFZGl0IERpYWxvZ3VlIE1vZGFsIERpYWxvZyAtLT5cclxuICAgICAgICAgICAgPGRpYWxvZyBpZD1cIm15X21vZGFsXzJcIiBjbGFzcz1cIm1vZGFsXCIgOm9wZW49XCJlZGl0X21vZGFsX29wZW5cIj5cclxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJtb2RhbC1ib3hcIj5cclxuICAgICAgICAgICAgICAgICAgICA8aDMgY2xhc3M9XCJmb250LWJvbGQgdGV4dC1sZ1wiPkVkaXQgRGlhbG9ndWU8L2gzPlxyXG4gICAgICAgICAgICAgICAgICAgIDxmb3JtIGNsYXNzPVwic3BhY2UteS00XCIgQHN1Ym1pdC5wcmV2ZW50PVwidXBkYXRlX2RpYWxvZ3VlKCk7IGNsb3NlX21vZGFsKCk7XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwhLS0gVGl0bGUgaW5wdXQgLS0+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgZm9yPVwidGl0bGVcIj5UaXRsZTwvbGFiZWw+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT1cInRleHRcIiBpZD1cInRpdGxlXCIgY2xhc3M9XCJpbnB1dCBpbnB1dC1wcmltYXJ5XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2LW1vZGVsPVwiZGlhbG9ndWVfZ3VpZGUuZGlhbG9ndWVfdG9fZWRpdC50aXRsZVwiIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPCEtLSBEZXNjcmlwdGlvbiBpbnB1dCAtLT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBmb3I9XCJkZXNjcmlwdGlvblwiPkRlc2NyaXB0aW9uPC9sYWJlbD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPVwidGV4dFwiIGlkPVwiZGVzY3JpcHRpb25cIiBjbGFzcz1cImlucHV0IGlucHV0LXByaW1hcnlcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYtbW9kZWw9XCJkaWFsb2d1ZV9ndWlkZS5kaWFsb2d1ZV90b19lZGl0LmRlc2NyaXB0aW9uXCIgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8IS0tIFF1ZXN0aW9uIGlucHV0IC0tPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGZvcj1cInJvbGVcIj5RdWVzdGlvbnM8L2xhYmVsPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwhLS0gU3VibWl0IGJ1dHRvbiAtLT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cIm1vZGFsLWFjdGlvblwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiB0eXBlPVwic3VibWl0XCIgY2xhc3M9XCJidG4gYnRuLXByaW1hcnlcIj5TYXZlPC9idXR0b24+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgIDwvZm9ybT5cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgPCEtLSBDbG9zZSBidXR0b24gLS0+XHJcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cIm1vZGFsLWFjdGlvblwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIHR5cGU9XCJidXR0b25cIiBjbGFzcz1cImJ0biBidG4tc2Vjb25kYXJ5XCIgQGNsaWNrPVwiY2xvc2VfbW9kYWxcIj5DbG9zZTwvYnV0dG9uPlxyXG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgIDwvZGlhbG9nPlxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwibXQtOCBmbGV4IGp1c3RpZnktY2VudGVyXCI+XHJcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZmxleCBmbGV4LXdyYXAganVzdGlmeS1jZW50ZXJcIj5cclxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwib3ZlcmZsb3cteC1hdXRvIHJvdW5kZWQtbGdcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPHRhYmxlIGNsYXNzPVwidGFibGUgdGFibGUtemVicmEgbWluLXctbWF4IG14LWF1dG8gcm91bmRlZC1sZ1wiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRoZWFkIGNsYXNzPVwiYmctcHJpbWFyeSB0ZXh0LWdyYXktMzAwXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRyPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGggc2NvcGU9XCJjb2xcIiBjbGFzcz1cInRoXCI+VGl0bGU8L3RoPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGggc2NvcGU9XCJjb2xcIiBjbGFzcz1cInRoXCI+RGVzY3JpcHRpb248L3RoPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGggc2NvcGU9XCJjb2xcIiBjbGFzcz1cInRoXCI+IyBvZiBRdWVzdGlvbnM8L3RoPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGggc2NvcGU9XCJjb2xcIiBjbGFzcz1cInRoXCI+PC90aD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RyPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90aGVhZD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0Ym9keSBjbGFzcz1cImJnLXdoaXRlIGRpdmlkZS15IGRpdmlkZS1ncmF5LTIwMFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwhLS0ge3sgZGlhbG9ndWVfZ3VpZGUuZGlhbG9ndWVfZ3VpZGVzIH19IC0tPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ciB2LWZvcj1cImRpYWxvZ3VlLCBpbmRleCBpbiBkaWFsb2d1ZV9ndWlkZS5kaWFsb2d1ZV9ndWlkZXNcIiA6a2V5PVwiZGlhbG9ndWUuaWRcIiBjbGFzcz1cImhvdmVyXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZCBjbGFzcz1cInRkXCI+e3sgZGlhbG9ndWUudGl0bGUgfX08L3RkPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGQgY2xhc3M9XCJ0ZFwiPnt7IGRpYWxvZ3VlLmRlc2NyaXB0aW9uIH19PC90ZD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkIGNsYXNzPVwidGRcIj57eyBkaWFsb2d1ZS5xdWVzdGlvbnMubGVuZ3RoIH19PC90ZD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkIGNsYXNzPVwidGRcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gdHlwZT1cImJ1dHRvblwiIGNsYXNzPVwiYnRuIGJ0bi1zdWNjZXNzXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBAY2xpY2s9XCJkaWFsb2d1ZV9ndWlkZS5kaWFsb2d1ZV90b19lZGl0ID0gZGlhbG9ndWU7IG9wZW5fbW9kYWwoJ2VkaXQnKVwiPkVkaXQ8L2J1dHRvbj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gdHlwZT1cImJ1dHRvblwiIGNsYXNzPVwiYnRuIGJ0bi1zZWNvbmRhcnkgbWwtMlwiIEBjbGljaz1cImRlbGV0ZV9kaWFsb2d1ZShkaWFsb2d1ZS5pZCwgaW5kZXgpXCI+RGVsZXRlPC9idXR0b24+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGQ+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90cj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGJvZHk+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvdGFibGU+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9XCJidG4gYnRuLXByaW1hcnkgbWItNCBtdC01XCIgQGNsaWNrPVwiZGlhbG9ndWVfZ3VpZGUuZ2V0X2RpYWxvZ3VlX2d1aWRlc19mcm9tX2FwaSgpXCI+UmVmcmVzaCA8L2J1dHRvbj5cclxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgICBcclxuICAgIDwvZGl2PlxyXG48L3RlbXBsYXRlPlxyXG5cclxuPHNjcmlwdD5cclxuZXhwb3J0IGRlZmF1bHQge1xyXG4gICAgZGF0YSgpIHtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBuZWVkc192dWVfcmVmcmVzaDogeyBcImRhdGFcIjogZmFsc2UsIFwia2VlcF9sb29waW5nXCI6IGZhbHNlIH0sXHJcbiAgICAgICAgICAgIGNyZWF0ZV9tb2RhbF9vcGVuOiBmYWxzZSxcclxuICAgICAgICAgICAgZWRpdF9tb2RhbF9vcGVuOiBmYWxzZSxcclxuICAgICAgICB9O1xyXG4gICAgfSxcclxuICAgIG1ldGhvZHM6IHtcclxuICAgICAgICBkZWxldGVfZGlhbG9ndWUoZGlhbG9ndWVfaWQsIGluZGV4KSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmRpYWxvZ3VlX2d1aWRlLmFwaV9kZWxldGVfZ3VpZGUoZGlhbG9ndWVfaWQpID09PSB0cnVlKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRpYWxvZ3VlX2d1aWRlLmRpYWxvZ3VlX2d1aWRlcy5zcGxpY2UoaW5kZXgsIDEpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgXHJcbiAgICAgICAgfSxcclxuICAgICAgICByZW1vdmVfcXVlc3Rpb24oaW5kZXgpIHtcclxuICAgICAgICAgICAgdGhpcy5kaWFsb2d1ZV9ndWlkZS5uZXdfZGlhbG9ndWUucXVlc3Rpb25fc2V0LnNwbGljZShpbmRleCwgMSk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBhZGRfZGlhbG9ndWUoKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZGlhbG9ndWVfZ3VpZGUuYXBpX2NyZWF0ZV9kaWFsb2d1ZV9ndWlkZSgpXHJcbiAgICAgICAgICAgIHRoaXMuZGlhbG9ndWVfZ3VpZGUuZ2V0X2RpYWxvZ3VlX2d1aWRlc19mcm9tX2FwaSgpXHJcbiAgICAgICAgfSxcclxuICAgICAgICB2dWVfcmVmcmVzaCgpIHtcclxuICAgICAgICAgICAgaWYgKFxyXG4gICAgICAgICAgICAgICAgIShcclxuICAgICAgICAgICAgICAgICAgICBbXCJzdXBlciB1c2VyXCIsIFwiaG8gdXNlclwiLCBcInN1cHBvcnRcIl0uaW5jbHVkZXModGhpcy51c2VyLnJvbGVfbmFtZSkgJiZcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnVzZXIubG9nZ2VkX2luXHJcbiAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgICkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goXCJsb2dpblwiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAodGhpcy5uZWVkc192dWVfcmVmcmVzaC5rZWVwX2xvb3BpbmcpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IG15X3RpbWVvdXQgPSBzZXRUaW1lb3V0KHRoaXMudnVlX3JlZnJlc2gsIDUwMCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgIG9wZW5fbW9kYWwodHlwZSkge1xyXG4gICAgICAgICAgICBpZiAodHlwZSA9PSBcImNyZWF0ZVwiKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNyZWF0ZV9tb2RhbF9vcGVuID0gdHJ1ZTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZWRpdF9tb2RhbF9vcGVuID0gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgY2xvc2VfbW9kYWwoKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZWRpdF9tb2RhbF9vcGVuID0gZmFsc2U7XHJcbiAgICAgICAgICAgIHRoaXMuY3JlYXRlX21vZGFsX29wZW4gPSBmYWxzZTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIHVwZGF0ZV9kaWFsb2d1ZSgpIHtcclxuICAgICAgICAgICAgdGhpcy5kaWFsb2d1ZV9ndWlkZS5hcGlfdXBkYXRlX2RpYWxvZ3VlX2d1aWRlKCk7XHJcbiAgICAgICAgfSxcclxuICAgIH0sXHJcbiAgICBwcm9wczogW1widXNlcnNcIiwgXCJ1c2VyXCIsIFwicm9sZXNcIiwgXCJtZXNzYWdlc1wiLCBcImRpYWxvZ3VlX2d1aWRlXCJdLFxyXG4gICAgY3JlYXRlZCgpIHtcclxuICAgICAgICB0aGlzLm5lZWRzX3Z1ZV9yZWZyZXNoLmtlZXBfbG9vcGluZyA9IHRydWU7XHJcbiAgICAgICAgdGhpcy52dWVfcmVmcmVzaCgpO1xyXG4gICAgICAgIHRoaXMuZGlhbG9ndWVfZ3VpZGUuZ2V0X2RpYWxvZ3VlX2d1aWRlc19mcm9tX2FwaSgpXHJcbiAgICAgICAgLy8gdGhpcy51c2Vycy5wb3B1bGF0ZV91c2VyX2xpc3QoKTtcclxuICAgICAgICAvLyB0aGlzLnJvbGVzLmdldF9yb2xlc19mcm9tX2FwaSgpO1xyXG4gICAgfSxcclxuICAgIGJlZm9yZVVubW91bnQoKSB7XHJcbiAgICAgICAgdGhpcy5uZWVkc192dWVfcmVmcmVzaC5rZWVwX2xvb3BpbmcgPSBmYWxzZVxyXG4gICAgfSxcclxufTtcclxuPC9zY3JpcHQ+XHJcblxyXG48c3R5bGU+XHJcbnRkIHtcclxuICAgIHZlcnRpY2FsLWFsaWduOiBtaWRkbGU7XHJcbn1cclxuXHJcbnRoIHtcclxuICAgIHZlcnRpY2FsLWFsaWduOiBtaWRkbGU7XHJcbn1cclxuPC9zdHlsZT4iLCI8dGVtcGxhdGU+XHJcbiAgICA8ZGl2IGNsYXNzPVwibWFpbkNvbnRhaW5lclwiPlxyXG4gICAgICAgIDxkaXYgY2xhc3M9XCJzZWN0aW9uQ29udGFpbmVyXCI+XHJcbiAgICAgICAgICAgIDxoMSBjbGFzcz1cInRpdGxlLW1lZGl1bVwiPkFzayBhIHF1ZXN0aW9uPC9oMT5cclxuICAgICAgICAgICAgPGxhYmVsIGNsYXNzPVwidGl0bGUtc21hbGxcIj5cclxuICAgICAgICAgICAgICAgIFF1ZXJ5OlxyXG4gICAgICAgICAgICA8L2xhYmVsPlxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY29sLW1kLTdcIj5cclxuICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPVwidGV4dFwiIGNsYXNzPVwiaW5wdXQgaW5wdXQtcHJpbWFyeVwiIHYtbW9kZWw9XCJ0cmFuc2NyaXB0LnVzZXJfcXVlc3Rpb25cIiBpZD1cInF1ZXN0aW9uXCIgcmVxdWlyZWRcclxuICAgICAgICAgICAgICAgICAgICBhcmlhLWxhYmVsPVwiVHlwZSBhIHF1ZXN0aW9uIGhlcmUuXCI+XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwicm93XCI+XHJcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY29sLTJcIj5cclxuICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPVwiYnRuIGJ0bi1wcmltYXJ5XCIgdHlwZT1cImJ1dHRvblwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHYtb246Y2xpY2s9XCJ0cmFuc2NyaXB0LmFza19xdWVzdGlvbigpOyB0cmFuc2NyaXB0LmF3YWl0aW5nX3Jlc3BvbnNlID0gdHJ1ZTsgdHJhbnNjcmlwdC5yZXNwb25zZSA9IGZhbHNlXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFN1Ym1pdDwvYnV0dG9uPlxyXG4gICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICA8ZGl2IHYtaWY9XCJ0cmFuc2NyaXB0LmF3YWl0aW5nX3Jlc3BvbnNlXCIgY2xhc3M9XCJtdC0yXCI+XHJcbiAgICAgICAgICAgICAgICB7eyB0cmFuc2NyaXB0Lm1lc3NhZ2UgfX1cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJcIiB2LWlmPVwidHJhbnNjcmlwdC5yZXNwb25zZVwiPlxyXG4gICAgICAgICAgICAgICAgPGRpdj5cclxuICAgICAgICAgICAgICAgICAgICA8aDUgY2xhc3M9XCJ0aXRsZS1zbWFsbFwiPkFuc3dlcjo8L2g1PlxyXG4gICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzPVwicHJlc2VydmUtbmV3bGluZXNcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAge3sgdHJhbnNjcmlwdC5yZXNwb25zZSB9fVxyXG4gICAgICAgICAgICAgICAgICAgIDwvcD5cclxuICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cIm10LTJcIj5cclxuICAgICAgICAgICAgICAgICAgICA8aDUgY2xhc3M9XCJ0aXRsZS1zbWFsbFwiPlRyYW5zY3JpcHRzOjwvaDU+XHJcbiAgICAgICAgICAgICAgICAgICAgPGRpdiB2LWZvcj1cIihjb250ZW50LCBpbmRleCkgaW4gdHJhbnNjcmlwdC5kb2N1bWVudHNcIiA6a2V5PVwiaW5kZXhcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPCEtLSB7eyBjb250ZW50IH19IC0tPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwicm93XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY2FyZC1oZWFkZXIgY29sLTEwXCIgOmlkPVwiY29udGVudC50cmFuc2NyaXB0aW9uX2lkXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGg1IGNsYXNzPVwibWItMFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwicm93XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY29sLTVcIj5Tb3VyY2UgSUQ6IHt7IGNvbnRlbnQudHJhbnNjcmlwdGlvbl9pZCB9fTwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2g1PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJyb3dcIj5cclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiA6aWQ9XCInUycgKyBpbmRleFwiIGNsYXNzPVwiY29sbGFwc2VcIiA6YXJpYS1sYWJlbGxlZGJ5PVwiaW5kZXhcIiBkYXRhLXBhcmVudD1cIiNhY2NvcmRpb25cIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY2FyZC1ib2R5XCIgc3R5bGU9XCJ3aGl0ZS1zcGFjZTogcHJlLWxpbmU7XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHt7IGNvbnRlbnQudGV4dCB9fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgPC9kaXY+XHJcbjwvdGVtcGxhdGU+XHJcblxyXG48c2NyaXB0PlxyXG5leHBvcnQgZGVmYXVsdCB7XHJcbiAgICBwcm9wczogW1wibWVzc2FnZXNcIiwgXCJ0cmFuc2NyaXB0XCJdLFxyXG4gICAgZGF0YSgpIHtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBuZWVkX3Z1ZV9yZWZyZXNoOiB7IFwiZGF0YVwiOiBmYWxzZSwgXCJrZWVwTG9vcGluZ1wiOiBmYWxzZSB9LFxyXG4gICAgICAgICAgICBkb21haW5PcmlnaW46IHdpbmRvdy5sb2NhdGlvbi5vcmlnaW4sXHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuICAgIG1ldGhvZHM6IHtcclxuICAgICAgICB2dWVSZWZyZXNoKCkge1xyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5uZWVkX3Z1ZV9yZWZyZXNoLmRhdGEgPSBcIlwiXHJcbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcblxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAodGhpcy5uZWVkX3Z1ZV9yZWZyZXNoLmtlZXBMb29waW5nKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBteVRpbWVvdXQgPSBzZXRUaW1lb3V0KHRoaXMudnVlUmVmcmVzaCwgNTAwKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcbiAgICB9LFxyXG4gICAgbW91bnRlZCgpIHtcclxuICAgICAgICB0aGlzLm5lZWRfdnVlX3JlZnJlc2gua2VlcExvb3BpbmcgPSB0cnVlXHJcbiAgICAgICAgdGhpcy52dWVSZWZyZXNoKClcclxuICAgIH0sXHJcbiAgICBiZWZvcmVVbm1vdW50KCkge1xyXG4gICAgICAgIHRoaXMubmVlZF92dWVfcmVmcmVzaC5rZWVwTG9vcGluZyA9IGZhbHNlXHJcbiAgICB9LFxyXG59O1xyXG48L3NjcmlwdD5cclxuXHJcbjxzdHlsZSBzY29wZWQ+XHJcbi5wcmVzZXJ2ZS1uZXdsaW5lcyB7XHJcbiAgICB3aGl0ZS1zcGFjZTogcHJlLXdyYXA7XHJcbn1cclxuPC9zdHlsZT4iLCJpbXBvcnQgeyBjcmVhdGVSb3V0ZXIsIGNyZWF0ZVdlYkhpc3RvcnkgfSBmcm9tICd2dWUtcm91dGVyJ1xyXG5pbXBvcnQgQ3J1ZFZpZXcgZnJvbSAnLi4vdmlld3MvQ3J1ZFZpZXcudnVlJ1xyXG5pbXBvcnQgSG9tZVZpZXcgZnJvbSAnLi4vdmlld3MvSG9tZVZpZXcudnVlJ1xyXG5pbXBvcnQgTG9naW5WaWV3IGZyb20gJy4uL3ZpZXdzL0xvZ2luVmlldy52dWUnXHJcbmltcG9ydCBQYXNzd29yZFJlc2V0VmlldyBmcm9tICcuLi92aWV3cy9QYXNzd29yZFJlc2V0Vmlldy52dWUnXHJcbmltcG9ydCBNYW5hZ2VEaWFsb2d1ZVZpZXcgZnJvbSAnLi4vdmlld3MvTWFuYWdlRGlhbG9ndWVWaWV3LnZ1ZSdcclxuaW1wb3J0IFRyYW5zY3JpcHRTZWFyY2hWaWV3IGZyb20gJy4uL3ZpZXdzL1RyYW5zY3JpcHRTZWFyY2hWaWV3LnZ1ZSdcclxuXHJcbmNvbnN0IHJvdXRlciA9IGNyZWF0ZVJvdXRlcih7XHJcbiAgaGlzdG9yeTogY3JlYXRlV2ViSGlzdG9yeShpbXBvcnQubWV0YS5lbnYuQkFTRV9VUkwpLFxyXG4gIHJvdXRlczogW1xyXG4gICAge1xyXG4gICAgICBwYXRoOiAnLycsXHJcbiAgICAgIG5hbWU6ICdob21lJyxcclxuICAgICAgY29tcG9uZW50OiBIb21lVmlld1xyXG4gICAgfSxcclxuICAgIHtcclxuICAgICAgcGF0aDogJy9pbmRleCcsXHJcbiAgICAgIG5hbWU6ICdpbmRleCcsXHJcbiAgICAgIGNvbXBvbmVudDogSG9tZVZpZXdcclxuICAgIH0sXHJcbiAgICB7XHJcbiAgICAgIHBhdGg6ICcvY3J1ZCcsXHJcbiAgICAgIG5hbWU6ICdjcnVkJyxcclxuICAgICAgY29tcG9uZW50OiBDcnVkVmlld1xyXG4gICAgfSxcclxuICAgIHtcclxuICAgICAgcGF0aDogJy9sb2dpbicsXHJcbiAgICAgIG5hbWU6ICdsb2dpbicsXHJcbiAgICAgIGNvbXBvbmVudDogTG9naW5WaWV3XHJcbiAgICB9LFxyXG4gICAge1xyXG4gICAgICBwYXRoOiAnL2RpYWxvZ3VlJyxcclxuICAgICAgbmFtZTogJ2RpYWxvZ3VlJyxcclxuICAgICAgY29tcG9uZW50OiBNYW5hZ2VEaWFsb2d1ZVZpZXdcclxuICAgIH0sXHJcbiAgICB7XHJcbiAgICAgIHBhdGg6ICcvcGFzc3dvcmRyZXNldHZpZXcnLFxyXG4gICAgICBuYW1lOiAncGFzc3dvcmRyZXNldCcsXHJcbiAgICAgIGNvbXBvbmVudDogUGFzc3dvcmRSZXNldFZpZXcsXHJcbiAgICB9LFxyXG4gICAge1xyXG4gICAgICBwYXRoOiAnL3RyYW5zY3JpcHRfc2VhcmNoJyxcclxuICAgICAgbmFtZTogJ3RyYW5zY3JpcHRfc2VhcmNoJyxcclxuICAgICAgY29tcG9uZW50OiBUcmFuc2NyaXB0U2VhcmNoVmlldyxcclxuICAgIH0sXHJcbiAgXVxyXG59KVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgcm91dGVyXHJcbiIsImltcG9ydCB7IGNyZWF0ZUFwcCB9IGZyb20gJ3Z1ZSdcclxuaW1wb3J0IEFwcCBmcm9tICcuL0FwcC52dWUnXHJcbmltcG9ydCByb3V0ZXIgZnJvbSAnLi9yb3V0ZXInXHJcbmltcG9ydCAnLi9hc3NldHMvc3R5bGVzL21haW4uY3NzJyAvLyBFbnN1cmUgdGhpcyBwYXRoIGlzIGNvcnJlY3RcclxuLy8gaW1wb3J0ICcuL2Fzc2V0cy9zdHlsZXMvY3VzdG9tX3N0eWxlLmNzcyc7IC8vIFlvdXIgY3VzdG9tIG92ZXJyaWRlc1xyXG5jb25zdCBhcHAgPSBjcmVhdGVBcHAoQXBwKVxyXG5cclxuYXBwLnVzZShyb3V0ZXIpXHJcbmFwcC5tb3VudCgnI2FwcCcpIl0sIm5hbWVzIjpbIm1ha2VNYXAiLCJzdHIiLCJleHBlY3RzTG93ZXJDYXNlIiwic2V0IiwidmFsIiwiRU1QVFlfT0JKIiwiRU1QVFlfQVJSIiwiTk9PUCIsIk5PIiwiaXNPbiIsImtleSIsImlzTW9kZWxMaXN0ZW5lciIsImV4dGVuZCIsInJlbW92ZSIsImFyciIsImVsIiwiaSIsImhhc093blByb3BlcnR5IiwiaGFzT3duIiwiaXNBcnJheSIsImlzTWFwIiwidG9UeXBlU3RyaW5nIiwiaXNTZXQiLCJpc0RhdGUiLCJpc0Z1bmN0aW9uIiwiaXNTdHJpbmciLCJpc1N5bWJvbCIsImlzT2JqZWN0IiwiaXNQcm9taXNlIiwib2JqZWN0VG9TdHJpbmciLCJ2YWx1ZSIsInRvUmF3VHlwZSIsImlzUGxhaW5PYmplY3QiLCJpc0ludGVnZXJLZXkiLCJpc1Jlc2VydmVkUHJvcCIsImNhY2hlU3RyaW5nRnVuY3Rpb24iLCJmbiIsImNhY2hlIiwiY2FtZWxpemVSRSIsImNhbWVsaXplIiwiXyIsImMiLCJoeXBoZW5hdGVSRSIsImh5cGhlbmF0ZSIsImNhcGl0YWxpemUiLCJ0b0hhbmRsZXJLZXkiLCJoYXNDaGFuZ2VkIiwib2xkVmFsdWUiLCJpbnZva2VBcnJheUZucyIsImZucyIsImFyZyIsImRlZiIsIm9iaiIsImxvb3NlVG9OdW1iZXIiLCJuIiwiX2dsb2JhbFRoaXMiLCJnZXRHbG9iYWxUaGlzIiwibm9ybWFsaXplU3R5bGUiLCJyZXMiLCJpdGVtIiwibm9ybWFsaXplZCIsInBhcnNlU3RyaW5nU3R5bGUiLCJsaXN0RGVsaW1pdGVyUkUiLCJwcm9wZXJ0eURlbGltaXRlclJFIiwic3R5bGVDb21tZW50UkUiLCJjc3NUZXh0IiwicmV0IiwidG1wIiwibm9ybWFsaXplQ2xhc3MiLCJuYW1lIiwic3BlY2lhbEJvb2xlYW5BdHRycyIsImlzU3BlY2lhbEJvb2xlYW5BdHRyIiwiaW5jbHVkZUJvb2xlYW5BdHRyIiwibG9vc2VDb21wYXJlQXJyYXlzIiwiYSIsImIiLCJlcXVhbCIsImxvb3NlRXF1YWwiLCJhVmFsaWRUeXBlIiwiYlZhbGlkVHlwZSIsImFLZXlzQ291bnQiLCJiS2V5c0NvdW50IiwiYUhhc0tleSIsImJIYXNLZXkiLCJsb29zZUluZGV4T2YiLCJ0b0Rpc3BsYXlTdHJpbmciLCJyZXBsYWNlciIsIl9rZXkiLCJlbnRyaWVzIiwidmFsMiIsInN0cmluZ2lmeVN5bWJvbCIsInYiLCJfYSIsImFjdGl2ZUVmZmVjdFNjb3BlIiwiRWZmZWN0U2NvcGUiLCJkZXRhY2hlZCIsImN1cnJlbnRFZmZlY3RTY29wZSIsImZyb21QYXJlbnQiLCJsIiwibGFzdCIsInJlY29yZEVmZmVjdFNjb3BlIiwiZWZmZWN0Iiwic2NvcGUiLCJnZXRDdXJyZW50U2NvcGUiLCJhY3RpdmVFZmZlY3QiLCJSZWFjdGl2ZUVmZmVjdCIsInRyaWdnZXIiLCJzY2hlZHVsZXIiLCJwYXVzZVRyYWNraW5nIiwiZGVwIiwidHJpZ2dlckNvbXB1dGVkIiwicmVzZXRUcmFja2luZyIsImxhc3RTaG91bGRUcmFjayIsInNob3VsZFRyYWNrIiwibGFzdEVmZmVjdCIsInByZUNsZWFudXBFZmZlY3QiLCJwb3N0Q2xlYW51cEVmZmVjdCIsImNvbXB1dGVkIiwiZWZmZWN0MiIsImNsZWFudXBEZXBFZmZlY3QiLCJ0cmFja0lkIiwicGF1c2VTY2hlZHVsZVN0YWNrIiwidHJhY2tTdGFjayIsInBhdXNlU2NoZWR1bGluZyIsInJlc2V0U2NoZWR1bGluZyIsInF1ZXVlRWZmZWN0U2NoZWR1bGVycyIsInRyYWNrRWZmZWN0IiwiZGVidWdnZXJFdmVudEV4dHJhSW5mbyIsIm9sZERlcCIsInRyaWdnZXJFZmZlY3RzIiwiZGlydHlMZXZlbCIsInRyYWNraW5nIiwiY3JlYXRlRGVwIiwiY2xlYW51cCIsInRhcmdldE1hcCIsIklURVJBVEVfS0VZIiwiTUFQX0tFWV9JVEVSQVRFX0tFWSIsInRyYWNrIiwidGFyZ2V0IiwidHlwZSIsImRlcHNNYXAiLCJuZXdWYWx1ZSIsIm9sZFRhcmdldCIsImRlcHMiLCJuZXdMZW5ndGgiLCJrZXkyIiwiaXNOb25UcmFja2FibGVLZXlzIiwiYnVpbHRJblN5bWJvbHMiLCJhcnJheUluc3RydW1lbnRhdGlvbnMiLCJjcmVhdGVBcnJheUluc3RydW1lbnRhdGlvbnMiLCJpbnN0cnVtZW50YXRpb25zIiwiYXJncyIsInRvUmF3IiwiQmFzZVJlYWN0aXZlSGFuZGxlciIsIl9pc1JlYWRvbmx5IiwiX2lzU2hhbGxvdyIsInJlY2VpdmVyIiwiaXNSZWFkb25seTIiLCJpc1NoYWxsb3cyIiwic2hhbGxvd1JlYWRvbmx5TWFwIiwicmVhZG9ubHlNYXAiLCJzaGFsbG93UmVhY3RpdmVNYXAiLCJyZWFjdGl2ZU1hcCIsInRhcmdldElzQXJyYXkiLCJpc1JlZiIsInJlYWRvbmx5IiwicmVhY3RpdmUiLCJNdXRhYmxlUmVhY3RpdmVIYW5kbGVyIiwiaXNPbGRWYWx1ZVJlYWRvbmx5IiwiaXNSZWFkb25seSIsImlzU2hhbGxvdyIsImhhZEtleSIsInJlc3VsdCIsIlJlYWRvbmx5UmVhY3RpdmVIYW5kbGVyIiwibXV0YWJsZUhhbmRsZXJzIiwicmVhZG9ubHlIYW5kbGVycyIsInNoYWxsb3dSZWFjdGl2ZUhhbmRsZXJzIiwidG9TaGFsbG93IiwiZ2V0UHJvdG8iLCJnZXQiLCJyYXdUYXJnZXQiLCJyYXdLZXkiLCJoYXMyIiwid3JhcCIsInRvUmVhZG9ubHkiLCJ0b1JlYWN0aXZlIiwiaGFzIiwic2l6ZSIsImFkZCIsImdldDIiLCJkZWxldGVFbnRyeSIsImNsZWFyIiwiaGFkSXRlbXMiLCJjcmVhdGVGb3JFYWNoIiwiY2FsbGJhY2siLCJ0aGlzQXJnIiwib2JzZXJ2ZWQiLCJjcmVhdGVJdGVyYWJsZU1ldGhvZCIsIm1ldGhvZCIsInRhcmdldElzTWFwIiwiaXNQYWlyIiwiaXNLZXlPbmx5IiwiaW5uZXJJdGVyYXRvciIsImRvbmUiLCJjcmVhdGVSZWFkb25seU1ldGhvZCIsImNyZWF0ZUluc3RydW1lbnRhdGlvbnMiLCJtdXRhYmxlSW5zdHJ1bWVudGF0aW9uczIiLCJzaGFsbG93SW5zdHJ1bWVudGF0aW9uczIiLCJyZWFkb25seUluc3RydW1lbnRhdGlvbnMyIiwic2hhbGxvd1JlYWRvbmx5SW5zdHJ1bWVudGF0aW9uczIiLCJtdXRhYmxlSW5zdHJ1bWVudGF0aW9ucyIsInJlYWRvbmx5SW5zdHJ1bWVudGF0aW9ucyIsInNoYWxsb3dJbnN0cnVtZW50YXRpb25zIiwic2hhbGxvd1JlYWRvbmx5SW5zdHJ1bWVudGF0aW9ucyIsImNyZWF0ZUluc3RydW1lbnRhdGlvbkdldHRlciIsInNoYWxsb3ciLCJtdXRhYmxlQ29sbGVjdGlvbkhhbmRsZXJzIiwic2hhbGxvd0NvbGxlY3Rpb25IYW5kbGVycyIsInJlYWRvbmx5Q29sbGVjdGlvbkhhbmRsZXJzIiwidGFyZ2V0VHlwZU1hcCIsInJhd1R5cGUiLCJnZXRUYXJnZXRUeXBlIiwiY3JlYXRlUmVhY3RpdmVPYmplY3QiLCJzaGFsbG93UmVhY3RpdmUiLCJiYXNlSGFuZGxlcnMiLCJjb2xsZWN0aW9uSGFuZGxlcnMiLCJwcm94eU1hcCIsImV4aXN0aW5nUHJveHkiLCJ0YXJnZXRUeXBlIiwicHJveHkiLCJpc1JlYWN0aXZlIiwiaXNQcm94eSIsInJhdyIsIm1hcmtSYXciLCJDb21wdXRlZFJlZkltcGwiLCJnZXR0ZXIiLCJfc2V0dGVyIiwiaXNTU1IiLCJ0cmlnZ2VyUmVmVmFsdWUiLCJzZWxmIiwidHJhY2tSZWZWYWx1ZSIsImdldHRlck9yT3B0aW9ucyIsImRlYnVnT3B0aW9ucyIsInNldHRlciIsIm9ubHlHZXR0ZXIiLCJyZWYyIiwibmV3VmFsIiwiciIsInJlZiIsImNyZWF0ZVJlZiIsInNoYWxsb3dSZWYiLCJyYXdWYWx1ZSIsIlJlZkltcGwiLCJfX3ZfaXNTaGFsbG93IiwidXNlRGlyZWN0VmFsdWUiLCJ1bnJlZiIsInNoYWxsb3dVbndyYXBIYW5kbGVycyIsInByb3h5UmVmcyIsIm9iamVjdFdpdGhSZWZzIiwiY2FsbFdpdGhFcnJvckhhbmRsaW5nIiwiaW5zdGFuY2UiLCJlcnIiLCJoYW5kbGVFcnJvciIsImNhbGxXaXRoQXN5bmNFcnJvckhhbmRsaW5nIiwidmFsdWVzIiwidGhyb3dJbkRldiIsImNvbnRleHRWTm9kZSIsImN1ciIsImV4cG9zZWRJbnN0YW5jZSIsImVycm9ySW5mbyIsImVycm9yQ2FwdHVyZWRIb29rcyIsImFwcEVycm9ySGFuZGxlciIsImxvZ0Vycm9yIiwiaXNGbHVzaGluZyIsImlzRmx1c2hQZW5kaW5nIiwicXVldWUiLCJmbHVzaEluZGV4IiwicGVuZGluZ1Bvc3RGbHVzaENicyIsImFjdGl2ZVBvc3RGbHVzaENicyIsInBvc3RGbHVzaEluZGV4IiwicmVzb2x2ZWRQcm9taXNlIiwiY3VycmVudEZsdXNoUHJvbWlzZSIsIm5leHRUaWNrIiwicCIsImZpbmRJbnNlcnRpb25JbmRleCIsImlkIiwic3RhcnQiLCJlbmQiLCJtaWRkbGUiLCJtaWRkbGVKb2IiLCJtaWRkbGVKb2JJZCIsImdldElkIiwicXVldWVKb2IiLCJqb2IiLCJxdWV1ZUZsdXNoIiwiZmx1c2hKb2JzIiwiaW52YWxpZGF0ZUpvYiIsInF1ZXVlUG9zdEZsdXNoQ2IiLCJjYiIsImZsdXNoUHJlRmx1c2hDYnMiLCJzZWVuIiwiZmx1c2hQb3N0Rmx1c2hDYnMiLCJkZWR1cGVkIiwiY29tcGFyYXRvciIsImRpZmYiLCJjaGVjayIsImVtaXQiLCJldmVudCIsInJhd0FyZ3MiLCJwcm9wcyIsIm1vZGVsQXJnIiwibW9kaWZpZXJzS2V5IiwibnVtYmVyIiwidHJpbSIsImhhbmRsZXJOYW1lIiwiaGFuZGxlciIsIm9uY2VIYW5kbGVyIiwibm9ybWFsaXplRW1pdHNPcHRpb25zIiwiY29tcCIsImFwcENvbnRleHQiLCJhc01peGluIiwiY2FjaGVkIiwiaGFzRXh0ZW5kcyIsImV4dGVuZEVtaXRzIiwicmF3MiIsIm5vcm1hbGl6ZWRGcm9tRXh0ZW5kIiwiaXNFbWl0TGlzdGVuZXIiLCJvcHRpb25zIiwiY3VycmVudFJlbmRlcmluZ0luc3RhbmNlIiwiY3VycmVudFNjb3BlSWQiLCJzZXRDdXJyZW50UmVuZGVyaW5nSW5zdGFuY2UiLCJwcmV2IiwicHVzaFNjb3BlSWQiLCJwb3BTY29wZUlkIiwid2l0aEN0eCIsImN0eCIsImlzTm9uU2NvcGVkU2xvdCIsInJlbmRlckZuV2l0aENvbnRleHQiLCJzZXRCbG9ja1RyYWNraW5nIiwicHJldkluc3RhbmNlIiwicmVuZGVyQ29tcG9uZW50Um9vdCIsIkNvbXBvbmVudCIsInZub2RlIiwid2l0aFByb3h5IiwicHJvcHNPcHRpb25zIiwic2xvdHMiLCJhdHRycyIsInJlbmRlciIsInJlbmRlckNhY2hlIiwiZGF0YSIsInNldHVwU3RhdGUiLCJpbmhlcml0QXR0cnMiLCJmYWxsdGhyb3VnaEF0dHJzIiwicHJveHlUb1VzZSIsInRoaXNQcm94eSIsIm5vcm1hbGl6ZVZOb2RlIiwicmVuZGVyMiIsImdldEZ1bmN0aW9uYWxGYWxsdGhyb3VnaCIsImJsb2NrU3RhY2siLCJjcmVhdGVWTm9kZSIsIkNvbW1lbnQiLCJyb290Iiwia2V5cyIsInNoYXBlRmxhZyIsImZpbHRlck1vZGVsTGlzdGVuZXJzIiwiY2xvbmVWTm9kZSIsInNob3VsZFVwZGF0ZUNvbXBvbmVudCIsInByZXZWTm9kZSIsIm5leHRWTm9kZSIsIm9wdGltaXplZCIsInByZXZQcm9wcyIsInByZXZDaGlsZHJlbiIsImNvbXBvbmVudCIsIm5leHRQcm9wcyIsIm5leHRDaGlsZHJlbiIsInBhdGNoRmxhZyIsImVtaXRzIiwiaGFzUHJvcHNDaGFuZ2VkIiwiZHluYW1pY1Byb3BzIiwiZW1pdHNPcHRpb25zIiwibmV4dEtleXMiLCJ1cGRhdGVIT0NIb3N0RWwiLCJwYXJlbnQiLCJDT01QT05FTlRTIiwicmVzb2x2ZUNvbXBvbmVudCIsIm1heWJlU2VsZlJlZmVyZW5jZSIsInJlc29sdmVBc3NldCIsIk5VTExfRFlOQU1JQ19DT01QT05FTlQiLCJ3YXJuTWlzc2luZyIsImN1cnJlbnRJbnN0YW5jZSIsInNlbGZOYW1lIiwiZ2V0Q29tcG9uZW50TmFtZSIsInJlc29sdmUiLCJyZWdpc3RyeSIsImlzU3VzcGVuc2UiLCJxdWV1ZUVmZmVjdFdpdGhTdXNwZW5zZSIsInN1c3BlbnNlIiwic3NyQ29udGV4dEtleSIsInVzZVNTUkNvbnRleHQiLCJpbmplY3QiLCJJTklUSUFMX1dBVENIRVJfVkFMVUUiLCJ3YXRjaCIsInNvdXJjZSIsImRvV2F0Y2giLCJpbW1lZGlhdGUiLCJkZWVwIiwiZmx1c2giLCJvbmNlIiwib25UcmFjayIsIm9uVHJpZ2dlciIsIl9jYiIsInVud2F0Y2giLCJyZWFjdGl2ZUdldHRlciIsInNvdXJjZTIiLCJ0cmF2ZXJzZSIsImZvcmNlVHJpZ2dlciIsImlzTXVsdGlTb3VyY2UiLCJzIiwib25DbGVhbnVwIiwiYmFzZUdldHRlciIsInNzckNsZWFudXAiLCJpc0luU1NSQ29tcG9uZW50U2V0dXAiLCJxdWV1ZVBvc3RSZW5kZXJFZmZlY3QiLCJpbnN0YW5jZVdhdGNoIiwicHVibGljVGhpcyIsImNyZWF0ZVBhdGhHZXR0ZXIiLCJyZXNldCIsInNldEN1cnJlbnRJbnN0YW5jZSIsInBhdGgiLCJzZWdtZW50cyIsImRlcHRoIiwiY3VycmVudERlcHRoIiwid2l0aERpcmVjdGl2ZXMiLCJkaXJlY3RpdmVzIiwiZ2V0RXhwb3NlUHJveHkiLCJiaW5kaW5ncyIsImRpciIsIm1vZGlmaWVycyIsImludm9rZURpcmVjdGl2ZUhvb2siLCJvbGRCaW5kaW5ncyIsImJpbmRpbmciLCJob29rIiwiZGVmaW5lQ29tcG9uZW50IiwiZXh0cmFPcHRpb25zIiwiaXNBc3luY1dyYXBwZXIiLCJpc0tlZXBBbGl2ZSIsIm9uQWN0aXZhdGVkIiwicmVnaXN0ZXJLZWVwQWxpdmVIb29rIiwib25EZWFjdGl2YXRlZCIsIndyYXBwZWRIb29rIiwiY3VycmVudCIsImluamVjdEhvb2siLCJpbmplY3RUb0tlZXBBbGl2ZVJvb3QiLCJrZWVwQWxpdmVSb290IiwiaW5qZWN0ZWQiLCJvblVubW91bnRlZCIsInByZXBlbmQiLCJob29rcyIsImNyZWF0ZUhvb2siLCJsaWZlY3ljbGUiLCJvbkJlZm9yZU1vdW50Iiwib25Nb3VudGVkIiwib25CZWZvcmVVcGRhdGUiLCJvblVwZGF0ZWQiLCJvbkJlZm9yZVVubW91bnQiLCJvblNlcnZlclByZWZldGNoIiwib25SZW5kZXJUcmlnZ2VyZWQiLCJvblJlbmRlclRyYWNrZWQiLCJvbkVycm9yQ2FwdHVyZWQiLCJyZW5kZXJMaXN0IiwicmVuZGVySXRlbSIsImluZGV4IiwiZ2V0UHVibGljSW5zdGFuY2UiLCJpc1N0YXRlZnVsQ29tcG9uZW50IiwicHVibGljUHJvcGVydGllc01hcCIsInJlc29sdmVNZXJnZWRPcHRpb25zIiwiaGFzU2V0dXBCaW5kaW5nIiwic3RhdGUiLCJQdWJsaWNJbnN0YW5jZVByb3h5SGFuZGxlcnMiLCJhY2Nlc3NDYWNoZSIsIm5vcm1hbGl6ZWRQcm9wcyIsInNob3VsZENhY2hlQWNjZXNzIiwicHVibGljR2V0dGVyIiwiY3NzTW9kdWxlIiwiZ2xvYmFsUHJvcGVydGllcyIsImRlc2NyaXB0b3IiLCJub3JtYWxpemVQcm9wc09yRW1pdHMiLCJhcHBseU9wdGlvbnMiLCJjYWxsSG9vayIsImRhdGFPcHRpb25zIiwiY29tcHV0ZWRPcHRpb25zIiwibWV0aG9kcyIsIndhdGNoT3B0aW9ucyIsInByb3ZpZGVPcHRpb25zIiwiaW5qZWN0T3B0aW9ucyIsImNyZWF0ZWQiLCJiZWZvcmVNb3VudCIsIm1vdW50ZWQiLCJiZWZvcmVVcGRhdGUiLCJ1cGRhdGVkIiwiYWN0aXZhdGVkIiwiZGVhY3RpdmF0ZWQiLCJiZWZvcmVEZXN0cm95IiwiYmVmb3JlVW5tb3VudCIsImRlc3Ryb3llZCIsInVubW91bnRlZCIsInJlbmRlclRyYWNrZWQiLCJyZW5kZXJUcmlnZ2VyZWQiLCJlcnJvckNhcHR1cmVkIiwic2VydmVyUHJlZmV0Y2giLCJleHBvc2UiLCJjb21wb25lbnRzIiwiZmlsdGVycyIsInJlc29sdmVJbmplY3Rpb25zIiwibWV0aG9kSGFuZGxlciIsIm9wdCIsImNyZWF0ZVdhdGNoZXIiLCJwcm92aWRlcyIsInByb3ZpZGUiLCJyZWdpc3RlckxpZmVjeWNsZUhvb2siLCJyZWdpc3RlciIsIl9ob29rIiwiZXhwb3NlZCIsImNoZWNrRHVwbGljYXRlUHJvcGVydGllcyIsIm5vcm1hbGl6ZUluamVjdCIsImgiLCJiYXNlIiwibWl4aW5zIiwiZXh0ZW5kc09wdGlvbnMiLCJnbG9iYWxNaXhpbnMiLCJvcHRpb25NZXJnZVN0cmF0ZWdpZXMiLCJyZXNvbHZlZCIsIm0iLCJtZXJnZU9wdGlvbnMiLCJ0byIsImZyb20iLCJzdHJhdHMiLCJzdHJhdCIsImludGVybmFsT3B0aW9uTWVyZ2VTdHJhdHMiLCJtZXJnZURhdGFGbiIsIm1lcmdlRW1pdHNPclByb3BzT3B0aW9ucyIsIm1lcmdlT2JqZWN0T3B0aW9ucyIsIm1lcmdlQXNBcnJheSIsIm1lcmdlV2F0Y2hPcHRpb25zIiwibWVyZ2VJbmplY3QiLCJtZXJnZWQiLCJjcmVhdGVBcHBDb250ZXh0IiwidWlkJDEiLCJjcmVhdGVBcHBBUEkiLCJoeWRyYXRlIiwicm9vdENvbXBvbmVudCIsInJvb3RQcm9wcyIsImNvbnRleHQiLCJpbnN0YWxsZWRQbHVnaW5zIiwiaXNNb3VudGVkIiwiYXBwIiwidmVyc2lvbiIsInBsdWdpbiIsIm1peGluIiwiZGlyZWN0aXZlIiwicm9vdENvbnRhaW5lciIsImlzSHlkcmF0ZSIsIm5hbWVzcGFjZSIsImxhc3RBcHAiLCJjdXJyZW50QXBwIiwicGFyZW50UHJvdmlkZXMiLCJkZWZhdWx0VmFsdWUiLCJ0cmVhdERlZmF1bHRBc0ZhY3RvcnkiLCJpbml0UHJvcHMiLCJyYXdQcm9wcyIsImlzU3RhdGVmdWwiLCJJbnRlcm5hbE9iamVjdEtleSIsInNldEZ1bGxQcm9wcyIsInVwZGF0ZVByb3BzIiwicmF3UHJldlByb3BzIiwicmF3Q3VycmVudFByb3BzIiwiaGFzQXR0cnNDaGFuZ2VkIiwicHJvcHNUb1VwZGF0ZSIsImNhbWVsaXplZEtleSIsInJlc29sdmVQcm9wVmFsdWUiLCJrZWJhYktleSIsIm5lZWRDYXN0S2V5cyIsInJhd0Nhc3RWYWx1ZXMiLCJjYW1lbEtleSIsImNhc3RWYWx1ZXMiLCJpc0Fic2VudCIsImhhc0RlZmF1bHQiLCJwcm9wc0RlZmF1bHRzIiwibm9ybWFsaXplUHJvcHNPcHRpb25zIiwiZXh0ZW5kUHJvcHMiLCJub3JtYWxpemVkS2V5IiwidmFsaWRhdGVQcm9wTmFtZSIsInByb3AiLCJib29sZWFuSW5kZXgiLCJnZXRUeXBlSW5kZXgiLCJzdHJpbmdJbmRleCIsImdldFR5cGUiLCJjdG9yIiwiaXNTYW1lVHlwZSIsImV4cGVjdGVkVHlwZXMiLCJ0IiwiaXNJbnRlcm5hbEtleSIsIm5vcm1hbGl6ZVNsb3RWYWx1ZSIsIm5vcm1hbGl6ZVNsb3QiLCJyYXdTbG90Iiwibm9ybWFsaXplT2JqZWN0U2xvdHMiLCJyYXdTbG90cyIsIm5vcm1hbGl6ZVZOb2RlU2xvdHMiLCJjaGlsZHJlbiIsImluaXRTbG90cyIsInVwZGF0ZVNsb3RzIiwibmVlZERlbGV0aW9uQ2hlY2siLCJkZWxldGlvbkNvbXBhcmlzb25UYXJnZXQiLCJzZXRSZWYiLCJyYXdSZWYiLCJvbGRSYXdSZWYiLCJwYXJlbnRTdXNwZW5zZSIsImlzVW5tb3VudCIsInJlZlZhbHVlIiwib3duZXIiLCJvbGRSZWYiLCJyZWZzIiwiX2lzU3RyaW5nIiwiX2lzUmVmIiwiZG9TZXQiLCJleGlzdGluZyIsImNyZWF0ZVJlbmRlcmVyIiwiYmFzZUNyZWF0ZVJlbmRlcmVyIiwiY3JlYXRlSHlkcmF0aW9uRm5zIiwiaG9zdEluc2VydCIsImhvc3RSZW1vdmUiLCJob3N0UGF0Y2hQcm9wIiwiaG9zdENyZWF0ZUVsZW1lbnQiLCJob3N0Q3JlYXRlVGV4dCIsImhvc3RDcmVhdGVDb21tZW50IiwiaG9zdFNldFRleHQiLCJob3N0U2V0RWxlbWVudFRleHQiLCJob3N0UGFyZW50Tm9kZSIsImhvc3ROZXh0U2libGluZyIsImhvc3RTZXRTY29wZUlkIiwiaG9zdEluc2VydFN0YXRpY0NvbnRlbnQiLCJwYXRjaCIsIm4xIiwibjIiLCJjb250YWluZXIiLCJhbmNob3IiLCJwYXJlbnRDb21wb25lbnQiLCJzbG90U2NvcGVJZHMiLCJpc1NhbWVWTm9kZVR5cGUiLCJnZXROZXh0SG9zdE5vZGUiLCJ1bm1vdW50IiwiVGV4dCIsInByb2Nlc3NUZXh0IiwicHJvY2Vzc0NvbW1lbnROb2RlIiwiU3RhdGljIiwibW91bnRTdGF0aWNOb2RlIiwiRnJhZ21lbnQiLCJwcm9jZXNzRnJhZ21lbnQiLCJwcm9jZXNzRWxlbWVudCIsInByb2Nlc3NDb21wb25lbnQiLCJpbnRlcm5hbHMiLCJtb3ZlU3RhdGljTm9kZSIsIm5leHRTaWJsaW5nIiwibmV4dCIsInJlbW92ZVN0YXRpY05vZGUiLCJtb3VudEVsZW1lbnQiLCJwYXRjaEVsZW1lbnQiLCJ2bm9kZUhvb2siLCJ0cmFuc2l0aW9uIiwiZGlycyIsIm1vdW50Q2hpbGRyZW4iLCJyZXNvbHZlQ2hpbGRyZW5OYW1lc3BhY2UiLCJzZXRTY29wZUlkIiwidW5tb3VudENoaWxkcmVuIiwiaW52b2tlVk5vZGVIb29rIiwibmVlZENhbGxUcmFuc2l0aW9uSG9va3MiLCJuZWVkVHJhbnNpdGlvbiIsInNjb3BlSWQiLCJzdWJUcmVlIiwicGFyZW50Vk5vZGUiLCJjaGlsZCIsImNsb25lSWZNb3VudGVkIiwiZHluYW1pY0NoaWxkcmVuIiwib2xkUHJvcHMiLCJuZXdQcm9wcyIsInRvZ2dsZVJlY3Vyc2UiLCJwYXRjaEJsb2NrQ2hpbGRyZW4iLCJwYXRjaENoaWxkcmVuIiwicGF0Y2hQcm9wcyIsIm9sZENoaWxkcmVuIiwibmV3Q2hpbGRyZW4iLCJmYWxsYmFja0NvbnRhaW5lciIsIm9sZFZOb2RlIiwibmV3Vk5vZGUiLCJmcmFnbWVudFN0YXJ0QW5jaG9yIiwiZnJhZ21lbnRFbmRBbmNob3IiLCJmcmFnbWVudFNsb3RTY29wZUlkcyIsInRyYXZlcnNlU3RhdGljQ2hpbGRyZW4iLCJtb3VudENvbXBvbmVudCIsInVwZGF0ZUNvbXBvbmVudCIsImluaXRpYWxWTm9kZSIsImNyZWF0ZUNvbXBvbmVudEluc3RhbmNlIiwic2V0dXBDb21wb25lbnQiLCJzZXR1cFJlbmRlckVmZmVjdCIsInBsYWNlaG9sZGVyIiwidXBkYXRlQ29tcG9uZW50UHJlUmVuZGVyIiwiY29tcG9uZW50VXBkYXRlRm4iLCJidSIsInUiLCJub25IeWRyYXRlZEFzeW5jUm9vdCIsImxvY2F0ZU5vbkh5ZHJhdGVkQXN5bmNSb290Iiwib3JpZ2luTmV4dCIsIm5leHRUcmVlIiwicHJldlRyZWUiLCJibSIsImlzQXN5bmNXcmFwcGVyVk5vZGUiLCJoeWRyYXRlTm9kZSIsImh5ZHJhdGVTdWJUcmVlIiwic2NvcGVkSW5pdGlhbFZOb2RlIiwidXBkYXRlIiwiYzEiLCJwcmV2U2hhcGVGbGFnIiwiYzIiLCJwYXRjaEtleWVkQ2hpbGRyZW4iLCJwYXRjaFVua2V5ZWRDaGlsZHJlbiIsIm9sZExlbmd0aCIsImNvbW1vbkxlbmd0aCIsIm5leHRDaGlsZCIsInBhcmVudEFuY2hvciIsImwyIiwiZTEiLCJlMiIsIm5leHRQb3MiLCJzMSIsInMyIiwia2V5VG9OZXdJbmRleE1hcCIsImoiLCJwYXRjaGVkIiwidG9CZVBhdGNoZWQiLCJtb3ZlZCIsIm1heE5ld0luZGV4U29GYXIiLCJuZXdJbmRleFRvT2xkSW5kZXhNYXAiLCJwcmV2Q2hpbGQiLCJuZXdJbmRleCIsImluY3JlYXNpbmdOZXdJbmRleFNlcXVlbmNlIiwiZ2V0U2VxdWVuY2UiLCJuZXh0SW5kZXgiLCJtb3ZlIiwibW92ZVR5cGUiLCJsZWF2ZSIsImRlbGF5TGVhdmUiLCJhZnRlckxlYXZlIiwicmVtb3ZlMiIsInBlcmZvcm1MZWF2ZSIsImRvUmVtb3ZlIiwic2hvdWxkSW52b2tlRGlycyIsInNob3VsZEludm9rZVZub2RlSG9vayIsInVubW91bnRDb21wb25lbnQiLCJyZW1vdmVGcmFnbWVudCIsInBlcmZvcm1SZW1vdmUiLCJidW0iLCJ1bSIsImN1cnJlbnROYW1lc3BhY2UiLCJhbGxvd2VkIiwiY2gxIiwiY2gyIiwibGVuIiwiYXJySSIsInN1YkNvbXBvbmVudCIsImlzVGVsZXBvcnQiLCJjdXJyZW50QmxvY2siLCJvcGVuQmxvY2siLCJkaXNhYmxlVHJhY2tpbmciLCJjbG9zZUJsb2NrIiwiaXNCbG9ja1RyZWVFbmFibGVkIiwic2V0dXBCbG9jayIsImNyZWF0ZUVsZW1lbnRCbG9jayIsImNyZWF0ZUJhc2VWTm9kZSIsImNyZWF0ZUJsb2NrIiwiaXNWTm9kZSIsIm5vcm1hbGl6ZUtleSIsIm5vcm1hbGl6ZVJlZiIsInJlZl9rZXkiLCJyZWZfZm9yIiwiaXNCbG9ja05vZGUiLCJuZWVkRnVsbENoaWxkcmVuTm9ybWFsaXphdGlvbiIsIm5vcm1hbGl6ZUNoaWxkcmVuIiwiX2NyZWF0ZVZOb2RlIiwiY2xvbmVkIiwiaXNDbGFzc0NvbXBvbmVudCIsImd1YXJkUmVhY3RpdmVQcm9wcyIsImtsYXNzIiwic3R5bGUiLCJleHRyYVByb3BzIiwibWVyZ2VSZWYiLCJtZXJnZWRQcm9wcyIsIm1lcmdlUHJvcHMiLCJjcmVhdGVUZXh0Vk5vZGUiLCJ0ZXh0IiwiZmxhZyIsImNyZWF0ZVN0YXRpY1ZOb2RlIiwiY29udGVudCIsIm51bWJlck9mTm9kZXMiLCJjcmVhdGVDb21tZW50Vk5vZGUiLCJhc0Jsb2NrIiwic2xvdCIsInNsb3RGbGFnIiwidG9NZXJnZSIsImluY29taW5nIiwiZW1wdHlBcHBDb250ZXh0IiwidWlkIiwiaW50ZXJuYWxTZXRDdXJyZW50SW5zdGFuY2UiLCJzZXRJblNTUlNldHVwU3RhdGUiLCJnIiwicmVnaXN0ZXJHbG9iYWxTZXR0ZXIiLCJzZXR0ZXJzIiwidW5zZXRDdXJyZW50SW5zdGFuY2UiLCJzZXR1cFJlc3VsdCIsInNldHVwU3RhdGVmdWxDb21wb25lbnQiLCJzZXR1cCIsInNldHVwQ29udGV4dCIsImNyZWF0ZVNldHVwQ29udGV4dCIsInJlc29sdmVkUmVzdWx0IiwiaGFuZGxlU2V0dXBSZXN1bHQiLCJlIiwiZmluaXNoQ29tcG9uZW50U2V0dXAiLCJjb21waWxlIiwic2tpcE9wdGlvbnMiLCJ0ZW1wbGF0ZSIsImlzQ3VzdG9tRWxlbWVudCIsImNvbXBpbGVyT3B0aW9ucyIsImRlbGltaXRlcnMiLCJjb21wb25lbnRDb21waWxlck9wdGlvbnMiLCJmaW5hbENvbXBpbGVyT3B0aW9ucyIsImdldEF0dHJzUHJveHkiLCJpbmNsdWRlSW5mZXJyZWQiLCJjb21wdXRlZCQxIiwicHJvcHNPckNoaWxkcmVuIiwic3ZnTlMiLCJtYXRobWxOUyIsImRvYyIsInRlbXBsYXRlQ29udGFpbmVyIiwibm9kZU9wcyIsInRhZyIsImlzIiwibm9kZSIsInNlbGVjdG9yIiwiYmVmb3JlIiwid3JhcHBlciIsInZ0Y0tleSIsInBhdGNoQ2xhc3MiLCJpc1NWRyIsInRyYW5zaXRpb25DbGFzc2VzIiwidlNob3dPcmlnaW5hbERpc3BsYXkiLCJ2U2hvd0hpZGRlbiIsIkNTU19WQVJfVEVYVCIsImRpc3BsYXlSRSIsInBhdGNoU3R5bGUiLCJpc0Nzc1N0cmluZyIsImhhc0NvbnRyb2xsZWREaXNwbGF5IiwicHJldlN0eWxlIiwic2V0U3R5bGUiLCJjc3NWYXJUZXh0IiwiaW1wb3J0YW50UkUiLCJwcmVmaXhlZCIsImF1dG9QcmVmaXgiLCJwcmVmaXhlcyIsInByZWZpeENhY2hlIiwicmF3TmFtZSIsInhsaW5rTlMiLCJwYXRjaEF0dHIiLCJpc0Jvb2xlYW4iLCJwYXRjaERPTVByb3AiLCJuZWVkUmVtb3ZlIiwiYWRkRXZlbnRMaXN0ZW5lciIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJ2ZWlLZXkiLCJwYXRjaEV2ZW50IiwicHJldlZhbHVlIiwibmV4dFZhbHVlIiwiaW52b2tlcnMiLCJleGlzdGluZ0ludm9rZXIiLCJwYXJzZU5hbWUiLCJpbnZva2VyIiwiY3JlYXRlSW52b2tlciIsIm9wdGlvbnNNb2RpZmllclJFIiwiY2FjaGVkTm93IiwiZ2V0Tm93IiwiaW5pdGlhbFZhbHVlIiwicGF0Y2hTdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24iLCJvcmlnaW5hbFN0b3AiLCJpc05hdGl2ZU9uIiwicGF0Y2hQcm9wIiwic2hvdWxkU2V0QXNQcm9wIiwiZ2V0TW9kZWxBc3NpZ25lciIsIm9uQ29tcG9zaXRpb25TdGFydCIsIm9uQ29tcG9zaXRpb25FbmQiLCJhc3NpZ25LZXkiLCJ2TW9kZWxUZXh0IiwibGF6eSIsImNhc3RUb051bWJlciIsImRvbVZhbHVlIiwiZWxWYWx1ZSIsInZNb2RlbENoZWNrYm94IiwibW9kZWxWYWx1ZSIsImVsZW1lbnRWYWx1ZSIsImdldFZhbHVlIiwiY2hlY2tlZCIsImFzc2lnbiIsImZvdW5kIiwiZmlsdGVyZWQiLCJnZXRDaGVja2JveFZhbHVlIiwic2V0Q2hlY2tlZCIsInZNb2RlbFJhZGlvIiwidk1vZGVsU2VsZWN0IiwiaXNTZXRNb2RlbCIsInNlbGVjdGVkVmFsIiwibyIsInNldFNlbGVjdGVkIiwiX2JpbmRpbmciLCJpc011bHRpcGxlIiwiaXNBcnJheVZhbHVlIiwib3B0aW9uIiwib3B0aW9uVmFsdWUiLCJvcHRpb25UeXBlIiwidk1vZGVsRHluYW1pYyIsImNhbGxNb2RlbEhvb2siLCJyZXNvbHZlRHluYW1pY01vZGVsIiwidGFnTmFtZSIsInN5c3RlbU1vZGlmaWVycyIsIm1vZGlmaWVyR3VhcmRzIiwid2l0aE1vZGlmaWVycyIsImNhY2hlS2V5IiwiZ3VhcmQiLCJrZXlOYW1lcyIsIndpdGhLZXlzIiwiZXZlbnRLZXkiLCJrIiwicmVuZGVyZXJPcHRpb25zIiwicmVuZGVyZXIiLCJlbnN1cmVSZW5kZXJlciIsImNyZWF0ZUFwcCIsIm1vdW50IiwiY29udGFpbmVyT3JTZWxlY3RvciIsIm5vcm1hbGl6ZUNvbnRhaW5lciIsInJlc29sdmVSb290TmFtZXNwYWNlIiwiVXNlciIsIm1lc3NhZ2VzIiwiZG9tYWluX29yaWdpbiIsImVtYWlsIiwicmVzcG9uc2UiLCJhcGlfcmVzdWx0IiwiZXJyb3IiLCJwYXlsb2FkIiwicmVxdWVzdE9wdGlvbnMiLCJ1cmwiLCJhcGlfb2JqZWN0IiwiaW5wdXQiLCJtZmFfYXV0aGVudGljYXRvcl9jb2RlIiwicmVqZWN0IiwicmVxdWVzdF9vcHRpb25zIiwibWZhX2p3dCIsInVzZXIiLCJzZWNyZXRfYW5kX2ltYWdlIiwic2VjcmV0IiwiaW1hZ2UiLCJ0b2tlbiIsImFwaU9iamVjdCIsImFwaV9wYWNrYWdlIiwicG9zdCIsIlVzZXJzIiwicm9sZXMiLCJuZXdfdXNlcl9jcmVkZW50aWFscyIsInJvbGUiLCJjcmVhdGVkX3JlY29yZCIsInVzZXJfaWQiLCJmb3JtX2VtYWlsIiwiY2NfZW1haWxzIiwib3JnX29iamVjdHMiLCJpc19kZWxldGVkIiwib3JnX2lkcyIsIm9yZ19rZXkiLCJvcmciLCJkZWxldGVfcGFja2FnZSIsInVzZXJfaW5kZXgiLCJ0b2tlbl9sZW5ndGgiLCJ0b2tlbl9jaGFycyIsInRva2VuX2luZGV4IiwiY2hhcmFjdGVyX2luZGV4Iiwic2VsZWN0ZWRfdXNlciIsInZhbGlkIiwicmVnZXgiLCJmdWxsbmFtZV92YWxpZCIsImZpcnN0bmFtZV92YWxpZCIsInBhc3N3b3JkIiwic3Ryb25nX2Vub3VnaCIsImNoYXJhY3Rlcl9kaWN0aW9uYXJ5IiwiY2hhcmFjdGVyIiwibGV0dGVycyIsImhhc191cHBlcl9jYXNlIiwiaGFzX2xvd2VyX2Nhc2UiLCJoYXNfaW50ZWdlciIsIk1lc3NhZ2VzIiwibWVzc2FnZSIsIm1lc3NhZ2VfZGljdCIsIkRpYWxvZ3VlX0d1aWRlIiwiZGlhbG9ndWVfaWQiLCJndWlkZSIsInJlc3BvbnNlX3BhY2thZ2UiLCJkaWFsb2d1ZV9pbmRleCIsInNlbGVjdGVkX2RpYWxvZ3VlIiwiX3NmY19tYWluIiwiX2hvaXN0ZWRfMSIsIl9ob2lzdGVkXzciLCJfY3JlYXRlRWxlbWVudFZOb2RlIiwiX2hvaXN0ZWRfOCIsIl9ob2lzdGVkXzkiLCJfaG9pc3RlZF8xMCIsIl9ob2lzdGVkXzExIiwiX29wZW5CbG9jayIsIl9jcmVhdGVFbGVtZW50QmxvY2siLCJfRnJhZ21lbnQiLCJfcmVuZGVyTGlzdCIsIl9ub3JtYWxpemVDbGFzcyIsIl9ob2lzdGVkXzIiLCJfaG9pc3RlZF8zIiwiX2NyZWF0ZUNvbW1lbnRWTm9kZSIsIl9ob2lzdGVkXzQiLCJfaG9pc3RlZF81IiwiX2hvaXN0ZWRfNiIsIl90b0Rpc3BsYXlTdHJpbmciLCIkZXZlbnQiLCJfaG9pc3RlZF8xMiIsIl9pbXBvcnRzXzAiLCJfY29tcG9uZW50X3JvdXRlcl9saW5rIiwiX3dpdGhDdHgiLCJfY29tcG9uZW50X1JvdXRlckxpbmsiLCJfY3JlYXRlVGV4dFZOb2RlIiwiUm9sZXMiLCJyb2xlX2luZGV4IiwidXNlcnMiLCJkaWFsb2d1ZV9ndWlkZSIsIk1lc3NhZ2VEaXNwbGF5IiwiTmF2YmFyIiwiX2NyZWF0ZUJsb2NrIiwiX2NvbXBvbmVudF9OYXZiYXIiLCIkZGF0YSIsIl9jb21wb25lbnRfUm91dGVyVmlldyIsIl9jb21wb25lbnRfTWVzc2FnZURpc3BsYXkiLCJpc0Jyb3dzZXIiLCJpc0VTTW9kdWxlIiwiYXBwbHlUb1BhcmFtcyIsInBhcmFtcyIsIm5ld1BhcmFtcyIsIm5vb3AiLCJIQVNIX1JFIiwiQU1QRVJTQU5EX1JFIiwiU0xBU0hfUkUiLCJFUVVBTF9SRSIsIklNX1JFIiwiUExVU19SRSIsIkVOQ19CUkFDS0VUX09QRU5fUkUiLCJFTkNfQlJBQ0tFVF9DTE9TRV9SRSIsIkVOQ19DQVJFVF9SRSIsIkVOQ19CQUNLVElDS19SRSIsIkVOQ19DVVJMWV9PUEVOX1JFIiwiRU5DX1BJUEVfUkUiLCJFTkNfQ1VSTFlfQ0xPU0VfUkUiLCJFTkNfU1BBQ0VfUkUiLCJjb21tb25FbmNvZGUiLCJlbmNvZGVIYXNoIiwiZW5jb2RlUXVlcnlWYWx1ZSIsImVuY29kZVF1ZXJ5S2V5IiwiZW5jb2RlUGF0aCIsImVuY29kZVBhcmFtIiwiZGVjb2RlIiwiVFJBSUxJTkdfU0xBU0hfUkUiLCJyZW1vdmVUcmFpbGluZ1NsYXNoIiwicGFyc2VVUkwiLCJwYXJzZVF1ZXJ5IiwibG9jYXRpb24iLCJjdXJyZW50TG9jYXRpb24iLCJxdWVyeSIsInNlYXJjaFN0cmluZyIsImhhc2giLCJoYXNoUG9zIiwic2VhcmNoUG9zIiwicmVzb2x2ZVJlbGF0aXZlUGF0aCIsInN0cmluZ2lmeVVSTCIsInN0cmluZ2lmeVF1ZXJ5Iiwic3RyaXBCYXNlIiwicGF0aG5hbWUiLCJpc1NhbWVSb3V0ZUxvY2F0aW9uIiwiYUxhc3RJbmRleCIsImJMYXN0SW5kZXgiLCJpc1NhbWVSb3V0ZVJlY29yZCIsImlzU2FtZVJvdXRlTG9jYXRpb25QYXJhbXMiLCJpc1NhbWVSb3V0ZUxvY2F0aW9uUGFyYW1zVmFsdWUiLCJpc0VxdWl2YWxlbnRBcnJheSIsImZyb21TZWdtZW50cyIsInRvU2VnbWVudHMiLCJsYXN0VG9TZWdtZW50IiwicG9zaXRpb24iLCJ0b1Bvc2l0aW9uIiwic2VnbWVudCIsIk5hdmlnYXRpb25UeXBlIiwiTmF2aWdhdGlvbkRpcmVjdGlvbiIsIm5vcm1hbGl6ZUJhc2UiLCJiYXNlRWwiLCJCRUZPUkVfSEFTSF9SRSIsImNyZWF0ZUhyZWYiLCJnZXRFbGVtZW50UG9zaXRpb24iLCJvZmZzZXQiLCJkb2NSZWN0IiwiZWxSZWN0IiwiY29tcHV0ZVNjcm9sbFBvc2l0aW9uIiwic2Nyb2xsVG9Qb3NpdGlvbiIsInNjcm9sbFRvT3B0aW9ucyIsInBvc2l0aW9uRWwiLCJpc0lkU2VsZWN0b3IiLCJnZXRTY3JvbGxLZXkiLCJkZWx0YSIsInNjcm9sbFBvc2l0aW9ucyIsInNhdmVTY3JvbGxQb3NpdGlvbiIsInNjcm9sbFBvc2l0aW9uIiwiZ2V0U2F2ZWRTY3JvbGxQb3NpdGlvbiIsInNjcm9sbCIsImNyZWF0ZUJhc2VMb2NhdGlvbiIsImNyZWF0ZUN1cnJlbnRMb2NhdGlvbiIsInNlYXJjaCIsInNsaWNlUG9zIiwicGF0aEZyb21IYXNoIiwidXNlSGlzdG9yeUxpc3RlbmVycyIsImhpc3RvcnlTdGF0ZSIsInJlcGxhY2UiLCJsaXN0ZW5lcnMiLCJ0ZWFyZG93bnMiLCJwYXVzZVN0YXRlIiwicG9wU3RhdGVIYW5kbGVyIiwiZnJvbVN0YXRlIiwibGlzdGVuZXIiLCJwYXVzZUxpc3RlbmVycyIsImxpc3RlbiIsInRlYXJkb3duIiwiYmVmb3JlVW5sb2FkTGlzdGVuZXIiLCJoaXN0b3J5IiwiZGVzdHJveSIsImJ1aWxkU3RhdGUiLCJiYWNrIiwiZm9yd2FyZCIsInJlcGxhY2VkIiwiY29tcHV0ZVNjcm9sbCIsInVzZUhpc3RvcnlTdGF0ZU5hdmlnYXRpb24iLCJjaGFuZ2VMb2NhdGlvbiIsImhhc2hJbmRleCIsInB1c2giLCJjdXJyZW50U3RhdGUiLCJjcmVhdGVXZWJIaXN0b3J5IiwiaGlzdG9yeU5hdmlnYXRpb24iLCJoaXN0b3J5TGlzdGVuZXJzIiwiZ28iLCJ0cmlnZ2VyTGlzdGVuZXJzIiwicm91dGVySGlzdG9yeSIsImlzUm91dGVMb2NhdGlvbiIsInJvdXRlIiwiaXNSb3V0ZU5hbWUiLCJTVEFSVF9MT0NBVElPTl9OT1JNQUxJWkVEIiwiTmF2aWdhdGlvbkZhaWx1cmVTeW1ib2wiLCJOYXZpZ2F0aW9uRmFpbHVyZVR5cGUiLCJjcmVhdGVSb3V0ZXJFcnJvciIsImlzTmF2aWdhdGlvbkZhaWx1cmUiLCJCQVNFX1BBUkFNX1BBVFRFUk4iLCJCQVNFX1BBVEhfUEFSU0VSX09QVElPTlMiLCJSRUdFWF9DSEFSU19SRSIsInRva2Vuc1RvUGFyc2VyIiwic2NvcmUiLCJwYXR0ZXJuIiwic2VnbWVudFNjb3JlcyIsInRva2VuSW5kZXgiLCJzdWJTZWdtZW50U2NvcmUiLCJyZXBlYXRhYmxlIiwib3B0aW9uYWwiLCJyZWdleHAiLCJyZSIsInN1YlBhdHRlcm4iLCJwYXJzZSIsIm1hdGNoIiwic3RyaW5naWZ5IiwiYXZvaWREdXBsaWNhdGVkU2xhc2giLCJwYXJhbSIsImNvbXBhcmVTY29yZUFycmF5IiwiY29tcGFyZVBhdGhQYXJzZXJTY29yZSIsImFTY29yZSIsImJTY29yZSIsImlzTGFzdFNjb3JlTmVnYXRpdmUiLCJST09UX1RPS0VOIiwiVkFMSURfUEFSQU1fUkUiLCJ0b2tlbml6ZVBhdGgiLCJjcmFzaCIsImJ1ZmZlciIsInByZXZpb3VzU3RhdGUiLCJ0b2tlbnMiLCJmaW5hbGl6ZVNlZ21lbnQiLCJjaGFyIiwiY3VzdG9tUmUiLCJjb25zdW1lQnVmZmVyIiwiYWRkQ2hhclRvQnVmZmVyIiwiY3JlYXRlUm91dGVSZWNvcmRNYXRjaGVyIiwicmVjb3JkIiwicGFyc2VyIiwibWF0Y2hlciIsImNyZWF0ZVJvdXRlck1hdGNoZXIiLCJyb3V0ZXMiLCJnbG9iYWxPcHRpb25zIiwibWF0Y2hlcnMiLCJtYXRjaGVyTWFwIiwiZ2V0UmVjb3JkTWF0Y2hlciIsImFkZFJvdXRlIiwib3JpZ2luYWxSZWNvcmQiLCJpc1Jvb3RBZGQiLCJtYWluTm9ybWFsaXplZFJlY29yZCIsIm5vcm1hbGl6ZVJvdXRlUmVjb3JkIiwibm9ybWFsaXplZFJlY29yZHMiLCJhbGlhc2VzIiwiYWxpYXMiLCJvcmlnaW5hbE1hdGNoZXIiLCJub3JtYWxpemVkUmVjb3JkIiwicGFyZW50UGF0aCIsImNvbm5lY3RpbmdTbGFzaCIsImlzQWxpYXNSZWNvcmQiLCJyZW1vdmVSb3V0ZSIsImluc2VydE1hdGNoZXIiLCJtYXRjaGVyUmVmIiwiZ2V0Um91dGVzIiwiaXNSZWNvcmRDaGlsZE9mIiwicGFyYW1zRnJvbUxvY2F0aW9uIiwibWF0Y2hlZCIsInBhcmVudE1hdGNoZXIiLCJtZXJnZU1ldGFGaWVsZHMiLCJub3JtYWxpemVSZWNvcmRQcm9wcyIsInByb3BzT2JqZWN0IiwibWV0YSIsImRlZmF1bHRzIiwicGFydGlhbE9wdGlvbnMiLCJzZWFyY2hQYXJhbXMiLCJzZWFyY2hQYXJhbSIsImVxUG9zIiwiY3VycmVudFZhbHVlIiwibm9ybWFsaXplUXVlcnkiLCJub3JtYWxpemVkUXVlcnkiLCJtYXRjaGVkUm91dGVLZXkiLCJ2aWV3RGVwdGhLZXkiLCJyb3V0ZXJLZXkiLCJyb3V0ZUxvY2F0aW9uS2V5Iiwicm91dGVyVmlld0xvY2F0aW9uS2V5IiwidXNlQ2FsbGJhY2tzIiwiaGFuZGxlcnMiLCJndWFyZFRvUHJvbWlzZUZuIiwicnVuV2l0aENvbnRleHQiLCJlbnRlckNhbGxiYWNrQXJyYXkiLCJndWFyZFJldHVybiIsImd1YXJkQ2FsbCIsImV4dHJhY3RDb21wb25lbnRzR3VhcmRzIiwiZ3VhcmRUeXBlIiwiZ3VhcmRzIiwicmF3Q29tcG9uZW50IiwiaXNSb3V0ZUNvbXBvbmVudCIsImNvbXBvbmVudFByb21pc2UiLCJyZXNvbHZlZENvbXBvbmVudCIsInVzZUxpbmsiLCJyb3V0ZXIiLCJjdXJyZW50Um91dGUiLCJhY3RpdmVSZWNvcmRJbmRleCIsImxlbmd0aCIsInJvdXRlTWF0Y2hlZCIsImN1cnJlbnRNYXRjaGVkIiwicGFyZW50UmVjb3JkUGF0aCIsImdldE9yaWdpbmFsUGF0aCIsImlzQWN0aXZlIiwiaW5jbHVkZXNQYXJhbXMiLCJpc0V4YWN0QWN0aXZlIiwibmF2aWdhdGUiLCJndWFyZEV2ZW50IiwiUm91dGVyTGlua0ltcGwiLCJsaW5rIiwiZWxDbGFzcyIsImdldExpbmtDbGFzcyIsIlJvdXRlckxpbmsiLCJvdXRlciIsImlubmVyIiwiaW5uZXJWYWx1ZSIsIm91dGVyVmFsdWUiLCJwcm9wQ2xhc3MiLCJnbG9iYWxDbGFzcyIsImRlZmF1bHRDbGFzcyIsIlJvdXRlclZpZXdJbXBsIiwiaW5qZWN0ZWRSb3V0ZSIsInJvdXRlVG9EaXNwbGF5IiwiaW5qZWN0ZWREZXB0aCIsImluaXRpYWxEZXB0aCIsIm1hdGNoZWRSb3V0ZSIsIm1hdGNoZWRSb3V0ZVJlZiIsInZpZXdSZWYiLCJvbGRJbnN0YW5jZSIsIm9sZE5hbWUiLCJjdXJyZW50TmFtZSIsIlZpZXdDb21wb25lbnQiLCJyb3V0ZVByb3BzT3B0aW9uIiwicm91dGVQcm9wcyIsInNsb3RDb250ZW50IiwiUm91dGVyVmlldyIsImNyZWF0ZVJvdXRlciIsInBhcnNlUXVlcnkkMSIsInN0cmluZ2lmeVF1ZXJ5JDEiLCJiZWZvcmVHdWFyZHMiLCJiZWZvcmVSZXNvbHZlR3VhcmRzIiwiYWZ0ZXJHdWFyZHMiLCJwZW5kaW5nTG9jYXRpb24iLCJub3JtYWxpemVQYXJhbXMiLCJwYXJhbVZhbHVlIiwiZW5jb2RlUGFyYW1zIiwiZGVjb2RlUGFyYW1zIiwicGFyZW50T3JSb3V0ZSIsInJlY29yZE1hdGNoZXIiLCJyb3V0ZU1hdGNoZXIiLCJoYXNSb3V0ZSIsInJhd0xvY2F0aW9uIiwibG9jYXRpb25Ob3JtYWxpemVkIiwiaHJlZiIsIm1hdGNoZXJMb2NhdGlvbiIsInRhcmdldFBhcmFtcyIsImZ1bGxQYXRoIiwibG9jYXRpb25Bc09iamVjdCIsImNoZWNrQ2FuY2VsZWROYXZpZ2F0aW9uIiwicHVzaFdpdGhSZWRpcmVjdCIsImhhbmRsZVJlZGlyZWN0UmVjb3JkIiwibGFzdE1hdGNoZWQiLCJyZWRpcmVjdCIsIm5ld1RhcmdldExvY2F0aW9uIiwicmVkaXJlY3RlZEZyb20iLCJ0YXJnZXRMb2NhdGlvbiIsImZvcmNlIiwic2hvdWxkUmVkaXJlY3QiLCJ0b0xvY2F0aW9uIiwiZmFpbHVyZSIsImhhbmRsZVNjcm9sbCIsIm1hcmtBc1JlYWR5IiwidHJpZ2dlckVycm9yIiwiZmluYWxpemVOYXZpZ2F0aW9uIiwidHJpZ2dlckFmdGVyRWFjaCIsImNoZWNrQ2FuY2VsZWROYXZpZ2F0aW9uQW5kUmVqZWN0IiwiaW5zdGFsbGVkQXBwcyIsImxlYXZpbmdSZWNvcmRzIiwidXBkYXRpbmdSZWNvcmRzIiwiZW50ZXJpbmdSZWNvcmRzIiwiZXh0cmFjdENoYW5naW5nUmVjb3JkcyIsImNhbmNlbGVkTmF2aWdhdGlvbkNoZWNrIiwicnVuR3VhcmRRdWV1ZSIsImJlZm9yZUVudGVyIiwiaXNQdXNoIiwiaXNGaXJzdE5hdmlnYXRpb24iLCJyZW1vdmVIaXN0b3J5TGlzdGVuZXIiLCJzZXR1cExpc3RlbmVycyIsIl9mcm9tIiwiaW5mbyIsInJlYWR5SGFuZGxlcnMiLCJlcnJvckxpc3RlbmVycyIsInJlYWR5IiwibGlzdCIsImlzUmVhZHkiLCJzY3JvbGxCZWhhdmlvciIsInN0YXJ0ZWQiLCJyZWFjdGl2ZVJvdXRlIiwidW5tb3VudEFwcCIsInByb21pc2UiLCJyZWNvcmRGcm9tIiwicmVjb3JkVG8iLCJfaG9pc3RlZF8xNCIsIl9ob2lzdGVkXzE1IiwiX2hvaXN0ZWRfMTYiLCJfaG9pc3RlZF8xNyIsIl9ob2lzdGVkXzE5IiwiX2hvaXN0ZWRfMjAiLCJfaG9pc3RlZF8yMSIsIl9ob2lzdGVkXzIyIiwiX2hvaXN0ZWRfMjMiLCJfaG9pc3RlZF8yNSIsIl9jYWNoZSIsIl9ob2lzdGVkXzEzIiwiX2hvaXN0ZWRfMTgiLCIkcHJvcHMiLCJfaG9pc3RlZF8yNCIsIl9ob2lzdGVkXzI2IiwiX2hvaXN0ZWRfMjciLCJfaG9pc3RlZF8yOCIsIl93aXRoS2V5cyIsIiRvcHRpb25zIiwiTXVsdGlGYWN0b3JBdXRoIiwiaGVpZ2h0Iiwid2lkdGgiLCJjYW52YXMiLCJteV9pbWFnZV9kYXRhIiwicm93X2luZGV4IiwiY29sX2luZGV4IiwiZGF0YV9pbmRleCIsIl9ob2lzdGVkXzMyIiwiX3dpdGhTY29wZUlkIiwiX2hvaXN0ZWRfMzAiLCJfaG9pc3RlZF8zMSIsIl9ob2lzdGVkXzMzIiwiX3ZNb2RlbFRleHQiLCJfdk1vZGVsRHluYW1pYyIsIl9jb21wb25lbnRfTXVsdGlGYWN0b3JBdXRoIiwiX2hvaXN0ZWRfMjkiLCJfaG9pc3RlZF8zNCIsIl9jcmVhdGVTdGF0aWNWTm9kZSIsIl9ob2lzdGVkXzM1IiwiX2hvaXN0ZWRfMzciLCJfaG9pc3RlZF8zOCIsIl9ob2lzdGVkXzM5IiwiX2hvaXN0ZWRfNDAiLCJfaG9pc3RlZF80MSIsIl9ob2lzdGVkXzQyIiwiX2hvaXN0ZWRfNDMiLCJxdWVzdGlvbiIsIl93aXRoTW9kaWZpZXJzIiwicG9pbnQiLCJfaG9pc3RlZF8zNiIsImRpYWxvZ3VlIiwiSG9tZVZpZXciLCJDcnVkVmlldyIsIkxvZ2luVmlldyIsIk1hbmFnZURpYWxvZ3VlVmlldyIsIlBhc3N3b3JkUmVzZXRWaWV3IiwiVHJhbnNjcmlwdFNlYXJjaFZpZXciLCJBcHAiXSwibWFwcGluZ3MiOiJzc0JBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxHQUtBLFNBQVNBLEdBQVFDLEVBQUtDLEVBQWtCLENBQ3RDLE1BQU1DLEVBQU0sSUFBSSxJQUFJRixFQUFJLE1BQU0sR0FBRyxDQUFDLEVBQ2xDLE9BQU9DLEVBQW9CRSxHQUFRRCxFQUFJLElBQUlDLEVBQUksWUFBYSxDQUFBLEVBQUtBLEdBQVFELEVBQUksSUFBSUMsQ0FBRyxDQUN0RixDQUVBLE1BQU1DLEdBQTRFLENBQUEsRUFDNUVDLEdBQTRFLENBQUEsRUFDNUVDLEdBQU8sSUFBTSxDQUNuQixFQUNNQyxHQUFLLElBQU0sR0FDWEMsR0FBUUMsR0FBUUEsRUFBSSxXQUFXLENBQUMsSUFBTSxLQUFPQSxFQUFJLFdBQVcsQ0FBQyxJQUFNLE1BQ3hFQSxFQUFJLFdBQVcsQ0FBQyxFQUFJLEtBQU9BLEVBQUksV0FBVyxDQUFDLEVBQUksSUFDMUNDLEdBQW1CRCxHQUFRQSxFQUFJLFdBQVcsV0FBVyxFQUNyREUsR0FBUyxPQUFPLE9BQ2hCQyxHQUFTLENBQUNDLEVBQUtDLElBQU8sQ0FDMUIsTUFBTUMsRUFBSUYsRUFBSSxRQUFRQyxDQUFFLEVBQ3BCQyxFQUFJLElBQ05GLEVBQUksT0FBT0UsRUFBRyxDQUFDLENBRW5CLEVBQ01DLEdBQWlCLE9BQU8sVUFBVSxlQUNsQ0MsRUFBUyxDQUFDZCxFQUFLTSxJQUFRTyxHQUFlLEtBQUtiLEVBQUtNLENBQUcsRUFDbkRTLEVBQVUsTUFBTSxRQUNoQkMsR0FBU2hCLEdBQVFpQixHQUFh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
